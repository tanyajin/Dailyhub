var _ge=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var tbt=_ge((ha,fa)=>{function Sge(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lte(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var Aw={},Ege={get exports(){return Aw},set exports(t){Aw=t}},gP={},Z={},Mge={get exports(){return Z},set exports(t){Z=t}},xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_=Symbol.for("react.element"),Age=Symbol.for("react.portal"),Tge=Symbol.for("react.fragment"),Cge=Symbol.for("react.strict_mode"),Pge=Symbol.for("react.profiler"),Dge=Symbol.for("react.provider"),Rge=Symbol.for("react.context"),Oge=Symbol.for("react.forward_ref"),Lge=Symbol.for("react.suspense"),Ige=Symbol.for("react.memo"),kge=Symbol.for("react.lazy"),BG=Symbol.iterator;function Nge(t){return t===null||typeof t!="object"?null:(t=BG&&t[BG]||t["@@iterator"],typeof t=="function"?t:null)}var cte={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ute=Object.assign,dte={};function ex(t,e,n){this.props=t,this.context=e,this.refs=dte,this.updater=n||cte}ex.prototype.isReactComponent={};ex.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ex.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hte(){}hte.prototype=ex.prototype;function N4(t,e,n){this.props=t,this.context=e,this.refs=dte,this.updater=n||cte}var B4=N4.prototype=new hte;B4.constructor=N4;ute(B4,ex.prototype);B4.isPureReactComponent=!0;var zG=Array.isArray,fte=Object.prototype.hasOwnProperty,z4={current:null},pte={key:!0,ref:!0,__self:!0,__source:!0};function mte(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fte.call(e,i)&&!pte.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:W_,type:t,key:s,ref:o,props:r,_owner:z4.current}}function Bge(t,e){return{$$typeof:W_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function F4(t){return typeof t=="object"&&t!==null&&t.$$typeof===W_}function zge(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var FG=/\/+/g;function $3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zge(""+t.key):e.toString(36)}function mT(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case W_:case Age:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+$3(o,0):i,zG(r)?(n="",t!=null&&(n=t.replace(FG,"$&/")+"/"),mT(r,e,n,"",function(c){return c})):r!=null&&(F4(r)&&(r=Bge(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(FG,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",zG(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+$3(s,a);o+=mT(s,e,n,l,r)}else if(l=Nge(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+$3(s,a++),o+=mT(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function FE(t,e,n){if(t==null)return t;var i=[],r=0;return mT(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Fge(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lo={current:null},gT={transition:null},Uge={ReactCurrentDispatcher:lo,ReactCurrentBatchConfig:gT,ReactCurrentOwner:z4};xn.Children={map:FE,forEach:function(t,e,n){FE(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return FE(t,function(){e++}),e},toArray:function(t){return FE(t,function(e){return e})||[]},only:function(t){if(!F4(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xn.Component=ex;xn.Fragment=Tge;xn.Profiler=Pge;xn.PureComponent=N4;xn.StrictMode=Cge;xn.Suspense=Lge;xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uge;xn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ute({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=z4.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fte.call(e,l)&&!pte.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:W_,type:t.type,key:r,ref:s,props:i,_owner:o}};xn.createContext=function(t){return t={$$typeof:Rge,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dge,_context:t},t.Consumer=t};xn.createElement=mte;xn.createFactory=function(t){var e=mte.bind(null,t);return e.type=t,e};xn.createRef=function(){return{current:null}};xn.forwardRef=function(t){return{$$typeof:Oge,render:t}};xn.isValidElement=F4;xn.lazy=function(t){return{$$typeof:kge,_payload:{_status:-1,_result:t},_init:Fge}};xn.memo=function(t,e){return{$$typeof:Ige,type:t,compare:e===void 0?null:e}};xn.startTransition=function(t){var e=gT.transition;gT.transition={};try{t()}finally{gT.transition=e}};xn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xn.useCallback=function(t,e){return lo.current.useCallback(t,e)};xn.useContext=function(t){return lo.current.useContext(t)};xn.useDebugValue=function(){};xn.useDeferredValue=function(t){return lo.current.useDeferredValue(t)};xn.useEffect=function(t,e){return lo.current.useEffect(t,e)};xn.useId=function(){return lo.current.useId()};xn.useImperativeHandle=function(t,e,n){return lo.current.useImperativeHandle(t,e,n)};xn.useInsertionEffect=function(t,e){return lo.current.useInsertionEffect(t,e)};xn.useLayoutEffect=function(t,e){return lo.current.useLayoutEffect(t,e)};xn.useMemo=function(t,e){return lo.current.useMemo(t,e)};xn.useReducer=function(t,e,n){return lo.current.useReducer(t,e,n)};xn.useRef=function(t){return lo.current.useRef(t)};xn.useState=function(t){return lo.current.useState(t)};xn.useSyncExternalStore=function(t,e,n){return lo.current.useSyncExternalStore(t,e,n)};xn.useTransition=function(){return lo.current.useTransition()};xn.version="18.2.0";(function(t){t.exports=xn})(Mge);const ks=mP(Z),sC=Sge({__proto__:null,default:ks},[Z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vge=Z,Hge=Symbol.for("react.element"),jge=Symbol.for("react.fragment"),Gge=Object.prototype.hasOwnProperty,Wge=Vge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qge={key:!0,ref:!0,__self:!0,__source:!0};function gte(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Gge.call(e,i)&&!qge.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Hge,type:t,key:s,ref:o,props:r,_owner:Wge.current}}gP.Fragment=jge;gP.jsx=gte;gP.jsxs=gte;(function(t){t.exports=gP})(Ege);const fg=Aw.Fragment,Te=Aw.jsx,jt=Aw.jsxs,$ge=Object.freeze(Object.defineProperty({__proto__:null,Fragment:fg,jsx:Te,jsxs:jt},Symbol.toStringTag,{value:"Module"}));var fN={},du={},Xge={get exports(){return du},set exports(t){du=t}},Sa={},pN={},Yge={get exports(){return pN},set exports(t){pN=t}},vte={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,U){var N=H.length;H.push(U);e:for(;0<N;){var k=N-1>>>1,z=H[k];if(0<r(z,U))H[k]=U,H[N]=z,N=k;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var U=H[0],N=H.pop();if(N!==U){H[0]=N;e:for(var k=0,z=H.length,W=z>>>1;k<W;){var K=2*(k+1)-1,J=H[K],F=K+1,ee=H[F];if(0>r(J,N))F<z&&0>r(ee,J)?(H[k]=ee,H[F]=N,k=F):(H[k]=J,H[K]=N,k=K);else if(F<z&&0>r(ee,N))H[k]=ee,H[F]=N,k=F;else break e}}return U}function r(H,U){var N=H.sortIndex-U.sortIndex;return N!==0?N:H.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(H){for(var U=n(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=H)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function b(H){if(m=!1,x(H),!p)if(n(l)!==null)p=!0,$(w);else{var U=n(c);U!==null&&X(b,U.startTime-H)}}function w(H,U){p=!1,m&&(m=!1,v(S),S=-1),f=!0;var N=h;try{for(x(U),u=n(l);u!==null&&(!(u.expirationTime>U)||H&&!P());){var k=u.callback;if(typeof k=="function"){u.callback=null,h=u.priorityLevel;var z=k(u.expirationTime<=U);U=t.unstable_now(),typeof z=="function"?u.callback=z:u===n(l)&&i(l),x(U)}else i(l);u=n(l)}if(u!==null)var W=!0;else{var K=n(c);K!==null&&X(b,K.startTime-U),W=!1}return W}finally{u=null,h=N,f=!1}}var E=!1,A=null,S=-1,C=5,T=-1;function P(){return!(t.unstable_now()-T<C)}function R(){if(A!==null){var H=t.unstable_now();T=H;var U=!0;try{U=A(!0,H)}finally{U?L():(E=!1,A=null)}}else E=!1}var L;if(typeof y=="function")L=function(){y(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,B=O.port2;O.port1.onmessage=R,L=function(){B.postMessage(null)}}else L=function(){g(R,0)};function $(H){A=H,E||(E=!0,L())}function X(H,U){S=g(function(){H(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,$(w))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var N=h;h=U;try{return H()}finally{h=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var N=h;h=H;try{return U()}finally{h=N}},t.unstable_scheduleCallback=function(H,U,N){var k=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?k+N:k):N=k,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=N+z,H={id:d++,callback:U,priorityLevel:H,startTime:N,expirationTime:z,sortIndex:-1},N>k?(H.sortIndex=N,e(c,H),n(l)===null&&H===n(c)&&(m?(v(S),S=-1):m=!0,X(b,N-k))):(H.sortIndex=z,e(l,H),p||f||(p=!0,$(w))),H},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(H){var U=h;return function(){var N=h;h=U;try{return H.apply(this,arguments)}finally{h=N}}}})(vte);(function(t){t.exports=vte})(Yge);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yte=Z,ba=pN;function et(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xte=new Set,Tw={};function pg(t,e){hy(t,e),hy(t+"Capture",e)}function hy(t,e){for(Tw[t]=e,t=0;t<e.length;t++)xte.add(e[t])}var Td=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mN=Object.prototype.hasOwnProperty,Kge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UG={},VG={};function Zge(t){return mN.call(VG,t)?!0:mN.call(UG,t)?!1:Kge.test(t)?VG[t]=!0:(UG[t]=!0,!1)}function Qge(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jge(t,e,n,i){if(e===null||typeof e>"u"||Qge(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function co(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fs[t]=new co(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fs[e]=new co(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fs[t]=new co(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fs[t]=new co(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fs[t]=new co(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fs[t]=new co(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fs[t]=new co(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fs[t]=new co(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fs[t]=new co(t,5,!1,t.toLowerCase(),null,!1,!1)});var U4=/[\-:]([a-z])/g;function V4(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(U4,V4);fs[e]=new co(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(U4,V4);fs[e]=new co(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(U4,V4);fs[e]=new co(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fs[t]=new co(t,1,!1,t.toLowerCase(),null,!1,!1)});fs.xlinkHref=new co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fs[t]=new co(t,1,!1,t.toLowerCase(),null,!0,!0)});function H4(t,e,n,i){var r=fs.hasOwnProperty(e)?fs[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jge(e,n,r,i)&&(n=null),i||r===null?Zge(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var jd=yte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,UE=Symbol.for("react.element"),a0=Symbol.for("react.portal"),l0=Symbol.for("react.fragment"),j4=Symbol.for("react.strict_mode"),gN=Symbol.for("react.profiler"),bte=Symbol.for("react.provider"),wte=Symbol.for("react.context"),G4=Symbol.for("react.forward_ref"),vN=Symbol.for("react.suspense"),yN=Symbol.for("react.suspense_list"),W4=Symbol.for("react.memo"),Bh=Symbol.for("react.lazy"),_te=Symbol.for("react.offscreen"),HG=Symbol.iterator;function a1(t){return t===null||typeof t!="object"?null:(t=HG&&t[HG]||t["@@iterator"],typeof t=="function"?t:null)}var Ni=Object.assign,X3;function _b(t){if(X3===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);X3=e&&e[1]||""}return`
`+X3+t}var Y3=!1;function K3(t,e){if(!t||Y3)return"";Y3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Y3=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_b(t):""}function eve(t){switch(t.tag){case 5:return _b(t.type);case 16:return _b("Lazy");case 13:return _b("Suspense");case 19:return _b("SuspenseList");case 0:case 2:case 15:return t=K3(t.type,!1),t;case 11:return t=K3(t.type.render,!1),t;case 1:return t=K3(t.type,!0),t;default:return""}}function xN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case l0:return"Fragment";case a0:return"Portal";case gN:return"Profiler";case j4:return"StrictMode";case vN:return"Suspense";case yN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wte:return(t.displayName||"Context")+".Consumer";case bte:return(t._context.displayName||"Context")+".Provider";case G4:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case W4:return e=t.displayName||null,e!==null?e:xN(t.type)||"Memo";case Bh:e=t._payload,t=t._init;try{return xN(t(e))}catch{}}return null}function tve(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xN(e);case 8:return e===j4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Of(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ste(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nve(t){var e=Ste(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function VE(t){t._valueTracker||(t._valueTracker=nve(t))}function Ete(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ste(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function oC(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bN(t,e){var n=e.checked;return Ni({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jG(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Of(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mte(t,e){e=e.checked,e!=null&&H4(t,"checked",e,!1)}function wN(t,e){Mte(t,e);var n=Of(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_N(t,e.type,n):e.hasOwnProperty("defaultValue")&&_N(t,e.type,Of(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function GG(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _N(t,e,n){(e!=="number"||oC(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sb=Array.isArray;function N0(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Of(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function SN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(et(91));return Ni({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function WG(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(et(92));if(Sb(n)){if(1<n.length)throw Error(et(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Of(n)}}function Ate(t,e){var n=Of(e.value),i=Of(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function qG(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tte(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function EN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tte(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var HE,Cte=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(HE=HE||document.createElement("div"),HE.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=HE.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cw(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ub={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ive=["Webkit","ms","Moz","O"];Object.keys(Ub).forEach(function(t){ive.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ub[e]=Ub[t]})});function Pte(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ub.hasOwnProperty(t)&&Ub[t]?(""+e).trim():e+"px"}function Dte(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Pte(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var rve=Ni({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function MN(t,e){if(e){if(rve[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(et(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(et(62))}}function AN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TN=null;function q4(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var CN=null,B0=null,z0=null;function $G(t){if(t=X_(t)){if(typeof CN!="function")throw Error(et(280));var e=t.stateNode;e&&(e=wP(e),CN(t.stateNode,t.type,e))}}function Rte(t){B0?z0?z0.push(t):z0=[t]:B0=t}function Ote(){if(B0){var t=B0,e=z0;if(z0=B0=null,$G(t),e)for(t=0;t<e.length;t++)$G(e[t])}}function Lte(t,e){return t(e)}function Ite(){}var Z3=!1;function kte(t,e,n){if(Z3)return t(e,n);Z3=!0;try{return Lte(t,e,n)}finally{Z3=!1,(B0!==null||z0!==null)&&(Ite(),Ote())}}function Pw(t,e){var n=t.stateNode;if(n===null)return null;var i=wP(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(et(231,e,typeof n));return n}var PN=!1;if(Td)try{var l1={};Object.defineProperty(l1,"passive",{get:function(){PN=!0}}),window.addEventListener("test",l1,l1),window.removeEventListener("test",l1,l1)}catch{PN=!1}function sve(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Vb=!1,aC=null,lC=!1,DN=null,ove={onError:function(t){Vb=!0,aC=t}};function ave(t,e,n,i,r,s,o,a,l){Vb=!1,aC=null,sve.apply(ove,arguments)}function lve(t,e,n,i,r,s,o,a,l){if(ave.apply(this,arguments),Vb){if(Vb){var c=aC;Vb=!1,aC=null}else throw Error(et(198));lC||(lC=!0,DN=c)}}function mg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nte(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function XG(t){if(mg(t)!==t)throw Error(et(188))}function cve(t){var e=t.alternate;if(!e){if(e=mg(t),e===null)throw Error(et(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return XG(r),t;if(s===i)return XG(r),e;s=s.sibling}throw Error(et(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==i)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?t:e}function Bte(t){return t=cve(t),t!==null?zte(t):null}function zte(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zte(t);if(e!==null)return e;t=t.sibling}return null}var Fte=ba.unstable_scheduleCallback,YG=ba.unstable_cancelCallback,uve=ba.unstable_shouldYield,dve=ba.unstable_requestPaint,nr=ba.unstable_now,hve=ba.unstable_getCurrentPriorityLevel,$4=ba.unstable_ImmediatePriority,Ute=ba.unstable_UserBlockingPriority,cC=ba.unstable_NormalPriority,fve=ba.unstable_LowPriority,Vte=ba.unstable_IdlePriority,vP=null,tu=null;function pve(t){if(tu&&typeof tu.onCommitFiberRoot=="function")try{tu.onCommitFiberRoot(vP,t,void 0,(t.current.flags&128)===128)}catch{}}var Jl=Math.clz32?Math.clz32:vve,mve=Math.log,gve=Math.LN2;function vve(t){return t>>>=0,t===0?32:31-(mve(t)/gve|0)|0}var jE=64,GE=4194304;function Eb(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uC(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Eb(a):(s&=o,s!==0&&(i=Eb(s)))}else o=n&~r,o!==0?i=Eb(o):s!==0&&(i=Eb(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Jl(e),r=1<<n,i|=t[n],e&=~r;return i}function yve(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xve(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Jl(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=yve(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function RN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hte(){var t=jE;return jE<<=1,!(jE&4194240)&&(jE=64),t}function Q3(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function q_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jl(e),t[e]=n}function bve(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Jl(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function X4(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Jl(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Gn=0;function jte(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gte,Y4,Wte,qte,$te,ON=!1,WE=[],pf=null,mf=null,gf=null,Dw=new Map,Rw=new Map,Wh=[],wve="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function KG(t,e){switch(t){case"focusin":case"focusout":pf=null;break;case"dragenter":case"dragleave":mf=null;break;case"mouseover":case"mouseout":gf=null;break;case"pointerover":case"pointerout":Dw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rw.delete(e.pointerId)}}function c1(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=X_(e),e!==null&&Y4(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function _ve(t,e,n,i,r){switch(e){case"focusin":return pf=c1(pf,t,e,n,i,r),!0;case"dragenter":return mf=c1(mf,t,e,n,i,r),!0;case"mouseover":return gf=c1(gf,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Dw.set(s,c1(Dw.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rw.set(s,c1(Rw.get(s)||null,t,e,n,i,r)),!0}return!1}function Xte(t){var e=um(t.target);if(e!==null){var n=mg(e);if(n!==null){if(e=n.tag,e===13){if(e=Nte(n),e!==null){t.blockedOn=e,$te(t.priority,function(){Wte(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vT(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=LN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);TN=i,n.target.dispatchEvent(i),TN=null}else return e=X_(n),e!==null&&Y4(e),t.blockedOn=n,!1;e.shift()}return!0}function ZG(t,e,n){vT(t)&&n.delete(e)}function Sve(){ON=!1,pf!==null&&vT(pf)&&(pf=null),mf!==null&&vT(mf)&&(mf=null),gf!==null&&vT(gf)&&(gf=null),Dw.forEach(ZG),Rw.forEach(ZG)}function u1(t,e){t.blockedOn===e&&(t.blockedOn=null,ON||(ON=!0,ba.unstable_scheduleCallback(ba.unstable_NormalPriority,Sve)))}function Ow(t){function e(r){return u1(r,t)}if(0<WE.length){u1(WE[0],t);for(var n=1;n<WE.length;n++){var i=WE[n];i.blockedOn===t&&(i.blockedOn=null)}}for(pf!==null&&u1(pf,t),mf!==null&&u1(mf,t),gf!==null&&u1(gf,t),Dw.forEach(e),Rw.forEach(e),n=0;n<Wh.length;n++)i=Wh[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Wh.length&&(n=Wh[0],n.blockedOn===null);)Xte(n),n.blockedOn===null&&Wh.shift()}var F0=jd.ReactCurrentBatchConfig,dC=!0;function Eve(t,e,n,i){var r=Gn,s=F0.transition;F0.transition=null;try{Gn=1,K4(t,e,n,i)}finally{Gn=r,F0.transition=s}}function Mve(t,e,n,i){var r=Gn,s=F0.transition;F0.transition=null;try{Gn=4,K4(t,e,n,i)}finally{Gn=r,F0.transition=s}}function K4(t,e,n,i){if(dC){var r=LN(t,e,n,i);if(r===null)lO(t,e,i,hC,n),KG(t,i);else if(_ve(r,t,e,n,i))i.stopPropagation();else if(KG(t,i),e&4&&-1<wve.indexOf(t)){for(;r!==null;){var s=X_(r);if(s!==null&&Gte(s),s=LN(t,e,n,i),s===null&&lO(t,e,i,hC,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else lO(t,e,i,null,n)}}var hC=null;function LN(t,e,n,i){if(hC=null,t=q4(i),t=um(t),t!==null)if(e=mg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nte(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hC=t,null}function Yte(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hve()){case $4:return 1;case Ute:return 4;case cC:case fve:return 16;case Vte:return 536870912;default:return 16}default:return 16}}var Zh=null,Z4=null,yT=null;function Kte(){if(yT)return yT;var t,e=Z4,n=e.length,i,r="value"in Zh?Zh.value:Zh.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return yT=r.slice(t,1<i?1-i:void 0)}function xT(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qE(){return!0}function QG(){return!1}function Ea(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qE:QG,this.isPropagationStopped=QG,this}return Ni(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qE)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qE)},persist:function(){},isPersistent:qE}),e}var tx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Q4=Ea(tx),$_=Ni({},tx,{view:0,detail:0}),Ave=Ea($_),J3,eO,d1,yP=Ni({},$_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:J4,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==d1&&(d1&&t.type==="mousemove"?(J3=t.screenX-d1.screenX,eO=t.screenY-d1.screenY):eO=J3=0,d1=t),J3)},movementY:function(t){return"movementY"in t?t.movementY:eO}}),JG=Ea(yP),Tve=Ni({},yP,{dataTransfer:0}),Cve=Ea(Tve),Pve=Ni({},$_,{relatedTarget:0}),tO=Ea(Pve),Dve=Ni({},tx,{animationName:0,elapsedTime:0,pseudoElement:0}),Rve=Ea(Dve),Ove=Ni({},tx,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lve=Ea(Ove),Ive=Ni({},tx,{data:0}),eW=Ea(Ive),kve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nve={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zve(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bve[t])?!!e[t]:!1}function J4(){return zve}var Fve=Ni({},$_,{key:function(t){if(t.key){var e=kve[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xT(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nve[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:J4,charCode:function(t){return t.type==="keypress"?xT(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xT(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uve=Ea(Fve),Vve=Ni({},yP,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tW=Ea(Vve),Hve=Ni({},$_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:J4}),jve=Ea(Hve),Gve=Ni({},tx,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wve=Ea(Gve),qve=Ni({},yP,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$ve=Ea(qve),Xve=[9,13,27,32],eU=Td&&"CompositionEvent"in window,Hb=null;Td&&"documentMode"in document&&(Hb=document.documentMode);var Yve=Td&&"TextEvent"in window&&!Hb,Zte=Td&&(!eU||Hb&&8<Hb&&11>=Hb),nW=String.fromCharCode(32),iW=!1;function Qte(t,e){switch(t){case"keyup":return Xve.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jte(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var c0=!1;function Kve(t,e){switch(t){case"compositionend":return Jte(e);case"keypress":return e.which!==32?null:(iW=!0,nW);case"textInput":return t=e.data,t===nW&&iW?null:t;default:return null}}function Zve(t,e){if(c0)return t==="compositionend"||!eU&&Qte(t,e)?(t=Kte(),yT=Z4=Zh=null,c0=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zte&&e.locale!=="ko"?null:e.data;default:return null}}var Qve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rW(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qve[t.type]:e==="textarea"}function ene(t,e,n,i){Rte(i),e=fC(e,"onChange"),0<e.length&&(n=new Q4("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var jb=null,Lw=null;function Jve(t){dne(t,0)}function xP(t){var e=h0(t);if(Ete(e))return t}function e0e(t,e){if(t==="change")return e}var tne=!1;if(Td){var nO;if(Td){var iO="oninput"in document;if(!iO){var sW=document.createElement("div");sW.setAttribute("oninput","return;"),iO=typeof sW.oninput=="function"}nO=iO}else nO=!1;tne=nO&&(!document.documentMode||9<document.documentMode)}function oW(){jb&&(jb.detachEvent("onpropertychange",nne),Lw=jb=null)}function nne(t){if(t.propertyName==="value"&&xP(Lw)){var e=[];ene(e,Lw,t,q4(t)),kte(Jve,e)}}function t0e(t,e,n){t==="focusin"?(oW(),jb=e,Lw=n,jb.attachEvent("onpropertychange",nne)):t==="focusout"&&oW()}function n0e(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xP(Lw)}function i0e(t,e){if(t==="click")return xP(e)}function r0e(t,e){if(t==="input"||t==="change")return xP(e)}function s0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ic=typeof Object.is=="function"?Object.is:s0e;function Iw(t,e){if(ic(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!mN.call(e,r)||!ic(t[r],e[r]))return!1}return!0}function aW(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lW(t,e){var n=aW(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=aW(n)}}function ine(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ine(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rne(){for(var t=window,e=oC();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=oC(t.document)}return e}function tU(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o0e(t){var e=rne(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ine(n.ownerDocument.documentElement,n)){if(i!==null&&tU(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=lW(n,s);var o=lW(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a0e=Td&&"documentMode"in document&&11>=document.documentMode,u0=null,IN=null,Gb=null,kN=!1;function cW(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kN||u0==null||u0!==oC(i)||(i=u0,"selectionStart"in i&&tU(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Gb&&Iw(Gb,i)||(Gb=i,i=fC(IN,"onSelect"),0<i.length&&(e=new Q4("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=u0)))}function $E(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var d0={animationend:$E("Animation","AnimationEnd"),animationiteration:$E("Animation","AnimationIteration"),animationstart:$E("Animation","AnimationStart"),transitionend:$E("Transition","TransitionEnd")},rO={},sne={};Td&&(sne=document.createElement("div").style,"AnimationEvent"in window||(delete d0.animationend.animation,delete d0.animationiteration.animation,delete d0.animationstart.animation),"TransitionEvent"in window||delete d0.transitionend.transition);function bP(t){if(rO[t])return rO[t];if(!d0[t])return t;var e=d0[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sne)return rO[t]=e[n];return t}var one=bP("animationend"),ane=bP("animationiteration"),lne=bP("animationstart"),cne=bP("transitionend"),une=new Map,uW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yf(t,e){une.set(t,e),pg(e,[t])}for(var sO=0;sO<uW.length;sO++){var oO=uW[sO],l0e=oO.toLowerCase(),c0e=oO[0].toUpperCase()+oO.slice(1);Yf(l0e,"on"+c0e)}Yf(one,"onAnimationEnd");Yf(ane,"onAnimationIteration");Yf(lne,"onAnimationStart");Yf("dblclick","onDoubleClick");Yf("focusin","onFocus");Yf("focusout","onBlur");Yf(cne,"onTransitionEnd");hy("onMouseEnter",["mouseout","mouseover"]);hy("onMouseLeave",["mouseout","mouseover"]);hy("onPointerEnter",["pointerout","pointerover"]);hy("onPointerLeave",["pointerout","pointerover"]);pg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pg("onBeforeInput",["compositionend","keypress","textInput","paste"]);pg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u0e=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mb));function dW(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,lve(i,e,void 0,t),t.currentTarget=null}function dne(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;dW(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;dW(r,a,c),s=l}}}if(lC)throw t=DN,lC=!1,DN=null,t}function hi(t,e){var n=e[UN];n===void 0&&(n=e[UN]=new Set);var i=t+"__bubble";n.has(i)||(hne(e,t,2,!1),n.add(i))}function aO(t,e,n){var i=0;e&&(i|=4),hne(n,t,i,e)}var XE="_reactListening"+Math.random().toString(36).slice(2);function kw(t){if(!t[XE]){t[XE]=!0,xte.forEach(function(n){n!=="selectionchange"&&(u0e.has(n)||aO(n,!1,t),aO(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[XE]||(e[XE]=!0,aO("selectionchange",!1,e))}}function hne(t,e,n,i){switch(Yte(e)){case 1:var r=Eve;break;case 4:r=Mve;break;default:r=K4}n=r.bind(null,e,n,t),r=void 0,!PN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function lO(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=um(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}kte(function(){var c=s,d=q4(n),u=[];e:{var h=une.get(t);if(h!==void 0){var f=Q4,p=t;switch(t){case"keypress":if(xT(n)===0)break e;case"keydown":case"keyup":f=Uve;break;case"focusin":p="focus",f=tO;break;case"focusout":p="blur",f=tO;break;case"beforeblur":case"afterblur":f=tO;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=JG;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Cve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=jve;break;case one:case ane:case lne:f=Rve;break;case cne:f=Wve;break;case"scroll":f=Ave;break;case"wheel":f=$ve;break;case"copy":case"cut":case"paste":f=Lve;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=tW}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var y=c,x;y!==null;){x=y;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,v!==null&&(b=Pw(y,v),b!=null&&m.push(Nw(y,b,x)))),g)break;y=y.return}0<m.length&&(h=new f(h,p,null,n,d),u.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==TN&&(p=n.relatedTarget||n.fromElement)&&(um(p)||p[Cd]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?um(p):null,p!==null&&(g=mg(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=JG,b="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=tW,b="onPointerLeave",v="onPointerEnter",y="pointer"),g=f==null?h:h0(f),x=p==null?h:h0(p),h=new m(b,y+"leave",f,n,d),h.target=g,h.relatedTarget=x,b=null,um(d)===c&&(m=new m(v,y+"enter",p,n,d),m.target=x,m.relatedTarget=g,b=m),g=b,f&&p)t:{for(m=f,v=p,y=0,x=m;x;x=Wg(x))y++;for(x=0,b=v;b;b=Wg(b))x++;for(;0<y-x;)m=Wg(m),y--;for(;0<x-y;)v=Wg(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Wg(m),v=Wg(v)}m=null}else m=null;f!==null&&hW(u,h,f,m,!1),p!==null&&g!==null&&hW(u,g,p,m,!0)}}e:{if(h=c?h0(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=e0e;else if(rW(h))if(tne)w=r0e;else{w=n0e;var E=t0e}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=i0e);if(w&&(w=w(t,c))){ene(u,w,n,d);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&_N(h,"number",h.value)}switch(E=c?h0(c):window,t){case"focusin":(rW(E)||E.contentEditable==="true")&&(u0=E,IN=c,Gb=null);break;case"focusout":Gb=IN=u0=null;break;case"mousedown":kN=!0;break;case"contextmenu":case"mouseup":case"dragend":kN=!1,cW(u,n,d);break;case"selectionchange":if(a0e)break;case"keydown":case"keyup":cW(u,n,d)}var A;if(eU)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else c0?Qte(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Zte&&n.locale!=="ko"&&(c0||S!=="onCompositionStart"?S==="onCompositionEnd"&&c0&&(A=Kte()):(Zh=d,Z4="value"in Zh?Zh.value:Zh.textContent,c0=!0)),E=fC(c,S),0<E.length&&(S=new eW(S,t,null,n,d),u.push({event:S,listeners:E}),A?S.data=A:(A=Jte(n),A!==null&&(S.data=A)))),(A=Yve?Kve(t,n):Zve(t,n))&&(c=fC(c,"onBeforeInput"),0<c.length&&(d=new eW("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=A))}dne(u,e)})}function Nw(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fC(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pw(t,n),s!=null&&i.unshift(Nw(t,s,r)),s=Pw(t,e),s!=null&&i.push(Nw(t,s,r))),t=t.return}return i}function Wg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hW(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Pw(n,s),l!=null&&o.unshift(Nw(n,l,a))):r||(l=Pw(n,s),l!=null&&o.push(Nw(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var d0e=/\r\n?/g,h0e=/\u0000|\uFFFD/g;function fW(t){return(typeof t=="string"?t:""+t).replace(d0e,`
`).replace(h0e,"")}function YE(t,e,n){if(e=fW(e),fW(t)!==e&&n)throw Error(et(425))}function pC(){}var NN=null,BN=null;function zN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var FN=typeof setTimeout=="function"?setTimeout:void 0,f0e=typeof clearTimeout=="function"?clearTimeout:void 0,pW=typeof Promise=="function"?Promise:void 0,p0e=typeof queueMicrotask=="function"?queueMicrotask:typeof pW<"u"?function(t){return pW.resolve(null).then(t).catch(m0e)}:FN;function m0e(t){setTimeout(function(){throw t})}function cO(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ow(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ow(e)}function vf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mW(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nx=Math.random().toString(36).slice(2),$c="__reactFiber$"+nx,Bw="__reactProps$"+nx,Cd="__reactContainer$"+nx,UN="__reactEvents$"+nx,g0e="__reactListeners$"+nx,v0e="__reactHandles$"+nx;function um(t){var e=t[$c];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cd]||n[$c]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mW(t);t!==null;){if(n=t[$c])return n;t=mW(t)}return e}t=n,n=t.parentNode}return null}function X_(t){return t=t[$c]||t[Cd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function h0(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(et(33))}function wP(t){return t[Bw]||null}var VN=[],f0=-1;function Kf(t){return{current:t}}function xi(t){0>f0||(t.current=VN[f0],VN[f0]=null,f0--)}function ci(t,e){f0++,VN[f0]=t.current,t.current=e}var Lf={},Us=Kf(Lf),Lo=Kf(!1),Wm=Lf;function fy(t,e){var n=t.type.contextTypes;if(!n)return Lf;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Io(t){return t=t.childContextTypes,t!=null}function mC(){xi(Lo),xi(Us)}function gW(t,e,n){if(Us.current!==Lf)throw Error(et(168));ci(Us,e),ci(Lo,n)}function fne(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(et(108,tve(t)||"Unknown",r));return Ni({},n,i)}function gC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lf,Wm=Us.current,ci(Us,t),ci(Lo,Lo.current),!0}function vW(t,e,n){var i=t.stateNode;if(!i)throw Error(et(169));n?(t=fne(t,e,Wm),i.__reactInternalMemoizedMergedChildContext=t,xi(Lo),xi(Us),ci(Us,t)):xi(Lo),ci(Lo,n)}var td=null,_P=!1,uO=!1;function pne(t){td===null?td=[t]:td.push(t)}function y0e(t){_P=!0,pne(t)}function Zf(){if(!uO&&td!==null){uO=!0;var t=0,e=Gn;try{var n=td;for(Gn=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}td=null,_P=!1}catch(r){throw td!==null&&(td=td.slice(t+1)),Fte($4,Zf),r}finally{Gn=e,uO=!1}}return null}var p0=[],m0=0,vC=null,yC=0,Qa=[],Ja=0,qm=null,ad=1,ld="";function Bp(t,e){p0[m0++]=yC,p0[m0++]=vC,vC=t,yC=e}function mne(t,e,n){Qa[Ja++]=ad,Qa[Ja++]=ld,Qa[Ja++]=qm,qm=t;var i=ad;t=ld;var r=32-Jl(i)-1;i&=~(1<<r),n+=1;var s=32-Jl(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ad=1<<32-Jl(e)+r|n<<r|i,ld=s+t}else ad=1<<s|n<<r|i,ld=t}function nU(t){t.return!==null&&(Bp(t,1),mne(t,1,0))}function iU(t){for(;t===vC;)vC=p0[--m0],p0[m0]=null,yC=p0[--m0],p0[m0]=null;for(;t===qm;)qm=Qa[--Ja],Qa[Ja]=null,ld=Qa[--Ja],Qa[Ja]=null,ad=Qa[--Ja],Qa[Ja]=null}var pa=null,aa=null,Ei=!1,Hl=null;function gne(t,e){var n=il(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yW(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pa=t,aa=vf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pa=t,aa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qm!==null?{id:ad,overflow:ld}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=il(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pa=t,aa=null,!0):!1;default:return!1}}function HN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jN(t){if(Ei){var e=aa;if(e){var n=e;if(!yW(t,e)){if(HN(t))throw Error(et(418));e=vf(n.nextSibling);var i=pa;e&&yW(t,e)?gne(i,n):(t.flags=t.flags&-4097|2,Ei=!1,pa=t)}}else{if(HN(t))throw Error(et(418));t.flags=t.flags&-4097|2,Ei=!1,pa=t}}}function xW(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pa=t}function KE(t){if(t!==pa)return!1;if(!Ei)return xW(t),Ei=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zN(t.type,t.memoizedProps)),e&&(e=aa)){if(HN(t))throw vne(),Error(et(418));for(;e;)gne(t,e),e=vf(e.nextSibling)}if(xW(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(et(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){aa=vf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}aa=null}}else aa=pa?vf(t.stateNode.nextSibling):null;return!0}function vne(){for(var t=aa;t;)t=vf(t.nextSibling)}function py(){aa=pa=null,Ei=!1}function rU(t){Hl===null?Hl=[t]:Hl.push(t)}var x0e=jd.ReactCurrentBatchConfig;function Ul(t,e){if(t&&t.defaultProps){e=Ni({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var xC=Kf(null),bC=null,g0=null,sU=null;function oU(){sU=g0=bC=null}function aU(t){var e=xC.current;xi(xC),t._currentValue=e}function GN(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function U0(t,e){bC=t,sU=g0=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(To=!0),t.firstContext=null)}function fl(t){var e=t._currentValue;if(sU!==t)if(t={context:t,memoizedValue:e,next:null},g0===null){if(bC===null)throw Error(et(308));g0=t,bC.dependencies={lanes:0,firstContext:t}}else g0=g0.next=t;return e}var dm=null;function lU(t){dm===null?dm=[t]:dm.push(t)}function yne(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,lU(e)):(n.next=r.next,r.next=n),e.interleaved=n,Pd(t,i)}function Pd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zh=!1;function cU(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xne(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vd(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yf(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Tn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Pd(t,n)}return r=i.interleaved,r===null?(e.next=e,lU(i)):(e.next=r.next,r.next=e),i.interleaved=e,Pd(t,n)}function bT(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,X4(t,n)}}function bW(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wC(t,e,n,i){var r=t.updateQueue;zh=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=r.baseState;o=0,d=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(f,u,h);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,u,h):p,h==null)break e;u=Ni({},u,h);break e;case 2:zh=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=u):d=d.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(d===null&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Xm|=o,t.lanes=o,t.memoizedState=u}}function wW(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(et(191,r));r.call(i)}}}var bne=new yte.Component().refs;function WN(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ni({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var SP={isMounted:function(t){return(t=t._reactInternals)?mg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ro(),r=bf(t),s=vd(i,r);s.payload=e,n!=null&&(s.callback=n),e=yf(t,s,r),e!==null&&(ec(e,t,r,i),bT(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ro(),r=bf(t),s=vd(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=yf(t,s,r),e!==null&&(ec(e,t,r,i),bT(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ro(),i=bf(t),r=vd(n,i);r.tag=2,e!=null&&(r.callback=e),e=yf(t,r,i),e!==null&&(ec(e,t,i,n),bT(e,t,i))}};function _W(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Iw(n,i)||!Iw(r,s):!0}function wne(t,e,n){var i=!1,r=Lf,s=e.contextType;return typeof s=="object"&&s!==null?s=fl(s):(r=Io(e)?Wm:Us.current,i=e.contextTypes,s=(i=i!=null)?fy(t,r):Lf),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=SP,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function SW(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&SP.enqueueReplaceState(e,e.state,null)}function qN(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=bne,cU(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=fl(s):(s=Io(e)?Wm:Us.current,r.context=fy(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(WN(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&SP.enqueueReplaceState(r,r.state,null),wC(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function h1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var i=n.stateNode}if(!i)throw Error(et(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===bne&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,t))}return t}function ZE(t,e){throw t=Object.prototype.toString.call(e),Error(et(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function EW(t){var e=t._init;return e(t._payload)}function _ne(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=wf(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,b){return y===null||y.tag!==6?(y=vO(x,v.mode,b),y.return=v,y):(y=r(y,x),y.return=v,y)}function l(v,y,x,b){var w=x.type;return w===l0?d(v,y,x.props.children,b,x.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bh&&EW(w)===y.type)?(b=r(y,x.props),b.ref=h1(v,y,x),b.return=v,b):(b=AT(x.type,x.key,x.props,null,v.mode,b),b.ref=h1(v,y,x),b.return=v,b)}function c(v,y,x,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=yO(x,v.mode,b),y.return=v,y):(y=r(y,x.children||[]),y.return=v,y)}function d(v,y,x,b,w){return y===null||y.tag!==7?(y=Am(x,v.mode,b,w),y.return=v,y):(y=r(y,x),y.return=v,y)}function u(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=vO(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case UE:return x=AT(y.type,y.key,y.props,null,v.mode,x),x.ref=h1(v,null,y),x.return=v,x;case a0:return y=yO(y,v.mode,x),y.return=v,y;case Bh:var b=y._init;return u(v,b(y._payload),x)}if(Sb(y)||a1(y))return y=Am(y,v.mode,x,null),y.return=v,y;ZE(v,y)}return null}function h(v,y,x,b){var w=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(v,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case UE:return x.key===w?l(v,y,x,b):null;case a0:return x.key===w?c(v,y,x,b):null;case Bh:return w=x._init,h(v,y,w(x._payload),b)}if(Sb(x)||a1(x))return w!==null?null:d(v,y,x,b,null);ZE(v,x)}return null}function f(v,y,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(x)||null,a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case UE:return v=v.get(b.key===null?x:b.key)||null,l(y,v,b,w);case a0:return v=v.get(b.key===null?x:b.key)||null,c(y,v,b,w);case Bh:var E=b._init;return f(v,y,x,E(b._payload),w)}if(Sb(b)||a1(b))return v=v.get(x)||null,d(y,v,b,w,null);ZE(y,b)}return null}function p(v,y,x,b){for(var w=null,E=null,A=y,S=y=0,C=null;A!==null&&S<x.length;S++){A.index>S?(C=A,A=null):C=A.sibling;var T=h(v,A,x[S],b);if(T===null){A===null&&(A=C);break}t&&A&&T.alternate===null&&e(v,A),y=s(T,y,S),E===null?w=T:E.sibling=T,E=T,A=C}if(S===x.length)return n(v,A),Ei&&Bp(v,S),w;if(A===null){for(;S<x.length;S++)A=u(v,x[S],b),A!==null&&(y=s(A,y,S),E===null?w=A:E.sibling=A,E=A);return Ei&&Bp(v,S),w}for(A=i(v,A);S<x.length;S++)C=f(A,v,S,x[S],b),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?S:C.key),y=s(C,y,S),E===null?w=C:E.sibling=C,E=C);return t&&A.forEach(function(P){return e(v,P)}),Ei&&Bp(v,S),w}function m(v,y,x,b){var w=a1(x);if(typeof w!="function")throw Error(et(150));if(x=w.call(x),x==null)throw Error(et(151));for(var E=w=null,A=y,S=y=0,C=null,T=x.next();A!==null&&!T.done;S++,T=x.next()){A.index>S?(C=A,A=null):C=A.sibling;var P=h(v,A,T.value,b);if(P===null){A===null&&(A=C);break}t&&A&&P.alternate===null&&e(v,A),y=s(P,y,S),E===null?w=P:E.sibling=P,E=P,A=C}if(T.done)return n(v,A),Ei&&Bp(v,S),w;if(A===null){for(;!T.done;S++,T=x.next())T=u(v,T.value,b),T!==null&&(y=s(T,y,S),E===null?w=T:E.sibling=T,E=T);return Ei&&Bp(v,S),w}for(A=i(v,A);!T.done;S++,T=x.next())T=f(A,v,S,T.value,b),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?S:T.key),y=s(T,y,S),E===null?w=T:E.sibling=T,E=T);return t&&A.forEach(function(R){return e(v,R)}),Ei&&Bp(v,S),w}function g(v,y,x,b){if(typeof x=="object"&&x!==null&&x.type===l0&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case UE:e:{for(var w=x.key,E=y;E!==null;){if(E.key===w){if(w=x.type,w===l0){if(E.tag===7){n(v,E.sibling),y=r(E,x.props.children),y.return=v,v=y;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bh&&EW(w)===E.type){n(v,E.sibling),y=r(E,x.props),y.ref=h1(v,E,x),y.return=v,v=y;break e}n(v,E);break}else e(v,E);E=E.sibling}x.type===l0?(y=Am(x.props.children,v.mode,b,x.key),y.return=v,v=y):(b=AT(x.type,x.key,x.props,null,v.mode,b),b.ref=h1(v,y,x),b.return=v,v=b)}return o(v);case a0:e:{for(E=x.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=r(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=yO(x,v.mode,b),y.return=v,v=y}return o(v);case Bh:return E=x._init,g(v,y,E(x._payload),b)}if(Sb(x))return p(v,y,x,b);if(a1(x))return m(v,y,x,b);ZE(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,x),y.return=v,v=y):(n(v,y),y=vO(x,v.mode,b),y.return=v,v=y),o(v)):n(v,y)}return g}var my=_ne(!0),Sne=_ne(!1),Y_={},nu=Kf(Y_),zw=Kf(Y_),Fw=Kf(Y_);function hm(t){if(t===Y_)throw Error(et(174));return t}function uU(t,e){switch(ci(Fw,e),ci(zw,t),ci(nu,Y_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:EN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=EN(e,t)}xi(nu),ci(nu,e)}function gy(){xi(nu),xi(zw),xi(Fw)}function Ene(t){hm(Fw.current);var e=hm(nu.current),n=EN(e,t.type);e!==n&&(ci(zw,t),ci(nu,n))}function dU(t){zw.current===t&&(xi(nu),xi(zw))}var Di=Kf(0);function _C(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dO=[];function hU(){for(var t=0;t<dO.length;t++)dO[t]._workInProgressVersionPrimary=null;dO.length=0}var wT=jd.ReactCurrentDispatcher,hO=jd.ReactCurrentBatchConfig,$m=0,ki=null,Pr=null,Zr=null,SC=!1,Wb=!1,Uw=0,b0e=0;function _s(){throw Error(et(321))}function fU(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ic(t[n],e[n]))return!1;return!0}function pU(t,e,n,i,r,s){if($m=s,ki=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wT.current=t===null||t.memoizedState===null?E0e:M0e,t=n(i,r),Wb){s=0;do{if(Wb=!1,Uw=0,25<=s)throw Error(et(301));s+=1,Zr=Pr=null,e.updateQueue=null,wT.current=A0e,t=n(i,r)}while(Wb)}if(wT.current=EC,e=Pr!==null&&Pr.next!==null,$m=0,Zr=Pr=ki=null,SC=!1,e)throw Error(et(300));return t}function mU(){var t=Uw!==0;return Uw=0,t}function Bc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?ki.memoizedState=Zr=t:Zr=Zr.next=t,Zr}function pl(){if(Pr===null){var t=ki.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Zr===null?ki.memoizedState:Zr.next;if(e!==null)Zr=e,Pr=t;else{if(t===null)throw Error(et(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Zr===null?ki.memoizedState=Zr=t:Zr=Zr.next=t}return Zr}function Vw(t,e){return typeof e=="function"?e(t):e}function fO(t){var e=pl(),n=e.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=t;var i=Pr,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if(($m&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=i):l=l.next=u,ki.lanes|=d,Xm|=d}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ic(i,e.memoizedState)||(To=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,ki.lanes|=s,Xm|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pO(t){var e=pl(),n=e.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ic(s,e.memoizedState)||(To=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Mne(){}function Ane(t,e){var n=ki,i=pl(),r=e(),s=!ic(i.memoizedState,r);if(s&&(i.memoizedState=r,To=!0),i=i.queue,gU(Pne.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Zr!==null&&Zr.memoizedState.tag&1){if(n.flags|=2048,Hw(9,Cne.bind(null,n,i,r,e),void 0,null),Jr===null)throw Error(et(349));$m&30||Tne(n,e,r)}return r}function Tne(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ki.updateQueue,e===null?(e={lastEffect:null,stores:null},ki.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cne(t,e,n,i){e.value=n,e.getSnapshot=i,Dne(e)&&Rne(t)}function Pne(t,e,n){return n(function(){Dne(e)&&Rne(t)})}function Dne(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ic(t,n)}catch{return!0}}function Rne(t){var e=Pd(t,1);e!==null&&ec(e,t,1,-1)}function MW(t){var e=Bc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vw,lastRenderedState:t},e.queue=t,t=t.dispatch=S0e.bind(null,ki,t),[e.memoizedState,t]}function Hw(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ki.updateQueue,e===null?(e={lastEffect:null,stores:null},ki.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function One(){return pl().memoizedState}function _T(t,e,n,i){var r=Bc();ki.flags|=t,r.memoizedState=Hw(1|e,n,void 0,i===void 0?null:i)}function EP(t,e,n,i){var r=pl();i=i===void 0?null:i;var s=void 0;if(Pr!==null){var o=Pr.memoizedState;if(s=o.destroy,i!==null&&fU(i,o.deps)){r.memoizedState=Hw(e,n,s,i);return}}ki.flags|=t,r.memoizedState=Hw(1|e,n,s,i)}function AW(t,e){return _T(8390656,8,t,e)}function gU(t,e){return EP(2048,8,t,e)}function Lne(t,e){return EP(4,2,t,e)}function Ine(t,e){return EP(4,4,t,e)}function kne(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nne(t,e,n){return n=n!=null?n.concat([t]):null,EP(4,4,kne.bind(null,e,t),n)}function vU(){}function Bne(t,e){var n=pl();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fU(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function zne(t,e){var n=pl();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fU(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Fne(t,e,n){return $m&21?(ic(n,e)||(n=Hte(),ki.lanes|=n,Xm|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,To=!0),t.memoizedState=n)}function w0e(t,e){var n=Gn;Gn=n!==0&&4>n?n:4,t(!0);var i=hO.transition;hO.transition={};try{t(!1),e()}finally{Gn=n,hO.transition=i}}function Une(){return pl().memoizedState}function _0e(t,e,n){var i=bf(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Vne(t))Hne(e,n);else if(n=yne(t,e,n,i),n!==null){var r=ro();ec(n,t,i,r),jne(n,e,i)}}function S0e(t,e,n){var i=bf(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vne(t))Hne(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ic(a,o)){var l=e.interleaved;l===null?(r.next=r,lU(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=yne(t,e,r,i),n!==null&&(r=ro(),ec(n,t,i,r),jne(n,e,i))}}function Vne(t){var e=t.alternate;return t===ki||e!==null&&e===ki}function Hne(t,e){Wb=SC=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jne(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,X4(t,n)}}var EC={readContext:fl,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},E0e={readContext:fl,useCallback:function(t,e){return Bc().memoizedState=[t,e===void 0?null:e],t},useContext:fl,useEffect:AW,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_T(4194308,4,kne.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _T(4194308,4,t,e)},useInsertionEffect:function(t,e){return _T(4,2,t,e)},useMemo:function(t,e){var n=Bc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Bc();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=_0e.bind(null,ki,t),[i.memoizedState,t]},useRef:function(t){var e=Bc();return t={current:t},e.memoizedState=t},useState:MW,useDebugValue:vU,useDeferredValue:function(t){return Bc().memoizedState=t},useTransition:function(){var t=MW(!1),e=t[0];return t=w0e.bind(null,t[1]),Bc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ki,r=Bc();if(Ei){if(n===void 0)throw Error(et(407));n=n()}else{if(n=e(),Jr===null)throw Error(et(349));$m&30||Tne(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,AW(Pne.bind(null,i,s,t),[t]),i.flags|=2048,Hw(9,Cne.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Bc(),e=Jr.identifierPrefix;if(Ei){var n=ld,i=ad;n=(i&~(1<<32-Jl(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uw++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=b0e++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},M0e={readContext:fl,useCallback:Bne,useContext:fl,useEffect:gU,useImperativeHandle:Nne,useInsertionEffect:Lne,useLayoutEffect:Ine,useMemo:zne,useReducer:fO,useRef:One,useState:function(){return fO(Vw)},useDebugValue:vU,useDeferredValue:function(t){var e=pl();return Fne(e,Pr.memoizedState,t)},useTransition:function(){var t=fO(Vw)[0],e=pl().memoizedState;return[t,e]},useMutableSource:Mne,useSyncExternalStore:Ane,useId:Une,unstable_isNewReconciler:!1},A0e={readContext:fl,useCallback:Bne,useContext:fl,useEffect:gU,useImperativeHandle:Nne,useInsertionEffect:Lne,useLayoutEffect:Ine,useMemo:zne,useReducer:pO,useRef:One,useState:function(){return pO(Vw)},useDebugValue:vU,useDeferredValue:function(t){var e=pl();return Pr===null?e.memoizedState=t:Fne(e,Pr.memoizedState,t)},useTransition:function(){var t=pO(Vw)[0],e=pl().memoizedState;return[t,e]},useMutableSource:Mne,useSyncExternalStore:Ane,useId:Une,unstable_isNewReconciler:!1};function vy(t,e){try{var n="",i=e;do n+=eve(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function mO(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $N(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T0e=typeof WeakMap=="function"?WeakMap:Map;function Gne(t,e,n){n=vd(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){AC||(AC=!0,iB=i),$N(t,e)},n}function Wne(t,e,n){n=vd(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){$N(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$N(t,e),typeof i!="function"&&(xf===null?xf=new Set([this]):xf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function TW(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new T0e;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=V0e.bind(null,t,e,n),e.then(t,t))}function CW(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function PW(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vd(-1,1),e.tag=2,yf(n,e,1))),n.lanes|=1),t)}var C0e=jd.ReactCurrentOwner,To=!1;function Js(t,e,n,i){e.child=t===null?Sne(e,null,n,i):my(e,t.child,n,i)}function DW(t,e,n,i,r){n=n.render;var s=e.ref;return U0(e,r),i=pU(t,e,n,i,s,r),n=mU(),t!==null&&!To?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Dd(t,e,r)):(Ei&&n&&nU(e),e.flags|=1,Js(t,e,i,r),e.child)}function RW(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!MU(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qne(t,e,s,i,r)):(t=AT(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Iw,n(o,i)&&t.ref===e.ref)return Dd(t,e,r)}return e.flags|=1,t=wf(s,i),t.ref=e.ref,t.return=e,e.child=t}function qne(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Iw(s,i)&&t.ref===e.ref)if(To=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(To=!0);else return e.lanes=t.lanes,Dd(t,e,r)}return XN(t,e,n,i,r)}function $ne(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ci(y0,ea),ea|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ci(y0,ea),ea|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ci(y0,ea),ea|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ci(y0,ea),ea|=i;return Js(t,e,r,n),e.child}function Xne(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function XN(t,e,n,i,r){var s=Io(n)?Wm:Us.current;return s=fy(e,s),U0(e,r),n=pU(t,e,n,i,s,r),i=mU(),t!==null&&!To?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Dd(t,e,r)):(Ei&&i&&nU(e),e.flags|=1,Js(t,e,n,r),e.child)}function OW(t,e,n,i,r){if(Io(n)){var s=!0;gC(e)}else s=!1;if(U0(e,r),e.stateNode===null)ST(t,e),wne(e,n,i),qN(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fl(c):(c=Io(n)?Wm:Us.current,c=fy(e,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&SW(e,o,i,c),zh=!1;var h=e.memoizedState;o.state=h,wC(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Lo.current||zh?(typeof d=="function"&&(WN(e,n,d,i),l=e.memoizedState),(a=zh||_W(e,n,a,i,h,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,xne(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ul(e.type,a),o.props=c,u=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fl(l):(l=Io(n)?Wm:Us.current,l=fy(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&SW(e,o,i,l),zh=!1,h=e.memoizedState,o.state=h,wC(e,i,o,r);var p=e.memoizedState;a!==u||h!==p||Lo.current||zh?(typeof f=="function"&&(WN(e,n,f,i),p=e.memoizedState),(c=zh||_W(e,n,c,i,h,p,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return YN(t,e,n,i,s,r)}function YN(t,e,n,i,r,s){Xne(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&vW(e,n,!1),Dd(t,e,s);i=e.stateNode,C0e.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=my(e,t.child,null,s),e.child=my(e,null,a,s)):Js(t,e,a,s),e.memoizedState=i.state,r&&vW(e,n,!0),e.child}function Yne(t){var e=t.stateNode;e.pendingContext?gW(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gW(t,e.context,!1),uU(t,e.containerInfo)}function LW(t,e,n,i,r){return py(),rU(r),e.flags|=256,Js(t,e,n,i),e.child}var KN={dehydrated:null,treeContext:null,retryLane:0};function ZN(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kne(t,e,n){var i=e.pendingProps,r=Di.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ci(Di,r&1),t===null)return jN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=TP(o,i,0,null),t=Am(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ZN(n),e.memoizedState=KN,t):yU(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return P0e(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=wf(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=wf(a,s):(s=Am(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?ZN(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=KN,i}return s=t.child,t=s.sibling,i=wf(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function yU(t,e){return e=TP({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function QE(t,e,n,i){return i!==null&&rU(i),my(e,t.child,null,n),t=yU(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function P0e(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=mO(Error(et(422))),QE(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=TP({mode:"visible",children:i.children},r,0,null),s=Am(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&my(e,t.child,null,o),e.child.memoizedState=ZN(o),e.memoizedState=KN,s);if(!(e.mode&1))return QE(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(et(419)),i=mO(s,i,void 0),QE(t,e,o,i)}if(a=(o&t.childLanes)!==0,To||a){if(i=Jr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Pd(t,r),ec(i,t,r,-1))}return EU(),i=mO(Error(et(421))),QE(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=H0e.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,aa=vf(r.nextSibling),pa=e,Ei=!0,Hl=null,t!==null&&(Qa[Ja++]=ad,Qa[Ja++]=ld,Qa[Ja++]=qm,ad=t.id,ld=t.overflow,qm=e),e=yU(e,i.children),e.flags|=4096,e)}function IW(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),GN(t.return,e,n)}function gO(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Zne(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Js(t,e,i.children,n),i=Di.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&IW(t,n,e);else if(t.tag===19)IW(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ci(Di,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&_C(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),gO(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_C(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}gO(e,!0,n,null,s);break;case"together":gO(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ST(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xm|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(et(153));if(e.child!==null){for(t=e.child,n=wf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function D0e(t,e,n){switch(e.tag){case 3:Yne(e),py();break;case 5:Ene(e);break;case 1:Io(e.type)&&gC(e);break;case 4:uU(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ci(xC,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ci(Di,Di.current&1),e.flags|=128,null):n&e.child.childLanes?Kne(t,e,n):(ci(Di,Di.current&1),t=Dd(t,e,n),t!==null?t.sibling:null);ci(Di,Di.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Zne(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ci(Di,Di.current),i)break;return null;case 22:case 23:return e.lanes=0,$ne(t,e,n)}return Dd(t,e,n)}var Qne,QN,Jne,eie;Qne=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};QN=function(){};Jne=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,hm(nu.current);var s=null;switch(n){case"input":r=bN(t,r),i=bN(t,i),s=[];break;case"select":r=Ni({},r,{value:void 0}),i=Ni({},i,{value:void 0}),s=[];break;case"textarea":r=SN(t,r),i=SN(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=pC)}MN(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tw.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tw.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&hi("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eie=function(t,e,n,i){n!==i&&(e.flags|=4)};function f1(t,e){if(!Ei)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ss(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function R0e(t,e,n){var i=e.pendingProps;switch(iU(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ss(e),null;case 1:return Io(e.type)&&mC(),Ss(e),null;case 3:return i=e.stateNode,gy(),xi(Lo),xi(Us),hU(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(KE(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hl!==null&&(oB(Hl),Hl=null))),QN(t,e),Ss(e),null;case 5:dU(e);var r=hm(Fw.current);if(n=e.type,t!==null&&e.stateNode!=null)Jne(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(et(166));return Ss(e),null}if(t=hm(nu.current),KE(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[$c]=e,i[Bw]=s,t=(e.mode&1)!==0,n){case"dialog":hi("cancel",i),hi("close",i);break;case"iframe":case"object":case"embed":hi("load",i);break;case"video":case"audio":for(r=0;r<Mb.length;r++)hi(Mb[r],i);break;case"source":hi("error",i);break;case"img":case"image":case"link":hi("error",i),hi("load",i);break;case"details":hi("toggle",i);break;case"input":jG(i,s),hi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},hi("invalid",i);break;case"textarea":WG(i,s),hi("invalid",i)}MN(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&YE(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&YE(i.textContent,a,t),r=["children",""+a]):Tw.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hi("scroll",i)}switch(n){case"input":VE(i),GG(i,s,!0);break;case"textarea":VE(i),qG(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=pC)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tte(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[$c]=e,t[Bw]=i,Qne(t,e,!1,!1),e.stateNode=t;e:{switch(o=AN(n,i),n){case"dialog":hi("cancel",t),hi("close",t),r=i;break;case"iframe":case"object":case"embed":hi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Mb.length;r++)hi(Mb[r],t);r=i;break;case"source":hi("error",t),r=i;break;case"img":case"image":case"link":hi("error",t),hi("load",t),r=i;break;case"details":hi("toggle",t),r=i;break;case"input":jG(t,i),r=bN(t,i),hi("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ni({},i,{value:void 0}),hi("invalid",t);break;case"textarea":WG(t,i),r=SN(t,i),hi("invalid",t);break;default:r=i}MN(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Dte(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Cte(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Cw(t,l):typeof l=="number"&&Cw(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Tw.hasOwnProperty(s)?l!=null&&s==="onScroll"&&hi("scroll",t):l!=null&&H4(t,s,l,o))}switch(n){case"input":VE(t),GG(t,i,!1);break;case"textarea":VE(t),qG(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Of(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?N0(t,!!i.multiple,s,!1):i.defaultValue!=null&&N0(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=pC)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ss(e),null;case 6:if(t&&e.stateNode!=null)eie(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(et(166));if(n=hm(Fw.current),hm(nu.current),KE(e)){if(i=e.stateNode,n=e.memoizedProps,i[$c]=e,(s=i.nodeValue!==n)&&(t=pa,t!==null))switch(t.tag){case 3:YE(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&YE(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[$c]=e,e.stateNode=i}return Ss(e),null;case 13:if(xi(Di),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ei&&aa!==null&&e.mode&1&&!(e.flags&128))vne(),py(),e.flags|=98560,s=!1;else if(s=KE(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(et(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[$c]=e}else py(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ss(e),s=!1}else Hl!==null&&(oB(Hl),Hl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Di.current&1?Or===0&&(Or=3):EU())),e.updateQueue!==null&&(e.flags|=4),Ss(e),null);case 4:return gy(),QN(t,e),t===null&&kw(e.stateNode.containerInfo),Ss(e),null;case 10:return aU(e.type._context),Ss(e),null;case 17:return Io(e.type)&&mC(),Ss(e),null;case 19:if(xi(Di),s=e.memoizedState,s===null)return Ss(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)f1(s,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_C(t),o!==null){for(e.flags|=128,f1(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ci(Di,Di.current&1|2),e.child}t=t.sibling}s.tail!==null&&nr()>yy&&(e.flags|=128,i=!0,f1(s,!1),e.lanes=4194304)}else{if(!i)if(t=_C(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),f1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ei)return Ss(e),null}else 2*nr()-s.renderingStartTime>yy&&n!==1073741824&&(e.flags|=128,i=!0,f1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nr(),e.sibling=null,n=Di.current,ci(Di,i?n&1|2:n&1),e):(Ss(e),null);case 22:case 23:return SU(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ea&1073741824&&(Ss(e),e.subtreeFlags&6&&(e.flags|=8192)):Ss(e),null;case 24:return null;case 25:return null}throw Error(et(156,e.tag))}function O0e(t,e){switch(iU(e),e.tag){case 1:return Io(e.type)&&mC(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gy(),xi(Lo),xi(Us),hU(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dU(e),null;case 13:if(xi(Di),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(et(340));py()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xi(Di),null;case 4:return gy(),null;case 10:return aU(e.type._context),null;case 22:case 23:return SU(),null;case 24:return null;default:return null}}var JE=!1,Rs=!1,L0e=typeof WeakSet=="function"?WeakSet:Set,bt=null;function v0(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Wi(t,e,i)}else n.current=null}function JN(t,e,n){try{n()}catch(i){Wi(t,e,i)}}var kW=!1;function I0e(t,e){if(NN=dC,t=rne(),tU(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=t,h=null;t:for(;;){for(var f;u!==n||r!==0&&u.nodeType!==3||(a=o+r),u!==s||i!==0&&u.nodeType!==3||(l=o+i),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)h=u,u=f;for(;;){if(u===t)break t;if(h===n&&++c===r&&(a=o),h===s&&++d===i&&(l=o),(f=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(BN={focusedElem:t,selectionRange:n},dC=!1,bt=e;bt!==null;)if(e=bt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,bt=t;else for(;bt!==null;){e=bt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ul(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(b){Wi(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,bt=t;break}bt=e.return}return p=kW,kW=!1,p}function qb(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&JN(e,n,s)}r=r.next}while(r!==i)}}function MP(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function eB(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tie(t){var e=t.alternate;e!==null&&(t.alternate=null,tie(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$c],delete e[Bw],delete e[UN],delete e[g0e],delete e[v0e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nie(t){return t.tag===5||t.tag===3||t.tag===4}function NW(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nie(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tB(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pC));else if(i!==4&&(t=t.child,t!==null))for(tB(t,e,n),t=t.sibling;t!==null;)tB(t,e,n),t=t.sibling}function nB(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(nB(t,e,n),t=t.sibling;t!==null;)nB(t,e,n),t=t.sibling}var ss=null,Vl=!1;function uh(t,e,n){for(n=n.child;n!==null;)iie(t,e,n),n=n.sibling}function iie(t,e,n){if(tu&&typeof tu.onCommitFiberUnmount=="function")try{tu.onCommitFiberUnmount(vP,n)}catch{}switch(n.tag){case 5:Rs||v0(n,e);case 6:var i=ss,r=Vl;ss=null,uh(t,e,n),ss=i,Vl=r,ss!==null&&(Vl?(t=ss,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ss.removeChild(n.stateNode));break;case 18:ss!==null&&(Vl?(t=ss,n=n.stateNode,t.nodeType===8?cO(t.parentNode,n):t.nodeType===1&&cO(t,n),Ow(t)):cO(ss,n.stateNode));break;case 4:i=ss,r=Vl,ss=n.stateNode.containerInfo,Vl=!0,uh(t,e,n),ss=i,Vl=r;break;case 0:case 11:case 14:case 15:if(!Rs&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&JN(n,e,o),r=r.next}while(r!==i)}uh(t,e,n);break;case 1:if(!Rs&&(v0(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Wi(n,e,a)}uh(t,e,n);break;case 21:uh(t,e,n);break;case 22:n.mode&1?(Rs=(i=Rs)||n.memoizedState!==null,uh(t,e,n),Rs=i):uh(t,e,n);break;default:uh(t,e,n)}}function BW(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new L0e),e.forEach(function(i){var r=j0e.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ml(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ss=a.stateNode,Vl=!1;break e;case 3:ss=a.stateNode.containerInfo,Vl=!0;break e;case 4:ss=a.stateNode.containerInfo,Vl=!0;break e}a=a.return}if(ss===null)throw Error(et(160));iie(s,o,r),ss=null,Vl=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Wi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rie(e,t),e=e.sibling}function rie(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ml(e,t),_c(t),i&4){try{qb(3,t,t.return),MP(3,t)}catch(m){Wi(t,t.return,m)}try{qb(5,t,t.return)}catch(m){Wi(t,t.return,m)}}break;case 1:Ml(e,t),_c(t),i&512&&n!==null&&v0(n,n.return);break;case 5:if(Ml(e,t),_c(t),i&512&&n!==null&&v0(n,n.return),t.flags&32){var r=t.stateNode;try{Cw(r,"")}catch(m){Wi(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Mte(r,s),AN(a,o);var c=AN(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?Dte(r,u):d==="dangerouslySetInnerHTML"?Cte(r,u):d==="children"?Cw(r,u):H4(r,d,u,c)}switch(a){case"input":wN(r,s);break;case"textarea":Ate(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?N0(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?N0(r,!!s.multiple,s.defaultValue,!0):N0(r,!!s.multiple,s.multiple?[]:"",!1))}r[Bw]=s}catch(m){Wi(t,t.return,m)}}break;case 6:if(Ml(e,t),_c(t),i&4){if(t.stateNode===null)throw Error(et(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Wi(t,t.return,m)}}break;case 3:if(Ml(e,t),_c(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ow(e.containerInfo)}catch(m){Wi(t,t.return,m)}break;case 4:Ml(e,t),_c(t);break;case 13:Ml(e,t),_c(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(wU=nr())),i&4&&BW(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Rs=(c=Rs)||d,Ml(e,t),Rs=c):Ml(e,t),_c(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(bt=t,d=t.child;d!==null;){for(u=bt=d;bt!==null;){switch(h=bt,f=h.child,h.tag){case 0:case 11:case 14:case 15:qb(4,h,h.return);break;case 1:v0(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Wi(i,n,m)}}break;case 5:v0(h,h.return);break;case 22:if(h.memoizedState!==null){FW(u);continue}}f!==null?(f.return=h,bt=f):FW(u)}d=d.sibling}e:for(d=null,u=t;;){if(u.tag===5){if(d===null){d=u;try{r=u.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Pte("display",o))}catch(m){Wi(t,t.return,m)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){Wi(t,t.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ml(e,t),_c(t),i&4&&BW(t);break;case 21:break;default:Ml(e,t),_c(t)}}function _c(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nie(n)){var i=n;break e}n=n.return}throw Error(et(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Cw(r,""),i.flags&=-33);var s=NW(t);nB(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=NW(t);tB(t,a,o);break;default:throw Error(et(161))}}catch(l){Wi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k0e(t,e,n){bt=t,sie(t)}function sie(t,e,n){for(var i=(t.mode&1)!==0;bt!==null;){var r=bt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||JE;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Rs;a=JE;var c=Rs;if(JE=o,(Rs=l)&&!c)for(bt=r;bt!==null;)o=bt,l=o.child,o.tag===22&&o.memoizedState!==null?UW(r):l!==null?(l.return=o,bt=l):UW(r);for(;s!==null;)bt=s,sie(s),s=s.sibling;bt=r,JE=a,Rs=c}zW(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,bt=s):zW(t)}}function zW(t){for(;bt!==null;){var e=bt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rs||MP(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Rs)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ul(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wW(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wW(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&Ow(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}Rs||e.flags&512&&eB(e)}catch(h){Wi(e,e.return,h)}}if(e===t){bt=null;break}if(n=e.sibling,n!==null){n.return=e.return,bt=n;break}bt=e.return}}function FW(t){for(;bt!==null;){var e=bt;if(e===t){bt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,bt=n;break}bt=e.return}}function UW(t){for(;bt!==null;){var e=bt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{MP(4,e)}catch(l){Wi(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Wi(e,r,l)}}var s=e.return;try{eB(e)}catch(l){Wi(e,s,l)}break;case 5:var o=e.return;try{eB(e)}catch(l){Wi(e,o,l)}}}catch(l){Wi(e,e.return,l)}if(e===t){bt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,bt=a;break}bt=e.return}}var N0e=Math.ceil,MC=jd.ReactCurrentDispatcher,xU=jd.ReactCurrentOwner,al=jd.ReactCurrentBatchConfig,Tn=0,Jr=null,vr=null,us=0,ea=0,y0=Kf(0),Or=0,jw=null,Xm=0,AP=0,bU=0,$b=null,wo=null,wU=0,yy=1/0,Ju=null,AC=!1,iB=null,xf=null,eM=!1,Qh=null,TC=0,Xb=0,rB=null,ET=-1,MT=0;function ro(){return Tn&6?nr():ET!==-1?ET:ET=nr()}function bf(t){return t.mode&1?Tn&2&&us!==0?us&-us:x0e.transition!==null?(MT===0&&(MT=Hte()),MT):(t=Gn,t!==0||(t=window.event,t=t===void 0?16:Yte(t.type)),t):1}function ec(t,e,n,i){if(50<Xb)throw Xb=0,rB=null,Error(et(185));q_(t,n,i),(!(Tn&2)||t!==Jr)&&(t===Jr&&(!(Tn&2)&&(AP|=n),Or===4&&qh(t,us)),ko(t,i),n===1&&Tn===0&&!(e.mode&1)&&(yy=nr()+500,_P&&Zf()))}function ko(t,e){var n=t.callbackNode;xve(t,e);var i=uC(t,t===Jr?us:0);if(i===0)n!==null&&YG(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&YG(n),e===1)t.tag===0?y0e(VW.bind(null,t)):pne(VW.bind(null,t)),p0e(function(){!(Tn&6)&&Zf()}),n=null;else{switch(jte(i)){case 1:n=$4;break;case 4:n=Ute;break;case 16:n=cC;break;case 536870912:n=Vte;break;default:n=cC}n=fie(n,oie.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oie(t,e){if(ET=-1,MT=0,Tn&6)throw Error(et(327));var n=t.callbackNode;if(V0()&&t.callbackNode!==n)return null;var i=uC(t,t===Jr?us:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=CC(t,i);else{e=i;var r=Tn;Tn|=2;var s=lie();(Jr!==t||us!==e)&&(Ju=null,yy=nr()+500,Mm(t,e));do try{F0e();break}catch(a){aie(t,a)}while(1);oU(),MC.current=s,Tn=r,vr!==null?e=0:(Jr=null,us=0,e=Or)}if(e!==0){if(e===2&&(r=RN(t),r!==0&&(i=r,e=sB(t,r))),e===1)throw n=jw,Mm(t,0),qh(t,i),ko(t,nr()),n;if(e===6)qh(t,i);else{if(r=t.current.alternate,!(i&30)&&!B0e(r)&&(e=CC(t,i),e===2&&(s=RN(t),s!==0&&(i=s,e=sB(t,s))),e===1))throw n=jw,Mm(t,0),qh(t,i),ko(t,nr()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(et(345));case 2:zp(t,wo,Ju);break;case 3:if(qh(t,i),(i&130023424)===i&&(e=wU+500-nr(),10<e)){if(uC(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ro(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=FN(zp.bind(null,t,wo,Ju),e);break}zp(t,wo,Ju);break;case 4:if(qh(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Jl(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=nr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*N0e(i/1960))-i,10<i){t.timeoutHandle=FN(zp.bind(null,t,wo,Ju),i);break}zp(t,wo,Ju);break;case 5:zp(t,wo,Ju);break;default:throw Error(et(329))}}}return ko(t,nr()),t.callbackNode===n?oie.bind(null,t):null}function sB(t,e){var n=$b;return t.current.memoizedState.isDehydrated&&(Mm(t,e).flags|=256),t=CC(t,e),t!==2&&(e=wo,wo=n,e!==null&&oB(e)),t}function oB(t){wo===null?wo=t:wo.push.apply(wo,t)}function B0e(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ic(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qh(t,e){for(e&=~bU,e&=~AP,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jl(e),i=1<<n;t[n]=-1,e&=~i}}function VW(t){if(Tn&6)throw Error(et(327));V0();var e=uC(t,0);if(!(e&1))return ko(t,nr()),null;var n=CC(t,e);if(t.tag!==0&&n===2){var i=RN(t);i!==0&&(e=i,n=sB(t,i))}if(n===1)throw n=jw,Mm(t,0),qh(t,e),ko(t,nr()),n;if(n===6)throw Error(et(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zp(t,wo,Ju),ko(t,nr()),null}function _U(t,e){var n=Tn;Tn|=1;try{return t(e)}finally{Tn=n,Tn===0&&(yy=nr()+500,_P&&Zf())}}function Ym(t){Qh!==null&&Qh.tag===0&&!(Tn&6)&&V0();var e=Tn;Tn|=1;var n=al.transition,i=Gn;try{if(al.transition=null,Gn=1,t)return t()}finally{Gn=i,al.transition=n,Tn=e,!(Tn&6)&&Zf()}}function SU(){ea=y0.current,xi(y0)}function Mm(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f0e(n)),vr!==null)for(n=vr.return;n!==null;){var i=n;switch(iU(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&mC();break;case 3:gy(),xi(Lo),xi(Us),hU();break;case 5:dU(i);break;case 4:gy();break;case 13:xi(Di);break;case 19:xi(Di);break;case 10:aU(i.type._context);break;case 22:case 23:SU()}n=n.return}if(Jr=t,vr=t=wf(t.current,null),us=ea=e,Or=0,jw=null,bU=AP=Xm=0,wo=$b=null,dm!==null){for(e=0;e<dm.length;e++)if(n=dm[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}dm=null}return t}function aie(t,e){do{var n=vr;try{if(oU(),wT.current=EC,SC){for(var i=ki.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}SC=!1}if($m=0,Zr=Pr=ki=null,Wb=!1,Uw=0,xU.current=null,n===null||n.return===null){Or=1,jw=e,vr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=us,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=CW(o);if(f!==null){f.flags&=-257,PW(f,o,a,s,e),f.mode&1&&TW(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){TW(s,c,e),EU();break e}l=Error(et(426))}}else if(Ei&&a.mode&1){var g=CW(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),PW(g,o,a,s,e),rU(vy(l,a));break e}}s=l=vy(l,a),Or!==4&&(Or=2),$b===null?$b=[s]:$b.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Gne(s,l,e);bW(s,v);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xf===null||!xf.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Wne(s,a,e);bW(s,b);break e}}s=s.return}while(s!==null)}uie(n)}catch(w){e=w,vr===n&&n!==null&&(vr=n=n.return);continue}break}while(1)}function lie(){var t=MC.current;return MC.current=EC,t===null?EC:t}function EU(){(Or===0||Or===3||Or===2)&&(Or=4),Jr===null||!(Xm&268435455)&&!(AP&268435455)||qh(Jr,us)}function CC(t,e){var n=Tn;Tn|=2;var i=lie();(Jr!==t||us!==e)&&(Ju=null,Mm(t,e));do try{z0e();break}catch(r){aie(t,r)}while(1);if(oU(),Tn=n,MC.current=i,vr!==null)throw Error(et(261));return Jr=null,us=0,Or}function z0e(){for(;vr!==null;)cie(vr)}function F0e(){for(;vr!==null&&!uve();)cie(vr)}function cie(t){var e=hie(t.alternate,t,ea);t.memoizedProps=t.pendingProps,e===null?uie(t):vr=e,xU.current=null}function uie(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=O0e(n,e),n!==null){n.flags&=32767,vr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,vr=null;return}}else if(n=R0e(n,e,ea),n!==null){vr=n;return}if(e=e.sibling,e!==null){vr=e;return}vr=e=t}while(e!==null);Or===0&&(Or=5)}function zp(t,e,n){var i=Gn,r=al.transition;try{al.transition=null,Gn=1,U0e(t,e,n,i)}finally{al.transition=r,Gn=i}return null}function U0e(t,e,n,i){do V0();while(Qh!==null);if(Tn&6)throw Error(et(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(et(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bve(t,s),t===Jr&&(vr=Jr=null,us=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eM||(eM=!0,fie(cC,function(){return V0(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=al.transition,al.transition=null;var o=Gn;Gn=1;var a=Tn;Tn|=4,xU.current=null,I0e(t,n),rie(n,t),o0e(BN),dC=!!NN,BN=NN=null,t.current=n,k0e(n),dve(),Tn=a,Gn=o,al.transition=s}else t.current=n;if(eM&&(eM=!1,Qh=t,TC=r),s=t.pendingLanes,s===0&&(xf=null),pve(n.stateNode),ko(t,nr()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(AC)throw AC=!1,t=iB,iB=null,t;return TC&1&&t.tag!==0&&V0(),s=t.pendingLanes,s&1?t===rB?Xb++:(Xb=0,rB=t):Xb=0,Zf(),null}function V0(){if(Qh!==null){var t=jte(TC),e=al.transition,n=Gn;try{if(al.transition=null,Gn=16>t?16:t,Qh===null)var i=!1;else{if(t=Qh,Qh=null,TC=0,Tn&6)throw Error(et(331));var r=Tn;for(Tn|=4,bt=t.current;bt!==null;){var s=bt,o=s.child;if(bt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(bt=c;bt!==null;){var d=bt;switch(d.tag){case 0:case 11:case 15:qb(8,d,s)}var u=d.child;if(u!==null)u.return=d,bt=u;else for(;bt!==null;){d=bt;var h=d.sibling,f=d.return;if(tie(d),d===c){bt=null;break}if(h!==null){h.return=f,bt=h;break}bt=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}bt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,bt=o;else e:for(;bt!==null;){if(s=bt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qb(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,bt=v;break e}bt=s.return}}var y=t.current;for(bt=y;bt!==null;){o=bt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,bt=x;else e:for(o=y;bt!==null;){if(a=bt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:MP(9,a)}}catch(w){Wi(a,a.return,w)}if(a===o){bt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,bt=b;break e}bt=a.return}}if(Tn=r,Zf(),tu&&typeof tu.onPostCommitFiberRoot=="function")try{tu.onPostCommitFiberRoot(vP,t)}catch{}i=!0}return i}finally{Gn=n,al.transition=e}}return!1}function HW(t,e,n){e=vy(n,e),e=Gne(t,e,1),t=yf(t,e,1),e=ro(),t!==null&&(q_(t,1,e),ko(t,e))}function Wi(t,e,n){if(t.tag===3)HW(t,t,n);else for(;e!==null;){if(e.tag===3){HW(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(xf===null||!xf.has(i))){t=vy(n,t),t=Wne(e,t,1),e=yf(e,t,1),t=ro(),e!==null&&(q_(e,1,t),ko(e,t));break}}e=e.return}}function V0e(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ro(),t.pingedLanes|=t.suspendedLanes&n,Jr===t&&(us&n)===n&&(Or===4||Or===3&&(us&130023424)===us&&500>nr()-wU?Mm(t,0):bU|=n),ko(t,e)}function die(t,e){e===0&&(t.mode&1?(e=GE,GE<<=1,!(GE&130023424)&&(GE=4194304)):e=1);var n=ro();t=Pd(t,e),t!==null&&(q_(t,e,n),ko(t,n))}function H0e(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),die(t,n)}function j0e(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(et(314))}i!==null&&i.delete(e),die(t,n)}var hie;hie=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lo.current)To=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return To=!1,D0e(t,e,n);To=!!(t.flags&131072)}else To=!1,Ei&&e.flags&1048576&&mne(e,yC,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ST(t,e),t=e.pendingProps;var r=fy(e,Us.current);U0(e,n),r=pU(null,e,i,t,r,n);var s=mU();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Io(i)?(s=!0,gC(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,cU(e),r.updater=SP,e.stateNode=r,r._reactInternals=e,qN(e,i,t,n),e=YN(null,e,i,!0,s,n)):(e.tag=0,Ei&&s&&nU(e),Js(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ST(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=W0e(i),t=Ul(i,t),r){case 0:e=XN(null,e,i,t,n);break e;case 1:e=OW(null,e,i,t,n);break e;case 11:e=DW(null,e,i,t,n);break e;case 14:e=RW(null,e,i,Ul(i.type,t),n);break e}throw Error(et(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ul(i,r),XN(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ul(i,r),OW(t,e,i,r,n);case 3:e:{if(Yne(e),t===null)throw Error(et(387));i=e.pendingProps,s=e.memoizedState,r=s.element,xne(t,e),wC(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=vy(Error(et(423)),e),e=LW(t,e,i,n,r);break e}else if(i!==r){r=vy(Error(et(424)),e),e=LW(t,e,i,n,r);break e}else for(aa=vf(e.stateNode.containerInfo.firstChild),pa=e,Ei=!0,Hl=null,n=Sne(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(py(),i===r){e=Dd(t,e,n);break e}Js(t,e,i,n)}e=e.child}return e;case 5:return Ene(e),t===null&&jN(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,zN(i,r)?o=null:s!==null&&zN(i,s)&&(e.flags|=32),Xne(t,e),Js(t,e,o,n),e.child;case 6:return t===null&&jN(e),null;case 13:return Kne(t,e,n);case 4:return uU(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=my(e,null,i,n):Js(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ul(i,r),DW(t,e,i,r,n);case 7:return Js(t,e,e.pendingProps,n),e.child;case 8:return Js(t,e,e.pendingProps.children,n),e.child;case 12:return Js(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ci(xC,i._currentValue),i._currentValue=o,s!==null)if(ic(s.value,o)){if(s.children===r.children&&!Lo.current){e=Dd(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=vd(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),GN(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),GN(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Js(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,U0(e,n),r=fl(r),i=i(r),e.flags|=1,Js(t,e,i,n),e.child;case 14:return i=e.type,r=Ul(i,e.pendingProps),r=Ul(i.type,r),RW(t,e,i,r,n);case 15:return qne(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ul(i,r),ST(t,e),e.tag=1,Io(i)?(t=!0,gC(e)):t=!1,U0(e,n),wne(e,i,r),qN(e,i,r,n),YN(null,e,i,!0,t,n);case 19:return Zne(t,e,n);case 22:return $ne(t,e,n)}throw Error(et(156,e.tag))};function fie(t,e){return Fte(t,e)}function G0e(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function il(t,e,n,i){return new G0e(t,e,n,i)}function MU(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W0e(t){if(typeof t=="function")return MU(t)?1:0;if(t!=null){if(t=t.$$typeof,t===G4)return 11;if(t===W4)return 14}return 2}function wf(t,e){var n=t.alternate;return n===null?(n=il(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function AT(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")MU(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case l0:return Am(n.children,r,s,e);case j4:o=8,r|=8;break;case gN:return t=il(12,n,e,r|2),t.elementType=gN,t.lanes=s,t;case vN:return t=il(13,n,e,r),t.elementType=vN,t.lanes=s,t;case yN:return t=il(19,n,e,r),t.elementType=yN,t.lanes=s,t;case _te:return TP(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bte:o=10;break e;case wte:o=9;break e;case G4:o=11;break e;case W4:o=14;break e;case Bh:o=16,i=null;break e}throw Error(et(130,t==null?t:typeof t,""))}return e=il(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Am(t,e,n,i){return t=il(7,t,i,e),t.lanes=n,t}function TP(t,e,n,i){return t=il(22,t,i,e),t.elementType=_te,t.lanes=n,t.stateNode={isHidden:!1},t}function vO(t,e,n){return t=il(6,t,null,e),t.lanes=n,t}function yO(t,e,n){return e=il(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function q0e(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q3(0),this.expirationTimes=Q3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q3(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function AU(t,e,n,i,r,s,o,a,l){return t=new q0e(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=il(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cU(s),t}function $0e(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a0,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function pie(t){if(!t)return Lf;t=t._reactInternals;e:{if(mg(t)!==t||t.tag!==1)throw Error(et(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Io(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(et(171))}if(t.tag===1){var n=t.type;if(Io(n))return fne(t,n,e)}return e}function mie(t,e,n,i,r,s,o,a,l){return t=AU(n,i,!0,t,r,s,o,a,l),t.context=pie(null),n=t.current,i=ro(),r=bf(n),s=vd(i,r),s.callback=e??null,yf(n,s,r),t.current.lanes=r,q_(t,r,i),ko(t,i),t}function CP(t,e,n,i){var r=e.current,s=ro(),o=bf(r);return n=pie(n),e.context===null?e.context=n:e.pendingContext=n,e=vd(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=yf(r,e,o),t!==null&&(ec(t,r,o,s),bT(t,r,o)),o}function PC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jW(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function TU(t,e){jW(t,e),(t=t.alternate)&&jW(t,e)}function X0e(){return null}var gie=typeof reportError=="function"?reportError:function(t){console.error(t)};function CU(t){this._internalRoot=t}PP.prototype.render=CU.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(et(409));CP(t,e,null,null)};PP.prototype.unmount=CU.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ym(function(){CP(null,t,null,null)}),e[Cd]=null}};function PP(t){this._internalRoot=t}PP.prototype.unstable_scheduleHydration=function(t){if(t){var e=qte();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wh.length&&e!==0&&e<Wh[n].priority;n++);Wh.splice(n,0,t),n===0&&Xte(t)}};function PU(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function DP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function GW(){}function Y0e(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=PC(o);s.call(c)}}var o=mie(e,i,t,0,null,!1,!1,"",GW);return t._reactRootContainer=o,t[Cd]=o.current,kw(t.nodeType===8?t.parentNode:t),Ym(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=PC(l);a.call(c)}}var l=AU(t,0,!1,null,null,!1,!1,"",GW);return t._reactRootContainer=l,t[Cd]=l.current,kw(t.nodeType===8?t.parentNode:t),Ym(function(){CP(e,l,n,i)}),l}function RP(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=PC(o);a.call(l)}}CP(e,o,t,r)}else o=Y0e(n,e,t,r,i);return PC(o)}Gte=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Eb(e.pendingLanes);n!==0&&(X4(e,n|1),ko(e,nr()),!(Tn&6)&&(yy=nr()+500,Zf()))}break;case 13:Ym(function(){var i=Pd(t,1);if(i!==null){var r=ro();ec(i,t,1,r)}}),TU(t,1)}};Y4=function(t){if(t.tag===13){var e=Pd(t,134217728);if(e!==null){var n=ro();ec(e,t,134217728,n)}TU(t,134217728)}};Wte=function(t){if(t.tag===13){var e=bf(t),n=Pd(t,e);if(n!==null){var i=ro();ec(n,t,e,i)}TU(t,e)}};qte=function(){return Gn};$te=function(t,e){var n=Gn;try{return Gn=t,e()}finally{Gn=n}};CN=function(t,e,n){switch(e){case"input":if(wN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wP(i);if(!r)throw Error(et(90));Ete(i),wN(i,r)}}}break;case"textarea":Ate(t,n);break;case"select":e=n.value,e!=null&&N0(t,!!n.multiple,e,!1)}};Lte=_U;Ite=Ym;var K0e={usingClientEntryPoint:!1,Events:[X_,h0,wP,Rte,Ote,_U]},p1={findFiberByHostInstance:um,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Z0e={bundleType:p1.bundleType,version:p1.version,rendererPackageName:p1.rendererPackageName,rendererConfig:p1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bte(t),t===null?null:t.stateNode},findFiberByHostInstance:p1.findFiberByHostInstance||X0e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tM.isDisabled&&tM.supportsFiber)try{vP=tM.inject(Z0e),tu=tM}catch{}}Sa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K0e;Sa.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PU(e))throw Error(et(200));return $0e(t,e,null,n)};Sa.createRoot=function(t,e){if(!PU(t))throw Error(et(299));var n=!1,i="",r=gie;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=AU(t,1,!1,null,null,n,!1,i,r),t[Cd]=e.current,kw(t.nodeType===8?t.parentNode:t),new CU(e)};Sa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(et(188)):(t=Object.keys(t).join(","),Error(et(268,t)));return t=Bte(e),t=t===null?null:t.stateNode,t};Sa.flushSync=function(t){return Ym(t)};Sa.hydrate=function(t,e,n){if(!DP(e))throw Error(et(200));return RP(null,t,e,!0,n)};Sa.hydrateRoot=function(t,e,n){if(!PU(t))throw Error(et(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=gie;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mie(e,null,t,1,n??null,r,!1,s,o),t[Cd]=e.current,kw(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new PP(e)};Sa.render=function(t,e,n){if(!DP(e))throw Error(et(200));return RP(null,t,e,!1,n)};Sa.unmountComponentAtNode=function(t){if(!DP(t))throw Error(et(40));return t._reactRootContainer?(Ym(function(){RP(null,null,t,!1,function(){t._reactRootContainer=null,t[Cd]=null})}),!0):!1};Sa.unstable_batchedUpdates=_U;Sa.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!DP(n))throw Error(et(200));if(t==null||t._reactInternals===void 0)throw Error(et(38));return RP(t,e,n,!1,i)};Sa.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Sa})(Xge);const nM=mP(du);var vie,WW=du;vie=fN.createRoot=WW.createRoot,fN.hydrateRoot=WW.hydrateRoot;var aB={},Q0e={get exports(){return aB},set exports(t){aB=t}},yie={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy=Z;function J0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eye=typeof Object.is=="function"?Object.is:J0e,tye=xy.useState,nye=xy.useEffect,iye=xy.useLayoutEffect,rye=xy.useDebugValue;function sye(t,e){var n=e(),i=tye({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return iye(function(){r.value=n,r.getSnapshot=e,xO(r)&&s({inst:r})},[t,n,e]),nye(function(){return xO(r)&&s({inst:r}),t(function(){xO(r)&&s({inst:r})})},[t]),rye(n),n}function xO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!eye(t,n)}catch{return!0}}function oye(t,e){return e()}var aye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oye:sye;yie.useSyncExternalStore=xy.useSyncExternalStore!==void 0?xy.useSyncExternalStore:aye;(function(t){t.exports=yie})(Q0e);var lB={},lye={get exports(){return lB},set exports(t){lB=t}},xie={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OP=Z,cye=aB;function uye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dye=typeof Object.is=="function"?Object.is:uye,hye=cye.useSyncExternalStore,fye=OP.useRef,pye=OP.useEffect,mye=OP.useMemo,gye=OP.useDebugValue;xie.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=fye(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=mye(function(){function l(f){if(!c){if(c=!0,d=f,f=i(f),r!==void 0&&o.hasValue){var p=o.value;if(r(p,f))return u=p}return u=f}if(p=u,dye(d,f))return p;var m=i(f);return r!==void 0&&r(p,m)?p:(d=f,u=m)}var c=!1,d,u,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,i,r]);var a=hye(t,s[0],s[1]);return pye(function(){o.hasValue=!0,o.value=a},[a]),gye(a),a};(function(t){t.exports=xie})(lye);function vye(t){t()}let bie=vye;const yye=t=>bie=t,xye=()=>bie;let bO=null;function bye(){return bO||(bO=Z.createContext(null)),bO}const If=new Proxy({},new Proxy({},{get(t,e){const n=bye();return(i,...r)=>Reflect[e](n,...r)}}));function DU(t=If){return function(){return Z.useContext(t)}}const wie=DU(),wye=()=>{throw new Error("uSES not initialized!")};let _ie=wye;const _ye=t=>{_ie=t},Sye=(t,e)=>t===e;function Eye(t=If){const e=t===If?wie:DU(t);return function(i,r={}){const{equalityFn:s=Sye,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof r=="function"?{equalityFn:r}:r,{store:l,subscription:c,getServerState:d,stabilityCheck:u,noopCheck:h}=e();Z.useRef(!0);const f=Z.useCallback({[i.name](m){return i(m)}}[i.name],[i,u,o]),p=_ie(c.addNestedSub,l.getState,d||l.getState,f,s);return Z.useDebugValue(p),p}}const Yb=Eye();function _e(){return _e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_e.apply(this,arguments)}function Dt(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var cB={},Mye={get exports(){return cB},set exports(t){cB=t}},qn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns=typeof Symbol=="function"&&Symbol.for,RU=ns?Symbol.for("react.element"):60103,OU=ns?Symbol.for("react.portal"):60106,LP=ns?Symbol.for("react.fragment"):60107,IP=ns?Symbol.for("react.strict_mode"):60108,kP=ns?Symbol.for("react.profiler"):60114,NP=ns?Symbol.for("react.provider"):60109,BP=ns?Symbol.for("react.context"):60110,LU=ns?Symbol.for("react.async_mode"):60111,zP=ns?Symbol.for("react.concurrent_mode"):60111,FP=ns?Symbol.for("react.forward_ref"):60112,UP=ns?Symbol.for("react.suspense"):60113,Aye=ns?Symbol.for("react.suspense_list"):60120,VP=ns?Symbol.for("react.memo"):60115,HP=ns?Symbol.for("react.lazy"):60116,Tye=ns?Symbol.for("react.block"):60121,Cye=ns?Symbol.for("react.fundamental"):60117,Pye=ns?Symbol.for("react.responder"):60118,Dye=ns?Symbol.for("react.scope"):60119;function Ma(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case RU:switch(t=t.type,t){case LU:case zP:case LP:case kP:case IP:case UP:return t;default:switch(t=t&&t.$$typeof,t){case BP:case FP:case HP:case VP:case NP:return t;default:return e}}case OU:return e}}}function Sie(t){return Ma(t)===zP}qn.AsyncMode=LU;qn.ConcurrentMode=zP;qn.ContextConsumer=BP;qn.ContextProvider=NP;qn.Element=RU;qn.ForwardRef=FP;qn.Fragment=LP;qn.Lazy=HP;qn.Memo=VP;qn.Portal=OU;qn.Profiler=kP;qn.StrictMode=IP;qn.Suspense=UP;qn.isAsyncMode=function(t){return Sie(t)||Ma(t)===LU};qn.isConcurrentMode=Sie;qn.isContextConsumer=function(t){return Ma(t)===BP};qn.isContextProvider=function(t){return Ma(t)===NP};qn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===RU};qn.isForwardRef=function(t){return Ma(t)===FP};qn.isFragment=function(t){return Ma(t)===LP};qn.isLazy=function(t){return Ma(t)===HP};qn.isMemo=function(t){return Ma(t)===VP};qn.isPortal=function(t){return Ma(t)===OU};qn.isProfiler=function(t){return Ma(t)===kP};qn.isStrictMode=function(t){return Ma(t)===IP};qn.isSuspense=function(t){return Ma(t)===UP};qn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===LP||t===zP||t===kP||t===IP||t===UP||t===Aye||typeof t=="object"&&t!==null&&(t.$$typeof===HP||t.$$typeof===VP||t.$$typeof===NP||t.$$typeof===BP||t.$$typeof===FP||t.$$typeof===Cye||t.$$typeof===Pye||t.$$typeof===Dye||t.$$typeof===Tye)};qn.typeOf=Ma;(function(t){t.exports=qn})(Mye);var Eie=cB,Rye={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Oye={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Mie={};Mie[Eie.ForwardRef]=Rye;Mie[Eie.Memo]=Oye;var qW={},Lye={get exports(){return qW},set exports(t){qW=t}},$n={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IU=Symbol.for("react.element"),kU=Symbol.for("react.portal"),jP=Symbol.for("react.fragment"),GP=Symbol.for("react.strict_mode"),WP=Symbol.for("react.profiler"),qP=Symbol.for("react.provider"),$P=Symbol.for("react.context"),Iye=Symbol.for("react.server_context"),XP=Symbol.for("react.forward_ref"),YP=Symbol.for("react.suspense"),KP=Symbol.for("react.suspense_list"),ZP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),kye=Symbol.for("react.offscreen"),Aie;Aie=Symbol.for("react.module.reference");function bl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case IU:switch(t=t.type,t){case jP:case WP:case GP:case YP:case KP:return t;default:switch(t=t&&t.$$typeof,t){case Iye:case $P:case XP:case QP:case ZP:case qP:return t;default:return e}}case kU:return e}}}$n.ContextConsumer=$P;$n.ContextProvider=qP;$n.Element=IU;$n.ForwardRef=XP;$n.Fragment=jP;$n.Lazy=QP;$n.Memo=ZP;$n.Portal=kU;$n.Profiler=WP;$n.StrictMode=GP;$n.Suspense=YP;$n.SuspenseList=KP;$n.isAsyncMode=function(){return!1};$n.isConcurrentMode=function(){return!1};$n.isContextConsumer=function(t){return bl(t)===$P};$n.isContextProvider=function(t){return bl(t)===qP};$n.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===IU};$n.isForwardRef=function(t){return bl(t)===XP};$n.isFragment=function(t){return bl(t)===jP};$n.isLazy=function(t){return bl(t)===QP};$n.isMemo=function(t){return bl(t)===ZP};$n.isPortal=function(t){return bl(t)===kU};$n.isProfiler=function(t){return bl(t)===WP};$n.isStrictMode=function(t){return bl(t)===GP};$n.isSuspense=function(t){return bl(t)===YP};$n.isSuspenseList=function(t){return bl(t)===KP};$n.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===jP||t===WP||t===GP||t===YP||t===KP||t===kye||typeof t=="object"&&t!==null&&(t.$$typeof===QP||t.$$typeof===ZP||t.$$typeof===qP||t.$$typeof===$P||t.$$typeof===XP||t.$$typeof===Aie||t.getModuleId!==void 0)};$n.typeOf=bl;(function(t){t.exports=$n})(Lye);function Nye(){const t=xye();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){let i=[],r=e;for(;r;)i.push(r),r=r.next;return i},subscribe(i){let r=!0,s=n={callback:i,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const $W={notify(){},get:()=>[]};function Bye(t,e){let n,i=$W;function r(u){return l(),i.subscribe(u)}function s(){i.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return Boolean(n)}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),i=Nye())}function c(){n&&(n(),n=void 0,i.clear(),i=$W)}const d={addNestedSub:r,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>i};return d}const zye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fye=zye?Z.useLayoutEffect:Z.useEffect;function Uye({store:t,context:e,children:n,serverState:i,stabilityCheck:r="once",noopCheck:s="once"}){const o=Z.useMemo(()=>{const c=Bye(t);return{store:t,subscription:c,getServerState:i?()=>i:void 0,stabilityCheck:r,noopCheck:s}},[t,i,r,s]),a=Z.useMemo(()=>t.getState(),[t]);Fye(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||If;return ks.createElement(l.Provider,{value:o},n)}function Tie(t=If){const e=t===If?wie:DU(t);return function(){const{store:i}=e();return i}}const Vye=Tie();function Hye(t=If){const e=t===If?Vye:Tie(t);return function(){return e().dispatch}}const NU=Hye();_ye(lB.useSyncExternalStoreWithSelector);yye(du.unstable_batchedUpdates);function Gl(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(r){return"'"+r+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function kf(t){return!!t&&!!t[Si]}function Rd(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var i=Object.getPrototypeOf(n);if(i===null)return!0;var r=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===Zye}(t)||Array.isArray(t)||!!t[e8]||!!(!((e=t.constructor)===null||e===void 0)&&e[e8])||BU(t)||zU(t))}function Km(t,e,n){n===void 0&&(n=!1),ix(t)===0?(n?Object.keys:j0)(t).forEach(function(i){n&&typeof i=="symbol"||e(i,t[i],t)}):t.forEach(function(i,r){return e(r,i,t)})}function ix(t){var e=t[Si];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:BU(t)?2:zU(t)?3:0}function H0(t,e){return ix(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jye(t,e){return ix(t)===2?t.get(e):t[e]}function Cie(t,e,n){var i=ix(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function Pie(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function BU(t){return Yye&&t instanceof Map}function zU(t){return Kye&&t instanceof Set}function Fp(t){return t.o||t.t}function FU(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Rie(t);delete e[Si];for(var n=j0(e),i=0;i<n.length;i++){var r=n[i],s=e[r];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[r]})}return Object.create(Object.getPrototypeOf(t),e)}function UU(t,e){return e===void 0&&(e=!1),VU(t)||kf(t)||!Rd(t)||(ix(t)>1&&(t.set=t.add=t.clear=t.delete=Gye),Object.freeze(t),e&&Km(t,function(n,i){return UU(i,!0)},!0)),t}function Gye(){Gl(2)}function VU(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function iu(t){var e=fB[t];return e||Gl(18,t),e}function Wye(t,e){fB[t]||(fB[t]=e)}function uB(){return Gw}function wO(t,e){e&&(iu("Patches"),t.u=[],t.s=[],t.v=e)}function DC(t){dB(t),t.p.forEach(qye),t.p=null}function dB(t){t===Gw&&(Gw=t.l)}function XW(t){return Gw={p:[],l:Gw,h:t,m:!0,_:0}}function qye(t){var e=t[Si];e.i===0||e.i===1?e.j():e.g=!0}function _O(t,e){e._=e.p.length;var n=e.p[0],i=t!==void 0&&t!==n;return e.h.O||iu("ES5").S(e,t,i),i?(n[Si].P&&(DC(e),Gl(4)),Rd(t)&&(t=RC(e,t),e.l||OC(e,t)),e.u&&iu("Patches").M(n[Si].t,t,e.u,e.s)):t=RC(e,n,[]),DC(e),e.u&&e.v(e.u,e.s),t!==Die?t:void 0}function RC(t,e,n){if(VU(e))return e;var i=e[Si];if(!i)return Km(e,function(a,l){return YW(t,i,e,a,l,n)},!0),e;if(i.A!==t)return e;if(!i.P)return OC(t,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var r=i.i===4||i.i===5?i.o=FU(i.k):i.o,s=r,o=!1;i.i===3&&(s=new Set(r),r.clear(),o=!0),Km(s,function(a,l){return YW(t,i,r,a,l,n,o)}),OC(t,r,!1),n&&t.u&&iu("Patches").N(i,n,t.u,t.s)}return i.o}function YW(t,e,n,i,r,s,o){if(kf(r)){var a=RC(t,r,s&&e&&e.i!==3&&!H0(e.R,i)?s.concat(i):void 0);if(Cie(n,i,a),!kf(a))return;t.m=!1}else o&&n.add(r);if(Rd(r)&&!VU(r)){if(!t.h.D&&t._<1)return;RC(t,r),e&&e.A.l||OC(t,r)}}function OC(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&UU(e,n)}function SO(t,e){var n=t[Si];return(n?Fp(n):t)[e]}function KW(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Object.getPrototypeOf(n)}}function $h(t){t.P||(t.P=!0,t.l&&$h(t.l))}function EO(t){t.o||(t.o=FU(t.t))}function hB(t,e,n){var i=BU(e)?iu("MapSet").F(e,n):zU(e)?iu("MapSet").T(e,n):t.O?function(r,s){var o=Array.isArray(r),a={i:o?1:0,A:s?s.A:uB(),P:!1,I:!1,R:{},l:s,t:r,k:null,o:null,j:null,C:!1},l=a,c=Ww;o&&(l=[a],c=Ab);var d=Proxy.revocable(l,c),u=d.revoke,h=d.proxy;return a.k=h,a.j=u,h}(e,n):iu("ES5").J(e,n);return(n?n.A:uB()).p.push(i),i}function $ye(t){return kf(t)||Gl(22,t),function e(n){if(!Rd(n))return n;var i,r=n[Si],s=ix(n);if(r){if(!r.P&&(r.i<4||!iu("ES5").K(r)))return r.t;r.I=!0,i=ZW(n,s),r.I=!1}else i=ZW(n,s);return Km(i,function(o,a){r&&jye(r.t,o)===a||Cie(i,o,e(a))}),s===3?new Set(i):i}(t)}function ZW(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return FU(t)}function Xye(){function t(s,o){var a=r[s];return a?a.enumerable=o:r[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[Si];return Ww.get(l,s)},set:function(l){var c=this[Si];Ww.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Si];if(!a.P)switch(a.i){case 5:i(a)&&$h(a);break;case 4:n(a)&&$h(a)}}}function n(s){for(var o=s.t,a=s.k,l=j0(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Si){var u=o[d];if(u===void 0&&!H0(o,d))return!0;var h=a[d],f=h&&h[Si];if(f?f.t!==u:!Pie(h,u))return!0}}var p=!!o[Si];return l.length!==j0(o).length+(p?0:1)}function i(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var r={};Wye("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(d,u){if(d){for(var h=Array(u.length),f=0;f<u.length;f++)Object.defineProperty(h,""+f,t(f,!0));return h}var p=Rie(u);delete p[Si];for(var m=j0(p),g=0;g<m.length;g++){var v=m[g];p[v]=t(v,d||!!p[v].enumerable)}return Object.create(Object.getPrototypeOf(u),p)}(a,s),c={i:a?5:4,A:o?o.A:uB(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Si,{value:c,writable:!0}),l},S:function(s,o,a){a?kf(o)&&o[Si].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var d=c[Si];if(d){var u=d.t,h=d.k,f=d.R,p=d.i;if(p===4)Km(h,function(x){x!==Si&&(u[x]!==void 0||H0(u,x)?f[x]||l(h[x]):(f[x]=!0,$h(d)))}),Km(u,function(x){h[x]!==void 0||H0(h,x)||(f[x]=!1,$h(d))});else if(p===5){if(i(d)&&($h(d),f.length=!0),h.length<u.length)for(var m=h.length;m<u.length;m++)f[m]=!1;else for(var g=u.length;g<h.length;g++)f[g]=!0;for(var v=Math.min(h.length,u.length),y=0;y<v;y++)h.hasOwnProperty(y)||(f[y]=!0),f[y]===void 0&&l(h[y])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):i(s)}})}var QW,Gw,HU=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Yye=typeof Map<"u",Kye=typeof Set<"u",JW=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Die=HU?Symbol.for("immer-nothing"):((QW={})["immer-nothing"]=!0,QW),e8=HU?Symbol.for("immer-draftable"):"__$immer_draftable",Si=HU?Symbol.for("immer-state"):"__$immer_state",Zye=""+Object.prototype.constructor,j0=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Rie=Object.getOwnPropertyDescriptors||function(t){var e={};return j0(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},fB={},Ww={get:function(t,e){if(e===Si)return t;var n=Fp(t);if(!H0(n,e))return function(r,s,o){var a,l=KW(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(r.k):void 0}(t,n,e);var i=n[e];return t.I||!Rd(i)?i:i===SO(t.t,e)?(EO(t),t.o[e]=hB(t.A.h,i,t)):i},has:function(t,e){return e in Fp(t)},ownKeys:function(t){return Reflect.ownKeys(Fp(t))},set:function(t,e,n){var i=KW(Fp(t),e);if(i!=null&&i.set)return i.set.call(t.k,n),!0;if(!t.P){var r=SO(Fp(t),e),s=r==null?void 0:r[Si];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(Pie(n,r)&&(n!==void 0||H0(t.t,e)))return!0;EO(t),$h(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return SO(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,EO(t),$h(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Fp(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty:function(){Gl(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Gl(12)}},Ab={};Km(Ww,function(t,e){Ab[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ab.deleteProperty=function(t,e){return Ab.set.call(this,t,e,void 0)},Ab.set=function(t,e,n){return Ww.set.call(this,t[0],e,n,t[0])};var Qye=function(){function t(n){var i=this;this.O=JW,this.D=!0,this.produce=function(r,s,o){if(typeof r=="function"&&typeof s!="function"){var a=s;s=r;var l=i;return function(m){var g=this;m===void 0&&(m=a);for(var v=arguments.length,y=Array(v>1?v-1:0),x=1;x<v;x++)y[x-1]=arguments[x];return l.produce(m,function(b){var w;return(w=s).call.apply(w,[g,b].concat(y))})}}var c;if(typeof s!="function"&&Gl(6),o!==void 0&&typeof o!="function"&&Gl(7),Rd(r)){var d=XW(i),u=hB(i,r,void 0),h=!0;try{c=s(u),h=!1}finally{h?DC(d):dB(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(m){return wO(d,o),_O(m,d)},function(m){throw DC(d),m}):(wO(d,o),_O(c,d))}if(!r||typeof r!="object"){if((c=s(r))===void 0&&(c=r),c===Die&&(c=void 0),i.D&&UU(c,!0),o){var f=[],p=[];iu("Patches").M(r,c,f,p),o(f,p)}return c}Gl(21,r)},this.produceWithPatches=function(r,s){if(typeof r=="function")return function(c){for(var d=arguments.length,u=Array(d>1?d-1:0),h=1;h<d;h++)u[h-1]=arguments[h];return i.produceWithPatches(c,function(f){return r.apply(void 0,[f].concat(u))})};var o,a,l=i.produce(r,s,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Rd(n)||Gl(8),kf(n)&&(n=$ye(n));var i=XW(this),r=hB(this,n,void 0);return r[Si].C=!0,dB(i),r},e.finishDraft=function(n,i){var r=n&&n[Si],s=r.A;return wO(s,i),_O(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!JW&&Gl(20),this.O=n},e.applyPatches=function(n,i){var r;for(r=i.length-1;r>=0;r--){var s=i[r];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}r>-1&&(i=i.slice(r+1));var o=iu("Patches").$;return kf(n)?o(n,i):this.produce(n,function(a){return o(a,i)})},t}(),wa=new Qye,Oie=wa.produce;wa.produceWithPatches.bind(wa);wa.setAutoFreeze.bind(wa);wa.setUseProxies.bind(wa);wa.applyPatches.bind(wa);wa.createDraft.bind(wa);wa.finishDraft.bind(wa);function qw(t){return qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qw(t)}function Jye(t,e){if(qw(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(qw(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function exe(t){var e=Jye(t,"string");return qw(e)==="symbol"?e:String(e)}function txe(t,e,n){return e=exe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function n8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(n),!0).forEach(function(i){txe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Cs(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var i8=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),MO=function(){return Math.random().toString(36).substring(7).split("").join(".")},LC={INIT:"@@redux/INIT"+MO(),REPLACE:"@@redux/REPLACE"+MO(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+MO()}};function nxe(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Lie(t,e,n){var i;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Cs(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Cs(1));return n(Lie)(t,e)}if(typeof t!="function")throw new Error(Cs(2));var r=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Cs(3));return s}function u(m){if(typeof m!="function")throw new Error(Cs(4));if(l)throw new Error(Cs(5));var g=!0;return c(),a.push(m),function(){if(g){if(l)throw new Error(Cs(6));g=!1,c();var y=a.indexOf(m);a.splice(y,1),o=null}}}function h(m){if(!nxe(m))throw new Error(Cs(7));if(typeof m.type>"u")throw new Error(Cs(8));if(l)throw new Error(Cs(9));try{l=!0,s=r(s,m)}finally{l=!1}for(var g=o=a,v=0;v<g.length;v++){var y=g[v];y()}return m}function f(m){if(typeof m!="function")throw new Error(Cs(10));r=m,h({type:LC.REPLACE})}function p(){var m,g=u;return m={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Cs(11));function x(){y.next&&y.next(d())}x();var b=g(x);return{unsubscribe:b}}},m[i8]=function(){return this},m}return h({type:LC.INIT}),i={dispatch:h,subscribe:u,getState:d,replaceReducer:f},i[i8]=p,i}function ixe(t){Object.keys(t).forEach(function(e){var n=t[e],i=n(void 0,{type:LC.INIT});if(typeof i>"u")throw new Error(Cs(12));if(typeof n(void 0,{type:LC.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Cs(13))})}function rxe(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i];typeof t[r]=="function"&&(n[r]=t[r])}var s=Object.keys(n),o;try{ixe(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,u={},h=0;h<s.length;h++){var f=s[h],p=n[f],m=l[f],g=p(m,c);if(typeof g>"u")throw c&&c.type,new Error(Cs(14));u[f]=g,d=d||g!==m}return d=d||s.length!==Object.keys(l).length,d?u:l}}function IC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,r){return function(){return i(r.apply(void 0,arguments))}})}function sxe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){return function(){var r=i.apply(void 0,arguments),s=function(){throw new Error(Cs(15))},o={getState:r.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=IC.apply(void 0,a)(r.dispatch),n8(n8({},r),{},{dispatch:s})}}}function Iie(t){var e=function(i){var r=i.dispatch,s=i.getState;return function(o){return function(a){return typeof a=="function"?a(r,s,t):o(a)}}};return e}var kie=Iie();kie.withExtraArgument=Iie;const r8=kie;var Nie=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),oxe=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,r=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},by=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t},axe=Object.defineProperty,lxe=Object.defineProperties,cxe=Object.getOwnPropertyDescriptors,s8=Object.getOwnPropertySymbols,uxe=Object.prototype.hasOwnProperty,dxe=Object.prototype.propertyIsEnumerable,o8=function(t,e,n){return e in t?axe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},_f=function(t,e){for(var n in e||(e={}))uxe.call(e,n)&&o8(t,n,e[n]);if(s8)for(var i=0,r=s8(e);i<r.length;i++){var n=r[i];dxe.call(e,n)&&o8(t,n,e[n])}return t},AO=function(t,e){return lxe(t,cxe(e))},hxe=function(t,e,n){return new Promise(function(i,r){var s=function(l){try{a(n.next(l))}catch(c){r(c)}},o=function(l){try{a(n.throw(l))}catch(c){r(c)}},a=function(l){return l.done?i(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},fxe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?IC:IC.apply(null,arguments)};function pxe(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var mxe=function(t){Nie(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=t.apply(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,by([void 0],n[0].concat(this)))):new(e.bind.apply(e,by([void 0],n.concat(this))))},e}(Array),gxe=function(t){Nie(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=t.apply(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,by([void 0],n[0].concat(this)))):new(e.bind.apply(e,by([void 0],n.concat(this))))},e}(Array);function pB(t){return Rd(t)?Oie(t,function(){}):t}function vxe(t){return typeof t=="boolean"}function yxe(){return function(e){return xxe(e)}}function xxe(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var i=new mxe;return n&&(vxe(n)?i.push(r8):i.push(r8.withExtraArgument(n.extraArgument))),i}var bxe=!0;function wxe(t){var e=yxe(),n=t||{},i=n.reducer,r=i===void 0?void 0:i,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,u=n.enhancers,h=u===void 0?void 0:u,f;if(typeof r=="function")f=r;else if(pxe(r))f=rxe(r);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var m=sxe.apply(void 0,p),g=IC;l&&(g=fxe(_f({trace:!bxe},typeof l=="object"&&l)));var v=new gxe(m),y=v;Array.isArray(h)?y=by([m],h):typeof h=="function"&&(y=h(v));var x=g.apply(void 0,y);return Lie(f,d,x)}function Sf(t,e){function n(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(e){var s=e.apply(void 0,i);if(!s)throw new Error("prepareAction did not return an object");return _f(_f({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:i[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(i){return i.type===t},n}function Bie(t){var e={},n=[],i,r={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,r},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),r},addDefaultCase:function(s){return i=s,r}};return t(r),[e,n,i]}function _xe(t){return typeof t=="function"}function Sxe(t,e,n,i){n===void 0&&(n=[]);var r=typeof e=="function"?Bie(e):[e,n,i],s=r[0],o=r[1],a=r[2],l;if(_xe(t))l=function(){return pB(t())};else{var c=pB(t);l=function(){return c}}function d(u,h){u===void 0&&(u=l());var f=by([s[h.type]],o.filter(function(p){var m=p.matcher;return m(h)}).map(function(p){var m=p.reducer;return m}));return f.filter(function(p){return!!p}).length===0&&(f=[a]),f.reduce(function(p,m){if(m)if(kf(p)){var g=p,v=m(g,h);return v===void 0?p:v}else{if(Rd(p))return Oie(p,function(y){return m(y,h)});var v=m(p,h);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return p},u)}return d.getInitialState=l,d}function Exe(t,e){return t+"/"+e}function jU(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:pB(t.initialState),i=t.reducers||{},r=Object.keys(i),s={},o={},a={};r.forEach(function(d){var u=i[d],h=Exe(e,d),f,p;"reducer"in u?(f=u.reducer,p=u.prepare):f=u,s[d]=f,o[h]=f,a[d]=p?Sf(h,p):Sf(h)});function l(){var d=typeof t.extraReducers=="function"?Bie(t.extraReducers):[t.extraReducers],u=d[0],h=u===void 0?{}:u,f=d[1],p=f===void 0?[]:f,m=d[2],g=m===void 0?void 0:m,v=_f(_f({},h),o);return Sxe(n,function(y){for(var x in v)y.addCase(x,v[x]);for(var b=0,w=p;b<w.length;b++){var E=w[b];y.addMatcher(E.matcher,E.reducer)}g&&y.addDefaultCase(g)})}var c;return{name:e,reducer:function(d,u){return c||(c=l()),c(d,u)},actions:a,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var Mxe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Axe=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=Mxe[Math.random()*64|0];return e},Txe=["name","message","stack","code"],TO=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),a8=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Cxe=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,i=Txe;n<i.length;n++){var r=i[n];typeof t[r]=="string"&&(e[r]=t[r])}return e}return{message:String(t)}};(function(){function t(e,n,i){var r=Sf(e+"/fulfilled",function(c,d,u,h){return{payload:c,meta:AO(_f({},h||{}),{arg:u,requestId:d,requestStatus:"fulfilled"})}}),s=Sf(e+"/pending",function(c,d,u){return{payload:void 0,meta:AO(_f({},u||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=Sf(e+"/rejected",function(c,d,u,h,f){return{payload:h,error:(i&&i.serializeError||Cxe)(c||"Rejected"),meta:AO(_f({},f||{}),{arg:u,requestId:d,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,u,h){var f=i!=null&&i.idGenerator?i.idGenerator(c):Axe(),p=new a,m;function g(y){m=y,p.abort()}var v=function(){return hxe(this,null,function(){var y,x,b,w,E,A,S;return oxe(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),w=(y=i==null?void 0:i.condition)==null?void 0:y.call(i,c,{getState:u,extra:h}),Dxe(w)?[4,w]:[3,2];case 1:w=C.sent(),C.label=2;case 2:if(w===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return E=new Promise(function(T,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),d(s(f,c,(x=i==null?void 0:i.getPendingMeta)==null?void 0:x.call(i,{requestId:f,arg:c},{getState:u,extra:h}))),[4,Promise.race([E,Promise.resolve(n(c,{dispatch:d,getState:u,extra:h,requestId:f,signal:p.signal,abort:g,rejectWithValue:function(T,P){return new TO(T,P)},fulfillWithValue:function(T,P){return new a8(T,P)}})).then(function(T){if(T instanceof TO)throw T;return T instanceof a8?r(T.payload,f,c,T.meta):r(T,f,c)})])];case 3:return b=C.sent(),[3,5];case 4:return A=C.sent(),b=A instanceof TO?o(null,f,c,A.payload,A.meta):o(A,f,c),[3,5];case 5:return S=i&&!i.dispatchConditionRejection&&o.match(b)&&b.meta.condition,S||d(b),[2,b]}})})}();return Object.assign(v,{abort:g,requestId:f,arg:c,unwrap:function(){return v.then(Pxe)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:r,typePrefix:e})}return t.withTypes=function(){return t},t})();function Pxe(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Dxe(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var GU="listenerMiddleware";Sf(GU+"/add");Sf(GU+"/removeAll");Sf(GU+"/remove");var l8;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Xye();const Rxe={value:{}},zie=jU({name:"user",initialState:Rxe,reducers:{setUser:(t,e)=>{t.value=e.payload}}}),{setUser:Oxe}=zie.actions,Lxe=zie.reducer,Ixe={value:[]},Fie=jU({name:"diary",initialState:Ixe,reducers:{setDiarys:(t,e)=>{t.value=e.payload}}}),{setDiarys:$w}=Fie.actions,kxe=Fie.reducer,Nxe={value:[]},Uie=jU({name:"allFavorites",initialState:Nxe,reducers:{setFavoritesList:(t,e)=>{t.value=e.payload}}}),{setFavoritesList:TT}=Uie.actions,Bxe=Uie.reducer,zxe=wxe({reducer:{user:Lxe,diary:kxe,allFavorites:Bxe}});/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const JP="146",Up={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Vp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Vie=0,mB=1,Hie=2,Fxe=3,jie=0,eD=1,Kb=2,fm=3,Nf=0,Bs=1,ql=2,yd=0,Tm=1,gB=2,vB=3,yB=4,Gie=5,tm=100,Wie=101,qie=102,xB=103,bB=104,$ie=200,Xie=201,Yie=202,Kie=203,WU=204,qU=205,Zie=206,Qie=207,Jie=208,ere=209,tre=210,nre=0,ire=1,rre=2,kC=3,sre=4,ore=5,are=6,lre=7,K_=0,cre=1,ure=2,tc=0,dre=1,hre=2,fre=3,$U=4,pre=5,tD=300,Od=301,Bf=302,wy=303,Xw=304,rx=306,zf=1e3,as=1001,_y=1002,ir=1003,Yw=1004,Uxe=1004,Kw=1005,Vxe=1005,gi=1006,nD=1007,Hxe=1007,Gd=1008,jxe=1008,Ld=1009,mre=1010,gre=1011,XU=1012,vre=1013,Jh=1014,rl=1015,$l=1016,yre=1017,xre=1018,Cm=1020,bre=1021,wre=1022,So=1023,_re=1024,Sre=1025,Ef=1026,Zm=1027,Ere=1028,Mre=1029,Are=1030,Tre=1031,Cre=1033,CT=33776,PT=33777,DT=33778,RT=33779,wB=35840,_B=35841,SB=35842,EB=35843,Pre=36196,MB=37492,AB=37496,TB=37808,CB=37809,PB=37810,DB=37811,RB=37812,OB=37813,LB=37814,IB=37815,kB=37816,NB=37817,BB=37818,zB=37819,FB=37820,UB=37821,VB=36492,Dre=2200,Rre=2201,Ore=2202,Sy=2300,Qm=2301,OT=2302,pm=2400,mm=2401,Zw=2402,iD=2500,YU=2501,Gxe=0,Lre=1,KU=2,hu=3e3,kn=3001,Ire=3200,kre=3201,Wd=0,Nre=1,Wxe="",Fc="srgb",ef="srgb-linear",qxe=0,LT=7680,$xe=7681,Xxe=7682,Yxe=7683,Kxe=34055,Zxe=34056,Qxe=5386,Jxe=512,e1e=513,t1e=514,n1e=515,i1e=516,r1e=517,s1e=518,Bre=519,Qw=35044,o1e=35048,a1e=35040,l1e=35045,c1e=35049,u1e=35041,d1e=35046,h1e=35050,f1e=35042,p1e="100",HB="300 es",NC=1035;class bu{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Es=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let c8=1234567;const Pm=Math.PI/180,Jw=180/Math.PI;function ma(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Es[t&255]+Es[t>>8&255]+Es[t>>16&255]+Es[t>>24&255]+"-"+Es[e&255]+Es[e>>8&255]+"-"+Es[e>>16&15|64]+Es[e>>24&255]+"-"+Es[n&63|128]+Es[n>>8&255]+"-"+Es[n>>16&255]+Es[n>>24&255]+Es[i&255]+Es[i>>8&255]+Es[i>>16&255]+Es[i>>24&255]).toLowerCase()}function rr(t,e,n){return Math.max(e,Math.min(n,t))}function ZU(t,e){return(t%e+e)%e}function m1e(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function g1e(t,e,n){return t!==e?(n-t)/(e-t):0}function Zb(t,e,n){return(1-n)*t+n*e}function v1e(t,e,n,i){return Zb(t,e,1-Math.exp(-n*i))}function y1e(t,e=1){return e-Math.abs(ZU(t,e*2)-e)}function x1e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function b1e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function w1e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function _1e(t,e){return t+Math.random()*(e-t)}function S1e(t){return t*(.5-Math.random())}function E1e(t){t!==void 0&&(c8=t);let e=c8+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function M1e(t){return t*Pm}function A1e(t){return t*Jw}function jB(t){return(t&t-1)===0&&t!==0}function zre(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function BC(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function T1e(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),d=o((e+i)/2),u=s((e-i)/2),h=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*d,l*u,l*h,a*c);break;case"YZY":t.set(l*h,a*d,l*u,a*c);break;case"ZXZ":t.set(l*u,l*h,a*d,a*c);break;case"XZX":t.set(a*d,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*d,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function cd(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function si(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var Fre=Object.freeze({__proto__:null,DEG2RAD:Pm,RAD2DEG:Jw,generateUUID:ma,clamp:rr,euclideanModulo:ZU,mapLinear:m1e,inverseLerp:g1e,lerp:Zb,damp:v1e,pingpong:y1e,smoothstep:x1e,smootherstep:b1e,randInt:w1e,randFloat:_1e,randFloatSpread:S1e,seededRandom:E1e,degToRad:M1e,radToDeg:A1e,isPowerOfTwo:jB,ceilPowerOfTwo:zre,floorPowerOfTwo:BC,setQuaternionFromProperEuler:T1e,normalize:si,denormalize:cd});class Ye{constructor(e=0,n=0){Ye.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Co{constructor(){Co.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=n,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],d=i[4],u=i[7],h=i[2],f=i[5],p=i[8],m=r[0],g=r[3],v=r[6],y=r[1],x=r[4],b=r[7],w=r[2],E=r[5],A=r[8];return s[0]=o*m+a*y+l*w,s[3]=o*g+a*x+l*E,s[6]=o*v+a*b+l*A,s[1]=c*m+d*y+u*w,s[4]=c*g+d*x+u*E,s[7]=c*v+d*b+u*A,s[2]=h*m+f*y+p*w,s[5]=h*g+f*x+p*E,s[8]=h*v+f*b+p*A,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return n*o*d-n*a*c-i*s*d+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*o-a*c,h=a*l-d*s,f=c*s-o*l,p=n*u+i*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=u*m,e[1]=(r*c-d*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(d*n-r*l)*m,e[5]=(r*s-a*n)*m,e[6]=f*m,e[7]=(i*l-c*n)*m,e[8]=(o*n-i*s)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],d=r[7];return r[0]=n*s+i*l,r[3]=n*o+i*c,r[6]=n*a+i*d,r[1]=-i*s+n*l,r[4]=-i*o+n*c,r[7]=-i*a+n*d,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function Ure(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const C1e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function x0(t,e){return new C1e[t](e)}function e_(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Dm(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function IT(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const CO={[Fc]:{[ef]:Dm},[ef]:{[Fc]:IT}},Wa={legacyMode:!0,get workingColorSpace(){return ef},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(CO[e]&&CO[e][n]!==void 0){const i=CO[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Vre={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Er={r:0,g:0,b:0},Al={h:0,s:0,l:0},iM={h:0,s:0,l:0};function PO(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function rM(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class at{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Fc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wa.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=ef){return this.r=e,this.g=n,this.b=i,Wa.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=ef){if(e=ZU(e,1),n=rr(n,0,1),i=rr(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=PO(o,s,e+1/3),this.g=PO(o,s,e),this.b=PO(o,s,e-1/3)}return Wa.toWorkingColorSpace(this,r),this}setStyle(e,n=Fc){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Wa.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Wa.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,d,n)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Wa.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Wa.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Fc){const i=Vre[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dm(e.r),this.g=Dm(e.g),this.b=Dm(e.b),this}copyLinearToSRGB(e){return this.r=IT(e.r),this.g=IT(e.g),this.b=IT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fc){return Wa.fromWorkingColorSpace(rM(this,Er),e),rr(Er.r*255,0,255)<<16^rr(Er.g*255,0,255)<<8^rr(Er.b*255,0,255)<<0}getHexString(e=Fc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=ef){Wa.fromWorkingColorSpace(rM(this,Er),n);const i=Er.r,r=Er.g,s=Er.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=d<=.5?u/(o+a):u/(2-o-a),o){case i:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-i)/u+2;break;case s:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,n=ef){return Wa.fromWorkingColorSpace(rM(this,Er),n),e.r=Er.r,e.g=Er.g,e.b=Er.b,e}getStyle(e=Fc){return Wa.fromWorkingColorSpace(rM(this,Er),e),e!==Fc?`color(${e} ${Er.r} ${Er.g} ${Er.b})`:`rgb(${Er.r*255|0},${Er.g*255|0},${Er.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(Al),Al.h+=e,Al.s+=n,Al.l+=i,this.setHSL(Al.h,Al.s,Al.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Al),e.getHSL(iM);const i=Zb(Al.h,iM.h,n),r=Zb(Al.s,iM.s,n),s=Zb(Al.l,iM.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}at.NAMES=Vre;let qg;class QU{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{qg===void 0&&(qg=e_("canvas")),qg.width=e.width,qg.height=e.height;const i=qg.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=qg}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=e_("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Dm(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Dm(n[i]/255)*255):n[i]=Dm(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class gm{constructor(e=null){this.isSource=!0,this.uuid=ma(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(DO(r[o].image)):s.push(DO(r[o]))}else s=DO(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function DO(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?QU.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let P1e=0;class Yi extends bu{constructor(e=Yi.DEFAULT_IMAGE,n=Yi.DEFAULT_MAPPING,i=as,r=as,s=gi,o=Gd,a=So,l=Ld,c=1,d=hu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:P1e++}),this.uuid=ma(),this.name="",this.source=new gm(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Co,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==tD)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zf:e.x=e.x-Math.floor(e.x);break;case as:e.x=e.x<0?0:1;break;case _y:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zf:e.y=e.y-Math.floor(e.y);break;case as:e.y=e.y<0?0:1;break;case _y:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Yi.DEFAULT_IMAGE=null;Yi.DEFAULT_MAPPING=tD;class An{constructor(e=0,n=0,i=0,r=1){An.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],p=l[9],m=l[2],g=l[6],v=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,b=(f+1)/2,w=(v+1)/2,E=(d+h)/4,A=(u+m)/4,S=(p+g)/4;return x>b&&x>w?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=E/i,s=A/i):b>w?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=E/r,s=S/r):w<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(w),i=A/s,r=S/s),this.set(i,r,s,n),this}let y=Math.sqrt((g-p)*(g-p)+(u-m)*(u-m)+(h-d)*(h-d));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(u-m)/y,this.z=(h-d)/y,this.w=Math.acos((c+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ml extends bu{constructor(e=1,n=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new An(0,0,e,n),this.scissorTest=!1,this.viewport=new An(0,0,e,n);const r={width:e,height:n,depth:1};this.texture=new Yi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:gi,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new gm(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Z_ extends Yi{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ir,this.minFilter=ir,this.wrapR=as,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class D1e extends ml{constructor(e=1,n=1,i=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Z_(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class rD extends Yi{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ir,this.minFilter=ir,this.wrapR=as,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class R1e extends ml{constructor(e=1,n=1,i=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new rD(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class O1e extends ml{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class or{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],d=i[r+2],u=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=d,e[n+3]=u;return}if(a===1){e[n+0]=h,e[n+1]=f,e[n+2]=p,e[n+3]=m;return}if(u!==m||l!==h||c!==f||d!==p){let g=1-a;const v=l*h+c*f+d*p+u*m,y=v>=0?1:-1,x=1-v*v;if(x>Number.EPSILON){const w=Math.sqrt(x),E=Math.atan2(w,v*y);g=Math.sin(g*E)/w,a=Math.sin(a*E)/w}const b=a*y;if(l=l*g+h*b,c=c*g+f*b,d=d*g+p*b,u=u*g+m*b,g===1-a){const w=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=w,c*=w,d*=w,u*=w}}e[n]=l,e[n+1]=c,e[n+2]=d,e[n+3]=u}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],u=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[n]=a*p+d*u+l*f-c*h,e[n+1]=l*p+d*h+c*u-a*f,e[n+2]=c*p+d*f+a*h-l*u,e[n+3]=d*p-a*u-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),u=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"YZX":this._x=h*d*u+c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u-h*f*p;break;case"XZY":this._x=h*d*u-c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],d=n[6],u=n[10],h=i+a+u;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>u){const f=2*Math.sqrt(1+i-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-i-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+d)/f}else{const f=2*Math.sqrt(1+u-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rr(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,d=n._w;return this._x=i*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-i*c,this._z=s*d+o*c+i*l-r*a,this._w=o*d-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-n;return this._w=f*o+n*this._w,this._x=f*i+n*this._x,this._y=f*r+n*this._y,this._z=f*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-n)*d)/c,h=Math.sin(n*d)/c;return this._w=o*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class de{constructor(e=0,n=0,i=0){de.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(u8.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(u8.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*r-a*i,d=l*i+a*n-s*r,u=l*r+s*i-o*n,h=-s*n-o*i-a*r;return this.x=c*l+h*-s+d*-a-u*-o,this.y=d*l+h*-o+u*-s-c*-a,this.z=u*l+h*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return RO.copy(this).projectOnVector(e),this.sub(RO)}reflect(e){return this.sub(RO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(rr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const RO=new de,u8=new or;class Qf{constructor(e=new de(1/0,1/0,1/0),n=new de(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const d=e[l],u=e[l+1],h=e[l+2];d<n&&(n=d),u<i&&(i=u),h<r&&(r=h),d>s&&(s=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const d=e.getX(l),u=e.getY(l),h=e.getZ(l);d<n&&(n=d),u<i&&(i=u),h<r&&(r=h),d>s&&(s=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=yp.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)yp.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(yp)}else i.boundingBox===null&&i.computeBoundingBox(),OO.copy(i.boundingBox),OO.applyMatrix4(e.matrixWorld),this.union(OO);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,yp),yp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(m1),sM.subVectors(this.max,m1),$g.subVectors(e.a,m1),Xg.subVectors(e.b,m1),Yg.subVectors(e.c,m1),dh.subVectors(Xg,$g),hh.subVectors(Yg,Xg),xp.subVectors($g,Yg);let n=[0,-dh.z,dh.y,0,-hh.z,hh.y,0,-xp.z,xp.y,dh.z,0,-dh.x,hh.z,0,-hh.x,xp.z,0,-xp.x,-dh.y,dh.x,0,-hh.y,hh.x,0,-xp.y,xp.x,0];return!LO(n,$g,Xg,Yg,sM)||(n=[1,0,0,0,1,0,0,0,1],!LO(n,$g,Xg,Yg,sM))?!1:(oM.crossVectors(dh,hh),n=[oM.x,oM.y,oM.z],LO(n,$g,Xg,Yg,sM))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return yp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(yp).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ru[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ru[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ru[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ru[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ru[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ru[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ru[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ru[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ru),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ru=[new de,new de,new de,new de,new de,new de,new de,new de],yp=new de,OO=new Qf,$g=new de,Xg=new de,Yg=new de,dh=new de,hh=new de,xp=new de,m1=new de,sM=new de,oM=new de,bp=new de;function LO(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){bp.fromArray(t,s);const a=r.x*Math.abs(bp.x)+r.y*Math.abs(bp.y)+r.z*Math.abs(bp.z),l=e.dot(bp),c=n.dot(bp),d=i.dot(bp);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const L1e=new Qf,g1=new de,IO=new de;class Jf{constructor(e=new de,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):L1e.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;g1.subVectors(e,this.center);const n=g1.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(g1,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(IO.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(g1.copy(e.center).add(IO)),this.expandByPoint(g1.copy(e.center).sub(IO))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ou=new de,kO=new de,aM=new de,fh=new de,NO=new de,lM=new de,BO=new de;class Q_{constructor(e=new de,n=new de(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ou)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ou.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ou.copy(this.direction).multiplyScalar(n).add(this.origin),Ou.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){kO.copy(e).add(n).multiplyScalar(.5),aM.copy(n).sub(e).normalize(),fh.copy(this.origin).sub(kO);const s=e.distanceTo(n)*.5,o=-this.direction.dot(aM),a=fh.dot(this.direction),l=-fh.dot(aM),c=fh.lengthSq(),d=Math.abs(1-o*o);let u,h,f,p;if(d>0)if(u=o*l-a,h=o*a-l,p=s*d,u>=0)if(h>=-p)if(h<=p){const m=1/d;u*=m,h*=m,f=u*(u+o*h+2*a)+h*(o*u+h+2*l)+c}else h=s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h=-s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-p?(u=Math.max(0,-(-o*s+a)),h=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c):h<=p?(u=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(u=Math.max(0,-(o*s+a)),h=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c);else h=o>0?-s:s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(aM).multiplyScalar(h).add(kO),f}intersectSphere(e,n){Ou.subVectors(e.center,this.origin);const i=Ou.dot(this.direction),r=Ou.dot(Ou)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),d>=0?(s=(e.min.y-h.y)*d,o=(e.max.y-h.y)*d):(s=(e.max.y-h.y)*d,o=(e.min.y-h.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Ou)!==null}intersectTriangle(e,n,i,r,s){NO.subVectors(n,e),lM.subVectors(i,e),BO.crossVectors(NO,lM);let o=this.direction.dot(BO),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;fh.subVectors(this.origin,e);const l=a*this.direction.dot(lM.crossVectors(fh,lM));if(l<0)return null;const c=a*this.direction.dot(NO.cross(fh));if(c<0||l+c>o)return null;const d=-a*fh.dot(BO);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yt{constructor(){Yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,c,d,u,h,f,p,m,g){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=d,v[10]=u,v[14]=h,v[3]=f,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Kg.setFromMatrixColumn(e,0).length(),s=1/Kg.setFromMatrixColumn(e,1).length(),o=1/Kg.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const h=o*d,f=o*u,p=a*d,m=a*u;n[0]=l*d,n[4]=-l*u,n[8]=c,n[1]=f+p*c,n[5]=h-m*c,n[9]=-a*l,n[2]=m-h*c,n[6]=p+f*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*d,f=l*u,p=c*d,m=c*u;n[0]=h+m*a,n[4]=p*a-f,n[8]=o*c,n[1]=o*u,n[5]=o*d,n[9]=-a,n[2]=f*a-p,n[6]=m+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*d,f=l*u,p=c*d,m=c*u;n[0]=h-m*a,n[4]=-o*u,n[8]=p+f*a,n[1]=f+p*a,n[5]=o*d,n[9]=m-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*d,f=o*u,p=a*d,m=a*u;n[0]=l*d,n[4]=p*c-f,n[8]=h*c+m,n[1]=l*u,n[5]=m*c+h,n[9]=f*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,f=o*c,p=a*l,m=a*c;n[0]=l*d,n[4]=m-h*u,n[8]=p*u+f,n[1]=u,n[5]=o*d,n[9]=-a*d,n[2]=-c*d,n[6]=f*u+p,n[10]=h-m*u}else if(e.order==="XZY"){const h=o*l,f=o*c,p=a*l,m=a*c;n[0]=l*d,n[4]=-u,n[8]=c*d,n[1]=h*u+m,n[5]=o*d,n[9]=f*u-p,n[2]=p*u-f,n[6]=a*d,n[10]=m*u+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(I1e,e,k1e)}lookAt(e,n,i){const r=this.elements;return Yo.subVectors(e,n),Yo.lengthSq()===0&&(Yo.z=1),Yo.normalize(),ph.crossVectors(i,Yo),ph.lengthSq()===0&&(Math.abs(i.z)===1?Yo.x+=1e-4:Yo.z+=1e-4,Yo.normalize(),ph.crossVectors(i,Yo)),ph.normalize(),cM.crossVectors(Yo,ph),r[0]=ph.x,r[4]=cM.x,r[8]=Yo.x,r[1]=ph.y,r[5]=cM.y,r[9]=Yo.y,r[2]=ph.z,r[6]=cM.z,r[10]=Yo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],d=i[1],u=i[5],h=i[9],f=i[13],p=i[2],m=i[6],g=i[10],v=i[14],y=i[3],x=i[7],b=i[11],w=i[15],E=r[0],A=r[4],S=r[8],C=r[12],T=r[1],P=r[5],R=r[9],L=r[13],O=r[2],B=r[6],$=r[10],X=r[14],H=r[3],U=r[7],N=r[11],k=r[15];return s[0]=o*E+a*T+l*O+c*H,s[4]=o*A+a*P+l*B+c*U,s[8]=o*S+a*R+l*$+c*N,s[12]=o*C+a*L+l*X+c*k,s[1]=d*E+u*T+h*O+f*H,s[5]=d*A+u*P+h*B+f*U,s[9]=d*S+u*R+h*$+f*N,s[13]=d*C+u*L+h*X+f*k,s[2]=p*E+m*T+g*O+v*H,s[6]=p*A+m*P+g*B+v*U,s[10]=p*S+m*R+g*$+v*N,s[14]=p*C+m*L+g*X+v*k,s[3]=y*E+x*T+b*O+w*H,s[7]=y*A+x*P+b*B+w*U,s[11]=y*S+x*R+b*$+w*N,s[15]=y*C+x*L+b*X+w*k,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],h=e[10],f=e[14],p=e[3],m=e[7],g=e[11],v=e[15];return p*(+s*l*u-r*c*u-s*a*h+i*c*h+r*a*f-i*l*f)+m*(+n*l*f-n*c*h+s*o*h-r*o*f+r*c*d-s*l*d)+g*(+n*c*u-n*a*f-s*o*u+i*o*f+s*a*d-i*c*d)+v*(-r*a*d-n*l*u+n*a*h+r*o*u-i*o*h+i*l*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=u*g*c-m*h*c+m*l*f-a*g*f-u*l*v+a*h*v,x=p*h*c-d*g*c-p*l*f+o*g*f+d*l*v-o*h*v,b=d*m*c-p*u*c+p*a*f-o*m*f-d*a*v+o*u*v,w=p*u*l-d*m*l-p*a*h+o*m*h+d*a*g-o*u*g,E=n*y+i*x+r*b+s*w;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/E;return e[0]=y*A,e[1]=(m*h*s-u*g*s-m*r*f+i*g*f+u*r*v-i*h*v)*A,e[2]=(a*g*s-m*l*s+m*r*c-i*g*c-a*r*v+i*l*v)*A,e[3]=(u*l*s-a*h*s-u*r*c+i*h*c+a*r*f-i*l*f)*A,e[4]=x*A,e[5]=(d*g*s-p*h*s+p*r*f-n*g*f-d*r*v+n*h*v)*A,e[6]=(p*l*s-o*g*s-p*r*c+n*g*c+o*r*v-n*l*v)*A,e[7]=(o*h*s-d*l*s+d*r*c-n*h*c-o*r*f+n*l*f)*A,e[8]=b*A,e[9]=(p*u*s-d*m*s-p*i*f+n*m*f+d*i*v-n*u*v)*A,e[10]=(o*m*s-p*a*s+p*i*c-n*m*c-o*i*v+n*a*v)*A,e[11]=(d*a*s-o*u*s-d*i*c+n*u*c+o*i*f-n*a*f)*A,e[12]=w*A,e[13]=(d*m*r-p*u*r+p*i*h-n*m*h-d*i*g+n*u*g)*A,e[14]=(p*a*r-o*m*r-p*i*l+n*m*l+o*i*g-n*a*g)*A,e[15]=(o*u*r-d*a*r+d*i*l-n*u*l-o*i*h+n*a*h)*A,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,d=o+o,u=a+a,h=s*c,f=s*d,p=s*u,m=o*d,g=o*u,v=a*u,y=l*c,x=l*d,b=l*u,w=i.x,E=i.y,A=i.z;return r[0]=(1-(m+v))*w,r[1]=(f+b)*w,r[2]=(p-x)*w,r[3]=0,r[4]=(f-b)*E,r[5]=(1-(h+v))*E,r[6]=(g+y)*E,r[7]=0,r[8]=(p+x)*A,r[9]=(g-y)*A,r[10]=(1-(h+m))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Kg.set(r[0],r[1],r[2]).length();const o=Kg.set(r[4],r[5],r[6]).length(),a=Kg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Tl.copy(this);const c=1/s,d=1/o,u=1/a;return Tl.elements[0]*=c,Tl.elements[1]*=c,Tl.elements[2]*=c,Tl.elements[4]*=d,Tl.elements[5]*=d,Tl.elements[6]*=d,Tl.elements[8]*=u,Tl.elements[9]*=u,Tl.elements[10]*=u,n.setFromRotationMatrix(Tl),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(i-r),d=(n+e)/(n-e),u=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){const a=this.elements,l=1/(n-e),c=1/(i-r),d=1/(o-s),u=(n+e)*l,h=(i+r)*c,f=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Kg=new de,Tl=new Yt,I1e=new de(0,0,0),k1e=new de(1,1,1),ph=new de,cM=new de,Yo=new de,d8=new Yt,h8=new or;class gg{constructor(e=0,n=0,i=0,r=gg.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],d=r[9],u=r[2],h=r[6],f=r[10];switch(n){case"XYZ":this._y=Math.asin(rr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-rr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(rr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-rr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(rr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-rr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return d8.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d8,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return h8.setFromEuler(this),this.setFromQuaternion(h8,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}gg.DefaultOrder="XYZ";gg.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Rm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let N1e=0;const f8=new de,Zg=new or,Lu=new Yt,uM=new de,v1=new de,B1e=new de,z1e=new or,p8=new de(1,0,0),m8=new de(0,1,0),g8=new de(0,0,1),F1e={type:"added"},v8={type:"removed"};class Mn extends bu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:N1e++}),this.uuid=ma(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mn.DefaultUp.clone();const e=new de,n=new gg,i=new or,r=new de(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Yt},normalMatrix:{value:new Co}}),this.matrix=new Yt,this.matrixWorld=new Yt,this.matrixAutoUpdate=Mn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Mn.DefaultMatrixWorldAutoUpdate,this.layers=new Rm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Zg.setFromAxisAngle(e,n),this.quaternion.multiply(Zg),this}rotateOnWorldAxis(e,n){return Zg.setFromAxisAngle(e,n),this.quaternion.premultiply(Zg),this}rotateX(e){return this.rotateOnAxis(p8,e)}rotateY(e){return this.rotateOnAxis(m8,e)}rotateZ(e){return this.rotateOnAxis(g8,e)}translateOnAxis(e,n){return f8.copy(e).applyQuaternion(this.quaternion),this.position.add(f8.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(p8,e)}translateY(e){return this.translateOnAxis(m8,e)}translateZ(e){return this.translateOnAxis(g8,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Lu.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?uM.copy(e):uM.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),v1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lu.lookAt(v1,uM,this.up):Lu.lookAt(uM,v1,this.up),this.quaternion.setFromRotationMatrix(Lu),r&&(Lu.extractRotation(r.matrixWorld),Zg.setFromRotationMatrix(Lu),this.quaternion.premultiply(Zg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(F1e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(v8)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(v8)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Lu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Lu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Lu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(v1,e,B1e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(v1,z1e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),u=o(e.shapes),h=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),u.length>0&&(i.shapes=u),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Mn.DefaultUp=new de(0,1,0);Mn.DefaultMatrixAutoUpdate=!0;Mn.DefaultMatrixWorldAutoUpdate=!0;const Cl=new de,Iu=new de,zO=new de,ku=new de,Qg=new de,Jg=new de,y8=new de,FO=new de,UO=new de,VO=new de;class nl{constructor(e=new de,n=new de,i=new de){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Cl.subVectors(e,n),r.cross(Cl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Cl.subVectors(r,n),Iu.subVectors(i,n),zO.subVectors(e,n);const o=Cl.dot(Cl),a=Cl.dot(Iu),l=Cl.dot(zO),c=Iu.dot(Iu),d=Iu.dot(zO),u=o*c-a*a;if(u===0)return s.set(-2,-1,-1);const h=1/u,f=(c*l-a*d)*h,p=(o*d-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,ku),ku.x>=0&&ku.y>=0&&ku.x+ku.y<=1}static getUV(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,ku),l.set(0,0),l.addScaledVector(s,ku.x),l.addScaledVector(o,ku.y),l.addScaledVector(a,ku.z),l}static isFrontFacing(e,n,i,r){return Cl.subVectors(i,n),Iu.subVectors(e,n),Cl.cross(Iu).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Cl.subVectors(this.c,this.b),Iu.subVectors(this.a,this.b),Cl.cross(Iu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return nl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return nl.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return nl.getUV(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return nl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return nl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;Qg.subVectors(r,i),Jg.subVectors(s,i),FO.subVectors(e,i);const l=Qg.dot(FO),c=Jg.dot(FO);if(l<=0&&c<=0)return n.copy(i);UO.subVectors(e,r);const d=Qg.dot(UO),u=Jg.dot(UO);if(d>=0&&u<=d)return n.copy(r);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return o=l/(l-d),n.copy(i).addScaledVector(Qg,o);VO.subVectors(e,s);const f=Qg.dot(VO),p=Jg.dot(VO);if(p>=0&&f<=p)return n.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(Jg,a);const g=d*p-f*u;if(g<=0&&u-d>=0&&f-p>=0)return y8.subVectors(s,r),a=(u-d)/(u-d+(f-p)),n.copy(r).addScaledVector(y8,a);const v=1/(g+m+h);return o=m*v,a=h*v,n.copy(i).addScaledVector(Qg,o).addScaledVector(Jg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let U1e=0;class xr extends bu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:U1e++}),this.uuid=ma(),this.name="",this.type="Material",this.blending=Tm,this.side=Nf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=WU,this.blendDst=qU,this.blendEquation=tm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=kC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Bre,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=LT,this.stencilZFail=LT,this.stencilZPass=LT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const r=this[n];if(r===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Tm&&(i.blending=this.blending),this.side!==Nf&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class la extends xr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const dr=new de,dM=new Ye;class Wn{constructor(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i===!0,this.usage=Qw,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)dM.fromBufferAttribute(this,n),dM.applyMatrix3(e),this.setXY(n,dM.x,dM.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.applyMatrix3(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.applyMatrix4(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.applyNormalMatrix(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.transformDirection(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=cd(n,this.array)),n}setX(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=cd(n,this.array)),n}setY(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=cd(n,this.array)),n}setZ(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=cd(n,this.array)),n}setW(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=si(n,this.array),i=si(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=si(n,this.array),i=si(i,this.array),r=si(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=si(n,this.array),i=si(i,this.array),r=si(r,this.array),s=si(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qw&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class V1e extends Wn{constructor(e,n,i){super(new Int8Array(e),n,i)}}class H1e extends Wn{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class j1e extends Wn{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class G1e extends Wn{constructor(e,n,i){super(new Int16Array(e),n,i)}}class JU extends Wn{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class W1e extends Wn{constructor(e,n,i){super(new Int32Array(e),n,i)}}class e5 extends Wn{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class q1e extends Wn{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}}class Et extends Wn{constructor(e,n,i){super(new Float32Array(e),n,i)}}class $1e extends Wn{constructor(e,n,i){super(new Float64Array(e),n,i)}}let X1e=0;const Na=new Yt,HO=new Mn,ev=new de,Ko=new Qf,y1=new Qf,$r=new de;class cn extends bu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:X1e++}),this.uuid=ma(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ure(e)?e5:JU)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Co().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Na.makeRotationFromQuaternion(e),this.applyMatrix4(Na),this}rotateX(e){return Na.makeRotationX(e),this.applyMatrix4(Na),this}rotateY(e){return Na.makeRotationY(e),this.applyMatrix4(Na),this}rotateZ(e){return Na.makeRotationZ(e),this.applyMatrix4(Na),this}translate(e,n,i){return Na.makeTranslation(e,n,i),this.applyMatrix4(Na),this}scale(e,n,i){return Na.makeScale(e,n,i),this.applyMatrix4(Na),this}lookAt(e){return HO.lookAt(e),HO.updateMatrix(),this.applyMatrix4(HO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ev).negate(),this.translate(ev.x,ev.y,ev.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Et(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qf);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new de(-1/0,-1/0,-1/0),new de(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];Ko.setFromBufferAttribute(s),this.morphTargetsRelative?($r.addVectors(this.boundingBox.min,Ko.min),this.boundingBox.expandByPoint($r),$r.addVectors(this.boundingBox.max,Ko.max),this.boundingBox.expandByPoint($r)):(this.boundingBox.expandByPoint(Ko.min),this.boundingBox.expandByPoint(Ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Jf);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new de,1/0);return}if(e){const i=this.boundingSphere.center;if(Ko.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];y1.setFromBufferAttribute(a),this.morphTargetsRelative?($r.addVectors(Ko.min,y1.min),Ko.expandByPoint($r),$r.addVectors(Ko.max,y1.max),Ko.expandByPoint($r)):(Ko.expandByPoint(y1.min),Ko.expandByPoint(y1.max))}Ko.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)$r.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared($r));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)$r.fromBufferAttribute(a,c),l&&(ev.fromBufferAttribute(e,c),$r.add(ev)),r=Math.max(r,i.distanceToSquared($r))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let T=0;T<a;T++)c[T]=new de,d[T]=new de;const u=new de,h=new de,f=new de,p=new Ye,m=new Ye,g=new Ye,v=new de,y=new de;function x(T,P,R){u.fromArray(r,T*3),h.fromArray(r,P*3),f.fromArray(r,R*3),p.fromArray(o,T*2),m.fromArray(o,P*2),g.fromArray(o,R*2),h.sub(u),f.sub(u),m.sub(p),g.sub(p);const L=1/(m.x*g.y-g.x*m.y);isFinite(L)&&(v.copy(h).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(L),y.copy(f).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(L),c[T].add(v),c[P].add(v),c[R].add(v),d[T].add(y),d[P].add(y),d[R].add(y))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let T=0,P=b.length;T<P;++T){const R=b[T],L=R.start,O=R.count;for(let B=L,$=L+O;B<$;B+=3)x(i[B+0],i[B+1],i[B+2])}const w=new de,E=new de,A=new de,S=new de;function C(T){A.fromArray(s,T*3),S.copy(A);const P=c[T];w.copy(P),w.sub(A.multiplyScalar(A.dot(P))).normalize(),E.crossVectors(S,P);const L=E.dot(d[T])<0?-1:1;l[T*4]=w.x,l[T*4+1]=w.y,l[T*4+2]=w.z,l[T*4+3]=L}for(let T=0,P=b.length;T<P;++T){const R=b[T],L=R.start,O=R.count;for(let B=L,$=L+O;B<$;B+=3)C(i[B+0]),C(i[B+1]),C(i[B+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Wn(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new de,s=new de,o=new de,a=new de,l=new de,c=new de,d=new de,u=new de;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(n,p),s.fromBufferAttribute(n,m),o.fromBufferAttribute(n,g),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(d),l.add(d),c.add(d),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=n.count;h<f;h+=3)r.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)$r.fromBufferAttribute(e,n),$r.normalize(),e.setXYZ(n,$r.x,$r.y,$r.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){a.isInterleavedBufferAttribute?f=l[m]*a.data.stride+a.offset:f=l[m]*d;for(let v=0;v<d;v++)h[p++]=c[f++]}return new Wn(h,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new cn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,u=c.length;d<u;d++){const h=c[d],f=e(h,i);l.push(f)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++){const f=c[u];d.push(f.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(n))}const s=e.morphAttributes;for(const c in s){const d=[],u=s[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(n));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const x8=new Yt,tv=new Q_,jO=new Jf,mh=new de,gh=new de,vh=new de,GO=new de,WO=new de,qO=new de,hM=new de,fM=new de,pM=new de,mM=new Ye,gM=new Ye,vM=new Ye,$O=new de,yM=new de;class Lr extends Mn{constructor(e=new cn,n=new la){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),jO.copy(i.boundingSphere),jO.applyMatrix4(s),e.ray.intersectsSphere(jO)===!1)||(x8.copy(s).invert(),tv.copy(e.ray).applyMatrix4(x8),i.boundingBox!==null&&tv.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,d=i.morphTargetsRelative,u=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(a!==null)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const v=f[m],y=r[v.materialIndex],x=Math.max(v.start,p.start),b=Math.min(a.count,Math.min(v.start+v.count,p.start+p.count));for(let w=x,E=b;w<E;w+=3){const A=a.getX(w),S=a.getX(w+1),C=a.getX(w+2);o=xM(this,y,e,tv,l,c,d,u,h,A,S,C),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);for(let v=m,y=g;v<y;v+=3){const x=a.getX(v),b=a.getX(v+1),w=a.getX(v+2);o=xM(this,r,e,tv,l,c,d,u,h,x,b,w),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const v=f[m],y=r[v.materialIndex],x=Math.max(v.start,p.start),b=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let w=x,E=b;w<E;w+=3){const A=w,S=w+1,C=w+2;o=xM(this,y,e,tv,l,c,d,u,h,A,S,C),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);for(let v=m,y=g;v<y;v+=3){const x=v,b=v+1,w=v+2;o=xM(this,r,e,tv,l,c,d,u,h,x,b,w),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}}}function Y1e(t,e,n,i,r,s,o,a){let l;if(e.side===Bs?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side!==ql,a),l===null)return null;yM.copy(a),yM.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(yM);return c<n.near||c>n.far?null:{distance:c,point:yM.clone(),object:t}}function xM(t,e,n,i,r,s,o,a,l,c,d,u){mh.fromBufferAttribute(r,c),gh.fromBufferAttribute(r,d),vh.fromBufferAttribute(r,u);const h=t.morphTargetInfluences;if(s&&h){hM.set(0,0,0),fM.set(0,0,0),pM.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=h[p],v=s[p];g!==0&&(GO.fromBufferAttribute(v,c),WO.fromBufferAttribute(v,d),qO.fromBufferAttribute(v,u),o?(hM.addScaledVector(GO,g),fM.addScaledVector(WO,g),pM.addScaledVector(qO,g)):(hM.addScaledVector(GO.sub(mh),g),fM.addScaledVector(WO.sub(gh),g),pM.addScaledVector(qO.sub(vh),g)))}mh.add(hM),gh.add(fM),vh.add(pM)}t.isSkinnedMesh&&(t.boneTransform(c,mh),t.boneTransform(d,gh),t.boneTransform(u,vh));const f=Y1e(t,e,n,i,mh,gh,vh,$O);if(f){a&&(mM.fromBufferAttribute(a,c),gM.fromBufferAttribute(a,d),vM.fromBufferAttribute(a,u),f.uv=nl.getUV($O,mh,gh,vh,mM,gM,vM,new Ye)),l&&(mM.fromBufferAttribute(l,c),gM.fromBufferAttribute(l,d),vM.fromBufferAttribute(l,u),f.uv2=nl.getUV($O,mh,gh,vh,mM,gM,vM,new Ye));const p={a:c,b:d,c:u,normal:new de,materialIndex:0};nl.getNormal(mh,gh,vh,p.normal),f.face=p}return f}class ep extends cn{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],u=[];let h=0,f=0;p("z","y","x",-1,-1,i,n,e,o,s,0),p("z","y","x",1,-1,i,n,-e,o,s,1),p("x","z","y",1,1,e,i,n,r,o,2),p("x","z","y",1,-1,e,i,-n,r,o,3),p("x","y","z",1,-1,e,n,i,r,s,4),p("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Et(c,3)),this.setAttribute("normal",new Et(d,3)),this.setAttribute("uv",new Et(u,2));function p(m,g,v,y,x,b,w,E,A,S,C){const T=b/A,P=w/S,R=b/2,L=w/2,O=E/2,B=A+1,$=S+1;let X=0,H=0;const U=new de;for(let N=0;N<$;N++){const k=N*P-L;for(let z=0;z<B;z++){const W=z*T-R;U[m]=W*y,U[g]=k*x,U[v]=O,c.push(U.x,U.y,U.z),U[m]=0,U[g]=0,U[v]=E>0?1:-1,d.push(U.x,U.y,U.z),u.push(z/A),u.push(1-N/S),X+=1}}for(let N=0;N<S;N++)for(let k=0;k<A;k++){const z=h+k+B*N,W=h+k+B*(N+1),K=h+(k+1)+B*(N+1),J=h+(k+1)+B*N;l.push(z,W,J),l.push(W,K,J),H+=6}a.addGroup(f,H,C),f+=H,h+=X}}static fromJSON(e){return new ep(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ey(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Ks(t){const e={};for(let n=0;n<t.length;n++){const i=Ey(t[n]);for(const r in i)e[r]=i[r]}return e}function K1e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}const Hre={clone:Ey,merge:Ks};var Z1e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Q1e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class rc extends xr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Z1e,this.fragmentShader=Q1e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ey(e.uniforms),this.uniformsGroups=K1e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class J_ extends Mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yt,this.projectionMatrix=new Yt,this.projectionMatrixInverse=new Yt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class vi extends J_{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Jw*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Pm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Jw*2*Math.atan(Math.tan(Pm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Pm*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const nv=90,iv=1;class jre extends Mn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new vi(nv,iv,e,n);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new de(1,0,0)),this.add(r);const s=new vi(nv,iv,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new de(-1,0,0)),this.add(s);const o=new vi(nv,iv,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new de(0,1,0)),this.add(o);const a=new vi(nv,iv,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new de(0,-1,0)),this.add(a);const l=new vi(nv,iv,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new de(0,0,1)),this.add(l);const c=new vi(nv,iv,e,n);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new de(0,0,-1)),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,d=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=tc,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(n,c),e.setRenderTarget(d),e.toneMapping=u,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class eS extends Yi{constructor(e,n,i,r,s,o,a,l,c,d){e=e!==void 0?e:[],n=n!==void 0?n:Od,super(e,n,i,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class t5 extends ml{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new eS(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:gi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ep(5,5,5),s=new rc({name:"CubemapFromEquirect",uniforms:Ey(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Bs,blending:yd});s.uniforms.tEquirect.value=n;const o=new Lr(r,s),a=n.minFilter;return n.minFilter===Gd&&(n.minFilter=gi),new jre(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const XO=new de,J1e=new de,ebe=new Co;class Fh{constructor(e=new de(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=XO.subVectors(i,n).cross(J1e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const i=e.delta(XO),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||ebe.getNormalMatrix(e),r=this.coplanarPoint(XO).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const rv=new Jf,bM=new de;class sD{constructor(e=new Fh,n=new Fh,i=new Fh,r=new Fh,s=new Fh,o=new Fh){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],d=i[6],u=i[7],h=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15];return n[0].setComponents(a-r,u-l,m-h,x-g).normalize(),n[1].setComponents(a+r,u+l,m+h,x+g).normalize(),n[2].setComponents(a+s,u+c,m+f,x+v).normalize(),n[3].setComponents(a-s,u-c,m-f,x-v).normalize(),n[4].setComponents(a-o,u-d,m-p,x-y).normalize(),n[5].setComponents(a+o,u+d,m+p,x+y).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),rv.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(rv)}intersectsSprite(e){return rv.center.set(0,0,0),rv.radius=.7071067811865476,rv.applyMatrix4(e.matrixWorld),this.intersectsSphere(rv)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(bM.x=r.normal.x>0?e.max.x:e.min.x,bM.y=r.normal.y>0?e.max.y:e.min.y,bM.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(bM)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Gre(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function tbe(t,e){const n=e.isWebGL2,i=new WeakMap;function r(c,d){const u=c.array,h=c.usage,f=t.createBuffer();t.bindBuffer(d,f),t.bufferData(d,u,h),c.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,d,u){const h=d.array,f=d.updateRange;t.bindBuffer(u,c),f.count===-1?t.bufferSubData(u,0,h):(n?t.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):t.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d&&(t.deleteBuffer(d.buffer),i.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u===void 0?i.set(c,r(c,d)):u.version<c.version&&(s(u.buffer,c,d),u.version=c.version)}return{get:o,remove:a,update:l}}class sx extends cn{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,u=e/a,h=n/l,f=[],p=[],m=[],g=[];for(let v=0;v<d;v++){const y=v*h-o;for(let x=0;x<c;x++){const b=x*u-s;p.push(b,-y,0),m.push(0,0,1),g.push(x/a),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let y=0;y<a;y++){const x=y+c*v,b=y+c*(v+1),w=y+1+c*(v+1),E=y+1+c*v;f.push(x,b,E),f.push(b,w,E)}this.setIndex(f),this.setAttribute("position",new Et(p,3)),this.setAttribute("normal",new Et(m,3)),this.setAttribute("uv",new Et(g,2))}static fromJSON(e){return new sx(e.width,e.height,e.widthSegments,e.heightSegments)}}var nbe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,ibe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rbe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,sbe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,obe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,abe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,lbe="vec3 transformed = vec3( position );",cbe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ube=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,dbe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hbe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fbe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,pbe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,mbe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,gbe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,vbe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ybe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xbe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,bbe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,wbe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,_be=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Sbe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Ebe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Mbe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Abe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tbe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Cbe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Pbe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Dbe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Rbe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Obe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Lbe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ibe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,kbe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Nbe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Bbe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,zbe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Fbe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Ube=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Vbe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Hbe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,jbe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,Gbe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Wbe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,qbe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,$be=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Xbe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ybe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Kbe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Zbe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Qbe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Jbe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ewe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,twe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,nwe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,iwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,rwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,swe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,owe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,awe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lwe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cwe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,uwe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,dwe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hwe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,fwe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,pwe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,mwe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,gwe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,vwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ywe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xwe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,bwe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,wwe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,_we=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Swe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Ewe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Mwe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Awe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Twe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Cwe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Pwe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Dwe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Rwe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Owe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Lwe=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Iwe=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,kwe=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Nwe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Bwe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zwe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Fwe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Uwe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Vwe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Hwe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,jwe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Gwe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Wwe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,qwe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,$we=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Xwe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Ywe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Kwe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Zwe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Qwe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Jwe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const e_e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,t_e=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,n_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,i_e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,r_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,s_e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,o_e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,a_e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,l_e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,c_e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,u_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,d_e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,h_e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,f_e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p_e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,m_e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g_e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,v_e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y_e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,x_e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b_e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,w_e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,__e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S_e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E_e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,M_e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A_e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T_e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,C_e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,P_e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,D_e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,R_e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,O_e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,L_e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,hn={alphamap_fragment:nbe,alphamap_pars_fragment:ibe,alphatest_fragment:rbe,alphatest_pars_fragment:sbe,aomap_fragment:obe,aomap_pars_fragment:abe,begin_vertex:lbe,beginnormal_vertex:cbe,bsdfs:ube,iridescence_fragment:dbe,bumpmap_pars_fragment:hbe,clipping_planes_fragment:fbe,clipping_planes_pars_fragment:pbe,clipping_planes_pars_vertex:mbe,clipping_planes_vertex:gbe,color_fragment:vbe,color_pars_fragment:ybe,color_pars_vertex:xbe,color_vertex:bbe,common:wbe,cube_uv_reflection_fragment:_be,defaultnormal_vertex:Sbe,displacementmap_pars_vertex:Ebe,displacementmap_vertex:Mbe,emissivemap_fragment:Abe,emissivemap_pars_fragment:Tbe,encodings_fragment:Cbe,encodings_pars_fragment:Pbe,envmap_fragment:Dbe,envmap_common_pars_fragment:Rbe,envmap_pars_fragment:Obe,envmap_pars_vertex:Lbe,envmap_physical_pars_fragment:Wbe,envmap_vertex:Ibe,fog_vertex:kbe,fog_pars_vertex:Nbe,fog_fragment:Bbe,fog_pars_fragment:zbe,gradientmap_pars_fragment:Fbe,lightmap_fragment:Ube,lightmap_pars_fragment:Vbe,lights_lambert_fragment:Hbe,lights_lambert_pars_fragment:jbe,lights_pars_begin:Gbe,lights_toon_fragment:qbe,lights_toon_pars_fragment:$be,lights_phong_fragment:Xbe,lights_phong_pars_fragment:Ybe,lights_physical_fragment:Kbe,lights_physical_pars_fragment:Zbe,lights_fragment_begin:Qbe,lights_fragment_maps:Jbe,lights_fragment_end:ewe,logdepthbuf_fragment:twe,logdepthbuf_pars_fragment:nwe,logdepthbuf_pars_vertex:iwe,logdepthbuf_vertex:rwe,map_fragment:swe,map_pars_fragment:owe,map_particle_fragment:awe,map_particle_pars_fragment:lwe,metalnessmap_fragment:cwe,metalnessmap_pars_fragment:uwe,morphcolor_vertex:dwe,morphnormal_vertex:hwe,morphtarget_pars_vertex:fwe,morphtarget_vertex:pwe,normal_fragment_begin:mwe,normal_fragment_maps:gwe,normal_pars_fragment:vwe,normal_pars_vertex:ywe,normal_vertex:xwe,normalmap_pars_fragment:bwe,clearcoat_normal_fragment_begin:wwe,clearcoat_normal_fragment_maps:_we,clearcoat_pars_fragment:Swe,iridescence_pars_fragment:Ewe,output_fragment:Mwe,packing:Awe,premultiplied_alpha_fragment:Twe,project_vertex:Cwe,dithering_fragment:Pwe,dithering_pars_fragment:Dwe,roughnessmap_fragment:Rwe,roughnessmap_pars_fragment:Owe,shadowmap_pars_fragment:Lwe,shadowmap_pars_vertex:Iwe,shadowmap_vertex:kwe,shadowmask_pars_fragment:Nwe,skinbase_vertex:Bwe,skinning_pars_vertex:zwe,skinning_vertex:Fwe,skinnormal_vertex:Uwe,specularmap_fragment:Vwe,specularmap_pars_fragment:Hwe,tonemapping_fragment:jwe,tonemapping_pars_fragment:Gwe,transmission_fragment:Wwe,transmission_pars_fragment:qwe,uv_pars_fragment:$we,uv_pars_vertex:Xwe,uv_vertex:Ywe,uv2_pars_fragment:Kwe,uv2_pars_vertex:Zwe,uv2_vertex:Qwe,worldpos_vertex:Jwe,background_vert:e_e,background_frag:t_e,backgroundCube_vert:n_e,backgroundCube_frag:i_e,cube_vert:r_e,cube_frag:s_e,depth_vert:o_e,depth_frag:a_e,distanceRGBA_vert:l_e,distanceRGBA_frag:c_e,equirect_vert:u_e,equirect_frag:d_e,linedashed_vert:h_e,linedashed_frag:f_e,meshbasic_vert:p_e,meshbasic_frag:m_e,meshlambert_vert:g_e,meshlambert_frag:v_e,meshmatcap_vert:y_e,meshmatcap_frag:x_e,meshnormal_vert:b_e,meshnormal_frag:w_e,meshphong_vert:__e,meshphong_frag:S_e,meshphysical_vert:E_e,meshphysical_frag:M_e,meshtoon_vert:A_e,meshtoon_frag:T_e,points_vert:C_e,points_frag:P_e,shadow_vert:D_e,shadow_frag:R_e,sprite_vert:O_e,sprite_frag:L_e},ut={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Co},uv2Transform:{value:new Co},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Co}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Co}}},jl={basic:{uniforms:Ks([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:hn.meshbasic_vert,fragmentShader:hn.meshbasic_frag},lambert:{uniforms:Ks([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new at(0)}}]),vertexShader:hn.meshlambert_vert,fragmentShader:hn.meshlambert_frag},phong:{uniforms:Ks([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:hn.meshphong_vert,fragmentShader:hn.meshphong_frag},standard:{uniforms:Ks([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag},toon:{uniforms:Ks([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new at(0)}}]),vertexShader:hn.meshtoon_vert,fragmentShader:hn.meshtoon_frag},matcap:{uniforms:Ks([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:hn.meshmatcap_vert,fragmentShader:hn.meshmatcap_frag},points:{uniforms:Ks([ut.points,ut.fog]),vertexShader:hn.points_vert,fragmentShader:hn.points_frag},dashed:{uniforms:Ks([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hn.linedashed_vert,fragmentShader:hn.linedashed_frag},depth:{uniforms:Ks([ut.common,ut.displacementmap]),vertexShader:hn.depth_vert,fragmentShader:hn.depth_frag},normal:{uniforms:Ks([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:hn.meshnormal_vert,fragmentShader:hn.meshnormal_frag},sprite:{uniforms:Ks([ut.sprite,ut.fog]),vertexShader:hn.sprite_vert,fragmentShader:hn.sprite_frag},background:{uniforms:{uvTransform:{value:new Co},t2D:{value:null}},vertexShader:hn.background_vert,fragmentShader:hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:hn.backgroundCube_vert,fragmentShader:hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hn.cube_vert,fragmentShader:hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hn.equirect_vert,fragmentShader:hn.equirect_frag},distanceRGBA:{uniforms:Ks([ut.common,ut.displacementmap,{referencePosition:{value:new de},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hn.distanceRGBA_vert,fragmentShader:hn.distanceRGBA_frag},shadow:{uniforms:Ks([ut.lights,ut.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:hn.shadow_vert,fragmentShader:hn.shadow_frag}};jl.physical={uniforms:Ks([jl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag};function I_e(t,e,n,i,r,s,o){const a=new at(0);let l=s===!0?0:1,c,d,u=null,h=0,f=null;function p(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?n:e).get(x));const b=t.xr,w=b.getSession&&b.getSession();w&&w.environmentBlendMode==="additive"&&(x=null),x===null?m(a,l):x&&x.isColor&&(m(x,1),y=!0),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===rx)?(d===void 0&&(d=new Lr(new ep(1,1,1),new rc({name:"BackgroundCubeMaterial",uniforms:Ey(jl.backgroundCube.uniforms),vertexShader:jl.backgroundCube.vertexShader,fragmentShader:jl.backgroundCube.fragmentShader,side:Bs,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(E,A,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=x,d.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,(u!==x||h!==x.version||f!==t.toneMapping)&&(d.material.needsUpdate=!0,u=x,h=x.version,f=t.toneMapping),d.layers.enableAll(),g.unshift(d,d.geometry,d.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Lr(new sx(2,2),new rc({name:"BackgroundMaterial",uniforms:Ey(jl.background.uniforms),vertexShader:jl.background.vertexShader,fragmentShader:jl.background.fragmentShader,side:Nf,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||h!==x.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=x,h=x.version,f=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function m(g,v){i.buffers.color.setClear(g.r,g.g,g.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(a,l)},render:p}}function k_e(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=g(null);let c=l,d=!1;function u(O,B,$,X,H){let U=!1;if(o){const N=m(X,$,B);c!==N&&(c=N,f(c.object)),U=v(O,X,$,H),U&&y(O,X,$,H)}else{const N=B.wireframe===!0;(c.geometry!==X.id||c.program!==$.id||c.wireframe!==N)&&(c.geometry=X.id,c.program=$.id,c.wireframe=N,U=!0)}H!==null&&n.update(H,34963),(U||d)&&(d=!1,S(O,B,$,X),H!==null&&t.bindBuffer(34963,n.get(H).buffer))}function h(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function f(O){return i.isWebGL2?t.bindVertexArray(O):s.bindVertexArrayOES(O)}function p(O){return i.isWebGL2?t.deleteVertexArray(O):s.deleteVertexArrayOES(O)}function m(O,B,$){const X=$.wireframe===!0;let H=a[O.id];H===void 0&&(H={},a[O.id]=H);let U=H[B.id];U===void 0&&(U={},H[B.id]=U);let N=U[X];return N===void 0&&(N=g(h()),U[X]=N),N}function g(O){const B=[],$=[],X=[];for(let H=0;H<r;H++)B[H]=0,$[H]=0,X[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:$,attributeDivisors:X,object:O,attributes:{},index:null}}function v(O,B,$,X){const H=c.attributes,U=B.attributes;let N=0;const k=$.getAttributes();for(const z in k)if(k[z].location>=0){const K=H[z];let J=U[z];if(J===void 0&&(z==="instanceMatrix"&&O.instanceMatrix&&(J=O.instanceMatrix),z==="instanceColor"&&O.instanceColor&&(J=O.instanceColor)),K===void 0||K.attribute!==J||J&&K.data!==J.data)return!0;N++}return c.attributesNum!==N||c.index!==X}function y(O,B,$,X){const H={},U=B.attributes;let N=0;const k=$.getAttributes();for(const z in k)if(k[z].location>=0){let K=U[z];K===void 0&&(z==="instanceMatrix"&&O.instanceMatrix&&(K=O.instanceMatrix),z==="instanceColor"&&O.instanceColor&&(K=O.instanceColor));const J={};J.attribute=K,K&&K.data&&(J.data=K.data),H[z]=J,N++}c.attributes=H,c.attributesNum=N,c.index=X}function x(){const O=c.newAttributes;for(let B=0,$=O.length;B<$;B++)O[B]=0}function b(O){w(O,0)}function w(O,B){const $=c.newAttributes,X=c.enabledAttributes,H=c.attributeDivisors;$[O]=1,X[O]===0&&(t.enableVertexAttribArray(O),X[O]=1),H[O]!==B&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,B),H[O]=B)}function E(){const O=c.newAttributes,B=c.enabledAttributes;for(let $=0,X=B.length;$<X;$++)B[$]!==O[$]&&(t.disableVertexAttribArray($),B[$]=0)}function A(O,B,$,X,H,U){i.isWebGL2===!0&&($===5124||$===5125)?t.vertexAttribIPointer(O,B,$,H,U):t.vertexAttribPointer(O,B,$,X,H,U)}function S(O,B,$,X){if(i.isWebGL2===!1&&(O.isInstancedMesh||X.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const H=X.attributes,U=$.getAttributes(),N=B.defaultAttributeValues;for(const k in U){const z=U[k];if(z.location>=0){let W=H[k];if(W===void 0&&(k==="instanceMatrix"&&O.instanceMatrix&&(W=O.instanceMatrix),k==="instanceColor"&&O.instanceColor&&(W=O.instanceColor)),W!==void 0){const K=W.normalized,J=W.itemSize,F=n.get(W);if(F===void 0)continue;const ee=F.buffer,ie=F.type,te=F.bytesPerElement;if(W.isInterleavedBufferAttribute){const re=W.data,me=re.stride,se=W.offset;if(re.isInstancedInterleavedBuffer){for(let oe=0;oe<z.locationSize;oe++)w(z.location+oe,re.meshPerAttribute);O.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let oe=0;oe<z.locationSize;oe++)b(z.location+oe);t.bindBuffer(34962,ee);for(let oe=0;oe<z.locationSize;oe++)A(z.location+oe,J/z.locationSize,ie,K,me*te,(se+J/z.locationSize*oe)*te)}else{if(W.isInstancedBufferAttribute){for(let re=0;re<z.locationSize;re++)w(z.location+re,W.meshPerAttribute);O.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let re=0;re<z.locationSize;re++)b(z.location+re);t.bindBuffer(34962,ee);for(let re=0;re<z.locationSize;re++)A(z.location+re,J/z.locationSize,ie,K,J*te,J/z.locationSize*re*te)}}else if(N!==void 0){const K=N[k];if(K!==void 0)switch(K.length){case 2:t.vertexAttrib2fv(z.location,K);break;case 3:t.vertexAttrib3fv(z.location,K);break;case 4:t.vertexAttrib4fv(z.location,K);break;default:t.vertexAttrib1fv(z.location,K)}}}}E()}function C(){R();for(const O in a){const B=a[O];for(const $ in B){const X=B[$];for(const H in X)p(X[H].object),delete X[H];delete B[$]}delete a[O]}}function T(O){if(a[O.id]===void 0)return;const B=a[O.id];for(const $ in B){const X=B[$];for(const H in X)p(X[H].object),delete X[H];delete B[$]}delete a[O.id]}function P(O){for(const B in a){const $=a[B];if($[O.id]===void 0)continue;const X=$[O.id];for(const H in X)p(X[H].object),delete X[H];delete $[O.id]}}function R(){L(),d=!0,c!==l&&(c=l,f(c.object))}function L(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:R,resetDefaultState:L,dispose:C,releaseStatesOfGeometry:T,releaseStatesOfProgram:P,initAttributes:x,enableAttribute:b,disableUnusedAttributes:E}}function N_e(t,e,n,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,d){t.drawArrays(s,c,d),n.update(d,s,1)}function l(c,d,u){if(u===0)return;let h,f;if(r)h=t,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](s,c,d,u),n.update(d,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function B_e(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(A){if(A==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),h=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),x=h>0,b=o||e.has("OES_texture_float"),w=x&&b,E=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:w,maxSamples:E}}function z_e(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Fh,a=new Co,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h,f){const p=u.length!==0||h||i!==0||r;return r=h,n=d(u,f,0),i=u.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,h,f){const p=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,v=t.get(u);if(!r||p===null||p.length===0||s&&!g)s?d(null):c();else{const y=s?0:i,x=y*4;let b=v.clippingState||null;l.value=b,b=d(p,h,x,f);for(let w=0;w!==x;++w)b[w]=n[w];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(u,h,f,p){const m=u!==null?u.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const v=f+m*4,y=h.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,b=f;x!==m;++x,b+=4)o.copy(u[x]).applyMatrix4(y,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function F_e(t){let e=new WeakMap;function n(o,a){return a===wy?o.mapping=Od:a===Xw&&(o.mapping=Bf),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===wy||a===Xw)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new t5(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class xd extends J_{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const b0=4,b8=[.125,.215,.35,.446,.526,.582],nm=20,YO=new xd,w8=new at;let KO=null;const Hp=(1+Math.sqrt(5))/2,sv=1/Hp,_8=[new de(1,1,1),new de(-1,1,1),new de(1,1,-1),new de(-1,1,-1),new de(0,Hp,sv),new de(0,Hp,-sv),new de(sv,0,Hp),new de(-sv,0,Hp),new de(Hp,sv,0),new de(-Hp,sv,0)];class GB{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){KO=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=M8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=E8(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(KO),e.scissorTest=!1,wM(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Od||e.mapping===Bf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),KO=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:gi,minFilter:gi,generateMipmaps:!1,type:$l,format:So,encoding:hu,depthBuffer:!1},r=S8(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=S8(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=U_e(s)),this._blurMaterial=V_e(s,e,n)}return r}_compileMaterial(e){const n=new Lr(this._lodPlanes[0],e);this._renderer.compile(n,YO)}_sceneToCubeUV(e,n,i,r){const a=new vi(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(w8),d.toneMapping=tc,d.autoClear=!1;const f=new la({name:"PMREM.Background",side:Bs,depthWrite:!1,depthTest:!1}),p=new Lr(new ep,f);let m=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,m=!0):(f.color.copy(w8),m=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):y===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const x=this._cubeSize;wM(r,y*x,v>2?x:0,x,x),d.setRenderTarget(r),m&&d.render(p,a),d.render(e,a)}p.geometry.dispose(),p.material.dispose(),d.toneMapping=h,d.autoClear=u,e.background=g}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===Od||e.mapping===Bf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=M8()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=E8());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Lr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;wM(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,YO)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=_8[(r-1)%_8.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,u=new Lr(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*nm-1),m=s/p,g=isFinite(s)?1+Math.floor(d*m):nm;g>nm&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${nm}`);const v=[];let y=0;for(let A=0;A<nm;++A){const S=A/m,C=Math.exp(-S*S/2);v.push(C),A===0?y+=C:A<g&&(y+=2*C)}for(let A=0;A<v.length;A++)v[A]=v[A]/y;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:x}=this;h.dTheta.value=p,h.mipInt.value=x-i;const b=this._sizeLods[r],w=3*b*(r>x-b0?r-x+b0:0),E=4*(this._cubeSize-b);wM(n,w,E,3*b,2*b),l.setRenderTarget(n),l.render(u,YO)}}function U_e(t){const e=[],n=[],i=[];let r=t;const s=t-b0+1+b8.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-b0?l=b8[o-t+b0-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=new Float32Array(v*p*f);for(let E=0;E<f;E++){const A=E%3*2/3-1,S=E>2?0:-1,C=[A,S,0,A+2/3,S,0,A+2/3,S+1,0,A,S,0,A+2/3,S+1,0,A,S+1,0];y.set(C,m*p*E),x.set(h,g*p*E);const T=[E,E,E,E,E,E];b.set(T,v*p*E)}const w=new cn;w.setAttribute("position",new Wn(y,m)),w.setAttribute("uv",new Wn(x,g)),w.setAttribute("faceIndex",new Wn(b,v)),e.push(w),r>b0&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function S8(t,e,n){const i=new ml(t,e,n);return i.texture.mapping=rx,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function wM(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function V_e(t,e,n){const i=new Float32Array(nm),r=new de(0,1,0);return new rc({name:"SphericalGaussianBlur",defines:{n:nm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:n5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:yd,depthTest:!1,depthWrite:!1})}function E8(){return new rc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:n5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:yd,depthTest:!1,depthWrite:!1})}function M8(){return new rc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:n5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:yd,depthTest:!1,depthWrite:!1})}function n5(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function H_e(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===wy||l===Xw,d=l===Od||l===Bf;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return n===null&&(n=new GB(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||d&&u&&r(u)){n===null&&(n=new GB(t));const h=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function j_e(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function G_e(t,e,n,i){const r={},s=new WeakMap;function o(u){const h=u.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,n.memory.geometries++),h}function l(u){const h=u.attributes;for(const p in h)e.update(h[p],34962);const f=u.morphAttributes;for(const p in f){const m=f[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}}function c(u){const h=[],f=u.index,p=u.attributes.position;let m=0;if(f!==null){const y=f.array;m=f.version;for(let x=0,b=y.length;x<b;x+=3){const w=y[x+0],E=y[x+1],A=y[x+2];h.push(w,E,E,A,A,w)}}else{const y=p.array;m=p.version;for(let x=0,b=y.length/3-1;x<b;x+=3){const w=x+0,E=x+1,A=x+2;h.push(w,E,E,A,A,w)}}const g=new(Ure(h)?e5:JU)(h,1);g.version=m;const v=s.get(u);v&&e.remove(v),s.set(u,g)}function d(u){const h=s.get(u);if(h){const f=u.index;f!==null&&h.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function W_e(t,e,n,i){const r=i.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function d(h,f){t.drawElements(s,f,a,h*l),n.update(f,s,1)}function u(h,f,p){if(p===0)return;let m,g;if(r)m=t,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,f,a,h*l,p),n.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=u}function q_e(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function $_e(t,e){return t[0]-e[0]}function X_e(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Y_e(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new An,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,u,h){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,g=m!==void 0?m.length:0;let v=s.get(d);if(v===void 0||v.count!==g){let $=function(){O.dispose(),s.delete(d),d.removeEventListener("dispose",$)};var p=$;v!==void 0&&v.texture.dispose();const b=d.morphAttributes.position!==void 0,w=d.morphAttributes.normal!==void 0,E=d.morphAttributes.color!==void 0,A=d.morphAttributes.position||[],S=d.morphAttributes.normal||[],C=d.morphAttributes.color||[];let T=0;b===!0&&(T=1),w===!0&&(T=2),E===!0&&(T=3);let P=d.attributes.position.count*T,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const L=new Float32Array(P*R*4*g),O=new Z_(L,P,R,g);O.type=rl,O.needsUpdate=!0;const B=T*4;for(let X=0;X<g;X++){const H=A[X],U=S[X],N=C[X],k=P*R*4*X;for(let z=0;z<H.count;z++){const W=z*B;b===!0&&(o.fromBufferAttribute(H,z),L[k+W+0]=o.x,L[k+W+1]=o.y,L[k+W+2]=o.z,L[k+W+3]=0),w===!0&&(o.fromBufferAttribute(U,z),L[k+W+4]=o.x,L[k+W+5]=o.y,L[k+W+6]=o.z,L[k+W+7]=0),E===!0&&(o.fromBufferAttribute(N,z),L[k+W+8]=o.x,L[k+W+9]=o.y,L[k+W+10]=o.z,L[k+W+11]=N.itemSize===4?o.w:1)}}v={count:g,texture:O,size:new Ye(P,R)},s.set(d,v),d.addEventListener("dispose",$)}let y=0;for(let b=0;b<f.length;b++)y+=f[b];const x=d.morphTargetsRelative?1:1-y;h.getUniforms().setValue(t,"morphTargetBaseInfluence",x),h.getUniforms().setValue(t,"morphTargetInfluences",f),h.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}else{const m=f===void 0?0:f.length;let g=i[d.id];if(g===void 0||g.length!==m){g=[];for(let w=0;w<m;w++)g[w]=[w,0];i[d.id]=g}for(let w=0;w<m;w++){const E=g[w];E[0]=w,E[1]=f[w]}g.sort(X_e);for(let w=0;w<8;w++)w<m&&g[w][1]?(a[w][0]=g[w][0],a[w][1]=g[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort($_e);const v=d.morphAttributes.position,y=d.morphAttributes.normal;let x=0;for(let w=0;w<8;w++){const E=a[w],A=E[0],S=E[1];A!==Number.MAX_SAFE_INTEGER&&S?(v&&d.getAttribute("morphTarget"+w)!==v[A]&&d.setAttribute("morphTarget"+w,v[A]),y&&d.getAttribute("morphNormal"+w)!==y[A]&&d.setAttribute("morphNormal"+w,y[A]),r[w]=S,x+=S):(v&&d.hasAttribute("morphTarget"+w)===!0&&d.deleteAttribute("morphTarget"+w),y&&d.hasAttribute("morphNormal"+w)===!0&&d.deleteAttribute("morphNormal"+w),r[w]=0)}const b=d.morphTargetsRelative?1:1-x;h.getUniforms().setValue(t,"morphTargetBaseInfluence",b),h.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function K_e(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,d=l.geometry,u=e.get(l,d);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),u}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const Wre=new Yi,qre=new Z_,$re=new rD,Xre=new eS,A8=[],T8=[],C8=new Float32Array(16),P8=new Float32Array(9),D8=new Float32Array(4);function ox(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=A8[r];if(s===void 0&&(s=new Float32Array(r),A8[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Nr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Br(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function oD(t,e){let n=T8[e];n===void 0&&(n=new Int32Array(e),T8[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Z_e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Q_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nr(n,e))return;t.uniform2fv(this.addr,e),Br(n,e)}}function J_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Nr(n,e))return;t.uniform3fv(this.addr,e),Br(n,e)}}function eSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nr(n,e))return;t.uniform4fv(this.addr,e),Br(n,e)}}function tSe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Nr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Br(n,e)}else{if(Nr(n,i))return;D8.set(i),t.uniformMatrix2fv(this.addr,!1,D8),Br(n,i)}}function nSe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Nr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Br(n,e)}else{if(Nr(n,i))return;P8.set(i),t.uniformMatrix3fv(this.addr,!1,P8),Br(n,i)}}function iSe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Nr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Br(n,e)}else{if(Nr(n,i))return;C8.set(i),t.uniformMatrix4fv(this.addr,!1,C8),Br(n,i)}}function rSe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function sSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nr(n,e))return;t.uniform2iv(this.addr,e),Br(n,e)}}function oSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Nr(n,e))return;t.uniform3iv(this.addr,e),Br(n,e)}}function aSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nr(n,e))return;t.uniform4iv(this.addr,e),Br(n,e)}}function lSe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function cSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nr(n,e))return;t.uniform2uiv(this.addr,e),Br(n,e)}}function uSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Nr(n,e))return;t.uniform3uiv(this.addr,e),Br(n,e)}}function dSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nr(n,e))return;t.uniform4uiv(this.addr,e),Br(n,e)}}function hSe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Wre,r)}function fSe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||$re,r)}function pSe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||Xre,r)}function mSe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||qre,r)}function gSe(t){switch(t){case 5126:return Z_e;case 35664:return Q_e;case 35665:return J_e;case 35666:return eSe;case 35674:return tSe;case 35675:return nSe;case 35676:return iSe;case 5124:case 35670:return rSe;case 35667:case 35671:return sSe;case 35668:case 35672:return oSe;case 35669:case 35673:return aSe;case 5125:return lSe;case 36294:return cSe;case 36295:return uSe;case 36296:return dSe;case 35678:case 36198:case 36298:case 36306:case 35682:return hSe;case 35679:case 36299:case 36307:return fSe;case 35680:case 36300:case 36308:case 36293:return pSe;case 36289:case 36303:case 36311:case 36292:return mSe}}function vSe(t,e){t.uniform1fv(this.addr,e)}function ySe(t,e){const n=ox(e,this.size,2);t.uniform2fv(this.addr,n)}function xSe(t,e){const n=ox(e,this.size,3);t.uniform3fv(this.addr,n)}function bSe(t,e){const n=ox(e,this.size,4);t.uniform4fv(this.addr,n)}function wSe(t,e){const n=ox(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function _Se(t,e){const n=ox(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function SSe(t,e){const n=ox(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ESe(t,e){t.uniform1iv(this.addr,e)}function MSe(t,e){t.uniform2iv(this.addr,e)}function ASe(t,e){t.uniform3iv(this.addr,e)}function TSe(t,e){t.uniform4iv(this.addr,e)}function CSe(t,e){t.uniform1uiv(this.addr,e)}function PSe(t,e){t.uniform2uiv(this.addr,e)}function DSe(t,e){t.uniform3uiv(this.addr,e)}function RSe(t,e){t.uniform4uiv(this.addr,e)}function OSe(t,e,n){const i=this.cache,r=e.length,s=oD(n,r);Nr(i,s)||(t.uniform1iv(this.addr,s),Br(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||Wre,s[o])}function LSe(t,e,n){const i=this.cache,r=e.length,s=oD(n,r);Nr(i,s)||(t.uniform1iv(this.addr,s),Br(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||$re,s[o])}function ISe(t,e,n){const i=this.cache,r=e.length,s=oD(n,r);Nr(i,s)||(t.uniform1iv(this.addr,s),Br(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||Xre,s[o])}function kSe(t,e,n){const i=this.cache,r=e.length,s=oD(n,r);Nr(i,s)||(t.uniform1iv(this.addr,s),Br(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||qre,s[o])}function NSe(t){switch(t){case 5126:return vSe;case 35664:return ySe;case 35665:return xSe;case 35666:return bSe;case 35674:return wSe;case 35675:return _Se;case 35676:return SSe;case 5124:case 35670:return ESe;case 35667:case 35671:return MSe;case 35668:case 35672:return ASe;case 35669:case 35673:return TSe;case 5125:return CSe;case 36294:return PSe;case 36295:return DSe;case 36296:return RSe;case 35678:case 36198:case 36298:case 36306:case 35682:return OSe;case 35679:case 36299:case 36307:return LSe;case 35680:case 36300:case 36308:case 36293:return ISe;case 36289:case 36303:case 36311:case 36292:return kSe}}class BSe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=gSe(n.type)}}class zSe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=NSe(n.type)}}class FSe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const ZO=/(\w+)(\])?(\[|\.)?/g;function R8(t,e){t.seq.push(e),t.map[e.id]=e}function USe(t,e,n){const i=t.name,r=i.length;for(ZO.lastIndex=0;;){const s=ZO.exec(i),o=ZO.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){R8(n,c===void 0?new BSe(a,t,e):new zSe(a,t,e));break}else{let u=n.map[a];u===void 0&&(u=new FSe(a),R8(n,u)),n=u}}}class kT{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);USe(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function O8(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let VSe=0;function HSe(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function jSe(t){switch(t){case hu:return["Linear","( value )"];case kn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function L8(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+HSe(t.getShaderSource(e),o)}else return r}function GSe(t,e){const n=jSe(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function WSe(t,e){let n;switch(e){case dre:n="Linear";break;case hre:n="Reinhard";break;case fre:n="OptimizedCineon";break;case $U:n="ACESFilmic";break;case pre:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function qSe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Tb).join(`
`)}function $Se(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function XSe(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Tb(t){return t!==""}function I8(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function k8(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const YSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function WB(t){return t.replace(YSe,KSe)}function KSe(t,e){const n=hn[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return WB(n)}const ZSe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function N8(t){return t.replace(ZSe,QSe)}function QSe(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function B8(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function JSe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===eD?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Kb?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===fm&&(e="SHADOWMAP_TYPE_VSM"),e}function eEe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Od:case Bf:e="ENVMAP_TYPE_CUBE";break;case rx:e="ENVMAP_TYPE_CUBE_UV";break}return e}function tEe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Bf:e="ENVMAP_MODE_REFRACTION";break}return e}function nEe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case K_:e="ENVMAP_BLENDING_MULTIPLY";break;case cre:e="ENVMAP_BLENDING_MIX";break;case ure:e="ENVMAP_BLENDING_ADD";break}return e}function iEe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function rEe(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=JSe(n),c=eEe(n),d=tEe(n),u=nEe(n),h=iEe(n),f=n.isWebGL2?"":qSe(n),p=$Se(s),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=[p].filter(Tb).join(`
`),g.length>0&&(g+=`
`),v=[f,p].filter(Tb).join(`
`),v.length>0&&(v+=`
`)):(g=[B8(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Tb).join(`
`),v=[f,B8(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==tc?"#define TONE_MAPPING":"",n.toneMapping!==tc?hn.tonemapping_pars_fragment:"",n.toneMapping!==tc?WSe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",hn.encodings_pars_fragment,GSe("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Tb).join(`
`)),o=WB(o),o=I8(o,n),o=k8(o,n),a=WB(a),a=I8(a,n),a=k8(a,n),o=N8(o),a=N8(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",n.glslVersion===HB?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===HB?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const x=y+g+o,b=y+v+a,w=O8(r,35633,x),E=O8(r,35632,b);if(r.attachShader(m,w),r.attachShader(m,E),n.index0AttributeName!==void 0?r.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const C=r.getProgramInfoLog(m).trim(),T=r.getShaderInfoLog(w).trim(),P=r.getShaderInfoLog(E).trim();let R=!0,L=!0;if(r.getProgramParameter(m,35714)===!1){R=!1;const O=L8(r,w,"vertex"),B=L8(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+C+`
`+O+`
`+B)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(T===""||P==="")&&(L=!1);L&&(this.diagnostics={runnable:R,programLog:C,vertexShader:{log:T,prefix:g},fragmentShader:{log:P,prefix:v}})}r.deleteShader(w),r.deleteShader(E);let A;this.getUniforms=function(){return A===void 0&&(A=new kT(r,m)),A};let S;return this.getAttributes=function(){return S===void 0&&(S=XSe(r,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=VSe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=E,this}let sEe=0;class oEe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new aEe(e),n.set(e,i)),i}}class aEe{constructor(e){this.id=sEe++,this.code=e,this.usedTimes=0}}function lEe(t,e,n,i,r,s,o){const a=new Rm,l=new oEe,c=[],d=r.isWebGL2,u=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(S,C,T,P,R){const L=P.fog,O=R.geometry,B=S.isMeshStandardMaterial?P.environment:null,$=(S.isMeshStandardMaterial?n:e).get(S.envMap||B),X=$&&$.mapping===rx?$.image.height:null,H=p[S.type];S.precision!==null&&(f=r.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));const U=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,N=U!==void 0?U.length:0;let k=0;O.morphAttributes.position!==void 0&&(k=1),O.morphAttributes.normal!==void 0&&(k=2),O.morphAttributes.color!==void 0&&(k=3);let z,W,K,J;if(H){const me=jl[H];z=me.vertexShader,W=me.fragmentShader}else z=S.vertexShader,W=S.fragmentShader,l.update(S),K=l.getVertexShaderID(S),J=l.getFragmentShaderID(S);const F=t.getRenderTarget(),ee=S.alphaTest>0,ie=S.clearcoat>0,te=S.iridescence>0;return{isWebGL2:d,shaderID:H,shaderName:S.type,vertexShader:z,fragmentShader:W,defines:S.defines,customVertexShaderID:K,customFragmentShaderID:J,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,instancing:R.isInstancedMesh===!0,instancingColor:R.isInstancedMesh===!0&&R.instanceColor!==null,supportsVertexTextures:h,outputEncoding:F===null?t.outputEncoding:F.isXRRenderTarget===!0?F.texture.encoding:hu,map:!!S.map,matcap:!!S.matcap,envMap:!!$,envMapMode:$&&$.mapping,envMapCubeUVHeight:X,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===Nre,tangentSpaceNormalMap:S.normalMapType===Wd,decodeVideoTexture:!!S.map&&S.map.isVideoTexture===!0&&S.map.encoding===kn,clearcoat:ie,clearcoatMap:ie&&!!S.clearcoatMap,clearcoatRoughnessMap:ie&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!S.clearcoatNormalMap,iridescence:te,iridescenceMap:te&&!!S.iridescenceMap,iridescenceThicknessMap:te&&!!S.iridescenceThicknessMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:S.transparent===!1&&S.blending===Tm,alphaMap:!!S.alphaMap,alphaTest:ee,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!O.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.iridescenceMap||S.iridescenceThicknessMap||S.transmission>0||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||S.sheen>0||S.sheenColorMap||S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!L,useFog:S.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:u,skinning:R.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:N,morphTextureStride:k,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:S.toneMapped?t.toneMapping:tc,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===ql,flipSided:S.side===Bs,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function g(S){const C=[];if(S.shaderID?C.push(S.shaderID):(C.push(S.customVertexShaderID),C.push(S.customFragmentShaderID)),S.defines!==void 0)for(const T in S.defines)C.push(T),C.push(S.defines[T]);return S.isRawShaderMaterial===!1&&(v(C,S),y(C,S),C.push(t.outputEncoding)),C.push(S.customProgramCacheKey),C.join()}function v(S,C){S.push(C.precision),S.push(C.outputEncoding),S.push(C.envMapMode),S.push(C.envMapCubeUVHeight),S.push(C.combine),S.push(C.vertexUvs),S.push(C.fogExp2),S.push(C.sizeAttenuation),S.push(C.morphTargetsCount),S.push(C.morphAttributeCount),S.push(C.numDirLights),S.push(C.numPointLights),S.push(C.numSpotLights),S.push(C.numSpotLightMaps),S.push(C.numHemiLights),S.push(C.numRectAreaLights),S.push(C.numDirLightShadows),S.push(C.numPointLightShadows),S.push(C.numSpotLightShadows),S.push(C.numSpotLightShadowsWithMaps),S.push(C.shadowMapType),S.push(C.toneMapping),S.push(C.numClippingPlanes),S.push(C.numClipIntersection),S.push(C.depthPacking)}function y(S,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.map&&a.enable(4),C.matcap&&a.enable(5),C.envMap&&a.enable(6),C.lightMap&&a.enable(7),C.aoMap&&a.enable(8),C.emissiveMap&&a.enable(9),C.bumpMap&&a.enable(10),C.normalMap&&a.enable(11),C.objectSpaceNormalMap&&a.enable(12),C.tangentSpaceNormalMap&&a.enable(13),C.clearcoat&&a.enable(14),C.clearcoatMap&&a.enable(15),C.clearcoatRoughnessMap&&a.enable(16),C.clearcoatNormalMap&&a.enable(17),C.iridescence&&a.enable(18),C.iridescenceMap&&a.enable(19),C.iridescenceThicknessMap&&a.enable(20),C.displacementMap&&a.enable(21),C.specularMap&&a.enable(22),C.roughnessMap&&a.enable(23),C.metalnessMap&&a.enable(24),C.gradientMap&&a.enable(25),C.alphaMap&&a.enable(26),C.alphaTest&&a.enable(27),C.vertexColors&&a.enable(28),C.vertexAlphas&&a.enable(29),C.vertexUvs&&a.enable(30),C.vertexTangents&&a.enable(31),C.uvsVertexOnly&&a.enable(32),S.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.physicallyCorrectLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.specularIntensityMap&&a.enable(15),C.specularColorMap&&a.enable(16),C.transmission&&a.enable(17),C.transmissionMap&&a.enable(18),C.thicknessMap&&a.enable(19),C.sheen&&a.enable(20),C.sheenColorMap&&a.enable(21),C.sheenRoughnessMap&&a.enable(22),C.decodeVideoTexture&&a.enable(23),C.opaque&&a.enable(24),S.push(a.mask)}function x(S){const C=p[S.type];let T;if(C){const P=jl[C];T=Hre.clone(P.uniforms)}else T=S.uniforms;return T}function b(S,C){let T;for(let P=0,R=c.length;P<R;P++){const L=c[P];if(L.cacheKey===C){T=L,++T.usedTimes;break}}return T===void 0&&(T=new rEe(t,C,S,s),c.push(T)),T}function w(S){if(--S.usedTimes===0){const C=c.indexOf(S);c[C]=c[c.length-1],c.pop(),S.destroy()}}function E(S){l.remove(S)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:b,releaseProgram:w,releaseShaderCache:E,programs:c,dispose:A}}function cEe(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function uEe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function z8(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function F8(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(u,h,f,p,m,g){let v=t[e];return v===void 0?(v={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:m,group:g},t[e]=v):(v.id=u.id,v.object=u,v.geometry=h,v.material=f,v.groupOrder=p,v.renderOrder=u.renderOrder,v.z=m,v.group=g),e++,v}function a(u,h,f,p,m,g){const v=o(u,h,f,p,m,g);f.transmission>0?i.push(v):f.transparent===!0?r.push(v):n.push(v)}function l(u,h,f,p,m,g){const v=o(u,h,f,p,m,g);f.transmission>0?i.unshift(v):f.transparent===!0?r.unshift(v):n.unshift(v)}function c(u,h){n.length>1&&n.sort(u||uEe),i.length>1&&i.sort(h||z8),r.length>1&&r.sort(h||z8)}function d(){for(let u=e,h=t.length;u<h;u++){const f=t[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:d,sort:c}}function dEe(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new F8,t.set(i,[o])):r>=s.length?(o=new F8,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function hEe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new de,color:new at};break;case"SpotLight":n={position:new de,direction:new de,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new de,color:new at,distance:0,decay:0};break;case"HemisphereLight":n={direction:new de,skyColor:new at,groundColor:new at};break;case"RectAreaLight":n={color:new at,position:new de,halfWidth:new de,halfHeight:new de};break}return t[e.id]=n,n}}}function fEe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let pEe=0;function mEe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function gEe(t,e){const n=new hEe,i=fEe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new de);const s=new de,o=new Yt,a=new Yt;function l(d,u){let h=0,f=0,p=0;for(let P=0;P<9;P++)r.probe[P].set(0,0,0);let m=0,g=0,v=0,y=0,x=0,b=0,w=0,E=0,A=0,S=0;d.sort(mEe);const C=u!==!0?Math.PI:1;for(let P=0,R=d.length;P<R;P++){const L=d[P],O=L.color,B=L.intensity,$=L.distance,X=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)h+=O.r*B*C,f+=O.g*B*C,p+=O.b*B*C;else if(L.isLightProbe)for(let H=0;H<9;H++)r.probe[H].addScaledVector(L.sh.coefficients[H],B);else if(L.isDirectionalLight){const H=n.get(L);if(H.color.copy(L.color).multiplyScalar(L.intensity*C),L.castShadow){const U=L.shadow,N=i.get(L);N.shadowBias=U.bias,N.shadowNormalBias=U.normalBias,N.shadowRadius=U.radius,N.shadowMapSize=U.mapSize,r.directionalShadow[m]=N,r.directionalShadowMap[m]=X,r.directionalShadowMatrix[m]=L.shadow.matrix,b++}r.directional[m]=H,m++}else if(L.isSpotLight){const H=n.get(L);H.position.setFromMatrixPosition(L.matrixWorld),H.color.copy(O).multiplyScalar(B*C),H.distance=$,H.coneCos=Math.cos(L.angle),H.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),H.decay=L.decay,r.spot[v]=H;const U=L.shadow;if(L.map&&(r.spotLightMap[A]=L.map,A++,U.updateMatrices(L),L.castShadow&&S++),r.spotLightMatrix[v]=U.matrix,L.castShadow){const N=i.get(L);N.shadowBias=U.bias,N.shadowNormalBias=U.normalBias,N.shadowRadius=U.radius,N.shadowMapSize=U.mapSize,r.spotShadow[v]=N,r.spotShadowMap[v]=X,E++}v++}else if(L.isRectAreaLight){const H=n.get(L);H.color.copy(O).multiplyScalar(B),H.halfWidth.set(L.width*.5,0,0),H.halfHeight.set(0,L.height*.5,0),r.rectArea[y]=H,y++}else if(L.isPointLight){const H=n.get(L);if(H.color.copy(L.color).multiplyScalar(L.intensity*C),H.distance=L.distance,H.decay=L.decay,L.castShadow){const U=L.shadow,N=i.get(L);N.shadowBias=U.bias,N.shadowNormalBias=U.normalBias,N.shadowRadius=U.radius,N.shadowMapSize=U.mapSize,N.shadowCameraNear=U.camera.near,N.shadowCameraFar=U.camera.far,r.pointShadow[g]=N,r.pointShadowMap[g]=X,r.pointShadowMatrix[g]=L.shadow.matrix,w++}r.point[g]=H,g++}else if(L.isHemisphereLight){const H=n.get(L);H.skyColor.copy(L.color).multiplyScalar(B*C),H.groundColor.copy(L.groundColor).multiplyScalar(B*C),r.hemi[x]=H,x++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_FLOAT_1,r.rectAreaLTC2=ut.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_HALF_1,r.rectAreaLTC2=ut.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const T=r.hash;(T.directionalLength!==m||T.pointLength!==g||T.spotLength!==v||T.rectAreaLength!==y||T.hemiLength!==x||T.numDirectionalShadows!==b||T.numPointShadows!==w||T.numSpotShadows!==E||T.numSpotMaps!==A)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=y,r.point.length=g,r.hemi.length=x,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=E+A-S,r.spotLightMap.length=A,r.numSpotLightShadowsWithMaps=S,T.directionalLength=m,T.pointLength=g,T.spotLength=v,T.rectAreaLength=y,T.hemiLength=x,T.numDirectionalShadows=b,T.numPointShadows=w,T.numSpotShadows=E,T.numSpotMaps=A,r.version=pEe++)}function c(d,u){let h=0,f=0,p=0,m=0,g=0;const v=u.matrixWorldInverse;for(let y=0,x=d.length;y<x;y++){const b=d[y];if(b.isDirectionalLight){const w=r.directional[h];w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),h++}else if(b.isSpotLight){const w=r.spot[p];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),p++}else if(b.isRectAreaLight){const w=r.rectArea[m];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),a.identity(),o.copy(b.matrixWorld),o.premultiply(v),a.extractRotation(o),w.halfWidth.set(b.width*.5,0,0),w.halfHeight.set(0,b.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const w=r.point[f];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),f++}else if(b.isHemisphereLight){const w=r.hemi[g];w.direction.setFromMatrixPosition(b.matrixWorld),w.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:r}}function U8(t,e){const n=new gEe(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(u){i.push(u)}function a(u){r.push(u)}function l(u){n.setup(i,u)}function c(u){n.setupView(i,u)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function vEe(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new U8(t,e),n.set(s,[l])):o>=a.length?(l=new U8(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class i5 extends xr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ire,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class r5 extends xr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new de,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const yEe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,xEe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function bEe(t,e,n){let i=new sD;const r=new Ye,s=new Ye,o=new An,a=new i5({depthPacking:kre}),l=new r5,c={},d=n.maxTextureSize,u={0:Bs,1:Nf,2:ql},h=new rc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:yEe,fragmentShader:xEe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new cn;p.setAttribute("position",new Wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Lr(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=eD,this.render=function(b,w,E){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;const A=t.getRenderTarget(),S=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),T=t.state;T.setBlending(yd),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let P=0,R=b.length;P<R;P++){const L=b[P],O=L.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;r.copy(O.mapSize);const B=O.getFrameExtents();if(r.multiply(B),s.copy(O.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/B.x),r.x=s.x*B.x,O.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/B.y),r.y=s.y*B.y,O.mapSize.y=s.y)),O.map===null){const X=this.type!==fm?{minFilter:ir,magFilter:ir}:{};O.map=new ml(r.x,r.y,X),O.map.texture.name=L.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();const $=O.getViewportCount();for(let X=0;X<$;X++){const H=O.getViewport(X);o.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),T.viewport(o),O.updateMatrices(L,X),i=O.getFrustum(),x(w,E,O.camera,L,this.type)}O.isPointLightShadow!==!0&&this.type===fm&&v(O,E),O.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(A,S,C)};function v(b,w){const E=e.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new ml(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(w,null,E,h,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(w,null,E,f,m,null)}function y(b,w,E,A,S,C){let T=null;const P=E.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(P!==void 0?T=P:T=E.isPointLight===!0?l:a,t.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0){const R=T.uuid,L=w.uuid;let O=c[R];O===void 0&&(O={},c[R]=O);let B=O[L];B===void 0&&(B=T.clone(),O[L]=B),T=B}return T.visible=w.visible,T.wireframe=w.wireframe,C===fm?T.side=w.shadowSide!==null?w.shadowSide:w.side:T.side=w.shadowSide!==null?w.shadowSide:u[w.side],T.alphaMap=w.alphaMap,T.alphaTest=w.alphaTest,T.clipShadows=w.clipShadows,T.clippingPlanes=w.clippingPlanes,T.clipIntersection=w.clipIntersection,T.displacementMap=w.displacementMap,T.displacementScale=w.displacementScale,T.displacementBias=w.displacementBias,T.wireframeLinewidth=w.wireframeLinewidth,T.linewidth=w.linewidth,E.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(E.matrixWorld),T.nearDistance=A,T.farDistance=S),T}function x(b,w,E,A,S){if(b.visible===!1)return;if(b.layers.test(w.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&S===fm)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,b.matrixWorld);const P=e.update(b),R=b.material;if(Array.isArray(R)){const L=P.groups;for(let O=0,B=L.length;O<B;O++){const $=L[O],X=R[$.materialIndex];if(X&&X.visible){const H=y(b,X,A,E.near,E.far,S);t.renderBufferDirect(E,null,P,H,b,$)}}}else if(R.visible){const L=y(b,R,A,E.near,E.far,S);t.renderBufferDirect(E,null,P,L,b,null)}}const T=b.children;for(let P=0,R=T.length;P<R;P++)x(T[P],w,E,A,S)}}function wEe(t,e,n){const i=n.isWebGL2;function r(){let ne=!1;const ge=new An;let Me=null;const qe=new An(0,0,0,0);return{setMask:function(Qe){Me!==Qe&&!ne&&(t.colorMask(Qe,Qe,Qe,Qe),Me=Qe)},setLocked:function(Qe){ne=Qe},setClear:function(Qe,yt,un,bn,Vr){Vr===!0&&(Qe*=bn,yt*=bn,un*=bn),ge.set(Qe,yt,un,bn),qe.equals(ge)===!1&&(t.clearColor(Qe,yt,un,bn),qe.copy(ge))},reset:function(){ne=!1,Me=null,qe.set(-1,0,0,0)}}}function s(){let ne=!1,ge=null,Me=null,qe=null;return{setTest:function(Qe){Qe?ee(2929):ie(2929)},setMask:function(Qe){ge!==Qe&&!ne&&(t.depthMask(Qe),ge=Qe)},setFunc:function(Qe){if(Me!==Qe){switch(Qe){case nre:t.depthFunc(512);break;case ire:t.depthFunc(519);break;case rre:t.depthFunc(513);break;case kC:t.depthFunc(515);break;case sre:t.depthFunc(514);break;case ore:t.depthFunc(518);break;case are:t.depthFunc(516);break;case lre:t.depthFunc(517);break;default:t.depthFunc(515)}Me=Qe}},setLocked:function(Qe){ne=Qe},setClear:function(Qe){qe!==Qe&&(t.clearDepth(Qe),qe=Qe)},reset:function(){ne=!1,ge=null,Me=null,qe=null}}}function o(){let ne=!1,ge=null,Me=null,qe=null,Qe=null,yt=null,un=null,bn=null,Vr=null;return{setTest:function(It){ne||(It?ee(2960):ie(2960))},setMask:function(It){ge!==It&&!ne&&(t.stencilMask(It),ge=It)},setFunc:function(It,Bi,ii){(Me!==It||qe!==Bi||Qe!==ii)&&(t.stencilFunc(It,Bi,ii),Me=It,qe=Bi,Qe=ii)},setOp:function(It,Bi,ii){(yt!==It||un!==Bi||bn!==ii)&&(t.stencilOp(It,Bi,ii),yt=It,un=Bi,bn=ii)},setLocked:function(It){ne=It},setClear:function(It){Vr!==It&&(t.clearStencil(It),Vr=It)},reset:function(){ne=!1,ge=null,Me=null,qe=null,Qe=null,yt=null,un=null,bn=null,Vr=null}}}const a=new r,l=new s,c=new o,d=new WeakMap,u=new WeakMap;let h={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,w=null,E=null,A=null,S=null,C=!1,T=null,P=null,R=null,L=null,O=null;const B=t.getParameter(35661);let $=!1,X=0;const H=t.getParameter(7938);H.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(H)[1]),$=X>=1):H.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),$=X>=2);let U=null,N={};const k=t.getParameter(3088),z=t.getParameter(2978),W=new An().fromArray(k),K=new An().fromArray(z);function J(ne,ge,Me){const qe=new Uint8Array(4),Qe=t.createTexture();t.bindTexture(ne,Qe),t.texParameteri(ne,10241,9728),t.texParameteri(ne,10240,9728);for(let yt=0;yt<Me;yt++)t.texImage2D(ge+yt,0,6408,1,1,0,6408,5121,qe);return Qe}const F={};F[3553]=J(3553,3553,1),F[34067]=J(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ee(2929),l.setFunc(kC),Ie(!1),Le(mB),ee(2884),be(yd);function ee(ne){h[ne]!==!0&&(t.enable(ne),h[ne]=!0)}function ie(ne){h[ne]!==!1&&(t.disable(ne),h[ne]=!1)}function te(ne,ge){return f[ne]!==ge?(t.bindFramebuffer(ne,ge),f[ne]=ge,i&&(ne===36009&&(f[36160]=ge),ne===36160&&(f[36009]=ge)),!0):!1}function re(ne,ge){let Me=m,qe=!1;if(ne)if(Me=p.get(ge),Me===void 0&&(Me=[],p.set(ge,Me)),ne.isWebGLMultipleRenderTargets){const Qe=ne.texture;if(Me.length!==Qe.length||Me[0]!==36064){for(let yt=0,un=Qe.length;yt<un;yt++)Me[yt]=36064+yt;Me.length=Qe.length,qe=!0}}else Me[0]!==36064&&(Me[0]=36064,qe=!0);else Me[0]!==1029&&(Me[0]=1029,qe=!0);qe&&(n.isWebGL2?t.drawBuffers(Me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Me))}function me(ne){return g!==ne?(t.useProgram(ne),g=ne,!0):!1}const se={[tm]:32774,[Wie]:32778,[qie]:32779};if(i)se[xB]=32775,se[bB]=32776;else{const ne=e.get("EXT_blend_minmax");ne!==null&&(se[xB]=ne.MIN_EXT,se[bB]=ne.MAX_EXT)}const oe={[$ie]:0,[Xie]:1,[Yie]:768,[WU]:770,[tre]:776,[Jie]:774,[Zie]:772,[Kie]:769,[qU]:771,[ere]:775,[Qie]:773};function be(ne,ge,Me,qe,Qe,yt,un,bn){if(ne===yd){v===!0&&(ie(3042),v=!1);return}if(v===!1&&(ee(3042),v=!0),ne!==Gie){if(ne!==y||bn!==C){if((x!==tm||E!==tm)&&(t.blendEquation(32774),x=tm,E=tm),bn)switch(ne){case Tm:t.blendFuncSeparate(1,771,1,771);break;case gB:t.blendFunc(1,1);break;case vB:t.blendFuncSeparate(0,769,0,1);break;case yB:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}else switch(ne){case Tm:t.blendFuncSeparate(770,771,1,771);break;case gB:t.blendFunc(770,1);break;case vB:t.blendFuncSeparate(0,769,0,1);break;case yB:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}b=null,w=null,A=null,S=null,y=ne,C=bn}return}Qe=Qe||ge,yt=yt||Me,un=un||qe,(ge!==x||Qe!==E)&&(t.blendEquationSeparate(se[ge],se[Qe]),x=ge,E=Qe),(Me!==b||qe!==w||yt!==A||un!==S)&&(t.blendFuncSeparate(oe[Me],oe[qe],oe[yt],oe[un]),b=Me,w=qe,A=yt,S=un),y=ne,C=null}function Ae(ne,ge){ne.side===ql?ie(2884):ee(2884);let Me=ne.side===Bs;ge&&(Me=!Me),Ie(Me),ne.blending===Tm&&ne.transparent===!1?be(yd):be(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.premultipliedAlpha),l.setFunc(ne.depthFunc),l.setTest(ne.depthTest),l.setMask(ne.depthWrite),a.setMask(ne.colorWrite);const qe=ne.stencilWrite;c.setTest(qe),qe&&(c.setMask(ne.stencilWriteMask),c.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),c.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),ve(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),ne.alphaToCoverage===!0?ee(32926):ie(32926)}function Ie(ne){T!==ne&&(ne?t.frontFace(2304):t.frontFace(2305),T=ne)}function Le(ne){ne!==Vie?(ee(2884),ne!==P&&(ne===mB?t.cullFace(1029):ne===Hie?t.cullFace(1028):t.cullFace(1032))):ie(2884),P=ne}function fe(ne){ne!==R&&($&&t.lineWidth(ne),R=ne)}function ve(ne,ge,Me){ne?(ee(32823),(L!==ge||O!==Me)&&(t.polygonOffset(ge,Me),L=ge,O=Me)):ie(32823)}function ke(ne){ne?ee(3089):ie(3089)}function ze(ne){ne===void 0&&(ne=33984+B-1),U!==ne&&(t.activeTexture(ne),U=ne)}function j(ne,ge,Me){Me===void 0&&(U===null?Me=33984+B-1:Me=U);let qe=N[Me];qe===void 0&&(qe={type:void 0,texture:void 0},N[Me]=qe),(qe.type!==ne||qe.texture!==ge)&&(U!==Me&&(t.activeTexture(Me),U=Me),t.bindTexture(ne,ge||F[ne]),qe.type=ne,qe.texture=ge)}function V(){const ne=N[U];ne!==void 0&&ne.type!==void 0&&(t.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)}function le(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function xe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function De(){try{t.texSubImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ne(){try{t.texSubImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function He(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Pe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function ae(){try{t.texStorage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Fe(){try{t.texStorage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function he(){try{t.texImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ce(){try{t.texImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ue(ne){W.equals(ne)===!1&&(t.scissor(ne.x,ne.y,ne.z,ne.w),W.copy(ne))}function We(ne){K.equals(ne)===!1&&(t.viewport(ne.x,ne.y,ne.z,ne.w),K.copy(ne))}function rt(ne,ge){let Me=u.get(ge);Me===void 0&&(Me=new WeakMap,u.set(ge,Me));let qe=Me.get(ne);qe===void 0&&(qe=t.getUniformBlockIndex(ge,ne.name),Me.set(ne,qe))}function wt(ne,ge){const qe=u.get(ge).get(ne);d.get(ne)!==qe&&(t.uniformBlockBinding(ge,qe,ne.__bindingPointIndex),d.set(ne,qe))}function $t(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},U=null,N={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,w=null,E=null,A=null,S=null,C=!1,T=null,P=null,R=null,L=null,O=null,W.set(0,0,t.canvas.width,t.canvas.height),K.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ee,disable:ie,bindFramebuffer:te,drawBuffers:re,useProgram:me,setBlending:be,setMaterial:Ae,setFlipSided:Ie,setCullFace:Le,setLineWidth:fe,setPolygonOffset:ve,setScissorTest:ke,activeTexture:ze,bindTexture:j,unbindTexture:V,compressedTexImage2D:le,compressedTexImage3D:xe,texImage2D:he,texImage3D:Ce,updateUBOMapping:rt,uniformBlockBinding:wt,texStorage2D:ae,texStorage3D:Fe,texSubImage2D:De,texSubImage3D:Ne,compressedTexSubImage2D:He,compressedTexSubImage3D:Pe,scissor:Ue,viewport:We,reset:$t}}function _Ee(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,u=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(j,V){return v?new OffscreenCanvas(j,V):e_("canvas")}function x(j,V,le,xe){let De=1;if((j.width>xe||j.height>xe)&&(De=xe/Math.max(j.width,j.height)),De<1||V===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const Ne=V?BC:Math.floor,He=Ne(De*j.width),Pe=Ne(De*j.height);m===void 0&&(m=y(He,Pe));const ae=le?y(He,Pe):m;return ae.width=He,ae.height=Pe,ae.getContext("2d").drawImage(j,0,0,He,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+He+"x"+Pe+")."),ae}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function b(j){return jB(j.width)&&jB(j.height)}function w(j){return a?!1:j.wrapS!==as||j.wrapT!==as||j.minFilter!==ir&&j.minFilter!==gi}function E(j,V){return j.generateMipmaps&&V&&j.minFilter!==ir&&j.minFilter!==gi}function A(j){t.generateMipmap(j)}function S(j,V,le,xe,De=!1){if(a===!1)return V;if(j!==null){if(t[j]!==void 0)return t[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Ne=V;return V===6403&&(le===5126&&(Ne=33326),le===5131&&(Ne=33325),le===5121&&(Ne=33321)),V===33319&&(le===5126&&(Ne=33328),le===5131&&(Ne=33327),le===5121&&(Ne=33323)),V===6408&&(le===5126&&(Ne=34836),le===5131&&(Ne=34842),le===5121&&(Ne=xe===kn&&De===!1?35907:32856),le===32819&&(Ne=32854),le===32820&&(Ne=32855)),(Ne===33325||Ne===33326||Ne===33327||Ne===33328||Ne===34842||Ne===34836)&&e.get("EXT_color_buffer_float"),Ne}function C(j,V,le){return E(j,le)===!0||j.isFramebufferTexture&&j.minFilter!==ir&&j.minFilter!==gi?Math.log2(Math.max(V.width,V.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?V.mipmaps.length:1}function T(j){return j===ir||j===Yw||j===Kw?9728:9729}function P(j){const V=j.target;V.removeEventListener("dispose",P),L(V),V.isVideoTexture&&p.delete(V)}function R(j){const V=j.target;V.removeEventListener("dispose",R),B(V)}function L(j){const V=i.get(j);if(V.__webglInit===void 0)return;const le=j.source,xe=g.get(le);if(xe){const De=xe[V.__cacheKey];De.usedTimes--,De.usedTimes===0&&O(j),Object.keys(xe).length===0&&g.delete(le)}i.remove(j)}function O(j){const V=i.get(j);t.deleteTexture(V.__webglTexture);const le=j.source,xe=g.get(le);delete xe[V.__cacheKey],o.memory.textures--}function B(j){const V=j.texture,le=i.get(j),xe=i.get(V);if(xe.__webglTexture!==void 0&&(t.deleteTexture(xe.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let De=0;De<6;De++)t.deleteFramebuffer(le.__webglFramebuffer[De]),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[De]);else{if(t.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let De=0;De<le.__webglColorRenderbuffer.length;De++)le.__webglColorRenderbuffer[De]&&t.deleteRenderbuffer(le.__webglColorRenderbuffer[De]);le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let De=0,Ne=V.length;De<Ne;De++){const He=i.get(V[De]);He.__webglTexture&&(t.deleteTexture(He.__webglTexture),o.memory.textures--),i.remove(V[De])}i.remove(V),i.remove(j)}let $=0;function X(){$=0}function H(){const j=$;return j>=l&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+l),$+=1,j}function U(j){const V=[];return V.push(j.wrapS),V.push(j.wrapT),V.push(j.wrapR||0),V.push(j.magFilter),V.push(j.minFilter),V.push(j.anisotropy),V.push(j.internalFormat),V.push(j.format),V.push(j.type),V.push(j.generateMipmaps),V.push(j.premultiplyAlpha),V.push(j.flipY),V.push(j.unpackAlignment),V.push(j.encoding),V.join()}function N(j,V){const le=i.get(j);if(j.isVideoTexture&&ke(j),j.isRenderTargetTexture===!1&&j.version>0&&le.__version!==j.version){const xe=j.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(le,j,V);return}}n.bindTexture(3553,le.__webglTexture,33984+V)}function k(j,V){const le=i.get(j);if(j.version>0&&le.__version!==j.version){ie(le,j,V);return}n.bindTexture(35866,le.__webglTexture,33984+V)}function z(j,V){const le=i.get(j);if(j.version>0&&le.__version!==j.version){ie(le,j,V);return}n.bindTexture(32879,le.__webglTexture,33984+V)}function W(j,V){const le=i.get(j);if(j.version>0&&le.__version!==j.version){te(le,j,V);return}n.bindTexture(34067,le.__webglTexture,33984+V)}const K={[zf]:10497,[as]:33071,[_y]:33648},J={[ir]:9728,[Yw]:9984,[Kw]:9986,[gi]:9729,[nD]:9985,[Gd]:9987};function F(j,V,le){if(le?(t.texParameteri(j,10242,K[V.wrapS]),t.texParameteri(j,10243,K[V.wrapT]),(j===32879||j===35866)&&t.texParameteri(j,32882,K[V.wrapR]),t.texParameteri(j,10240,J[V.magFilter]),t.texParameteri(j,10241,J[V.minFilter])):(t.texParameteri(j,10242,33071),t.texParameteri(j,10243,33071),(j===32879||j===35866)&&t.texParameteri(j,32882,33071),(V.wrapS!==as||V.wrapT!==as)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(j,10240,T(V.magFilter)),t.texParameteri(j,10241,T(V.minFilter)),V.minFilter!==ir&&V.minFilter!==gi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(V.type===rl&&e.has("OES_texture_float_linear")===!1||a===!1&&V.type===$l&&e.has("OES_texture_half_float_linear")===!1)return;(V.anisotropy>1||i.get(V).__currentAnisotropy)&&(t.texParameterf(j,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,r.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy)}}function ee(j,V){let le=!1;j.__webglInit===void 0&&(j.__webglInit=!0,V.addEventListener("dispose",P));const xe=V.source;let De=g.get(xe);De===void 0&&(De={},g.set(xe,De));const Ne=U(V);if(Ne!==j.__cacheKey){De[Ne]===void 0&&(De[Ne]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,le=!0),De[Ne].usedTimes++;const He=De[j.__cacheKey];He!==void 0&&(De[j.__cacheKey].usedTimes--,He.usedTimes===0&&O(V)),j.__cacheKey=Ne,j.__webglTexture=De[Ne].texture}return le}function ie(j,V,le){let xe=3553;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(xe=35866),V.isData3DTexture&&(xe=32879);const De=ee(j,V),Ne=V.source;n.bindTexture(xe,j.__webglTexture,33984+le);const He=i.get(Ne);if(Ne.version!==He.__version||De===!0){n.activeTexture(33984+le),t.pixelStorei(37440,V.flipY),t.pixelStorei(37441,V.premultiplyAlpha),t.pixelStorei(3317,V.unpackAlignment),t.pixelStorei(37443,0);const Pe=w(V)&&b(V.image)===!1;let ae=x(V.image,Pe,!1,d);ae=ze(V,ae);const Fe=b(ae)||a,he=s.convert(V.format,V.encoding);let Ce=s.convert(V.type),Ue=S(V.internalFormat,he,Ce,V.encoding,V.isVideoTexture);F(xe,V,Fe);let We;const rt=V.mipmaps,wt=a&&V.isVideoTexture!==!0,$t=He.__version===void 0||De===!0,ne=C(V,ae,Fe);if(V.isDepthTexture)Ue=6402,a?V.type===rl?Ue=36012:V.type===Jh?Ue=33190:V.type===Cm?Ue=35056:Ue=33189:V.type===rl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),V.format===Ef&&Ue===6402&&V.type!==XU&&V.type!==Jh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),V.type=Jh,Ce=s.convert(V.type)),V.format===Zm&&Ue===6402&&(Ue=34041,V.type!==Cm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=Cm,Ce=s.convert(V.type))),$t&&(wt?n.texStorage2D(3553,1,Ue,ae.width,ae.height):n.texImage2D(3553,0,Ue,ae.width,ae.height,0,he,Ce,null));else if(V.isDataTexture)if(rt.length>0&&Fe){wt&&$t&&n.texStorage2D(3553,ne,Ue,rt[0].width,rt[0].height);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],wt?n.texSubImage2D(3553,ge,0,0,We.width,We.height,he,Ce,We.data):n.texImage2D(3553,ge,Ue,We.width,We.height,0,he,Ce,We.data);V.generateMipmaps=!1}else wt?($t&&n.texStorage2D(3553,ne,Ue,ae.width,ae.height),n.texSubImage2D(3553,0,0,0,ae.width,ae.height,he,Ce,ae.data)):n.texImage2D(3553,0,Ue,ae.width,ae.height,0,he,Ce,ae.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){wt&&$t&&n.texStorage3D(35866,ne,Ue,rt[0].width,rt[0].height,ae.depth);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],V.format!==So?he!==null?wt?n.compressedTexSubImage3D(35866,ge,0,0,0,We.width,We.height,ae.depth,he,We.data,0,0):n.compressedTexImage3D(35866,ge,Ue,We.width,We.height,ae.depth,0,We.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?n.texSubImage3D(35866,ge,0,0,0,We.width,We.height,ae.depth,he,Ce,We.data):n.texImage3D(35866,ge,Ue,We.width,We.height,ae.depth,0,he,Ce,We.data)}else{wt&&$t&&n.texStorage2D(3553,ne,Ue,rt[0].width,rt[0].height);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],V.format!==So?he!==null?wt?n.compressedTexSubImage2D(3553,ge,0,0,We.width,We.height,he,We.data):n.compressedTexImage2D(3553,ge,Ue,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?n.texSubImage2D(3553,ge,0,0,We.width,We.height,he,Ce,We.data):n.texImage2D(3553,ge,Ue,We.width,We.height,0,he,Ce,We.data)}else if(V.isDataArrayTexture)wt?($t&&n.texStorage3D(35866,ne,Ue,ae.width,ae.height,ae.depth),n.texSubImage3D(35866,0,0,0,0,ae.width,ae.height,ae.depth,he,Ce,ae.data)):n.texImage3D(35866,0,Ue,ae.width,ae.height,ae.depth,0,he,Ce,ae.data);else if(V.isData3DTexture)wt?($t&&n.texStorage3D(32879,ne,Ue,ae.width,ae.height,ae.depth),n.texSubImage3D(32879,0,0,0,0,ae.width,ae.height,ae.depth,he,Ce,ae.data)):n.texImage3D(32879,0,Ue,ae.width,ae.height,ae.depth,0,he,Ce,ae.data);else if(V.isFramebufferTexture){if($t)if(wt)n.texStorage2D(3553,ne,Ue,ae.width,ae.height);else{let ge=ae.width,Me=ae.height;for(let qe=0;qe<ne;qe++)n.texImage2D(3553,qe,Ue,ge,Me,0,he,Ce,null),ge>>=1,Me>>=1}}else if(rt.length>0&&Fe){wt&&$t&&n.texStorage2D(3553,ne,Ue,rt[0].width,rt[0].height);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],wt?n.texSubImage2D(3553,ge,0,0,he,Ce,We):n.texImage2D(3553,ge,Ue,he,Ce,We);V.generateMipmaps=!1}else wt?($t&&n.texStorage2D(3553,ne,Ue,ae.width,ae.height),n.texSubImage2D(3553,0,0,0,he,Ce,ae)):n.texImage2D(3553,0,Ue,he,Ce,ae);E(V,Fe)&&A(xe),He.__version=Ne.version,V.onUpdate&&V.onUpdate(V)}j.__version=V.version}function te(j,V,le){if(V.image.length!==6)return;const xe=ee(j,V),De=V.source;n.bindTexture(34067,j.__webglTexture,33984+le);const Ne=i.get(De);if(De.version!==Ne.__version||xe===!0){n.activeTexture(33984+le),t.pixelStorei(37440,V.flipY),t.pixelStorei(37441,V.premultiplyAlpha),t.pixelStorei(3317,V.unpackAlignment),t.pixelStorei(37443,0);const He=V.isCompressedTexture||V.image[0].isCompressedTexture,Pe=V.image[0]&&V.image[0].isDataTexture,ae=[];for(let ge=0;ge<6;ge++)!He&&!Pe?ae[ge]=x(V.image[ge],!1,!0,c):ae[ge]=Pe?V.image[ge].image:V.image[ge],ae[ge]=ze(V,ae[ge]);const Fe=ae[0],he=b(Fe)||a,Ce=s.convert(V.format,V.encoding),Ue=s.convert(V.type),We=S(V.internalFormat,Ce,Ue,V.encoding),rt=a&&V.isVideoTexture!==!0,wt=Ne.__version===void 0||xe===!0;let $t=C(V,Fe,he);F(34067,V,he);let ne;if(He){rt&&wt&&n.texStorage2D(34067,$t,We,Fe.width,Fe.height);for(let ge=0;ge<6;ge++){ne=ae[ge].mipmaps;for(let Me=0;Me<ne.length;Me++){const qe=ne[Me];V.format!==So?Ce!==null?rt?n.compressedTexSubImage2D(34069+ge,Me,0,0,qe.width,qe.height,Ce,qe.data):n.compressedTexImage2D(34069+ge,Me,We,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rt?n.texSubImage2D(34069+ge,Me,0,0,qe.width,qe.height,Ce,Ue,qe.data):n.texImage2D(34069+ge,Me,We,qe.width,qe.height,0,Ce,Ue,qe.data)}}}else{ne=V.mipmaps,rt&&wt&&(ne.length>0&&$t++,n.texStorage2D(34067,$t,We,ae[0].width,ae[0].height));for(let ge=0;ge<6;ge++)if(Pe){rt?n.texSubImage2D(34069+ge,0,0,0,ae[ge].width,ae[ge].height,Ce,Ue,ae[ge].data):n.texImage2D(34069+ge,0,We,ae[ge].width,ae[ge].height,0,Ce,Ue,ae[ge].data);for(let Me=0;Me<ne.length;Me++){const Qe=ne[Me].image[ge].image;rt?n.texSubImage2D(34069+ge,Me+1,0,0,Qe.width,Qe.height,Ce,Ue,Qe.data):n.texImage2D(34069+ge,Me+1,We,Qe.width,Qe.height,0,Ce,Ue,Qe.data)}}else{rt?n.texSubImage2D(34069+ge,0,0,0,Ce,Ue,ae[ge]):n.texImage2D(34069+ge,0,We,Ce,Ue,ae[ge]);for(let Me=0;Me<ne.length;Me++){const qe=ne[Me];rt?n.texSubImage2D(34069+ge,Me+1,0,0,Ce,Ue,qe.image[ge]):n.texImage2D(34069+ge,Me+1,We,Ce,Ue,qe.image[ge])}}}E(V,he)&&A(34067),Ne.__version=De.version,V.onUpdate&&V.onUpdate(V)}j.__version=V.version}function re(j,V,le,xe,De){const Ne=s.convert(le.format,le.encoding),He=s.convert(le.type),Pe=S(le.internalFormat,Ne,He,le.encoding);i.get(V).__hasExternalTextures||(De===32879||De===35866?n.texImage3D(De,0,Pe,V.width,V.height,V.depth,0,Ne,He,null):n.texImage2D(De,0,Pe,V.width,V.height,0,Ne,He,null)),n.bindFramebuffer(36160,j),ve(V)?h.framebufferTexture2DMultisampleEXT(36160,xe,De,i.get(le).__webglTexture,0,fe(V)):(De===3553||De>=34069&&De<=34074)&&t.framebufferTexture2D(36160,xe,De,i.get(le).__webglTexture,0),n.bindFramebuffer(36160,null)}function me(j,V,le){if(t.bindRenderbuffer(36161,j),V.depthBuffer&&!V.stencilBuffer){let xe=33189;if(le||ve(V)){const De=V.depthTexture;De&&De.isDepthTexture&&(De.type===rl?xe=36012:De.type===Jh&&(xe=33190));const Ne=fe(V);ve(V)?h.renderbufferStorageMultisampleEXT(36161,Ne,xe,V.width,V.height):t.renderbufferStorageMultisample(36161,Ne,xe,V.width,V.height)}else t.renderbufferStorage(36161,xe,V.width,V.height);t.framebufferRenderbuffer(36160,36096,36161,j)}else if(V.depthBuffer&&V.stencilBuffer){const xe=fe(V);le&&ve(V)===!1?t.renderbufferStorageMultisample(36161,xe,35056,V.width,V.height):ve(V)?h.renderbufferStorageMultisampleEXT(36161,xe,35056,V.width,V.height):t.renderbufferStorage(36161,34041,V.width,V.height),t.framebufferRenderbuffer(36160,33306,36161,j)}else{const xe=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let De=0;De<xe.length;De++){const Ne=xe[De],He=s.convert(Ne.format,Ne.encoding),Pe=s.convert(Ne.type),ae=S(Ne.internalFormat,He,Pe,Ne.encoding),Fe=fe(V);le&&ve(V)===!1?t.renderbufferStorageMultisample(36161,Fe,ae,V.width,V.height):ve(V)?h.renderbufferStorageMultisampleEXT(36161,Fe,ae,V.width,V.height):t.renderbufferStorage(36161,ae,V.width,V.height)}}t.bindRenderbuffer(36161,null)}function se(j,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,j),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),N(V.depthTexture,0);const xe=i.get(V.depthTexture).__webglTexture,De=fe(V);if(V.depthTexture.format===Ef)ve(V)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,xe,0,De):t.framebufferTexture2D(36160,36096,3553,xe,0);else if(V.depthTexture.format===Zm)ve(V)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,xe,0,De):t.framebufferTexture2D(36160,33306,3553,xe,0);else throw new Error("Unknown depthTexture format")}function oe(j){const V=i.get(j),le=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!V.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");se(V.__webglFramebuffer,j)}else if(le){V.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)n.bindFramebuffer(36160,V.__webglFramebuffer[xe]),V.__webglDepthbuffer[xe]=t.createRenderbuffer(),me(V.__webglDepthbuffer[xe],j,!1)}else n.bindFramebuffer(36160,V.__webglFramebuffer),V.__webglDepthbuffer=t.createRenderbuffer(),me(V.__webglDepthbuffer,j,!1);n.bindFramebuffer(36160,null)}function be(j,V,le){const xe=i.get(j);V!==void 0&&re(xe.__webglFramebuffer,j,j.texture,36064,3553),le!==void 0&&oe(j)}function Ae(j){const V=j.texture,le=i.get(j),xe=i.get(V);j.addEventListener("dispose",R),j.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=t.createTexture()),xe.__version=V.version,o.memory.textures++);const De=j.isWebGLCubeRenderTarget===!0,Ne=j.isWebGLMultipleRenderTargets===!0,He=b(j)||a;if(De){le.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)le.__webglFramebuffer[Pe]=t.createFramebuffer()}else{if(le.__webglFramebuffer=t.createFramebuffer(),Ne)if(r.drawBuffers){const Pe=j.texture;for(let ae=0,Fe=Pe.length;ae<Fe;ae++){const he=i.get(Pe[ae]);he.__webglTexture===void 0&&(he.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&j.samples>0&&ve(j)===!1){const Pe=Ne?V:[V];le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let ae=0;ae<Pe.length;ae++){const Fe=Pe[ae];le.__webglColorRenderbuffer[ae]=t.createRenderbuffer(),t.bindRenderbuffer(36161,le.__webglColorRenderbuffer[ae]);const he=s.convert(Fe.format,Fe.encoding),Ce=s.convert(Fe.type),Ue=S(Fe.internalFormat,he,Ce,Fe.encoding,j.isXRRenderTarget===!0),We=fe(j);t.renderbufferStorageMultisample(36161,We,Ue,j.width,j.height),t.framebufferRenderbuffer(36160,36064+ae,36161,le.__webglColorRenderbuffer[ae])}t.bindRenderbuffer(36161,null),j.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),me(le.__webglDepthRenderbuffer,j,!0)),n.bindFramebuffer(36160,null)}}if(De){n.bindTexture(34067,xe.__webglTexture),F(34067,V,He);for(let Pe=0;Pe<6;Pe++)re(le.__webglFramebuffer[Pe],j,V,36064,34069+Pe);E(V,He)&&A(34067),n.unbindTexture()}else if(Ne){const Pe=j.texture;for(let ae=0,Fe=Pe.length;ae<Fe;ae++){const he=Pe[ae],Ce=i.get(he);n.bindTexture(3553,Ce.__webglTexture),F(3553,he,He),re(le.__webglFramebuffer,j,he,36064+ae,3553),E(he,He)&&A(3553)}n.unbindTexture()}else{let Pe=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(a?Pe=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Pe,xe.__webglTexture),F(Pe,V,He),re(le.__webglFramebuffer,j,V,36064,Pe),E(V,He)&&A(Pe),n.unbindTexture()}j.depthBuffer&&oe(j)}function Ie(j){const V=b(j)||a,le=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let xe=0,De=le.length;xe<De;xe++){const Ne=le[xe];if(E(Ne,V)){const He=j.isWebGLCubeRenderTarget?34067:3553,Pe=i.get(Ne).__webglTexture;n.bindTexture(He,Pe),A(He),n.unbindTexture()}}}function Le(j){if(a&&j.samples>0&&ve(j)===!1){const V=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],le=j.width,xe=j.height;let De=16384;const Ne=[],He=j.stencilBuffer?33306:36096,Pe=i.get(j),ae=j.isWebGLMultipleRenderTargets===!0;if(ae)for(let Fe=0;Fe<V.length;Fe++)n.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Fe,36161,null),n.bindFramebuffer(36160,Pe.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Fe,3553,null,0);n.bindFramebuffer(36008,Pe.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Pe.__webglFramebuffer);for(let Fe=0;Fe<V.length;Fe++){Ne.push(36064+Fe),j.depthBuffer&&Ne.push(He);const he=Pe.__ignoreDepthValues!==void 0?Pe.__ignoreDepthValues:!1;if(he===!1&&(j.depthBuffer&&(De|=256),j.stencilBuffer&&(De|=1024)),ae&&t.framebufferRenderbuffer(36008,36064,36161,Pe.__webglColorRenderbuffer[Fe]),he===!0&&(t.invalidateFramebuffer(36008,[He]),t.invalidateFramebuffer(36009,[He])),ae){const Ce=i.get(V[Fe]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,Ce,0)}t.blitFramebuffer(0,0,le,xe,0,0,le,xe,De,9728),f&&t.invalidateFramebuffer(36008,Ne)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),ae)for(let Fe=0;Fe<V.length;Fe++){n.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Fe,36161,Pe.__webglColorRenderbuffer[Fe]);const he=i.get(V[Fe]).__webglTexture;n.bindFramebuffer(36160,Pe.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Fe,3553,he,0)}n.bindFramebuffer(36009,Pe.__webglMultisampledFramebuffer)}}function fe(j){return Math.min(u,j.samples)}function ve(j){const V=i.get(j);return a&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function ke(j){const V=o.render.frame;p.get(j)!==V&&(p.set(j,V),j.update())}function ze(j,V){const le=j.encoding,xe=j.format,De=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===NC||le!==hu&&(le===kn?a===!1?e.has("EXT_sRGB")===!0&&xe===So?(j.format=NC,j.minFilter=gi,j.generateMipmaps=!1):V=QU.sRGBToLinear(V):(xe!==So||De!==Ld)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),V}this.allocateTextureUnit=H,this.resetTextureUnits=X,this.setTexture2D=N,this.setTexture2DArray=k,this.setTexture3D=z,this.setTextureCube=W,this.rebindTextures=be,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=Le,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=re,this.useMultisampledRTT=ve}function Yre(t,e,n){const i=n.isWebGL2;function r(s,o=null){let a;if(s===Ld)return 5121;if(s===yre)return 32819;if(s===xre)return 32820;if(s===mre)return 5120;if(s===gre)return 5122;if(s===XU)return 5123;if(s===vre)return 5124;if(s===Jh)return 5125;if(s===rl)return 5126;if(s===$l)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===bre)return 6406;if(s===So)return 6408;if(s===_re)return 6409;if(s===Sre)return 6410;if(s===Ef)return 6402;if(s===Zm)return 34041;if(s===Ere)return 6403;if(s===wre)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===NC)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Mre)return 36244;if(s===Are)return 33319;if(s===Tre)return 33320;if(s===Cre)return 36249;if(s===CT||s===PT||s===DT||s===RT)if(o===kn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===CT)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===PT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===DT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===RT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===CT)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===PT)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===DT)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===RT)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===wB||s===_B||s===SB||s===EB)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===wB)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===_B)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===SB)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===EB)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Pre)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===MB||s===AB)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===MB)return o===kn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===AB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===TB||s===CB||s===PB||s===DB||s===RB||s===OB||s===LB||s===IB||s===kB||s===NB||s===BB||s===zB||s===FB||s===UB)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===TB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===CB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===PB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===DB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===RB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===OB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===LB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===IB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===kB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===NB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===BB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===zB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===FB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===UB)return o===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===VB)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===VB)return o===kn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Cm?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class Kre extends vi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ud extends Mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const SEe={type:"move"};class QO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ud,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ud,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new de,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new de),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ud,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new de,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new de),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const g=n.getJointPose(m,i);if(c.joints[m.jointName]===void 0){const y=new ud;y.matrixAutoUpdate=!1,y.visible=!1,c.joints[m.jointName]=y,c.add(y)}const v=c.joints[m.jointName];g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=g!==null}const d=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],h=d.position.distanceTo(u.position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(SEe)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class Zre extends Yi{constructor(e,n,i,r,s,o,a,l,c,d){if(d=d!==void 0?d:Ef,d!==Ef&&d!==Zm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Ef&&(i=Jh),i===void 0&&d===Zm&&(i=Cm),super(null,r,s,o,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:ir,this.minFilter=l!==void 0?l:ir,this.flipY=!1,this.generateMipmaps=!1}}class EEe extends bu{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,d=null,u=null,h=null,f=null;const p=n.getContextAttributes();let m=null,g=null;const v=[],y=[],x=new vi;x.layers.enable(1),x.viewport=new An;const b=new vi;b.layers.enable(2),b.viewport=new An;const w=[x,b],E=new Kre;E.layers.enable(1),E.layers.enable(2);let A=null,S=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let N=v[U];return N===void 0&&(N=new QO,v[U]=N),N.getTargetRaySpace()},this.getControllerGrip=function(U){let N=v[U];return N===void 0&&(N=new QO,v[U]=N),N.getGripSpace()},this.getHand=function(U){let N=v[U];return N===void 0&&(N=new QO,v[U]=N),N.getHandSpace()};function C(U){const N=y.indexOf(U.inputSource);if(N===-1)return;const k=v[N];k!==void 0&&k.dispatchEvent({type:U.type,data:U.inputSource})}function T(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",P);for(let U=0;U<v.length;U++){const N=y[U];N!==null&&(y[U]=null,v[U].disconnect(N))}A=null,S=null,e.setRenderTarget(m),h=null,u=null,d=null,r=null,g=null,H.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){s=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(U){l=U},this.getBaseLayer=function(){return u!==null?u:h},this.getBinding=function(){return d},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(U){if(r=U,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",T),r.addEventListener("inputsourceschange",P),p.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const N={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,n,N),r.updateRenderState({baseLayer:h}),g=new ml(h.framebufferWidth,h.framebufferHeight,{format:So,type:Ld,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let N=null,k=null,z=null;p.depth&&(z=p.stencil?35056:33190,N=p.stencil?Zm:Ef,k=p.stencil?Cm:Jh);const W={colorFormat:32856,depthFormat:z,scaleFactor:s};d=new XRWebGLBinding(r,n),u=d.createProjectionLayer(W),r.updateRenderState({layers:[u]}),g=new ml(u.textureWidth,u.textureHeight,{format:So,type:Ld,depthTexture:new Zre(u.textureWidth,u.textureHeight,k,void 0,void 0,void 0,void 0,void 0,void 0,N),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const K=e.properties.get(g);K.__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await r.requestReferenceSpace(a),H.setContext(r),H.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function P(U){for(let N=0;N<U.removed.length;N++){const k=U.removed[N],z=y.indexOf(k);z>=0&&(y[z]=null,v[z].dispatchEvent({type:"disconnected",data:k}))}for(let N=0;N<U.added.length;N++){const k=U.added[N];let z=y.indexOf(k);if(z===-1){for(let K=0;K<v.length;K++)if(K>=y.length){y.push(k),z=K;break}else if(y[K]===null){y[K]=k,z=K;break}if(z===-1)break}const W=v[z];W&&W.dispatchEvent({type:"connected",data:k})}}const R=new de,L=new de;function O(U,N,k){R.setFromMatrixPosition(N.matrixWorld),L.setFromMatrixPosition(k.matrixWorld);const z=R.distanceTo(L),W=N.projectionMatrix.elements,K=k.projectionMatrix.elements,J=W[14]/(W[10]-1),F=W[14]/(W[10]+1),ee=(W[9]+1)/W[5],ie=(W[9]-1)/W[5],te=(W[8]-1)/W[0],re=(K[8]+1)/K[0],me=J*te,se=J*re,oe=z/(-te+re),be=oe*-te;N.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(be),U.translateZ(oe),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert();const Ae=J+oe,Ie=F+oe,Le=me-be,fe=se+(z-be),ve=ee*F/Ie*Ae,ke=ie*F/Ie*Ae;U.projectionMatrix.makePerspective(Le,fe,ve,ke,Ae,Ie)}function B(U,N){N===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(N.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(r===null)return;E.near=b.near=x.near=U.near,E.far=b.far=x.far=U.far,(A!==E.near||S!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,S=E.far);const N=U.parent,k=E.cameras;B(E,N);for(let W=0;W<k.length;W++)B(k[W],N);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),U.matrix.copy(E.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale);const z=U.children;for(let W=0,K=z.length;W<K;W++)z[W].updateMatrixWorld(!0);k.length===2?O(E,x,b):E.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(u!==null)return u.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(U){u!==null&&(u.fixedFoveation=U),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=U)};let $=null;function X(U,N){if(c=N.getViewerPose(l||o),f=N,c!==null){const k=c.views;h!==null&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let z=!1;k.length!==E.cameras.length&&(E.cameras.length=0,z=!0);for(let W=0;W<k.length;W++){const K=k[W];let J=null;if(h!==null)J=h.getViewport(K);else{const ee=d.getViewSubImage(u,K);J=ee.viewport,W===0&&(e.setRenderTargetTextures(g,ee.colorTexture,u.ignoreDepthValues?void 0:ee.depthStencilTexture),e.setRenderTarget(g))}let F=w[W];F===void 0&&(F=new vi,F.layers.enable(W),F.viewport=new An,w[W]=F),F.matrix.fromArray(K.transform.matrix),F.projectionMatrix.fromArray(K.projectionMatrix),F.viewport.set(J.x,J.y,J.width,J.height),W===0&&E.matrix.copy(F.matrix),z===!0&&E.cameras.push(F)}}for(let k=0;k<v.length;k++){const z=y[k],W=v[k];z!==null&&W!==void 0&&W.update(z,N,l||o)}$&&$(U,N),f=null}const H=new Gre;H.setAnimationLoop(X),this.setAnimationLoop=function(U){$=U},this.dispose=function(){}}}function MEe(t,e){function n(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),d(m,g)):g.isMeshPhongMaterial?(r(m,g),c(m,g)):g.isMeshStandardMaterial?(r(m,g),u(m,g),g.isMeshPhysicalMaterial&&h(m,g,x)):g.isMeshMatcapMaterial?(r(m,g),f(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),p(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&o(m,g)):g.isPointsMaterial?a(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Bs&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Bs&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=t.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function a(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function h(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Bs&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function AEe(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(35375):0;function l(y,x){const b=x.program;i.uniformBlockBinding(y,b)}function c(y,x){let b=r[y.id];b===void 0&&(p(y),b=d(y),r[y.id]=b,y.addEventListener("dispose",g));const w=x.program;i.updateUBOMapping(y,w);const E=e.render.frame;s[y.id]!==E&&(h(y),s[y.id]=E)}function d(y){const x=u();y.__bindingPointIndex=x;const b=t.createBuffer(),w=y.__size,E=y.usage;return t.bindBuffer(35345,b),t.bufferData(35345,w,E),t.bindBuffer(35345,null),t.bindBufferBase(35345,x,b),b}function u(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(y){const x=r[y.id],b=y.uniforms,w=y.__cache;t.bindBuffer(35345,x);for(let E=0,A=b.length;E<A;E++){const S=b[E];if(f(S,E,w)===!0){const C=S.value,T=S.__offset;typeof C=="number"?(S.__data[0]=C,t.bufferSubData(35345,T,S.__data)):(S.value.isMatrix3?(S.__data[0]=S.value.elements[0],S.__data[1]=S.value.elements[1],S.__data[2]=S.value.elements[2],S.__data[3]=S.value.elements[0],S.__data[4]=S.value.elements[3],S.__data[5]=S.value.elements[4],S.__data[6]=S.value.elements[5],S.__data[7]=S.value.elements[0],S.__data[8]=S.value.elements[6],S.__data[9]=S.value.elements[7],S.__data[10]=S.value.elements[8],S.__data[11]=S.value.elements[0]):C.toArray(S.__data),t.bufferSubData(35345,T,S.__data))}}t.bindBuffer(35345,null)}function f(y,x,b){const w=y.value;if(b[x]===void 0)return typeof w=="number"?b[x]=w:b[x]=w.clone(),!0;if(typeof w=="number"){if(b[x]!==w)return b[x]=w,!0}else{const E=b[x];if(E.equals(w)===!1)return E.copy(w),!0}return!1}function p(y){const x=y.uniforms;let b=0;const w=16;let E=0;for(let A=0,S=x.length;A<S;A++){const C=x[A],T=m(C);if(C.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=b,A>0){E=b%w;const P=w-E;E!==0&&P-T.boundary<0&&(b+=w-E,C.__offset=b)}b+=T.storage}return E=b%w,E>0&&(b+=w-E),y.__size=b,y.__cache={},this}function m(y){const x=y.value,b={boundary:0,storage:0};return typeof x=="number"?(b.boundary=4,b.storage=4):x.isVector2?(b.boundary=8,b.storage=8):x.isVector3||x.isColor?(b.boundary=16,b.storage=12):x.isVector4?(b.boundary=16,b.storage=16):x.isMatrix3?(b.boundary=48,b.storage=48):x.isMatrix4?(b.boundary=64,b.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),b}function g(y){const x=y.target;x.removeEventListener("dispose",g);const b=o.indexOf(x.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function v(){for(const y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}function TEe(){const t=e_("canvas");return t.style.display="block",t}function s5(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:TEe(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let d;n!==null?d=n.getContextAttributes().alpha:d=t.alpha!==void 0?t.alpha:!1;let u=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=hu,this.physicallyCorrectLights=!1,this.toneMapping=tc,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,v=0,y=0,x=null,b=-1,w=null;const E=new An,A=new An;let S=null,C=e.width,T=e.height,P=1,R=null,L=null;const O=new An(0,0,C,T),B=new An(0,0,C,T);let $=!1;const X=new sD;let H=!1,U=!1,N=null;const k=new Yt,z=new Ye,W=new de,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return x===null?P:1}let F=n;function ee(Y,ue){for(let ye=0;ye<Y.length;ye++){const ce=Y[ye],we=e.getContext(ce,ue);if(we!==null)return we}return null}try{const Y={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${JP}`),e.addEventListener("webglcontextlost",Ue,!1),e.addEventListener("webglcontextrestored",We,!1),e.addEventListener("webglcontextcreationerror",rt,!1),F===null){const ue=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&ue.shift(),F=ee(ue,Y),F===null)throw ee(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}F.getShaderPrecisionFormat===void 0&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let ie,te,re,me,se,oe,be,Ae,Ie,Le,fe,ve,ke,ze,j,V,le,xe,De,Ne,He,Pe,ae,Fe;function he(){ie=new j_e(F),te=new B_e(F,ie,t),ie.init(te),Pe=new Yre(F,ie,te),re=new wEe(F,ie,te),me=new q_e,se=new cEe,oe=new _Ee(F,ie,re,se,te,Pe,me),be=new F_e(m),Ae=new H_e(m),Ie=new tbe(F,te),ae=new k_e(F,ie,Ie,te),Le=new G_e(F,Ie,me,ae),fe=new K_e(F,Le,Ie,me),De=new Y_e(F,te,oe),V=new z_e(se),ve=new lEe(m,be,Ae,ie,te,ae,V),ke=new MEe(m,se),ze=new dEe,j=new vEe(ie,te),xe=new I_e(m,be,Ae,re,fe,d,o),le=new bEe(m,fe,te),Fe=new AEe(F,me,te,re),Ne=new N_e(F,ie,me,te),He=new W_e(F,ie,me,te),me.programs=ve.programs,m.capabilities=te,m.extensions=ie,m.properties=se,m.renderLists=ze,m.shadowMap=le,m.state=re,m.info=me}he();const Ce=new EEe(m,F);this.xr=Ce,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){const Y=ie.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=ie.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(Y){Y!==void 0&&(P=Y,this.setSize(C,T,!1))},this.getSize=function(Y){return Y.set(C,T)},this.setSize=function(Y,ue,ye){if(Ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=Y,T=ue,e.width=Math.floor(Y*P),e.height=Math.floor(ue*P),ye!==!1&&(e.style.width=Y+"px",e.style.height=ue+"px"),this.setViewport(0,0,Y,ue)},this.getDrawingBufferSize=function(Y){return Y.set(C*P,T*P).floor()},this.setDrawingBufferSize=function(Y,ue,ye){C=Y,T=ue,P=ye,e.width=Math.floor(Y*ye),e.height=Math.floor(ue*ye),this.setViewport(0,0,Y,ue)},this.getCurrentViewport=function(Y){return Y.copy(E)},this.getViewport=function(Y){return Y.copy(O)},this.setViewport=function(Y,ue,ye,ce){Y.isVector4?O.set(Y.x,Y.y,Y.z,Y.w):O.set(Y,ue,ye,ce),re.viewport(E.copy(O).multiplyScalar(P).floor())},this.getScissor=function(Y){return Y.copy(B)},this.setScissor=function(Y,ue,ye,ce){Y.isVector4?B.set(Y.x,Y.y,Y.z,Y.w):B.set(Y,ue,ye,ce),re.scissor(A.copy(B).multiplyScalar(P).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(Y){re.setScissorTest($=Y)},this.setOpaqueSort=function(Y){R=Y},this.setTransparentSort=function(Y){L=Y},this.getClearColor=function(Y){return Y.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(Y=!0,ue=!0,ye=!0){let ce=0;Y&&(ce|=16384),ue&&(ce|=256),ye&&(ce|=1024),F.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ue,!1),e.removeEventListener("webglcontextrestored",We,!1),e.removeEventListener("webglcontextcreationerror",rt,!1),ze.dispose(),j.dispose(),se.dispose(),be.dispose(),Ae.dispose(),fe.dispose(),ae.dispose(),Fe.dispose(),ve.dispose(),Ce.dispose(),Ce.removeEventListener("sessionstart",qe),Ce.removeEventListener("sessionend",Qe),N&&(N.dispose(),N=null),yt.stop()};function Ue(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function We(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const Y=me.autoReset,ue=le.enabled,ye=le.autoUpdate,ce=le.needsUpdate,we=le.type;he(),me.autoReset=Y,le.enabled=ue,le.autoUpdate=ye,le.needsUpdate=ce,le.type=we}function rt(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function wt(Y){const ue=Y.target;ue.removeEventListener("dispose",wt),$t(ue)}function $t(Y){ne(Y),se.remove(Y)}function ne(Y){const ue=se.get(Y).programs;ue!==void 0&&(ue.forEach(function(ye){ve.releaseProgram(ye)}),Y.isShaderMaterial&&ve.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,ue,ye,ce,we,Ze){ue===null&&(ue=K);const nt=we.isMesh&&we.matrixWorld.determinant()<0,lt=Vx(Y,ue,ye,ce,we);re.setMaterial(ce,nt);let ct=ye.index;const St=ye.attributes.position;if(ct===null){if(St===void 0||St.count===0)return}else if(ct.count===0)return;let ft=1;ce.wireframe===!0&&(ct=Le.getWireframeAttribute(ye),ft=2),ae.setup(we,ce,lt,ye,ct);let gt,on=Ne;ct!==null&&(gt=Ie.get(ct),on=He,on.setIndex(gt));const Ti=ct!==null?ct.count:St.count,Hr=ye.drawRange.start*ft,ms=ye.drawRange.count*ft,wn=Ze!==null?Ze.start*ft:0,pt=Ze!==null?Ze.count*ft:1/0,fo=Math.max(Hr,wn),Zn=Math.min(Ti,Hr+ms,wn+pt)-1,zi=Math.max(0,Zn-fo+1);if(zi!==0){if(we.isMesh)ce.wireframe===!0?(re.setLineWidth(ce.wireframeLinewidth*J()),on.setMode(1)):on.setMode(4);else if(we.isLine){let js=ce.linewidth;js===void 0&&(js=1),re.setLineWidth(js*J()),we.isLineSegments?on.setMode(1):we.isLineLoop?on.setMode(2):on.setMode(3)}else we.isPoints?on.setMode(0):we.isSprite&&on.setMode(4);if(we.isInstancedMesh)on.renderInstances(fo,zi,we.count);else if(ye.isInstancedBufferGeometry){const js=Math.min(ye.instanceCount,ye._maxInstanceCount);on.renderInstances(fo,zi,js)}else on.render(fo,zi)}},this.compile=function(Y,ue){function ye(ce,we,Ze){ce.transparent===!0&&ce.side===ql?(ce.side=Bs,ce.needsUpdate=!0,ii(ce,we,Ze),ce.side=Nf,ce.needsUpdate=!0,ii(ce,we,Ze),ce.side=ql):ii(ce,we,Ze)}h=j.get(Y),h.init(),p.push(h),Y.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ue.layers)&&(h.pushLight(ce),ce.castShadow&&h.pushShadow(ce))}),h.setupLights(m.physicallyCorrectLights),Y.traverse(function(ce){const we=ce.material;if(we)if(Array.isArray(we))for(let Ze=0;Ze<we.length;Ze++){const nt=we[Ze];ye(nt,Y,ce)}else ye(we,Y,ce)}),p.pop(),h=null};let ge=null;function Me(Y){ge&&ge(Y)}function qe(){yt.stop()}function Qe(){yt.start()}const yt=new Gre;yt.setAnimationLoop(Me),typeof self<"u"&&yt.setContext(self),this.setAnimationLoop=function(Y){ge=Y,Ce.setAnimationLoop(Y),Y===null?yt.stop():yt.start()},Ce.addEventListener("sessionstart",qe),Ce.addEventListener("sessionend",Qe),this.render=function(Y,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Ce.enabled===!0&&Ce.isPresenting===!0&&(Ce.cameraAutoUpdate===!0&&Ce.updateCamera(ue),ue=Ce.getCamera()),Y.isScene===!0&&Y.onBeforeRender(m,Y,ue,x),h=j.get(Y,p.length),h.init(),p.push(h),k.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),X.setFromProjectionMatrix(k),U=this.localClippingEnabled,H=V.init(this.clippingPlanes,U,ue),u=ze.get(Y,f.length),u.init(),f.push(u),un(Y,ue,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(R,L),H===!0&&V.beginShadows();const ye=h.state.shadowsArray;if(le.render(ye,Y,ue),H===!0&&V.endShadows(),this.info.autoReset===!0&&this.info.reset(),xe.render(u,Y),h.setupLights(m.physicallyCorrectLights),ue.isArrayCamera){const ce=ue.cameras;for(let we=0,Ze=ce.length;we<Ze;we++){const nt=ce[we];bn(u,Y,nt,nt.viewport)}}else bn(u,Y,ue);x!==null&&(oe.updateMultisampleRenderTarget(x),oe.updateRenderTargetMipmap(x)),Y.isScene===!0&&Y.onAfterRender(m,Y,ue),ae.resetDefaultState(),b=-1,w=null,p.pop(),p.length>0?h=p[p.length-1]:h=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function un(Y,ue,ye,ce){if(Y.visible===!1)return;if(Y.layers.test(ue.layers)){if(Y.isGroup)ye=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(ue);else if(Y.isLight)h.pushLight(Y),Y.castShadow&&h.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||X.intersectsSprite(Y)){ce&&W.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(k);const nt=fe.update(Y),lt=Y.material;lt.visible&&u.push(Y,nt,lt,ye,W.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(Y.isSkinnedMesh&&Y.skeleton.frame!==me.render.frame&&(Y.skeleton.update(),Y.skeleton.frame=me.render.frame),!Y.frustumCulled||X.intersectsObject(Y))){ce&&W.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(k);const nt=fe.update(Y),lt=Y.material;if(Array.isArray(lt)){const ct=nt.groups;for(let St=0,ft=ct.length;St<ft;St++){const gt=ct[St],on=lt[gt.materialIndex];on&&on.visible&&u.push(Y,nt,on,ye,W.z,gt)}}else lt.visible&&u.push(Y,nt,lt,ye,W.z,null)}}const Ze=Y.children;for(let nt=0,lt=Ze.length;nt<lt;nt++)un(Ze[nt],ue,ye,ce)}function bn(Y,ue,ye,ce){const we=Y.opaque,Ze=Y.transmissive,nt=Y.transparent;h.setupLightsView(ye),Ze.length>0&&Vr(we,ue,ye),ce&&re.viewport(E.copy(ce)),we.length>0&&It(we,ue,ye),Ze.length>0&&It(Ze,ue,ye),nt.length>0&&It(nt,ue,ye),re.buffers.depth.setTest(!0),re.buffers.depth.setMask(!0),re.buffers.color.setMask(!0),re.setPolygonOffset(!1)}function Vr(Y,ue,ye){const ce=te.isWebGL2;N===null&&(N=new ml(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?$l:Ld,minFilter:Gd,samples:ce&&s===!0?4:0})),m.getDrawingBufferSize(z),ce?N.setSize(z.x,z.y):N.setSize(BC(z.x),BC(z.y));const we=m.getRenderTarget();m.setRenderTarget(N),m.clear();const Ze=m.toneMapping;m.toneMapping=tc,It(Y,ue,ye),m.toneMapping=Ze,oe.updateMultisampleRenderTarget(N),oe.updateRenderTargetMipmap(N),m.setRenderTarget(we)}function It(Y,ue,ye){const ce=ue.isScene===!0?ue.overrideMaterial:null;for(let we=0,Ze=Y.length;we<Ze;we++){const nt=Y[we],lt=nt.object,ct=nt.geometry,St=ce===null?nt.material:ce,ft=nt.group;lt.layers.test(ye.layers)&&Bi(lt,ue,ye,ct,St,ft)}}function Bi(Y,ue,ye,ce,we,Ze){Y.onBeforeRender(m,ue,ye,ce,we,Ze),Y.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),we.onBeforeRender(m,ue,ye,ce,Y,Ze),we.transparent===!0&&we.side===ql?(we.side=Bs,we.needsUpdate=!0,m.renderBufferDirect(ye,ue,ce,we,Y,Ze),we.side=Nf,we.needsUpdate=!0,m.renderBufferDirect(ye,ue,ce,we,Y,Ze),we.side=ql):m.renderBufferDirect(ye,ue,ce,we,Y,Ze),Y.onAfterRender(m,ue,ye,ce,we,Ze)}function ii(Y,ue,ye){ue.isScene!==!0&&(ue=K);const ce=se.get(Y),we=h.state.lights,Ze=h.state.shadowsArray,nt=we.state.version,lt=ve.getParameters(Y,we.state,Ze,ue,ye),ct=ve.getProgramCacheKey(lt);let St=ce.programs;ce.environment=Y.isMeshStandardMaterial?ue.environment:null,ce.fog=ue.fog,ce.envMap=(Y.isMeshStandardMaterial?Ae:be).get(Y.envMap||ce.environment),St===void 0&&(Y.addEventListener("dispose",wt),St=new Map,ce.programs=St);let ft=St.get(ct);if(ft!==void 0){if(ce.currentProgram===ft&&ce.lightsStateVersion===nt)return ap(Y,lt),ft}else lt.uniforms=ve.getUniforms(Y),Y.onBuild(ye,lt,m),Y.onBeforeCompile(lt,m),ft=ve.acquireProgram(lt,ct),St.set(ct,ft),ce.uniforms=lt.uniforms;const gt=ce.uniforms;(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(gt.clippingPlanes=V.uniform),ap(Y,lt),ce.needsLights=lp(Y),ce.lightsStateVersion=nt,ce.needsLights&&(gt.ambientLightColor.value=we.state.ambient,gt.lightProbe.value=we.state.probe,gt.directionalLights.value=we.state.directional,gt.directionalLightShadows.value=we.state.directionalShadow,gt.spotLights.value=we.state.spot,gt.spotLightShadows.value=we.state.spotShadow,gt.rectAreaLights.value=we.state.rectArea,gt.ltc_1.value=we.state.rectAreaLTC1,gt.ltc_2.value=we.state.rectAreaLTC2,gt.pointLights.value=we.state.point,gt.pointLightShadows.value=we.state.pointShadow,gt.hemisphereLights.value=we.state.hemi,gt.directionalShadowMap.value=we.state.directionalShadowMap,gt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,gt.spotShadowMap.value=we.state.spotShadowMap,gt.spotLightMatrix.value=we.state.spotLightMatrix,gt.spotLightMap.value=we.state.spotLightMap,gt.pointShadowMap.value=we.state.pointShadowMap,gt.pointShadowMatrix.value=we.state.pointShadowMatrix);const on=ft.getUniforms(),Ti=kT.seqWithValue(on.seq,gt);return ce.currentProgram=ft,ce.uniformsList=Ti,ft}function ap(Y,ue){const ye=se.get(Y);ye.outputEncoding=ue.outputEncoding,ye.instancing=ue.instancing,ye.skinning=ue.skinning,ye.morphTargets=ue.morphTargets,ye.morphNormals=ue.morphNormals,ye.morphColors=ue.morphColors,ye.morphTargetsCount=ue.morphTargetsCount,ye.numClippingPlanes=ue.numClippingPlanes,ye.numIntersection=ue.numClipIntersection,ye.vertexAlphas=ue.vertexAlphas,ye.vertexTangents=ue.vertexTangents,ye.toneMapping=ue.toneMapping}function Vx(Y,ue,ye,ce,we){ue.isScene!==!0&&(ue=K),oe.resetTextureUnits();const Ze=ue.fog,nt=ce.isMeshStandardMaterial?ue.environment:null,lt=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:hu,ct=(ce.isMeshStandardMaterial?Ae:be).get(ce.envMap||nt),St=ce.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,ft=!!ce.normalMap&&!!ye.attributes.tangent,gt=!!ye.morphAttributes.position,on=!!ye.morphAttributes.normal,Ti=!!ye.morphAttributes.color,Hr=ce.toneMapped?m.toneMapping:tc,ms=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,wn=ms!==void 0?ms.length:0,pt=se.get(ce),fo=h.state.lights;if(H===!0&&(U===!0||Y!==w)){const Qt=Y===w&&ce.id===b;V.setState(ce,Y,Qt)}let Zn=!1;ce.version===pt.__version?(pt.needsLights&&pt.lightsStateVersion!==fo.state.version||pt.outputEncoding!==lt||we.isInstancedMesh&&pt.instancing===!1||!we.isInstancedMesh&&pt.instancing===!0||we.isSkinnedMesh&&pt.skinning===!1||!we.isSkinnedMesh&&pt.skinning===!0||pt.envMap!==ct||ce.fog===!0&&pt.fog!==Ze||pt.numClippingPlanes!==void 0&&(pt.numClippingPlanes!==V.numPlanes||pt.numIntersection!==V.numIntersection)||pt.vertexAlphas!==St||pt.vertexTangents!==ft||pt.morphTargets!==gt||pt.morphNormals!==on||pt.morphColors!==Ti||pt.toneMapping!==Hr||te.isWebGL2===!0&&pt.morphTargetsCount!==wn)&&(Zn=!0):(Zn=!0,pt.__version=ce.version);let zi=pt.currentProgram;Zn===!0&&(zi=ii(ce,ue,we));let js=!1,jr=!1,gs=!1;const Mt=zi.getUniforms(),rn=pt.uniforms;if(re.useProgram(zi.program)&&(js=!0,jr=!0,gs=!0),ce.id!==b&&(b=ce.id,jr=!0),js||w!==Y){if(Mt.setValue(F,"projectionMatrix",Y.projectionMatrix),te.logarithmicDepthBuffer&&Mt.setValue(F,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),w!==Y&&(w=Y,jr=!0,gs=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){const Qt=Mt.map.cameraPosition;Qt!==void 0&&Qt.setValue(F,W.setFromMatrixPosition(Y.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&Mt.setValue(F,"isOrthographic",Y.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||we.isSkinnedMesh)&&Mt.setValue(F,"viewMatrix",Y.matrixWorldInverse)}if(we.isSkinnedMesh){Mt.setOptional(F,we,"bindMatrix"),Mt.setOptional(F,we,"bindMatrixInverse");const Qt=we.skeleton;Qt&&(te.floatVertexTextures?(Qt.boneTexture===null&&Qt.computeBoneTexture(),Mt.setValue(F,"boneTexture",Qt.boneTexture,oe),Mt.setValue(F,"boneTextureSize",Qt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const vs=ye.morphAttributes;if((vs.position!==void 0||vs.normal!==void 0||vs.color!==void 0&&te.isWebGL2===!0)&&De.update(we,ye,ce,zi),(jr||pt.receiveShadow!==we.receiveShadow)&&(pt.receiveShadow=we.receiveShadow,Mt.setValue(F,"receiveShadow",we.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(rn.envMap.value=ct,rn.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),jr&&(Mt.setValue(F,"toneMappingExposure",m.toneMappingExposure),pt.needsLights&&Og(rn,gs),Ze&&ce.fog===!0&&ke.refreshFogUniforms(rn,Ze),ke.refreshMaterialUniforms(rn,ce,P,T,N),kT.upload(F,pt.uniformsList,rn,oe)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(kT.upload(F,pt.uniformsList,rn,oe),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&Mt.setValue(F,"center",we.center),Mt.setValue(F,"modelViewMatrix",we.modelViewMatrix),Mt.setValue(F,"normalMatrix",we.normalMatrix),Mt.setValue(F,"modelMatrix",we.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Qt=ce.uniformsGroups;for(let Fi=0,wl=Qt.length;Fi<wl;Fi++)if(te.isWebGL2){const Ta=Qt[Fi];Fe.update(Ta,zi),Fe.bind(Ta,zi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return zi}function Og(Y,ue){Y.ambientLightColor.needsUpdate=ue,Y.lightProbe.needsUpdate=ue,Y.directionalLights.needsUpdate=ue,Y.directionalLightShadows.needsUpdate=ue,Y.pointLights.needsUpdate=ue,Y.pointLightShadows.needsUpdate=ue,Y.spotLights.needsUpdate=ue,Y.spotLightShadows.needsUpdate=ue,Y.rectAreaLights.needsUpdate=ue,Y.hemisphereLights.needsUpdate=ue}function lp(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(Y,ue,ye){se.get(Y.texture).__webglTexture=ue,se.get(Y.depthTexture).__webglTexture=ye;const ce=se.get(Y);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=ye===void 0,ce.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Y,ue){const ye=se.get(Y);ye.__webglFramebuffer=ue,ye.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(Y,ue=0,ye=0){x=Y,v=ue,y=ye;let ce=!0,we=null,Ze=!1,nt=!1;if(Y){const ct=se.get(Y);ct.__useDefaultFramebuffer!==void 0?(re.bindFramebuffer(36160,null),ce=!1):ct.__webglFramebuffer===void 0?oe.setupRenderTarget(Y):ct.__hasExternalTextures&&oe.rebindTextures(Y,se.get(Y.texture).__webglTexture,se.get(Y.depthTexture).__webglTexture);const St=Y.texture;(St.isData3DTexture||St.isDataArrayTexture||St.isCompressedArrayTexture)&&(nt=!0);const ft=se.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(we=ft[ue],Ze=!0):te.isWebGL2&&Y.samples>0&&oe.useMultisampledRTT(Y)===!1?we=se.get(Y).__webglMultisampledFramebuffer:we=ft,E.copy(Y.viewport),A.copy(Y.scissor),S=Y.scissorTest}else E.copy(O).multiplyScalar(P).floor(),A.copy(B).multiplyScalar(P).floor(),S=$;if(re.bindFramebuffer(36160,we)&&te.drawBuffers&&ce&&re.drawBuffers(Y,we),re.viewport(E),re.scissor(A),re.setScissorTest(S),Ze){const ct=se.get(Y.texture);F.framebufferTexture2D(36160,36064,34069+ue,ct.__webglTexture,ye)}else if(nt){const ct=se.get(Y.texture),St=ue||0;F.framebufferTextureLayer(36160,36064,ct.__webglTexture,ye||0,St)}b=-1},this.readRenderTargetPixels=function(Y,ue,ye,ce,we,Ze,nt){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=se.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&nt!==void 0&&(lt=lt[nt]),lt){re.bindFramebuffer(36160,lt);try{const ct=Y.texture,St=ct.format,ft=ct.type;if(St!==So&&Pe.convert(St)!==F.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=ft===$l&&(ie.has("EXT_color_buffer_half_float")||te.isWebGL2&&ie.has("EXT_color_buffer_float"));if(ft!==Ld&&Pe.convert(ft)!==F.getParameter(35738)&&!(ft===rl&&(te.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=Y.width-ce&&ye>=0&&ye<=Y.height-we&&F.readPixels(ue,ye,ce,we,Pe.convert(St),Pe.convert(ft),Ze)}finally{const ct=x!==null?se.get(x).__webglFramebuffer:null;re.bindFramebuffer(36160,ct)}}},this.copyFramebufferToTexture=function(Y,ue,ye=0){const ce=Math.pow(2,-ye),we=Math.floor(ue.image.width*ce),Ze=Math.floor(ue.image.height*ce);oe.setTexture2D(ue,0),F.copyTexSubImage2D(3553,ye,0,0,Y.x,Y.y,we,Ze),re.unbindTexture()},this.copyTextureToTexture=function(Y,ue,ye,ce=0){const we=ue.image.width,Ze=ue.image.height,nt=Pe.convert(ye.format),lt=Pe.convert(ye.type);oe.setTexture2D(ye,0),F.pixelStorei(37440,ye.flipY),F.pixelStorei(37441,ye.premultiplyAlpha),F.pixelStorei(3317,ye.unpackAlignment),ue.isDataTexture?F.texSubImage2D(3553,ce,Y.x,Y.y,we,Ze,nt,lt,ue.image.data):ue.isCompressedTexture?F.compressedTexSubImage2D(3553,ce,Y.x,Y.y,ue.mipmaps[0].width,ue.mipmaps[0].height,nt,ue.mipmaps[0].data):F.texSubImage2D(3553,ce,Y.x,Y.y,nt,lt,ue.image),ce===0&&ye.generateMipmaps&&F.generateMipmap(3553),re.unbindTexture()},this.copyTextureToTexture3D=function(Y,ue,ye,ce,we=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ze=Y.max.x-Y.min.x+1,nt=Y.max.y-Y.min.y+1,lt=Y.max.z-Y.min.z+1,ct=Pe.convert(ce.format),St=Pe.convert(ce.type);let ft;if(ce.isData3DTexture)oe.setTexture3D(ce,0),ft=32879;else if(ce.isDataArrayTexture)oe.setTexture2DArray(ce,0),ft=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}F.pixelStorei(37440,ce.flipY),F.pixelStorei(37441,ce.premultiplyAlpha),F.pixelStorei(3317,ce.unpackAlignment);const gt=F.getParameter(3314),on=F.getParameter(32878),Ti=F.getParameter(3316),Hr=F.getParameter(3315),ms=F.getParameter(32877),wn=ye.isCompressedTexture?ye.mipmaps[0]:ye.image;F.pixelStorei(3314,wn.width),F.pixelStorei(32878,wn.height),F.pixelStorei(3316,Y.min.x),F.pixelStorei(3315,Y.min.y),F.pixelStorei(32877,Y.min.z),ye.isDataTexture||ye.isData3DTexture?F.texSubImage3D(ft,we,ue.x,ue.y,ue.z,Ze,nt,lt,ct,St,wn.data):ye.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),F.compressedTexSubImage3D(ft,we,ue.x,ue.y,ue.z,Ze,nt,lt,ct,wn.data)):F.texSubImage3D(ft,we,ue.x,ue.y,ue.z,Ze,nt,lt,ct,St,wn),F.pixelStorei(3314,gt),F.pixelStorei(32878,on),F.pixelStorei(3316,Ti),F.pixelStorei(3315,Hr),F.pixelStorei(32877,ms),we===0&&ce.generateMipmaps&&F.generateMipmap(ft),re.unbindTexture()},this.initTexture=function(Y){Y.isCubeTexture?oe.setTextureCube(Y,0):Y.isData3DTexture?oe.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?oe.setTexture2DArray(Y,0):oe.setTexture2D(Y,0),re.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,re.reset(),ae.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Qre extends s5{}Qre.prototype.isWebGL1Renderer=!0;class aD{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new at(e),this.density=n}clone(){return new aD(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class lD{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new at(e),this.near=n,this.far=i}clone(){return new lD(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class t_ extends Mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.backgroundBlurriness=this.backgroundBlurriness),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class tS{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Qw,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ma()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ma()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ma()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qs=new de;class Ff{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)qs.fromBufferAttribute(this,n),qs.applyMatrix4(e),this.setXYZ(n,qs.x,qs.y,qs.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)qs.fromBufferAttribute(this,n),qs.applyNormalMatrix(e),this.setXYZ(n,qs.x,qs.y,qs.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)qs.fromBufferAttribute(this,n),qs.transformDirection(e),this.setXYZ(n,qs.x,qs.y,qs.z);return this}setX(e,n){return this.normalized&&(n=si(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=si(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=si(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=si(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=cd(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=cd(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=cd(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=cd(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=si(n,this.array),i=si(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=si(n,this.array),i=si(i,this.array),r=si(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=si(n,this.array),i=si(i,this.array),r=si(r,this.array),s=si(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new Wn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ff(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class o5 extends xr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ov;const x1=new de,av=new de,lv=new de,cv=new Ye,b1=new Ye,Jre=new Yt,_M=new de,w1=new de,SM=new de,V8=new Ye,JO=new Ye,H8=new Ye;class ese extends Mn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",ov===void 0){ov=new cn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new tS(n,5);ov.setIndex([0,1,2,0,2,3]),ov.setAttribute("position",new Ff(i,3,0,!1)),ov.setAttribute("uv",new Ff(i,2,3,!1))}this.geometry=ov,this.material=e!==void 0?e:new o5,this.center=new Ye(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),av.setFromMatrixScale(this.matrixWorld),Jre.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),lv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&av.multiplyScalar(-lv.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;EM(_M.set(-.5,-.5,0),lv,o,av,r,s),EM(w1.set(.5,-.5,0),lv,o,av,r,s),EM(SM.set(.5,.5,0),lv,o,av,r,s),V8.set(0,0),JO.set(1,0),H8.set(1,1);let a=e.ray.intersectTriangle(_M,w1,SM,!1,x1);if(a===null&&(EM(w1.set(-.5,.5,0),lv,o,av,r,s),JO.set(0,1),a=e.ray.intersectTriangle(_M,SM,w1,!1,x1),a===null))return;const l=e.ray.origin.distanceTo(x1);l<e.near||l>e.far||n.push({distance:l,point:x1.clone(),uv:nl.getUV(x1,_M,w1,SM,V8,JO,H8,new Ye),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function EM(t,e,n,i,r,s){cv.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(b1.x=s*cv.x-r*cv.y,b1.y=r*cv.x+s*cv.y):b1.copy(cv),t.copy(e),t.x+=b1.x,t.y+=b1.y,t.applyMatrix4(Jre)}const MM=new de,j8=new de;class tse extends Mn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const i=this.levels;let r;for(r=0;r<i.length&&!(n<i[r].distance);r++);return i.splice(r,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r&&!(e<n[i].distance);i++);return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){MM.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(MM);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){MM.setFromMatrixPosition(e.matrixWorld),j8.setFromMatrixPosition(this.matrixWorld);const i=MM.distanceTo(j8)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance})}return n}}const G8=new de,W8=new An,q8=new An,CEe=new de,$8=new Yt;class a5 extends Lr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Yt,this.bindMatrixInverse=new Yt}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new An,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const i=this.skeleton,r=this.geometry;W8.fromBufferAttribute(r.attributes.skinIndex,e),q8.fromBufferAttribute(r.attributes.skinWeight,e),G8.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=q8.getComponent(s);if(o!==0){const a=W8.getComponent(s);$8.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(CEe.copy(G8).applyMatrix4($8),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class cD extends Mn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class G0 extends Yi{constructor(e=null,n=1,i=1,r,s,o,a,l,c=ir,d=ir,u,h){super(null,o,a,l,c,d,r,s,u,h),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const X8=new Yt,PEe=new Yt;class nS{constructor(e=[],n=[]){this.uuid=ma(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Yt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:PEe;X8.multiplyMatrices(a,n[s]),X8.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new nS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=zre(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new G0(n,e,e,So,rl);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new cD),this.bones.push(o),this.boneInverses.push(new Yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class My extends Wn{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Y8=new Yt,K8=new Yt,AM=[],DEe=new Yt,_1=new Lr;class l5 extends Lr{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new My(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,DEe)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(_1.geometry=this.geometry,_1.material=this.material,_1.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,Y8),K8.multiplyMatrices(i,Y8),_1.matrixWorld=K8,_1.raycast(e,AM);for(let o=0,a=AM.length;o<a;o++){const l=AM[o];l.instanceId=s,l.object=this,n.push(l)}AM.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new My(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Hs extends xr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new at(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Z8=new de,Q8=new de,J8=new Yt,eL=new Q_,TM=new Jf;class Id extends Mn{constructor(e=new cn,n=new Hs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)Z8.fromBufferAttribute(n,r-1),Q8.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=Z8.distanceTo(Q8);e.setAttribute("lineDistance",new Et(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),TM.copy(i.boundingSphere),TM.applyMatrix4(r),TM.radius+=s,e.ray.intersectsSphere(TM)===!1)return;J8.copy(r).invert(),eL.copy(e.ray).applyMatrix4(J8);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new de,d=new de,u=new de,h=new de,f=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(p!==null){const v=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let x=v,b=y-1;x<b;x+=f){const w=p.getX(x),E=p.getX(x+1);if(c.fromBufferAttribute(g,w),d.fromBufferAttribute(g,E),eL.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||n.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let x=v,b=y-1;x<b;x+=f){if(c.fromBufferAttribute(g,x),d.fromBufferAttribute(g,x+1),eL.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(h);E<e.near||E>e.far||n.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const e9=new de,t9=new de;class cc extends Id{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)e9.fromBufferAttribute(n,r),t9.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+e9.distanceTo(t9);e.setAttribute("lineDistance",new Et(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class c5 extends Id{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class uD extends xr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const n9=new Yt,qB=new Q_,CM=new Jf,PM=new de;class u5 extends Mn{constructor(e=new cn,n=new uD){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),CM.copy(i.boundingSphere),CM.applyMatrix4(r),CM.radius+=s,e.ray.intersectsSphere(CM)===!1)return;n9.copy(r).invert(),qB.copy(e.ray).applyMatrix4(n9);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){const h=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let p=h,m=f;p<m;p++){const g=c.getX(p);PM.fromBufferAttribute(u,g),i9(PM,g,l,r,e,n,this)}}else{const h=Math.max(0,o.start),f=Math.min(u.count,o.start+o.count);for(let p=h,m=f;p<m;p++)PM.fromBufferAttribute(u,p),i9(PM,p,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function i9(t,e,n,i,r,s,o){const a=qB.distanceSqToPoint(t);if(a<n){const l=new de;qB.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class REe extends Yi{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:gi,this.magFilter=s!==void 0?s:gi,this.generateMipmaps=!1;const d=this;function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class OEe extends Yi{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=ir,this.minFilter=ir,this.generateMipmaps=!1,this.needsUpdate=!0}}class d5 extends Yi{constructor(e,n,i,r,s,o,a,l,c,d,u,h){super(null,o,a,l,c,d,r,s,u,h),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class LEe extends d5{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=as}}class IEe extends Yi{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class uc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const d=i[r],h=i[r+1]-d,f=(o-d)/h;return(r+f)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new Ye:new de);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new de,r=[],s=[],o=[],a=new de,l=new Yt;for(let f=0;f<=e;f++){const p=f/e;r[f]=this.getTangentAt(p,new de)}s[0]=new de,o[0]=new de;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=c&&(c=d,i.set(1,0,0)),u<=c&&(c=u,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(rr(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(n===!0){let f=Math.acos(rr(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class dD extends uc{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new Ye,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*d-f*u+this.aX,c=h*u+f*d+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class nse extends dD{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function h5(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,f=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,f*=d,r(o,a,h,f)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const DM=new de,tL=new h5,nL=new h5,iL=new h5;class ise extends uc{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new de){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=r[(a-1)%s]:(DM.subVectors(r[0],r[1]).add(r[0]),c=DM);const u=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(DM.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=DM),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(u),f),m=Math.pow(u.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(d),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),tL.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,p,m,g),nL.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,p,m,g),iL.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,p,m,g)}else this.curveType==="catmullrom"&&(tL.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),nL.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),iL.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return i.set(tL.calc(l),nL.calc(l),iL.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new de().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r9(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function kEe(t,e){const n=1-t;return n*n*e}function NEe(t,e){return 2*(1-t)*t*e}function BEe(t,e){return t*t*e}function Qb(t,e,n,i){return kEe(t,e)+NEe(t,n)+BEe(t,i)}function zEe(t,e){const n=1-t;return n*n*n*e}function FEe(t,e){const n=1-t;return 3*n*n*t*e}function UEe(t,e){return 3*(1-t)*t*t*e}function VEe(t,e){return t*t*t*e}function Jb(t,e,n,i,r){return zEe(t,e)+FEe(t,n)+UEe(t,i)+VEe(t,r)}class f5 extends uc{constructor(e=new Ye,n=new Ye,i=new Ye,r=new Ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Ye){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Jb(e,r.x,s.x,o.x,a.x),Jb(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rse extends uc{constructor(e=new de,n=new de,i=new de,r=new de){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new de){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Jb(e,r.x,s.x,o.x,a.x),Jb(e,r.y,s.y,o.y,a.y),Jb(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hD extends uc{constructor(e=new Ye,n=new Ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ye){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const i=n||new Ye;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sse extends uc{constructor(e=new de,n=new de){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new de){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class p5 extends uc{constructor(e=new Ye,n=new Ye,i=new Ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Ye){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Qb(e,r.x,s.x,o.x),Qb(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m5 extends uc{constructor(e=new de,n=new de,i=new de){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new de){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Qb(e,r.x,s.x,o.x),Qb(e,r.y,s.y,o.y),Qb(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g5 extends uc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ye){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return i.set(r9(a,l.x,c.x,d.x,u.x),r9(a,l.y,c.y,d.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Ye().fromArray(r))}return this}}var v5=Object.freeze({__proto__:null,ArcCurve:nse,CatmullRomCurve3:ise,CubicBezierCurve:f5,CubicBezierCurve3:rse,EllipseCurve:dD,LineCurve:hD,LineCurve3:sse,QuadraticBezierCurve:p5,QuadraticBezierCurve3:m5,SplineCurve:g5});class ose extends uc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new hD(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];i&&i.equals(d)||(n.push(d),i=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new v5[r.type]().fromJSON(r))}return this}}class n_ extends ose{constructor(e){super(),this.type="Path",this.currentPoint=new Ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new hD(this.currentPoint.clone(),new Ye(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new p5(this.currentPoint.clone(),new Ye(e,n),new Ye(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new f5(this.currentPoint.clone(),new Ye(e,n),new Ye(i,r),new Ye(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new g5(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,n+d,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const c=new dD(e,n,i,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ax extends cn{constructor(e=[new Ye(0,-.5),new Ye(.5,0),new Ye(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=rr(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/n,u=new de,h=new Ye,f=new de,p=new de,m=new de;let g=0,v=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:g=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,f.x=v*1,f.y=-g,f.z=v*0,m.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,f.x=v*1,f.y=-g,f.z=v*0,p.copy(f),f.x+=m.x,f.y+=m.y,f.z+=m.z,f.normalize(),l.push(f.x,f.y,f.z),m.copy(p)}for(let y=0;y<=n;y++){const x=i+y*d*r,b=Math.sin(x),w=Math.cos(x);for(let E=0;E<=e.length-1;E++){u.x=e[E].x*b,u.y=e[E].y,u.z=e[E].x*w,o.push(u.x,u.y,u.z),h.x=y/n,h.y=E/(e.length-1),a.push(h.x,h.y);const A=l[3*E+0]*b,S=l[3*E+1],C=l[3*E+0]*w;c.push(A,S,C)}}for(let y=0;y<n;y++)for(let x=0;x<e.length-1;x++){const b=x+y*e.length,w=b,E=b+e.length,A=b+e.length+1,S=b+1;s.push(w,E,S),s.push(A,S,E)}this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("uv",new Et(a,2)),this.setAttribute("normal",new Et(c,3))}static fromJSON(e){return new ax(e.points,e.segments,e.phiStart,e.phiLength)}}class iS extends ax{constructor(e=1,n=1,i=4,r=8){const s=new n_;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new iS(e.radius,e.length,e.capSegments,e.radialSegments)}}class rS extends cn{constructor(e=1,n=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new de,d=new Ye;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,h=3;u<=n;u++,h+=3){const f=i+u/n*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[h]/e+1)/2,d.y=(o[h+1]/e+1)/2,l.push(d.x,d.y)}for(let u=1;u<=n;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("normal",new Et(a,3)),this.setAttribute("uv",new Et(l,2))}static fromJSON(e){return new rS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class vg extends cn{constructor(e=1,n=1,i=1,r=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],u=[],h=[],f=[];let p=0;const m=[],g=i/2;let v=0;y(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(d),this.setAttribute("position",new Et(u,3)),this.setAttribute("normal",new Et(h,3)),this.setAttribute("uv",new Et(f,2));function y(){const b=new de,w=new de;let E=0;const A=(n-e)/i;for(let S=0;S<=s;S++){const C=[],T=S/s,P=T*(n-e)+e;for(let R=0;R<=r;R++){const L=R/r,O=L*l+a,B=Math.sin(O),$=Math.cos(O);w.x=P*B,w.y=-T*i+g,w.z=P*$,u.push(w.x,w.y,w.z),b.set(B,A,$).normalize(),h.push(b.x,b.y,b.z),f.push(L,1-T),C.push(p++)}m.push(C)}for(let S=0;S<r;S++)for(let C=0;C<s;C++){const T=m[C][S],P=m[C+1][S],R=m[C+1][S+1],L=m[C][S+1];d.push(T,P,L),d.push(P,R,L),E+=6}c.addGroup(v,E,0),v+=E}function x(b){const w=p,E=new Ye,A=new de;let S=0;const C=b===!0?e:n,T=b===!0?1:-1;for(let R=1;R<=r;R++)u.push(0,g*T,0),h.push(0,T,0),f.push(.5,.5),p++;const P=p;for(let R=0;R<=r;R++){const O=R/r*l+a,B=Math.cos(O),$=Math.sin(O);A.x=C*$,A.y=g*T,A.z=C*B,u.push(A.x,A.y,A.z),h.push(0,T,0),E.x=B*.5+.5,E.y=$*.5*T+.5,f.push(E.x,E.y),p++}for(let R=0;R<r;R++){const L=w+R,O=P+R;b===!0?d.push(O,O+1,L):d.push(O+1,O,L),S+=3}c.addGroup(v,S,b===!0?1:2),v+=S}}static fromJSON(e){return new vg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sS extends vg{constructor(e=1,n=1,i=8,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new sS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qd extends cn{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),c(i),d(),this.setAttribute("position",new Et(s,3)),this.setAttribute("normal",new Et(s.slice(),3)),this.setAttribute("uv",new Et(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const x=new de,b=new de,w=new de;for(let E=0;E<n.length;E+=3)f(n[E+0],x),f(n[E+1],b),f(n[E+2],w),l(x,b,w,y)}function l(y,x,b,w){const E=w+1,A=[];for(let S=0;S<=E;S++){A[S]=[];const C=y.clone().lerp(b,S/E),T=x.clone().lerp(b,S/E),P=E-S;for(let R=0;R<=P;R++)R===0&&S===E?A[S][R]=C:A[S][R]=C.clone().lerp(T,R/P)}for(let S=0;S<E;S++)for(let C=0;C<2*(E-S)-1;C++){const T=Math.floor(C/2);C%2===0?(h(A[S][T+1]),h(A[S+1][T]),h(A[S][T])):(h(A[S][T+1]),h(A[S+1][T+1]),h(A[S+1][T]))}}function c(y){const x=new de;for(let b=0;b<s.length;b+=3)x.x=s[b+0],x.y=s[b+1],x.z=s[b+2],x.normalize().multiplyScalar(y),s[b+0]=x.x,s[b+1]=x.y,s[b+2]=x.z}function d(){const y=new de;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const b=g(y)/2/Math.PI+.5,w=v(y)/Math.PI+.5;o.push(b,1-w)}p(),u()}function u(){for(let y=0;y<o.length;y+=6){const x=o[y+0],b=o[y+2],w=o[y+4],E=Math.max(x,b,w),A=Math.min(x,b,w);E>.9&&A<.1&&(x<.2&&(o[y+0]+=1),b<.2&&(o[y+2]+=1),w<.2&&(o[y+4]+=1))}}function h(y){s.push(y.x,y.y,y.z)}function f(y,x){const b=y*3;x.x=e[b+0],x.y=e[b+1],x.z=e[b+2]}function p(){const y=new de,x=new de,b=new de,w=new de,E=new Ye,A=new Ye,S=new Ye;for(let C=0,T=0;C<s.length;C+=9,T+=6){y.set(s[C+0],s[C+1],s[C+2]),x.set(s[C+3],s[C+4],s[C+5]),b.set(s[C+6],s[C+7],s[C+8]),E.set(o[T+0],o[T+1]),A.set(o[T+2],o[T+3]),S.set(o[T+4],o[T+5]),w.copy(y).add(x).add(b).divideScalar(3);const P=g(w);m(E,T+0,y,P),m(A,T+2,x,P),m(S,T+4,b,P)}}function m(y,x,b,w){w<0&&y.x===1&&(o[x]=y.x-1),b.x===0&&b.z===0&&(o[x]=w/2/Math.PI+.5)}function g(y){return Math.atan2(y.z,-y.x)}function v(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new qd(e.vertices,e.indices,e.radius,e.details)}}class oS extends qd{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new oS(e.radius,e.detail)}}const RM=new de,OM=new de,rL=new de,LM=new nl;class ase extends cn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Pm*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:g,c:v}=LM;if(m.fromBufferAttribute(a,c[0]),g.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),LM.getNormal(rL),u[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,u[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let y=0;y<3;y++){const x=(y+1)%3,b=u[y],w=u[x],E=LM[d[y]],A=LM[d[x]],S=`${b}_${w}`,C=`${w}_${b}`;C in h&&h[C]?(rL.dot(h[C].normal)<=s&&(f.push(E.x,E.y,E.z),f.push(A.x,A.y,A.z)),h[C]=null):S in h||(h[S]={index0:c[y],index1:c[x],normal:rL.clone()})}}for(const p in h)if(h[p]){const{index0:m,index1:g}=h[p];RM.fromBufferAttribute(a,m),OM.fromBufferAttribute(a,g),f.push(RM.x,RM.y,RM.z),f.push(OM.x,OM.y,OM.z)}this.setAttribute("position",new Et(f,3))}}}class Om extends n_{constructor(e){super(e),this.uuid=ma(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new n_().fromJSON(r))}return this}}const HEe={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=lse(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,u,h,f;if(i&&(s=$Ee(t,e,s,n)),t.length>80*n){a=c=t[0],l=d=t[1];for(let p=n;p<r;p+=n)u=t[p],h=t[p+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=f!==0?32767/f:0}return i_(s,o,n,a,l,f,0),o}};function lse(t,e,n,i,r){let s,o;if(r===rMe(t,e,n,i)>0)for(s=e;s<n;s+=i)o=s9(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=s9(s,t[s],t[s+1],o);return o&&fD(o,o.next)&&(s_(o),o=o.next),o}function Jm(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(fD(n,n.next)||Ri(n.prev,n,n.next)===0)){if(s_(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function i_(t,e,n,i,r,s,o){if(!t)return;!o&&s&&QEe(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?GEe(t,i,r,s):jEe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),s_(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=WEe(Jm(t),e,n),i_(t,e,n,i,r,s,2)):o===2&&qEe(t,e,n,i,r,s):i_(Jm(t),e,n,i,r,s,1);break}}}function jEe(t){const e=t.prev,n=t,i=t.next;if(Ri(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,d=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let p=i.next;for(;p!==e;){if(p.x>=d&&p.x<=h&&p.y>=u&&p.y<=f&&w0(r,a,s,l,o,c,p.x,p.y)&&Ri(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function GEe(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Ri(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,d=r.y,u=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=d<u?d<h?d:h:u<h?u:h,m=a>l?a>c?a:c:l>c?l:c,g=d>u?d>h?d:h:u>h?u:h,v=$B(f,p,e,n,i),y=$B(m,g,e,n,i);let x=t.prevZ,b=t.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&w0(a,d,l,u,c,h,x.x,x.y)&&Ri(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&w0(a,d,l,u,c,h,b.x,b.y)&&Ri(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&w0(a,d,l,u,c,h,x.x,x.y)&&Ri(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&w0(a,d,l,u,c,h,b.x,b.y)&&Ri(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function WEe(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!fD(r,s)&&cse(r,i,i.next,s)&&r_(r,s)&&r_(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),s_(i),s_(i.next),i=t=s),i=i.next}while(i!==t);return Jm(i)}function qEe(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&tMe(o,a)){let l=use(o,a);o=Jm(o,o.next),l=Jm(l,l.next),i_(o,e,n,i,r,s,0),i_(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function $Ee(t,e,n,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=lse(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(eMe(c));for(r.sort(XEe),s=0;s<r.length;s++)n=YEe(r[s],n);return n}function XEe(t,e){return t.x-e.x}function YEe(t,e){const n=KEe(t,e);if(!n)return e;const i=use(n,t);return Jm(i,i.next),Jm(n,n.next)}function KEe(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>i&&(i=h,r=n.x<n.next.x?n:n.next,h===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let d=1/0,u;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&w0(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(s-n.x),r_(n,t)&&(u<d||u===d&&(n.x>r.x||n.x===r.x&&ZEe(r,n)))&&(r=n,d=u)),n=n.next;while(n!==a);return r}function ZEe(t,e){return Ri(t.prev,t,e.prev)<0&&Ri(e.next,t,t.next)<0}function QEe(t,e,n,i){let r=t;do r.z===0&&(r.z=$B(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,JEe(r)}function JEe(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function $B(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function eMe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function w0(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function tMe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!nMe(t,e)&&(r_(t,e)&&r_(e,t)&&iMe(t,e)&&(Ri(t.prev,t,e.prev)||Ri(t,e.prev,e))||fD(t,e)&&Ri(t.prev,t,t.next)>0&&Ri(e.prev,e,e.next)>0)}function Ri(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function fD(t,e){return t.x===e.x&&t.y===e.y}function cse(t,e,n,i){const r=kM(Ri(t,e,n)),s=kM(Ri(t,e,i)),o=kM(Ri(n,i,t)),a=kM(Ri(n,i,e));return!!(r!==s&&o!==a||r===0&&IM(t,n,e)||s===0&&IM(t,i,e)||o===0&&IM(n,t,i)||a===0&&IM(n,e,i))}function IM(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function kM(t){return t>0?1:t<0?-1:0}function nMe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&cse(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function r_(t,e){return Ri(t.prev,t,t.next)<0?Ri(t,e,t.next)>=0&&Ri(t,t.prev,e)>=0:Ri(t,e,t.prev)<0||Ri(t,t.next,e)<0}function iMe(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function use(t,e){const n=new XB(t.i,t.x,t.y),i=new XB(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function s9(t,e,n,i){const r=new XB(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function s_(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function XB(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rMe(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class ru{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ru.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];o9(e),a9(i,e);let o=e.length;n.forEach(o9);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,a9(i,n[l]);const a=HEe.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function o9(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function a9(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class aS extends cn{constructor(e=new Om([new Ye(.5,.5),new Ye(-.5,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Et(r,3)),this.setAttribute("uv",new Et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,u=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:f-.1,m=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:sMe;let x,b=!1,w,E,A,S;v&&(x=v.getSpacedPoints(d),b=!0,h=!1,w=v.computeFrenetFrames(d,!1),E=new de,A=new de,S=new de),h||(g=0,f=0,p=0,m=0);const C=a.extractPoints(c);let T=C.shape;const P=C.holes;if(!ru.isClockWise(T)){T=T.reverse();for(let se=0,oe=P.length;se<oe;se++){const be=P[se];ru.isClockWise(be)&&(P[se]=be.reverse())}}const L=ru.triangulateShape(T,P),O=T;for(let se=0,oe=P.length;se<oe;se++){const be=P[se];T=T.concat(be)}function B(se,oe,be){return oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().multiplyScalar(be).add(se)}const $=T.length,X=L.length;function H(se,oe,be){let Ae,Ie,Le;const fe=se.x-oe.x,ve=se.y-oe.y,ke=be.x-se.x,ze=be.y-se.y,j=fe*fe+ve*ve,V=fe*ze-ve*ke;if(Math.abs(V)>Number.EPSILON){const le=Math.sqrt(j),xe=Math.sqrt(ke*ke+ze*ze),De=oe.x-ve/le,Ne=oe.y+fe/le,He=be.x-ze/xe,Pe=be.y+ke/xe,ae=((He-De)*ze-(Pe-Ne)*ke)/(fe*ze-ve*ke);Ae=De+fe*ae-se.x,Ie=Ne+ve*ae-se.y;const Fe=Ae*Ae+Ie*Ie;if(Fe<=2)return new Ye(Ae,Ie);Le=Math.sqrt(Fe/2)}else{let le=!1;fe>Number.EPSILON?ke>Number.EPSILON&&(le=!0):fe<-Number.EPSILON?ke<-Number.EPSILON&&(le=!0):Math.sign(ve)===Math.sign(ze)&&(le=!0),le?(Ae=-ve,Ie=fe,Le=Math.sqrt(j)):(Ae=fe,Ie=ve,Le=Math.sqrt(j/2))}return new Ye(Ae/Le,Ie/Le)}const U=[];for(let se=0,oe=O.length,be=oe-1,Ae=se+1;se<oe;se++,be++,Ae++)be===oe&&(be=0),Ae===oe&&(Ae=0),U[se]=H(O[se],O[be],O[Ae]);const N=[];let k,z=U.concat();for(let se=0,oe=P.length;se<oe;se++){const be=P[se];k=[];for(let Ae=0,Ie=be.length,Le=Ie-1,fe=Ae+1;Ae<Ie;Ae++,Le++,fe++)Le===Ie&&(Le=0),fe===Ie&&(fe=0),k[Ae]=H(be[Ae],be[Le],be[fe]);N.push(k),z=z.concat(k)}for(let se=0;se<g;se++){const oe=se/g,be=f*Math.cos(oe*Math.PI/2),Ae=p*Math.sin(oe*Math.PI/2)+m;for(let Ie=0,Le=O.length;Ie<Le;Ie++){const fe=B(O[Ie],U[Ie],Ae);ee(fe.x,fe.y,-be)}for(let Ie=0,Le=P.length;Ie<Le;Ie++){const fe=P[Ie];k=N[Ie];for(let ve=0,ke=fe.length;ve<ke;ve++){const ze=B(fe[ve],k[ve],Ae);ee(ze.x,ze.y,-be)}}}const W=p+m;for(let se=0;se<$;se++){const oe=h?B(T[se],z[se],W):T[se];b?(A.copy(w.normals[0]).multiplyScalar(oe.x),E.copy(w.binormals[0]).multiplyScalar(oe.y),S.copy(x[0]).add(A).add(E),ee(S.x,S.y,S.z)):ee(oe.x,oe.y,0)}for(let se=1;se<=d;se++)for(let oe=0;oe<$;oe++){const be=h?B(T[oe],z[oe],W):T[oe];b?(A.copy(w.normals[se]).multiplyScalar(be.x),E.copy(w.binormals[se]).multiplyScalar(be.y),S.copy(x[se]).add(A).add(E),ee(S.x,S.y,S.z)):ee(be.x,be.y,u/d*se)}for(let se=g-1;se>=0;se--){const oe=se/g,be=f*Math.cos(oe*Math.PI/2),Ae=p*Math.sin(oe*Math.PI/2)+m;for(let Ie=0,Le=O.length;Ie<Le;Ie++){const fe=B(O[Ie],U[Ie],Ae);ee(fe.x,fe.y,u+be)}for(let Ie=0,Le=P.length;Ie<Le;Ie++){const fe=P[Ie];k=N[Ie];for(let ve=0,ke=fe.length;ve<ke;ve++){const ze=B(fe[ve],k[ve],Ae);b?ee(ze.x,ze.y+x[d-1].y,x[d-1].x+be):ee(ze.x,ze.y,u+be)}}}K(),J();function K(){const se=r.length/3;if(h){let oe=0,be=$*oe;for(let Ae=0;Ae<X;Ae++){const Ie=L[Ae];ie(Ie[2]+be,Ie[1]+be,Ie[0]+be)}oe=d+g*2,be=$*oe;for(let Ae=0;Ae<X;Ae++){const Ie=L[Ae];ie(Ie[0]+be,Ie[1]+be,Ie[2]+be)}}else{for(let oe=0;oe<X;oe++){const be=L[oe];ie(be[2],be[1],be[0])}for(let oe=0;oe<X;oe++){const be=L[oe];ie(be[0]+$*d,be[1]+$*d,be[2]+$*d)}}i.addGroup(se,r.length/3-se,0)}function J(){const se=r.length/3;let oe=0;F(O,oe),oe+=O.length;for(let be=0,Ae=P.length;be<Ae;be++){const Ie=P[be];F(Ie,oe),oe+=Ie.length}i.addGroup(se,r.length/3-se,1)}function F(se,oe){let be=se.length;for(;--be>=0;){const Ae=be;let Ie=be-1;Ie<0&&(Ie=se.length-1);for(let Le=0,fe=d+g*2;Le<fe;Le++){const ve=$*Le,ke=$*(Le+1),ze=oe+Ae+ve,j=oe+Ie+ve,V=oe+Ie+ke,le=oe+Ae+ke;te(ze,j,V,le)}}}function ee(se,oe,be){l.push(se),l.push(oe),l.push(be)}function ie(se,oe,be){re(se),re(oe),re(be);const Ae=r.length/3,Ie=y.generateTopUV(i,r,Ae-3,Ae-2,Ae-1);me(Ie[0]),me(Ie[1]),me(Ie[2])}function te(se,oe,be,Ae){re(se),re(oe),re(Ae),re(oe),re(be),re(Ae);const Ie=r.length/3,Le=y.generateSideWallUV(i,r,Ie-6,Ie-3,Ie-2,Ie-1);me(Le[0]),me(Le[1]),me(Le[3]),me(Le[1]),me(Le[2]),me(Le[3])}function re(se){r.push(l[se*3+0]),r.push(l[se*3+1]),r.push(l[se*3+2])}function me(se){s.push(se.x),s.push(se.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return oMe(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new v5[r.type]().fromJSON(r)),new aS(i,e.options)}}const sMe={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new Ye(s,o),new Ye(a,l),new Ye(c,d)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],d=e[i*3+1],u=e[i*3+2],h=e[r*3],f=e[r*3+1],p=e[r*3+2],m=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new Ye(o,1-l),new Ye(c,1-u),new Ye(h,1-p),new Ye(m,1-v)]:[new Ye(a,1-l),new Ye(d,1-u),new Ye(f,1-p),new Ye(g,1-v)]}};function oMe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class lx extends qd{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new lx(e.radius,e.detail)}}class cx extends qd{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new cx(e.radius,e.detail)}}class lS extends cn{constructor(e=.5,n=1,i=8,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],d=[];let u=e;const h=(n-e)/r,f=new de,p=new Ye;for(let m=0;m<=r;m++){for(let g=0;g<=i;g++){const v=s+g/i*o;f.x=u*Math.cos(v),f.y=u*Math.sin(v),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/n+1)/2,p.y=(f.y/n+1)/2,d.push(p.x,p.y)}u+=h}for(let m=0;m<r;m++){const g=m*(i+1);for(let v=0;v<i;v++){const y=v+g,x=y,b=y+i+1,w=y+i+2,E=y+1;a.push(x,b,E),a.push(b,w,E)}}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(d,2))}static fromJSON(e){return new lS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cS extends cn{constructor(e=new Om([new Ye(0,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Et(r,3)),this.setAttribute("normal",new Et(s,3)),this.setAttribute("uv",new Et(o,2));function c(d){const u=r.length/3,h=d.extractPoints(n);let f=h.shape;const p=h.holes;ru.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,v=p.length;g<v;g++){const y=p[g];ru.isClockWise(y)===!0&&(p[g]=y.reverse())}const m=ru.triangulateShape(f,p);for(let g=0,v=p.length;g<v;g++){const y=p[g];f=f.concat(y)}for(let g=0,v=f.length;g<v;g++){const y=f[g];r.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let g=0,v=m.length;g<v;g++){const y=m[g],x=y[0]+u,b=y[1]+u,w=y[2]+u;i.push(x,b,w),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return aMe(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new cS(i,e.curveSegments)}}function aMe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class ux extends cn{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const d=[],u=new de,h=new de,f=[],p=[],m=[],g=[];for(let v=0;v<=i;v++){const y=[],x=v/i;let b=0;v==0&&o==0?b=.5/n:v==i&&l==Math.PI&&(b=-.5/n);for(let w=0;w<=n;w++){const E=w/n;u.x=-e*Math.cos(r+E*s)*Math.sin(o+x*a),u.y=e*Math.cos(o+x*a),u.z=e*Math.sin(r+E*s)*Math.sin(o+x*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),m.push(h.x,h.y,h.z),g.push(E+b,1-x),y.push(c++)}d.push(y)}for(let v=0;v<i;v++)for(let y=0;y<n;y++){const x=d[v][y+1],b=d[v][y],w=d[v+1][y],E=d[v+1][y+1];(v!==0||o>0)&&f.push(x,b,E),(v!==i-1||l<Math.PI)&&f.push(b,w,E)}this.setIndex(f),this.setAttribute("position",new Et(p,3)),this.setAttribute("normal",new Et(m,3)),this.setAttribute("uv",new Et(g,2))}static fromJSON(e){return new ux(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class uS extends qd{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new uS(e.radius,e.detail)}}class dS extends cn{constructor(e=1,n=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],d=new de,u=new de,h=new de;for(let f=0;f<=i;f++)for(let p=0;p<=r;p++){const m=p/r*s,g=f/i*Math.PI*2;u.x=(e+n*Math.cos(g))*Math.cos(m),u.y=(e+n*Math.cos(g))*Math.sin(m),u.z=n*Math.sin(g),a.push(u.x,u.y,u.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(p/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let p=1;p<=r;p++){const m=(r+1)*f+p-1,g=(r+1)*(f-1)+p-1,v=(r+1)*(f-1)+p,y=(r+1)*f+p;o.push(m,g,y),o.push(g,v,y)}this.setIndex(o),this.setAttribute("position",new Et(a,3)),this.setAttribute("normal",new Et(l,3)),this.setAttribute("uv",new Et(c,2))}static fromJSON(e){return new dS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class hS extends cn{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],d=[],u=new de,h=new de,f=new de,p=new de,m=new de,g=new de,v=new de;for(let x=0;x<=i;++x){const b=x/i*s*Math.PI*2;y(b,s,o,e,f),y(b+.01,s,o,e,p),g.subVectors(p,f),v.addVectors(p,f),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let w=0;w<=r;++w){const E=w/r*Math.PI*2,A=-n*Math.cos(E),S=n*Math.sin(E);u.x=f.x+(A*v.x+S*m.x),u.y=f.y+(A*v.y+S*m.y),u.z=f.z+(A*v.z+S*m.z),l.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),c.push(h.x,h.y,h.z),d.push(x/i),d.push(w/r)}}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){const w=(r+1)*(x-1)+(b-1),E=(r+1)*x+(b-1),A=(r+1)*x+b,S=(r+1)*(x-1)+b;a.push(w,E,S),a.push(E,A,S)}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(d,2));function y(x,b,w,E,A){const S=Math.cos(x),C=Math.sin(x),T=w/b*x,P=Math.cos(T);A.x=E*(2+P)*.5*S,A.y=E*(2+P)*C*.5,A.z=E*Math.sin(T)*.5}}static fromJSON(e){return new hS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class fS extends cn{constructor(e=new m5(new de(-1,-1,0),new de(-1,1,0),new de(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new de,l=new de,c=new Ye;let d=new de;const u=[],h=[],f=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new Et(u,3)),this.setAttribute("normal",new Et(h,3)),this.setAttribute("uv",new Et(f,2));function m(){for(let x=0;x<n;x++)g(x);g(s===!1?n:0),y(),v()}function g(x){d=e.getPointAt(x/n,d);const b=o.normals[x],w=o.binormals[x];for(let E=0;E<=r;E++){const A=E/r*Math.PI*2,S=Math.sin(A),C=-Math.cos(A);l.x=C*b.x+S*w.x,l.y=C*b.y+S*w.y,l.z=C*b.z+S*w.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,u.push(a.x,a.y,a.z)}}function v(){for(let x=1;x<=n;x++)for(let b=1;b<=r;b++){const w=(r+1)*(x-1)+(b-1),E=(r+1)*x+(b-1),A=(r+1)*x+b,S=(r+1)*(x-1)+b;p.push(w,E,S),p.push(E,A,S)}}function y(){for(let x=0;x<=n;x++)for(let b=0;b<=r;b++)c.x=x/n,c.y=b/r,f.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new fS(new v5[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class dse extends cn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new de,s=new de;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const u=l[c],h=u.start,f=u.count;for(let p=h,m=h+f;p<m;p+=3)for(let g=0;g<3;g++){const v=a.getX(p+g),y=a.getX(p+(g+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,y),l9(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,u=3*a+(c+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,u),l9(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Et(n,3))}}}function l9(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var c9=Object.freeze({__proto__:null,BoxGeometry:ep,CapsuleGeometry:iS,CircleGeometry:rS,ConeGeometry:sS,CylinderGeometry:vg,DodecahedronGeometry:oS,EdgesGeometry:ase,ExtrudeGeometry:aS,IcosahedronGeometry:lx,LatheGeometry:ax,OctahedronGeometry:cx,PlaneGeometry:sx,PolyhedronGeometry:qd,RingGeometry:lS,ShapeGeometry:cS,SphereGeometry:ux,TetrahedronGeometry:uS,TorusGeometry:dS,TorusKnotGeometry:hS,TubeGeometry:fS,WireframeGeometry:dse});class hse extends xr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new at(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fse extends rc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class dx extends xr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new at(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wd,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $d extends dx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new at(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new at(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new at(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class pse extends xr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new at(16777215),this.specular=new at(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wd,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mse extends xr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new at(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wd,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gse extends xr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wd,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vse extends xr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wd,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yse extends xr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new at(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wd,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xse extends Hs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Xa(t,e,n){return y5(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function vm(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function y5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bse(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function YB(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function x5(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function lMe(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<n||p>=i)){u.push(c.times[f]);for(let m=0;m<d;++m)h.push(c.values[f*d+m])}}u.length!==0&&(c.times=vm(u,c.times.constructor),c.values=vm(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function cMe(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let d=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let m;if(s<=a.times[0]){const v=d,y=u-d;m=Xa(a.values,v,y)}else if(s>=a.times[p]){const v=p*u+d,y=v+u-d;m=Xa(a.values,v,y)}else{const v=a.createInterpolant(),y=d,x=u-d;v.evaluate(s),m=Xa(v.resultBuffer,y,x)}l==="quaternion"&&new or().fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let v=0;v<g;++v){const y=v*f+h;if(l==="quaternion")or.multiplyQuaternionsFlat(c.values,y,m,0,c.values,y);else{const x=f-h*2;for(let b=0;b<x;++b)c.values[y+b]-=m[b]}}}return t.blendMode=YU,t}var uMe=Object.freeze({__proto__:null,arraySlice:Xa,convertArray:vm,isTypedArray:y5,getKeyframeOrder:bse,sortedArray:YB,flattenJSON:x5,subclip:lMe,makeClipAdditive:cMe});class hx{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wse extends hx{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pm,endingEnd:pm}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case mm:s=e,a=2*n-i;break;case Zw:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case mm:o=e,l=2*i-n;break;case Zw:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const c=(i-n)*.5,d=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-n)/(r-n),m=p*p,g=m*p,v=-h*g+2*h*m-h*p,y=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,x=(-1-f)*g+(1.5+f)*m+.5*p,b=f*g-f*m;for(let w=0;w!==a;++w)s[w]=v*o[d+w]+y*o[c+w]+x*o[l+w]+b*o[u+w];return s}}class b5 extends hx{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-n)/(r-n),u=1-d;for(let h=0;h!==a;++h)s[h]=o[c+h]*u+o[l+h]*d;return s}}class _se extends hx{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class dc{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vm(n,this.TimeBufferType),this.values=vm(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:vm(e.times,Array),values:vm(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new _se(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new b5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wse(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Sy:n=this.InterpolantFactoryMethodDiscrete;break;case Qm:n=this.InterpolantFactoryMethodLinear;break;case OT:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sy;case this.InterpolantFactoryMethodLinear:return Qm;case this.InterpolantFactoryMethodSmooth:return OT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Xa(i,s,o),this.values=Xa(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&y5(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Xa(this.times),n=Xa(this.values),i=this.getValueSize(),r=this.getInterpolation()===OT,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(r)l=!0;else{const u=a*i,h=u-i,f=u+i;for(let p=0;p!==i;++p){const m=n[u+p];if(m!==n[h+p]||m!==n[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*i,h=o*i;for(let f=0;f!==i;++f)n[h+f]=n[u+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=Xa(e,0,o),this.values=Xa(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=Xa(this.times,0),n=Xa(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}dc.prototype.TimeBufferType=Float32Array;dc.prototype.ValueBufferType=Float32Array;dc.prototype.DefaultInterpolation=Qm;class yg extends dc{}yg.prototype.ValueTypeName="bool";yg.prototype.ValueBufferType=Array;yg.prototype.DefaultInterpolation=Sy;yg.prototype.InterpolantFactoryMethodLinear=void 0;yg.prototype.InterpolantFactoryMethodSmooth=void 0;class w5 extends dc{}w5.prototype.ValueTypeName="color";class Ay extends dc{}Ay.prototype.ValueTypeName="number";class Sse extends hx{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=e*a;for(let d=c+a;c!==d;c+=4)or.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Uf extends dc{InterpolantFactoryMethodLinear(e){return new Sse(this.times,this.values,this.getValueSize(),e)}}Uf.prototype.ValueTypeName="quaternion";Uf.prototype.DefaultInterpolation=Qm;Uf.prototype.InterpolantFactoryMethodSmooth=void 0;class xg extends dc{}xg.prototype.ValueTypeName="string";xg.prototype.ValueBufferType=Array;xg.prototype.DefaultInterpolation=Sy;xg.prototype.InterpolantFactoryMethodLinear=void 0;xg.prototype.InterpolantFactoryMethodSmooth=void 0;class Ty extends dc{}Ty.prototype.ValueTypeName="vector";class Cy{constructor(e,n=-1,i,r=iD){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=ma(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(hMe(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(dc.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=bse(l);l=YB(l,1,d),c=YB(c,1,d),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Ay(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const u=d[1];let h=r[u];h||(r[u]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,h,f,p,m){if(f.length!==0){const g=[],v=[];x5(f,g,v,p),g.length!==0&&m.push(new u(h,g,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],v=[];for(let y=0;y!==h[p].morphTargets.length;++y){const x=h[p];g.push(x.time),v.push(x.morphTarget===m?1:0)}r.push(new Ay(".morphTargetInfluence["+m+"]",g,v))}l=f.length*o}else{const f=".bones["+n[u].name+"]";i(Ty,f+".position",h,"pos",r),i(Uf,f+".quaternion",h,"rot",r),i(Ty,f+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function dMe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ay;case"vector":case"vector2":case"vector3":case"vector4":return Ty;case"color":return w5;case"quaternion":return Uf;case"bool":case"boolean":return yg;case"string":return xg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function hMe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=dMe(t.type);if(t.times===void 0){const n=[],i=[];x5(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const eg={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class _5{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return u!==-1&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return p}return null}}}const Ese=new _5;class jo{constructor(e){this.manager=e!==void 0?e:Ese,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Nu={};class fMe extends Error{constructor(e,n){super(e),this.response=n}}class sc extends jo{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=eg.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Nu[e]!==void 0){Nu[e].push({onLoad:n,onProgress:i,onError:r});return}Nu[e]=[],Nu[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Nu[e],u=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0;let m=0;const g=new ReadableStream({start(v){y();function y(){u.read().then(({done:x,value:b})=>{if(x)v.close();else{m+=b.byteLength;const w=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let E=0,A=d.length;E<A;E++){const S=d[E];S.onProgress&&S.onProgress(w)}v.enqueue(b),y()}})}}});return new Response(g)}else throw new fMe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{eg.add(e,c);const d=Nu[e];delete Nu[e];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const d=Nu[e];if(d===void 0)throw this.manager.itemError(e),c;delete Nu[e];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pMe extends jo{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new sc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Cy.parse(e[i]);n.push(r)}return n}}class mMe extends jo{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new d5,l=new sc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(u){l.load(e[u],function(h){const f=s.parse(h,!0);o[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=gi),a.image=o,a.format=f.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)d(u);else l.load(e,function(u){const h=s.parse(u,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let m=0;m<h.mipmapCount;m++)o[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+m]),o[p].format=h.format,o[p].width=h.width,o[p].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=gi),a.format=h.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class o_ extends jo{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=eg.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=e_("img");function l(){d(),eg.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(u){d(),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Mse extends jo{constructor(e){super(e)}load(e,n,i,r){const s=new eS,o=new o_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Ase extends jo{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new G0,a=new sc(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:as,o.wrapT=c.wrapT!==void 0?c.wrapT:as,o.magFilter=c.magFilter!==void 0?c.magFilter:gi,o.minFilter=c.minFilter!==void 0?c.minFilter:gi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Gd),c.mipmapCount===1&&(o.minFilter=gi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},i,r),o}}class Tse extends jo{constructor(e){super(e)}load(e,n,i,r){const s=new Yi,o=new o_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class tp extends Mn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new at(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Cse extends tp{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mn.DefaultUp),this.updateMatrix(),this.groundColor=new at(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const sL=new Yt,u9=new de,d9=new de;class S5{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.map=null,this.mapPass=null,this.matrix=new Yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sD,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new An(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;u9.setFromMatrixPosition(e.matrixWorld),n.position.copy(u9),d9.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(d9),n.updateMatrixWorld(),sL.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sL),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(sL)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gMe extends S5{constructor(){super(new vi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Jw*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class E5 extends tp{constructor(e,n,i=0,r=Math.PI/3,s=0,o=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mn.DefaultUp),this.updateMatrix(),this.target=new Mn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new gMe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const h9=new Yt,S1=new de,oL=new de;class vMe extends S5{constructor(){super(new vi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new An(2,1,1,1),new An(0,1,1,1),new An(3,1,1,1),new An(1,1,1,1),new An(3,0,1,1),new An(1,0,1,1)],this._cubeDirections=[new de(1,0,0),new de(-1,0,0),new de(0,0,1),new de(0,0,-1),new de(0,1,0),new de(0,-1,0)],this._cubeUps=[new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,0,1),new de(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),S1.setFromMatrixPosition(e.matrixWorld),i.position.copy(S1),oL.copy(i.position),oL.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(oL),i.updateMatrixWorld(),r.makeTranslation(-S1.x,-S1.y,-S1.z),h9.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h9)}}class M5 extends tp{constructor(e,n,i=0,r=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new vMe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class yMe extends S5{constructor(){super(new xd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class A5 extends tp{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mn.DefaultUp),this.updateMatrix(),this.target=new Mn,this.shadow=new yMe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Pse extends tp{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Dse extends tp{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Rse{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new de)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class pD extends tp{constructor(e=new Rse,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class mD extends jo{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new sc(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=mD.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new at().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new at().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ye().fromArray(o.value);break;case"v3":r.uniforms[s].value=new de().fromArray(o.value);break;case"v4":r.uniforms[s].value=new An().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Co().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Yt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ye().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:hse,SpriteMaterial:o5,RawShaderMaterial:fse,ShaderMaterial:rc,PointsMaterial:uD,MeshPhysicalMaterial:$d,MeshStandardMaterial:dx,MeshPhongMaterial:pse,MeshToonMaterial:mse,MeshNormalMaterial:gse,MeshLambertMaterial:vse,MeshDepthMaterial:i5,MeshDistanceMaterial:r5,MeshBasicMaterial:la,MeshMatcapMaterial:yse,LineDashedMaterial:xse,LineBasicMaterial:Hs,Material:xr};return new n[e]}}class su{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Ose extends cn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Lse extends jo{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new sc(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(f,p){if(n[p]!==void 0)return n[p];const g=f.interleavedBuffers[p],v=s(f,g.buffer),y=x0(g.type,v),x=new tS(y,g.stride);return x.uuid=g.uuid,n[p]=x,x}function s(f,p){if(i[p]!==void 0)return i[p];const g=f.arrayBuffers[p],v=new Uint32Array(g).buffer;return i[p]=v,v}const o=e.isInstancedBufferGeometry?new Ose:new cn,a=e.data.index;if(a!==void 0){const f=x0(a.type,a.array);o.setIndex(new Wn(f,1))}const l=e.data.attributes;for(const f in l){const p=l[f];let m;if(p.isInterleavedBufferAttribute){const g=r(e.data,p.data);m=new Ff(g,p.itemSize,p.offset,p.normalized)}else{const g=x0(p.type,p.array),v=p.isInstancedBufferAttribute?My:Wn;m=new v(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),o.setAttribute(f,m)}const c=e.data.morphAttributes;if(c)for(const f in c){const p=c[f],m=[];for(let g=0,v=p.length;g<v;g++){const y=p[g];let x;if(y.isInterleavedBufferAttribute){const b=r(e.data,y.data);x=new Ff(b,y.itemSize,y.offset,y.normalized)}else{const b=x0(y.type,y.array);x=new Wn(b,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),m.push(x)}o.morphAttributes[f]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,p=u.length;f!==p;++f){const m=u[f];o.addGroup(m.start,m.count,m.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const f=new de;h.center!==void 0&&f.fromArray(h.center),o.boundingSphere=new Jf(f,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class xMe extends jo{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?su.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new sc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?su.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new sc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),n!==void 0){let u=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){u=!0;break}u===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Om().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new nS().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new Lse;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in c9?a=c9[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new mD;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Cy.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(d)}else return l.data?{data:x0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new _5(n);s=new o_(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const u=e[c],h=u.url;if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p<m;p++){const g=h[p],v=a(g);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new G0(v.data,v.width,v.height)))}r[u.uuid]=new gm(f)}else{const f=a(u.url);r[u.uuid]=new gm(f)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:x0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new o_(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let u=0,h=c.length;u<h;u++){const f=c[u],p=await s(f);p!==null&&(p instanceof HTMLImageElement?d.push(p):d.push(new G0(p.data,p.width,p.height)))}i[l.uuid]=new gm(d)}else{const d=await s(l.url);i[l.uuid]=new gm(d)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let d;Array.isArray(c)?(d=new eS,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new G0:d=new Yi,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,bMe)),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],f9),d.wrapT=i(a.wrap[1],f9)),a.format!==void 0&&(d.format=a.format),a.type!==void 0&&(d.type=a.type),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,p9)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,p9)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,n,i,r,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p<m;p++){const g=h[p];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),f.push(i[g])}return f}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let d,u;switch(e.type){case"Scene":o=new t_,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new at(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new lD(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new aD(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":o=new vi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new xd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Pse(e.color,e.intensity);break;case"DirectionalLight":o=new A5(e.color,e.intensity);break;case"PointLight":o=new M5(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Dse(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new E5(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Cse(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new pD().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),u=l(e.material),o=new a5(d,u),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),u=l(e.material),o=new Lr(d,u);break;case"InstancedMesh":d=a(e.geometry),u=l(e.material);const h=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new l5(d,u,h),o.instanceMatrix=new My(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new My(new Float32Array(p.array),p.itemSize));break;case"LOD":o=new tse;break;case"Line":o=new Id(a(e.geometry),l(e.material));break;case"LineLoop":o=new c5(a(e.geometry),l(e.material));break;case"LineSegments":o=new cc(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new u5(a(e.geometry),l(e.material));break;case"Sprite":o=new ese(l(e.material));break;case"Group":o=new ud;break;case"Bone":o=new cD;break;default:o=new Mn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let f=0;f<h.length;f++)o.add(this.parseObject(h[f],n,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let f=0;f<h.length;f++){const p=h[f];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let f=0;f<h.length;f++){const p=h[f],m=o.getObjectByProperty("uuid",p.object);m!==void 0&&o.addLevel(m,p.distance)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const bMe={UVMapping:tD,CubeReflectionMapping:Od,CubeRefractionMapping:Bf,EquirectangularReflectionMapping:wy,EquirectangularRefractionMapping:Xw,CubeUVReflectionMapping:rx},f9={RepeatWrapping:zf,ClampToEdgeWrapping:as,MirroredRepeatWrapping:_y},p9={NearestFilter:ir,NearestMipmapNearestFilter:Yw,NearestMipmapLinearFilter:Kw,LinearFilter:gi,LinearMipmapNearestFilter:nD,LinearMipmapLinearFilter:Gd};class Ise extends jo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=eg.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){eg.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let NM,T5=class{static getContext(){return NM===void 0&&(NM=new(window.AudioContext||window.webkitAudioContext)),NM}static setContext(e){NM=e}};class wMe extends jo{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new sc(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);T5.getContext().decodeAudioData(l,function(d){n(d)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class _Me extends pD{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new at().set(e),s=new at().set(n),o=new de(r.r,r.g,r.b),a=new de(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class SMe extends pD{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new at().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const m9=new Yt,g9=new Yt,wp=new Yt;class EMe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,wp.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(Pm*n.fov*.5)/n.zoom;let a,l;g9.elements[12]=-r,m9.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,wp.elements[0]=2*n.near/(l-a),wp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(wp),a=-o*n.aspect-s,l=o*n.aspect-s,wp.elements[0]=2*n.near/(l-a),wp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(wp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(g9),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(m9)}}class C5{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=v9(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=v9();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function v9(){return(typeof performance>"u"?Date:performance).now()}const _p=new de,y9=new or,MMe=new de,Sp=new de;class AMe extends Mn{constructor(){super(),this.type="AudioListener",this.context=T5.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new C5}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_p,y9,MMe),Sp.set(0,0,-1).applyQuaternion(y9),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(_p.x,r),n.positionY.linearRampToValueAtTime(_p.y,r),n.positionZ.linearRampToValueAtTime(_p.z,r),n.forwardX.linearRampToValueAtTime(Sp.x,r),n.forwardY.linearRampToValueAtTime(Sp.y,r),n.forwardZ.linearRampToValueAtTime(Sp.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(_p.x,_p.y,_p.z),n.setOrientation(Sp.x,Sp.y,Sp.z,i.x,i.y,i.z)}}let kse=class extends Mn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Ep=new de,x9=new or,TMe=new de,Mp=new de;class CMe extends kse{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ep,x9,TMe),Mp.set(0,0,1).applyQuaternion(x9);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Ep.x,i),n.positionY.linearRampToValueAtTime(Ep.y,i),n.positionZ.linearRampToValueAtTime(Ep.z,i),n.orientationX.linearRampToValueAtTime(Mp.x,i),n.orientationY.linearRampToValueAtTime(Mp.y,i),n.orientationZ.linearRampToValueAtTime(Mp.z,i)}else n.setPosition(Ep.x,Ep.y,Ep.z),n.setOrientation(Mp.x,Mp.y,Mp.z)}}class PMe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class Nse{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){or.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;or.multiplyQuaternionsFlat(e,o,e,n,e,i),or.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const P5="\\[\\]\\.:\\/",DMe=new RegExp("["+P5+"]","g"),D5="[^"+P5+"]",RMe="[^"+P5.replace("\\.","")+"]",OMe=/((?:WC+[\/:])*)/.source.replace("WC",D5),LMe=/(WCOD+)?/.source.replace("WCOD",RMe),IMe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",D5),kMe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",D5),NMe=new RegExp("^"+OMe+LMe+IMe+kMe+"$"),BMe=["material","materials","bones","map"];class zMe{constructor(e,n,i){const r=i||En.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class En{constructor(e,n,i){this.path=n,this.parsedPath=i||En.parseTrackName(n),this.node=En.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new En.Composite(e,n,i):new En(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(DMe,"")}static parseTrackName(e){const n=NMe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);BMe.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=En.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}En.Composite=zMe;En.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};En.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};En.prototype.GetterByBindingType=[En.prototype._getValue_direct,En.prototype._getValue_array,En.prototype._getValue_arrayElement,En.prototype._getValue_toArray];En.prototype.SetterByBindingTypeAndVersioning=[[En.prototype._setValue_direct,En.prototype._setValue_direct_setNeedsUpdate,En.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[En.prototype._setValue_array,En.prototype._setValue_array_setNeedsUpdate,En.prototype._setValue_array_setMatrixWorldNeedsUpdate],[En.prototype._setValue_arrayElement,En.prototype._setValue_arrayElement_setNeedsUpdate,En.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[En.prototype._setValue_fromArray,En.prototype._setValue_fromArray_setNeedsUpdate,En.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class FMe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ma(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){const h=arguments[d],f=h.uuid;let p=n[f];if(p===void 0){p=l++,n[f]=p,e.push(h);for(let m=0,g=o;m!==g;++m)s[m].push(new En(h,i[m],r[m]))}else if(p<c){a=e[p];const m=--c,g=e[m];n[g.uuid]=p,e[p]=g,n[f]=m,e[m]=h;for(let v=0,y=o;v!==y;++v){const x=s[v],b=x[m];let w=x[p];x[p]=b,w===void 0&&(w=new En(h,i[v],r[v])),x[m]=w}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=n[c];if(d!==void 0&&d>=s){const u=s++,h=e[u];n[h.uuid]=d,e[d]=h,n[c]=u,e[u]=l;for(let f=0,p=r;f!==p;++f){const m=i[f],g=m[u],v=m[d];m[d]=g,m[u]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,u=n[d];if(u!==void 0)if(delete n[d],u<s){const h=--s,f=e[h],p=--o,m=e[p];n[f.uuid]=u,e[u]=f,n[m.uuid]=h,e[h]=m,e.pop();for(let g=0,v=r;g!==v;++g){const y=i[g],x=y[h],b=y[p];y[u]=x,y[h]=b,y.pop()}}else{const h=--o,f=e[h];h>0&&(n[f.uuid]=u),e[u]=f,e.pop();for(let p=0,m=r;p!==m;++p){const g=i[p];g[u]=g[h],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,u=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(u);for(let h=d,f=l.length;h!==f;++h){const p=l[h];u[h]=new En(p,e,n)}return u}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class UMe{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:pm,endingEnd:pm};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Rre,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case YU:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case iD:default:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===Ore;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===Dre){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=mm,r.endingEnd=mm):(e?r.endingStart=this.zeroSlopeAtStart?mm:pm:r.endingStart=Zw,n?r.endingEnd=this.zeroSlopeAtEnd?mm:pm:r.endingEnd=Zw)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const VMe=new Float32Array(1);class HMe extends bu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let u=0;u!==s;++u){const h=r[u],f=h.name;let p=d[f];if(p!==void 0)++p.referenceCount,o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const m=n&&n._propertyBindings[u].binding.parsedPath;p=new Nse(En.create(i,f,m),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new b5(new Float32Array(2),new Float32Array(2),1,VMe),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?Cy.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=iD),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===i)return u;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new UMe(this,o,n,i);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?Cy.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,u=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,n[d]=u,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class R5{constructor(e){this.value=e}clone(){return new R5(this.value.clone===void 0?this.value:this.value.clone())}}let jMe=0;class GMe extends bu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:jMe++}),this.name="",this.usage=Qw,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class WMe extends tS{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class qMe{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class O5{constructor(e,n,i=0,r=1/0){this.ray=new Q_(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Rm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return KB(e,this,i,n),i.sort(b9),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)KB(e[r],this,i,n);return i.sort(b9),i}}function b9(t,e){return t.distance-e.distance}function KB(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)KB(r[s],e,n,!0)}}class zC{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(rr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class $Me{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const w9=new Ye;class XMe{constructor(e=new Ye(1/0,1/0),n=new Ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=w9.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return w9.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _9=new de,BM=new de;class YMe{constructor(e=new de,n=new de){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){_9.subVectors(e,this.start),BM.subVectors(this.end,this.start);const i=BM.dot(BM);let s=BM.dot(_9)/i;return n&&(s=rr(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const S9=new de;class KMe extends Mn{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new cn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Et(r,3));const s=new Hs({fog:!1,toneMapped:!1});this.cone=new cc(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),S9.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(S9),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const yh=new de,zM=new Yt,aL=new Yt;class ZMe extends cc{constructor(e){const n=Bse(e),i=new cn,r=[],s=[],o=new at(0,0,1),a=new at(0,1,0);for(let c=0;c<n.length;c++){const d=n[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Et(r,3)),i.setAttribute("color",new Et(s,3));const l=new Hs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");aL.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(zM.multiplyMatrices(aL,a.matrixWorld),yh.setFromMatrixPosition(zM),r.setXYZ(o,yh.x,yh.y,yh.z),zM.multiplyMatrices(aL,a.parent.matrixWorld),yh.setFromMatrixPosition(zM),r.setXYZ(o+1,yh.x,yh.y,yh.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Bse(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Bse(t.children[n]));return e}class QMe extends Lr{constructor(e,n,i){const r=new ux(n,4,2),s=new la({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const JMe=new de,E9=new at,M9=new at;class eAe extends Mn{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new cx(n);r.rotateY(Math.PI*.5),this.material=new la({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Wn(o,3)),this.add(new Lr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");E9.copy(this.light.color),M9.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?E9:M9;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}e.lookAt(JMe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class tAe extends cc{constructor(e=10,n=10,i=4473924,r=8947848){i=new at(i),r=new at(r);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=n;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===s?i:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const d=new cn;d.setAttribute("position",new Et(l,3)),d.setAttribute("color",new Et(c,3));const u=new Hs({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class nAe extends cc{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new at(s),o=new at(o);const a=[],l=[];if(n>1)for(let u=0;u<n;u++){const h=u/n*(Math.PI*2),f=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,p);const m=u&1?s:o;l.push(m.r,m.g,m.b),l.push(m.r,m.g,m.b)}for(let u=0;u<i;u++){const h=u&1?s:o,f=e-e/i*u;for(let p=0;p<r;p++){let m=p/r*(Math.PI*2),g=Math.sin(m)*f,v=Math.cos(m)*f;a.push(g,0,v),l.push(h.r,h.g,h.b),m=(p+1)/r*(Math.PI*2),g=Math.sin(m)*f,v=Math.cos(m)*f,a.push(g,0,v),l.push(h.r,h.g,h.b)}}const c=new cn;c.setAttribute("position",new Et(a,3)),c.setAttribute("color",new Et(l,3));const d=new Hs({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const A9=new de,FM=new de,T9=new de;class iAe extends Mn{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,n===void 0&&(n=1);let r=new cn;r.setAttribute("position",new Et([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Hs({fog:!1,toneMapped:!1});this.lightPlane=new Id(r,s),this.add(this.lightPlane),r=new cn,r.setAttribute("position",new Et([0,0,0,0,0,1],3)),this.targetLine=new Id(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){A9.setFromMatrixPosition(this.light.matrixWorld),FM.setFromMatrixPosition(this.light.target.matrixWorld),T9.subVectors(FM,A9),this.lightPlane.lookAt(FM),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(FM),this.targetLine.scale.z=T9.length()}}const UM=new de,Vi=new J_;class rAe extends cc{constructor(e){const n=new cn,i=new Hs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){l(p),l(m)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}n.setAttribute("position",new Et(r,3)),n.setAttribute("color",new Et(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new at(16755200),d=new at(16711680),u=new at(43775),h=new at(16777215),f=new at(3355443);this.setColors(c,d,u,h,f)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;Vi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Zi("c",n,e,Vi,0,0,-1),Zi("t",n,e,Vi,0,0,1),Zi("n1",n,e,Vi,-i,-r,-1),Zi("n2",n,e,Vi,i,-r,-1),Zi("n3",n,e,Vi,-i,r,-1),Zi("n4",n,e,Vi,i,r,-1),Zi("f1",n,e,Vi,-i,-r,1),Zi("f2",n,e,Vi,i,-r,1),Zi("f3",n,e,Vi,-i,r,1),Zi("f4",n,e,Vi,i,r,1),Zi("u1",n,e,Vi,i*.7,r*1.1,-1),Zi("u2",n,e,Vi,-i*.7,r*1.1,-1),Zi("u3",n,e,Vi,0,r*2,-1),Zi("cf1",n,e,Vi,-i,0,1),Zi("cf2",n,e,Vi,i,0,1),Zi("cf3",n,e,Vi,0,-r,1),Zi("cf4",n,e,Vi,0,r,1),Zi("cn1",n,e,Vi,-i,0,-1),Zi("cn2",n,e,Vi,i,0,-1),Zi("cn3",n,e,Vi,0,-r,-1),Zi("cn4",n,e,Vi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Zi(t,e,n,i,r,s,o){UM.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],UM.x,UM.y,UM.z)}}const VM=new Qf;class sAe extends cc{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new cn;s.setIndex(new Wn(i,1)),s.setAttribute("position",new Wn(r,3)),super(s,new Hs({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&VM.setFromObject(this.object),VM.isEmpty())return;const n=VM.min,i=VM.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oAe extends cc{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new cn;s.setIndex(new Wn(i,1)),s.setAttribute("position",new Et(r,3)),super(s,new Hs({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class aAe extends Id{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new cn;o.setAttribute("position",new Et(s,3)),o.computeBoundingSphere(),super(o,new Hs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new cn;l.setAttribute("position",new Et(a,3)),l.computeBoundingSphere(),this.add(new Lr(l,new la({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const C9=new de;let HM,lL;class lAe extends Mn{constructor(e=new de(0,0,1),n=new de(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",HM===void 0&&(HM=new cn,HM.setAttribute("position",new Et([0,0,0,0,1,0],3)),lL=new vg(0,.5,1,5,1),lL.translate(0,-.5,0)),this.position.copy(n),this.line=new Id(HM,new Hs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Lr(lL,new la({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{C9.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(C9,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cAe extends cc{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new cn;r.setAttribute("position",new Et(n,3)),r.setAttribute("color",new Et(i,3));const s=new Hs({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new at,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class uAe{constructor(){this.type="ShapePath",this.color=new at,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new n_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const y=[];for(let x=0,b=v.length;x<b;x++){const w=v[x],E=new Om;E.curves=w.curves,y.push(E)}return y}function i(v,y){const x=y.length;let b=!1;for(let w=x-1,E=0;E<x;w=E++){let A=y[w],S=y[E],C=S.x-A.x,T=S.y-A.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(A=y[E],C=-C,S=y[w],T=-T),v.y<A.y||v.y>S.y)continue;if(v.y===A.y){if(v.x===A.x)return!0}else{const P=T*(v.x-A.x)-C*(v.y-A.y);if(P===0)return!0;if(P<0)continue;b=!b}}else{if(v.y!==A.y)continue;if(S.x<=v.x&&v.x<=A.x||A.x<=v.x&&v.x<=S.x)return!0}}return b}const r=ru.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Om,l.curves=a.curves,c.push(l),c;let d=!r(s[0].getPoints());d=e?!d:d;const u=[],h=[];let f=[],p=0,m;h[p]=void 0,f[p]=[];for(let v=0,y=s.length;v<y;v++)a=s[v],m=a.getPoints(),o=r(m),o=e?!o:o,o?(!d&&h[p]&&p++,h[p]={s:new Om,p:m},h[p].s.curves=a.curves,d&&p++,f[p]=[]):f[p].push({h:a,p:m[0]});if(!h[0])return n(s);if(h.length>1){let v=!1,y=0;for(let x=0,b=h.length;x<b;x++)u[x]=[];for(let x=0,b=h.length;x<b;x++){const w=f[x];for(let E=0;E<w.length;E++){const A=w[E];let S=!0;for(let C=0;C<h.length;C++)i(A.p,h[C].p)&&(x!==C&&y++,S?(S=!1,u[C].push(A)):v=!0);S&&u[x].push(A)}}y>0&&v===!1&&(f=u)}let g;for(let v=0,y=h.length;v<y;v++){l=h[v].s,c.push(l),g=f[v];for(let x=0,b=g.length;x<b;x++)l.holes.push(g[x].h)}return c}}const rd=dAe();function dAe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function hAe(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=rr(t,-65504,65504),rd.floatView[0]=t;const e=rd.uint32View[0],n=e>>23&511;return rd.baseTable[n]+((e&8388607)>>rd.shiftTable[n])}function fAe(t){const e=t>>10;return rd.uint32View[0]=rd.mantissaTable[rd.offsetTable[e]+(t&1023)]+rd.exponentTable[e],rd.floatView[0]}var Cb=Object.freeze({__proto__:null,toHalfFloat:hAe,fromHalfFloat:fAe});function pAe(){console.error("THREE.ImmediateRenderObject has been removed.")}class mAe extends ml{constructor(e,n,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,i),this.samples=4}}class gAe extends Z_{constructor(e,n,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,i,r)}}class vAe extends rD{constructor(e,n,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,i,r)}}class yAe extends ep{constructor(e,n,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,o)}}class xAe extends iS{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class bAe extends rS{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class wAe extends sS{constructor(e,n,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,o,a)}}class _Ae extends vg{constructor(e,n,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,o,a,l)}}class SAe extends oS{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class EAe extends aS{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class MAe extends lx{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class AAe extends ax{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class TAe extends cx{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class CAe extends sx{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class PAe extends qd{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class DAe extends lS{constructor(e,n,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,o)}}class RAe extends cS{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class OAe extends ux{constructor(e,n,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,o,a)}}class LAe extends uS{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class IAe extends dS{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class kAe extends hS{constructor(e,n,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,o)}}class NAe extends fS{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:JP}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=JP);const BAe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$U,AddEquation:tm,AddOperation:ure,AdditiveAnimationBlendMode:YU,AdditiveBlending:gB,AlphaFormat:bre,AlwaysDepth:ire,AlwaysStencilFunc:Bre,AmbientLight:Pse,AmbientLightProbe:SMe,AnimationClip:Cy,AnimationLoader:pMe,AnimationMixer:HMe,AnimationObjectGroup:FMe,AnimationUtils:uMe,ArcCurve:nse,ArrayCamera:Kre,ArrowHelper:lAe,Audio:kse,AudioAnalyser:PMe,AudioContext:T5,AudioListener:AMe,AudioLoader:wMe,AxesHelper:cAe,BackSide:Bs,BasicDepthPacking:Ire,BasicShadowMap:jie,Bone:cD,BooleanKeyframeTrack:yg,Box2:XMe,Box3:Qf,Box3Helper:oAe,BoxBufferGeometry:yAe,BoxGeometry:ep,BoxHelper:sAe,BufferAttribute:Wn,BufferGeometry:cn,BufferGeometryLoader:Lse,ByteType:mre,Cache:eg,Camera:J_,CameraHelper:rAe,CanvasTexture:IEe,CapsuleBufferGeometry:xAe,CapsuleGeometry:iS,CatmullRomCurve3:ise,CineonToneMapping:fre,CircleBufferGeometry:bAe,CircleGeometry:rS,ClampToEdgeWrapping:as,Clock:C5,Color:at,ColorKeyframeTrack:w5,ColorManagement:Wa,CompressedArrayTexture:LEe,CompressedTexture:d5,CompressedTextureLoader:mMe,ConeBufferGeometry:wAe,ConeGeometry:sS,CubeCamera:jre,CubeReflectionMapping:Od,CubeRefractionMapping:Bf,CubeTexture:eS,CubeTextureLoader:Mse,CubeUVReflectionMapping:rx,CubicBezierCurve:f5,CubicBezierCurve3:rse,CubicInterpolant:wse,CullFaceBack:mB,CullFaceFront:Hie,CullFaceFrontBack:Fxe,CullFaceNone:Vie,Curve:uc,CurvePath:ose,CustomBlending:Gie,CustomToneMapping:pre,CylinderBufferGeometry:_Ae,CylinderGeometry:vg,Cylindrical:$Me,Data3DTexture:rD,DataArrayTexture:Z_,DataTexture:G0,DataTexture2DArray:gAe,DataTexture3D:vAe,DataTextureLoader:Ase,DataUtils:Cb,DecrementStencilOp:Yxe,DecrementWrapStencilOp:Zxe,DefaultLoadingManager:Ese,DepthFormat:Ef,DepthStencilFormat:Zm,DepthTexture:Zre,DirectionalLight:A5,DirectionalLightHelper:iAe,DiscreteInterpolant:_se,DodecahedronBufferGeometry:SAe,DodecahedronGeometry:oS,DoubleSide:ql,DstAlphaFactor:Zie,DstColorFactor:Jie,DynamicCopyUsage:h1e,DynamicDrawUsage:o1e,DynamicReadUsage:c1e,EdgesGeometry:ase,EllipseCurve:dD,EqualDepth:sre,EqualStencilFunc:t1e,EquirectangularReflectionMapping:wy,EquirectangularRefractionMapping:Xw,Euler:gg,EventDispatcher:bu,ExtrudeBufferGeometry:EAe,ExtrudeGeometry:aS,FileLoader:sc,Float16BufferAttribute:q1e,Float32BufferAttribute:Et,Float64BufferAttribute:$1e,FloatType:rl,Fog:lD,FogExp2:aD,FramebufferTexture:OEe,FrontSide:Nf,Frustum:sD,GLBufferAttribute:qMe,GLSL1:p1e,GLSL3:HB,GreaterDepth:are,GreaterEqualDepth:ore,GreaterEqualStencilFunc:s1e,GreaterStencilFunc:i1e,GridHelper:tAe,Group:ud,HalfFloatType:$l,HemisphereLight:Cse,HemisphereLightHelper:eAe,HemisphereLightProbe:_Me,IcosahedronBufferGeometry:MAe,IcosahedronGeometry:lx,ImageBitmapLoader:Ise,ImageLoader:o_,ImageUtils:QU,ImmediateRenderObject:pAe,IncrementStencilOp:Xxe,IncrementWrapStencilOp:Kxe,InstancedBufferAttribute:My,InstancedBufferGeometry:Ose,InstancedInterleavedBuffer:WMe,InstancedMesh:l5,Int16BufferAttribute:G1e,Int32BufferAttribute:W1e,Int8BufferAttribute:V1e,IntType:vre,InterleavedBuffer:tS,InterleavedBufferAttribute:Ff,Interpolant:hx,InterpolateDiscrete:Sy,InterpolateLinear:Qm,InterpolateSmooth:OT,InvertStencilOp:Qxe,KeepStencilOp:LT,KeyframeTrack:dc,LOD:tse,LatheBufferGeometry:AAe,LatheGeometry:ax,Layers:Rm,LessDepth:rre,LessEqualDepth:kC,LessEqualStencilFunc:n1e,LessStencilFunc:e1e,Light:tp,LightProbe:pD,Line:Id,Line3:YMe,LineBasicMaterial:Hs,LineCurve:hD,LineCurve3:sse,LineDashedMaterial:xse,LineLoop:c5,LineSegments:cc,LinearEncoding:hu,LinearFilter:gi,LinearInterpolant:b5,LinearMipMapLinearFilter:jxe,LinearMipMapNearestFilter:Hxe,LinearMipmapLinearFilter:Gd,LinearMipmapNearestFilter:nD,LinearSRGBColorSpace:ef,LinearToneMapping:dre,Loader:jo,LoaderUtils:su,LoadingManager:_5,LoopOnce:Dre,LoopPingPong:Ore,LoopRepeat:Rre,LuminanceAlphaFormat:Sre,LuminanceFormat:_re,MOUSE:Up,Material:xr,MaterialLoader:mD,MathUtils:Fre,Matrix3:Co,Matrix4:Yt,MaxEquation:bB,Mesh:Lr,MeshBasicMaterial:la,MeshDepthMaterial:i5,MeshDistanceMaterial:r5,MeshLambertMaterial:vse,MeshMatcapMaterial:yse,MeshNormalMaterial:gse,MeshPhongMaterial:pse,MeshPhysicalMaterial:$d,MeshStandardMaterial:dx,MeshToonMaterial:mse,MinEquation:xB,MirroredRepeatWrapping:_y,MixOperation:cre,MultiplyBlending:yB,MultiplyOperation:K_,NearestFilter:ir,NearestMipMapLinearFilter:Vxe,NearestMipMapNearestFilter:Uxe,NearestMipmapLinearFilter:Kw,NearestMipmapNearestFilter:Yw,NeverDepth:nre,NeverStencilFunc:Jxe,NoBlending:yd,NoColorSpace:Wxe,NoToneMapping:tc,NormalAnimationBlendMode:iD,NormalBlending:Tm,NotEqualDepth:lre,NotEqualStencilFunc:r1e,NumberKeyframeTrack:Ay,Object3D:Mn,ObjectLoader:xMe,ObjectSpaceNormalMap:Nre,OctahedronBufferGeometry:TAe,OctahedronGeometry:cx,OneFactor:Xie,OneMinusDstAlphaFactor:Qie,OneMinusDstColorFactor:ere,OneMinusSrcAlphaFactor:qU,OneMinusSrcColorFactor:Kie,OrthographicCamera:xd,PCFShadowMap:eD,PCFSoftShadowMap:Kb,PMREMGenerator:GB,Path:n_,PerspectiveCamera:vi,Plane:Fh,PlaneBufferGeometry:CAe,PlaneGeometry:sx,PlaneHelper:aAe,PointLight:M5,PointLightHelper:QMe,Points:u5,PointsMaterial:uD,PolarGridHelper:nAe,PolyhedronBufferGeometry:PAe,PolyhedronGeometry:qd,PositionalAudio:CMe,PropertyBinding:En,PropertyMixer:Nse,QuadraticBezierCurve:p5,QuadraticBezierCurve3:m5,Quaternion:or,QuaternionKeyframeTrack:Uf,QuaternionLinearInterpolant:Sse,REVISION:JP,RGBADepthPacking:kre,RGBAFormat:So,RGBAIntegerFormat:Cre,RGBA_ASTC_10x10_Format:zB,RGBA_ASTC_10x5_Format:kB,RGBA_ASTC_10x6_Format:NB,RGBA_ASTC_10x8_Format:BB,RGBA_ASTC_12x10_Format:FB,RGBA_ASTC_12x12_Format:UB,RGBA_ASTC_4x4_Format:TB,RGBA_ASTC_5x4_Format:CB,RGBA_ASTC_5x5_Format:PB,RGBA_ASTC_6x5_Format:DB,RGBA_ASTC_6x6_Format:RB,RGBA_ASTC_8x5_Format:OB,RGBA_ASTC_8x6_Format:LB,RGBA_ASTC_8x8_Format:IB,RGBA_BPTC_Format:VB,RGBA_ETC2_EAC_Format:AB,RGBA_PVRTC_2BPPV1_Format:EB,RGBA_PVRTC_4BPPV1_Format:SB,RGBA_S3TC_DXT1_Format:PT,RGBA_S3TC_DXT3_Format:DT,RGBA_S3TC_DXT5_Format:RT,RGBFormat:wre,RGB_ETC1_Format:Pre,RGB_ETC2_Format:MB,RGB_PVRTC_2BPPV1_Format:_B,RGB_PVRTC_4BPPV1_Format:wB,RGB_S3TC_DXT1_Format:CT,RGFormat:Are,RGIntegerFormat:Tre,RawShaderMaterial:fse,Ray:Q_,Raycaster:O5,RectAreaLight:Dse,RedFormat:Ere,RedIntegerFormat:Mre,ReinhardToneMapping:hre,RepeatWrapping:zf,ReplaceStencilOp:$xe,ReverseSubtractEquation:qie,RingBufferGeometry:DAe,RingGeometry:lS,SRGBColorSpace:Fc,Scene:t_,ShaderChunk:hn,ShaderLib:jl,ShaderMaterial:rc,ShadowMaterial:hse,Shape:Om,ShapeBufferGeometry:RAe,ShapeGeometry:cS,ShapePath:uAe,ShapeUtils:ru,ShortType:gre,Skeleton:nS,SkeletonHelper:ZMe,SkinnedMesh:a5,Source:gm,Sphere:Jf,SphereBufferGeometry:OAe,SphereGeometry:ux,Spherical:zC,SphericalHarmonics3:Rse,SplineCurve:g5,SpotLight:E5,SpotLightHelper:KMe,Sprite:ese,SpriteMaterial:o5,SrcAlphaFactor:WU,SrcAlphaSaturateFactor:tre,SrcColorFactor:Yie,StaticCopyUsage:d1e,StaticDrawUsage:Qw,StaticReadUsage:l1e,StereoCamera:EMe,StreamCopyUsage:f1e,StreamDrawUsage:a1e,StreamReadUsage:u1e,StringKeyframeTrack:xg,SubtractEquation:Wie,SubtractiveBlending:vB,TOUCH:Vp,TangentSpaceNormalMap:Wd,TetrahedronBufferGeometry:LAe,TetrahedronGeometry:uS,Texture:Yi,TextureLoader:Tse,TorusBufferGeometry:IAe,TorusGeometry:dS,TorusKnotBufferGeometry:kAe,TorusKnotGeometry:hS,Triangle:nl,TriangleFanDrawMode:KU,TriangleStripDrawMode:Lre,TrianglesDrawMode:Gxe,TubeBufferGeometry:NAe,TubeGeometry:fS,UVMapping:tD,Uint16BufferAttribute:JU,Uint32BufferAttribute:e5,Uint8BufferAttribute:H1e,Uint8ClampedBufferAttribute:j1e,Uniform:R5,UniformsGroup:GMe,UniformsLib:ut,UniformsUtils:Hre,UnsignedByteType:Ld,UnsignedInt248Type:Cm,UnsignedIntType:Jh,UnsignedShort4444Type:yre,UnsignedShort5551Type:xre,UnsignedShortType:XU,VSMShadowMap:fm,Vector2:Ye,Vector3:de,Vector4:An,VectorKeyframeTrack:Ty,VideoTexture:REe,WebGL1Renderer:Qre,WebGL3DRenderTarget:R1e,WebGLArrayRenderTarget:D1e,WebGLCubeRenderTarget:t5,WebGLMultipleRenderTargets:O1e,WebGLMultisampleRenderTarget:mAe,WebGLRenderTarget:ml,WebGLRenderer:s5,WebGLUtils:Yre,WireframeGeometry:dse,WrapAroundEnding:Zw,ZeroCurvatureEnding:pm,ZeroFactor:$ie,ZeroSlopeEnding:mm,ZeroStencilOp:qxe,_SRGBAFormat:NC,sRGBEncoding:kn},Symbol.toStringTag,{value:"Module"}));var tf={},zAe={get exports(){return tf},set exports(t){tf=t}},bg={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */bg.ConcurrentRoot=1;bg.ContinuousEventPriority=4;bg.DefaultEventPriority=16;bg.DiscreteEventPriority=1;bg.IdleEventPriority=536870912;bg.LegacyRoot=0;(function(t){t.exports=bg})(zAe);function FAe(t){let e;const n=new Set,i=(c,d)=>{const u=typeof c=="function"?c(e):c;if(u!==e){const h=e;e=d?u:Object.assign({},e,u),n.forEach(f=>f(e,h))}},r=()=>e,s=(c,d=r,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=d(e);function f(){const p=d(e);if(!u(h,p)){const m=h;c(h=p,m)}}return n.add(f),()=>n.delete(f)},l={setState:i,getState:r,subscribe:(c,d,u)=>d||u?s(c,d,u):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const UAe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),P9=UAe?Z.useEffect:Z.useLayoutEffect;function zse(t){const e=typeof t=="function"?FAe(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=Z.useReducer(g=>g+1,0),o=e.getState(),a=Z.useRef(o),l=Z.useRef(i),c=Z.useRef(r),d=Z.useRef(!1),u=Z.useRef();u.current===void 0&&(u.current=i(o));let h,f=!1;(a.current!==o||l.current!==i||c.current!==r||d.current)&&(h=i(o),f=!r(u.current,h)),P9(()=>{f&&(u.current=h),a.current=o,l.current=i,c.current=r,d.current=!1});const p=Z.useRef(o);P9(()=>{const g=()=>{try{const y=e.getState(),x=l.current(y);c.current(u.current,x)||(a.current=y,u.current=x,s())}catch{d.current=!0,s()}},v=e.subscribe(g);return e.getState()!==p.current&&g(),v},[]);const m=f?h:u.current;return Z.useDebugValue(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var ZB={},VAe={get exports(){return ZB},set exports(t){ZB=t}},a_={},HAe={get exports(){return a_},set exports(t){a_=t}},Fse={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,U){var N=H.length;H.push(U);e:for(;0<N;){var k=N-1>>>1,z=H[k];if(0<r(z,U))H[k]=U,H[N]=z,N=k;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var U=H[0],N=H.pop();if(N!==U){H[0]=N;e:for(var k=0,z=H.length,W=z>>>1;k<W;){var K=2*(k+1)-1,J=H[K],F=K+1,ee=H[F];if(0>r(J,N))F<z&&0>r(ee,J)?(H[k]=ee,H[F]=N,k=F):(H[k]=J,H[K]=N,k=K);else if(F<z&&0>r(ee,N))H[k]=ee,H[F]=N,k=F;else break e}}return U}function r(H,U){var N=H.sortIndex-U.sortIndex;return N!==0?N:H.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(H){for(var U=n(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=H)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function b(H){if(m=!1,x(H),!p)if(n(l)!==null)p=!0,$(w);else{var U=n(c);U!==null&&X(b,U.startTime-H)}}function w(H,U){p=!1,m&&(m=!1,v(S),S=-1),f=!0;var N=h;try{for(x(U),u=n(l);u!==null&&(!(u.expirationTime>U)||H&&!P());){var k=u.callback;if(typeof k=="function"){u.callback=null,h=u.priorityLevel;var z=k(u.expirationTime<=U);U=t.unstable_now(),typeof z=="function"?u.callback=z:u===n(l)&&i(l),x(U)}else i(l);u=n(l)}if(u!==null)var W=!0;else{var K=n(c);K!==null&&X(b,K.startTime-U),W=!1}return W}finally{u=null,h=N,f=!1}}var E=!1,A=null,S=-1,C=5,T=-1;function P(){return!(t.unstable_now()-T<C)}function R(){if(A!==null){var H=t.unstable_now();T=H;var U=!0;try{U=A(!0,H)}finally{U?L():(E=!1,A=null)}}else E=!1}var L;if(typeof y=="function")L=function(){y(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,B=O.port2;O.port1.onmessage=R,L=function(){B.postMessage(null)}}else L=function(){g(R,0)};function $(H){A=H,E||(E=!0,L())}function X(H,U){S=g(function(){H(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,$(w))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var N=h;h=U;try{return H()}finally{h=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var N=h;h=H;try{return U()}finally{h=N}},t.unstable_scheduleCallback=function(H,U,N){var k=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?k+N:k):N=k,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=N+z,H={id:d++,callback:U,priorityLevel:H,startTime:N,expirationTime:z,sortIndex:-1},N>k?(H.sortIndex=N,e(c,H),n(l)===null&&H===n(c)&&(m?(v(S),S=-1):m=!0,X(b,N-k))):(H.sortIndex=z,e(l,H),p||f||(p=!0,$(w))),H},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(H){var U=h;return function(){var N=h;h=U;try{return H.apply(this,arguments)}finally{h=N}}}})(Fse);(function(t){t.exports=Fse})(HAe);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jAe=function(e){var n={},i=Z,r=a_,s=Object.assign;function o(_){for(var M="https://reactjs.org/docs/error-decoder.html?invariant="+_,D=1;D<arguments.length;D++)M+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+_+"; visit "+M+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),w=Symbol.iterator;function E(_){return _===null||typeof _!="object"?null:(_=w&&_[w]||_["@@iterator"],typeof _=="function"?_:null)}function A(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case d:return"Fragment";case c:return"Portal";case h:return"Profiler";case u:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case p:return(_.displayName||"Context")+".Consumer";case f:return(_._context.displayName||"Context")+".Provider";case m:var M=_.render;return _=_.displayName,_||(_=M.displayName||M.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case y:return M=_.displayName||null,M!==null?M:A(_.type)||"Memo";case x:M=_._payload,_=_._init;try{return A(_(M))}catch{}}return null}function S(_){var M=_.type;switch(_.tag){case 24:return"Cache";case 9:return(M.displayName||"Context")+".Consumer";case 10:return(M._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=M.render,_=_.displayName||_.name||"",M.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return M;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(M);case 8:return M===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof M=="function")return M.displayName||M.name||null;if(typeof M=="string")return M}return null}function C(_){var M=_,D=_;if(_.alternate)for(;M.return;)M=M.return;else{_=M;do M=_,M.flags&4098&&(D=M.return),_=M.return;while(_)}return M.tag===3?D:null}function T(_){if(C(_)!==_)throw Error(o(188))}function P(_){var M=_.alternate;if(!M){if(M=C(_),M===null)throw Error(o(188));return M!==_?null:_}for(var D=_,I=M;;){var G=D.return;if(G===null)break;var Q=G.alternate;if(Q===null){if(I=G.return,I!==null){D=I;continue}break}if(G.child===Q.child){for(Q=G.child;Q;){if(Q===D)return T(G),_;if(Q===I)return T(G),M;Q=Q.sibling}throw Error(o(188))}if(D.return!==I.return)D=G,I=Q;else{for(var pe=!1,Re=G.child;Re;){if(Re===D){pe=!0,D=G,I=Q;break}if(Re===I){pe=!0,I=G,D=Q;break}Re=Re.sibling}if(!pe){for(Re=Q.child;Re;){if(Re===D){pe=!0,D=Q,I=G;break}if(Re===I){pe=!0,I=Q,D=G;break}Re=Re.sibling}if(!pe)throw Error(o(189))}}if(D.alternate!==I)throw Error(o(190))}if(D.tag!==3)throw Error(o(188));return D.stateNode.current===D?_:M}function R(_){return _=P(_),_!==null?L(_):null}function L(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var M=L(_);if(M!==null)return M;_=_.sibling}return null}function O(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){if(_.tag!==4){var M=O(_);if(M!==null)return M}_=_.sibling}return null}var B=Array.isArray,$=e.getPublicInstance,X=e.getRootHostContext,H=e.getChildHostContext,U=e.prepareForCommit,N=e.resetAfterCommit,k=e.createInstance,z=e.appendInitialChild,W=e.finalizeInitialChildren,K=e.prepareUpdate,J=e.shouldSetTextContent,F=e.createTextInstance,ee=e.scheduleTimeout,ie=e.cancelTimeout,te=e.noTimeout,re=e.isPrimaryRenderer,me=e.supportsMutation,se=e.supportsPersistence,oe=e.supportsHydration,be=e.getInstanceFromNode,Ae=e.preparePortalMount,Ie=e.getCurrentEventPriority,Le=e.detachDeletedInstance,fe=e.supportsMicrotasks,ve=e.scheduleMicrotask,ke=e.supportsTestSelectors,ze=e.findFiberRoot,j=e.getBoundingRect,V=e.getTextContent,le=e.isHiddenSubtree,xe=e.matchAccessibilityRole,De=e.setFocusIfFocusable,Ne=e.setupIntersectionObserver,He=e.appendChild,Pe=e.appendChildToContainer,ae=e.commitTextUpdate,Fe=e.commitMount,he=e.commitUpdate,Ce=e.insertBefore,Ue=e.insertInContainerBefore,We=e.removeChild,rt=e.removeChildFromContainer,wt=e.resetTextContent,$t=e.hideInstance,ne=e.hideTextInstance,ge=e.unhideInstance,Me=e.unhideTextInstance,qe=e.clearContainer,Qe=e.cloneInstance,yt=e.createContainerChildSet,un=e.appendChildToContainerChildSet,bn=e.finalizeContainerChildren,Vr=e.replaceContainerChildren,It=e.cloneHiddenInstance,Bi=e.cloneHiddenTextInstance,ii=e.canHydrateInstance,ap=e.canHydrateTextInstance,Vx=e.canHydrateSuspenseInstance,Og=e.isSuspenseInstancePending,lp=e.isSuspenseInstanceFallback,Y=e.registerSuspenseInstanceRetry,ue=e.getNextHydratableSibling,ye=e.getFirstHydratableChild,ce=e.getFirstHydratableChildWithinContainer,we=e.getFirstHydratableChildWithinSuspenseInstance,Ze=e.hydrateInstance,nt=e.hydrateTextInstance,lt=e.hydrateSuspenseInstance,ct=e.getNextHydratableInstanceAfterSuspenseInstance,St=e.commitHydratedContainer,ft=e.commitHydratedSuspenseInstance,gt=e.clearSuspenseBoundary,on=e.clearSuspenseBoundaryFromContainer,Ti=e.shouldDeleteUnhydratedTailInstances,Hr=e.didNotMatchHydratedContainerTextInstance,ms=e.didNotMatchHydratedTextInstance,wn;function pt(_){if(wn===void 0)try{throw Error()}catch(D){var M=D.stack.trim().match(/\n( *(at )?)/);wn=M&&M[1]||""}return`
`+wn+_}var fo=!1;function Zn(_,M){if(!_||fo)return"";fo=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(M)if(M=function(){throw Error()},Object.defineProperty(M.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(M,[])}catch(it){var I=it}Reflect.construct(_,[],M)}else{try{M.call()}catch(it){I=it}_.call(M.prototype)}else{try{throw Error()}catch(it){I=it}_()}}catch(it){if(it&&I&&typeof it.stack=="string"){for(var G=it.stack.split(`
`),Q=I.stack.split(`
`),pe=G.length-1,Re=Q.length-1;1<=pe&&0<=Re&&G[pe]!==Q[Re];)Re--;for(;1<=pe&&0<=Re;pe--,Re--)if(G[pe]!==Q[Re]){if(pe!==1||Re!==1)do if(pe--,Re--,0>Re||G[pe]!==Q[Re]){var Xe=`
`+G[pe].replace(" at new "," at ");return _.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",_.displayName)),Xe}while(1<=pe&&0<=Re);break}}}finally{fo=!1,Error.prepareStackTrace=D}return(_=_?_.displayName||_.name:"")?pt(_):""}var zi=Object.prototype.hasOwnProperty,js=[],jr=-1;function gs(_){return{current:_}}function Mt(_){0>jr||(_.current=js[jr],js[jr]=null,jr--)}function rn(_,M){jr++,js[jr]=_.current,_.current=M}var vs={},Qt=gs(vs),Fi=gs(!1),wl=vs;function Ta(_,M){var D=_.type.contextTypes;if(!D)return vs;var I=_.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===M)return I.__reactInternalMemoizedMaskedChildContext;var G={},Q;for(Q in D)G[Q]=M[Q];return I&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=M,_.__reactInternalMemoizedMaskedChildContext=G),G}function po(_){return _=_.childContextTypes,_!=null}function WS(){Mt(Fi),Mt(Qt)}function ij(_,M,D){if(Qt.current!==vs)throw Error(o(168));rn(Qt,M),rn(Fi,D)}function rj(_,M,D){var I=_.stateNode;if(M=M.childContextTypes,typeof I.getChildContext!="function")return D;I=I.getChildContext();for(var G in I)if(!(G in M))throw Error(o(108,S(_)||"Unknown",G));return s({},D,I)}function qS(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||vs,wl=Qt.current,rn(Qt,_),rn(Fi,Fi.current),!0}function sj(_,M,D){var I=_.stateNode;if(!I)throw Error(o(169));D?(_=rj(_,M,wl),I.__reactInternalMemoizedMergedChildContext=_,Mt(Fi),Mt(Qt),rn(Qt,_)):Mt(Fi),rn(Fi,D)}var _l=Math.clz32?Math.clz32:Lme,Rme=Math.log,Ome=Math.LN2;function Lme(_){return _>>>=0,_===0?32:31-(Rme(_)/Ome|0)|0}var $S=64,XS=4194304;function Hx(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function YS(_,M){var D=_.pendingLanes;if(D===0)return 0;var I=0,G=_.suspendedLanes,Q=_.pingedLanes,pe=D&268435455;if(pe!==0){var Re=pe&~G;Re!==0?I=Hx(Re):(Q&=pe,Q!==0&&(I=Hx(Q)))}else pe=D&~G,pe!==0?I=Hx(pe):Q!==0&&(I=Hx(Q));if(I===0)return 0;if(M!==0&&M!==I&&!(M&G)&&(G=I&-I,Q=M&-M,G>=Q||G===16&&(Q&4194240)!==0))return M;if(I&4&&(I|=D&16),M=_.entangledLanes,M!==0)for(_=_.entanglements,M&=I;0<M;)D=31-_l(M),G=1<<D,I|=_[D],M&=~G;return I}function Ime(_,M){switch(_){case 1:case 2:case 4:return M+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return M+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kme(_,M){for(var D=_.suspendedLanes,I=_.pingedLanes,G=_.expirationTimes,Q=_.pendingLanes;0<Q;){var pe=31-_l(Q),Re=1<<pe,Xe=G[pe];Xe===-1?(!(Re&D)||Re&I)&&(G[pe]=Ime(Re,M)):Xe<=M&&(_.expiredLanes|=Re),Q&=~Re}}function jR(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function GR(_){for(var M=[],D=0;31>D;D++)M.push(_);return M}function jx(_,M,D){_.pendingLanes|=M,M!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,M=31-_l(M),_[M]=D}function Nme(_,M){var D=_.pendingLanes&~M;_.pendingLanes=M,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=M,_.mutableReadLanes&=M,_.entangledLanes&=M,M=_.entanglements;var I=_.eventTimes;for(_=_.expirationTimes;0<D;){var G=31-_l(D),Q=1<<G;M[G]=0,I[G]=-1,_[G]=-1,D&=~Q}}function WR(_,M){var D=_.entangledLanes|=M;for(_=_.entanglements;D;){var I=31-_l(D),G=1<<I;G&M|_[I]&M&&(_[I]|=M),D&=~G}}var Cn=0;function oj(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var qR=r.unstable_scheduleCallback,aj=r.unstable_cancelCallback,Bme=r.unstable_shouldYield,zme=r.unstable_requestPaint,Gr=r.unstable_now,$R=r.unstable_ImmediatePriority,Fme=r.unstable_UserBlockingPriority,XR=r.unstable_NormalPriority,Ume=r.unstable_IdlePriority,KS=null,mc=null;function Vme(_){if(mc&&typeof mc.onCommitFiberRoot=="function")try{mc.onCommitFiberRoot(KS,_,void 0,(_.current.flags&128)===128)}catch{}}function Hme(_,M){return _===M&&(_!==0||1/_===1/M)||_!==_&&M!==M}var gc=typeof Object.is=="function"?Object.is:Hme,Mu=null,ZS=!1,YR=!1;function lj(_){Mu===null?Mu=[_]:Mu.push(_)}function jme(_){ZS=!0,lj(_)}function vc(){if(!YR&&Mu!==null){YR=!0;var _=0,M=Cn;try{var D=Mu;for(Cn=1;_<D.length;_++){var I=D[_];do I=I(!0);while(I!==null)}Mu=null,ZS=!1}catch(G){throw Mu!==null&&(Mu=Mu.slice(_+1)),qR($R,vc),G}finally{Cn=M,YR=!1}}return null}var Gme=a.ReactCurrentBatchConfig;function QS(_,M){if(gc(_,M))return!0;if(typeof _!="object"||_===null||typeof M!="object"||M===null)return!1;var D=Object.keys(_),I=Object.keys(M);if(D.length!==I.length)return!1;for(I=0;I<D.length;I++){var G=D[I];if(!zi.call(M,G)||!gc(_[G],M[G]))return!1}return!0}function Wme(_){switch(_.tag){case 5:return pt(_.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 2:case 15:return _=Zn(_.type,!1),_;case 11:return _=Zn(_.type.render,!1),_;case 1:return _=Zn(_.type,!0),_;default:return""}}function Sl(_,M){if(_&&_.defaultProps){M=s({},M),_=_.defaultProps;for(var D in _)M[D]===void 0&&(M[D]=_[D]);return M}return M}var JS=gs(null),eE=null,Lg=null,KR=null;function ZR(){KR=Lg=eE=null}function cj(_,M,D){re?(rn(JS,M._currentValue),M._currentValue=D):(rn(JS,M._currentValue2),M._currentValue2=D)}function QR(_){var M=JS.current;Mt(JS),re?_._currentValue=M:_._currentValue2=M}function JR(_,M,D){for(;_!==null;){var I=_.alternate;if((_.childLanes&M)!==M?(_.childLanes|=M,I!==null&&(I.childLanes|=M)):I!==null&&(I.childLanes&M)!==M&&(I.childLanes|=M),_===D)break;_=_.return}}function Ig(_,M){eE=_,KR=Lg=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&M&&($o=!0),_.firstContext=null)}function Ca(_){var M=re?_._currentValue:_._currentValue2;if(KR!==_)if(_={context:_,memoizedValue:M,next:null},Lg===null){if(eE===null)throw Error(o(308));Lg=_,eE.dependencies={lanes:0,firstContext:_}}else Lg=Lg.next=_;return M}var yc=null,nh=!1;function e3(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uj(_,M){_=_.updateQueue,M.updateQueue===_&&(M.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function Au(_,M){return{eventTime:_,lane:M,tag:0,payload:null,callback:null,next:null}}function ih(_,M){var D=_.updateQueue;D!==null&&(D=D.shared,cr!==null&&_.mode&1&&!(fn&2)?(_=D.interleaved,_===null?(M.next=M,yc===null?yc=[D]:yc.push(D)):(M.next=_.next,_.next=M),D.interleaved=M):(_=D.pending,_===null?M.next=M:(M.next=_.next,_.next=M),D.pending=M))}function tE(_,M,D){if(M=M.updateQueue,M!==null&&(M=M.shared,(D&4194240)!==0)){var I=M.lanes;I&=_.pendingLanes,D|=I,M.lanes=D,WR(_,D)}}function dj(_,M){var D=_.updateQueue,I=_.alternate;if(I!==null&&(I=I.updateQueue,D===I)){var G=null,Q=null;if(D=D.firstBaseUpdate,D!==null){do{var pe={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};Q===null?G=Q=pe:Q=Q.next=pe,D=D.next}while(D!==null);Q===null?G=Q=M:Q=Q.next=M}else G=Q=M;D={baseState:I.baseState,firstBaseUpdate:G,lastBaseUpdate:Q,shared:I.shared,effects:I.effects},_.updateQueue=D;return}_=D.lastBaseUpdate,_===null?D.firstBaseUpdate=M:_.next=M,D.lastBaseUpdate=M}function nE(_,M,D,I){var G=_.updateQueue;nh=!1;var Q=G.firstBaseUpdate,pe=G.lastBaseUpdate,Re=G.shared.pending;if(Re!==null){G.shared.pending=null;var Xe=Re,it=Xe.next;Xe.next=null,pe===null?Q=it:pe.next=it,pe=Xe;var _t=_.alternate;_t!==null&&(_t=_t.updateQueue,Re=_t.lastBaseUpdate,Re!==pe&&(Re===null?_t.firstBaseUpdate=it:Re.next=it,_t.lastBaseUpdate=Xe))}if(Q!==null){var en=G.baseState;pe=0,_t=it=Xe=null,Re=Q;do{var kt=Re.lane,ri=Re.eventTime;if((I&kt)===kt){_t!==null&&(_t=_t.next={eventTime:ri,lane:0,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null});e:{var Tt=_,ws=Re;switch(kt=M,ri=D,ws.tag){case 1:if(Tt=ws.payload,typeof Tt=="function"){en=Tt.call(ri,en,kt);break e}en=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=ws.payload,kt=typeof Tt=="function"?Tt.call(ri,en,kt):Tt,kt==null)break e;en=s({},en,kt);break e;case 2:nh=!0}}Re.callback!==null&&Re.lane!==0&&(_.flags|=64,kt=G.effects,kt===null?G.effects=[Re]:kt.push(Re))}else ri={eventTime:ri,lane:kt,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},_t===null?(it=_t=ri,Xe=en):_t=_t.next=ri,pe|=kt;if(Re=Re.next,Re===null){if(Re=G.shared.pending,Re===null)break;kt=Re,Re=kt.next,kt.next=null,G.lastBaseUpdate=kt,G.shared.pending=null}}while(1);if(_t===null&&(Xe=en),G.baseState=Xe,G.firstBaseUpdate=it,G.lastBaseUpdate=_t,M=G.shared.interleaved,M!==null){G=M;do pe|=G.lane,G=G.next;while(G!==M)}else Q===null&&(G.shared.lanes=0);jg|=pe,_.lanes=pe,_.memoizedState=en}}function hj(_,M,D){if(_=M.effects,M.effects=null,_!==null)for(M=0;M<_.length;M++){var I=_[M],G=I.callback;if(G!==null){if(I.callback=null,I=D,typeof G!="function")throw Error(o(191,G));G.call(I)}}}var fj=new i.Component().refs;function t3(_,M,D,I){M=_.memoizedState,D=D(I,M),D=D==null?M:s({},M,D),_.memoizedState=D,_.lanes===0&&(_.updateQueue.baseState=D)}var iE={isMounted:function(_){return(_=_._reactInternals)?C(_)===_:!1},enqueueSetState:function(_,M,D){_=_._reactInternals;var I=Ws(),G=oh(_),Q=Au(I,G);Q.payload=M,D!=null&&(Q.callback=D),ih(_,Q),M=La(_,G,I),M!==null&&tE(M,_,G)},enqueueReplaceState:function(_,M,D){_=_._reactInternals;var I=Ws(),G=oh(_),Q=Au(I,G);Q.tag=1,Q.payload=M,D!=null&&(Q.callback=D),ih(_,Q),M=La(_,G,I),M!==null&&tE(M,_,G)},enqueueForceUpdate:function(_,M){_=_._reactInternals;var D=Ws(),I=oh(_),G=Au(D,I);G.tag=2,M!=null&&(G.callback=M),ih(_,G),M=La(_,I,D),M!==null&&tE(M,_,I)}};function pj(_,M,D,I,G,Q,pe){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(I,Q,pe):M.prototype&&M.prototype.isPureReactComponent?!QS(D,I)||!QS(G,Q):!0}function mj(_,M,D){var I=!1,G=vs,Q=M.contextType;return typeof Q=="object"&&Q!==null?Q=Ca(Q):(G=po(M)?wl:Qt.current,I=M.contextTypes,Q=(I=I!=null)?Ta(_,G):vs),M=new M(D,Q),_.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=iE,_.stateNode=M,M._reactInternals=_,I&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=G,_.__reactInternalMemoizedMaskedChildContext=Q),M}function gj(_,M,D,I){_=M.state,typeof M.componentWillReceiveProps=="function"&&M.componentWillReceiveProps(D,I),typeof M.UNSAFE_componentWillReceiveProps=="function"&&M.UNSAFE_componentWillReceiveProps(D,I),M.state!==_&&iE.enqueueReplaceState(M,M.state,null)}function n3(_,M,D,I){var G=_.stateNode;G.props=D,G.state=_.memoizedState,G.refs=fj,e3(_);var Q=M.contextType;typeof Q=="object"&&Q!==null?G.context=Ca(Q):(Q=po(M)?wl:Qt.current,G.context=Ta(_,Q)),G.state=_.memoizedState,Q=M.getDerivedStateFromProps,typeof Q=="function"&&(t3(_,M,Q,D),G.state=_.memoizedState),typeof M.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(M=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),M!==G.state&&iE.enqueueReplaceState(G,G.state,null),nE(_,D,G,I),G.state=_.memoizedState),typeof G.componentDidMount=="function"&&(_.flags|=4194308)}var kg=[],Ng=0,rE=null,sE=0,Pa=[],Da=0,cp=null,Tu=1,Cu="";function up(_,M){kg[Ng++]=sE,kg[Ng++]=rE,rE=_,sE=M}function vj(_,M,D){Pa[Da++]=Tu,Pa[Da++]=Cu,Pa[Da++]=cp,cp=_;var I=Tu;_=Cu;var G=32-_l(I)-1;I&=~(1<<G),D+=1;var Q=32-_l(M)+G;if(30<Q){var pe=G-G%5;Q=(I&(1<<pe)-1).toString(32),I>>=pe,G-=pe,Tu=1<<32-_l(M)+G|D<<G|I,Cu=Q+_}else Tu=1<<Q|D<<G|I,Cu=_}function i3(_){_.return!==null&&(up(_,1),vj(_,1,0))}function r3(_){for(;_===rE;)rE=kg[--Ng],kg[Ng]=null,sE=kg[--Ng],kg[Ng]=null;for(;_===cp;)cp=Pa[--Da],Pa[Da]=null,Cu=Pa[--Da],Pa[Da]=null,Tu=Pa[--Da],Pa[Da]=null}var Wo=null,qo=null,bi=!1,Gx=!1,El=null;function yj(_,M){var D=Ia(5,null,null,0);D.elementType="DELETED",D.stateNode=M,D.return=_,M=_.deletions,M===null?(_.deletions=[D],_.flags|=16):M.push(D)}function xj(_,M){switch(_.tag){case 5:return M=ii(M,_.type,_.pendingProps),M!==null?(_.stateNode=M,Wo=_,qo=ye(M),!0):!1;case 6:return M=ap(M,_.pendingProps),M!==null?(_.stateNode=M,Wo=_,qo=null,!0):!1;case 13:if(M=Vx(M),M!==null){var D=cp!==null?{id:Tu,overflow:Cu}:null;return _.memoizedState={dehydrated:M,treeContext:D,retryLane:1073741824},D=Ia(18,null,null,0),D.stateNode=M,D.return=_,_.child=D,Wo=_,qo=null,!0}return!1;default:return!1}}function s3(_){return(_.mode&1)!==0&&(_.flags&128)===0}function o3(_){if(bi){var M=qo;if(M){var D=M;if(!xj(_,M)){if(s3(_))throw Error(o(418));M=ue(D);var I=Wo;M&&xj(_,M)?yj(I,D):(_.flags=_.flags&-4097|2,bi=!1,Wo=_)}}else{if(s3(_))throw Error(o(418));_.flags=_.flags&-4097|2,bi=!1,Wo=_}}}function bj(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Wo=_}function Wx(_){if(!oe||_!==Wo)return!1;if(!bi)return bj(_),bi=!0,!1;if(_.tag!==3&&(_.tag!==5||Ti(_.type)&&!J(_.type,_.memoizedProps))){var M=qo;if(M){if(s3(_)){for(_=qo;_;)_=ue(_);throw Error(o(418))}for(;M;)yj(_,M),M=ue(M)}}if(bj(_),_.tag===13){if(!oe)throw Error(o(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));qo=ct(_)}else qo=Wo?ue(_.stateNode):null;return!0}function Bg(){oe&&(qo=Wo=null,Gx=bi=!1)}function a3(_){El===null?El=[_]:El.push(_)}function qx(_,M,D){if(_=D.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(o(309));var I=D.stateNode}if(!I)throw Error(o(147,_));var G=I,Q=""+_;return M!==null&&M.ref!==null&&typeof M.ref=="function"&&M.ref._stringRef===Q?M.ref:(M=function(pe){var Re=G.refs;Re===fj&&(Re=G.refs={}),pe===null?delete Re[Q]:Re[Q]=pe},M._stringRef=Q,M)}if(typeof _!="string")throw Error(o(284));if(!D._owner)throw Error(o(290,_))}return _}function oE(_,M){throw _=Object.prototype.toString.call(M),Error(o(31,_==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":_))}function wj(_){var M=_._init;return M(_._payload)}function _j(_){function M(Ve,Oe){if(_){var $e=Ve.deletions;$e===null?(Ve.deletions=[Oe],Ve.flags|=16):$e.push(Oe)}}function D(Ve,Oe){if(!_)return null;for(;Oe!==null;)M(Ve,Oe),Oe=Oe.sibling;return null}function I(Ve,Oe){for(Ve=new Map;Oe!==null;)Oe.key!==null?Ve.set(Oe.key,Oe):Ve.set(Oe.index,Oe),Oe=Oe.sibling;return Ve}function G(Ve,Oe){return Ve=lh(Ve,Oe),Ve.index=0,Ve.sibling=null,Ve}function Q(Ve,Oe,$e){return Ve.index=$e,_?($e=Ve.alternate,$e!==null?($e=$e.index,$e<Oe?(Ve.flags|=2,Oe):$e):(Ve.flags|=2,Oe)):(Ve.flags|=1048576,Oe)}function pe(Ve){return _&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Re(Ve,Oe,$e,ht){return Oe===null||Oe.tag!==6?(Oe=G3($e,Ve.mode,ht),Oe.return=Ve,Oe):(Oe=G(Oe,$e),Oe.return=Ve,Oe)}function Xe(Ve,Oe,$e,ht){var At=$e.type;return At===d?_t(Ve,Oe,$e.props.children,ht,$e.key):Oe!==null&&(Oe.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===x&&wj(At)===Oe.type)?(ht=G(Oe,$e.props),ht.ref=qx(Ve,Oe,$e),ht.return=Ve,ht):(ht=BE($e.type,$e.key,$e.props,null,Ve.mode,ht),ht.ref=qx(Ve,Oe,$e),ht.return=Ve,ht)}function it(Ve,Oe,$e,ht){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==$e.containerInfo||Oe.stateNode.implementation!==$e.implementation?(Oe=W3($e,Ve.mode,ht),Oe.return=Ve,Oe):(Oe=G(Oe,$e.children||[]),Oe.return=Ve,Oe)}function _t(Ve,Oe,$e,ht,At){return Oe===null||Oe.tag!==7?(Oe=vp($e,Ve.mode,ht,At),Oe.return=Ve,Oe):(Oe=G(Oe,$e),Oe.return=Ve,Oe)}function en(Ve,Oe,$e){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=G3(""+Oe,Ve.mode,$e),Oe.return=Ve,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case l:return $e=BE(Oe.type,Oe.key,Oe.props,null,Ve.mode,$e),$e.ref=qx(Ve,null,Oe),$e.return=Ve,$e;case c:return Oe=W3(Oe,Ve.mode,$e),Oe.return=Ve,Oe;case x:var ht=Oe._init;return en(Ve,ht(Oe._payload),$e)}if(B(Oe)||E(Oe))return Oe=vp(Oe,Ve.mode,$e,null),Oe.return=Ve,Oe;oE(Ve,Oe)}return null}function kt(Ve,Oe,$e,ht){var At=Oe!==null?Oe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return At!==null?null:Re(Ve,Oe,""+$e,ht);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case l:return $e.key===At?Xe(Ve,Oe,$e,ht):null;case c:return $e.key===At?it(Ve,Oe,$e,ht):null;case x:return At=$e._init,kt(Ve,Oe,At($e._payload),ht)}if(B($e)||E($e))return At!==null?null:_t(Ve,Oe,$e,ht,null);oE(Ve,$e)}return null}function ri(Ve,Oe,$e,ht,At){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Ve=Ve.get($e)||null,Re(Oe,Ve,""+ht,At);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case l:return Ve=Ve.get(ht.key===null?$e:ht.key)||null,Xe(Oe,Ve,ht,At);case c:return Ve=Ve.get(ht.key===null?$e:ht.key)||null,it(Oe,Ve,ht,At);case x:var dn=ht._init;return ri(Ve,Oe,$e,dn(ht._payload),At)}if(B(ht)||E(ht))return Ve=Ve.get($e)||null,_t(Oe,Ve,ht,At,null);oE(Oe,ht)}return null}function Tt(Ve,Oe,$e,ht){for(var At=null,dn=null,tn=Oe,Pn=Oe=0,qr=null;tn!==null&&Pn<$e.length;Pn++){tn.index>Pn?(qr=tn,tn=null):qr=tn.sibling;var Dn=kt(Ve,tn,$e[Pn],ht);if(Dn===null){tn===null&&(tn=qr);break}_&&tn&&Dn.alternate===null&&M(Ve,tn),Oe=Q(Dn,Oe,Pn),dn===null?At=Dn:dn.sibling=Dn,dn=Dn,tn=qr}if(Pn===$e.length)return D(Ve,tn),bi&&up(Ve,Pn),At;if(tn===null){for(;Pn<$e.length;Pn++)tn=en(Ve,$e[Pn],ht),tn!==null&&(Oe=Q(tn,Oe,Pn),dn===null?At=tn:dn.sibling=tn,dn=tn);return bi&&up(Ve,Pn),At}for(tn=I(Ve,tn);Pn<$e.length;Pn++)qr=ri(tn,Ve,Pn,$e[Pn],ht),qr!==null&&(_&&qr.alternate!==null&&tn.delete(qr.key===null?Pn:qr.key),Oe=Q(qr,Oe,Pn),dn===null?At=qr:dn.sibling=qr,dn=qr);return _&&tn.forEach(function(ch){return M(Ve,ch)}),bi&&up(Ve,Pn),At}function ws(Ve,Oe,$e,ht){var At=E($e);if(typeof At!="function")throw Error(o(150));if($e=At.call($e),$e==null)throw Error(o(151));for(var dn=At=null,tn=Oe,Pn=Oe=0,qr=null,Dn=$e.next();tn!==null&&!Dn.done;Pn++,Dn=$e.next()){tn.index>Pn?(qr=tn,tn=null):qr=tn.sibling;var ch=kt(Ve,tn,Dn.value,ht);if(ch===null){tn===null&&(tn=qr);break}_&&tn&&ch.alternate===null&&M(Ve,tn),Oe=Q(ch,Oe,Pn),dn===null?At=ch:dn.sibling=ch,dn=ch,tn=qr}if(Dn.done)return D(Ve,tn),bi&&up(Ve,Pn),At;if(tn===null){for(;!Dn.done;Pn++,Dn=$e.next())Dn=en(Ve,Dn.value,ht),Dn!==null&&(Oe=Q(Dn,Oe,Pn),dn===null?At=Dn:dn.sibling=Dn,dn=Dn);return bi&&up(Ve,Pn),At}for(tn=I(Ve,tn);!Dn.done;Pn++,Dn=$e.next())Dn=ri(tn,Ve,Pn,Dn.value,ht),Dn!==null&&(_&&Dn.alternate!==null&&tn.delete(Dn.key===null?Pn:Dn.key),Oe=Q(Dn,Oe,Pn),dn===null?At=Dn:dn.sibling=Dn,dn=Dn);return _&&tn.forEach(function(wge){return M(Ve,wge)}),bi&&up(Ve,Pn),At}function ka(Ve,Oe,$e,ht){if(typeof $e=="object"&&$e!==null&&$e.type===d&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case l:e:{for(var At=$e.key,dn=Oe;dn!==null;){if(dn.key===At){if(At=$e.type,At===d){if(dn.tag===7){D(Ve,dn.sibling),Oe=G(dn,$e.props.children),Oe.return=Ve,Ve=Oe;break e}}else if(dn.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===x&&wj(At)===dn.type){D(Ve,dn.sibling),Oe=G(dn,$e.props),Oe.ref=qx(Ve,dn,$e),Oe.return=Ve,Ve=Oe;break e}D(Ve,dn);break}else M(Ve,dn);dn=dn.sibling}$e.type===d?(Oe=vp($e.props.children,Ve.mode,ht,$e.key),Oe.return=Ve,Ve=Oe):(ht=BE($e.type,$e.key,$e.props,null,Ve.mode,ht),ht.ref=qx(Ve,Oe,$e),ht.return=Ve,Ve=ht)}return pe(Ve);case c:e:{for(dn=$e.key;Oe!==null;){if(Oe.key===dn)if(Oe.tag===4&&Oe.stateNode.containerInfo===$e.containerInfo&&Oe.stateNode.implementation===$e.implementation){D(Ve,Oe.sibling),Oe=G(Oe,$e.children||[]),Oe.return=Ve,Ve=Oe;break e}else{D(Ve,Oe);break}else M(Ve,Oe);Oe=Oe.sibling}Oe=W3($e,Ve.mode,ht),Oe.return=Ve,Ve=Oe}return pe(Ve);case x:return dn=$e._init,ka(Ve,Oe,dn($e._payload),ht)}if(B($e))return Tt(Ve,Oe,$e,ht);if(E($e))return ws(Ve,Oe,$e,ht);oE(Ve,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Oe!==null&&Oe.tag===6?(D(Ve,Oe.sibling),Oe=G(Oe,$e),Oe.return=Ve,Ve=Oe):(D(Ve,Oe),Oe=G3($e,Ve.mode,ht),Oe.return=Ve,Ve=Oe),pe(Ve)):D(Ve,Oe)}return ka}var zg=_j(!0),Sj=_j(!1),$x={},Ra=gs($x),Xx=gs($x),Fg=gs($x);function xc(_){if(_===$x)throw Error(o(174));return _}function l3(_,M){rn(Fg,M),rn(Xx,_),rn(Ra,$x),_=X(M),Mt(Ra),rn(Ra,_)}function Ug(){Mt(Ra),Mt(Xx),Mt(Fg)}function Ej(_){var M=xc(Fg.current),D=xc(Ra.current);M=H(D,_.type,M),D!==M&&(rn(Xx,_),rn(Ra,M))}function c3(_){Xx.current===_&&(Mt(Ra),Mt(Xx))}var Ci=gs(0);function aE(_){for(var M=_;M!==null;){if(M.tag===13){var D=M.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||Og(D)||lp(D)))return M}else if(M.tag===19&&M.memoizedProps.revealOrder!==void 0){if(M.flags&128)return M}else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===_)break;for(;M.sibling===null;){if(M.return===null||M.return===_)return null;M=M.return}M.sibling.return=M.return,M=M.sibling}return null}var u3=[];function d3(){for(var _=0;_<u3.length;_++){var M=u3[_];re?M._workInProgressVersionPrimary=null:M._workInProgressVersionSecondary=null}u3.length=0}var lE=a.ReactCurrentDispatcher,Oa=a.ReactCurrentBatchConfig,Vg=0,Ui=null,ys=null,Wr=null,cE=!1,Yx=!1,Kx=0,qme=0;function xs(){throw Error(o(321))}function h3(_,M){if(M===null)return!1;for(var D=0;D<M.length&&D<_.length;D++)if(!gc(_[D],M[D]))return!1;return!0}function f3(_,M,D,I,G,Q){if(Vg=Q,Ui=M,M.memoizedState=null,M.updateQueue=null,M.lanes=0,lE.current=_===null||_.memoizedState===null?Kme:Zme,_=D(I,G),Yx){Q=0;do{if(Yx=!1,Kx=0,25<=Q)throw Error(o(301));Q+=1,Wr=ys=null,M.updateQueue=null,lE.current=Qme,_=D(I,G)}while(Yx)}if(lE.current=pE,M=ys!==null&&ys.next!==null,Vg=0,Wr=ys=Ui=null,cE=!1,M)throw Error(o(300));return _}function p3(){var _=Kx!==0;return Kx=0,_}function Pu(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?Ui.memoizedState=Wr=_:Wr=Wr.next=_,Wr}function bc(){if(ys===null){var _=Ui.alternate;_=_!==null?_.memoizedState:null}else _=ys.next;var M=Wr===null?Ui.memoizedState:Wr.next;if(M!==null)Wr=M,ys=_;else{if(_===null)throw Error(o(310));ys=_,_={memoizedState:ys.memoizedState,baseState:ys.baseState,baseQueue:ys.baseQueue,queue:ys.queue,next:null},Wr===null?Ui.memoizedState=Wr=_:Wr=Wr.next=_}return Wr}function dp(_,M){return typeof M=="function"?M(_):M}function uE(_){var M=bc(),D=M.queue;if(D===null)throw Error(o(311));D.lastRenderedReducer=_;var I=ys,G=I.baseQueue,Q=D.pending;if(Q!==null){if(G!==null){var pe=G.next;G.next=Q.next,Q.next=pe}I.baseQueue=G=Q,D.pending=null}if(G!==null){Q=G.next,I=I.baseState;var Re=pe=null,Xe=null,it=Q;do{var _t=it.lane;if((Vg&_t)===_t)Xe!==null&&(Xe=Xe.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),I=it.hasEagerState?it.eagerState:_(I,it.action);else{var en={lane:_t,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};Xe===null?(Re=Xe=en,pe=I):Xe=Xe.next=en,Ui.lanes|=_t,jg|=_t}it=it.next}while(it!==null&&it!==Q);Xe===null?pe=I:Xe.next=Re,gc(I,M.memoizedState)||($o=!0),M.memoizedState=I,M.baseState=pe,M.baseQueue=Xe,D.lastRenderedState=I}if(_=D.interleaved,_!==null){G=_;do Q=G.lane,Ui.lanes|=Q,jg|=Q,G=G.next;while(G!==_)}else G===null&&(D.lanes=0);return[M.memoizedState,D.dispatch]}function dE(_){var M=bc(),D=M.queue;if(D===null)throw Error(o(311));D.lastRenderedReducer=_;var I=D.dispatch,G=D.pending,Q=M.memoizedState;if(G!==null){D.pending=null;var pe=G=G.next;do Q=_(Q,pe.action),pe=pe.next;while(pe!==G);gc(Q,M.memoizedState)||($o=!0),M.memoizedState=Q,M.baseQueue===null&&(M.baseState=Q),D.lastRenderedState=Q}return[Q,I]}function Mj(){}function Aj(_,M){var D=Ui,I=bc(),G=M(),Q=!gc(I.memoizedState,G);if(Q&&(I.memoizedState=G,$o=!0),I=I.queue,Qx(Pj.bind(null,D,I,_),[_]),I.getSnapshot!==M||Q||Wr!==null&&Wr.memoizedState.tag&1){if(D.flags|=2048,Zx(9,Cj.bind(null,D,I,G,M),void 0,null),cr===null)throw Error(o(349));Vg&30||Tj(D,M,G)}return G}function Tj(_,M,D){_.flags|=16384,_={getSnapshot:M,value:D},M=Ui.updateQueue,M===null?(M={lastEffect:null,stores:null},Ui.updateQueue=M,M.stores=[_]):(D=M.stores,D===null?M.stores=[_]:D.push(_))}function Cj(_,M,D,I){M.value=D,M.getSnapshot=I,Dj(M)&&La(_,1,-1)}function Pj(_,M,D){return D(function(){Dj(M)&&La(_,1,-1)})}function Dj(_){var M=_.getSnapshot;_=_.value;try{var D=M();return!gc(_,D)}catch{return!0}}function m3(_){var M=Pu();return typeof _=="function"&&(_=_()),M.memoizedState=M.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dp,lastRenderedState:_},M.queue=_,_=_.dispatch=Yme.bind(null,Ui,_),[M.memoizedState,_]}function Zx(_,M,D,I){return _={tag:_,create:M,destroy:D,deps:I,next:null},M=Ui.updateQueue,M===null?(M={lastEffect:null,stores:null},Ui.updateQueue=M,M.lastEffect=_.next=_):(D=M.lastEffect,D===null?M.lastEffect=_.next=_:(I=D.next,D.next=_,_.next=I,M.lastEffect=_)),_}function Rj(){return bc().memoizedState}function hE(_,M,D,I){var G=Pu();Ui.flags|=_,G.memoizedState=Zx(1|M,D,void 0,I===void 0?null:I)}function fE(_,M,D,I){var G=bc();I=I===void 0?null:I;var Q=void 0;if(ys!==null){var pe=ys.memoizedState;if(Q=pe.destroy,I!==null&&h3(I,pe.deps)){G.memoizedState=Zx(M,D,Q,I);return}}Ui.flags|=_,G.memoizedState=Zx(1|M,D,Q,I)}function g3(_,M){return hE(8390656,8,_,M)}function Qx(_,M){return fE(2048,8,_,M)}function Oj(_,M){return fE(4,2,_,M)}function Lj(_,M){return fE(4,4,_,M)}function Ij(_,M){if(typeof M=="function")return _=_(),M(_),function(){M(null)};if(M!=null)return _=_(),M.current=_,function(){M.current=null}}function kj(_,M,D){return D=D!=null?D.concat([_]):null,fE(4,4,Ij.bind(null,M,_),D)}function v3(){}function Nj(_,M){var D=bc();M=M===void 0?null:M;var I=D.memoizedState;return I!==null&&M!==null&&h3(M,I[1])?I[0]:(D.memoizedState=[_,M],_)}function Bj(_,M){var D=bc();M=M===void 0?null:M;var I=D.memoizedState;return I!==null&&M!==null&&h3(M,I[1])?I[0]:(_=_(),D.memoizedState=[_,M],_)}function $me(_,M){var D=Cn;Cn=D!==0&&4>D?D:4,_(!0);var I=Oa.transition;Oa.transition={};try{_(!1),M()}finally{Cn=D,Oa.transition=I}}function zj(){return bc().memoizedState}function Xme(_,M,D){var I=oh(_);D={lane:I,action:D,hasEagerState:!1,eagerState:null,next:null},Fj(_)?Uj(M,D):(Vj(_,M,D),D=Ws(),_=La(_,I,D),_!==null&&Hj(_,M,I))}function Yme(_,M,D){var I=oh(_),G={lane:I,action:D,hasEagerState:!1,eagerState:null,next:null};if(Fj(_))Uj(M,G);else{Vj(_,M,G);var Q=_.alternate;if(_.lanes===0&&(Q===null||Q.lanes===0)&&(Q=M.lastRenderedReducer,Q!==null))try{var pe=M.lastRenderedState,Re=Q(pe,D);if(G.hasEagerState=!0,G.eagerState=Re,gc(Re,pe))return}catch{}finally{}D=Ws(),_=La(_,I,D),_!==null&&Hj(_,M,I)}}function Fj(_){var M=_.alternate;return _===Ui||M!==null&&M===Ui}function Uj(_,M){Yx=cE=!0;var D=_.pending;D===null?M.next=M:(M.next=D.next,D.next=M),_.pending=M}function Vj(_,M,D){cr!==null&&_.mode&1&&!(fn&2)?(_=M.interleaved,_===null?(D.next=D,yc===null?yc=[M]:yc.push(M)):(D.next=_.next,_.next=D),M.interleaved=D):(_=M.pending,_===null?D.next=D:(D.next=_.next,_.next=D),M.pending=D)}function Hj(_,M,D){if(D&4194240){var I=M.lanes;I&=_.pendingLanes,D|=I,M.lanes=D,WR(_,D)}}var pE={readContext:Ca,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},Kme={readContext:Ca,useCallback:function(_,M){return Pu().memoizedState=[_,M===void 0?null:M],_},useContext:Ca,useEffect:g3,useImperativeHandle:function(_,M,D){return D=D!=null?D.concat([_]):null,hE(4194308,4,Ij.bind(null,M,_),D)},useLayoutEffect:function(_,M){return hE(4194308,4,_,M)},useInsertionEffect:function(_,M){return hE(4,2,_,M)},useMemo:function(_,M){var D=Pu();return M=M===void 0?null:M,_=_(),D.memoizedState=[_,M],_},useReducer:function(_,M,D){var I=Pu();return M=D!==void 0?D(M):M,I.memoizedState=I.baseState=M,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:M},I.queue=_,_=_.dispatch=Xme.bind(null,Ui,_),[I.memoizedState,_]},useRef:function(_){var M=Pu();return _={current:_},M.memoizedState=_},useState:m3,useDebugValue:v3,useDeferredValue:function(_){var M=m3(_),D=M[0],I=M[1];return g3(function(){var G=Oa.transition;Oa.transition={};try{I(_)}finally{Oa.transition=G}},[_]),D},useTransition:function(){var _=m3(!1),M=_[0];return _=$me.bind(null,_[1]),Pu().memoizedState=_,[M,_]},useMutableSource:function(){},useSyncExternalStore:function(_,M,D){var I=Ui,G=Pu();if(bi){if(D===void 0)throw Error(o(407));D=D()}else{if(D=M(),cr===null)throw Error(o(349));Vg&30||Tj(I,M,D)}G.memoizedState=D;var Q={value:D,getSnapshot:M};return G.queue=Q,g3(Pj.bind(null,I,Q,_),[_]),I.flags|=2048,Zx(9,Cj.bind(null,I,Q,D,M),void 0,null),D},useId:function(){var _=Pu(),M=cr.identifierPrefix;if(bi){var D=Cu,I=Tu;D=(I&~(1<<32-_l(I)-1)).toString(32)+D,M=":"+M+"R"+D,D=Kx++,0<D&&(M+="H"+D.toString(32)),M+=":"}else D=qme++,M=":"+M+"r"+D.toString(32)+":";return _.memoizedState=M},unstable_isNewReconciler:!1},Zme={readContext:Ca,useCallback:Nj,useContext:Ca,useEffect:Qx,useImperativeHandle:kj,useInsertionEffect:Oj,useLayoutEffect:Lj,useMemo:Bj,useReducer:uE,useRef:Rj,useState:function(){return uE(dp)},useDebugValue:v3,useDeferredValue:function(_){var M=uE(dp),D=M[0],I=M[1];return Qx(function(){var G=Oa.transition;Oa.transition={};try{I(_)}finally{Oa.transition=G}},[_]),D},useTransition:function(){var _=uE(dp)[0],M=bc().memoizedState;return[_,M]},useMutableSource:Mj,useSyncExternalStore:Aj,useId:zj,unstable_isNewReconciler:!1},Qme={readContext:Ca,useCallback:Nj,useContext:Ca,useEffect:Qx,useImperativeHandle:kj,useInsertionEffect:Oj,useLayoutEffect:Lj,useMemo:Bj,useReducer:dE,useRef:Rj,useState:function(){return dE(dp)},useDebugValue:v3,useDeferredValue:function(_){var M=dE(dp),D=M[0],I=M[1];return Qx(function(){var G=Oa.transition;Oa.transition={};try{I(_)}finally{Oa.transition=G}},[_]),D},useTransition:function(){var _=dE(dp)[0],M=bc().memoizedState;return[_,M]},useMutableSource:Mj,useSyncExternalStore:Aj,useId:zj,unstable_isNewReconciler:!1};function y3(_,M){try{var D="",I=M;do D+=Wme(I),I=I.return;while(I);var G=D}catch(Q){G=`
Error generating stack: `+Q.message+`
`+Q.stack}return{value:_,source:M,stack:G}}function x3(_,M){try{console.error(M.value)}catch(D){setTimeout(function(){throw D})}}var Jme=typeof WeakMap=="function"?WeakMap:Map;function jj(_,M,D){D=Au(-1,D),D.tag=3,D.payload={element:null};var I=M.value;return D.callback=function(){DE||(DE=!0,B3=I),x3(_,M)},D}function Gj(_,M,D){D=Au(-1,D),D.tag=3;var I=_.type.getDerivedStateFromError;if(typeof I=="function"){var G=M.value;D.payload=function(){return I(G)},D.callback=function(){x3(_,M)}}var Q=_.stateNode;return Q!==null&&typeof Q.componentDidCatch=="function"&&(D.callback=function(){x3(_,M),typeof I!="function"&&(rh===null?rh=new Set([this]):rh.add(this));var pe=M.stack;this.componentDidCatch(M.value,{componentStack:pe!==null?pe:""})}),D}function Wj(_,M,D){var I=_.pingCache;if(I===null){I=_.pingCache=new Jme;var G=new Set;I.set(M,G)}else G=I.get(M),G===void 0&&(G=new Set,I.set(M,G));G.has(D)||(G.add(D),_=fge.bind(null,_,M,D),M.then(_,_))}function qj(_){do{var M;if((M=_.tag===13)&&(M=_.memoizedState,M=M!==null?M.dehydrated!==null:!0),M)return _;_=_.return}while(_!==null);return null}function $j(_,M,D,I,G){return _.mode&1?(_.flags|=65536,_.lanes=G,_):(_===M?_.flags|=65536:(_.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(M=Au(-1,1),M.tag=2,ih(D,M))),D.lanes|=1),_)}function wc(_){_.flags|=4}function Xj(_,M){if(_!==null&&_.child===M.child)return!0;if(M.flags&16)return!1;for(_=M.child;_!==null;){if(_.flags&12854||_.subtreeFlags&12854)return!1;_=_.sibling}return!0}var Jx,e1,mE,gE;if(me)Jx=function(_,M){for(var D=M.child;D!==null;){if(D.tag===5||D.tag===6)z(_,D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===M)break;for(;D.sibling===null;){if(D.return===null||D.return===M)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},e1=function(){},mE=function(_,M,D,I,G){if(_=_.memoizedProps,_!==I){var Q=M.stateNode,pe=xc(Ra.current);D=K(Q,D,_,I,G,pe),(M.updateQueue=D)&&wc(M)}},gE=function(_,M,D,I){D!==I&&wc(M)};else if(se){Jx=function(_,M,D,I){for(var G=M.child;G!==null;){if(G.tag===5){var Q=G.stateNode;D&&I&&(Q=It(Q,G.type,G.memoizedProps,G)),z(_,Q)}else if(G.tag===6)Q=G.stateNode,D&&I&&(Q=Bi(Q,G.memoizedProps,G)),z(_,Q);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)Q=G.child,Q!==null&&(Q.return=G),Jx(_,G,!0,!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===M)break;for(;G.sibling===null;){if(G.return===null||G.return===M)return;G=G.return}G.sibling.return=G.return,G=G.sibling}};var Yj=function(_,M,D,I){for(var G=M.child;G!==null;){if(G.tag===5){var Q=G.stateNode;D&&I&&(Q=It(Q,G.type,G.memoizedProps,G)),un(_,Q)}else if(G.tag===6)Q=G.stateNode,D&&I&&(Q=Bi(Q,G.memoizedProps,G)),un(_,Q);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)Q=G.child,Q!==null&&(Q.return=G),Yj(_,G,!0,!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===M)break;for(;G.sibling===null;){if(G.return===null||G.return===M)return;G=G.return}G.sibling.return=G.return,G=G.sibling}};e1=function(_,M){var D=M.stateNode;if(!Xj(_,M)){_=D.containerInfo;var I=yt(_);Yj(I,M,!1,!1),D.pendingChildren=I,wc(M),bn(_,I)}},mE=function(_,M,D,I,G){var Q=_.stateNode,pe=_.memoizedProps;if((_=Xj(_,M))&&pe===I)M.stateNode=Q;else{var Re=M.stateNode,Xe=xc(Ra.current),it=null;pe!==I&&(it=K(Re,D,pe,I,G,Xe)),_&&it===null?M.stateNode=Q:(Q=Qe(Q,it,D,pe,I,M,_,Re),W(Q,D,I,G,Xe)&&wc(M),M.stateNode=Q,_?wc(M):Jx(Q,M,!1,!1))}},gE=function(_,M,D,I){D!==I?(_=xc(Fg.current),D=xc(Ra.current),M.stateNode=F(I,_,D,M),wc(M)):M.stateNode=_.stateNode}}else e1=function(){},mE=function(){},gE=function(){};function t1(_,M){if(!bi)switch(_.tailMode){case"hidden":M=_.tail;for(var D=null;M!==null;)M.alternate!==null&&(D=M),M=M.sibling;D===null?_.tail=null:D.sibling=null;break;case"collapsed":D=_.tail;for(var I=null;D!==null;)D.alternate!==null&&(I=D),D=D.sibling;I===null?M||_.tail===null?_.tail=null:_.tail.sibling=null:I.sibling=null}}function bs(_){var M=_.alternate!==null&&_.alternate.child===_.child,D=0,I=0;if(M)for(var G=_.child;G!==null;)D|=G.lanes|G.childLanes,I|=G.subtreeFlags&14680064,I|=G.flags&14680064,G.return=_,G=G.sibling;else for(G=_.child;G!==null;)D|=G.lanes|G.childLanes,I|=G.subtreeFlags,I|=G.flags,G.return=_,G=G.sibling;return _.subtreeFlags|=I,_.childLanes=D,M}function ege(_,M,D){var I=M.pendingProps;switch(r3(M),M.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(M),null;case 1:return po(M.type)&&WS(),bs(M),null;case 3:return I=M.stateNode,Ug(),Mt(Fi),Mt(Qt),d3(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(_===null||_.child===null)&&(Wx(M)?wc(M):_===null||_.memoizedState.isDehydrated&&!(M.flags&256)||(M.flags|=1024,El!==null&&(U3(El),El=null))),e1(_,M),bs(M),null;case 5:c3(M),D=xc(Fg.current);var G=M.type;if(_!==null&&M.stateNode!=null)mE(_,M,G,I,D),_.ref!==M.ref&&(M.flags|=512,M.flags|=2097152);else{if(!I){if(M.stateNode===null)throw Error(o(166));return bs(M),null}if(_=xc(Ra.current),Wx(M)){if(!oe)throw Error(o(175));_=Ze(M.stateNode,M.type,M.memoizedProps,D,_,M,!Gx),M.updateQueue=_,_!==null&&wc(M)}else{var Q=k(G,I,D,_,M);Jx(Q,M,!1,!1),M.stateNode=Q,W(Q,G,I,D,_)&&wc(M)}M.ref!==null&&(M.flags|=512,M.flags|=2097152)}return bs(M),null;case 6:if(_&&M.stateNode!=null)gE(_,M,_.memoizedProps,I);else{if(typeof I!="string"&&M.stateNode===null)throw Error(o(166));if(_=xc(Fg.current),D=xc(Ra.current),Wx(M)){if(!oe)throw Error(o(176));if(_=M.stateNode,I=M.memoizedProps,(D=nt(_,I,M,!Gx))&&(G=Wo,G!==null))switch(Q=(G.mode&1)!==0,G.tag){case 3:Hr(G.stateNode.containerInfo,_,I,Q);break;case 5:ms(G.type,G.memoizedProps,G.stateNode,_,I,Q)}D&&wc(M)}else M.stateNode=F(I,_,D,M)}return bs(M),null;case 13:if(Mt(Ci),I=M.memoizedState,bi&&qo!==null&&M.mode&1&&!(M.flags&128)){for(_=qo;_;)_=ue(_);return Bg(),M.flags|=98560,M}if(I!==null&&I.dehydrated!==null){if(I=Wx(M),_===null){if(!I)throw Error(o(318));if(!oe)throw Error(o(344));if(_=M.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));lt(_,M)}else Bg(),!(M.flags&128)&&(M.memoizedState=null),M.flags|=4;return bs(M),null}return El!==null&&(U3(El),El=null),M.flags&128?(M.lanes=D,M):(I=I!==null,D=!1,_===null?Wx(M):D=_.memoizedState!==null,I&&!D&&(M.child.flags|=8192,M.mode&1&&(_===null||Ci.current&1?Sr===0&&(Sr=3):H3())),M.updateQueue!==null&&(M.flags|=4),bs(M),null);case 4:return Ug(),e1(_,M),_===null&&Ae(M.stateNode.containerInfo),bs(M),null;case 10:return QR(M.type._context),bs(M),null;case 17:return po(M.type)&&WS(),bs(M),null;case 19:if(Mt(Ci),G=M.memoizedState,G===null)return bs(M),null;if(I=(M.flags&128)!==0,Q=G.rendering,Q===null)if(I)t1(G,!1);else{if(Sr!==0||_!==null&&_.flags&128)for(_=M.child;_!==null;){if(Q=aE(_),Q!==null){for(M.flags|=128,t1(G,!1),_=Q.updateQueue,_!==null&&(M.updateQueue=_,M.flags|=4),M.subtreeFlags=0,_=D,I=M.child;I!==null;)D=I,G=_,D.flags&=14680066,Q=D.alternate,Q===null?(D.childLanes=0,D.lanes=G,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=Q.childLanes,D.lanes=Q.lanes,D.child=Q.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=Q.memoizedProps,D.memoizedState=Q.memoizedState,D.updateQueue=Q.updateQueue,D.type=Q.type,G=Q.dependencies,D.dependencies=G===null?null:{lanes:G.lanes,firstContext:G.firstContext}),I=I.sibling;return rn(Ci,Ci.current&1|2),M.child}_=_.sibling}G.tail!==null&&Gr()>N3&&(M.flags|=128,I=!0,t1(G,!1),M.lanes=4194304)}else{if(!I)if(_=aE(Q),_!==null){if(M.flags|=128,I=!0,_=_.updateQueue,_!==null&&(M.updateQueue=_,M.flags|=4),t1(G,!0),G.tail===null&&G.tailMode==="hidden"&&!Q.alternate&&!bi)return bs(M),null}else 2*Gr()-G.renderingStartTime>N3&&D!==1073741824&&(M.flags|=128,I=!0,t1(G,!1),M.lanes=4194304);G.isBackwards?(Q.sibling=M.child,M.child=Q):(_=G.last,_!==null?_.sibling=Q:M.child=Q,G.last=Q)}return G.tail!==null?(M=G.tail,G.rendering=M,G.tail=M.sibling,G.renderingStartTime=Gr(),M.sibling=null,_=Ci.current,rn(Ci,I?_&1|2:_&1),M):(bs(M),null);case 22:case 23:return V3(),I=M.memoizedState!==null,_!==null&&_.memoizedState!==null!==I&&(M.flags|=8192),I&&M.mode&1?Xo&1073741824&&(bs(M),me&&M.subtreeFlags&6&&(M.flags|=8192)):bs(M),null;case 24:return null;case 25:return null}throw Error(o(156,M.tag))}var tge=a.ReactCurrentOwner,$o=!1;function Gs(_,M,D,I){M.child=_===null?Sj(M,null,D,I):zg(M,_.child,D,I)}function Kj(_,M,D,I,G){D=D.render;var Q=M.ref;return Ig(M,G),I=f3(_,M,D,I,Q,G),D=p3(),_!==null&&!$o?(M.updateQueue=_.updateQueue,M.flags&=-2053,_.lanes&=~G,Du(_,M,G)):(bi&&D&&i3(M),M.flags|=1,Gs(_,M,I,G),M.child)}function Zj(_,M,D,I,G){if(_===null){var Q=D.type;return typeof Q=="function"&&!j3(Q)&&Q.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(M.tag=15,M.type=Q,Qj(_,M,Q,I,G)):(_=BE(D.type,null,I,M,M.mode,G),_.ref=M.ref,_.return=M,M.child=_)}if(Q=_.child,!(_.lanes&G)){var pe=Q.memoizedProps;if(D=D.compare,D=D!==null?D:QS,D(pe,I)&&_.ref===M.ref)return Du(_,M,G)}return M.flags|=1,_=lh(Q,I),_.ref=M.ref,_.return=M,M.child=_}function Qj(_,M,D,I,G){if(_!==null&&QS(_.memoizedProps,I)&&_.ref===M.ref)if($o=!1,(_.lanes&G)!==0)_.flags&131072&&($o=!0);else return M.lanes=_.lanes,Du(_,M,G);return b3(_,M,D,I,G)}function Jj(_,M,D){var I=M.pendingProps,G=I.children,Q=_!==null?_.memoizedState:null;if(I.mode==="hidden")if(!(M.mode&1))M.memoizedState={baseLanes:0,cachePool:null},rn(Hg,Xo),Xo|=D;else if(D&1073741824)M.memoizedState={baseLanes:0,cachePool:null},I=Q!==null?Q.baseLanes:D,rn(Hg,Xo),Xo|=I;else return _=Q!==null?Q.baseLanes|D:D,M.lanes=M.childLanes=1073741824,M.memoizedState={baseLanes:_,cachePool:null},M.updateQueue=null,rn(Hg,Xo),Xo|=_,null;else Q!==null?(I=Q.baseLanes|D,M.memoizedState=null):I=D,rn(Hg,Xo),Xo|=I;return Gs(_,M,G,D),M.child}function eG(_,M){var D=M.ref;(_===null&&D!==null||_!==null&&_.ref!==D)&&(M.flags|=512,M.flags|=2097152)}function b3(_,M,D,I,G){var Q=po(D)?wl:Qt.current;return Q=Ta(M,Q),Ig(M,G),D=f3(_,M,D,I,Q,G),I=p3(),_!==null&&!$o?(M.updateQueue=_.updateQueue,M.flags&=-2053,_.lanes&=~G,Du(_,M,G)):(bi&&I&&i3(M),M.flags|=1,Gs(_,M,D,G),M.child)}function tG(_,M,D,I,G){if(po(D)){var Q=!0;qS(M)}else Q=!1;if(Ig(M,G),M.stateNode===null)_!==null&&(_.alternate=null,M.alternate=null,M.flags|=2),mj(M,D,I),n3(M,D,I,G),I=!0;else if(_===null){var pe=M.stateNode,Re=M.memoizedProps;pe.props=Re;var Xe=pe.context,it=D.contextType;typeof it=="object"&&it!==null?it=Ca(it):(it=po(D)?wl:Qt.current,it=Ta(M,it));var _t=D.getDerivedStateFromProps,en=typeof _t=="function"||typeof pe.getSnapshotBeforeUpdate=="function";en||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Re!==I||Xe!==it)&&gj(M,pe,I,it),nh=!1;var kt=M.memoizedState;pe.state=kt,nE(M,I,pe,G),Xe=M.memoizedState,Re!==I||kt!==Xe||Fi.current||nh?(typeof _t=="function"&&(t3(M,D,_t,I),Xe=M.memoizedState),(Re=nh||pj(M,D,Re,I,kt,Xe,it))?(en||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(M.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(M.flags|=4194308),M.memoizedProps=I,M.memoizedState=Xe),pe.props=I,pe.state=Xe,pe.context=it,I=Re):(typeof pe.componentDidMount=="function"&&(M.flags|=4194308),I=!1)}else{pe=M.stateNode,uj(_,M),Re=M.memoizedProps,it=M.type===M.elementType?Re:Sl(M.type,Re),pe.props=it,en=M.pendingProps,kt=pe.context,Xe=D.contextType,typeof Xe=="object"&&Xe!==null?Xe=Ca(Xe):(Xe=po(D)?wl:Qt.current,Xe=Ta(M,Xe));var ri=D.getDerivedStateFromProps;(_t=typeof ri=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Re!==en||kt!==Xe)&&gj(M,pe,I,Xe),nh=!1,kt=M.memoizedState,pe.state=kt,nE(M,I,pe,G);var Tt=M.memoizedState;Re!==en||kt!==Tt||Fi.current||nh?(typeof ri=="function"&&(t3(M,D,ri,I),Tt=M.memoizedState),(it=nh||pj(M,D,it,I,kt,Tt,Xe)||!1)?(_t||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(I,Tt,Xe),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(I,Tt,Xe)),typeof pe.componentDidUpdate=="function"&&(M.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(M.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Re===_.memoizedProps&&kt===_.memoizedState||(M.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Re===_.memoizedProps&&kt===_.memoizedState||(M.flags|=1024),M.memoizedProps=I,M.memoizedState=Tt),pe.props=I,pe.state=Tt,pe.context=Xe,I=it):(typeof pe.componentDidUpdate!="function"||Re===_.memoizedProps&&kt===_.memoizedState||(M.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Re===_.memoizedProps&&kt===_.memoizedState||(M.flags|=1024),I=!1)}return w3(_,M,D,I,Q,G)}function w3(_,M,D,I,G,Q){eG(_,M);var pe=(M.flags&128)!==0;if(!I&&!pe)return G&&sj(M,D,!1),Du(_,M,Q);I=M.stateNode,tge.current=M;var Re=pe&&typeof D.getDerivedStateFromError!="function"?null:I.render();return M.flags|=1,_!==null&&pe?(M.child=zg(M,_.child,null,Q),M.child=zg(M,null,Re,Q)):Gs(_,M,Re,Q),M.memoizedState=I.state,G&&sj(M,D,!0),M.child}function nG(_){var M=_.stateNode;M.pendingContext?ij(_,M.pendingContext,M.pendingContext!==M.context):M.context&&ij(_,M.context,!1),l3(_,M.containerInfo)}function iG(_,M,D,I,G){return Bg(),a3(G),M.flags|=256,Gs(_,M,D,I),M.child}var vE={dehydrated:null,treeContext:null,retryLane:0};function yE(_){return{baseLanes:_,cachePool:null}}function rG(_,M,D){var I=M.pendingProps,G=Ci.current,Q=!1,pe=(M.flags&128)!==0,Re;if((Re=pe)||(Re=_!==null&&_.memoizedState===null?!1:(G&2)!==0),Re?(Q=!0,M.flags&=-129):(_===null||_.memoizedState!==null)&&(G|=1),rn(Ci,G&1),_===null)return o3(M),_=M.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(M.mode&1?lp(_)?M.lanes=8:M.lanes=1073741824:M.lanes=1,null):(G=I.children,_=I.fallback,Q?(I=M.mode,Q=M.child,G={mode:"hidden",children:G},!(I&1)&&Q!==null?(Q.childLanes=0,Q.pendingProps=G):Q=zE(G,I,0,null),_=vp(_,I,D,null),Q.return=M,_.return=M,Q.sibling=_,M.child=Q,M.child.memoizedState=yE(D),M.memoizedState=vE,_):_3(M,G));if(G=_.memoizedState,G!==null){if(Re=G.dehydrated,Re!==null){if(pe)return M.flags&256?(M.flags&=-257,xE(_,M,D,Error(o(422)))):M.memoizedState!==null?(M.child=_.child,M.flags|=128,null):(Q=I.fallback,G=M.mode,I=zE({mode:"visible",children:I.children},G,0,null),Q=vp(Q,G,D,null),Q.flags|=2,I.return=M,Q.return=M,I.sibling=Q,M.child=I,M.mode&1&&zg(M,_.child,null,D),M.child.memoizedState=yE(D),M.memoizedState=vE,Q);if(!(M.mode&1))M=xE(_,M,D,null);else if(lp(Re))M=xE(_,M,D,Error(o(419)));else if(I=(D&_.childLanes)!==0,$o||I){if(I=cr,I!==null){switch(D&-D){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}I=Q&(I.suspendedLanes|D)?0:Q,I!==0&&I!==G.retryLane&&(G.retryLane=I,La(_,I,-1))}H3(),M=xE(_,M,D,Error(o(421)))}else Og(Re)?(M.flags|=128,M.child=_.child,M=pge.bind(null,_),Y(Re,M),M=null):(D=G.treeContext,oe&&(qo=we(Re),Wo=M,bi=!0,El=null,Gx=!1,D!==null&&(Pa[Da++]=Tu,Pa[Da++]=Cu,Pa[Da++]=cp,Tu=D.id,Cu=D.overflow,cp=M)),M=_3(M,M.pendingProps.children),M.flags|=4096);return M}return Q?(I=oG(_,M,I.children,I.fallback,D),Q=M.child,G=_.child.memoizedState,Q.memoizedState=G===null?yE(D):{baseLanes:G.baseLanes|D,cachePool:null},Q.childLanes=_.childLanes&~D,M.memoizedState=vE,I):(D=sG(_,M,I.children,D),M.memoizedState=null,D)}return Q?(I=oG(_,M,I.children,I.fallback,D),Q=M.child,G=_.child.memoizedState,Q.memoizedState=G===null?yE(D):{baseLanes:G.baseLanes|D,cachePool:null},Q.childLanes=_.childLanes&~D,M.memoizedState=vE,I):(D=sG(_,M,I.children,D),M.memoizedState=null,D)}function _3(_,M){return M=zE({mode:"visible",children:M},_.mode,0,null),M.return=_,_.child=M}function sG(_,M,D,I){var G=_.child;return _=G.sibling,D=lh(G,{mode:"visible",children:D}),!(M.mode&1)&&(D.lanes=I),D.return=M,D.sibling=null,_!==null&&(I=M.deletions,I===null?(M.deletions=[_],M.flags|=16):I.push(_)),M.child=D}function oG(_,M,D,I,G){var Q=M.mode;_=_.child;var pe=_.sibling,Re={mode:"hidden",children:D};return!(Q&1)&&M.child!==_?(D=M.child,D.childLanes=0,D.pendingProps=Re,M.deletions=null):(D=lh(_,Re),D.subtreeFlags=_.subtreeFlags&14680064),pe!==null?I=lh(pe,I):(I=vp(I,Q,G,null),I.flags|=2),I.return=M,D.return=M,D.sibling=I,M.child=D,I}function xE(_,M,D,I){return I!==null&&a3(I),zg(M,_.child,null,D),_=_3(M,M.pendingProps.children),_.flags|=2,M.memoizedState=null,_}function aG(_,M,D){_.lanes|=M;var I=_.alternate;I!==null&&(I.lanes|=M),JR(_.return,M,D)}function S3(_,M,D,I,G){var Q=_.memoizedState;Q===null?_.memoizedState={isBackwards:M,rendering:null,renderingStartTime:0,last:I,tail:D,tailMode:G}:(Q.isBackwards=M,Q.rendering=null,Q.renderingStartTime=0,Q.last=I,Q.tail=D,Q.tailMode=G)}function lG(_,M,D){var I=M.pendingProps,G=I.revealOrder,Q=I.tail;if(Gs(_,M,I.children,D),I=Ci.current,I&2)I=I&1|2,M.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=M.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&aG(_,D,M);else if(_.tag===19)aG(_,D,M);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===M)break e;for(;_.sibling===null;){if(_.return===null||_.return===M)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}I&=1}if(rn(Ci,I),!(M.mode&1))M.memoizedState=null;else switch(G){case"forwards":for(D=M.child,G=null;D!==null;)_=D.alternate,_!==null&&aE(_)===null&&(G=D),D=D.sibling;D=G,D===null?(G=M.child,M.child=null):(G=D.sibling,D.sibling=null),S3(M,!1,G,D,Q);break;case"backwards":for(D=null,G=M.child,M.child=null;G!==null;){if(_=G.alternate,_!==null&&aE(_)===null){M.child=G;break}_=G.sibling,G.sibling=D,D=G,G=_}S3(M,!0,D,null,Q);break;case"together":S3(M,!1,null,null,void 0);break;default:M.memoizedState=null}return M.child}function Du(_,M,D){if(_!==null&&(M.dependencies=_.dependencies),jg|=M.lanes,!(D&M.childLanes))return null;if(_!==null&&M.child!==_.child)throw Error(o(153));if(M.child!==null){for(_=M.child,D=lh(_,_.pendingProps),M.child=D,D.return=M;_.sibling!==null;)_=_.sibling,D=D.sibling=lh(_,_.pendingProps),D.return=M;D.sibling=null}return M.child}function nge(_,M,D){switch(M.tag){case 3:nG(M),Bg();break;case 5:Ej(M);break;case 1:po(M.type)&&qS(M);break;case 4:l3(M,M.stateNode.containerInfo);break;case 10:cj(M,M.type._context,M.memoizedProps.value);break;case 13:var I=M.memoizedState;if(I!==null)return I.dehydrated!==null?(rn(Ci,Ci.current&1),M.flags|=128,null):D&M.child.childLanes?rG(_,M,D):(rn(Ci,Ci.current&1),_=Du(_,M,D),_!==null?_.sibling:null);rn(Ci,Ci.current&1);break;case 19:if(I=(D&M.childLanes)!==0,_.flags&128){if(I)return lG(_,M,D);M.flags|=128}var G=M.memoizedState;if(G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),rn(Ci,Ci.current),I)break;return null;case 22:case 23:return M.lanes=0,Jj(_,M,D)}return Du(_,M,D)}function ige(_,M){switch(r3(M),M.tag){case 1:return po(M.type)&&WS(),_=M.flags,_&65536?(M.flags=_&-65537|128,M):null;case 3:return Ug(),Mt(Fi),Mt(Qt),d3(),_=M.flags,_&65536&&!(_&128)?(M.flags=_&-65537|128,M):null;case 5:return c3(M),null;case 13:if(Mt(Ci),_=M.memoizedState,_!==null&&_.dehydrated!==null){if(M.alternate===null)throw Error(o(340));Bg()}return _=M.flags,_&65536?(M.flags=_&-65537|128,M):null;case 19:return Mt(Ci),null;case 4:return Ug(),null;case 10:return QR(M.type._context),null;case 22:case 23:return V3(),null;case 24:return null;default:return null}}var bE=!1,hp=!1,rge=typeof WeakSet=="function"?WeakSet:Set,dt=null;function wE(_,M){var D=_.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(I){vo(_,M,I)}else D.current=null}function E3(_,M,D){try{D()}catch(I){vo(_,M,I)}}var cG=!1;function sge(_,M){for(U(_.containerInfo),dt=M;dt!==null;)if(_=dt,M=_.child,(_.subtreeFlags&1028)!==0&&M!==null)M.return=_,dt=M;else for(;dt!==null;){_=dt;try{var D=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var I=D.memoizedProps,G=D.memoizedState,Q=_.stateNode,pe=Q.getSnapshotBeforeUpdate(_.elementType===_.type?I:Sl(_.type,I),G);Q.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:me&&qe(_.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Re){vo(_,_.return,Re)}if(M=_.sibling,M!==null){M.return=_.return,dt=M;break}dt=_.return}return D=cG,cG=!1,D}function fp(_,M,D){var I=M.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var G=I=I.next;do{if((G.tag&_)===_){var Q=G.destroy;G.destroy=void 0,Q!==void 0&&E3(M,D,Q)}G=G.next}while(G!==I)}}function n1(_,M){if(M=M.updateQueue,M=M!==null?M.lastEffect:null,M!==null){var D=M=M.next;do{if((D.tag&_)===_){var I=D.create;D.destroy=I()}D=D.next}while(D!==M)}}function M3(_){var M=_.ref;if(M!==null){var D=_.stateNode;switch(_.tag){case 5:_=$(D);break;default:_=D}typeof M=="function"?M(_):M.current=_}}function uG(_,M,D){if(mc&&typeof mc.onCommitFiberUnmount=="function")try{mc.onCommitFiberUnmount(KS,M)}catch{}switch(M.tag){case 0:case 11:case 14:case 15:if(_=M.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var I=_=_.next;do{var G=I,Q=G.destroy;G=G.tag,Q!==void 0&&(G&2||G&4)&&E3(M,D,Q),I=I.next}while(I!==_)}break;case 1:if(wE(M,D),_=M.stateNode,typeof _.componentWillUnmount=="function")try{_.props=M.memoizedProps,_.state=M.memoizedState,_.componentWillUnmount()}catch(pe){vo(M,D,pe)}break;case 5:wE(M,D);break;case 4:me?gG(_,M,D):se&&se&&(M=M.stateNode.containerInfo,D=yt(M),Vr(M,D))}}function dG(_,M,D){for(var I=M;;)if(uG(_,I,D),I.child===null||me&&I.tag===4){if(I===M)break;for(;I.sibling===null;){if(I.return===null||I.return===M)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function hG(_){var M=_.alternate;M!==null&&(_.alternate=null,hG(M)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(M=_.stateNode,M!==null&&Le(M)),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function fG(_){return _.tag===5||_.tag===3||_.tag===4}function pG(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||fG(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function mG(_){if(me){e:{for(var M=_.return;M!==null;){if(fG(M))break e;M=M.return}throw Error(o(160))}var D=M;switch(D.tag){case 5:M=D.stateNode,D.flags&32&&(wt(M),D.flags&=-33),D=pG(_),T3(_,D,M);break;case 3:case 4:M=D.stateNode.containerInfo,D=pG(_),A3(_,D,M);break;default:throw Error(o(161))}}}function A3(_,M,D){var I=_.tag;if(I===5||I===6)_=_.stateNode,M?Ue(D,_,M):Pe(D,_);else if(I!==4&&(_=_.child,_!==null))for(A3(_,M,D),_=_.sibling;_!==null;)A3(_,M,D),_=_.sibling}function T3(_,M,D){var I=_.tag;if(I===5||I===6)_=_.stateNode,M?Ce(D,_,M):He(D,_);else if(I!==4&&(_=_.child,_!==null))for(T3(_,M,D),_=_.sibling;_!==null;)T3(_,M,D),_=_.sibling}function gG(_,M,D){for(var I=M,G=!1,Q,pe;;){if(!G){G=I.return;e:for(;;){if(G===null)throw Error(o(160));switch(Q=G.stateNode,G.tag){case 5:pe=!1;break e;case 3:Q=Q.containerInfo,pe=!0;break e;case 4:Q=Q.containerInfo,pe=!0;break e}G=G.return}G=!0}if(I.tag===5||I.tag===6)dG(_,I,D),pe?rt(Q,I.stateNode):We(Q,I.stateNode);else if(I.tag===18)pe?on(Q,I.stateNode):gt(Q,I.stateNode);else if(I.tag===4){if(I.child!==null){Q=I.stateNode.containerInfo,pe=!0,I.child.return=I,I=I.child;continue}}else if(uG(_,I,D),I.child!==null){I.child.return=I,I=I.child;continue}if(I===M)break;for(;I.sibling===null;){if(I.return===null||I.return===M)return;I=I.return,I.tag===4&&(G=!1)}I.sibling.return=I.return,I=I.sibling}}function C3(_,M){if(me){switch(M.tag){case 0:case 11:case 14:case 15:fp(3,M,M.return),n1(3,M),fp(5,M,M.return);return;case 1:return;case 5:var D=M.stateNode;if(D!=null){var I=M.memoizedProps;_=_!==null?_.memoizedProps:I;var G=M.type,Q=M.updateQueue;M.updateQueue=null,Q!==null&&he(D,Q,G,_,I,M)}return;case 6:if(M.stateNode===null)throw Error(o(162));D=M.memoizedProps,ae(M.stateNode,_!==null?_.memoizedProps:D,D);return;case 3:oe&&_!==null&&_.memoizedState.isDehydrated&&St(M.stateNode.containerInfo);return;case 12:return;case 13:_E(M);return;case 19:_E(M);return;case 17:return}throw Error(o(163))}switch(M.tag){case 0:case 11:case 14:case 15:fp(3,M,M.return),n1(3,M),fp(5,M,M.return);return;case 12:return;case 13:_E(M);return;case 19:_E(M);return;case 3:oe&&_!==null&&_.memoizedState.isDehydrated&&St(M.stateNode.containerInfo);break;case 22:case 23:return}e:if(se){switch(M.tag){case 1:case 5:case 6:break e;case 3:case 4:M=M.stateNode,Vr(M.containerInfo,M.pendingChildren);break e}throw Error(o(163))}}function _E(_){var M=_.updateQueue;if(M!==null){_.updateQueue=null;var D=_.stateNode;D===null&&(D=_.stateNode=new rge),M.forEach(function(I){var G=mge.bind(null,_,I);D.has(I)||(D.add(I),I.then(G,G))})}}function oge(_,M){for(dt=M;dt!==null;){M=dt;var D=M.deletions;if(D!==null)for(var I=0;I<D.length;I++){var G=D[I];try{var Q=_;me?gG(Q,G,M):dG(Q,G,M);var pe=G.alternate;pe!==null&&(pe.return=null),G.return=null}catch(At){vo(G,M,At)}}if(D=M.child,M.subtreeFlags&12854&&D!==null)D.return=M,dt=D;else for(;dt!==null;){M=dt;try{var Re=M.flags;if(Re&32&&me&&wt(M.stateNode),Re&512){var Xe=M.alternate;if(Xe!==null){var it=Xe.ref;it!==null&&(typeof it=="function"?it(null):it.current=null)}}if(Re&8192)switch(M.tag){case 13:if(M.memoizedState!==null){var _t=M.alternate;(_t===null||_t.memoizedState===null)&&(k3=Gr())}break;case 22:var en=M.memoizedState!==null,kt=M.alternate,ri=kt!==null&&kt.memoizedState!==null;if(D=M,me){e:if(I=D,G=en,Q=null,me)for(var Tt=I;;){if(Tt.tag===5){if(Q===null){Q=Tt;var ws=Tt.stateNode;G?$t(ws):ge(Tt.stateNode,Tt.memoizedProps)}}else if(Tt.tag===6){if(Q===null){var ka=Tt.stateNode;G?ne(ka):Me(ka,Tt.memoizedProps)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===I)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===I)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===I)break e;Q===Tt&&(Q=null),Tt=Tt.return}Q===Tt&&(Q=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}if(en&&!ri&&D.mode&1){dt=D;for(var Ve=D.child;Ve!==null;){for(D=dt=Ve;dt!==null;){I=dt;var Oe=I.child;switch(I.tag){case 0:case 11:case 14:case 15:fp(4,I,I.return);break;case 1:wE(I,I.return);var $e=I.stateNode;if(typeof $e.componentWillUnmount=="function"){var ht=I.return;try{$e.props=I.memoizedProps,$e.state=I.memoizedState,$e.componentWillUnmount()}catch(At){vo(I,ht,At)}}break;case 5:wE(I,I.return);break;case 22:if(I.memoizedState!==null){xG(D);continue}}Oe!==null?(Oe.return=I,dt=Oe):xG(D)}Ve=Ve.sibling}}}switch(Re&4102){case 2:mG(M),M.flags&=-3;break;case 6:mG(M),M.flags&=-3,C3(M.alternate,M);break;case 4096:M.flags&=-4097;break;case 4100:M.flags&=-4097,C3(M.alternate,M);break;case 4:C3(M.alternate,M)}}catch(At){vo(M,M.return,At)}if(D=M.sibling,D!==null){D.return=M.return,dt=D;break}dt=M.return}}}function age(_,M,D){dt=_,vG(_)}function vG(_,M,D){for(var I=(_.mode&1)!==0;dt!==null;){var G=dt,Q=G.child;if(G.tag===22&&I){var pe=G.memoizedState!==null||bE;if(!pe){var Re=G.alternate,Xe=Re!==null&&Re.memoizedState!==null||hp;Re=bE;var it=hp;if(bE=pe,(hp=Xe)&&!it)for(dt=G;dt!==null;)pe=dt,Xe=pe.child,pe.tag===22&&pe.memoizedState!==null?bG(G):Xe!==null?(Xe.return=pe,dt=Xe):bG(G);for(;Q!==null;)dt=Q,vG(Q),Q=Q.sibling;dt=G,bE=Re,hp=it}yG(_)}else G.subtreeFlags&8772&&Q!==null?(Q.return=G,dt=Q):yG(_)}}function yG(_){for(;dt!==null;){var M=dt;if(M.flags&8772){var D=M.alternate;try{if(M.flags&8772)switch(M.tag){case 0:case 11:case 15:hp||n1(5,M);break;case 1:var I=M.stateNode;if(M.flags&4&&!hp)if(D===null)I.componentDidMount();else{var G=M.elementType===M.type?D.memoizedProps:Sl(M.type,D.memoizedProps);I.componentDidUpdate(G,D.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var Q=M.updateQueue;Q!==null&&hj(M,Q,I);break;case 3:var pe=M.updateQueue;if(pe!==null){if(D=null,M.child!==null)switch(M.child.tag){case 5:D=$(M.child.stateNode);break;case 1:D=M.child.stateNode}hj(M,pe,D)}break;case 5:var Re=M.stateNode;D===null&&M.flags&4&&Fe(Re,M.type,M.memoizedProps,M);break;case 6:break;case 4:break;case 12:break;case 13:if(oe&&M.memoizedState===null){var Xe=M.alternate;if(Xe!==null){var it=Xe.memoizedState;if(it!==null){var _t=it.dehydrated;_t!==null&&ft(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}hp||M.flags&512&&M3(M)}catch(en){vo(M,M.return,en)}}if(M===_){dt=null;break}if(D=M.sibling,D!==null){D.return=M.return,dt=D;break}dt=M.return}}function xG(_){for(;dt!==null;){var M=dt;if(M===_){dt=null;break}var D=M.sibling;if(D!==null){D.return=M.return,dt=D;break}dt=M.return}}function bG(_){for(;dt!==null;){var M=dt;try{switch(M.tag){case 0:case 11:case 15:var D=M.return;try{n1(4,M)}catch(Xe){vo(M,D,Xe)}break;case 1:var I=M.stateNode;if(typeof I.componentDidMount=="function"){var G=M.return;try{I.componentDidMount()}catch(Xe){vo(M,G,Xe)}}var Q=M.return;try{M3(M)}catch(Xe){vo(M,Q,Xe)}break;case 5:var pe=M.return;try{M3(M)}catch(Xe){vo(M,pe,Xe)}}}catch(Xe){vo(M,M.return,Xe)}if(M===_){dt=null;break}var Re=M.sibling;if(Re!==null){Re.return=M.return,dt=Re;break}dt=M.return}}var SE=0,EE=1,ME=2,AE=3,TE=4;if(typeof Symbol=="function"&&Symbol.for){var i1=Symbol.for;SE=i1("selector.component"),EE=i1("selector.has_pseudo_class"),ME=i1("selector.role"),AE=i1("selector.test_id"),TE=i1("selector.text")}function P3(_){var M=be(_);if(M!=null){if(typeof M.memoizedProps["data-testname"]!="string")throw Error(o(364));return M}if(_=ze(_),_===null)throw Error(o(362));return _.stateNode.current}function D3(_,M){switch(M.$$typeof){case SE:if(_.type===M.value)return!0;break;case EE:e:{M=M.value,_=[_,0];for(var D=0;D<_.length;){var I=_[D++],G=_[D++],Q=M[G];if(I.tag!==5||!le(I)){for(;Q!=null&&D3(I,Q);)G++,Q=M[G];if(G===M.length){M=!0;break e}else for(I=I.child;I!==null;)_.push(I,G),I=I.sibling}}M=!1}return M;case ME:if(_.tag===5&&xe(_.stateNode,M.value))return!0;break;case TE:if((_.tag===5||_.tag===6)&&(_=V(_),_!==null&&0<=_.indexOf(M.value)))return!0;break;case AE:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===M.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function R3(_){switch(_.$$typeof){case SE:return"<"+(A(_.value)||"Unknown")+">";case EE:return":has("+(R3(_)||"")+")";case ME:return'[role="'+_.value+'"]';case TE:return'"'+_.value+'"';case AE:return'[data-testname="'+_.value+'"]';default:throw Error(o(365))}}function wG(_,M){var D=[];_=[_,0];for(var I=0;I<_.length;){var G=_[I++],Q=_[I++],pe=M[Q];if(G.tag!==5||!le(G)){for(;pe!=null&&D3(G,pe);)Q++,pe=M[Q];if(Q===M.length)D.push(G);else for(G=G.child;G!==null;)_.push(G,Q),G=G.sibling}}return D}function O3(_,M){if(!ke)throw Error(o(363));_=P3(_),_=wG(_,M),M=[],_=Array.from(_);for(var D=0;D<_.length;){var I=_[D++];if(I.tag===5)le(I)||M.push(I.stateNode);else for(I=I.child;I!==null;)_.push(I),I=I.sibling}return M}var lge=Math.ceil,CE=a.ReactCurrentDispatcher,L3=a.ReactCurrentOwner,Ki=a.ReactCurrentBatchConfig,fn=0,cr=null,ur=null,is=0,Xo=0,Hg=gs(0),Sr=0,r1=null,jg=0,PE=0,I3=0,s1=null,mo=null,k3=0,N3=1/0;function Gg(){N3=Gr()+500}var DE=!1,B3=null,rh=null,RE=!1,sh=null,OE=0,o1=0,z3=null,LE=-1,IE=0;function Ws(){return fn&6?Gr():LE!==-1?LE:LE=Gr()}function oh(_){return _.mode&1?fn&2&&is!==0?is&-is:Gme.transition!==null?(IE===0&&(_=$S,$S<<=1,!($S&4194240)&&($S=64),IE=_),IE):(_=Cn,_!==0?_:Ie()):1}function La(_,M,D){if(50<o1)throw o1=0,z3=null,Error(o(185));var I=kE(_,M);return I===null?null:(jx(I,M,D),(!(fn&2)||I!==cr)&&(I===cr&&(!(fn&2)&&(PE|=M),Sr===4&&ah(I,is)),go(I,D),M===1&&fn===0&&!(_.mode&1)&&(Gg(),ZS&&vc())),I)}function kE(_,M){_.lanes|=M;var D=_.alternate;for(D!==null&&(D.lanes|=M),D=_,_=_.return;_!==null;)_.childLanes|=M,D=_.alternate,D!==null&&(D.childLanes|=M),D=_,_=_.return;return D.tag===3?D.stateNode:null}function go(_,M){var D=_.callbackNode;kme(_,M);var I=YS(_,_===cr?is:0);if(I===0)D!==null&&aj(D),_.callbackNode=null,_.callbackPriority=0;else if(M=I&-I,_.callbackPriority!==M){if(D!=null&&aj(D),M===1)_.tag===0?jme(SG.bind(null,_)):lj(SG.bind(null,_)),fe?ve(function(){fn===0&&vc()}):qR($R,vc),D=null;else{switch(oj(I)){case 1:D=$R;break;case 4:D=Fme;break;case 16:D=XR;break;case 536870912:D=Ume;break;default:D=XR}D=OG(D,_G.bind(null,_))}_.callbackPriority=M,_.callbackNode=D}}function _G(_,M){if(LE=-1,IE=0,fn&6)throw Error(o(327));var D=_.callbackNode;if(gp()&&_.callbackNode!==D)return null;var I=YS(_,_===cr?is:0);if(I===0)return null;if(I&30||I&_.expiredLanes||M)M=NE(_,I);else{M=I;var G=fn;fn|=2;var Q=AG();(cr!==_||is!==M)&&(Gg(),pp(_,M));do try{dge();break}catch(Re){MG(_,Re)}while(1);ZR(),CE.current=Q,fn=G,ur!==null?M=0:(cr=null,is=0,M=Sr)}if(M!==0){if(M===2&&(G=jR(_),G!==0&&(I=G,M=F3(_,G))),M===1)throw D=r1,pp(_,0),ah(_,I),go(_,Gr()),D;if(M===6)ah(_,I);else{if(G=_.current.alternate,!(I&30)&&!cge(G)&&(M=NE(_,I),M===2&&(Q=jR(_),Q!==0&&(I=Q,M=F3(_,Q))),M===1))throw D=r1,pp(_,0),ah(_,I),go(_,Gr()),D;switch(_.finishedWork=G,_.finishedLanes=I,M){case 0:case 1:throw Error(o(345));case 2:mp(_,mo);break;case 3:if(ah(_,I),(I&130023424)===I&&(M=k3+500-Gr(),10<M)){if(YS(_,0)!==0)break;if(G=_.suspendedLanes,(G&I)!==I){Ws(),_.pingedLanes|=_.suspendedLanes&G;break}_.timeoutHandle=ee(mp.bind(null,_,mo),M);break}mp(_,mo);break;case 4:if(ah(_,I),(I&4194240)===I)break;for(M=_.eventTimes,G=-1;0<I;){var pe=31-_l(I);Q=1<<pe,pe=M[pe],pe>G&&(G=pe),I&=~Q}if(I=G,I=Gr()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*lge(I/1960))-I,10<I){_.timeoutHandle=ee(mp.bind(null,_,mo),I);break}mp(_,mo);break;case 5:mp(_,mo);break;default:throw Error(o(329))}}}return go(_,Gr()),_.callbackNode===D?_G.bind(null,_):null}function F3(_,M){var D=s1;return _.current.memoizedState.isDehydrated&&(pp(_,M).flags|=256),_=NE(_,M),_!==2&&(M=mo,mo=D,M!==null&&U3(M)),_}function U3(_){mo===null?mo=_:mo.push.apply(mo,_)}function cge(_){for(var M=_;;){if(M.flags&16384){var D=M.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var I=0;I<D.length;I++){var G=D[I],Q=G.getSnapshot;G=G.value;try{if(!gc(Q(),G))return!1}catch{return!1}}}if(D=M.child,M.subtreeFlags&16384&&D!==null)D.return=M,M=D;else{if(M===_)break;for(;M.sibling===null;){if(M.return===null||M.return===_)return!0;M=M.return}M.sibling.return=M.return,M=M.sibling}}return!0}function ah(_,M){for(M&=~I3,M&=~PE,_.suspendedLanes|=M,_.pingedLanes&=~M,_=_.expirationTimes;0<M;){var D=31-_l(M),I=1<<D;_[D]=-1,M&=~I}}function SG(_){if(fn&6)throw Error(o(327));gp();var M=YS(_,0);if(!(M&1))return go(_,Gr()),null;var D=NE(_,M);if(_.tag!==0&&D===2){var I=jR(_);I!==0&&(M=I,D=F3(_,I))}if(D===1)throw D=r1,pp(_,0),ah(_,M),go(_,Gr()),D;if(D===6)throw Error(o(345));return _.finishedWork=_.current.alternate,_.finishedLanes=M,mp(_,mo),go(_,Gr()),null}function EG(_){sh!==null&&sh.tag===0&&!(fn&6)&&gp();var M=fn;fn|=1;var D=Ki.transition,I=Cn;try{if(Ki.transition=null,Cn=1,_)return _()}finally{Cn=I,Ki.transition=D,fn=M,!(fn&6)&&vc()}}function V3(){Xo=Hg.current,Mt(Hg)}function pp(_,M){_.finishedWork=null,_.finishedLanes=0;var D=_.timeoutHandle;if(D!==te&&(_.timeoutHandle=te,ie(D)),ur!==null)for(D=ur.return;D!==null;){var I=D;switch(r3(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&WS();break;case 3:Ug(),Mt(Fi),Mt(Qt),d3();break;case 5:c3(I);break;case 4:Ug();break;case 13:Mt(Ci);break;case 19:Mt(Ci);break;case 10:QR(I.type._context);break;case 22:case 23:V3()}D=D.return}if(cr=_,ur=_=lh(_.current,null),is=Xo=M,Sr=0,r1=null,I3=PE=jg=0,mo=s1=null,yc!==null){for(M=0;M<yc.length;M++)if(D=yc[M],I=D.interleaved,I!==null){D.interleaved=null;var G=I.next,Q=D.pending;if(Q!==null){var pe=Q.next;Q.next=G,I.next=pe}D.pending=I}yc=null}return _}function MG(_,M){do{var D=ur;try{if(ZR(),lE.current=pE,cE){for(var I=Ui.memoizedState;I!==null;){var G=I.queue;G!==null&&(G.pending=null),I=I.next}cE=!1}if(Vg=0,Wr=ys=Ui=null,Yx=!1,Kx=0,L3.current=null,D===null||D.return===null){Sr=1,r1=M,ur=null;break}e:{var Q=_,pe=D.return,Re=D,Xe=M;if(M=is,Re.flags|=32768,Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var it=Xe,_t=Re,en=_t.tag;if(!(_t.mode&1)&&(en===0||en===11||en===15)){var kt=_t.alternate;kt?(_t.updateQueue=kt.updateQueue,_t.memoizedState=kt.memoizedState,_t.lanes=kt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var ri=qj(pe);if(ri!==null){ri.flags&=-257,$j(ri,pe,Re,Q,M),ri.mode&1&&Wj(Q,it,M),M=ri,Xe=it;var Tt=M.updateQueue;if(Tt===null){var ws=new Set;ws.add(Xe),M.updateQueue=ws}else Tt.add(Xe);break e}else{if(!(M&1)){Wj(Q,it,M),H3();break e}Xe=Error(o(426))}}else if(bi&&Re.mode&1){var ka=qj(pe);if(ka!==null){!(ka.flags&65536)&&(ka.flags|=256),$j(ka,pe,Re,Q,M),a3(Xe);break e}}Q=Xe,Sr!==4&&(Sr=2),s1===null?s1=[Q]:s1.push(Q),Xe=y3(Xe,Re),Re=pe;do{switch(Re.tag){case 3:Re.flags|=65536,M&=-M,Re.lanes|=M;var Ve=jj(Re,Xe,M);dj(Re,Ve);break e;case 1:Q=Xe;var Oe=Re.type,$e=Re.stateNode;if(!(Re.flags&128)&&(typeof Oe.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(rh===null||!rh.has($e)))){Re.flags|=65536,M&=-M,Re.lanes|=M;var ht=Gj(Re,Q,M);dj(Re,ht);break e}}Re=Re.return}while(Re!==null)}CG(D)}catch(At){M=At,ur===D&&D!==null&&(ur=D=D.return);continue}break}while(1)}function AG(){var _=CE.current;return CE.current=pE,_===null?pE:_}function H3(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),cr===null||!(jg&268435455)&&!(PE&268435455)||ah(cr,is)}function NE(_,M){var D=fn;fn|=2;var I=AG();cr===_&&is===M||pp(_,M);do try{uge();break}catch(G){MG(_,G)}while(1);if(ZR(),fn=D,CE.current=I,ur!==null)throw Error(o(261));return cr=null,is=0,Sr}function uge(){for(;ur!==null;)TG(ur)}function dge(){for(;ur!==null&&!Bme();)TG(ur)}function TG(_){var M=RG(_.alternate,_,Xo);_.memoizedProps=_.pendingProps,M===null?CG(_):ur=M,L3.current=null}function CG(_){var M=_;do{var D=M.alternate;if(_=M.return,M.flags&32768){if(D=ige(D,M),D!==null){D.flags&=32767,ur=D;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{Sr=6,ur=null;return}}else if(D=ege(D,M,Xo),D!==null){ur=D;return}if(M=M.sibling,M!==null){ur=M;return}ur=M=_}while(M!==null);Sr===0&&(Sr=5)}function mp(_,M){var D=Cn,I=Ki.transition;try{Ki.transition=null,Cn=1,hge(_,M,D)}finally{Ki.transition=I,Cn=D}return null}function hge(_,M,D){do gp();while(sh!==null);if(fn&6)throw Error(o(327));var I=_.finishedWork,G=_.finishedLanes;if(I===null)return null;if(_.finishedWork=null,_.finishedLanes=0,I===_.current)throw Error(o(177));_.callbackNode=null,_.callbackPriority=0;var Q=I.lanes|I.childLanes;if(Nme(_,Q),_===cr&&(ur=cr=null,is=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||RE||(RE=!0,OG(XR,function(){return gp(),null})),Q=(I.flags&15990)!==0,I.subtreeFlags&15990||Q){Q=Ki.transition,Ki.transition=null;var pe=Cn;Cn=1;var Re=fn;fn|=4,L3.current=null,sge(_,I),oge(_,I),N(_.containerInfo),_.current=I,age(I),zme(),fn=Re,Cn=pe,Ki.transition=Q}else _.current=I;if(RE&&(RE=!1,sh=_,OE=G),Q=_.pendingLanes,Q===0&&(rh=null),Vme(I.stateNode),go(_,Gr()),M!==null)for(D=_.onRecoverableError,I=0;I<M.length;I++)D(M[I]);if(DE)throw DE=!1,_=B3,B3=null,_;return OE&1&&_.tag!==0&&gp(),Q=_.pendingLanes,Q&1?_===z3?o1++:(o1=0,z3=_):o1=0,vc(),null}function gp(){if(sh!==null){var _=oj(OE),M=Ki.transition,D=Cn;try{if(Ki.transition=null,Cn=16>_?16:_,sh===null)var I=!1;else{if(_=sh,sh=null,OE=0,fn&6)throw Error(o(331));var G=fn;for(fn|=4,dt=_.current;dt!==null;){var Q=dt,pe=Q.child;if(dt.flags&16){var Re=Q.deletions;if(Re!==null){for(var Xe=0;Xe<Re.length;Xe++){var it=Re[Xe];for(dt=it;dt!==null;){var _t=dt;switch(_t.tag){case 0:case 11:case 15:fp(8,_t,Q)}var en=_t.child;if(en!==null)en.return=_t,dt=en;else for(;dt!==null;){_t=dt;var kt=_t.sibling,ri=_t.return;if(hG(_t),_t===it){dt=null;break}if(kt!==null){kt.return=ri,dt=kt;break}dt=ri}}}var Tt=Q.alternate;if(Tt!==null){var ws=Tt.child;if(ws!==null){Tt.child=null;do{var ka=ws.sibling;ws.sibling=null,ws=ka}while(ws!==null)}}dt=Q}}if(Q.subtreeFlags&2064&&pe!==null)pe.return=Q,dt=pe;else e:for(;dt!==null;){if(Q=dt,Q.flags&2048)switch(Q.tag){case 0:case 11:case 15:fp(9,Q,Q.return)}var Ve=Q.sibling;if(Ve!==null){Ve.return=Q.return,dt=Ve;break e}dt=Q.return}}var Oe=_.current;for(dt=Oe;dt!==null;){pe=dt;var $e=pe.child;if(pe.subtreeFlags&2064&&$e!==null)$e.return=pe,dt=$e;else e:for(pe=Oe;dt!==null;){if(Re=dt,Re.flags&2048)try{switch(Re.tag){case 0:case 11:case 15:n1(9,Re)}}catch(At){vo(Re,Re.return,At)}if(Re===pe){dt=null;break e}var ht=Re.sibling;if(ht!==null){ht.return=Re.return,dt=ht;break e}dt=Re.return}}if(fn=G,vc(),mc&&typeof mc.onPostCommitFiberRoot=="function")try{mc.onPostCommitFiberRoot(KS,_)}catch{}I=!0}return I}finally{Cn=D,Ki.transition=M}}return!1}function PG(_,M,D){M=y3(D,M),M=jj(_,M,1),ih(_,M),M=Ws(),_=kE(_,1),_!==null&&(jx(_,1,M),go(_,M))}function vo(_,M,D){if(_.tag===3)PG(_,_,D);else for(;M!==null;){if(M.tag===3){PG(M,_,D);break}else if(M.tag===1){var I=M.stateNode;if(typeof M.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(rh===null||!rh.has(I))){_=y3(D,_),_=Gj(M,_,1),ih(M,_),_=Ws(),M=kE(M,1),M!==null&&(jx(M,1,_),go(M,_));break}}M=M.return}}function fge(_,M,D){var I=_.pingCache;I!==null&&I.delete(M),M=Ws(),_.pingedLanes|=_.suspendedLanes&D,cr===_&&(is&D)===D&&(Sr===4||Sr===3&&(is&130023424)===is&&500>Gr()-k3?pp(_,0):I3|=D),go(_,M)}function DG(_,M){M===0&&(_.mode&1?(M=XS,XS<<=1,!(XS&130023424)&&(XS=4194304)):M=1);var D=Ws();_=kE(_,M),_!==null&&(jx(_,M,D),go(_,D))}function pge(_){var M=_.memoizedState,D=0;M!==null&&(D=M.retryLane),DG(_,D)}function mge(_,M){var D=0;switch(_.tag){case 13:var I=_.stateNode,G=_.memoizedState;G!==null&&(D=G.retryLane);break;case 19:I=_.stateNode;break;default:throw Error(o(314))}I!==null&&I.delete(M),DG(_,D)}var RG;RG=function(_,M,D){if(_!==null)if(_.memoizedProps!==M.pendingProps||Fi.current)$o=!0;else{if(!(_.lanes&D)&&!(M.flags&128))return $o=!1,nge(_,M,D);$o=!!(_.flags&131072)}else $o=!1,bi&&M.flags&1048576&&vj(M,sE,M.index);switch(M.lanes=0,M.tag){case 2:var I=M.type;_!==null&&(_.alternate=null,M.alternate=null,M.flags|=2),_=M.pendingProps;var G=Ta(M,Qt.current);Ig(M,D),G=f3(null,M,I,_,G,D);var Q=p3();return M.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(M.tag=1,M.memoizedState=null,M.updateQueue=null,po(I)?(Q=!0,qS(M)):Q=!1,M.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,e3(M),G.updater=iE,M.stateNode=G,G._reactInternals=M,n3(M,I,_,D),M=w3(null,M,I,!0,Q,D)):(M.tag=0,bi&&Q&&i3(M),Gs(null,M,G,D),M=M.child),M;case 16:I=M.elementType;e:{switch(_!==null&&(_.alternate=null,M.alternate=null,M.flags|=2),_=M.pendingProps,G=I._init,I=G(I._payload),M.type=I,G=M.tag=vge(I),_=Sl(I,_),G){case 0:M=b3(null,M,I,_,D);break e;case 1:M=tG(null,M,I,_,D);break e;case 11:M=Kj(null,M,I,_,D);break e;case 14:M=Zj(null,M,I,Sl(I.type,_),D);break e}throw Error(o(306,I,""))}return M;case 0:return I=M.type,G=M.pendingProps,G=M.elementType===I?G:Sl(I,G),b3(_,M,I,G,D);case 1:return I=M.type,G=M.pendingProps,G=M.elementType===I?G:Sl(I,G),tG(_,M,I,G,D);case 3:e:{if(nG(M),_===null)throw Error(o(387));I=M.pendingProps,Q=M.memoizedState,G=Q.element,uj(_,M),nE(M,I,null,D);var pe=M.memoizedState;if(I=pe.element,oe&&Q.isDehydrated)if(Q={element:I,isDehydrated:!1,cache:pe.cache,transitions:pe.transitions},M.updateQueue.baseState=Q,M.memoizedState=Q,M.flags&256){G=Error(o(423)),M=iG(_,M,I,D,G);break e}else if(I!==G){G=Error(o(424)),M=iG(_,M,I,D,G);break e}else for(oe&&(qo=ce(M.stateNode.containerInfo),Wo=M,bi=!0,El=null,Gx=!1),D=Sj(M,null,I,D),M.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(Bg(),I===G){M=Du(_,M,D);break e}Gs(_,M,I,D)}M=M.child}return M;case 5:return Ej(M),_===null&&o3(M),I=M.type,G=M.pendingProps,Q=_!==null?_.memoizedProps:null,pe=G.children,J(I,G)?pe=null:Q!==null&&J(I,Q)&&(M.flags|=32),eG(_,M),Gs(_,M,pe,D),M.child;case 6:return _===null&&o3(M),null;case 13:return rG(_,M,D);case 4:return l3(M,M.stateNode.containerInfo),I=M.pendingProps,_===null?M.child=zg(M,null,I,D):Gs(_,M,I,D),M.child;case 11:return I=M.type,G=M.pendingProps,G=M.elementType===I?G:Sl(I,G),Kj(_,M,I,G,D);case 7:return Gs(_,M,M.pendingProps,D),M.child;case 8:return Gs(_,M,M.pendingProps.children,D),M.child;case 12:return Gs(_,M,M.pendingProps.children,D),M.child;case 10:e:{if(I=M.type._context,G=M.pendingProps,Q=M.memoizedProps,pe=G.value,cj(M,I,pe),Q!==null)if(gc(Q.value,pe)){if(Q.children===G.children&&!Fi.current){M=Du(_,M,D);break e}}else for(Q=M.child,Q!==null&&(Q.return=M);Q!==null;){var Re=Q.dependencies;if(Re!==null){pe=Q.child;for(var Xe=Re.firstContext;Xe!==null;){if(Xe.context===I){if(Q.tag===1){Xe=Au(-1,D&-D),Xe.tag=2;var it=Q.updateQueue;if(it!==null){it=it.shared;var _t=it.pending;_t===null?Xe.next=Xe:(Xe.next=_t.next,_t.next=Xe),it.pending=Xe}}Q.lanes|=D,Xe=Q.alternate,Xe!==null&&(Xe.lanes|=D),JR(Q.return,D,M),Re.lanes|=D;break}Xe=Xe.next}}else if(Q.tag===10)pe=Q.type===M.type?null:Q.child;else if(Q.tag===18){if(pe=Q.return,pe===null)throw Error(o(341));pe.lanes|=D,Re=pe.alternate,Re!==null&&(Re.lanes|=D),JR(pe,D,M),pe=Q.sibling}else pe=Q.child;if(pe!==null)pe.return=Q;else for(pe=Q;pe!==null;){if(pe===M){pe=null;break}if(Q=pe.sibling,Q!==null){Q.return=pe.return,pe=Q;break}pe=pe.return}Q=pe}Gs(_,M,G.children,D),M=M.child}return M;case 9:return G=M.type,I=M.pendingProps.children,Ig(M,D),G=Ca(G),I=I(G),M.flags|=1,Gs(_,M,I,D),M.child;case 14:return I=M.type,G=Sl(I,M.pendingProps),G=Sl(I.type,G),Zj(_,M,I,G,D);case 15:return Qj(_,M,M.type,M.pendingProps,D);case 17:return I=M.type,G=M.pendingProps,G=M.elementType===I?G:Sl(I,G),_!==null&&(_.alternate=null,M.alternate=null,M.flags|=2),M.tag=1,po(I)?(_=!0,qS(M)):_=!1,Ig(M,D),mj(M,I,G),n3(M,I,G,D),w3(null,M,I,!0,_,D);case 19:return lG(_,M,D);case 22:return Jj(_,M,D)}throw Error(o(156,M.tag))};function OG(_,M){return qR(_,M)}function gge(_,M,D,I){this.tag=_,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=M,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(_,M,D,I){return new gge(_,M,D,I)}function j3(_){return _=_.prototype,!(!_||!_.isReactComponent)}function vge(_){if(typeof _=="function")return j3(_)?1:0;if(_!=null){if(_=_.$$typeof,_===m)return 11;if(_===y)return 14}return 2}function lh(_,M){var D=_.alternate;return D===null?(D=Ia(_.tag,M,_.key,_.mode),D.elementType=_.elementType,D.type=_.type,D.stateNode=_.stateNode,D.alternate=_,_.alternate=D):(D.pendingProps=M,D.type=_.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=_.flags&14680064,D.childLanes=_.childLanes,D.lanes=_.lanes,D.child=_.child,D.memoizedProps=_.memoizedProps,D.memoizedState=_.memoizedState,D.updateQueue=_.updateQueue,M=_.dependencies,D.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext},D.sibling=_.sibling,D.index=_.index,D.ref=_.ref,D}function BE(_,M,D,I,G,Q){var pe=2;if(I=_,typeof _=="function")j3(_)&&(pe=1);else if(typeof _=="string")pe=5;else e:switch(_){case d:return vp(D.children,G,Q,M);case u:pe=8,G|=8;break;case h:return _=Ia(12,D,M,G|2),_.elementType=h,_.lanes=Q,_;case g:return _=Ia(13,D,M,G),_.elementType=g,_.lanes=Q,_;case v:return _=Ia(19,D,M,G),_.elementType=v,_.lanes=Q,_;case b:return zE(D,G,Q,M);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case f:pe=10;break e;case p:pe=9;break e;case m:pe=11;break e;case y:pe=14;break e;case x:pe=16,I=null;break e}throw Error(o(130,_==null?_:typeof _,""))}return M=Ia(pe,D,M,G),M.elementType=_,M.type=I,M.lanes=Q,M}function vp(_,M,D,I){return _=Ia(7,_,I,M),_.lanes=D,_}function zE(_,M,D,I){return _=Ia(22,_,I,M),_.elementType=b,_.lanes=D,_.stateNode={},_}function G3(_,M,D){return _=Ia(6,_,null,M),_.lanes=D,_}function W3(_,M,D){return M=Ia(4,_.children!==null?_.children:[],_.key,M),M.lanes=D,M.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},M}function yge(_,M,D,I,G){this.tag=M,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=te,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=GR(0),this.expirationTimes=GR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=GR(0),this.identifierPrefix=I,this.onRecoverableError=G,oe&&(this.mutableSourceEagerHydrationData=null)}function LG(_,M,D,I,G,Q,pe,Re,Xe){return _=new yge(_,M,D,Re,Xe),M===1?(M=1,Q===!0&&(M|=8)):M=0,Q=Ia(3,null,null,M),_.current=Q,Q.stateNode=_,Q.memoizedState={element:I,isDehydrated:D,cache:null,transitions:null},e3(Q),_}function IG(_){if(!_)return vs;_=_._reactInternals;e:{if(C(_)!==_||_.tag!==1)throw Error(o(170));var M=_;do{switch(M.tag){case 3:M=M.stateNode.context;break e;case 1:if(po(M.type)){M=M.stateNode.__reactInternalMemoizedMergedChildContext;break e}}M=M.return}while(M!==null);throw Error(o(171))}if(_.tag===1){var D=_.type;if(po(D))return rj(_,D,M)}return M}function kG(_){var M=_._reactInternals;if(M===void 0)throw typeof _.render=="function"?Error(o(188)):(_=Object.keys(_).join(","),Error(o(268,_)));return _=R(M),_===null?null:_.stateNode}function NG(_,M){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var D=_.retryLane;_.retryLane=D!==0&&D<M?D:M}}function q3(_,M){NG(_,M),(_=_.alternate)&&NG(_,M)}function xge(_){return _=R(_),_===null?null:_.stateNode}function bge(){return null}return n.attemptContinuousHydration=function(_){if(_.tag===13){var M=Ws();La(_,134217728,M),q3(_,134217728)}},n.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var M=Ws(),D=oh(_);La(_,D,M),q3(_,D)}},n.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var M=_.stateNode;if(M.current.memoizedState.isDehydrated){var D=Hx(M.pendingLanes);D!==0&&(WR(M,D|1),go(M,Gr()),!(fn&6)&&(Gg(),vc()))}break;case 13:var I=Ws();EG(function(){return La(_,1,I)}),q3(_,1)}},n.batchedUpdates=function(_,M){var D=fn;fn|=1;try{return _(M)}finally{fn=D,fn===0&&(Gg(),ZS&&vc())}},n.createComponentSelector=function(_){return{$$typeof:SE,value:_}},n.createContainer=function(_,M,D,I,G,Q,pe){return LG(_,M,!1,null,D,I,G,Q,pe)},n.createHasPseudoClassSelector=function(_){return{$$typeof:EE,value:_}},n.createHydrationContainer=function(_,M,D,I,G,Q,pe,Re,Xe){return _=LG(D,I,!0,_,G,Q,pe,Re,Xe),_.context=IG(null),D=_.current,I=Ws(),G=oh(D),Q=Au(I,G),Q.callback=M??null,ih(D,Q),_.current.lanes=G,jx(_,G,I),go(_,I),_},n.createPortal=function(_,M,D){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:_,containerInfo:M,implementation:D}},n.createRoleSelector=function(_){return{$$typeof:ME,value:_}},n.createTestNameSelector=function(_){return{$$typeof:AE,value:_}},n.createTextSelector=function(_){return{$$typeof:TE,value:_}},n.deferredUpdates=function(_){var M=Cn,D=Ki.transition;try{return Ki.transition=null,Cn=16,_()}finally{Cn=M,Ki.transition=D}},n.discreteUpdates=function(_,M,D,I,G){var Q=Cn,pe=Ki.transition;try{return Ki.transition=null,Cn=1,_(M,D,I,G)}finally{Cn=Q,Ki.transition=pe,fn===0&&Gg()}},n.findAllNodes=O3,n.findBoundingRects=function(_,M){if(!ke)throw Error(o(363));M=O3(_,M),_=[];for(var D=0;D<M.length;D++)_.push(j(M[D]));for(M=_.length-1;0<M;M--){D=_[M];for(var I=D.x,G=I+D.width,Q=D.y,pe=Q+D.height,Re=M-1;0<=Re;Re--)if(M!==Re){var Xe=_[Re],it=Xe.x,_t=it+Xe.width,en=Xe.y,kt=en+Xe.height;if(I>=it&&Q>=en&&G<=_t&&pe<=kt){_.splice(M,1);break}else if(I!==it||D.width!==Xe.width||kt<Q||en>pe){if(!(Q!==en||D.height!==Xe.height||_t<I||it>G)){it>I&&(Xe.width+=it-I,Xe.x=I),_t<G&&(Xe.width=G-it),_.splice(M,1);break}}else{en>Q&&(Xe.height+=en-Q,Xe.y=Q),kt<pe&&(Xe.height=pe-en),_.splice(M,1);break}}}return _},n.findHostInstance=kG,n.findHostInstanceWithNoPortals=function(_){return _=P(_),_=_!==null?O(_):null,_===null?null:_.stateNode},n.findHostInstanceWithWarning=function(_){return kG(_)},n.flushControlled=function(_){var M=fn;fn|=1;var D=Ki.transition,I=Cn;try{Ki.transition=null,Cn=1,_()}finally{Cn=I,Ki.transition=D,fn=M,fn===0&&(Gg(),vc())}},n.flushPassiveEffects=gp,n.flushSync=EG,n.focusWithin=function(_,M){if(!ke)throw Error(o(363));for(_=P3(_),M=wG(_,M),M=Array.from(M),_=0;_<M.length;){var D=M[_++];if(!le(D)){if(D.tag===5&&De(D.stateNode))return!0;for(D=D.child;D!==null;)M.push(D),D=D.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Cn},n.getFindAllNodesFailureDescription=function(_,M){if(!ke)throw Error(o(363));var D=0,I=[];_=[P3(_),0];for(var G=0;G<_.length;){var Q=_[G++],pe=_[G++],Re=M[pe];if((Q.tag!==5||!le(Q))&&(D3(Q,Re)&&(I.push(R3(Re)),pe++,pe>D&&(D=pe)),pe<M.length))for(Q=Q.child;Q!==null;)_.push(Q,pe),Q=Q.sibling}if(D<M.length){for(_=[];D<M.length;D++)_.push(R3(M[D]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},n.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return $(_.child.stateNode);default:return _.child.stateNode}},n.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:xge,findFiberByHostInstance:_.findFiberByHostInstance||bge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")_=!1;else{var M=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(M.isDisabled||!M.supportsFiber)_=!0;else{try{KS=M.inject(_),mc=M}catch{}_=!!M.checkDCE}}return _},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(_,M,D,I){if(!ke)throw Error(o(363));_=O3(_,M);var G=Ne(_,D,I).disconnect;return{disconnect:function(){G()}}},n.registerMutableSourceForHydration=function(_,M){var D=M._getVersion;D=D(M._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[M,D]:_.mutableSourceEagerHydrationData.push(M,D)},n.runWithPriority=function(_,M){var D=Cn;try{return Cn=_,M()}finally{Cn=D}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(_,M,D,I){var G=M.current,Q=Ws(),pe=oh(G);return D=IG(D),M.context===null?M.context=D:M.pendingContext=D,M=Au(Q,pe),M.payload={element:_},I=I===void 0?null:I,I!==null&&(M.callback=I),ih(G,M),_=La(G,pe,Q),_!==null&&tE(_,G,pe),pe},n};(function(t){t.exports=jAe})(VAe);const GAe=mP(ZB);function Use(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}const sd=[];function Vse(t,e,n=!1,i={}){for(const s of sd)if(Use(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,promise:t(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=sd.indexOf(r);s!==-1&&sd.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(sd.push(r),!n)throw r.promise}const WAe=(t,e,n)=>Vse(t,e,!1,n),qAe=(t,e,n)=>void Vse(t,e,!0,n),$Ae=t=>{if(t===void 0||t.length===0)sd.splice(0,sd.length);else{const e=sd.find(n=>Use(t,n.keys,n.equal));if(e){const n=sd.indexOf(e);n!==-1&&sd.splice(n,1)}}},L5={},Hse=t=>void Object.assign(L5,t);function XAe(t,e){function n(d,{args:u=[],attach:h,...f},p){let m=`${d[0].toUpperCase()}${d.slice(1)}`,g;if(d==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=f.object;g=Kv(v,{type:d,root:p,attach:h,primitive:!0})}else{const v=L5[m];if(!v)throw new Error(`R3F: ${m} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(u))throw new Error("R3F: The args prop must be an array!");g=Kv(new v(...u),{type:d,root:p,attach:h,memoizedProps:{args:u}})}return g.__r3f.attach===void 0&&(g instanceof cn?g.__r3f.attach="geometry":g instanceof xr&&(g.__r3f.attach="material")),m!=="inject"&&dL(g,f),g}function i(d,u){let h=!1;if(u){var f,p;(f=u.__r3f)!=null&&f.attach?uL(d,u,u.__r3f.attach):u.isObject3D&&d.isObject3D&&(d.add(u),h=!0),h||(p=d.__r3f)==null||p.objects.push(u),u.__r3f||Kv(u,{}),u.__r3f.parent=d,JB(u),Zv(u)}}function r(d,u,h){let f=!1;if(u){var p,m;if((p=u.__r3f)!=null&&p.attach)uL(d,u,u.__r3f.attach);else if(u.isObject3D&&d.isObject3D){u.parent=d,u.dispatchEvent({type:"added"});const g=d.children.filter(y=>y!==u),v=g.indexOf(h);d.children=[...g.slice(0,v),u,...g.slice(v)],f=!0}f||(m=d.__r3f)==null||m.objects.push(u),u.__r3f||Kv(u,{}),u.__r3f.parent=d,JB(u),Zv(u)}}function s(d,u,h=!1){d&&[...d].forEach(f=>o(u,f,h))}function o(d,u,h){if(u){var f,p,m;if(u.__r3f&&(u.__r3f.parent=null),(f=d.__r3f)!=null&&f.objects&&(d.__r3f.objects=d.__r3f.objects.filter(b=>b!==u)),(p=u.__r3f)!=null&&p.attach)I9(d,u,u.__r3f.attach);else if(u.isObject3D&&d.isObject3D){var g;d.remove(u),(g=u.__r3f)!=null&&g.root&&tTe(u.__r3f.root,u)}const y=(m=u.__r3f)==null?void 0:m.primitive,x=h===void 0?u.dispose!==null&&!y:h;if(!y){var v;s((v=u.__r3f)==null?void 0:v.objects,u,x),s(u.children,u,x)}u.__r3f&&(delete u.__r3f.root,delete u.__r3f.objects,delete u.__r3f.handlers,delete u.__r3f.memoizedProps,y||delete u.__r3f),x&&u.dispose&&u.type!=="Scene"&&a_.unstable_scheduleCallback(a_.unstable_IdlePriority,()=>{try{u.dispose()}catch{}}),Zv(d)}}function a(d,u,h,f){var p;const m=(p=d.__r3f)==null?void 0:p.parent;if(!m)return;const g=n(u,h,d.__r3f.root);if(d.children){for(const v of d.children)v.__r3f&&i(g,v);d.children=d.children.filter(v=>!v.__r3f)}d.__r3f.objects.forEach(v=>i(g,v)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(m,d),g.parent&&(g.__r3f.autoRemovedBeforeAppend=!0),i(m,g),g.raycast&&g.__r3f.eventCount&&g.__r3f.root.getState().internal.interaction.push(g),[f,f.alternate].forEach(v=>{v!==null&&(v.stateNode=g,v.ref&&(typeof v.ref=="function"?v.ref(g):v.ref.current=g))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:GAe({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,u)=>{if(!u)return;const h=d.getState().scene;h.__r3f&&(h.__r3f.root=d,i(h,u))},removeChildFromContainer:(d,u)=>{u&&o(d.getState().scene,u)},insertInContainerBefore:(d,u,h)=>{if(!u||!h)return;const f=d.getState().scene;f.__r3f&&r(f,u,h)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var u;const h=(u=d==null?void 0:d.__r3f)!=null?u:{};return Boolean(h.handlers)},prepareUpdate(d,u,h,f){if(d.__r3f.primitive&&f.object&&f.object!==d)return[!0];{const{args:p=[],children:m,...g}=f,{args:v=[],children:y,...x}=h;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((w,E)=>w!==v[E]))return[!0];const b=Yse(d,g,x,!0);return b.changes.length?[!1,b]:null}},commitUpdate(d,[u,h],f,p,m,g){u?a(d,f,m,g):dL(d,h)},commitMount(d,u,h,f){var p;const m=(p=d.__r3f)!=null?p:{};d.raycast&&m.handlers&&m.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Kv(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var u;const{attach:h,parent:f}=(u=d.__r3f)!=null?u:{};h&&f&&I9(f,d,h),d.isObject3D&&(d.visible=!1),Zv(d)},unhideInstance(d,u){var h;const{attach:f,parent:p}=(h=d.__r3f)!=null?h:{};f&&p&&uL(p,d,f),(d.isObject3D&&u.visible==null||u.visible)&&(d.visible=!0),Zv(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():tf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&mi.fun(performance.now)?performance.now:mi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:mi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:mi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:dL}}var D9,R9;const cL=t=>"colorSpace"in t||"outputColorSpace"in t,jse=()=>{var t;return(t=L5.ColorManagement)!=null?t:null},Gse=t=>t&&t.isOrthographicCamera,YAe=t=>t&&t.hasOwnProperty("current"),pS=typeof window<"u"&&((D9=window.document)!=null&&D9.createElement||((R9=window.navigator)==null?void 0:R9.product)==="ReactNative")?Z.useLayoutEffect:Z.useEffect;function Wse(t){const e=Z.useRef(t);return pS(()=>void(e.current=t),[t]),e}function KAe({set:t}){return pS(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class qse extends Z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}qse.getDerivedStateFromError=()=>({error:!0});const $se="__default",O9=new Map,ZAe=t=>t&&!!t.memoized&&!!t.changes;function Xse(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const E1=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},mi={obj:t=>t===Object(t)&&!mi.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(mi.str(t)||mi.num(t))return t===e;const s=mi.obj(t);if(s&&i==="reference")return t===e;const o=mi.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!mi.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(mi.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function QAe(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function JAe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Kv(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function QB(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const L9=/-\d+$/;function uL(t,e,n){if(mi.str(n)){if(L9.test(n)){const s=n.replace(L9,""),{target:o,key:a}=QB(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=QB(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function I9(t,e,n){var i,r;if(mi.str(n)){const{target:s,key:o}=QB(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function Yse(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var d;const u=(d=t==null?void 0:t.__r3f)!=null?d:{},h=Object.entries(r),f=[];if(c){const m=Object.keys(l);for(let g=0;g<m.length;g++)r.hasOwnProperty(m[g])||h.unshift([m[g],$se+"remove"])}h.forEach(([m,g])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&m==="object"||mi.equ(g,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return f.push([m,g,!0,[]]);let y=[];m.includes("-")&&(y=m.split("-")),f.push([m,g,!1,y]);for(const x in r){const b=r[x];x.startsWith(`${m}-`)&&f.push([x,b,!1,x.split("-")])}});const p={...r};return u.memoizedProps&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),u.memoizedProps&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:f}}function dL(t,e){var n,i,r;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=ZAe(e)?e:Yse(t,e),d=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let h=0;h<c.length;h++){let[f,p,m,g]=c[h];if(cL(t)){const b="srgb",w="srgb-linear";f==="encoding"?(f="colorSpace",p=p===3001?b:w):f==="outputEncoding"&&(f="outputColorSpace",p=p===3001?b:w)}let v=t,y=v[f];if(g.length&&(y=g.reduce((x,b)=>x[b],t),!(y&&y.set))){const[x,...b]=g.reverse();v=b.reverse().reduce((w,E)=>w[E],t),f=x}if(p===$se+"remove")if(v.constructor){let x=O9.get(v.constructor);x||(x=new v.constructor,O9.set(v.constructor,x)),p=x[f]}else p=0;if(m)p?s.handlers[f]=p:delete s.handlers[f],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Rm)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&y.constructor===p.constructor)y.copy(p);else if(p!==void 0){const x=y instanceof at;!x&&y.setScalar?y.setScalar(p):y instanceof Rm&&p instanceof Rm?y.mask=p.mask:y.set(p),!jse()&&!a.linear&&x&&y.convertSRGBToLinear()}}else if(v[f]=p,v[f]instanceof Yi&&v[f].format===So&&v[f].type===Ld){const x=v[f];cL(x)&&cL(a.gl)?x.colorSpace=a.gl.outputColorSpace:x.encoding=a.gl.outputEncoding}Zv(t)}if(s.parent&&a.internal&&t.raycast&&d!==s.eventCount){const h=a.internal.interaction.indexOf(t);h>-1&&a.internal.interaction.splice(h,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=t.__r3f)!=null&&r.parent&&JB(t),t}function Zv(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function JB(t){t.onUpdate==null||t.onUpdate(t)}function Kse(t,e){t.manual||(Gse(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function jM(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function eTe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return tf.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tf.ContinuousEventPriority;default:return tf.DefaultEventPriority}}function Zse(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function tTe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{Zse(n.capturedMap,e,i,r)})}function nTe(t){function e(l){const{internal:c}=t.getState(),d=l.offsetX-c.initialClick[0],u=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+u*u))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var u;return(u=c.__r3f)==null?void 0:u.handlers["onPointer"+d]}))}function i(l,c){const d=t.getState(),u=new Set,h=[],f=c?c(d.internal.interaction):d.internal.interaction;for(let v=0;v<f.length;v++){const y=E1(f[v]);y&&(y.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function p(v){const y=E1(v);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var x;y.events.compute==null||y.events.compute(l,y,(x=y.previousRoot)==null?void 0:x.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(v,!0):[]}let m=f.flatMap(p).sort((v,y)=>{const x=E1(v.object),b=E1(y.object);return!x||!b?v.distance-y.distance:b.events.priority-x.events.priority||v.distance-y.distance}).filter(v=>{const y=jM(v);return u.has(y)?!1:(u.add(y),!0)});d.events.filter&&(m=d.events.filter(m,d));for(const v of m){let y=v.object;for(;y;){var g;(g=y.__r3f)!=null&&g.eventCount&&h.push({...v,eventObject:y}),y=y.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let v of d.internal.capturedMap.get(l.pointerId).values())u.has(jM(v.intersection))||h.push(v.intersection);return h}function r(l,c,d,u){const h=t.getState();if(l.length){const f={stopped:!1};for(const p of l){const m=E1(p.object)||h,{raycaster:g,pointer:v,camera:y,internal:x}=m,b=new de(v.x,v.y,0).unproject(y),w=T=>{var P,R;return(P=(R=x.capturedMap.get(T))==null?void 0:R.has(p.eventObject))!=null?P:!1},E=T=>{const P={intersection:p,target:c.target};x.capturedMap.has(T)?x.capturedMap.get(T).set(p.eventObject,P):x.capturedMap.set(T,new Map([[p.eventObject,P]])),c.target.setPointerCapture(T)},A=T=>{const P=x.capturedMap.get(T);P&&Zse(x.capturedMap,p.eventObject,P,T)};let S={};for(let T in c){let P=c[T];typeof P!="function"&&(S[T]=P)}let C={...p,...S,pointer:v,intersections:l,stopped:f.stopped,delta:d,unprojectedPoint:b,ray:g.ray,camera:y,stopPropagation(){const T="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!T||T.has(p.eventObject))&&(C.stopped=f.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(P=>P.eventObject===p.eventObject))){const P=l.slice(0,l.indexOf(p));s([...P,p])}},target:{hasPointerCapture:w,setPointerCapture:E,releasePointerCapture:A},currentTarget:{hasPointerCapture:w,setPointerCapture:E,releasePointerCapture:A},nativeEvent:c};if(u(C),f.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const d of c.hovered.values())if(!l.length||!l.find(u=>u.object===d.object&&u.index===d.index&&u.instanceId===d.instanceId)){const h=d.eventObject.__r3f,f=h==null?void 0:h.handlers;if(c.hovered.delete(jM(d)),h!=null&&h.eventCount){const p={...d,intersections:l};f.onPointerOut==null||f.onPointerOut(p),f.onPointerLeave==null||f.onPointerLeave(p)}}}function o(l,c){for(let d=0;d<c.length;d++){const u=c[d].__r3f;u==null||u.handlers.onPointerMissed==null||u.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=t.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))})}}return function(d){const{onPointerMissed:u,internal:h}=t.getState();h.lastEvent.current=d;const f=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",g=i(d,f?n:void 0),v=p?e(d):0;l==="onPointerDown"&&(h.initialClick=[d.offsetX,d.offsetY],h.initialHits=g.map(x=>x.eventObject)),p&&!g.length&&v<=2&&(o(d,h.interaction),u&&u(d)),f&&s(g);function y(x){const b=x.eventObject,w=b.__r3f,E=w==null?void 0:w.handlers;if(w!=null&&w.eventCount)if(f){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const A=jM(x),S=h.hovered.get(A);S?S.stopped&&x.stopPropagation():(h.hovered.set(A,x),E.onPointerOver==null||E.onPointerOver(x),E.onPointerEnter==null||E.onPointerEnter(x))}E.onPointerMove==null||E.onPointerMove(x)}else{const A=E[l];A?(!p||h.initialHits.includes(b))&&(o(d,h.interaction.filter(S=>!h.initialHits.includes(S))),A(x)):p&&h.initialHits.includes(b)&&o(d,h.interaction.filter(S=>!h.initialHits.includes(S)))}}r(g,d,v,y)}}return{handlePointer:a}}const iTe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Qse=t=>!!(t!=null&&t.render),l_=Z.createContext(null),rTe=(t,e)=>{const n=zse((a,l)=>{const c=new de,d=new de,u=new de;function h(v=l().camera,y=d,x=l().size){const{width:b,height:w,top:E,left:A}=x,S=b/w;y instanceof de?u.copy(y):u.set(...y);const C=v.getWorldPosition(c).distanceTo(u);if(Gse(v))return{width:b/v.zoom,height:w/v.zoom,top:E,left:A,factor:1,distance:C,aspect:S};{const T=v.fov*Math.PI/180,P=2*Math.tan(T/2)*C,R=P*(b/w);return{width:R,height:P,top:E,left:A,factor:b/R,distance:C,aspect:S}}}let f;const p=v=>a(y=>({performance:{...y.performance,current:v}})),m=new Ye;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>t(l(),v),advance:(v,y)=>e(v,y,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new C5,pointer:m,mouse:m,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();f&&clearTimeout(f),v.performance.current!==v.performance.min&&p(v.performance.min),f=setTimeout(()=>p(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:v=>a(y=>({...y,events:{...y.events,...v}})),setSize:(v,y,x,b,w)=>{const E=l().camera,A={width:v,height:y,top:b||0,left:w||0,updateStyle:x};a(S=>({size:A,viewport:{...S.viewport,...h(E,d,A)}}))},setDpr:v=>a(y=>{const x=Xse(v);return{viewport:{...y.viewport,dpr:x,initialDpr:y.viewport.initialDpr||x}}}),setFrameloop:(v="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,v!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Z.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,y,x)=>{const b=l().internal;return b.priority=b.priority+(y>0?1:0),b.subscribers.push({ref:v,priority:y,store:x}),b.subscribers=b.subscribers.sort((w,E)=>w.priority-E.priority),()=>{const w=l().internal;w!=null&&w.subscribers&&(w.priority=w.priority-(y>0?1:0),w.subscribers=w.subscribers.filter(E=>E.ref!==v))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:u}=n.getState();if(l!==r||c.dpr!==s){var h;r=l,s=c.dpr,Kse(a,l),d.setPixelRatio(c.dpr);const f=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,f)}a!==o&&(o=a,u(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let GM,sTe=new Set,oTe=new Set,aTe=new Set;function hL(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function M1(t,e){switch(t){case"before":return hL(sTe,e);case"after":return hL(oTe,e);case"tail":return hL(aTe,e)}}let fL,pL;function mL(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),fL=e.internal.subscribers,GM=0;GM<fL.length;GM++)pL=fL[GM],pL.ref.current(pL.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function lTe(t){let e=!1,n,i,r;function s(l){i=requestAnimationFrame(s),e=!0,n=0,M1("before",l);for(const d of t.values()){var c;r=d.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(n+=mL(l,r))}if(M1("after",l),n===0)return M1("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var d;if(!l)return t.forEach(u=>o(u.store.getState()),c);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,d,u){if(c&&M1("before",l),d)mL(l,d,u);else for(const h of t.values())mL(l,h.store.getState());c&&M1("after",l)}return{loop:s,invalidate:o,advance:a}}function I5(){const t=Z.useContext(l_);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function eo(t=n=>n,e){return I5()(t,e)}function fx(t,e=0){const n=I5(),i=n.getState().internal.subscribe,r=Wse(t);return pS(()=>i(r,e,n),[e,i,n]),null}function Jse(t,e){return function(n,...i){const r=new n;return t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,QAe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function gD(t,e,n,i){const r=Array.isArray(e)?e:[e],s=WAe(Jse(n,i),[t,...r],{equal:mi.equ});return Array.isArray(e)?s:s[0]}gD.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return qAe(Jse(n),[t,...i])};gD.clear=function(t,e){const n=Array.isArray(e)?e:[e];return $Ae([t,...n])};const Py=new Map,{invalidate:k9,advance:N9}=lTe(Py),{reconciler:c_,applyProps:uv}=XAe(Py,eTe),dv={objects:"shallow",strict:!1},cTe=(t,e)=>{const n=typeof t=="function"?t(e):t;return Qse(n)?n:new s5({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function uTe(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function dTe(t){const e=Py.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||rTe(k9,N9),o=n||c_.createContainer(s,tf.ConcurrentRoot,null,!1,null,"",r,null);e||Py.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(d={}){let{gl:u,size:h,scene:f,events:p,onCreated:m,shadows:g=!1,linear:v=!1,flat:y=!1,legacy:x=!1,orthographic:b=!1,frameloop:w="always",dpr:E=[1,2],performance:A,raycaster:S,camera:C,onPointerMissed:T}=d,P=s.getState(),R=P.gl;P.gl||P.set({gl:R=cTe(u,t)});let L=P.raycaster;L||P.set({raycaster:L=new O5});const{params:O,...B}=S||{};if(mi.equ(B,L,dv)||uv(L,{...B}),mi.equ(O,L.params,dv)||uv(L,{params:{...L.params,...O}}),!P.camera||P.camera===c&&!mi.equ(c,C,dv)){c=C;const k=C instanceof J_,z=k?C:b?new xd(0,0,0,0,.1,1e3):new vi(75,0,.1,1e3);k||(z.position.z=5,C&&uv(z,C),!P.camera&&!(C!=null&&C.rotation)&&z.lookAt(0,0,0)),P.set({camera:z})}if(!P.scene){let k;f instanceof t_?k=f:(k=new t_,f&&uv(k,f)),P.set({scene:Kv(k)})}if(!P.xr){const k=(K,J)=>{const F=s.getState();F.frameloop!=="never"&&N9(K,!0,F,J)},z=()=>{const K=s.getState();K.gl.xr.enabled=K.gl.xr.isPresenting,K.gl.xr.setAnimationLoop(K.gl.xr.isPresenting?k:null),K.gl.xr.isPresenting||k9(K)},W={connect(){const K=s.getState().gl;K.xr.addEventListener("sessionstart",z),K.xr.addEventListener("sessionend",z)},disconnect(){const K=s.getState().gl;K.xr.removeEventListener("sessionstart",z),K.xr.removeEventListener("sessionend",z)}};R.xr&&W.connect(),P.set({xr:W})}if(R.shadowMap){const k=R.shadowMap.enabled,z=R.shadowMap.type;if(R.shadowMap.enabled=!!g,mi.boo(g))R.shadowMap.type=Kb;else if(mi.str(g)){var $;const W={basic:jie,percentage:eD,soft:Kb,variance:fm};R.shadowMap.type=($=W[g])!=null?$:Kb}else mi.obj(g)&&Object.assign(R.shadowMap,g);(k!==R.shadowMap.enabled||z!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}const X=jse();X&&("enabled"in X?X.enabled=!x:"legacyMode"in X&&(X.legacyMode=x)),uv(R,{outputEncoding:v?3e3:3001,toneMapping:y?tc:$U}),P.legacy!==x&&P.set(()=>({legacy:x})),P.linear!==v&&P.set(()=>({linear:v})),P.flat!==y&&P.set(()=>({flat:y})),u&&!mi.fun(u)&&!Qse(u)&&!mi.equ(u,R,dv)&&uv(R,u),p&&!P.events.handlers&&P.set({events:p(s)});const N=uTe(t,h);return mi.equ(N,P.size,dv)||P.setSize(N.width,N.height,N.updateStyle,N.top,N.left),E&&P.viewport.dpr!==Xse(E)&&P.setDpr(E),P.frameloop!==w&&P.setFrameloop(w),P.onPointerMissed||P.set({onPointerMissed:T}),A&&!mi.equ(A,P.performance,dv)&&P.set(k=>({performance:{...k.performance,...A}})),a=m,l=!0,this},render(d){return l||this.configure(),c_.updateContainer(Z.createElement(hTe,{store:s,children:d,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){eoe(t)}}}function hTe({store:t,children:e,onCreated:n,rootElement:i}){return pS(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Z.createElement(l_.Provider,{value:t},e)}function eoe(t,e){const n=Py.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),c_.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),JAe(r),Py.delete(t),e&&e(t)}catch{}},500)})}}function fTe(t,e,n){return Z.createElement(pTe,{key:e.uuid,children:t,container:e,state:n})}function pTe({state:t={},children:e,container:n}){const{events:i,size:r,...s}=t,o=I5(),[a]=Z.useState(()=>new O5),[l]=Z.useState(()=>new Ye),c=Z.useCallback((u,h)=>{const f={...u};Object.keys(u).forEach(m=>{(iTe.includes(m)||u[m]!==h[m]&&h[m])&&delete f[m]});let p;if(h&&r){const m=h.camera;p=u.viewport.getCurrentViewport(m,new de,r),m!==u.camera&&Kse(m,r)}return{...f,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...u.events,...h==null?void 0:h.events,...i},size:{...u.size,...r},viewport:{...u.viewport,...p},...s}},[t]),[d]=Z.useState(()=>{const u=o.getState();return zse((f,p)=>({...u,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...u.events,...i},size:{...u.size,...r},...s,set:f,get:p,setEvents:m=>f(g=>({...g,events:{...g.events,...m}}))}))});return Z.useEffect(()=>{const u=o.subscribe(h=>d.setState(f=>c(h,f)));return()=>{u(),d.destroy()}},[]),Z.useEffect(()=>{d.setState(u=>c(o.getState(),u))},[c]),Z.createElement(Z.Fragment,null,c_.createPortal(Z.createElement(l_.Provider,{value:d},e),d,null))}c_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Z.version});function FC(){return FC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},FC.apply(this,arguments)}function ez(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?i=setTimeout(l,e-d):(i=null,n||(a=t.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var d=n&&!i;return i||(i=setTimeout(l,e)),d&&(a=t.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}ez.debounce=ez;var B9=ez;function mTe(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=Z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,u=Z.useRef(!1);Z.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,f,p]=Z.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:x,top:b,width:w,height:E,bottom:A,right:S,x:C,y:T}=l.current.element.getBoundingClientRect(),P={left:x,top:b,width:w,height:E,bottom:A,right:S,x:C,y:T};l.current.element instanceof HTMLElement&&r&&(P.height=l.current.element.offsetHeight,P.width=l.current.element.offsetWidth),Object.freeze(P),u.current&&!xTe(l.current.lastBounds,P)&&a(l.current.lastBounds=P)};return[y,d?B9(y,d):y,c?B9(y,c):y]},[a,r,c,d]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function g(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}const v=y=>{!y||y===l.current.element||(m(),l.current.element=y,l.current.scrollContainers=toe(y),g())};return vTe(p,Boolean(n)),gTe(f),Z.useEffect(()=>{m(),g()},[n,p,f]),Z.useEffect(()=>m,[]),[v,o,h]}function gTe(t){Z.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function vTe(t,e){Z.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function toe(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...toe(t.parentElement)]}const yTe=["x","y","top","bottom","left","right","width","height"],xTe=(t,e)=>yTe.every(n=>t[n]===e[n]);var bTe=Object.defineProperty,wTe=Object.defineProperties,_Te=Object.getOwnPropertyDescriptors,z9=Object.getOwnPropertySymbols,STe=Object.prototype.hasOwnProperty,ETe=Object.prototype.propertyIsEnumerable,F9=(t,e,n)=>e in t?bTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U9=(t,e)=>{for(var n in e||(e={}))STe.call(e,n)&&F9(t,n,e[n]);if(z9)for(var n of z9(e))ETe.call(e,n)&&F9(t,n,e[n]);return t},MTe=(t,e)=>wTe(t,_Te(e));function noe(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=noe(i,e,n);if(r)return r;i=e?null:i.sibling}}function ioe(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const k5=ioe(Z.createContext(null));class roe extends Z.Component{render(){return Z.createElement(k5.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:V9,ReactCurrentDispatcher:H9}=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function ATe(){const t=Z.useContext(k5);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Z.useId();return Z.useMemo(()=>{for(const i of[V9==null?void 0:V9.current,t,t==null?void 0:t.alternate]){if(!i)continue;const r=noe(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}function TTe(){var t,e;const n=ATe(),[i]=Z.useState(()=>new Map);i.clear();let r=n;for(;r;){const s=(t=r.type)==null?void 0:t._context;s&&s!==k5&&!i.has(s)&&i.set(s,(e=H9==null?void 0:H9.current)==null?void 0:e.readContext(ioe(s))),r=r.return}return i}function CTe(){const t=TTe();return Z.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>Z.createElement(e,null,Z.createElement(n.Provider,MTe(U9({},i),{value:t.get(n)}))),e=>Z.createElement(roe,U9({},e))),[t])}const gL={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function PTe(t){const{handlePointer:e}=nTe(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(gL).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=gL[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=gL[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const DTe=Z.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=PTe,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:u,legacy:h,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:v,camera:y,onPointerMissed:x,onCreated:b,...w},E){Z.useMemo(()=>Hse(BAe),[]);const A=CTe(),[S,C]=mTe({scroll:!0,debounce:{scroll:50,resize:0},...i}),T=Z.useRef(null),P=Z.useRef(null);Z.useImperativeHandle(E,()=>T.current);const R=Wse(x),[L,O]=Z.useState(!1),[B,$]=Z.useState(!1);if(L)throw L;if(B)throw B;const X=Z.useRef(null);pS(()=>{const U=T.current;C.width>0&&C.height>0&&U&&(X.current||(X.current=dTe(U)),X.current.configure({gl:s,events:o,shadows:c,linear:d,flat:u,legacy:h,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:v,camera:y,size:C,onPointerMissed:(...N)=>R.current==null?void 0:R.current(...N),onCreated:N=>{N.events.connect==null||N.events.connect(a?YAe(a)?a.current:a:P.current),l&&N.setEvents({compute:(k,z)=>{const W=k[l+"X"],K=k[l+"Y"];z.pointer.set(W/z.size.width*2-1,-(K/z.size.height)*2+1),z.raycaster.setFromCamera(z.pointer,z.camera)}}),b==null||b(N)}}),X.current.render(Z.createElement(A,null,Z.createElement(qse,{set:$},Z.createElement(Z.Suspense,{fallback:Z.createElement(KAe,{set:O})},e)))))}),Z.useEffect(()=>{const U=T.current;if(U)return()=>eoe(U)},[]);const H=a?"none":"auto";return Z.createElement("div",FC({ref:P,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...r}},w),Z.createElement("div",{ref:S,style:{width:"100%",height:"100%"}},Z.createElement("canvas",{ref:T,style:{display:"block"}},n)))}),N5=Z.forwardRef(function(e,n){return Z.createElement(roe,null,Z.createElement(DTe,FC({},e,{ref:n})))});function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Dy.apply(this,arguments)}function soe(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function ew(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function RTe(t,e){if(t){if(typeof t=="string")return tz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tz(t,e)}}function OTe(t){if(Array.isArray(t))return tz(t)}function LTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ITe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kTe(t){return OTe(t)||LTe(t)||RTe(t)||ITe()}new Ye;new Ye;function NTe(t,e,n){return Math.max(e,Math.min(n,t))}function BTe(t,e){return NTe(t-Math.floor(t/e)*e,0,e)}function zTe(t,e){var n=BTe(e-t,Math.PI*2);return n>Math.PI&&(n-=Math.PI*2),n}function ooe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ba=function t(e,n,i){var r=this;ooe(this,t),ew(this,"dot2",function(s,o){return r.x*s+r.y*o}),ew(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=n,this.z=i},FTe=[new Ba(1,1,0),new Ba(-1,1,0),new Ba(1,-1,0),new Ba(-1,-1,0),new Ba(1,0,1),new Ba(-1,0,1),new Ba(1,0,-1),new Ba(-1,0,-1),new Ba(0,1,1),new Ba(0,-1,1),new Ba(0,1,-1),new Ba(0,-1,-1)],j9=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],G9=new Array(512),W9=new Array(512),UTe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=j9[n]^e&255:i=j9[n]^e>>8&255,G9[n]=G9[n+256]=i,W9[n]=W9[n+256]=FTe[i%12]}};UTe(0);function VTe(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function q9(t){var e=VTe(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var HTe=function t(e){var n=this;ooe(this,t),ew(this,"seed",0),ew(this,"init",function(i){n.seed=i,n.value=q9(i)}),ew(this,"value",q9(this.seed)),this.init(e)};new HTe(Math.random());var jTe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/n)*Math.atan(Math.sin(2*Math.PI*e*r)/n)},aoe=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function Ir(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:aoe,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(t.__damp===void 0&&(t.__damp={}),t.__damp[l]===void 0&&(t.__damp[l]=0),Math.abs(t[e]-n)<=a)return t[e]=n,!1;i=Math.max(1e-4,i);var c=2/i,d=o(c*r),u=t[e]-n,h=n,f=s*i;u=Math.min(Math.max(u,-f),f),n=t[e]-u;var p=(t.__damp[l]+c*u)*r;t.__damp[l]=(t.__damp[l]-c*p)*d;var m=n+(u+p)*d;return h-t[e]>0==m>h&&(m=h,t.__damp[l]=(m-h)/r),t[e]=m,!0}function W0(t,e,n,i,r,s,o,a){return Ir(t,e,t[e]+zTe(t[e],n),i,r,s,o,a)}var A1=new Ye,$9,X9;function GTe(t,e,n,i,r,s,o){return typeof e=="number"?A1.setScalar(e):Array.isArray(e)?A1.set(e[0],e[1]):A1.copy(e),$9=Ir(t,"x",A1.x,n,i,r,s,o),X9=Ir(t,"y",A1.y,n,i,r,s,o),$9||X9}var hv=new de,Y9,K9,Z9;function nz(t,e,n,i,r,s,o){return typeof e=="number"?hv.setScalar(e):Array.isArray(e)?hv.set(e[0],e[1],e[2]):hv.copy(e),Y9=Ir(t,"x",hv.x,n,i,r,s,o),K9=Ir(t,"y",hv.y,n,i,r,s,o),Z9=Ir(t,"z",hv.z,n,i,r,s,o),Y9||K9||Z9}var Ap=new An,Q9,J9,e7,t7;function WTe(t,e,n,i,r,s,o){return typeof e=="number"?Ap.setScalar(e):Array.isArray(e)?Ap.set(e[0],e[1],e[2],e[3]):Ap.copy(e),Q9=Ir(t,"x",Ap.x,n,i,r,s,o),J9=Ir(t,"y",Ap.y,n,i,r,s,o),e7=Ir(t,"z",Ap.z,n,i,r,s,o),t7=Ir(t,"w",Ap.w,n,i,r,s,o),Q9||J9||e7||t7}var T1=new gg,n7,i7,r7;function qTe(t,e,n,i,r,s,o){return Array.isArray(e)?T1.set(e[0],e[1],e[2],e[3]):T1.copy(e),n7=W0(t,"x",T1.x,n,i,r,s,o),i7=W0(t,"y",T1.y,n,i,r,s,o),r7=W0(t,"z",T1.z,n,i,r,s,o),n7||i7||r7}var fv=new at,s7,o7,a7;function $Te(t,e,n,i,r,s,o){return e instanceof at?fv.copy(e):Array.isArray(e)?fv.setRGB(e[0],e[1],e[2]):fv.set(e),s7=Ir(t,"r",fv.r,n,i,r,s,o),o7=Ir(t,"g",fv.g,n,i,r,s,o),a7=Ir(t,"b",fv.b,n,i,r,s,o),s7||o7||a7}var Pl=new or,Bu=new An,l7=new An,C1=new An,c7,u7,d7,h7;function loe(t,e,n,i,r,s,o){var a=t;Array.isArray(e)?Pl.set(e[0],e[1],e[2],e[3]):Pl.copy(e);var l=t.dot(Pl)>0?1:-1;return Pl.x*=l,Pl.y*=l,Pl.z*=l,Pl.w*=l,c7=Ir(t,"x",Pl.x,n,i,r,s,o),u7=Ir(t,"y",Pl.y,n,i,r,s,o),d7=Ir(t,"z",Pl.z,n,i,r,s,o),h7=Ir(t,"w",Pl.w,n,i,r,s,o),Bu.set(t.x,t.y,t.z,t.w).normalize(),l7.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),C1.copy(Bu).multiplyScalar(l7.dot(Bu)/Bu.dot(Bu)),a.__damp.velocity_x-=C1.x,a.__damp.velocity_y-=C1.y,a.__damp.velocity_z-=C1.z,a.__damp.velocity_w-=C1.w,t.set(Bu.x,Bu.y,Bu.z,Bu.w),c7||u7||d7||h7}var P1=new zC,f7,p7,m7;function XTe(t,e,n,i,r,s,o){return Array.isArray(e)?P1.set(e[0],e[1],e[2]):P1.copy(e),f7=Ir(t,"radius",P1.radius,n,i,r,s,o),p7=W0(t,"phi",P1.phi,n,i,r,s,o),m7=W0(t,"theta",P1.theta,n,i,r,s,o),f7||p7||m7}var WM=new Yt,g7=new de,v7=new or,y7=new de,x7,b7,w7;function YTe(t,e,n,i,r,s,o){var a=t;return a.__damp===void 0&&(a.__damp={position:new de,rotation:new or,scale:new de},t.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?WM.set.apply(WM,kTe(e)):WM.copy(e),WM.decompose(g7,v7,y7),x7=nz(a.__damp.position,g7,n,i,r,s,o),b7=loe(a.__damp.rotation,v7,n,i,r,s,o),w7=nz(a.__damp.scale,y7,n,i,r,s,o),t.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),x7||b7||w7}var _7=Object.freeze({__proto__:null,rsqw:jTe,exp:aoe,damp:Ir,dampAngle:W0,damp2:GTe,damp3:nz,damp4:WTe,dampE:qTe,dampC:$Te,dampQ:loe,dampS:XTe,dampM:YTe});const B5=Z.createContext(null);function coe(){return Z.useContext(B5)}function z5({eps:t=1e-5,enabled:e=!0,infinite:n,horizontal:i,pages:r=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,style:l={},children:c}){const{get:d,setEvents:u,gl:h,size:f,invalidate:p,events:m}=eo(),[g]=Z.useState(()=>document.createElement("div")),[v]=Z.useState(()=>document.createElement("div")),[y]=Z.useState(()=>document.createElement("div")),x=h.domElement.parentNode,b=Z.useRef(0),w=Z.useMemo(()=>({el:g,eps:t,fill:v,fixed:y,horizontal:i,damping:o,offset:0,delta:0,scroll:b,pages:r,range(S,C,T=0){const P=S-T,R=P+C+T*2;return this.offset<P?0:this.offset>R?1:(this.offset-P)/(R-P)},curve(S,C,T=0){return Math.sin(this.range(S,C,T)*Math.PI)},visible(S,C,T=0){const P=S-T,R=P+C+T*2;return this.offset>=P&&this.offset<=R}}),[t,o,i,r]);Z.useEffect(()=>{g.style.position="absolute",g.style.width="100%",g.style.height="100%",g.style[i?"overflowX":"overflowY"]="auto",g.style[i?"overflowY":"overflowX"]="hidden",g.style.top="0px",g.style.left="0px";for(const C in l)g.style[C]=l[C];y.style.position="sticky",y.style.top="0px",y.style.left="0px",y.style.width="100%",y.style.height="100%",y.style.overflow="hidden",g.appendChild(y),v.style.height=i?"100%":`${r*s*100}%`,v.style.width=i?`${r*s*100}%`:"100%",v.style.pointerEvents="none",g.appendChild(v),x.appendChild(g),g[i?"scrollLeft":"scrollTop"]=1;const A=m.connected||h.domElement;requestAnimationFrame(()=>m.connect==null?void 0:m.connect(g));const S=d().events.compute;return u({compute(C,T){const{left:P,top:R}=x.getBoundingClientRect(),L=C.clientX-P,O=C.clientY-R;T.pointer.set(L/T.size.width*2-1,-(O/T.size.height)*2+1),T.raycaster.setFromCamera(T.pointer,T.camera)}}),()=>{x.removeChild(g),u({compute:S}),m.connect==null||m.connect(A)}},[r,s,i,g,v,y,x]),Z.useEffect(()=>{if(m.connected===g){const A=f[i?"width":"height"],S=g[i?"scrollWidth":"scrollHeight"],C=S-A;let T=0,P=!0,R=!0;const L=()=>{if(!(!e||R)&&(p(),T=g[i?"scrollLeft":"scrollTop"],b.current=T/C,n)){if(!P){if(T>=C){const B=1-w.offset;g[i?"scrollLeft":"scrollTop"]=1,b.current=w.offset=-B,P=!0}else if(T<=0){const B=1+w.offset;g[i?"scrollLeft":"scrollTop"]=S,b.current=w.offset=B,P=!0}}P&&setTimeout(()=>P=!1,40)}};g.addEventListener("scroll",L,{passive:!0}),requestAnimationFrame(()=>R=!1);const O=B=>g.scrollLeft+=B.deltaY/2;return i&&g.addEventListener("wheel",O,{passive:!0}),()=>{g.removeEventListener("scroll",L),i&&g.removeEventListener("wheel",O)}}},[g,m,f,n,w,p,i,e]);let E=0;return fx((A,S)=>{E=w.offset,_7.damp(w,"offset",b.current,o,S,a,void 0,t),_7.damp(w,"delta",Math.abs(E-w.offset),o,S,a,void 0,t),w.delta>t&&p()}),Z.createElement(B5.Provider,{value:w},c)}const KTe=Z.forwardRef(({children:t},e)=>{const n=Z.useRef(null),i=coe(),{width:r,height:s}=eo(o=>o.viewport);return fx(()=>{n.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,n.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),Z.createElement("group",{ref:soe([e,n])},t)}),ZTe=Z.forwardRef(({children:t,style:e,...n},i)=>{const r=coe(),s=Z.useRef(null),{width:o,height:a}=eo(d=>d.size),l=Z.useContext(l_),c=Z.useMemo(()=>vie(r.fixed),[r.fixed]);return fx(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-o*(r.pages-1)*r.offset:0}px,${r.horizontal?0:a*(r.pages-1)*-r.offset}px,0)`)}),c.render(Z.createElement("div",Dy({ref:soe([i,s]),style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},n),Z.createElement(B5.Provider,{value:r},Z.createElement(l_.Provider,{value:l},t)))),null}),Ry=Z.forwardRef(({html:t,...e},n)=>{const i=t?ZTe:KTe;return Z.createElement(i,Dy({ref:n},e))});function u_(t){return u_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u_(t)}function QTe(t,e){if(u_(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(u_(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JTe(t){var e=QTe(t,"string");return u_(e)==="symbol"?e:String(e)}function nn(t,e,n){return e=JTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const eCe=t=>t&&t.isCubeTexture;class tCe extends Lr{constructor(e,n){var i,r;const s=eCe(e),a=((i=s?(r=e.image[0])===null||r===void 0?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),d=3*Math.max(c,16*7),u=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/u}`,`#define CUBEUV_MAX_MIP ${l}.0`],f=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,m={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},g=new lx(1,16),v=new rc({uniforms:m,fragmentShader:p,vertexShader:f,side:ql});super(g,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}const S7=(t,e)=>(t%e+e)%e;let nCe=class extends bu{constructor(e,n){super(),nn(this,"object",void 0),nn(this,"domElement",void 0),nn(this,"enabled",!0),nn(this,"target",new de),nn(this,"minDistance",0),nn(this,"maxDistance",1/0),nn(this,"minZoom",0),nn(this,"maxZoom",1/0),nn(this,"minPolarAngle",0),nn(this,"maxPolarAngle",Math.PI),nn(this,"minAzimuthAngle",-1/0),nn(this,"maxAzimuthAngle",1/0),nn(this,"enableDamping",!1),nn(this,"dampingFactor",.05),nn(this,"enableZoom",!0),nn(this,"zoomSpeed",1),nn(this,"enableRotate",!0),nn(this,"rotateSpeed",1),nn(this,"enablePan",!0),nn(this,"panSpeed",1),nn(this,"screenSpacePanning",!0),nn(this,"keyPanSpeed",7),nn(this,"autoRotate",!1),nn(this,"autoRotateSpeed",2),nn(this,"reverseOrbit",!1),nn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),nn(this,"mouseButtons",{LEFT:Up.ROTATE,MIDDLE:Up.DOLLY,RIGHT:Up.PAN}),nn(this,"touches",{ONE:Vp.ROTATE,TWO:Vp.DOLLY_PAN}),nn(this,"target0",void 0),nn(this,"position0",void 0),nn(this,"zoom0",void 0),nn(this,"_domElementKeyEvents",null),nn(this,"getPolarAngle",void 0),nn(this,"getAzimuthalAngle",void 0),nn(this,"setPolarAngle",void 0),nn(this,"setAzimuthalAngle",void 0),nn(this,"getDistance",void 0),nn(this,"listenToKeyEvents",void 0),nn(this,"saveState",void 0),nn(this,"reset",void 0),nn(this,"update",void 0),nn(this,"connect",void 0),nn(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof vi?this.object.zoom:1,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=he=>{let Ce=S7(he,2*Math.PI),Ue=d.phi;Ue<0&&(Ue+=2*Math.PI),Ce<0&&(Ce+=2*Math.PI);let We=Math.abs(Ce-Ue);2*Math.PI-We<We&&(Ce<Ue?Ce+=2*Math.PI:Ue+=2*Math.PI),u.phi=Ce-Ue,i.update()},this.setAzimuthalAngle=he=>{let Ce=S7(he,2*Math.PI),Ue=d.theta;Ue<0&&(Ue+=2*Math.PI),Ce<0&&(Ce+=2*Math.PI);let We=Math.abs(Ce-Ue);2*Math.PI-We<We&&(Ce<Ue?Ce+=2*Math.PI:Ue+=2*Math.PI),u.theta=Ce-Ue,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",le),this._domElementKeyEvents=he},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof vi?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof vi&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const he=new de,Ce=new or().setFromUnitVectors(e.up,new de(0,1,0)),Ue=Ce.clone().invert(),We=new de,rt=new or,wt=2*Math.PI;return function(){const ne=i.object.position;he.copy(ne).sub(i.target),he.applyQuaternion(Ce),d.setFromVector3(he),i.autoRotate&&l===a.NONE&&R(T()),i.enableDamping?(d.theta+=u.theta*i.dampingFactor,d.phi+=u.phi*i.dampingFactor):(d.theta+=u.theta,d.phi+=u.phi);let ge=i.minAzimuthAngle,Me=i.maxAzimuthAngle;return isFinite(ge)&&isFinite(Me)&&(ge<-Math.PI?ge+=wt:ge>Math.PI&&(ge-=wt),Me<-Math.PI?Me+=wt:Me>Math.PI&&(Me-=wt),ge<=Me?d.theta=Math.max(ge,Math.min(Me,d.theta)):d.theta=d.theta>(ge+Me)/2?Math.max(ge,d.theta):Math.min(Me,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=h,d.radius=Math.max(i.minDistance,Math.min(i.maxDistance,d.radius)),i.enableDamping===!0?i.target.addScaledVector(f,i.dampingFactor):i.target.add(f),he.setFromSpherical(d),he.applyQuaternion(Ue),ne.copy(i.target).add(he),i.object.lookAt(i.target),i.enableDamping===!0?(u.theta*=1-i.dampingFactor,u.phi*=1-i.dampingFactor,f.multiplyScalar(1-i.dampingFactor)):(u.set(0,0,0),f.set(0,0,0)),h=1,p||We.distanceToSquared(i.object.position)>c||8*(1-rt.dot(i.object.quaternion))>c?(i.dispatchEvent(r),We.copy(i.object.position),rt.copy(i.object.quaternion),p=!1,!0):!1}})(),this.connect=he=>{he===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=he,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ne),i.domElement.addEventListener("pointerdown",Le),i.domElement.addEventListener("pointercancel",ke),i.domElement.addEventListener("wheel",V)},this.dispose=()=>{var he,Ce,Ue,We,rt,wt;(he=i.domElement)===null||he===void 0||he.removeEventListener("contextmenu",Ne),(Ce=i.domElement)===null||Ce===void 0||Ce.removeEventListener("pointerdown",Le),(Ue=i.domElement)===null||Ue===void 0||Ue.removeEventListener("pointercancel",ke),(We=i.domElement)===null||We===void 0||We.removeEventListener("wheel",V),(rt=i.domElement)===null||rt===void 0||rt.ownerDocument.removeEventListener("pointermove",fe),(wt=i.domElement)===null||wt===void 0||wt.ownerDocument.removeEventListener("pointerup",ve),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",le)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,d=new zC,u=new zC;let h=1;const f=new de;let p=!1;const m=new Ye,g=new Ye,v=new Ye,y=new Ye,x=new Ye,b=new Ye,w=new Ye,E=new Ye,A=new Ye,S=[],C={};function T(){return 2*Math.PI/60/60*i.autoRotateSpeed}function P(){return Math.pow(.95,i.zoomSpeed)}function R(he){i.reverseOrbit?u.theta+=he:u.theta-=he}function L(he){i.reverseOrbit?u.phi+=he:u.phi-=he}const O=(()=>{const he=new de;return function(Ue,We){he.setFromMatrixColumn(We,0),he.multiplyScalar(-Ue),f.add(he)}})(),B=(()=>{const he=new de;return function(Ue,We){i.screenSpacePanning===!0?he.setFromMatrixColumn(We,1):(he.setFromMatrixColumn(We,0),he.crossVectors(i.object.up,he)),he.multiplyScalar(Ue),f.add(he)}})(),$=(()=>{const he=new de;return function(Ue,We){const rt=i.domElement;if(rt&&i.object instanceof vi&&i.object.isPerspectiveCamera){const wt=i.object.position;he.copy(wt).sub(i.target);let $t=he.length();$t*=Math.tan(i.object.fov/2*Math.PI/180),O(2*Ue*$t/rt.clientHeight,i.object.matrix),B(2*We*$t/rt.clientHeight,i.object.matrix)}else rt&&i.object instanceof xd&&i.object.isOrthographicCamera?(O(Ue*(i.object.right-i.object.left)/i.object.zoom/rt.clientWidth,i.object.matrix),B(We*(i.object.top-i.object.bottom)/i.object.zoom/rt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function X(he){i.object instanceof vi&&i.object.isPerspectiveCamera?h/=he:i.object instanceof xd&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*he)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(he){i.object instanceof vi&&i.object.isPerspectiveCamera?h*=he:i.object instanceof xd&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/he)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function U(he){m.set(he.clientX,he.clientY)}function N(he){w.set(he.clientX,he.clientY)}function k(he){y.set(he.clientX,he.clientY)}function z(he){g.set(he.clientX,he.clientY),v.subVectors(g,m).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;Ce&&(R(2*Math.PI*v.x/Ce.clientHeight),L(2*Math.PI*v.y/Ce.clientHeight)),m.copy(g),i.update()}function W(he){E.set(he.clientX,he.clientY),A.subVectors(E,w),A.y>0?X(P()):A.y<0&&H(P()),w.copy(E),i.update()}function K(he){x.set(he.clientX,he.clientY),b.subVectors(x,y).multiplyScalar(i.panSpeed),$(b.x,b.y),y.copy(x),i.update()}function J(he){he.deltaY<0?H(P()):he.deltaY>0&&X(P()),i.update()}function F(he){let Ce=!1;switch(he.code){case i.keys.UP:$(0,i.keyPanSpeed),Ce=!0;break;case i.keys.BOTTOM:$(0,-i.keyPanSpeed),Ce=!0;break;case i.keys.LEFT:$(i.keyPanSpeed,0),Ce=!0;break;case i.keys.RIGHT:$(-i.keyPanSpeed,0),Ce=!0;break}Ce&&(he.preventDefault(),i.update())}function ee(){if(S.length==1)m.set(S[0].pageX,S[0].pageY);else{const he=.5*(S[0].pageX+S[1].pageX),Ce=.5*(S[0].pageY+S[1].pageY);m.set(he,Ce)}}function ie(){if(S.length==1)y.set(S[0].pageX,S[0].pageY);else{const he=.5*(S[0].pageX+S[1].pageX),Ce=.5*(S[0].pageY+S[1].pageY);y.set(he,Ce)}}function te(){const he=S[0].pageX-S[1].pageX,Ce=S[0].pageY-S[1].pageY,Ue=Math.sqrt(he*he+Ce*Ce);w.set(0,Ue)}function re(){i.enableZoom&&te(),i.enablePan&&ie()}function me(){i.enableZoom&&te(),i.enableRotate&&ee()}function se(he){if(S.length==1)g.set(he.pageX,he.pageY);else{const Ue=Fe(he),We=.5*(he.pageX+Ue.x),rt=.5*(he.pageY+Ue.y);g.set(We,rt)}v.subVectors(g,m).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;Ce&&(R(2*Math.PI*v.x/Ce.clientHeight),L(2*Math.PI*v.y/Ce.clientHeight)),m.copy(g)}function oe(he){if(S.length==1)x.set(he.pageX,he.pageY);else{const Ce=Fe(he),Ue=.5*(he.pageX+Ce.x),We=.5*(he.pageY+Ce.y);x.set(Ue,We)}b.subVectors(x,y).multiplyScalar(i.panSpeed),$(b.x,b.y),y.copy(x)}function be(he){const Ce=Fe(he),Ue=he.pageX-Ce.x,We=he.pageY-Ce.y,rt=Math.sqrt(Ue*Ue+We*We);E.set(0,rt),A.set(0,Math.pow(E.y/w.y,i.zoomSpeed)),X(A.y),w.copy(E)}function Ae(he){i.enableZoom&&be(he),i.enablePan&&oe(he)}function Ie(he){i.enableZoom&&be(he),i.enableRotate&&se(he)}function Le(he){if(i.enabled!==!1){if(S.length===0){var Ce,Ue;(Ce=i.domElement)===null||Ce===void 0||Ce.ownerDocument.addEventListener("pointermove",fe),(Ue=i.domElement)===null||Ue===void 0||Ue.ownerDocument.addEventListener("pointerup",ve)}He(he),he.pointerType==="touch"?xe(he):ze(he)}}function fe(he){i.enabled!==!1&&(he.pointerType==="touch"?De(he):j(he))}function ve(he){if(Pe(he),S.length===0){var Ce,Ue,We;(Ce=i.domElement)===null||Ce===void 0||Ce.releasePointerCapture(he.pointerId),(Ue=i.domElement)===null||Ue===void 0||Ue.ownerDocument.removeEventListener("pointermove",fe),(We=i.domElement)===null||We===void 0||We.ownerDocument.removeEventListener("pointerup",ve)}i.dispatchEvent(o),l=a.NONE}function ke(he){Pe(he)}function ze(he){let Ce;switch(he.button){case 0:Ce=i.mouseButtons.LEFT;break;case 1:Ce=i.mouseButtons.MIDDLE;break;case 2:Ce=i.mouseButtons.RIGHT;break;default:Ce=-1}switch(Ce){case Up.DOLLY:if(i.enableZoom===!1)return;N(he),l=a.DOLLY;break;case Up.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enablePan===!1)return;k(he),l=a.PAN}else{if(i.enableRotate===!1)return;U(he),l=a.ROTATE}break;case Up.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enableRotate===!1)return;U(he),l=a.ROTATE}else{if(i.enablePan===!1)return;k(he),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function j(he){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;z(he);break;case a.DOLLY:if(i.enableZoom===!1)return;W(he);break;case a.PAN:if(i.enablePan===!1)return;K(he);break}}function V(he){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(he.preventDefault(),i.dispatchEvent(s),J(he),i.dispatchEvent(o))}function le(he){i.enabled===!1||i.enablePan===!1||F(he)}function xe(he){switch(ae(he),S.length){case 1:switch(i.touches.ONE){case Vp.ROTATE:if(i.enableRotate===!1)return;ee(),l=a.TOUCH_ROTATE;break;case Vp.PAN:if(i.enablePan===!1)return;ie(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Vp.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;re(),l=a.TOUCH_DOLLY_PAN;break;case Vp.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function De(he){switch(ae(he),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;se(he),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;oe(he),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ae(he),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ie(he),i.update();break;default:l=a.NONE}}function Ne(he){i.enabled!==!1&&he.preventDefault()}function He(he){S.push(he)}function Pe(he){delete C[he.pointerId];for(let Ce=0;Ce<S.length;Ce++)if(S[Ce].pointerId==he.pointerId){S.splice(Ce,1);return}}function ae(he){let Ce=C[he.pointerId];Ce===void 0&&(Ce=new Ye,C[he.pointerId]=Ce),Ce.set(he.pageX,he.pageY)}function Fe(he){const Ce=he.pointerId===S[0].pointerId?S[1]:S[0];return C[Ce.pointerId]}n!==void 0&&this.connect(n),this.update()}};var iCe=Object.prototype;function rCe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||iCe;return t===n}var sCe=rCe;function oCe(t,e){return function(n){return t(e(n))}}var aCe=oCe,lCe=aCe,cCe=lCe(Object.keys,Object),uCe=cCe,dCe=sCe,hCe=uCe,fCe=Object.prototype,pCe=fCe.hasOwnProperty;function mCe(t){if(!dCe(t))return hCe(t);var e=[];for(var n in Object(t))pCe.call(t,n)&&n!="constructor"&&e.push(n);return e}var gCe=mCe,vCe=typeof oa=="object"&&oa&&oa.Object===Object&&oa,uoe=vCe,yCe=uoe,xCe=typeof self=="object"&&self&&self.Object===Object&&self,bCe=yCe||xCe||Function("return this")(),Xd=bCe,wCe=Xd,_Ce=wCe.Symbol,F5=_Ce,E7=F5,doe=Object.prototype,SCe=doe.hasOwnProperty,ECe=doe.toString,D1=E7?E7.toStringTag:void 0;function MCe(t){var e=SCe.call(t,D1),n=t[D1];try{t[D1]=void 0;var i=!0}catch{}var r=ECe.call(t);return i&&(e?t[D1]=n:delete t[D1]),r}var ACe=MCe,TCe=Object.prototype,CCe=TCe.toString;function PCe(t){return CCe.call(t)}var DCe=PCe,M7=F5,RCe=ACe,OCe=DCe,LCe="[object Null]",ICe="[object Undefined]",A7=M7?M7.toStringTag:void 0;function kCe(t){return t==null?t===void 0?ICe:LCe:A7&&A7 in Object(t)?RCe(t):OCe(t)}var vD=kCe;function NCe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var hoe=NCe,BCe=vD,zCe=hoe,FCe="[object AsyncFunction]",UCe="[object Function]",VCe="[object GeneratorFunction]",HCe="[object Proxy]";function jCe(t){if(!zCe(t))return!1;var e=BCe(t);return e==UCe||e==VCe||e==FCe||e==HCe}var foe=jCe,GCe=Xd,WCe=GCe["__core-js_shared__"],qCe=WCe,vL=qCe,T7=function(){var t=/[^.]+$/.exec(vL&&vL.keys&&vL.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $Ce(t){return!!T7&&T7 in t}var XCe=$Ce,YCe=Function.prototype,KCe=YCe.toString;function ZCe(t){if(t!=null){try{return KCe.call(t)}catch{}try{return t+""}catch{}}return""}var poe=ZCe,QCe=foe,JCe=XCe,e2e=hoe,t2e=poe,n2e=/[\\^$.*+?()[\]{}|]/g,i2e=/^\[object .+?Constructor\]$/,r2e=Function.prototype,s2e=Object.prototype,o2e=r2e.toString,a2e=s2e.hasOwnProperty,l2e=RegExp("^"+o2e.call(a2e).replace(n2e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c2e(t){if(!e2e(t)||JCe(t))return!1;var e=QCe(t)?l2e:i2e;return e.test(t2e(t))}var u2e=c2e;function d2e(t,e){return t==null?void 0:t[e]}var h2e=d2e,f2e=u2e,p2e=h2e;function m2e(t,e){var n=p2e(t,e);return f2e(n)?n:void 0}var px=m2e,g2e=px,v2e=Xd,y2e=g2e(v2e,"DataView"),x2e=y2e,b2e=px,w2e=Xd,_2e=b2e(w2e,"Map"),U5=_2e,S2e=px,E2e=Xd,M2e=S2e(E2e,"Promise"),A2e=M2e,T2e=px,C2e=Xd,P2e=T2e(C2e,"Set"),D2e=P2e,R2e=px,O2e=Xd,L2e=R2e(O2e,"WeakMap"),I2e=L2e,iz=x2e,rz=U5,sz=A2e,oz=D2e,az=I2e,moe=vD,mx=poe,C7="[object Map]",k2e="[object Object]",P7="[object Promise]",D7="[object Set]",R7="[object WeakMap]",O7="[object DataView]",N2e=mx(iz),B2e=mx(rz),z2e=mx(sz),F2e=mx(oz),U2e=mx(az),jp=moe;(iz&&jp(new iz(new ArrayBuffer(1)))!=O7||rz&&jp(new rz)!=C7||sz&&jp(sz.resolve())!=P7||oz&&jp(new oz)!=D7||az&&jp(new az)!=R7)&&(jp=function(t){var e=moe(t),n=e==k2e?t.constructor:void 0,i=n?mx(n):"";if(i)switch(i){case N2e:return O7;case B2e:return C7;case z2e:return P7;case F2e:return D7;case U2e:return R7}return e});var V2e=jp;function H2e(t){return t!=null&&typeof t=="object"}var yD=H2e,j2e=vD,G2e=yD,W2e="[object Arguments]";function q2e(t){return G2e(t)&&j2e(t)==W2e}var $2e=q2e,L7=$2e,X2e=yD,goe=Object.prototype,Y2e=goe.hasOwnProperty,K2e=goe.propertyIsEnumerable,Z2e=L7(function(){return arguments}())?L7:function(t){return X2e(t)&&Y2e.call(t,"callee")&&!K2e.call(t,"callee")},Q2e=Z2e,J2e=Array.isArray,V5=J2e,ePe=9007199254740991;function tPe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ePe}var voe=tPe,nPe=foe,iPe=voe;function rPe(t){return t!=null&&iPe(t.length)&&!nPe(t)}var sPe=rPe,d_={},oPe={get exports(){return d_},set exports(t){d_=t}};function aPe(){return!1}var lPe=aPe;(function(t,e){var n=Xd,i=lPe,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===r,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||i;t.exports=c})(oPe,d_);var cPe=vD,uPe=voe,dPe=yD,hPe="[object Arguments]",fPe="[object Array]",pPe="[object Boolean]",mPe="[object Date]",gPe="[object Error]",vPe="[object Function]",yPe="[object Map]",xPe="[object Number]",bPe="[object Object]",wPe="[object RegExp]",_Pe="[object Set]",SPe="[object String]",EPe="[object WeakMap]",MPe="[object ArrayBuffer]",APe="[object DataView]",TPe="[object Float32Array]",CPe="[object Float64Array]",PPe="[object Int8Array]",DPe="[object Int16Array]",RPe="[object Int32Array]",OPe="[object Uint8Array]",LPe="[object Uint8ClampedArray]",IPe="[object Uint16Array]",kPe="[object Uint32Array]",fi={};fi[TPe]=fi[CPe]=fi[PPe]=fi[DPe]=fi[RPe]=fi[OPe]=fi[LPe]=fi[IPe]=fi[kPe]=!0;fi[hPe]=fi[fPe]=fi[MPe]=fi[pPe]=fi[APe]=fi[mPe]=fi[gPe]=fi[vPe]=fi[yPe]=fi[xPe]=fi[bPe]=fi[wPe]=fi[_Pe]=fi[SPe]=fi[EPe]=!1;function NPe(t){return dPe(t)&&uPe(t.length)&&!!fi[cPe(t)]}var BPe=NPe;function zPe(t){return function(e){return t(e)}}var FPe=zPe,UC={},UPe={get exports(){return UC},set exports(t){UC=t}};(function(t,e){var n=uoe,i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===i,o=s&&n.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(UPe,UC);var VPe=BPe,HPe=FPe,I7=UC,k7=I7&&I7.isTypedArray,jPe=k7?HPe(k7):VPe,yoe=jPe;function GPe(){this.__data__=[],this.size=0}var WPe=GPe;function qPe(t,e){return t===e||t!==t&&e!==e}var xoe=qPe,$Pe=xoe;function XPe(t,e){for(var n=t.length;n--;)if($Pe(t[n][0],e))return n;return-1}var xD=XPe,YPe=xD,KPe=Array.prototype,ZPe=KPe.splice;function QPe(t){var e=this.__data__,n=YPe(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():ZPe.call(e,n,1),--this.size,!0}var JPe=QPe,eDe=xD;function tDe(t){var e=this.__data__,n=eDe(e,t);return n<0?void 0:e[n][1]}var nDe=tDe,iDe=xD;function rDe(t){return iDe(this.__data__,t)>-1}var sDe=rDe,oDe=xD;function aDe(t,e){var n=this.__data__,i=oDe(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var lDe=aDe,cDe=WPe,uDe=JPe,dDe=nDe,hDe=sDe,fDe=lDe;function gx(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}gx.prototype.clear=cDe;gx.prototype.delete=uDe;gx.prototype.get=dDe;gx.prototype.has=hDe;gx.prototype.set=fDe;var bD=gx,pDe=bD;function mDe(){this.__data__=new pDe,this.size=0}var gDe=mDe;function vDe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var yDe=vDe;function xDe(t){return this.__data__.get(t)}var bDe=xDe;function wDe(t){return this.__data__.has(t)}var _De=wDe,SDe=px,EDe=SDe(Object,"create"),wD=EDe,N7=wD;function MDe(){this.__data__=N7?N7(null):{},this.size=0}var ADe=MDe;function TDe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var CDe=TDe,PDe=wD,DDe="__lodash_hash_undefined__",RDe=Object.prototype,ODe=RDe.hasOwnProperty;function LDe(t){var e=this.__data__;if(PDe){var n=e[t];return n===DDe?void 0:n}return ODe.call(e,t)?e[t]:void 0}var IDe=LDe,kDe=wD,NDe=Object.prototype,BDe=NDe.hasOwnProperty;function zDe(t){var e=this.__data__;return kDe?e[t]!==void 0:BDe.call(e,t)}var FDe=zDe,UDe=wD,VDe="__lodash_hash_undefined__";function HDe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=UDe&&e===void 0?VDe:e,this}var jDe=HDe,GDe=ADe,WDe=CDe,qDe=IDe,$De=FDe,XDe=jDe;function vx(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}vx.prototype.clear=GDe;vx.prototype.delete=WDe;vx.prototype.get=qDe;vx.prototype.has=$De;vx.prototype.set=XDe;var YDe=vx,B7=YDe,KDe=bD,ZDe=U5;function QDe(){this.size=0,this.__data__={hash:new B7,map:new(ZDe||KDe),string:new B7}}var JDe=QDe;function eRe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var tRe=eRe,nRe=tRe;function iRe(t,e){var n=t.__data__;return nRe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var _D=iRe,rRe=_D;function sRe(t){var e=rRe(this,t).delete(t);return this.size-=e?1:0,e}var oRe=sRe,aRe=_D;function lRe(t){return aRe(this,t).get(t)}var cRe=lRe,uRe=_D;function dRe(t){return uRe(this,t).has(t)}var hRe=dRe,fRe=_D;function pRe(t,e){var n=fRe(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var mRe=pRe,gRe=JDe,vRe=oRe,yRe=cRe,xRe=hRe,bRe=mRe;function yx(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}yx.prototype.clear=gRe;yx.prototype.delete=vRe;yx.prototype.get=yRe;yx.prototype.has=xRe;yx.prototype.set=bRe;var boe=yx,wRe=bD,_Re=U5,SRe=boe,ERe=200;function MRe(t,e){var n=this.__data__;if(n instanceof wRe){var i=n.__data__;if(!_Re||i.length<ERe-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new SRe(i)}return n.set(t,e),this.size=n.size,this}var ARe=MRe,TRe=bD,CRe=gDe,PRe=yDe,DRe=bDe,RRe=_De,ORe=ARe;function xx(t){var e=this.__data__=new TRe(t);this.size=e.size}xx.prototype.clear=CRe;xx.prototype.delete=PRe;xx.prototype.get=DRe;xx.prototype.has=RRe;xx.prototype.set=ORe;var LRe=xx,IRe="__lodash_hash_undefined__";function kRe(t){return this.__data__.set(t,IRe),this}var NRe=kRe;function BRe(t){return this.__data__.has(t)}var zRe=BRe,FRe=boe,URe=NRe,VRe=zRe;function VC(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new FRe;++e<n;)this.add(t[e])}VC.prototype.add=VC.prototype.push=URe;VC.prototype.has=VRe;var HRe=VC;function jRe(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var GRe=jRe;function WRe(t,e){return t.has(e)}var qRe=WRe,$Re=HRe,XRe=GRe,YRe=qRe,KRe=1,ZRe=2;function QRe(t,e,n,i,r,s){var o=n&KRe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),d=s.get(e);if(c&&d)return c==e&&d==t;var u=-1,h=!0,f=n&ZRe?new $Re:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var p=t[u],m=e[u];if(i)var g=o?i(m,p,u,e,t,s):i(p,m,u,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(f){if(!XRe(e,function(v,y){if(!YRe(f,y)&&(p===v||r(p,v,n,i,s)))return f.push(y)})){h=!1;break}}else if(!(p===m||r(p,m,n,i,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var woe=QRe,JRe=Xd,e3e=JRe.Uint8Array,t3e=e3e;function n3e(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}var i3e=n3e;function r3e(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var s3e=r3e,z7=F5,F7=t3e,o3e=xoe,a3e=woe,l3e=i3e,c3e=s3e,u3e=1,d3e=2,h3e="[object Boolean]",f3e="[object Date]",p3e="[object Error]",m3e="[object Map]",g3e="[object Number]",v3e="[object RegExp]",y3e="[object Set]",x3e="[object String]",b3e="[object Symbol]",w3e="[object ArrayBuffer]",_3e="[object DataView]",U7=z7?z7.prototype:void 0,yL=U7?U7.valueOf:void 0;function S3e(t,e,n,i,r,s,o){switch(n){case _3e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w3e:return!(t.byteLength!=e.byteLength||!s(new F7(t),new F7(e)));case h3e:case f3e:case g3e:return o3e(+t,+e);case p3e:return t.name==e.name&&t.message==e.message;case v3e:case x3e:return t==e+"";case m3e:var a=l3e;case y3e:var l=i&u3e;if(a||(a=c3e),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=d3e,o.set(t,e);var d=a3e(a(t),a(e),i,r,s,o);return o.delete(t),d;case b3e:if(yL)return yL.call(t)==yL.call(e)}return!1}var E3e=S3e;function M3e(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var A3e=M3e,T3e=A3e,C3e=V5;function P3e(t,e,n){var i=e(t);return C3e(t)?i:T3e(i,n(t))}var D3e=P3e;function R3e(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}var O3e=R3e;function L3e(){return[]}var I3e=L3e,k3e=O3e,N3e=I3e,B3e=Object.prototype,z3e=B3e.propertyIsEnumerable,V7=Object.getOwnPropertySymbols,F3e=V7?function(t){return t==null?[]:(t=Object(t),k3e(V7(t),function(e){return z3e.call(t,e)}))}:N3e,U3e=F3e;function V3e(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var H3e=V3e,j3e=9007199254740991,G3e=/^(?:0|[1-9]\d*)$/;function W3e(t,e){var n=typeof t;return e=e??j3e,!!e&&(n=="number"||n!="symbol"&&G3e.test(t))&&t>-1&&t%1==0&&t<e}var q3e=W3e,$3e=H3e,X3e=Q2e,Y3e=V5,K3e=d_,Z3e=q3e,Q3e=yoe,J3e=Object.prototype,eOe=J3e.hasOwnProperty;function tOe(t,e){var n=Y3e(t),i=!n&&X3e(t),r=!n&&!i&&K3e(t),s=!n&&!i&&!r&&Q3e(t),o=n||i||r||s,a=o?$3e(t.length,String):[],l=a.length;for(var c in t)(e||eOe.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Z3e(c,l)))&&a.push(c);return a}var nOe=tOe,iOe=nOe,rOe=gCe,sOe=sPe;function oOe(t){return sOe(t)?iOe(t):rOe(t)}var aOe=oOe,lOe=D3e,cOe=U3e,uOe=aOe;function dOe(t){return lOe(t,uOe,cOe)}var hOe=dOe,H7=hOe,fOe=1,pOe=Object.prototype,mOe=pOe.hasOwnProperty;function gOe(t,e,n,i,r,s){var o=n&fOe,a=H7(t),l=a.length,c=H7(e),d=c.length;if(l!=d&&!o)return!1;for(var u=l;u--;){var h=a[u];if(!(o?h in e:mOe.call(e,h)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++u<l;){h=a[u];var v=t[h],y=e[h];if(i)var x=o?i(y,v,h,e,t,s):i(v,y,h,t,e,s);if(!(x===void 0?v===y||r(v,y,n,i,s):x)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(t),s.delete(e),m}var vOe=gOe,xL=LRe,yOe=woe,xOe=E3e,bOe=vOe,j7=V2e,G7=V5,W7=d_,wOe=yoe,_Oe=1,q7="[object Arguments]",$7="[object Array]",qM="[object Object]",SOe=Object.prototype,X7=SOe.hasOwnProperty;function EOe(t,e,n,i,r,s){var o=G7(t),a=G7(e),l=o?$7:j7(t),c=a?$7:j7(e);l=l==q7?qM:l,c=c==q7?qM:c;var d=l==qM,u=c==qM,h=l==c;if(h&&W7(t)){if(!W7(e))return!1;o=!0,d=!1}if(h&&!d)return s||(s=new xL),o||wOe(t)?yOe(t,e,n,i,r,s):xOe(t,e,l,n,i,r,s);if(!(n&_Oe)){var f=d&&X7.call(t,"__wrapped__"),p=u&&X7.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new xL),r(m,g,n,i,s)}}return h?(s||(s=new xL),bOe(t,e,n,i,r,s)):!1}var MOe=EOe,AOe=MOe,Y7=yD;function _oe(t,e,n,i,r){return t===e?!0:t==null||e==null||!Y7(t)&&!Y7(e)?t!==t&&e!==e:AOe(t,e,n,i,_oe,r)}var TOe=_oe;class COe extends Ase{constructor(e){super(e),this.type=$l}parse(e){const a=function(x,b){switch(x){case 1:console.error("THREE.RGBELoader Read Error: "+(b||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(b||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(b||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(b||""))}return-1},u=`
`,h=function(x,b,w){b=b||1024;let A=x.pos,S=-1,C=0,T="",P=String.fromCharCode.apply(null,new Uint16Array(x.subarray(A,A+128)));for(;0>(S=P.indexOf(u))&&C<b&&A<x.byteLength;)T+=P,C+=P.length,A+=128,P+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(A,A+128)));return-1<S?(w!==!1&&(x.pos+=C+S+1),T+P.slice(0,S)):!1},f=function(x){const b=/^#\?(\S+)/,w=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,A=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let T,P;if(x.pos>=x.byteLength||!(T=h(x)))return a(1,"no header found");if(!(P=T.match(b)))return a(3,"bad initial token");for(C.valid|=1,C.programtype=P[1],C.string+=T+`
`;T=h(x),T!==!1;){if(C.string+=T+`
`,T.charAt(0)==="#"){C.comments+=T+`
`;continue}if((P=T.match(w))&&(C.gamma=parseFloat(P[1])),(P=T.match(E))&&(C.exposure=parseFloat(P[1])),(P=T.match(A))&&(C.valid|=2,C.format=P[1]),(P=T.match(S))&&(C.valid|=4,C.height=parseInt(P[1],10),C.width=parseInt(P[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2?C.valid&4?C:a(3,"missing image size specifier"):a(3,"missing format specifier")},p=function(x,b,w){const E=b;if(E<8||E>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);if(E!==(x[2]<<8|x[3]))return a(3,"wrong scanline width");const A=new Uint8Array(4*b*w);if(!A.length)return a(4,"unable to allocate buffer space");let S=0,C=0;const T=4*E,P=new Uint8Array(4),R=new Uint8Array(T);let L=w;for(;L>0&&C<x.byteLength;){if(C+4>x.byteLength)return a(1);if(P[0]=x[C++],P[1]=x[C++],P[2]=x[C++],P[3]=x[C++],P[0]!=2||P[1]!=2||(P[2]<<8|P[3])!=E)return a(3,"bad rgbe scanline format");let O=0,B;for(;O<T&&C<x.byteLength;){B=x[C++];const X=B>128;if(X&&(B-=128),B===0||O+B>T)return a(3,"bad scanline data");if(X){const H=x[C++];for(let U=0;U<B;U++)R[O++]=H}else R.set(x.subarray(C,C+B),O),O+=B,C+=B}const $=E;for(let X=0;X<$;X++){let H=0;A[S]=R[X+H],H+=E,A[S+1]=R[X+H],H+=E,A[S+2]=R[X+H],H+=E,A[S+3]=R[X+H],S+=4}L--}return A},m=function(x,b,w,E){const A=x[b+3],S=Math.pow(2,A-128)/255;w[E+0]=x[b+0]*S,w[E+1]=x[b+1]*S,w[E+2]=x[b+2]*S,w[E+3]=1},g=function(x,b,w,E){const A=x[b+3],S=Math.pow(2,A-128)/255;w[E+0]=Cb.toHalfFloat(Math.min(x[b+0]*S,65504)),w[E+1]=Cb.toHalfFloat(Math.min(x[b+1]*S,65504)),w[E+2]=Cb.toHalfFloat(Math.min(x[b+2]*S,65504)),w[E+3]=Cb.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const y=f(v);if(y!==-1){const x=y.width,b=y.height,w=p(v.subarray(v.pos),x,b);if(w!==-1){let E,A,S;switch(this.type){case rl:S=w.length/4;const C=new Float32Array(S*4);for(let P=0;P<S;P++)m(w,P*4,C,P*4);E=C,A=rl;break;case $l:S=w.length/4;const T=new Uint16Array(S*4);for(let P=0;P<S;P++)g(w,P*4,T,P*4);E=T,A=$l;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:x,height:b,data:E,header:y.string,gamma:y.gamma,exposure:y.exposure,type:A}}}return null}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(o,a){switch(o.type){case rl:case $l:o.encoding=hu,o.minFilter=gi,o.magFilter=gi,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,i,r)}}const H5=Z.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const d=eo(w=>w.invalidate),u=eo(w=>w.camera),h=eo(w=>w.gl),f=eo(w=>w.events),p=eo(w=>w.setEvents),m=eo(w=>w.set),g=eo(w=>w.get),v=eo(w=>w.performance),y=e||u,x=i||f.connected||h.domElement,b=Z.useMemo(()=>new nCe(y),[y]);return fx(()=>{b.enabled&&b.update()},-1),Z.useEffect(()=>(b.connect(x),()=>void b.dispose()),[x,n,b,d]),Z.useEffect(()=>{const w=S=>{d(),n&&v.regress(),s&&s(S)},E=S=>{o&&o(S)},A=S=>{a&&a(S)};return b.addEventListener("change",w),b.addEventListener("start",E),b.addEventListener("end",A),()=>{b.removeEventListener("start",E),b.removeEventListener("end",A),b.removeEventListener("change",w)}},[s,o,a,b,d,p]),Z.useEffect(()=>{if(t){const w=g().controls;return m({controls:b}),()=>m({controls:w})}},[t,b]),Z.createElement("primitive",Dy({ref:c,object:b,enableDamping:r},l))}),bL={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},POe="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/";function Soe({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:i=void 0,extensions:r}={}){if(n){if(!(n in bL))throw new Error("Preset must be one of: "+Object.keys(bL).join(", "));t=bL[n],e=POe}const s=Array.isArray(t),a=gD(s?Mse:COe,s?[t]:t,c=>{c.setPath(e),r&&r(c)}),l=s?a[0]:a;return l.mapping=s?Od:wy,l.encoding=i??s?kn:hu,l}const DOe=t=>t.current&&t.current.isScene,ROe=t=>DOe(t)?t.current:t;function j5(t,e,n,i,r=0){const s=ROe(e||n),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return t!=="only"&&(s.environment=i),t&&(s.background=i),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=r),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function G5({scene:t,background:e=!1,blur:n,map:i}){const r=eo(s=>s.scene);return Z.useLayoutEffect(()=>{if(i)return j5(e,t,r,i,n)},[r,t,i,e,n]),null}function Eoe({background:t=!1,scene:e,blur:n,...i}){const r=Soe(i),s=eo(o=>o.scene);return Z.useLayoutEffect(()=>j5(t,e,s,r,n),[r,t,e,s,n]),null}function OOe({children:t,near:e=1,far:n=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:d,preset:u=void 0,extensions:h}){const f=eo(x=>x.gl),p=eo(x=>x.scene),m=Z.useRef(null),[g]=Z.useState(()=>new t_),v=Z.useMemo(()=>{const x=new t5(i);return x.texture.type=$l,x},[i]);Z.useLayoutEffect(()=>(r===1&&m.current.update(f,g),j5(o,l,p,v.texture,a)),[t,g,v.texture,l,p,o,r,f]);let y=1;return fx(()=>{(r===1/0||y<r)&&(m.current.update(f,g),y++)}),Z.createElement(Z.Fragment,null,fTe(Z.createElement(Z.Fragment,null,t,Z.createElement("cubeCamera",{ref:m,args:[e,n,v]}),c||u?Z.createElement(Eoe,{background:!0,files:c,preset:u,path:d,extensions:h}):s?Z.createElement(G5,{background:!0,map:s,extensions:h}):null),g))}function LOe(t){var e,n,i,r;const s=Soe(t),o=t.map||s;Z.useMemo(()=>Hse({GroundProjectedEnvImpl:tCe}),[]);const a=Z.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,d=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return Z.createElement(Z.Fragment,null,Z.createElement(G5,Dy({},t,{map:o})),Z.createElement("groundProjectedEnvImpl",{args:a,scale:d,height:l,radius:c}))}function W5(t){return t.ground?Z.createElement(LOe,t):t.map?Z.createElement(G5,t):t.children?Z.createElement(OOe,t):Z.createElement(Eoe,t)}const Moe=Z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),SD=Z.createContext({}),q5=Z.createContext(null),ED=typeof document<"u",K7=ED?Z.useLayoutEffect:Z.useEffect,Aoe=Z.createContext({strict:!1});function IOe(t,e,n,i){const{visualElement:r}=Z.useContext(SD),s=Z.useContext(Aoe),o=Z.useContext(q5),a=Z.useContext(Moe).reducedMotion,l=Z.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;return Z.useInsertionEffect(()=>{c&&c.update(n,o)}),K7(()=>{c&&c.render()}),Z.useEffect(()=>{c&&c.updateFeatures()}),(window.HandoffAppearAnimations?K7:Z.useEffect)(()=>{c&&c.animationState&&c.animationState.animateChanges()}),c}function _0(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function kOe(t,e,n){return Z.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):_0(n)&&(n.current=i))},[e])}function h_(t){return typeof t=="string"||Array.isArray(t)}function MD(t){return typeof t=="object"&&typeof t.start=="function"}const $5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],X5=["initial",...$5];function AD(t){return MD(t.animate)||X5.some(e=>h_(t[e]))}function Toe(t){return Boolean(AD(t)||t.variants)}function NOe(t,e){if(AD(t)){const{initial:n,animate:i}=t;return{initial:n===!1||h_(n)?n:void 0,animate:h_(i)?i:void 0}}return t.inherit!==!1?e:{}}function BOe(t){const{initial:e,animate:n}=NOe(t,Z.useContext(SD));return Z.useMemo(()=>({initial:e,animate:n}),[Z7(e),Z7(n)])}function Z7(t){return Array.isArray(t)?t.join(" "):t}const Q7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},f_={};for(const t in Q7)f_[t]={isEnabled:e=>Q7[t].some(n=>!!e[n])};function zOe(t){for(const e in t)f_[e]={...f_[e],...t[e]}}const Coe=Z.createContext({}),Poe=Z.createContext({}),FOe=Symbol.for("motionComponentSymbol");function UOe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&zOe(t);function s(a,l){let c;const d={...Z.useContext(Moe),...a,layoutId:VOe(a)},{isStatic:u}=d,h=BOe(a),f=i(a,u);if(!u&&ED){h.visualElement=IOe(r,f,d,e);const p=Z.useContext(Poe),m=Z.useContext(Aoe).strict;h.visualElement&&(c=h.visualElement.loadFeatures(d,m,t,p))}return Z.createElement(SD.Provider,{value:h},c&&h.visualElement?Z.createElement(c,{visualElement:h.visualElement,...d}):null,n(r,a,kOe(f,h.visualElement,l),f,u,h.visualElement))}const o=Z.forwardRef(s);return o[FOe]=r,o}function VOe({layoutId:t}){const e=Z.useContext(Coe).id;return e&&t!==void 0?e+"-"+t:t}function HOe(t){function e(i,r={}){return UOe(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const jOe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Y5(t){return typeof t!="string"||t.includes("-")?!1:!!(jOe.indexOf(t)>-1||/[A-Z]/.test(t))}const HC={};function GOe(t){Object.assign(HC,t)}const mS=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wg=new Set(mS);function Doe(t,{layout:e,layoutId:n}){return wg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!HC[t]||t==="opacity")}const Fo=t=>Boolean(t&&t.getVelocity),WOe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qOe=mS.length;function $Oe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let s="";for(let o=0;o<qOe;o++){const a=mS[o];if(t[a]!==void 0){const l=WOe[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(t,i?"":s):n&&i&&(s="none"),s}const Roe=t=>e=>typeof e=="string"&&e.startsWith(t),Ooe=Roe("--"),lz=Roe("var(--"),XOe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,YOe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Vf=(t,e,n)=>Math.min(Math.max(n,t),e),_g={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},tw={..._g,transform:t=>Vf(0,1,t)},$M={..._g,default:1},nw=t=>Math.round(t*1e5)/1e5,TD=/(-)?([\d]*\.?[\d])+/g,Loe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,KOe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function gS(t){return typeof t=="string"}const vS=t=>({test:e=>gS(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Nh=vS("deg"),ou=vS("%"),Gt=vS("px"),ZOe=vS("vh"),QOe=vS("vw"),J7={...ou,parse:t=>ou.parse(t)/100,transform:t=>ou.transform(t*100)},eq={..._g,transform:Math.round},Ioe={borderWidth:Gt,borderTopWidth:Gt,borderRightWidth:Gt,borderBottomWidth:Gt,borderLeftWidth:Gt,borderRadius:Gt,radius:Gt,borderTopLeftRadius:Gt,borderTopRightRadius:Gt,borderBottomRightRadius:Gt,borderBottomLeftRadius:Gt,width:Gt,maxWidth:Gt,height:Gt,maxHeight:Gt,size:Gt,top:Gt,right:Gt,bottom:Gt,left:Gt,padding:Gt,paddingTop:Gt,paddingRight:Gt,paddingBottom:Gt,paddingLeft:Gt,margin:Gt,marginTop:Gt,marginRight:Gt,marginBottom:Gt,marginLeft:Gt,rotate:Nh,rotateX:Nh,rotateY:Nh,rotateZ:Nh,scale:$M,scaleX:$M,scaleY:$M,scaleZ:$M,skew:Nh,skewX:Nh,skewY:Nh,distance:Gt,translateX:Gt,translateY:Gt,translateZ:Gt,x:Gt,y:Gt,z:Gt,perspective:Gt,transformPerspective:Gt,opacity:tw,originX:J7,originY:J7,originZ:Gt,zIndex:eq,fillOpacity:tw,strokeOpacity:tw,numOctaves:eq};function K5(t,e,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,d=!0;for(const u in e){const h=e[u];if(Ooe(u)){s[u]=h;continue}const f=Ioe[u],p=YOe(h,f);if(wg.has(u)){if(l=!0,o[u]=p,!d)continue;h!==(f.default||0)&&(d=!1)}else u.startsWith("origin")?(c=!0,a[u]=p):r[u]=p}if(e.transform||(l||i?r.transform=$Oe(t.transform,n,d,i):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=a;r.transformOrigin=`${u} ${h} ${f}`}}const Z5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function koe(t,e,n){for(const i in e)!Fo(e[i])&&!Doe(i,n)&&(t[i]=e[i])}function JOe({transformTemplate:t},e,n){return Z.useMemo(()=>{const i=Z5();return K5(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function eLe(t,e,n){const i=t.style||{},r={};return koe(r,i,t),Object.assign(r,JOe(t,e,n)),t.transformValues?t.transformValues(r):r}function tLe(t,e,n){const i={},r=eLe(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const nLe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function jC(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||nLe.has(t)}let Noe=t=>!jC(t);function iLe(t){t&&(Noe=e=>e.startsWith("on")?!jC(e):t(e))}try{iLe(require("@emotion/is-prop-valid").default)}catch{}function rLe(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(Noe(r)||n===!0&&jC(r)||!e&&!jC(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function tq(t,e,n){return typeof t=="string"?t:Gt.transform(e+n*t)}function sLe(t,e,n){const i=tq(e,t.x,t.width),r=tq(n,t.y,t.height);return`${i} ${r}`}const oLe={offset:"stroke-dashoffset",array:"stroke-dasharray"},aLe={offset:"strokeDashoffset",array:"strokeDasharray"};function lLe(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?oLe:aLe;t[s.offset]=Gt.transform(-i);const o=Gt.transform(e),a=Gt.transform(n);t[s.array]=`${o} ${a}`}function Q5(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,u,h){if(K5(t,c,d,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:m}=t;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=sLe(m,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),o!==void 0&&lLe(f,o,a,l,!1)}const Boe=()=>({...Z5(),attrs:{}}),J5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function cLe(t,e,n,i){const r=Z.useMemo(()=>{const s=Boe();return Q5(s,e,{enableHardwareAcceleration:!1},J5(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};koe(s,t.style,t),r.style={...s,...r.style}}return r}function uLe(t=!1){return(n,i,r,{latestValues:s},o)=>{const l=(Y5(n)?cLe:tLe)(i,s,o,n),d={...rLe(i,typeof n=="string",t),...l,ref:r},{children:u}=i,h=Z.useMemo(()=>Fo(u)?u.get():u,[u]);return Z.createElement(n,{...d,children:h})}}const eV=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function zoe(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const Foe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Uoe(t,e,n,i){zoe(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(Foe.has(r)?r:eV(r),e.attrs[r])}function tV(t,e){const{style:n}=t,i={};for(const r in n)(Fo(n[r])||e.style&&Fo(e.style[r])||Doe(r,t))&&(i[r]=n[r]);return i}function Voe(t,e){const n=tV(t,e);for(const i in t)if(Fo(t[i])||Fo(e[i])){const r=mS.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function nV(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function dLe(t){const e=Z.useRef(null);return e.current===null&&(e.current=t()),e.current}const GC=t=>Array.isArray(t),hLe=t=>Boolean(t&&typeof t=="object"&&t.mix&&t.toValue),fLe=t=>GC(t)?t[t.length-1]||0:t;function NT(t){const e=Fo(t)?t.get():t;return hLe(e)?e.toValue():e}function pLe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const o={latestValues:mLe(i,r,s,t),renderState:e()};return n&&(o.mount=a=>n(i,a,o)),o}const Hoe=t=>(e,n)=>{const i=Z.useContext(SD),r=Z.useContext(q5),s=()=>pLe(t,e,i,r);return n?s():dLe(s)};function mLe(t,e,n,i){const r={},s=i(t,{});for(const h in s)r[h]=NT(s[h]);let{initial:o,animate:a}=t;const l=AD(t),c=Toe(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const u=d?a:o;return u&&typeof u!="boolean"&&!MD(u)&&(Array.isArray(u)?u:[u]).forEach(f=>{const p=nV(t,f);if(!p)return;const{transitionEnd:m,transition:g,...v}=p;for(const y in v){let x=v[y];if(Array.isArray(x)){const b=d?x.length-1:0;x=x[b]}x!==null&&(r[y]=x)}for(const y in m)r[y]=m[y]}),r}const gLe={useVisualState:Hoe({scrapeMotionValuesFromProps:Voe,createRenderState:Boe,onMount:(t,e,{renderState:n,latestValues:i})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}Q5(n,i,{enableHardwareAcceleration:!1},J5(e.tagName),t.transformTemplate),Uoe(e,n)}})},vLe={useVisualState:Hoe({scrapeMotionValuesFromProps:tV,createRenderState:Z5})};function yLe(t,{forwardMotionProps:e=!1},n,i){return{...Y5(t)?gLe:vLe,preloadedFeatures:n,useRender:uLe(e),createVisualElement:i,Component:t}}function dd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const joe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function CD(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const xLe=t=>e=>joe(e)&&t(e,CD(e));function bd(t,e,n,i){return dd(t,e,xLe(n),i)}const bLe=(t,e)=>n=>e(t(n)),Mf=(...t)=>t.reduce(bLe);function Goe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const nq=Goe("dragHorizontal"),iq=Goe("dragVertical");function Woe(t){let e=!1;if(t==="y")e=iq();else if(t==="x")e=nq();else{const n=nq(),i=iq();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function qoe(){const t=Woe(!0);return t?(t(),!1):!0}class np{constructor(e){this.isMounted=!1,this.node=e}update(){}}function wLe(t){let e=[],n=[],i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const u=d&&r,h=u?e:n;return c&&o.add(l),h.indexOf(l)===-1&&(h.push(l),u&&r&&(i=e.length)),l},cancel:l=>{const c=n.indexOf(l);c!==-1&&n.splice(c,1),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,n]=[n,e],n.length=0,i=e.length,i)for(let c=0;c<i;c++){const d=e[c];d(l),o.has(d)&&(a.schedule(d),t())}r=!1,s&&(s=!1,a.process(l))}};return a}const Pi={delta:0,timestamp:0,isProcessing:!1},_Le=40;let cz=!0,p_=!1;const PD=["read","update","preRender","render","postRender"],q0=PD.reduce((t,e)=>(t[e]=wLe(()=>p_=!0),t),{}),SLe=t=>q0[t].process(Pi),$oe=t=>{p_=!1,Pi.delta=cz?1e3/60:Math.max(Math.min(t-Pi.timestamp,_Le),1),Pi.timestamp=t,Pi.isProcessing=!0,PD.forEach(SLe),Pi.isProcessing=!1,p_&&(cz=!1,requestAnimationFrame($oe))},ELe=()=>{p_=!0,cz=!0,Pi.isProcessing||requestAnimationFrame($oe)},Ii=PD.reduce((t,e)=>{const n=q0[e];return t[e]=(i,r=!1,s=!1)=>(p_||ELe(),n.schedule(i,r,s)),t},{});function kd(t){PD.forEach(e=>q0[e].cancel(t))}function rq(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||qoe())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[i]&&Ii.update(()=>a[i](s,o))};return bd(t.current,n,r,{passive:!t.getProps()[i]})}class MLe extends np{mount(){this.unmount=Mf(rq(this.node,!0),rq(this.node,!1))}unmount(){}}class ALe extends np{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mf(dd(this.node.current,"focus",()=>this.onFocus()),dd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Xoe=(t,e)=>e?t===e?!0:Xoe(t,e.parentElement):!1,Rr=t=>t;function wL(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,CD(n))}class TLe extends np{constructor(){super(...arguments),this.removeStartListeners=Rr,this.removeEndListeners=Rr,this.removeAccessibleListeners=Rr,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=bd(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d}=this.node.getProps();Ii.update(()=>{Xoe(this.node.current,a.target)?c&&c(a,l):d&&d(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=bd(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Mf(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||wL("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Ii.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=dd(this.node.current,"keyup",o),wL("down",(a,l)=>{this.startPress(a,l)})},n=dd(this.node.current,"keydown",e),i=()=>{this.isPressing&&wL("cancel",(s,o)=>this.cancelPress(s,o))},r=dd(this.node.current,"blur",i);this.removeAccessibleListeners=Mf(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ii.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!qoe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ii.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=bd(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=dd(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Mf(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const uz=new WeakMap,_L=new WeakMap,CLe=t=>{const e=uz.get(t.target);e&&e(t)},PLe=t=>{t.forEach(CLe)};function DLe({root:t,...e}){const n=t||document;_L.has(n)||_L.set(n,{});const i=_L.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(PLe,{root:t,...e})),i[r]}function RLe(t,e,n){const i=DLe(e);return uz.set(t,n),i.observe(t),()=>{uz.delete(t),i.unobserve(t)}}const OLe={some:0,all:1};class LLe extends np{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:OLe[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),h=c?d:u;h&&h(l)};return RLe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ILe(e,n))&&this.startObserver()}unmount(){}}function ILe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kLe={inView:{Feature:LLe},tap:{Feature:TLe},focus:{Feature:ALe},hover:{Feature:MLe}};function Yoe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function NLe(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function BLe(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function DD(t,e,n){const i=t.getProps();return nV(i,e,n!==void 0?n:i.custom,NLe(t),BLe(t))}const zLe="framerAppearId",FLe="data-"+eV(zLe);let ULe=Rr,iV=Rr;const Af=t=>t*1e3,wd=t=>t/1e3,VLe={current:!1},Koe=t=>Array.isArray(t)&&typeof t[0]=="number";function Zoe(t){return Boolean(!t||typeof t=="string"&&Qoe[t]||Koe(t)||Array.isArray(t)&&t.every(Zoe))}const Pb=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Qoe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pb([0,.65,.55,1]),circOut:Pb([.55,0,1,.45]),backIn:Pb([.31,.01,.66,-.59]),backOut:Pb([.33,1.53,.69,.99])};function Joe(t){if(t)return Koe(t)?Pb(t):Array.isArray(t)?t.map(Joe):Qoe[t]}function HLe(t,e,n,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=Joe(a);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const sq={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},SL={},eae={};for(const t in sq)eae[t]=()=>(SL[t]===void 0&&(SL[t]=sq[t]()),SL[t]);function jLe(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const tae=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,GLe=1e-7,WLe=12;function qLe(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=tae(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>GLe&&++a<WLe);return o}function yS(t,e,n,i){if(t===e&&n===i)return Rr;const r=s=>qLe(s,0,1,t,n);return s=>s===0||s===1?s:tae(r(s),e,i)}const $Le=yS(.42,0,1,1),XLe=yS(0,0,.58,1),nae=yS(.42,0,.58,1),YLe=t=>Array.isArray(t)&&typeof t[0]!="number",iae=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,rae=t=>e=>1-t(1-e),sae=t=>1-Math.sin(Math.acos(t)),rV=rae(sae),KLe=iae(rV),oae=yS(.33,1.53,.69,.99),sV=rae(oae),ZLe=iae(sV),QLe=t=>(t*=2)<1?.5*sV(t):.5*(2-Math.pow(2,-10*(t-1))),JLe={linear:Rr,easeIn:$Le,easeInOut:nae,easeOut:XLe,circIn:sae,circInOut:KLe,circOut:rV,backIn:sV,backInOut:ZLe,backOut:oae,anticipate:QLe},oq=t=>{if(Array.isArray(t)){iV(t.length===4);const[e,n,i,r]=t;return yS(e,n,i,r)}else if(typeof t=="string")return JLe[t];return t},oV=(t,e)=>n=>Boolean(gS(n)&&KOe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),aae=(t,e,n)=>i=>{if(!gS(i))return i;const[r,s,o,a]=i.match(TD);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},eIe=t=>Vf(0,255,t),EL={..._g,transform:t=>Math.round(eIe(t))},ym={test:oV("rgb","red"),parse:aae("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+EL.transform(t)+", "+EL.transform(e)+", "+EL.transform(n)+", "+nw(tw.transform(i))+")"};function tIe(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const dz={test:oV("#"),parse:tIe,transform:ym.transform},S0={test:oV("hsl","hue"),parse:aae("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ou.transform(nw(e))+", "+ou.transform(nw(n))+", "+nw(tw.transform(i))+")"},Qs={test:t=>ym.test(t)||dz.test(t)||S0.test(t),parse:t=>ym.test(t)?ym.parse(t):S0.test(t)?S0.parse(t):dz.parse(t),transform:t=>gS(t)?t:t.hasOwnProperty("red")?ym.transform(t):S0.transform(t)},Oi=(t,e,n)=>-n*t+n*e+t;function ML(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function nIe({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=ML(l,a,t+1/3),s=ML(l,a,t),o=ML(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const AL=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},iIe=[dz,ym,S0],rIe=t=>iIe.find(e=>e.test(t));function aq(t){const e=rIe(t);let n=e.parse(t);return e===S0&&(n=nIe(n)),n}const lae=(t,e)=>{const n=aq(t),i=aq(e),r={...n};return s=>(r.red=AL(n.red,i.red,s),r.green=AL(n.green,i.green,s),r.blue=AL(n.blue,i.blue,s),r.alpha=Oi(n.alpha,i.alpha,s),ym.transform(r))};function sIe(t){var e,n;return isNaN(t)&&gS(t)&&(((e=t.match(TD))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Loe))===null||n===void 0?void 0:n.length)||0)>0}const cae={regex:XOe,countKey:"Vars",token:"${v}",parse:Rr},uae={regex:Loe,countKey:"Colors",token:"${c}",parse:Qs.parse},dae={regex:TD,countKey:"Numbers",token:"${n}",parse:_g.parse};function TL(t,{regex:e,countKey:n,token:i,parse:r}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...s.map(r)))}function WC(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&TL(n,cae),TL(n,uae),TL(n,dae),n}function hae(t){return WC(t).values}function fae(t){const{values:e,numColors:n,numVars:i,tokenised:r}=WC(t),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(cae.token,o[l]):l<i+n?a=a.replace(uae.token,Qs.transform(o[l])):a=a.replace(dae.token,nw(o[l]));return a}}const oIe=t=>typeof t=="number"?0:t;function aIe(t){const e=hae(t);return fae(t)(e.map(oIe))}const Hf={test:sIe,parse:hae,createTransformer:fae,getAnimatableNone:aIe},pae=(t,e)=>n=>`${n>0?e:t}`;function mae(t,e){return typeof t=="number"?n=>Oi(t,e,n):Qs.test(t)?lae(t,e):t.startsWith("var(")?pae(t,e):vae(t,e)}const gae=(t,e)=>{const n=[...t],i=n.length,r=t.map((s,o)=>mae(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}},lIe=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=mae(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}},vae=(t,e)=>{const n=Hf.createTransformer(e),i=WC(t),r=WC(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Mf(gae(i.values,r.values),n):pae(t,e)},m_=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},lq=(t,e)=>n=>Oi(t,e,n);function cIe(t){return typeof t=="number"?lq:typeof t=="string"?Qs.test(t)?lae:vae:Array.isArray(t)?gae:typeof t=="object"?lIe:lq}function uIe(t,e,n){const i=[],r=n||cIe(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Rr:e;a=Mf(l,a)}i.push(a)}return i}function yae(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(iV(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=uIe(e,i,r),a=o.length,l=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const u=m_(t[d],t[d+1],c);return o[d](u)};return n?c=>l(Vf(t[0],t[s-1],c)):l}function dIe(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=m_(0,e,i);t.push(Oi(n,1,r))}}function hIe(t){const e=[0];return dIe(e,t.length-1),e}function fIe(t,e){return t.map(n=>n*e)}function pIe(t,e){return t.map(()=>e||nae).splice(0,t.length-1)}function qC({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=YLe(i)?i.map(oq):oq(i),s={done:!1,value:e[0]},o=fIe(n&&n.length===e.length?n:hIe(e),t),a=yae(o,e,{ease:Array.isArray(r)?r:pIe(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function xae(t,e){return e?t*(1e3/e):0}const mIe=5;function bae(t,e,n){const i=Math.max(e-mIe,0);return xae(n-t(i),e-i)}const CL=.001,gIe=.01,cq=10,vIe=.05,yIe=1;function xIe({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s;ULe(t<=Af(cq));let o=1-e;o=Vf(vIe,yIe,o),t=Vf(gIe,cq,wd(t)),o<1?(r=c=>{const d=c*o,u=d*t,h=d-n,f=hz(c,o),p=Math.exp(-u);return CL-h/f*p},s=c=>{const u=c*o*t,h=u*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-u),m=hz(Math.pow(c,2),o);return(-r(c)+CL>0?-1:1)*((h-f)*p)/m}):(r=c=>{const d=Math.exp(-c*t),u=(c-n)*t+1;return-CL+d*u},s=c=>{const d=Math.exp(-c*t),u=(n-c)*(t*t);return d*u});const a=5/t,l=wIe(r,s,a);if(t=Af(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const bIe=12;function wIe(t,e,n){let i=n;for(let r=1;r<bIe;r++)i=i-t(i)/e(i);return i}function hz(t,e){return t*Math.sqrt(1-e*e)}const _Ie=["duration","bounce"],SIe=["stiffness","damping","mass"];function uq(t,e){return e.some(n=>t[n]!==void 0)}function EIe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!uq(t,SIe)&&uq(t,_Ie)){const n=xIe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function wae({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,velocity:d,duration:u,isResolvedFromDuration:h}=EIe(i),f=d?-wd(d):0,p=l/(2*Math.sqrt(a*c)),m=s-r,g=wd(Math.sqrt(a/c)),v=Math.abs(m)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let y;if(p<1){const x=hz(g,p);y=b=>{const w=Math.exp(-p*g*b);return s-w*((f+p*g*m)/x*Math.sin(x*b)+m*Math.cos(x*b))}}else if(p===1)y=x=>s-Math.exp(-g*x)*(m+(f+g*m)*x);else{const x=g*Math.sqrt(p*p-1);y=b=>{const w=Math.exp(-p*g*b),E=Math.min(x*b,300);return s-w*((f+p*g*m)*Math.sinh(E)+x*m*Math.cosh(E))/x}}return{calculatedDuration:h&&u||null,next:x=>{const b=y(x);if(h)o.done=x>=u;else{let w=f;x!==0&&(p<1?w=bae(y,x,b):w=0);const E=Math.abs(w)<=n,A=Math.abs(s-b)<=e;o.done=E&&A}return o.value=o.done?s:b,o}}}function dq({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=t[0],h={done:!1,value:u},f=S=>a!==void 0&&S<a||l!==void 0&&S>l,p=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let m=n*e;const g=u+m,v=o===void 0?g:o(g);v!==g&&(m=v-u);const y=S=>-m*Math.exp(-S/i),x=S=>v+y(S),b=S=>{const C=y(S),T=x(S);h.done=Math.abs(C)<=c,h.value=h.done?v:T};let w,E;const A=S=>{f(h.value)&&(w=S,E=wae({keyframes:[h.value,p(h.value)],velocity:bae(x,S,h.value),damping:r,stiffness:s,restDelta:c,restSpeed:d}))};return A(0),{calculatedDuration:null,next:S=>{let C=!1;return!E&&w===void 0&&(C=!0,b(S),A(S)),w!==void 0&&S>w?E.next(S-w):(!C&&b(S),h)}}}const MIe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ii.update(e,!0),stop:()=>kd(e),now:()=>Pi.isProcessing?Pi.timestamp:performance.now()}},hq=2e4;function fq(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<hq;)e+=n,i=t.next(e);return e>=hq?1/0:e}const AIe={decay:dq,inertia:dq,tween:qC,keyframes:qC,spring:wae};function $C({autoplay:t=!0,delay:e=0,driver:n=MIe,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:u,...h}){let f=1,p=!1,m,g;const v=()=>{m&&m(),g=new Promise(k=>{m=k})};v();let y;const x=AIe[r]||qC;let b;x!==qC&&typeof i[0]!="number"&&(b=yae([0,100],i,{clamp:!1}),i=[0,100]);const w=x({...h,keyframes:i});let E;a==="mirror"&&(E=x({...h,keyframes:[...i].reverse(),velocity:-(h.velocity||0)}));let A="idle",S=null,C=null,T=null;w.calculatedDuration===null&&s&&(w.calculatedDuration=fq(w));const{calculatedDuration:P}=w;let R=1/0,L=1/0;P!==null&&(R=P+o,L=R*(s+1)-o);let O=0;const B=k=>{if(C===null)return;f>0&&(C=Math.min(C,k)),S!==null?O=S:O=(k-C)*f;const z=O-e,W=z<0;O=Math.max(z,0),A==="finished"&&S===null&&(O=L);let K=O,J=w;if(s){const te=O/R;let re=Math.floor(te),me=te%1;!me&&te>=1&&(me=1),me===1&&re--,re=Math.min(re,s+1);const se=Boolean(re%2);se&&(a==="reverse"?(me=1-me,o&&(me-=o/R)):a==="mirror"&&(J=E));let oe=Vf(0,1,me);O>L&&(oe=a==="reverse"&&se?1:0),K=oe*R}const F=W?{done:!1,value:i[0]}:J.next(K);b&&(F.value=b(F.value));let{done:ee}=F;!W&&P!==null&&(ee=O>=L);const ie=S===null&&(A==="finished"||A==="running"&&ee||f<0&&O<=0);return u&&u(F.value),ie&&H(),F},$=()=>{y&&y.stop(),y=void 0},X=()=>{A="idle",$(),v(),C=T=null},H=()=>{A="finished",d&&d(),$(),v()},U=()=>{if(p)return;y||(y=n(B));const k=y.now();l&&l(),S!==null?C=k-S:(!C||A==="finished")&&(C=k),T=C,S=null,A="running",y.start()};t&&U();const N={then(k,z){return g.then(k,z)},get time(){return wd(O)},set time(k){k=Af(k),O=k,S!==null||!y||f===0?S=k:C=y.now()-k/f},get duration(){const k=w.calculatedDuration===null?fq(w):w.calculatedDuration;return wd(k)},get speed(){return f},set speed(k){k===f||!y||(f=k,N.time=wd(O))},get state(){return A},play:U,pause:()=>{A="paused",S=O},stop:()=>{p=!0,A!=="idle"&&(A="idle",c&&c(),X())},cancel:()=>{T!==null&&B(T),X()},complete:()=>{A="finished"},sample:k=>(C=0,B(k))};return N}const TIe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),XM=10,CIe=2e4,PIe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Zoe(e.ease);function DIe(t,e,{onUpdate:n,onComplete:i,...r}){if(!(eae.waapi()&&TIe.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const c=()=>{l=new Promise(v=>{a=v})};c();let{keyframes:d,duration:u=300,ease:h,times:f}=r;if(PIe(e,r)){const v=$C({...r,repeat:0,delay:0});let y={done:!1,value:d[0]};const x=[];let b=0;for(;!y.done&&b<CIe;)y=v.sample(b),x.push(y.value),b+=XM;f=void 0,d=x,u=b-XM,h="linear"}const p=HLe(t.owner.current,e,d,{...r,duration:u,ease:h,times:f}),m=()=>p.cancel(),g=()=>{Ii.update(m),a(),c()};return p.onfinish=()=>{t.set(jLe(d,r)),i&&i(),g()},{then(v,y){return l.then(v,y)},get time(){return wd(p.currentTime||0)},set time(v){p.currentTime=Af(v)},get speed(){return p.playbackRate},set speed(v){p.playbackRate=v},get duration(){return wd(u)},play:()=>{o||(p.play(),kd(m))},pause:()=>p.pause(),stop:()=>{if(o=!0,p.playState==="idle")return;const{currentTime:v}=p;if(v){const y=$C({...r,autoplay:!1});t.setWithVelocity(y.sample(v-XM).value,y.sample(v).value,XM)}g()},complete:()=>p.finish(),cancel:g}}function RIe({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Rr,pause:Rr,stop:Rr,then:s=>(s(),Promise.resolve()),cancel:Rr,complete:Rr});return e?$C({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const OIe={type:"spring",stiffness:500,damping:25,restSpeed:10},LIe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IIe={type:"keyframes",duration:.8},kIe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},NIe=(t,{keyframes:e})=>e.length>2?IIe:wg.has(t)?t.startsWith("scale")?LIe(e[1]):OIe:kIe,fz=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Hf.test(e)||e==="0")&&!e.startsWith("url(")),BIe=new Set(["brightness","contrast","saturate","opacity"]);function zIe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(TD)||[];if(!i)return t;const r=n.replace(i,"");let s=BIe.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const FIe=/([a-z-]*)\(.*?\)/g,pz={...Hf,getAnimatableNone:t=>{const e=t.match(FIe);return e?e.map(zIe).join(" "):t}},UIe={...Ioe,color:Qs,backgroundColor:Qs,outlineColor:Qs,fill:Qs,stroke:Qs,borderColor:Qs,borderTopColor:Qs,borderRightColor:Qs,borderBottomColor:Qs,borderLeftColor:Qs,filter:pz,WebkitFilter:pz},aV=t=>UIe[t];function _ae(t,e){let n=aV(t);return n!==pz&&(n=Hf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Sae=t=>/^0[^.\s]+$/.test(t);function VIe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Sae(t)}function HIe(t,e,n,i){const r=fz(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=i.from!==void 0?i.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),VIe(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(r&&l.length&&a)for(let c=0;c<l.length;c++){const d=l[c];s[d]=_ae(e,a)}return s}function jIe({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function Eae(t,e){return t[e]||t.default||t}const lV=(t,e,n,i={})=>r=>{const s=Eae(i,t)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Af(o);const l=HIe(e,t,n,s),c=l[0],d=l[l.length-1],u=fz(t,c),h=fz(t,d);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{e.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(jIe(s)||(f={...f,...NIe(t,f)}),f.duration&&(f.duration=Af(f.duration)),f.repeatDelay&&(f.repeatDelay=Af(f.repeatDelay)),!u||!h||VLe.current||s.type===!1)return RIe(f);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=DIe(e,t,f);if(p)return p}return $C(f)};function XC(t){return Boolean(Fo(t)&&t.add)}const GIe=t=>/^\-?\d*\.?\d+$/.test(t);function cV(t,e){t.indexOf(e)===-1&&t.push(e)}function uV(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class dV{constructor(){this.subscriptions=[]}add(e){return cV(this.subscriptions,e),()=>uV(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const WIe=t=>!isNaN(parseFloat(t));class qIe{constructor(e,n={}){this.version="10.12.16",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=Pi;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ii.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ii.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=WIe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dV);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ii.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?xae(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Oy(t,e){return new qIe(t,e)}const Mae=t=>e=>e.test(t),$Ie={test:t=>t==="auto",parse:t=>t},Aae=[_g,Gt,ou,Nh,QOe,ZOe,$Ie],R1=t=>Aae.find(Mae(t)),XIe=[...Aae,Qs,Hf],YIe=t=>XIe.find(Mae(t));function KIe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Oy(n))}function ZIe(t,e){const n=DD(t,e);let{transitionEnd:i={},transition:r={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const o in s){const a=fLe(s[o]);KIe(t,o,a)}}function QIe(t,e,n){var i,r;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),d!=null&&(typeof d=="string"&&(GIe(d)||Sae(d))?d=parseFloat(d):!YIe(d)&&Hf.test(c)&&(d=_ae(l,c)),t.addValue(l,Oy(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function JIe(t,e){return e?(e[t]||e.default||e).from:void 0}function eke(t,e,n){const i={};for(const r in t){const s=JIe(r,e);if(s!==void 0)i[r]=s;else{const o=n.getValue(r);o&&(i[r]=o.get())}}return i}function tke({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Tae(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(s=i);const c=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const u in a){const h=t.getValue(u),f=a[u];if(!h||f===void 0||d&&tke(d,u))continue;const p={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!h.hasAnimated){const g=t.getProps()[FLe];g&&(p.elapsed=window.HandoffAppearAnimations(g,u,h,Ii))}h.start(lV(u,h,f,t.shouldReduceMotion&&wg.has(u)?{type:!1}:p));const m=h.animation;XC(l)&&(l.add(u),m.then(()=>l.remove(u))),c.push(m)}return o&&Promise.all(c).then(()=>{o&&ZIe(t,o)}),c}function mz(t,e,n={}){const i=DD(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(Tae(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:u}=r;return nke(t,e,c+l,d,u,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function nke(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(t.variantChildren).sort(ike).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(mz(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function ike(t,e){return t.sortNodePosition(e)}function rke(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>mz(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=mz(t,e,n);else{const r=typeof e=="function"?DD(t,e,n.custom):e;i=Promise.all(Tae(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const ske=[...$5].reverse(),oke=$5.length;function ake(t){return e=>Promise.all(e.map(({animation:n,options:i})=>rke(t,n,i)))}function lke(t){let e=ake(t);const n=uke();let i=!0;const r=(l,c)=>{const d=DD(t,c);if(d){const{transition:u,transitionEnd:h,...f}=d;l={...l,...f,...h}}return l};function s(l){e=l(t)}function o(l,c){const d=t.getProps(),u=t.getVariantContext(!0)||{},h=[],f=new Set;let p={},m=1/0;for(let v=0;v<oke;v++){const y=ske[v],x=n[y],b=d[y]!==void 0?d[y]:u[y],w=h_(b),E=y===c?x.isActive:null;E===!1&&(m=v);let A=b===u[y]&&b!==d[y]&&w;if(A&&i&&t.manuallyAnimateOnMount&&(A=!1),x.protectedKeys={...p},!x.isActive&&E===null||!b&&!x.prevProp||MD(b)||typeof b=="boolean")continue;const S=cke(x.prevProp,b);let C=S||y===c&&x.isActive&&!A&&w||v>m&&w;const T=Array.isArray(b)?b:[b];let P=T.reduce(r,{});E===!1&&(P={});const{prevResolvedValues:R={}}=x,L={...R,...P},O=B=>{C=!0,f.delete(B),x.needsAnimating[B]=!0};for(const B in L){const $=P[B],X=R[B];p.hasOwnProperty(B)||($!==X?GC($)&&GC(X)?!Yoe($,X)||S?O(B):x.protectedKeys[B]=!0:$!==void 0?O(B):f.add(B):$!==void 0&&f.has(B)?O(B):x.protectedKeys[B]=!0)}x.prevProp=b,x.prevResolvedValues=P,x.isActive&&(p={...p,...P}),i&&t.blockInitialAnimation&&(C=!1),C&&!A&&h.push(...T.map(B=>({animation:B,options:{type:y,...l}})))}if(f.size){const v={};f.forEach(y=>{const x=t.getBaseTarget(y);x!==void 0&&(v[y]=x)}),h.push({animation:v})}let g=Boolean(h.length);return i&&d.initial===!1&&!t.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(h):Promise.resolve()}function a(l,c,d){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const h=o(d,l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function cke(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Yoe(e,t):!1}function Tp(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uke(){return{animate:Tp(!0),whileInView:Tp(),whileHover:Tp(),whileTap:Tp(),whileDrag:Tp(),whileFocus:Tp(),exit:Tp()}}class dke extends np{constructor(e){super(e),e.animationState||(e.animationState=lke(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),MD(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let hke=0;class fke extends np{constructor(){super(...arguments),this.id=hke++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const pke={animation:{Feature:dke},exit:{Feature:fke}},pq=(t,e)=>Math.abs(t-e);function mke(t,e){const n=pq(t.x,e.x),i=pq(t.y,e.y);return Math.sqrt(n**2+i**2)}class Cae{constructor(e,n,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=DL(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,u=mke(c.offset,{x:0,y:0})>=3;if(!d&&!u)return;const{point:h}=c,{timestamp:f}=Pi;this.history.push({...h,timestamp:f});const{onStart:p,onMove:m}=this.handlers;d||(p&&p(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,c)},this.handlePointerMove=(c,d)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=PL(d,this.transformPagePoint),Ii.update(this.updatePoint,!0)},this.handlePointerUp=(c,d)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:u,onSessionEnd:h}=this.handlers,f=DL(c.type==="pointercancel"?this.lastMoveEventInfo:PL(d,this.transformPagePoint),this.history);this.startEvent&&u&&u(c,f),h&&h(c,f)},!joe(e))return;this.handlers=n,this.transformPagePoint=i;const r=CD(e),s=PL(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=Pi;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,DL(s,this.history)),this.removeListeners=Mf(bd(window,"pointermove",this.handlePointerMove),bd(window,"pointerup",this.handlePointerUp),bd(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),kd(this.updatePoint)}}function PL(t,e){return e?{point:e(t.point)}:t}function mq(t,e){return{x:t.x-e.x,y:t.y-e.y}}function DL({point:t},e){return{point:t,delta:mq(t,Pae(e)),offset:mq(t,gke(e)),velocity:vke(e,.1)}}function gke(t){return t[0]}function Pae(t){return t[t.length-1]}function vke(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=Pae(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Af(e)));)n--;if(!i)return{x:0,y:0};const s=wd(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function _a(t){return t.max-t.min}function gz(t,e=0,n=.01){return Math.abs(t-e)<=n}function gq(t,e,n,i=.5){t.origin=i,t.originPoint=Oi(e.min,e.max,t.origin),t.scale=_a(n)/_a(e),(gz(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Oi(n.min,n.max,t.origin)-t.originPoint,(gz(t.translate)||isNaN(t.translate))&&(t.translate=0)}function iw(t,e,n,i){gq(t.x,e.x,n.x,i?i.originX:void 0),gq(t.y,e.y,n.y,i?i.originY:void 0)}function vq(t,e,n){t.min=n.min+e.min,t.max=t.min+_a(e)}function yke(t,e,n){vq(t.x,e.x,n.x),vq(t.y,e.y,n.y)}function yq(t,e,n){t.min=e.min-n.min,t.max=t.min+_a(e)}function rw(t,e,n){yq(t.x,e.x,n.x),yq(t.y,e.y,n.y)}function xke(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Oi(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Oi(n,t,i.max):Math.min(t,n)),t}function xq(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bke(t,{top:e,left:n,bottom:i,right:r}){return{x:xq(t.x,n,r),y:xq(t.y,e,i)}}function bq(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function wke(t,e){return{x:bq(t.x,e.x),y:bq(t.y,e.y)}}function _ke(t,e){let n=.5;const i=_a(t),r=_a(e);return r>i?n=m_(e.min,e.max-i,t.min):i>r&&(n=m_(t.min,t.max-r,e.min)),Vf(0,1,n)}function Ske(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const vz=.35;function Eke(t=vz){return t===!1?t=0:t===!0&&(t=vz),{x:wq(t,"left","right"),y:wq(t,"top","bottom")}}function wq(t,e,n){return{min:_q(t,e),max:_q(t,n)}}function _q(t,e){return typeof t=="number"?t:t[e]||0}const Sq=()=>({translate:0,scale:1,origin:0,originPoint:0}),E0=()=>({x:Sq(),y:Sq()}),Eq=()=>({min:0,max:0}),pr=()=>({x:Eq(),y:Eq()});function zc(t){return[t("x"),t("y")]}function Dae({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Mke({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ake(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function RL(t){return t===void 0||t===1}function yz({scale:t,scaleX:e,scaleY:n}){return!RL(t)||!RL(e)||!RL(n)}function Gp(t){return yz(t)||Rae(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Rae(t){return Mq(t.x)||Mq(t.y)}function Mq(t){return t&&t!=="0%"}function YC(t,e,n){const i=t-n,r=e*i;return n+r}function Aq(t,e,n,i,r){return r!==void 0&&(t=YC(t,r,i)),YC(t,n,i)+e}function xz(t,e=0,n=1,i,r){t.min=Aq(t.min,e,n,i,r),t.max=Aq(t.max,e,n,i,r)}function Oae(t,{x:e,y:n}){xz(t.x,e.translate,e.scale,e.originPoint),xz(t.y,n.translate,n.scale,n.originPoint)}function Tke(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&M0(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Oae(t,o)),i&&Gp(s.latestValues)&&M0(t,s.latestValues))}e.x=Tq(e.x),e.y=Tq(e.y)}function Tq(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Uh(t,e){t.min=t.min+e,t.max=t.max+e}function Cq(t,e,[n,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Oi(t.min,t.max,s);xz(t,e[n],e[i],o,e.scale)}const Cke=["x","scaleX","originX"],Pke=["y","scaleY","originY"];function M0(t,e){Cq(t.x,e,Cke),Cq(t.y,e,Pke)}function Lae(t,e){return Dae(Ake(t.getBoundingClientRect(),e))}function Dke(t,e,n){const i=Lae(t,n),{scroll:r}=e;return r&&(Uh(i.x,r.offset.x),Uh(i.y,r.offset.y)),i}const Rke=new WeakMap;class Oke{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),n&&this.snapToCursor(CD(l,"page").point)},s=(l,c)=>{const{drag:d,dragPropagation:u,onDragStart:h}=this.getProps();if(d&&!u&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Woe(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zc(p=>{let m=this.getAxisMotionValue(p).get()||0;if(ou.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const v=g.layout.layoutBox[p];v&&(m=_a(v)*(parseFloat(m)/100))}}this.originPoint[p]=m}),h&&Ii.update(()=>h(l,c),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(l,c)=>{const{dragPropagation:d,dragDirectionLock:u,onDirectionLock:h,onDrag:f}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:p}=c;if(u&&this.currentDirection===null){this.currentDirection=Lke(p),this.currentDirection!==null&&h&&h(this.currentDirection);return}this.updateAxis("x",c.point,p),this.updateAxis("y",c.point,p),this.visualElement.render(),f&&f(l,c)},a=(l,c)=>this.stop(l,c);this.panSession=new Cae(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ii.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!YM(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=xke(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&_0(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=bke(i.layoutBox,e):this.constraints=!1,this.elastic=Eke(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&zc(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=Ske(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_0(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Dke(i,r.root,this.visualElement.getTransformPagePoint());let o=wke(r.layout.layoutBox,s);if(n){const a=n(Mke(o));this.hasMutatedConstraints=!!a,a&&(o=Dae(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=zc(d=>{if(!YM(d,n,this.currentDirection))return;let u=l&&l[d]||{};o&&(u={min:0,max:0});const h=r?200:1e6,f=r?40:1e7,p={type:"inertia",velocity:i?e[d]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(lV(e,i,0,n))}stopAnimation(){zc(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){zc(n=>{const{drag:i}=this.getProps();if(!YM(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-Oi(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!_0(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};zc(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=_ke({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),zc(o=>{if(!YM(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Oi(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;Rke.set(this.visualElement,this);const e=this.visualElement.current,n=bd(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();_0(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=dd(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(zc(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=vz,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function YM(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Lke(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Ike extends np{constructor(e){super(e),this.removeGroupControls=Rr,this.removeListeners=Rr,this.controls=new Oke(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Pq=t=>(e,n)=>{t&&Ii.update(()=>t(e,n))};class kke extends np{constructor(){super(...arguments),this.removePointerDownListener=Rr}onPointerDown(e){this.session=new Cae(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Pq(e),onStart:Pq(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Ii.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=bd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Nke(){const t=Z.useContext(q5);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=Z.useId();return Z.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const BT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Dq(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const O1={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Gt.test(t))t=parseFloat(t);else return t;const n=Dq(t,e.target.x),i=Dq(t,e.target.y);return`${n}% ${i}%`}},Bke={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Hf.parse(t);if(r.length>5)return i;const s=Hf.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Oi(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class zke extends ks.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;GOe(Fke),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),BT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ii.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Iae(t){const[e,n]=Nke(),i=Z.useContext(Coe);return ks.createElement(zke,{...t,layoutGroup:i,switchLayoutGroup:Z.useContext(Poe),isPresent:e,safeToRemove:n})}const Fke={borderRadius:{...O1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:O1,borderTopRightRadius:O1,borderBottomLeftRadius:O1,borderBottomRightRadius:O1,boxShadow:Bke},kae=["TopLeft","TopRight","BottomLeft","BottomRight"],Uke=kae.length,Rq=t=>typeof t=="string"?parseFloat(t):t,Oq=t=>typeof t=="number"||Gt.test(t);function Vke(t,e,n,i,r,s){r?(t.opacity=Oi(0,n.opacity!==void 0?n.opacity:1,Hke(i)),t.opacityExit=Oi(e.opacity!==void 0?e.opacity:1,0,jke(i))):s&&(t.opacity=Oi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<Uke;o++){const a=`border${kae[o]}Radius`;let l=Lq(e,a),c=Lq(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Oq(l)===Oq(c)?(t[a]=Math.max(Oi(Rq(l),Rq(c),i),0),(ou.test(c)||ou.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Oi(e.rotate||0,n.rotate||0,i))}function Lq(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Hke=Nae(0,.5,rV),jke=Nae(.5,.95,Rr);function Nae(t,e,n){return i=>i<t?0:i>e?1:n(m_(t,e,i))}function Iq(t,e){t.min=e.min,t.max=e.max}function za(t,e){Iq(t.x,e.x),Iq(t.y,e.y)}function kq(t,e,n,i,r){return t-=e,t=YC(t,1/n,i),r!==void 0&&(t=YC(t,1/r,i)),t}function Gke(t,e=0,n=1,i=.5,r,s=t,o=t){if(ou.test(e)&&(e=parseFloat(e),e=Oi(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Oi(s.min,s.max,i);t===s&&(a-=e),t.min=kq(t.min,e,n,a,r),t.max=kq(t.max,e,n,a,r)}function Nq(t,e,[n,i,r],s,o){Gke(t,e[n],e[i],e[r],e.scale,s,o)}const Wke=["x","scaleX","originX"],qke=["y","scaleY","originY"];function Bq(t,e,n,i){Nq(t.x,e,Wke,n?n.x:void 0,i?i.x:void 0),Nq(t.y,e,qke,n?n.y:void 0,i?i.y:void 0)}function zq(t){return t.translate===0&&t.scale===1}function Bae(t){return zq(t.x)&&zq(t.y)}function bz(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Fq(t){return _a(t.x)/_a(t.y)}class $ke{constructor(){this.members=[]}add(e){cV(this.members,e),e.scheduleRender()}remove(e){if(uV(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Uq(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:d}=n;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),d&&(i+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const Xke=(t,e)=>t.depth-e.depth;class Yke{constructor(){this.children=[],this.isDirty=!1}add(e){cV(this.children,e),this.isDirty=!0}remove(e){uV(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Xke),this.isDirty=!1,this.children.forEach(e)}}function Kke(t,e){const n=performance.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(kd(i),t(s-e))};return Ii.read(i,!0),()=>kd(i)}function Zke(t){window.MotionDebug&&window.MotionDebug.record(t)}function Qke(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Jke(t,e,n){const i=Fo(t)?t:Oy(t);return i.start(lV("",i,e,n)),i.animation}const Vq=["","X","Y","Z"],Hq=1e3;let eNe=0;const Wp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function zae({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=eNe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Wp.totalNodes=Wp.resolvedTargetDeltas=Wp.recalculatedProjection=0,this.nodes.forEach(iNe),this.nodes.forEach(lNe),this.nodes.forEach(cNe),this.nodes.forEach(rNe),Zke(Wp)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Yke)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dV),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Qke(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let u;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Kke(h,250),BT.hasAnimatedSinceResize&&(BT.hasAnimatedSinceResize=!1,this.nodes.forEach(Gq))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||pNe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=d.getProps(),y=!this.targetLayout||!bz(this.targetLayout,p)||f,x=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,x);const b={...Eae(m,"layout"),onPlay:g,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else h||Gq(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,kd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uNe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jq);return}this.isUpdating||this.nodes.forEach(oNe),this.isUpdating=!1,this.nodes.forEach(aNe),this.nodes.forEach(tNe),this.nodes.forEach(nNe),this.clearAllSnapshots();const a=performance.now();Pi.delta=Vf(0,1e3/60,a-Pi.timestamp),Pi.timestamp=a,Pi.isProcessing=!0,q0.update.process(Pi),q0.preRender.process(Pi),q0.render.process(Pi),Pi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(sNe),this.sharedNodes.forEach(dNe)}scheduleUpdateProjection(){Ii.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Ii.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Bae(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Gp(this.latestValues)||d)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),mNe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return pr();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Uh(a.x,l.offset.x),Uh(a.y,l.offset.y)),a}removeElementScroll(o){const a=pr();za(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:u}=c;if(c!==this.root&&d&&u.layoutScroll){if(d.isRoot){za(a,o);const{scroll:h}=this.root;h&&(Uh(a.x,-h.offset.x),Uh(a.y,-h.offset.y))}Uh(a.x,d.offset.x),Uh(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=pr();za(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&M0(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Gp(d.latestValues)&&M0(l,d.latestValues)}return Gp(this.latestValues)&&M0(l,this.latestValues),l}removeTransform(o){const a=pr();za(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Gp(c.latestValues))continue;yz(c.latestValues)&&c.updateSnapshot();const d=pr(),u=c.measurePageBox();za(d,u),Bq(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Gp(this.latestValues)&&Bq(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=Boolean(this.resumingFrom)||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Pi.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pr(),this.relativeTargetOrigin=pr(),rw(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),za(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pr(),this.targetWithTransforms=pr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yke(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):za(this.target,this.layout.layoutBox),Oae(this.target,this.targetDelta)):za(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&Boolean(f.resumingFrom)===Boolean(this.resumingFrom)&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pr(),this.relativeTargetOrigin=pr(),rw(this.relativeTargetOrigin,this.target,f.target),za(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Wp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yz(this.parent.latestValues)||Rae(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=Boolean(this.resumingFrom)||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Pi.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;za(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Tke(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=E0(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=E0(),this.projectionDeltaWithTransform=E0());const m=this.projectionTransform;iw(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Uq(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==h||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Wp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=E0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=pr(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),v=!g||g.members.length<=1,y=Boolean(m&&!v&&this.options.crossfade===!0&&!this.path.some(fNe));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const w=b/1e3;Wq(u.x,o.x,w),Wq(u.y,o.y,w),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rw(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hNe(this.relativeTarget,this.relativeTargetOrigin,h,w),x&&bz(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=pr()),za(x,this.relativeTarget)),m&&(this.animationValues=d,Vke(d,c,this.latestValues,w,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(kd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ii.update(()=>{BT.hasAnimatedSinceResize=!0,this.currentAnimation=Jke(0,Hq,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Fae(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||pr();const u=_a(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+u;const h=_a(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}za(a,l),M0(a,d),iw(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $ke),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<Vq.length;d++){const u="rotate"+Vq[d];l[u]&&(c[u]=l[u],o.setStaticValue(u,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=NT(o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=NT(o.pointerEvents)||""),this.hasProjected&&!Gp(this.latestValues)&&(m.transform=d?d({},""):"none",this.hasProjected=!1),m}const h=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=Uq(this.projectionDeltaWithTransform,this.treeScale,h),d&&(c.transform=d(h,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in HC){if(h[m]===void 0)continue;const{correct:g,applyTo:v}=HC[m],y=c.transform==="none"?h[m]:g(h[m],u);if(v){const x=v.length;for(let b=0;b<x;b++)c[v[b]]=y}else c[m]=y}return this.options.layoutId&&(c.pointerEvents=u===this?NT(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(jq),this.root.sharedNodes.clear()}}}function tNe(t){t.updateLayout()}function nNe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?zc(u=>{const h=o?n.measuredBox[u]:n.layoutBox[u],f=_a(h);h.min=i[u].min,h.max=h.min+f}):Fae(s,n.layoutBox,i)&&zc(u=>{const h=o?n.measuredBox[u]:n.layoutBox[u],f=_a(i[u]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=E0();iw(a,i,n.layoutBox);const l=E0();o?iw(l,t.applyTransform(r,!0),n.measuredBox):iw(l,i,n.layoutBox);const c=!Bae(a);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:f}=u;if(h&&f){const p=pr();rw(p,n.layoutBox,h.layoutBox);const m=pr();rw(m,i,f.layoutBox),bz(p,m)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function iNe(t){Wp.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function rNe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sNe(t){t.clearSnapshot()}function jq(t){t.clearMeasurements()}function oNe(t){t.isLayoutDirty=!1}function aNe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gq(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lNe(t){t.resolveTargetDelta()}function cNe(t){t.calcProjection()}function uNe(t){t.resetRotation()}function dNe(t){t.removeLeadSnapshot()}function Wq(t,e,n){t.translate=Oi(e.translate,0,n),t.scale=Oi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qq(t,e,n,i){t.min=Oi(e.min,n.min,i),t.max=Oi(e.max,n.max,i)}function hNe(t,e,n,i){qq(t.x,e.x,n.x,i),qq(t.y,e.y,n.y,i)}function fNe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const pNe={duration:.45,ease:[.4,0,.1,1]};function $q(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function mNe(t){$q(t.x),$q(t.y)}function Fae(t,e,n){return t==="position"||t==="preserve-aspect"&&!gz(Fq(e),Fq(n),.2)}const gNe=zae({attachResizeListener:(t,e)=>dd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),OL={current:void 0},Uae=zae({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!OL.current){const t=new gNe({});t.mount(window),t.setOptions({layoutScroll:!0}),OL.current=t}return OL.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>Boolean(window.getComputedStyle(t).position==="fixed")}),vNe={pan:{Feature:kke},drag:{Feature:Ike,ProjectionNode:Uae,MeasureLayout:Iae}},yNe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function xNe(t){const e=yNe.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function wz(t,e,n=1){const[i,r]=xNe(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);return s?s.trim():lz(r)?wz(r,e,n+1):r}function bNe(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const s=r.get();if(!lz(s))return;const o=wz(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!lz(s))continue;const o=wz(s,i);o&&(e[r]=o,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:e,transitionEnd:n}}const wNe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Vae=t=>wNe.has(t),_Ne=t=>Object.keys(t).some(Vae),Xq=t=>t===_g||t===Gt,Yq=(t,e)=>parseFloat(t.split(", ")[e]),Kq=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Yq(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?Yq(s[1],t):0}},SNe=new Set(["x","y","z"]),ENe=mS.filter(t=>!SNe.has(t));function MNe(t){const e=[];return ENe.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Zq={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Kq(4,13),y:Kq(5,14)},ANe=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Zq[c](i,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),t[c]=Zq[c](l,s)}),t},TNe=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(Vae);let s=[],o=!1;const a=[];if(r.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],u=R1(d);const h=e[l];let f;if(GC(h)){const p=h.length,m=h[0]===null?1:0;d=h[m],u=R1(d);for(let g=m;g<p&&h[g]!==null;g++)f?iV(R1(h[g])===f):f=R1(h[g])}else f=R1(h);if(u!==f)if(Xq(u)&&Xq(f)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof h=="string"?e[l]=parseFloat(h):Array.isArray(h)&&f===Gt&&(e[l]=h.map(parseFloat))}else u!=null&&u.transform&&(f!=null&&f.transform)&&(d===0||h===0)?d===0?c.set(f.transform(d)):e[l]=u.transform(h):(o||(s=MNe(t),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(h))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=ANe(e,t,a);return s.length&&s.forEach(([d,u])=>{t.getValue(d).set(u)}),t.render(),ED&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function CNe(t,e,n,i){return _Ne(e)?TNe(t,e,n,i):{target:e,transitionEnd:i}}const PNe=(t,e,n,i)=>{const r=bNe(t,e,i);return e=r.target,i=r.transitionEnd,CNe(t,e,n,i)},_z={current:null},Hae={current:!1};function DNe(){if(Hae.current=!0,!!ED)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_z.current=t.matches;t.addListener(e),e()}else _z.current=!1}function RNe(t,e,n){const{willChange:i}=e;for(const r in e){const s=e[r],o=n[r];if(Fo(s))t.addValue(r,s),XC(i)&&i.add(r);else if(Fo(o))t.addValue(r,Oy(s,{owner:t})),XC(i)&&i.remove(r);else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,Oy(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Qq=new WeakMap,jae=Object.keys(f_),ONe=jae.length,Jq=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],LNe=X5.length;class INe{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ii.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=AD(n),this.isVariantNode=Toe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const u in d){const h=d[u];a[u]!==void 0&&Fo(h)&&(h.set(a[u],!1),XC(c)&&c.add(u))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Qq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Hae.current||DNe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_z.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qq.delete(this.current),this.projection&&this.projection.unmount(),kd(this.notifyUpdate),kd(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=wg.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ii.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,s){let o,a;for(let l=0;l<ONe;l++){const c=jae[l],{isEnabled:d,Feature:u,ProjectionNode:h,MeasureLayout:f}=f_[c];h&&(o=h),d(n)&&(!this.features[c]&&u&&(this.features[c]=new u(this)),f&&(a=f))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:u,layoutScroll:h,layoutRoot:f}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:Boolean(d)||u&&_0(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:h,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Jq.length;i++){const r=Jq[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=RNe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<LNe;i++){const r=X5[i],s=this.props[r];(h_(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Oy(n,{owner:this}),this.addValue(e,i)),i}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=nV(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Fo(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dV),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Gae extends INe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},s){let o=eke(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),o&&(o=r(o))),s){QIe(this,i,o);const a=PNe(this,i,o,n);n=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:n,...i}}}function kNe(t){return window.getComputedStyle(t)}class NNe extends Gae{readValueFromInstance(e,n){if(wg.has(n)){const i=aV(n);return i&&i.default||0}else{const i=kNe(e),r=(Ooe(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Lae(e,n)}build(e,n,i,r){K5(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return tV(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fo(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){zoe(e,n,i,r)}}class BNe extends Gae{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(wg.has(n)){const i=aV(n);return i&&i.default||0}return n=Foe.has(n)?n:eV(n),e.getAttribute(n)}measureInstanceViewportBox(){return pr()}scrapeMotionValuesFromProps(e,n){return Voe(e,n)}build(e,n,i,r){Q5(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){Uoe(e,n,i,r)}mount(e){this.isSVGTag=J5(e.tagName),super.mount(e)}}const zNe=(t,e)=>Y5(t)?new BNe(e,{enableHardwareAcceleration:!1}):new NNe(e,{enableHardwareAcceleration:!0}),FNe={layout:{ProjectionNode:Uae,MeasureLayout:Iae}},UNe={...pke,...kLe,...vNe,...FNe},LL=HOe((t,e)=>yLe(t,e,UNe,zNe)),_d=t=>Math.PI/180*t;/**
 * @remix-run/router v1.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function g_(){return g_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},g_.apply(this,arguments)}var nf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nf||(nf={}));const e$="popstate";function VNe(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Sz("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:KC(r)}return jNe(e,n,null,t)}function br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hV(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HNe(){return Math.random().toString(36).substr(2,8)}function t$(t,e){return{usr:t.state,key:t.key,idx:e}}function Sz(t,e,n,i){return n===void 0&&(n=null),g_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bx(e):e,{state:n,key:e&&e.key||i||HNe()})}function KC(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function bx(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function jNe(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=nf.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(g_({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function u(){a=nf.Pop;let g=d(),v=g==null?null:g-c;c=g,l&&l({action:a,location:m.location,delta:v})}function h(g,v){a=nf.Push;let y=Sz(m.location,g,v);n&&n(y,g),c=d()+1;let x=t$(y,c),b=m.createHref(y);try{o.pushState(x,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;r.location.assign(b)}s&&l&&l({action:a,location:m.location,delta:1})}function f(g,v){a=nf.Replace;let y=Sz(m.location,g,v);n&&n(y,g),c=d();let x=t$(y,c),b=m.createHref(y);o.replaceState(x,"",b),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let v=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof g=="string"?g:KC(g);return br(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let m={get action(){return a},get location(){return t(r,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(e$,u),l=g,()=>{r.removeEventListener(e$,u),l=null}},createHref(g){return e(r,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(g){return o.go(g)}};return m}var n$;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(n$||(n$={}));function GNe(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?bx(e):e,r=fV(i.pathname||"/",n);if(r==null)return null;let s=Wae(t);WNe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=eBe(s[a],iBe(r));return o}function Wae(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(br(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Tf([i,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(br(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Wae(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:QNe(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of qae(s.path))r(s,o,l)}),e}function qae(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=qae(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function WNe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:JNe(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const qNe=/^:\w+$/,$Ne=3,XNe=2,YNe=1,KNe=10,ZNe=-2,i$=t=>t==="*";function QNe(t,e){let n=t.split("/"),i=n.length;return n.some(i$)&&(i+=ZNe),e&&(i+=XNe),n.filter(r=>!i$(r)).reduce((r,s)=>r+(qNe.test(s)?$Ne:s===""?YNe:KNe),i)}function JNe(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function eBe(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",d=tBe({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(i,d.params);let u=a.route;s.push({params:i,pathname:Tf([r,d.pathname]),pathnameBase:aBe(Tf([r,d.pathnameBase])),route:u}),d.pathnameBase!=="/"&&(r=Tf([r,d.pathnameBase]))}return s}function tBe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=nBe(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,d,u)=>{if(d==="*"){let h=a[u]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return c[d]=rBe(a[u]||"",d),c},{}),pathname:s,pathnameBase:o,pattern:t}}function nBe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hV(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function iBe(t){try{return decodeURI(t)}catch(e){return hV(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rBe(t,e){try{return decodeURIComponent(t)}catch(n){return hV(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function fV(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function sBe(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?bx(t):t;return{pathname:n?n.startsWith("/")?n:oBe(n,e):e,search:lBe(i),hash:cBe(r)}}function oBe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function IL(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $ae(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xae(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=bx(t):(r=g_({},t),br(!r.pathname||!r.pathname.includes("?"),IL("?","pathname","search",r)),br(!r.pathname||!r.pathname.includes("#"),IL("#","pathname","hash",r)),br(!r.search||!r.search.includes("#"),IL("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let u=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;r.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=sBe(r,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Tf=t=>t.join("/").replace(/\/\/+/g,"/"),aBe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lBe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cBe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uBe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dBe=["post","put","patch","delete"];[...dBe];/**
 * React Router v6.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZC(){return ZC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ZC.apply(this,arguments)}const hBe="startTransition";var r$=sC[hBe];const pV=Z.createContext(null),fBe=Z.createContext(null),wx=Z.createContext(null),RD=Z.createContext(null),Yd=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),Yae=Z.createContext(null);function pBe(t,e){let{relative:n}=e===void 0?{}:e;xS()||br(!1);let{basename:i,navigator:r}=Z.useContext(wx),{hash:s,pathname:o,search:a}=Qae(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Tf([i,o])),r.createHref({pathname:l,search:a,hash:s})}function xS(){return Z.useContext(RD)!=null}function OD(){return xS()||br(!1),Z.useContext(RD).location}function Kae(t){Z.useContext(wx).static||Z.useLayoutEffect(t)}function wu(){let{isDataRoute:t}=Z.useContext(Yd);return t?PBe():mBe()}function mBe(){xS()||br(!1);let t=Z.useContext(pV),{basename:e,navigator:n}=Z.useContext(wx),{matches:i}=Z.useContext(Yd),{pathname:r}=OD(),s=JSON.stringify($ae(i).map(l=>l.pathnameBase)),o=Z.useRef(!1);return Kae(()=>{o.current=!0}),Z.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Xae(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Tf([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,r,t])}const gBe=Z.createContext(null);function vBe(t){let e=Z.useContext(Yd).outlet;return e&&Z.createElement(gBe.Provider,{value:t},e)}function Zae(){let{matches:t}=Z.useContext(Yd),e=t[t.length-1];return e?e.params:{}}function Qae(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=Z.useContext(Yd),{pathname:r}=OD(),s=JSON.stringify($ae(i).map(o=>o.pathnameBase));return Z.useMemo(()=>Xae(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function yBe(t,e){return xBe(t,e)}function xBe(t,e,n){xS()||br(!1);let{navigator:i}=Z.useContext(wx),{matches:r}=Z.useContext(Yd),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=OD(),c;if(e){var d;let m=typeof e=="string"?bx(e):e;a==="/"||(d=m.pathname)!=null&&d.startsWith(a)||br(!1),c=m}else c=l;let u=c.pathname||"/",h=a==="/"?u:u.slice(a.length)||"/",f=GNe(t,{pathname:h}),p=EBe(f&&f.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Tf([a,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:Tf([a,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),r,n);return e&&p?Z.createElement(RD.Provider,{value:{location:ZC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:nf.Pop}},p):p}function bBe(){let t=CBe(),e=uBe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),n?Z.createElement("pre",{style:r},n):null,s)}const wBe=Z.createElement(bBe,null);class _Be extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?Z.createElement(Yd.Provider,{value:this.props.routeContext},Z.createElement(Yae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SBe(t){let{routeContext:e,match:n,children:i}=t,r=Z.useContext(pV);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),Z.createElement(Yd.Provider,{value:e},i)}function EBe(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||br(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,u=null;n&&(u=l.route.errorElement||wBe);let h=e.concat(s.slice(0,c+1)),f=()=>{let p;return d?p=u:l.route.Component?p=Z.createElement(l.route.Component,null):l.route.element?p=l.route.element:p=a,Z.createElement(SBe,{match:l,routeContext:{outlet:a,matches:h,isDataRoute:n!=null},children:p})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?Z.createElement(_Be,{location:n.location,revalidation:n.revalidation,component:u,error:d,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var Ez;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Ez||(Ez={}));var v_;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(v_||(v_={}));function MBe(t){let e=Z.useContext(pV);return e||br(!1),e}function ABe(t){let e=Z.useContext(fBe);return e||br(!1),e}function TBe(t){let e=Z.useContext(Yd);return e||br(!1),e}function Jae(t){let e=TBe(),n=e.matches[e.matches.length-1];return n.route.id||br(!1),n.route.id}function CBe(){var t;let e=Z.useContext(Yae),n=ABe(v_.UseRouteError),i=Jae(v_.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function PBe(){let{router:t}=MBe(Ez.UseNavigateStable),e=Jae(v_.UseNavigateStable),n=Z.useRef(!1);return Kae(()=>{n.current=!0}),Z.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,ZC({fromRouteId:e},s)))},[t,e])}function DBe(t){return vBe(t.context)}function kc(t){br(!1)}function RBe(t){let{basename:e="/",children:n=null,location:i,navigationType:r=nf.Pop,navigator:s,static:o=!1}=t;xS()&&br(!1);let a=e.replace(/^\/*/,"/"),l=Z.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=bx(i));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=i,p=Z.useMemo(()=>{let m=fV(c,a);return m==null?null:{location:{pathname:m,search:d,hash:u,state:h,key:f},navigationType:r}},[a,c,d,u,h,f,r]);return p==null?null:Z.createElement(wx.Provider,{value:l},Z.createElement(RD.Provider,{children:n,value:p}))}function OBe(t){let{children:e,location:n}=t;return yBe(Mz(e),n)}var s$;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(s$||(s$={}));new Promise(()=>{});function Mz(t,e){e===void 0&&(e=[]);let n=[];return Z.Children.forEach(t,(i,r)=>{if(!Z.isValidElement(i))return;let s=[...e,r];if(i.type===Z.Fragment){n.push.apply(n,Mz(i.props.children,s));return}i.type!==kc&&br(!1),!i.props.index||!i.props.children||br(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Mz(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Az(){return Az=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Az.apply(this,arguments)}function LBe(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function IBe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kBe(t,e){return t.button===0&&(!e||e==="_self")&&!IBe(t)}const NBe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function BBe(t){let{basename:e,children:n,future:i,window:r}=t,s=Z.useRef();s.current==null&&(s.current=VNe({window:r,v5Compat:!0}));let o=s.current,[a,l]=Z.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},d=Z.useCallback(u=>{c&&r$?r$(()=>l(u)):l(u)},[l,c]);return Z.useLayoutEffect(()=>o.listen(d),[o,d]),Z.createElement(RBe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const zBe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FBe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o$=Z.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,u=LBe(e,NBe),{basename:h}=Z.useContext(wx),f,p=!1;if(typeof c=="string"&&FBe.test(c)&&(f=c,zBe))try{let y=new URL(window.location.href),x=c.startsWith("//")?new URL(y.protocol+c):new URL(c),b=fV(x.pathname,h);x.origin===y.origin&&b!=null?c=b+x.search+x.hash:p=!0}catch{}let m=pBe(c,{relative:r}),g=UBe(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:r});function v(y){i&&i(y),y.defaultPrevented||g(y)}return Z.createElement("a",Az({},u,{href:f||m,onClick:p||s?i:v,ref:n,target:l}))});var a$;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(a$||(a$={}));var l$;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(l$||(l$={}));function UBe(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=wu(),l=OD(),c=Qae(t,{relative:o});return Z.useCallback(d=>{if(kBe(d,n)){d.preventDefault();let u=i!==void 0?i:KC(l)===KC(c);a(t,{replace:u,state:r,preventScrollReset:s,relative:o})}},[l,a,c,i,r,n,t,s,o])}class VBe extends jo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new qBe(n)}),this.register(function(n){return new JBe(n)}),this.register(function(n){return new eze(n)}),this.register(function(n){return new XBe(n)}),this.register(function(n){return new YBe(n)}),this.register(function(n){return new KBe(n)}),this.register(function(n){return new ZBe(n)}),this.register(function(n){return new WBe(n)}),this.register(function(n){return new QBe(n)}),this.register(function(n){return new $Be(n)}),this.register(function(n){return new jBe(n)}),this.register(function(n){return new tze(n)}),this.register(function(n){return new nze(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=su.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new sc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(d){n(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(su.decodeText(new Uint8Array(e,0,4))===ele){try{o[gn.KHR_BINARY_GLTF]=new ize(e)}catch(d){r&&r(d);return}s=JSON.parse(o[gn.KHR_BINARY_GLTF].content)}else s=JSON.parse(su.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new gze(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](l);a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const d=s.extensionsUsed[c],u=s.extensionsRequired||[];switch(d){case gn.KHR_MATERIALS_UNLIT:o[d]=new GBe;break;case gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new oze;break;case gn.KHR_DRACO_MESH_COMPRESSION:o[d]=new rze(s,this.dracoLoader);break;case gn.KHR_TEXTURE_TRANSFORM:o[d]=new sze;break;case gn.KHR_MESH_QUANTIZATION:o[d]=new aze;break;default:u.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function HBe(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const gn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class jBe{constructor(e){this.parser=e,this.name=gn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new at(16777215);l.color!==void 0&&d.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new A5(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new M5(d),c.distance=u;break;case"spot":c=new E5(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class GBe{constructor(){this.name=gn.KHR_MATERIALS_UNLIT}getMaterialType(){return la}extendParams(e,n,i){const r=[];e.color=new at(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,kn))}return Promise.all(r)}}class WBe{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class qBe{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$d}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ye(a,a)}return Promise.all(s)}}class $Be{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$d}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class XBe{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$d}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new at(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,kn)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class YBe{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$d}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class KBe{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$d}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new at(a[0],a[1],a[2]),Promise.all(s)}}class ZBe{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$d}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class QBe{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$d}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new at(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,kn)),Promise.all(s)}}class JBe{constructor(e){this.parser=e,this.name=gn.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class eze{constructor(e){this.parser=e,this.name=gn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class tze{constructor(e){this.name=gn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,d=r.count,u=r.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(d*u);return o.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}else return null}}class nze{constructor(e){this.name=gn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==qa.TRIANGLES&&c.mode!==qa.TRIANGLE_STRIP&&c.mode!==qa.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),u=d.isGroup?d.children:[d],h=c[0].count,f=[];for(const p of u){const m=new Yt,g=new de,v=new or,y=new de(1,1,1),x=new l5(p.geometry,p.material,h);for(let b=0;b<h;b++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,b),l.SCALE&&y.fromBufferAttribute(l.SCALE,b),x.setMatrixAt(b,m.compose(g,v,y));for(const b in l)b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&p.geometry.setAttribute(b,l[b]);Mn.prototype.copy.call(x,p),x.frustumCulled=!1,this.parser.assignFinalMaterial(x),f.push(x)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}}const ele="glTF",L1=12,c$={JSON:1313821514,BIN:5130562};class ize{constructor(e){this.name=gn.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,L1);if(this.header={magic:su.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==ele)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-L1,r=new DataView(e,L1);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===c$.JSON){const l=new Uint8Array(e,L1+s,o);this.content=su.decodeText(l)}else if(a===c$.BIN){const l=L1+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class rze{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const u=Cz[d]||d.toLowerCase();a[u]=o[d]}for(const d in e.attributes){const u=Cz[d]||d.toLowerCase();if(o[d]!==void 0){const h=i.accessors[e.attributes[d]],f=y_[h.componentType];c[u]=f.name,l[u]=h.normalized===!0}}return n.getDependency("bufferView",s).then(function(d){return new Promise(function(u){r.decodeDracoFile(d,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];m!==void 0&&(p.normalized=m)}u(h)},a,c)})})}}class sze{constructor(){this.name=gn.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return n.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class Tz extends dx{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const n=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new at().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class oze{constructor(){this.name=gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return Tz}extendParams(e,n,i){const r=n.extensions[this.name];e.color=new at(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,kn)),e.emissive=new at(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new at(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,kn))}return Promise.all(s)}createMaterial(e){const n=new Tz(e);return n.fog=!0,n.color=e.color,n.map=e.map===void 0?null:e.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=e.aoMap===void 0?null:e.aoMap,n.aoMapIntensity=1,n.emissive=e.emissive,n.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,n.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,n.bumpMap=e.bumpMap===void 0?null:e.bumpMap,n.bumpScale=1,n.normalMap=e.normalMap===void 0?null:e.normalMap,n.normalMapType=Wd,e.normalScale&&(n.normalScale=e.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=e.specularMap===void 0?null:e.specularMap,n.specular=e.specular,n.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,n.glossiness=e.glossiness,n.alphaMap=null,n.envMap=e.envMap===void 0?null:e.envMap,n.envMapIntensity=1,n}}class aze{constructor(){this.name=gn.KHR_MESH_QUANTIZATION}}class tle extends hx{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,d=r-n,u=(i-n)/d,h=u*u,f=h*u,p=e*c,m=p-c,g=-2*f+3*h,v=f-h,y=1-g,x=v-h+u;for(let b=0;b!==a;b++){const w=o[m+b+a],E=o[m+b+l]*d,A=o[p+b+a],S=o[p+b]*d;s[b]=y*w+x*E+g*A+v*S}return s}}const lze=new or;class cze extends tle{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return lze.fromArray(s).normalize().toArray(s),s}}const qa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},y_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},u$={9728:ir,9729:gi,9984:Yw,9985:nD,9986:Kw,9987:Gd},d$={33071:as,33648:_y,10497:zf},h$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Cz={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uze={CUBICSPLINE:void 0,LINEAR:Qm,STEP:Sy},kL={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function dze(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new dx({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Nf})),t.DefaultMaterial}function I1(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function qp(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function hze(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const u=e[c];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const u=e[c];if(i){const h=u.POSITION!==void 0?n.getDependency("accessor",u.POSITION):t.attributes.position;o.push(h)}if(r){const h=u.NORMAL!==void 0?n.getDependency("accessor",u.NORMAL):t.attributes.normal;a.push(h)}if(s){const h=u.COLOR_0!==void 0?n.getDependency("accessor",u.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],u=c[1],h=c[2];return i&&(t.morphAttributes.position=d),r&&(t.morphAttributes.normal=u),s&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function fze(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function pze(t){const e=t.extensions&&t.extensions[gn.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+f$(e.attributes):n=t.indices+":"+f$(t.attributes)+":"+t.mode,n}function f$(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function Pz(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function mze(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class gze{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new HBe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new Tse(this.options.manager):this.textureLoader=new Ise(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new sc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};I1(s,a,r),qp(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this.loadNode(n);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[gn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(su.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=h$[r.type],c=y_[r.componentType],d=c.BYTES_PER_ELEMENT,u=d*l,h=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,g;if(f&&f!==u){const v=Math.floor(h/f),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let x=n.cache.get(y);x||(m=new c(a,v*f,r.count*f/d),x=new tS(m,f/d),n.cache.add(y,x)),g=new Ff(x,l,h%f/d,p)}else a===null?m=new c(r.count*l):m=new c(a,h,r.count*l),g=new Wn(m,l,p);if(r.sparse!==void 0){const v=h$.SCALAR,y=y_[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,w=new y(o[1],x,r.sparse.count*v),E=new c(o[2],b,r.sparse.count*l);a!==null&&(g=new Wn(g.array.slice(),g.itemSize,g.normalized));for(let A=0,S=w.length;A<S;A++){const C=w[A];if(g.setX(C,E[A*l]),l>=2&&g.setY(C,E[A*l+1]),l>=3&&g.setZ(C,E[A*l+2]),l>=4&&g.setW(C,E[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(d){d.flipY=!1,d.name=o.name||a.name||"";const h=(s.samplers||{})[o.sampler]||{};return d.magFilter=u$[h.magFilter]||gi,d.minFilter=u$[h.minFilter]||Gd,d.wrapS=d$[h.wrapS]||zf,d.wrapT=d$[h.wrapT]||zf,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(h,f){let p=h;n.isImageBitmapLoader===!0&&(p=function(m){const g=new Yi(m);g.needsUpdate=!0,h(g)}),n.load(su.resolveURL(u,s.path),p,void 0,f)})}).then(function(u){return c===!0&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||mze(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=d,d}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(i.texCoord!==void 0&&i.texCoord!=0&&!(n==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+n+" not yet supported."),s.extensions[gn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[gn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[gn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new uD,xr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Hs,xr.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.setAttribute("uv2",n.attributes.uv),e.material=i}getMaterialType(){return dx}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=r[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),c.push(u.extendParams(a,s,n))}else if(l[gn.KHR_MATERIALS_UNLIT]){const u=r[gn.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,n))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new at(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}u.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",u.baseColorTexture,kn)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ql);const d=s.alphaMode||kL.OPAQUE;if(d===kL.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===kL.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==la&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ye(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==la&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==la&&(a.emissive=new at().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==la&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,kn)),Promise.all(c).then(function(){let u;return o===Tz?u=r[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),s.name&&(u.name=s.name),qp(u,s),n.associations.set(u,{materials:e}),s.extensions&&I1(r,u,s),u})}createUniqueName(e){const n=En.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[gn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return p$(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=pze(c),u=r[d];if(u)o.push(u.promise);else{let h;c.extensions&&c.extensions[gn.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=p$(new cn,c,n),r[d]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=o[l].material===void 0?dze(this.cache):this.getDependency("material",o[l].material);a.push(d)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let f=0,p=d.length;f<p;f++){const m=d[f],g=o[f];let v;const y=c[f];if(g.mode===qa.TRIANGLES||g.mode===qa.TRIANGLE_STRIP||g.mode===qa.TRIANGLE_FAN||g.mode===void 0)v=s.isSkinnedMesh===!0?new a5(m,y):new Lr(m,y),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),g.mode===qa.TRIANGLE_STRIP?v.geometry=m$(v.geometry,Lre):g.mode===qa.TRIANGLE_FAN&&(v.geometry=m$(v.geometry,KU));else if(g.mode===qa.LINES)v=new cc(m,y);else if(g.mode===qa.LINE_STRIP)v=new Id(m,y);else if(g.mode===qa.LINE_LOOP)v=new c5(m,y);else if(g.mode===qa.POINTS)v=new u5(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(v.geometry.morphAttributes).length>0&&fze(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),qp(v,s),g.extensions&&I1(r,v,g),n.assignFinalMaterial(v),u.push(v)}for(let f=0,p=u.length;f<p;f++)n.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return u[0];const h=new ud;n.associations.set(h,{meshes:e});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new vi(Fre.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new xd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),qp(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i={joints:n.joints};return n.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",n.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,d=i.channels.length;c<d;c++){const u=i.channels[c],h=i.samplers[u.sampler],f=u.target,p=f.node,m=i.parameters!==void 0?i.parameters[h.input]:h.input,g=i.parameters!==void 0?i.parameters[h.output]:h.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],u=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let v=0,y=d.length;v<y;v++){const x=d[v],b=u[v],w=h[v],E=f[v],A=p[v];if(x===void 0)continue;x.updateMatrix();let S;switch(xh[A.path]){case xh.weights:S=Ay;break;case xh.rotation:S=Uf;break;case xh.position:case xh.scale:default:S=Ty;break}const C=x.name?x.name:x.uuid,T=E.interpolation!==void 0?uze[E.interpolation]:Qm,P=[];xh[A.path]===xh.weights?x.traverse(function(L){L.morphTargetInfluences&&P.push(L.name?L.name:L.uuid)}):P.push(C);let R=w.array;if(w.normalized){const L=Pz(R.constructor),O=new Float32Array(R.length);for(let B=0,$=R.length;B<$;B++)O[B]=R[B]*L;R=O}for(let L=0,O=P.length;L<O;L++){const B=new S(P[L]+"."+xh[A.path],b.array,R,T);E.interpolation==="CUBICSPLINE"&&(B.createInterpolant=function(X){const H=this instanceof Uf?cze:tle;return new H(this.times,this.values,this.getValueSize()/3,X)},B.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(B)}}const g=i.name?i.name:"animation_"+e;return new Cy(g,void 0,m)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this.extensions,r=this,s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new cD:a.length>1?l=new ud:a.length===1?l=a[0]:l=new Mn,l!==a[0])for(let c=0,d=a.length;c<d;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),qp(l,s),s.extensions&&I1(i,l,s),s.matrix!==void 0){const c=new Yt;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const n=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new ud;r.name&&(o.name=s.createUniqueName(r.name)),qp(o,r),r.extensions&&I1(i,o,r);const a=r.nodes||[],l=[];for(let c=0,d=a.length;c<d;c++)l.push(nle(a[c],o,n,s));return Promise.all(l).then(function(){const c=d=>{const u=new Map;for(const[h,f]of s.associations)(h instanceof xr||h instanceof Yi)&&u.set(h,f);return d.traverse(h=>{const f=s.associations.get(h);f!=null&&u.set(h,f)}),u};return s.associations=c(o),o})}}function nle(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then(function(s){if(r.skin===void 0)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,d=o.joints.length;c<d;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],d=[];for(let u=0,h=a.length;u<h;u++){const f=a[u];if(f){c.push(f);const p=new Yt;o.inverseBindMatrices!==void 0&&p.fromArray(o.inverseBindMatrices.array,u*16),d.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new nS(c,d),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++){const d=a[l];o.push(nle(d,s,n,i))}}return Promise.all(o)})}function vze(t,e,n){const i=e.attributes,r=new Qf;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new de(l[0],l[1],l[2]),new de(c[0],c[1],c[2])),a.normalized){const d=Pz(y_[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new de,l=new de;for(let c=0,d=s.length;c<d;c++){const u=s[c];if(u.POSITION!==void 0){const h=n.json.accessors[u.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=Pz(y_[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new Jf;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function p$(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=Cz[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return qp(t,e),vze(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?hze(t,e.targets,n):t})}function m$(t,e){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(e===KU)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}function mV(){const t=gD(VBe,"../../../public/models/miniroom.glb");return t.scene.scale.set(.1,.1,.1),fx(()=>{t.scene.rotation.y+=.01}),Te("primitive",{object:t.scene})}var Dz={},yze={get exports(){return Dz},set exports(t){Dz=t}},QC={},xze={get exports(){return QC},set exports(t){QC=t}},ile=function(e,n){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(n,r)}},bze=ile,gV=Object.prototype.toString,vV=function(t){return function(e){var n=gV.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function Sg(t){return t=t.toLowerCase(),function(n){return vV(n)===t}}function yV(t){return Array.isArray(t)}function JC(t){return typeof t>"u"}function wze(t){return t!==null&&!JC(t)&&t.constructor!==null&&!JC(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var rle=Sg("ArrayBuffer");function _ze(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&rle(t.buffer),e}function Sze(t){return typeof t=="string"}function Eze(t){return typeof t=="number"}function sle(t){return t!==null&&typeof t=="object"}function zT(t){if(vV(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var Mze=Sg("Date"),Aze=Sg("File"),Tze=Sg("Blob"),Cze=Sg("FileList");function xV(t){return gV.call(t)==="[object Function]"}function Pze(t){return sle(t)&&xV(t.pipe)}function Dze(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||gV.call(t)===e||xV(t.toString)&&t.toString()===e)}var Rze=Sg("URLSearchParams");function Oze(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Lze(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function bV(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),yV(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function Rz(){var t={};function e(r,s){zT(t[s])&&zT(r)?t[s]=Rz(t[s],r):zT(r)?t[s]=Rz({},r):yV(r)?t[s]=r.slice():t[s]=r}for(var n=0,i=arguments.length;n<i;n++)bV(arguments[n],e);return t}function Ize(t,e,n){return bV(e,function(r,s){n&&typeof r=="function"?t[s]=bze(r,n):t[s]=r}),t}function kze(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function Nze(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function Bze(t,e,n){var i,r,s,o={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)s=i[r],o[s]||(e[s]=t[s],o[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function zze(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return i!==-1&&i===n}function Fze(t){if(!t)return null;var e=t.length;if(JC(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var Uze=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),ps={isArray:yV,isArrayBuffer:rle,isBuffer:wze,isFormData:Dze,isArrayBufferView:_ze,isString:Sze,isNumber:Eze,isObject:sle,isPlainObject:zT,isUndefined:JC,isDate:Mze,isFile:Aze,isBlob:Tze,isFunction:xV,isStream:Pze,isURLSearchParams:Rze,isStandardBrowserEnv:Lze,forEach:bV,merge:Rz,extend:Ize,trim:Oze,stripBOM:kze,inherits:Nze,toFlatObject:Bze,kindOf:vV,kindOfTest:Sg,endsWith:zze,toArray:Fze,isTypedArray:Uze,isFileList:Cze},pv=ps;function g$(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ole=function(e,n,i){if(!n)return e;var r;if(i)r=i(n);else if(pv.isURLSearchParams(n))r=n.toString();else{var s=[];pv.forEach(n,function(l,c){l===null||typeof l>"u"||(pv.isArray(l)?c=c+"[]":l=[l],pv.forEach(l,function(u){pv.isDate(u)?u=u.toISOString():pv.isObject(u)&&(u=JSON.stringify(u)),s.push(g$(c)+"="+g$(u))}))}),r=s.join("&")}if(r){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},Vze=ps;function LD(){this.handlers=[]}LD.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};LD.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};LD.prototype.forEach=function(e){Vze.forEach(this.handlers,function(i){i!==null&&e(i)})};var Hze=LD,jze=ps,Gze=function(e,n){jze.forEach(e,function(r,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(e[n]=r,delete e[s])})},ale=ps;function Ly(t,e,n,i,r){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}ale.inherits(Ly,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var lle=Ly.prototype,cle={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){cle[t]={value:t}});Object.defineProperties(Ly,cle);Object.defineProperty(lle,"isAxiosError",{value:!0});Ly.from=function(t,e,n,i,r,s){var o=Object.create(lle);return ale.toFlatObject(t,o,function(l){return l!==Error.prototype}),Ly.call(o,t.message,e,n,i,r),o.name=t.name,s&&Object.assign(o,s),o};var _x=Ly,ule={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dl=ps;function Wze(t,e){e=e||new FormData;var n=[];function i(s){return s===null?"":Dl.isDate(s)?s.toISOString():Dl.isArrayBuffer(s)||Dl.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function r(s,o){if(Dl.isPlainObject(s)||Dl.isArray(s)){if(n.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);n.push(s),Dl.forEach(s,function(l,c){if(!Dl.isUndefined(l)){var d=o?o+"."+c:c,u;if(l&&!o&&typeof l=="object"){if(Dl.endsWith(c,"{}"))l=JSON.stringify(l);else if(Dl.endsWith(c,"[]")&&(u=Dl.toArray(l))){u.forEach(function(h){!Dl.isUndefined(h)&&e.append(d,i(h))});return}}r(l,d)}}),n.pop()}else e.append(o,i(s))}return r(t),e}var dle=Wze,NL,v$;function qze(){if(v$)return NL;v$=1;var t=_x;return NL=function(n,i,r){var s=r.config.validateStatus;!r.status||!s||s(r.status)?n(r):i(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},NL}var BL,y$;function $ze(){if(y$)return BL;y$=1;var t=ps;return BL=t.isStandardBrowserEnv()?function(){return{write:function(i,r,s,o,a,l){var c=[];c.push(i+"="+encodeURIComponent(r)),t.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),t.isString(o)&&c.push("path="+o),t.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),BL}var Xze=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Yze=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},Kze=Xze,Zze=Yze,hle=function(e,n){return e&&!Kze(n)?Zze(e,n):n},zL,x$;function Qze(){if(x$)return zL;x$=1;var t=ps,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return zL=function(i){var r={},s,o,a;return i&&t.forEach(i.split(`
`),function(c){if(a=c.indexOf(":"),s=t.trim(c.substr(0,a)).toLowerCase(),o=t.trim(c.substr(a+1)),s){if(r[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([o]):r[s]=r[s]?r[s]+", "+o:o}}),r},zL}var FL,b$;function Jze(){if(b$)return FL;b$=1;var t=ps;return FL=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function s(o){var a=o;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=s(window.location.href),function(a){var l=t.isString(a)?s(a):a;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}(),FL}var UL,w$;function ID(){if(w$)return UL;w$=1;var t=_x,e=ps;function n(i){t.call(this,i??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),UL=n,UL}var VL,_$;function eFe(){return _$||(_$=1,VL=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}),VL}var HL,S$;function E$(){if(S$)return HL;S$=1;var t=ps,e=qze(),n=$ze(),i=ole,r=hle,s=Qze(),o=Jze(),a=ule,l=_x,c=ID(),d=eFe();return HL=function(h){return new Promise(function(p,m){var g=h.data,v=h.headers,y=h.responseType,x;function b(){h.cancelToken&&h.cancelToken.unsubscribe(x),h.signal&&h.signal.removeEventListener("abort",x)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete v["Content-Type"];var w=new XMLHttpRequest;if(h.auth){var E=h.auth.username||"",A=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";v.Authorization="Basic "+btoa(E+":"+A)}var S=r(h.baseURL,h.url);w.open(h.method.toUpperCase(),i(S,h.params,h.paramsSerializer),!0),w.timeout=h.timeout;function C(){if(w){var R="getAllResponseHeaders"in w?s(w.getAllResponseHeaders()):null,L=!y||y==="text"||y==="json"?w.responseText:w.response,O={data:L,status:w.status,statusText:w.statusText,headers:R,config:h,request:w};e(function($){p($),b()},function($){m($),b()},O),w=null}}if("onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(m(new l("Request aborted",l.ECONNABORTED,h,w)),w=null)},w.onerror=function(){m(new l("Network Error",l.ERR_NETWORK,h,w,w)),w=null},w.ontimeout=function(){var L=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",O=h.transitional||a;h.timeoutErrorMessage&&(L=h.timeoutErrorMessage),m(new l(L,O.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,h,w)),w=null},t.isStandardBrowserEnv()){var T=(h.withCredentials||o(S))&&h.xsrfCookieName?n.read(h.xsrfCookieName):void 0;T&&(v[h.xsrfHeaderName]=T)}"setRequestHeader"in w&&t.forEach(v,function(L,O){typeof g>"u"&&O.toLowerCase()==="content-type"?delete v[O]:w.setRequestHeader(O,L)}),t.isUndefined(h.withCredentials)||(w.withCredentials=!!h.withCredentials),y&&y!=="json"&&(w.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&w.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(x=function(R){w&&(m(!R||R&&R.type?new c:R),w.abort(),w=null)},h.cancelToken&&h.cancelToken.subscribe(x),h.signal&&(h.signal.aborted?x():h.signal.addEventListener("abort",x))),g||(g=null);var P=d(S);if(P&&["http","https","file"].indexOf(P)===-1){m(new l("Unsupported protocol "+P+":",l.ERR_BAD_REQUEST,h));return}w.send(g)})},HL}var jL,M$;function tFe(){return M$||(M$=1,jL=null),jL}var Kr=ps,A$=Gze,T$=_x,nFe=ule,iFe=dle,rFe={"Content-Type":"application/x-www-form-urlencoded"};function C$(t,e){!Kr.isUndefined(t)&&Kr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function sFe(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=E$()),t}function oFe(t,e,n){if(Kr.isString(t))try{return(e||JSON.parse)(t),Kr.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}var kD={transitional:nFe,adapter:sFe(),transformRequest:[function(e,n){if(A$(n,"Accept"),A$(n,"Content-Type"),Kr.isFormData(e)||Kr.isArrayBuffer(e)||Kr.isBuffer(e)||Kr.isStream(e)||Kr.isFile(e)||Kr.isBlob(e))return e;if(Kr.isArrayBufferView(e))return e.buffer;if(Kr.isURLSearchParams(e))return C$(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Kr.isObject(e),r=n&&n["Content-Type"],s;if((s=Kr.isFileList(e))||i&&r==="multipart/form-data"){var o=this.env&&this.env.FormData;return iFe(s?{"files[]":e}:e,o&&new o)}else if(i||r==="application/json")return C$(n,"application/json"),oFe(e);return e}],transformResponse:[function(e){var n=this.transitional||kD.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||r&&Kr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?T$.from(o,T$.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tFe()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Kr.forEach(["delete","get","head"],function(e){kD.headers[e]={}});Kr.forEach(["post","put","patch"],function(e){kD.headers[e]=Kr.merge(rFe)});var wV=kD,aFe=ps,lFe=wV,cFe=function(e,n,i){var r=this||lFe;return aFe.forEach(i,function(o){e=o.call(r,e,n)}),e},GL,P$;function fle(){return P$||(P$=1,GL=function(e){return!!(e&&e.__CANCEL__)}),GL}var D$=ps,WL=cFe,uFe=fle(),dFe=wV,hFe=ID();function qL(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new hFe}var fFe=function(e){qL(e),e.headers=e.headers||{},e.data=WL.call(e,e.data,e.headers,e.transformRequest),e.headers=D$.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),D$.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var n=e.adapter||dFe.adapter;return n(e).then(function(r){return qL(e),r.data=WL.call(e,r.data,r.headers,e.transformResponse),r},function(r){return uFe(r)||(qL(e),r&&r.response&&(r.response.data=WL.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},Zo=ps,ple=function(e,n){n=n||{};var i={};function r(d,u){return Zo.isPlainObject(d)&&Zo.isPlainObject(u)?Zo.merge(d,u):Zo.isPlainObject(u)?Zo.merge({},u):Zo.isArray(u)?u.slice():u}function s(d){if(Zo.isUndefined(n[d])){if(!Zo.isUndefined(e[d]))return r(void 0,e[d])}else return r(e[d],n[d])}function o(d){if(!Zo.isUndefined(n[d]))return r(void 0,n[d])}function a(d){if(Zo.isUndefined(n[d])){if(!Zo.isUndefined(e[d]))return r(void 0,e[d])}else return r(void 0,n[d])}function l(d){if(d in n)return r(e[d],n[d]);if(d in e)return r(void 0,e[d])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return Zo.forEach(Object.keys(e).concat(Object.keys(n)),function(u){var h=c[u]||s,f=h(u);Zo.isUndefined(f)&&h!==l||(i[u]=f)}),i},$L,R$;function mle(){return R$||(R$=1,$L={version:"0.27.2"}),$L}var pFe=mle().version,Vh=_x,_V={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){_V[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var O$={};_V.transitional=function(e,n,i){function r(s,o){return"[Axios v"+pFe+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return function(s,o,a){if(e===!1)throw new Vh(r(o," has been removed"+(n?" in "+n:"")),Vh.ERR_DEPRECATED);return n&&!O$[o]&&(O$[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function mFe(t,e,n){if(typeof t!="object")throw new Vh("options must be an object",Vh.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),r=i.length;r-- >0;){var s=i[r],o=e[s];if(o){var a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Vh("option "+s+" must be "+l,Vh.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Vh("Unknown option "+s,Vh.ERR_BAD_OPTION)}}var gFe={assertOptions:mFe,validators:_V},gle=ps,vFe=ole,L$=Hze,I$=fFe,ND=ple,yFe=hle,vle=gFe,mv=vle.validators;function Iy(t){this.defaults=t,this.interceptors={request:new L$,response:new L$}}Iy.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ND(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&vle.assertOptions(i,{silentJSONParsing:mv.transitional(mv.boolean),forcedJSONParsing:mv.transitional(mv.boolean),clarifyTimeoutError:mv.transitional(mv.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(s=s&&f.synchronous,r.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var a;if(!s){var l=[I$,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(o),a=Promise.resolve(n);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=n;r.length;){var d=r.shift(),u=r.shift();try{c=d(c)}catch(h){u(h);break}}try{a=I$(c)}catch(h){return Promise.reject(h)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Iy.prototype.getUri=function(e){e=ND(this.defaults,e);var n=yFe(e.baseURL,e.url);return vFe(n,e.params,e.paramsSerializer)};gle.forEach(["delete","get","head","options"],function(e){Iy.prototype[e]=function(n,i){return this.request(ND(i||{},{method:e,url:n,data:(i||{}).data}))}});gle.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,a){return this.request(ND(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Iy.prototype[e]=n(),Iy.prototype[e+"Form"]=n(!0)});var xFe=Iy,XL,k$;function bFe(){if(k$)return XL;k$=1;var t=ID();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(o){i=o});var r=this;this.promise.then(function(s){if(r._listeners){var o,a=r._listeners.length;for(o=0;o<a;o++)r._listeners[o](s);r._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(l){r.subscribe(l),o=l}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},n(function(o){r.reason||(r.reason=new t(o),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(o){i=o});return{token:r,cancel:i}},XL=e,XL}var YL,N$;function wFe(){return N$||(N$=1,YL=function(e){return function(i){return e.apply(null,i)}}),YL}var KL,B$;function _Fe(){if(B$)return KL;B$=1;var t=ps;return KL=function(n){return t.isObject(n)&&n.isAxiosError===!0},KL}var z$=ps,SFe=ile,FT=xFe,EFe=ple,MFe=wV;function yle(t){var e=new FT(t),n=SFe(FT.prototype.request,e);return z$.extend(n,FT.prototype,e),z$.extend(n,e),n.create=function(r){return yle(EFe(t,r))},n}var Uo=yle(MFe);Uo.Axios=FT;Uo.CanceledError=ID();Uo.CancelToken=bFe();Uo.isCancel=fle();Uo.VERSION=mle().version;Uo.toFormData=dle;Uo.AxiosError=_x;Uo.Cancel=Uo.CanceledError;Uo.all=function(e){return Promise.all(e)};Uo.spread=wFe();Uo.isAxiosError=_Fe();xze.exports=Uo;QC.default=Uo;(function(t){t.exports=QC})(yze);const AFe=mP(Dz);var xle={},TFe=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ble="%[a-f0-9]{2}",F$=new RegExp("("+ble+")|([^%]+?)","gi"),U$=new RegExp("("+ble+")+","gi");function Oz(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var n=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],Oz(n),Oz(i))}function CFe(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(F$)||[],n=1;n<e.length;n++)t=Oz(e,n).join(""),e=t.match(F$)||[];return t}}function PFe(t){for(var e={"%FE%FF":"","%FF%FE":""},n=U$.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{var i=CFe(n[0]);i!==n[0]&&(e[n[0]]=i)}n=U$.exec(t)}e["%C2"]="";for(var r=Object.keys(e),s=0;s<r.length;s++){var o=r[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var DFe=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return PFe(t)}},RFe=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const n=t.indexOf(e);return n===-1?[t]:[t.slice(0,n),t.slice(n+e.length)]},OFe=function(t,e){for(var n={},i=Object.keys(t),r=Array.isArray(e),s=0;s<i.length;s++){var o=i[s],a=t[o];(r?e.indexOf(o)!==-1:e(o,a,t))&&(n[o]=a)}return n};(function(t){const e=TFe,n=DFe,i=RFe,r=OFe,s=y=>y==null,o=Symbol("encodeFragmentIdentifier");function a(y){switch(y.arrayFormat){case"index":return x=>(b,w)=>{const E=b.length;return w===void 0||y.skipNull&&w===null||y.skipEmptyString&&w===""?b:w===null?[...b,[d(x,y),"[",E,"]"].join("")]:[...b,[d(x,y),"[",d(E,y),"]=",d(w,y)].join("")]};case"bracket":return x=>(b,w)=>w===void 0||y.skipNull&&w===null||y.skipEmptyString&&w===""?b:w===null?[...b,[d(x,y),"[]"].join("")]:[...b,[d(x,y),"[]=",d(w,y)].join("")];case"colon-list-separator":return x=>(b,w)=>w===void 0||y.skipNull&&w===null||y.skipEmptyString&&w===""?b:w===null?[...b,[d(x,y),":list="].join("")]:[...b,[d(x,y),":list=",d(w,y)].join("")];case"comma":case"separator":case"bracket-separator":{const x=y.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(w,E)=>E===void 0||y.skipNull&&E===null||y.skipEmptyString&&E===""?w:(E=E===null?"":E,w.length===0?[[d(b,y),x,d(E,y)].join("")]:[[w,d(E,y)].join(y.arrayFormatSeparator)])}default:return x=>(b,w)=>w===void 0||y.skipNull&&w===null||y.skipEmptyString&&w===""?b:w===null?[...b,d(x,y)]:[...b,[d(x,y),"=",d(w,y)].join("")]}}function l(y){let x;switch(y.arrayFormat){case"index":return(b,w,E)=>{if(x=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!x){E[b]=w;return}E[b]===void 0&&(E[b]={}),E[b][x[1]]=w};case"bracket":return(b,w,E)=>{if(x=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!x){E[b]=w;return}if(E[b]===void 0){E[b]=[w];return}E[b]=[].concat(E[b],w)};case"colon-list-separator":return(b,w,E)=>{if(x=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!x){E[b]=w;return}if(E[b]===void 0){E[b]=[w];return}E[b]=[].concat(E[b],w)};case"comma":case"separator":return(b,w,E)=>{const A=typeof w=="string"&&w.includes(y.arrayFormatSeparator),S=typeof w=="string"&&!A&&u(w,y).includes(y.arrayFormatSeparator);w=S?u(w,y):w;const C=A||S?w.split(y.arrayFormatSeparator).map(T=>u(T,y)):w===null?w:u(w,y);E[b]=C};case"bracket-separator":return(b,w,E)=>{const A=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!A){E[b]=w&&u(w,y);return}const S=w===null?[]:w.split(y.arrayFormatSeparator).map(C=>u(C,y));if(E[b]===void 0){E[b]=S;return}E[b]=[].concat(E[b],S)};default:return(b,w,E)=>{if(E[b]===void 0){E[b]=w;return}E[b]=[].concat(E[b],w)}}}function c(y){if(typeof y!="string"||y.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(y,x){return x.encode?x.strict?e(y):encodeURIComponent(y):y}function u(y,x){return x.decode?n(y):y}function h(y){return Array.isArray(y)?y.sort():typeof y=="object"?h(Object.keys(y)).sort((x,b)=>Number(x)-Number(b)).map(x=>y[x]):y}function f(y){const x=y.indexOf("#");return x!==-1&&(y=y.slice(0,x)),y}function p(y){let x="";const b=y.indexOf("#");return b!==-1&&(x=y.slice(b)),x}function m(y){y=f(y);const x=y.indexOf("?");return x===-1?"":y.slice(x+1)}function g(y,x){return x.parseNumbers&&!Number.isNaN(Number(y))&&typeof y=="string"&&y.trim()!==""?y=Number(y):x.parseBooleans&&y!==null&&(y.toLowerCase()==="true"||y.toLowerCase()==="false")&&(y=y.toLowerCase()==="true"),y}function v(y,x){x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x),c(x.arrayFormatSeparator);const b=l(x),w=Object.create(null);if(typeof y!="string"||(y=y.trim().replace(/^[?#&]/,""),!y))return w;for(const E of y.split("&")){if(E==="")continue;let[A,S]=i(x.decode?E.replace(/\+/g," "):E,"=");S=S===void 0?null:["comma","separator","bracket-separator"].includes(x.arrayFormat)?S:u(S,x),b(u(A,x),S,w)}for(const E of Object.keys(w)){const A=w[E];if(typeof A=="object"&&A!==null)for(const S of Object.keys(A))A[S]=g(A[S],x);else w[E]=g(A,x)}return x.sort===!1?w:(x.sort===!0?Object.keys(w).sort():Object.keys(w).sort(x.sort)).reduce((E,A)=>{const S=w[A];return Boolean(S)&&typeof S=="object"&&!Array.isArray(S)?E[A]=h(S):E[A]=S,E},Object.create(null))}t.extract=m,t.parse=v,t.stringify=(y,x)=>{if(!y)return"";x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x),c(x.arrayFormatSeparator);const b=S=>x.skipNull&&s(y[S])||x.skipEmptyString&&y[S]==="",w=a(x),E={};for(const S of Object.keys(y))b(S)||(E[S]=y[S]);const A=Object.keys(E);return x.sort!==!1&&A.sort(x.sort),A.map(S=>{const C=y[S];return C===void 0?"":C===null?d(S,x):Array.isArray(C)?C.length===0&&x.arrayFormat==="bracket-separator"?d(S,x)+"[]":C.reduce(w(S),[]).join("&"):d(S,x)+"="+d(C,x)}).filter(S=>S.length>0).join("&")},t.parseUrl=(y,x)=>{x=Object.assign({decode:!0},x);const[b,w]=i(y,"#");return Object.assign({url:b.split("?")[0]||"",query:v(m(y),x)},x&&x.parseFragmentIdentifier&&w?{fragmentIdentifier:u(w,x)}:{})},t.stringifyUrl=(y,x)=>{x=Object.assign({encode:!0,strict:!0,[o]:!0},x);const b=f(y.url).split("?")[0]||"",w=t.extract(y.url),E=t.parse(w,{sort:!1}),A=Object.assign(E,y.query);let S=t.stringify(A,x);S&&(S=`?${S}`);let C=p(y.url);return y.fragmentIdentifier&&(C=`#${x[o]?d(y.fragmentIdentifier,x):y.fragmentIdentifier}`),`${b}${S}${C}`},t.pick=(y,x,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[o]:!1},b);const{url:w,query:E,fragmentIdentifier:A}=t.parseUrl(y,b);return t.stringifyUrl({url:w,query:r(E,x),fragmentIdentifier:A},b)},t.exclude=(y,x,b)=>{const w=Array.isArray(x)?E=>!x.includes(E):(E,A)=>!x(E,A);return t.pick(y,w,b)}})(xle);const LFe="http://127.0.0.1:5000/myroom",IFe=()=>localStorage.getItem("token"),na=AFe.create({baseURL:LFe,paramsSerializer:t=>xle.stringify({params:t})});na.interceptors.request.use(async t=>({...t,headers:{"Content-Type":"application/json",authorization:`Bearer ${IFe()}`}}));na.interceptors.response.use(t=>t&&t.data?t.data:t,t=>{if(!t.response)return console.error(t),alert(t);throw t.response});const SV={signup:t=>na.post("user/signup",t),login:t=>na.post("user/login",t),verifyToken:()=>na.post("user/verify-token")},bS={isAuthenticated:async()=>{if(!localStorage.getItem("token"))return console.log("tools/token"),!1;try{return(await SV.verifyToken()).user}catch{return console.log("tools/token"),!1}}};function kFe(){const t=wu(),e=async()=>{await bS.isAuthenticated()&&t("/home")};Z.useEffect(()=>{e()},[t]);function n(){t("/login")}return Te(fg,{children:Te(N5,{shadows:!0,children:jt(z5,{pages:1,damping:.1,children:[jt(Ry,{children:[Te(H5,{enableZoom:!1,minPolarAngle:_d(60),maxPolarAngle:_d(60)}),Te("ambientLight",{args:["#ffffff",.25]}),Te("spotLight",{args:["#ffffff",1.5,7,_d(45),.4],position:[-1,1,0],castShadow:!0}),Te("directionalLight",{args:["#ffffff",.5],position:[-1,3,0]}),Te(mV,{}),Te(W5,{background:!0,children:jt("mesh",{scale:100,children:[Te("sphereGeometry",{args:[1,1,1]}),Te("meshBasicMaterial",{color:"#b98b93",side:Bs})]})})]}),Te(Ry,{html:!0,children:Te(LL.section,{className:"h-screen w-screen p-8 max-w-screen-2xl mx-auto flex flex-col items-start justify-center",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0,transition:{duration:1,delay:.6}},children:jt("div",{className:"flex flex-col ",children:[jt("h1",{className:"text-6xl font-extrabold leading-snug",children:["Welcome to",Te("br",{}),Te("span",{children:"Myroom"})]}),Te(LL.p,{className:"text-lg text-gray-600 mt-4 italic",initial:{opacity:0,y:25},whileInView:{opacity:1,y:0},transition:{duration:1,delay:1.5},children:"A Room of Your Own"}),Te(LL.button,{onClick:n,className:`bg-red-200 text-gray-600 py-4 px-8 
      rounded-lg font-bold text-lg mt-16`,initial:{opacity:0,y:25},whileInView:{opacity:1,y:0},transition:{duration:1,delay:2},children:"Enter Myroom"})]})})})]})})})}const NFe={black:"#000",white:"#fff"},x_=NFe,BFe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},gv=BFe,zFe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},vv=zFe,FFe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},yv=FFe,UFe={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},xv=UFe,VFe={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},bv=VFe,HFe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},k1=HFe,jFe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},GFe=jFe;function im(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function wle(t){if(!im(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=wle(t[n])}),e}function ll(t,e,n={clone:!0}){const i=n.clone?{...t}:t;return im(t)&&im(e)&&Object.keys(e).forEach(r=>{r!=="__proto__"&&(im(e[r])&&r in t&&im(t[r])?i[r]=ll(t[r],e[r],n):n.clone?i[r]=im(e[r])?wle(e[r]):e[r]:i[r]=e[r])}),i}function jf(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}function Vt(t){if(typeof t!="string")throw new Error(jf(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Lz(...t){return t.reduce((e,n)=>n==null?e:function(...r){e.apply(this,r),n.apply(this,r)},()=>{})}function BD(t,e=166){let n;function i(...r){const s=()=>{t.apply(this,r)};clearTimeout(n),n=setTimeout(s,e)}return i.clear=()=>{clearTimeout(n)},i}function WFe(t,e){return()=>null}function sw(t,e){return Z.isValidElement(t)&&e.indexOf(t.type.muiName)!==-1}function No(t){return t&&t.ownerDocument||document}function fu(t){return No(t).defaultView||window}function qFe(t,e){return()=>null}function e2(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const $Fe=typeof window<"u"?Z.useLayoutEffect:Z.useEffect,Nd=$Fe;let V$=0;function XFe(t){const[e,n]=Z.useState(t),i=t||e;return Z.useEffect(()=>{e==null&&(V$+=1,n(`mui-${V$}`))},[e]),i}const H$=sC["useId".toString()];function EV(t){if(H$!==void 0){const e=H$();return t??e}return XFe(t)}function YFe(t,e,n,i,r){return null}function Iz({controlled:t,default:e,name:n,state:i="value"}){const{current:r}=Z.useRef(t!==void 0),[s,o]=Z.useState(e),a=r?t:s,l=Z.useCallback(c=>{r||o(c)},[]);return[a,l]}function xm(t){const e=Z.useRef(t);return Nd(()=>{e.current=t}),Z.useCallback((...n)=>(0,e.current)(...n),[])}function es(...t){return Z.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{e2(n,e)})},t)}let zD=!0,kz=!1,j$;const KFe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ZFe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&KFe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function QFe(t){t.metaKey||t.altKey||t.ctrlKey||(zD=!0)}function ZL(){zD=!1}function JFe(){this.visibilityState==="hidden"&&kz&&(zD=!0)}function e4e(t){t.addEventListener("keydown",QFe,!0),t.addEventListener("mousedown",ZL,!0),t.addEventListener("pointerdown",ZL,!0),t.addEventListener("touchstart",ZL,!0),t.addEventListener("visibilitychange",JFe,!0)}function t4e(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return zD||ZFe(e)}function _le(){const t=Z.useCallback(r=>{r!=null&&e4e(r.ownerDocument)},[]),e=Z.useRef(!1);function n(){return e.current?(kz=!0,window.clearTimeout(j$),j$=window.setTimeout(()=>{kz=!1},100),e.current=!1,!0):!1}function i(r){return t4e(r)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:n,ref:t}}function Sle(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function MV(t,e){const n={...e};return Object.keys(t).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]={...t[i],...n[i]};else if(i.toString().match(/^(componentsProps|slotProps)$/)){const r=t[i]||{},s=e[i];n[i]={},!s||!Object.keys(s)?n[i]=r:!r||!Object.keys(r)?n[i]=s:(n[i]={...s},Object.keys(r).forEach(o=>{n[i][o]=MV(r[o],s[o])}))}else n[i]===void 0&&(n[i]=t[i])}),n}function ti(t,e,n=void 0){const i={};return Object.keys(t).forEach(r=>{i[r]=t[r].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),i}const G$=t=>t,n4e=()=>{let t=G$;return{configure(e){t=e},generate(e){return t(e)},reset(){t=G$}}},i4e=n4e(),AV=i4e,r4e={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Xn(t,e,n="Mui"){const i=r4e[e];return i?`${n}-${i}`:`${AV.generate(t)}-${e}`}function Yn(t,e,n="Mui"){const i={};return e.forEach(r=>{i[r]=Xn(t,r,n)}),i}const wS="$$material";function Ele(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var s4e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,o4e=Ele(function(t){return s4e.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function a4e(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function l4e(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var c4e=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(l4e(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=a4e(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},t}(),Ts="-ms-",t2="-moz-",Ln="-webkit-",Mle="comm",TV="rule",CV="decl",u4e="@import",Ale="@keyframes",d4e="@layer",h4e=Math.abs,FD=String.fromCharCode,f4e=Object.assign;function p4e(t,e){return os(t,0)^45?(((e<<2^os(t,0))<<2^os(t,1))<<2^os(t,2))<<2^os(t,3):0}function Tle(t){return t.trim()}function m4e(t,e){return(t=e.exec(t))?t[0]:t}function In(t,e,n){return t.replace(e,n)}function Nz(t,e){return t.indexOf(e)}function os(t,e){return t.charCodeAt(e)|0}function b_(t,e,n){return t.slice(e,n)}function Vc(t){return t.length}function PV(t){return t.length}function KM(t,e){return e.push(t),t}function g4e(t,e){return t.map(e).join("")}var UD=1,ky=1,Cle=0,Vo=0,gr=0,Sx="";function VD(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:UD,column:ky,length:o,return:""}}function N1(t,e){return f4e(VD("",null,null,"",null,null,0),t,{length:-t.length},e)}function v4e(){return gr}function y4e(){return gr=Vo>0?os(Sx,--Vo):0,ky--,gr===10&&(ky=1,UD--),gr}function ga(){return gr=Vo<Cle?os(Sx,Vo++):0,ky++,gr===10&&(ky=1,UD++),gr}function au(){return os(Sx,Vo)}function UT(){return Vo}function _S(t,e){return b_(Sx,t,e)}function w_(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ple(t){return UD=ky=1,Cle=Vc(Sx=t),Vo=0,[]}function Dle(t){return Sx="",t}function VT(t){return Tle(_S(Vo-1,Bz(t===91?t+2:t===40?t+1:t)))}function x4e(t){for(;(gr=au())&&gr<33;)ga();return w_(t)>2||w_(gr)>3?"":" "}function b4e(t,e){for(;--e&&ga()&&!(gr<48||gr>102||gr>57&&gr<65||gr>70&&gr<97););return _S(t,UT()+(e<6&&au()==32&&ga()==32))}function Bz(t){for(;ga();)switch(gr){case t:return Vo;case 34:case 39:t!==34&&t!==39&&Bz(gr);break;case 40:t===41&&Bz(t);break;case 92:ga();break}return Vo}function w4e(t,e){for(;ga()&&t+gr!==47+10;)if(t+gr===42+42&&au()===47)break;return"/*"+_S(e,Vo-1)+"*"+FD(t===47?t:ga())}function _4e(t){for(;!w_(au());)ga();return _S(t,Vo)}function S4e(t){return Dle(HT("",null,null,null,[""],t=Ple(t),0,[0],t))}function HT(t,e,n,i,r,s,o,a,l){for(var c=0,d=0,u=o,h=0,f=0,p=0,m=1,g=1,v=1,y=0,x="",b=r,w=s,E=i,A=x;g;)switch(p=y,y=ga()){case 40:if(p!=108&&os(A,u-1)==58){Nz(A+=In(VT(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:A+=VT(y);break;case 9:case 10:case 13:case 32:A+=x4e(p);break;case 92:A+=b4e(UT()-1,7);continue;case 47:switch(au()){case 42:case 47:KM(E4e(w4e(ga(),UT()),e,n),l);break;default:A+="/"}break;case 123*m:a[c++]=Vc(A)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+d:v==-1&&(A=In(A,/\f/g,"")),f>0&&Vc(A)-u&&KM(f>32?q$(A+";",i,n,u-1):q$(In(A," ","")+";",i,n,u-2),l);break;case 59:A+=";";default:if(KM(E=W$(A,e,n,c,d,r,a,x,b=[],w=[],u),s),y===123)if(d===0)HT(A,e,E,E,b,s,u,a,w);else switch(h===99&&os(A,3)===110?100:h){case 100:case 108:case 109:case 115:HT(t,E,E,i&&KM(W$(t,E,E,0,0,r,a,x,r,b=[],u),w),r,w,u,a,i?b:w);break;default:HT(A,E,E,E,[""],w,0,a,w)}}c=d=f=0,m=v=1,x=A="",u=o;break;case 58:u=1+Vc(A),f=p;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&y4e()==125)continue}switch(A+=FD(y),y*m){case 38:v=d>0?1:(A+="\f",-1);break;case 44:a[c++]=(Vc(A)-1)*v,v=1;break;case 64:au()===45&&(A+=VT(ga())),h=au(),d=u=Vc(x=A+=_4e(UT())),y++;break;case 45:p===45&&Vc(A)==2&&(m=0)}}return s}function W$(t,e,n,i,r,s,o,a,l,c,d){for(var u=r-1,h=r===0?s:[""],f=PV(h),p=0,m=0,g=0;p<i;++p)for(var v=0,y=b_(t,u+1,u=h4e(m=o[p])),x=t;v<f;++v)(x=Tle(m>0?h[v]+" "+y:In(y,/&\f/g,h[v])))&&(l[g++]=x);return VD(t,e,n,r===0?TV:a,l,c,d)}function E4e(t,e,n){return VD(t,e,n,Mle,FD(v4e()),b_(t,2,-2),0)}function q$(t,e,n,i){return VD(t,e,n,CV,b_(t,0,i),b_(t,i+1,-1),i)}function $0(t,e){for(var n="",i=PV(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function M4e(t,e,n,i){switch(t.type){case d4e:if(t.children.length)break;case u4e:case CV:return t.return=t.return||t.value;case Mle:return"";case Ale:return t.return=t.value+"{"+$0(t.children,i)+"}";case TV:t.value=t.props.join(",")}return Vc(n=$0(t.children,i))?t.return=t.value+"{"+n+"}":""}function A4e(t){var e=PV(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function T4e(t){return function(e){e.root||(e=e.return)&&t(e)}}var C4e=function(e,n,i){for(var r=0,s=0;r=s,s=au(),r===38&&s===12&&(n[i]=1),!w_(s);)ga();return _S(e,Vo)},P4e=function(e,n){var i=-1,r=44;do switch(w_(r)){case 0:r===38&&au()===12&&(n[i]=1),e[i]+=C4e(Vo-1,n,i);break;case 2:e[i]+=VT(r);break;case 4:if(r===44){e[++i]=au()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=FD(r)}while(r=ga());return e},D4e=function(e,n){return Dle(P4e(Ple(e),n))},$$=new WeakMap,R4e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!$$.get(i))&&!r){$$.set(e,!0);for(var s=[],o=D4e(n,s),a=i.props,l=0,c=0;l<o.length;l++)for(var d=0;d<a.length;d++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[d]):a[d]+" "+o[l]}}},O4e=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Rle(t,e){switch(p4e(t,e)){case 5103:return Ln+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ln+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ln+t+t2+t+Ts+t+t;case 6828:case 4268:return Ln+t+Ts+t+t;case 6165:return Ln+t+Ts+"flex-"+t+t;case 5187:return Ln+t+In(t,/(\w+).+(:[^]+)/,Ln+"box-$1$2"+Ts+"flex-$1$2")+t;case 5443:return Ln+t+Ts+"flex-item-"+In(t,/flex-|-self/,"")+t;case 4675:return Ln+t+Ts+"flex-line-pack"+In(t,/align-content|flex-|-self/,"")+t;case 5548:return Ln+t+Ts+In(t,"shrink","negative")+t;case 5292:return Ln+t+Ts+In(t,"basis","preferred-size")+t;case 6060:return Ln+"box-"+In(t,"-grow","")+Ln+t+Ts+In(t,"grow","positive")+t;case 4554:return Ln+In(t,/([^-])(transform)/g,"$1"+Ln+"$2")+t;case 6187:return In(In(In(t,/(zoom-|grab)/,Ln+"$1"),/(image-set)/,Ln+"$1"),t,"")+t;case 5495:case 3959:return In(t,/(image-set\([^]*)/,Ln+"$1$`$1");case 4968:return In(In(t,/(.+:)(flex-)?(.*)/,Ln+"box-pack:$3"+Ts+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ln+t+t;case 4095:case 3583:case 4068:case 2532:return In(t,/(.+)-inline(.+)/,Ln+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vc(t)-1-e>6)switch(os(t,e+1)){case 109:if(os(t,e+4)!==45)break;case 102:return In(t,/(.+:)(.+)-([^]+)/,"$1"+Ln+"$2-$3$1"+t2+(os(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Nz(t,"stretch")?Rle(In(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(os(t,e+1)!==115)break;case 6444:switch(os(t,Vc(t)-3-(~Nz(t,"!important")&&10))){case 107:return In(t,":",":"+Ln)+t;case 101:return In(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ln+(os(t,14)===45?"inline-":"")+"box$3$1"+Ln+"$2$3$1"+Ts+"$2box$3")+t}break;case 5936:switch(os(t,e+11)){case 114:return Ln+t+Ts+In(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ln+t+Ts+In(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ln+t+Ts+In(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ln+t+Ts+t+t}return t}var L4e=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case CV:e.return=Rle(e.value,e.length);break;case Ale:return $0([N1(e,{value:In(e.value,"@","@"+Ln)})],r);case TV:if(e.length)return g4e(e.props,function(s){switch(m4e(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $0([N1(e,{props:[In(s,/:(read-\w+)/,":"+t2+"$1")]})],r);case"::placeholder":return $0([N1(e,{props:[In(s,/:(plac\w+)/,":"+Ln+"input-$1")]}),N1(e,{props:[In(s,/:(plac\w+)/,":"+t2+"$1")]}),N1(e,{props:[In(s,/:(plac\w+)/,Ts+"input-$1")]})],r)}return""})}},I4e=[L4e],k4e=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var r=e.stylisPlugins||I4e,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)s[g[v]]=!0;a.push(m)});var l,c=[R4e,O4e];{var d,u=[M4e,T4e(function(m){d.insert(m)})],h=A4e(c.concat(r,u)),f=function(g){return $0(S4e(g),h)};l=function(g,v,y,x){d=y,f(g?g+"{"+v.styles+"}":v.styles),x&&(p.inserted[v.name]=!0)}}var p={key:n,sheet:new c4e({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},N4e=!0;function B4e(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):i+=r+" "}),i}var Ole=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||N4e===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},Lle=function(e,n,i){Ole(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function z4e(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var F4e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},U4e=/[A-Z]|^ms/g,V4e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ile=function(e){return e.charCodeAt(1)===45},X$=function(e){return e!=null&&typeof e!="boolean"},QL=Ele(function(t){return Ile(t)?t:t.replace(U4e,"-$&").toLowerCase()}),Y$=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(V4e,function(i,r,s){return Hc={name:r,styles:s,next:Hc},r})}return F4e[e]!==1&&!Ile(e)&&typeof n=="number"&&n!==0?n+"px":n};function __(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Hc={name:n.name,styles:n.styles,next:Hc},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)Hc={name:i.name,styles:i.styles,next:Hc},i=i.next;var r=n.styles+";";return r}return H4e(t,e,n)}case"function":{if(t!==void 0){var s=Hc,o=n(t);return Hc=s,__(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function H4e(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=__(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?i+=s+"{"+e[o]+"}":X$(o)&&(i+=QL(s)+":"+Y$(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)X$(o[a])&&(i+=QL(s)+":"+Y$(s,o[a])+";");else{var l=__(t,e,o);switch(s){case"animation":case"animationName":{i+=QL(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var K$=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Hc,DV=function(e,n,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";Hc=void 0;var o=e[0];o==null||o.raw===void 0?(r=!1,s+=__(i,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=__(i,n,e[a]),r&&(s+=o[a]);K$.lastIndex=0;for(var l="",c;(c=K$.exec(s))!==null;)l+="-"+c[1];var d=z4e(s)+l;return{name:d,styles:s,next:Hc}},j4e=function(e){return e()},kle=sC["useInsertionEffect"]?sC["useInsertionEffect"]:!1,G4e=kle||j4e,Z$=kle||Z.useLayoutEffect,Nle=Z.createContext(typeof HTMLElement<"u"?k4e({key:"css"}):null);Nle.Provider;var Ble=function(e){return Z.forwardRef(function(n,i){var r=Z.useContext(Nle);return e(n,r,i)})},RV=Z.createContext({}),W4e=Ble(function(t,e){var n=t.styles,i=DV([n],void 0,Z.useContext(RV)),r=Z.useRef();return Z$(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),r.current=[o,a],function(){o.flush()}},[e]),Z$(function(){var s=r.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(i.next!==void 0&&Lle(e,i.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",i,o,!1)},[e,i.name]),null});function OV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return DV(e)}var SS=function(){var e=OV.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},q4e=o4e,$4e=function(e){return e!=="theme"},Q$=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?q4e:$4e},J$=function(e,n,i){var r;if(n){var s=n.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},X4e=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return Ole(n,i,r),G4e(function(){return Lle(n,i,r)}),null},Y4e=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=J$(e,n,i),l=a||Q$(r),c=!l("as");return function(){var d=arguments,u=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&u.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)u.push.apply(u,d);else{u.push(d[0][0]);for(var h=d.length,f=1;f<h;f++)u.push(d[f],d[0][f])}var p=Ble(function(m,g,v){var y=c&&m.as||r,x="",b=[],w=m;if(m.theme==null){w={};for(var E in m)w[E]=m[E];w.theme=Z.useContext(RV)}typeof m.className=="string"?x=B4e(g.registered,b,m.className):m.className!=null&&(x=m.className+" ");var A=DV(u.concat(b),g.registered,w);x+=g.key+"-"+A.name,o!==void 0&&(x+=" "+o);var S=c&&a===void 0?Q$(y):l,C={};for(var T in m)c&&T==="as"||S(T)&&(C[T]=m[T]);return C.className=x,C.ref=v,Z.createElement(Z.Fragment,null,Z.createElement(X4e,{cache:g,serialized:A,isStringTag:typeof y=="string"}),Z.createElement(y,C))});return p.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=r,p.__emotion_styles=u,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(m,g){return t(m,_e({},n,g,{shouldForwardProp:J$(p,g,!0)})).apply(void 0,u)},p}},K4e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],zz=Y4e.bind();K4e.forEach(function(t){zz[t]=zz(t)});function Z4e(t){return t==null||Object.keys(t).length===0}function Q4e(t){const{styles:e,defaultTheme:n={}}=t;return Te(W4e,{styles:typeof e=="function"?r=>e(Z4e(r)?n:r):e})}/**
 * @mui/styled-engine v5.13.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function zle(t,e){return zz(t,e)}const J4e=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},eUe=["values","unit","step"],tUe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,i)=>n.val-i.val),e.reduce((n,i)=>_e({},n,{[i.key]:i.val}),{})};function nUe(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=t,r=Dt(t,eUe),s=tUe(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-i/100}${n})`}function c(h,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-i/100}${n})`}function d(h){return o.indexOf(h)+1<o.length?c(h,o[o.indexOf(h)+1]):a(h)}function u(h){const f=o.indexOf(h);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return _e({keys:o,values:s,up:a,down:l,between:c,only:d,not:u,unit:n},r)}const iUe={borderRadius:4},rUe=iUe;function ow(t,e){return e?ll(t,e,{clone:!1}):t}const LV={xs:0,sm:600,md:900,lg:1200,xl:1536},eX={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${LV[t]}px)`};function Bd(t,e,n){const i=t.theme||{};if(Array.isArray(e)){const s=i.breakpoints||eX;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=i.breakpoints||eX;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||LV).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function sUe(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((i,r)=>{const s=t.up(r);return i[s]={},i},{}))||{}}function oUe(t,e){return t.reduce((n,i)=>{const r=n[i];return(!r||Object.keys(r).length===0)&&delete n[i],n},e)}function HD(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const i=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,t);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,t)}function n2(t,e,n,i=n){let r;return typeof t=="function"?r=t(n):Array.isArray(t)?r=t[n]||i:r=HD(t,n)||i,e&&(r=e(r,i,t)),r}function Bn(t){const{prop:e,cssProperty:n=t.prop,themeKey:i,transform:r}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=HD(l,i)||{};return Bd(o,a,u=>{let h=n2(c,r,u);return u===h&&typeof u=="string"&&(h=n2(c,r,`${e}${u==="default"?"":Vt(u)}`,u)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function aUe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const lUe={m:"margin",p:"padding"},cUe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},tX={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},uUe=aUe(t=>{if(t.length>2)if(tX[t])t=tX[t];else return[t];const[e,n]=t.split(""),i=lUe[e],r=cUe[n]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),IV=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],kV=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...IV,...kV];function ES(t,e,n,i){var r;const s=(r=HD(t,e,!1))!=null?r:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function Fle(t){return ES(t,"spacing",8)}function MS(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),i=t(n);return e>=0?i:typeof i=="number"?-i:`-${i}`}function dUe(t,e){return n=>t.reduce((i,r)=>(i[r]=MS(e,n),i),{})}function hUe(t,e,n,i){if(e.indexOf(n)===-1)return null;const r=uUe(n),s=dUe(r,i),o=t[n];return Bd(t,o,s)}function Ule(t,e){const n=Fle(t.theme);return Object.keys(t).map(i=>hUe(t,e,i,n)).reduce(ow,{})}function ji(t){return Ule(t,IV)}ji.propTypes={};ji.filterProps=IV;function Gi(t){return Ule(t,kV)}Gi.propTypes={};Gi.filterProps=kV;function fUe(t=8){if(t.mui)return t;const e=Fle({spacing:t}),n=(...i)=>(i.length===0?[1]:i).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function jD(...t){const e=t.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),n=i=>Object.keys(i).reduce((r,s)=>e[s]?ow(r,e[s](i)):r,{});return n.propTypes={},n.filterProps=t.reduce((i,r)=>i.concat(r.filterProps),[]),n}function Xc(t){return typeof t!="number"?t:`${t}px solid`}const pUe=Bn({prop:"border",themeKey:"borders",transform:Xc}),mUe=Bn({prop:"borderTop",themeKey:"borders",transform:Xc}),gUe=Bn({prop:"borderRight",themeKey:"borders",transform:Xc}),vUe=Bn({prop:"borderBottom",themeKey:"borders",transform:Xc}),yUe=Bn({prop:"borderLeft",themeKey:"borders",transform:Xc}),xUe=Bn({prop:"borderColor",themeKey:"palette"}),bUe=Bn({prop:"borderTopColor",themeKey:"palette"}),wUe=Bn({prop:"borderRightColor",themeKey:"palette"}),_Ue=Bn({prop:"borderBottomColor",themeKey:"palette"}),SUe=Bn({prop:"borderLeftColor",themeKey:"palette"}),GD=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=ES(t.theme,"shape.borderRadius",4),n=i=>({borderRadius:MS(e,i)});return Bd(t,t.borderRadius,n)}return null};GD.propTypes={};GD.filterProps=["borderRadius"];jD(pUe,mUe,gUe,vUe,yUe,xUe,bUe,wUe,_Ue,SUe,GD);const WD=t=>{if(t.gap!==void 0&&t.gap!==null){const e=ES(t.theme,"spacing",8),n=i=>({gap:MS(e,i)});return Bd(t,t.gap,n)}return null};WD.propTypes={};WD.filterProps=["gap"];const qD=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=ES(t.theme,"spacing",8),n=i=>({columnGap:MS(e,i)});return Bd(t,t.columnGap,n)}return null};qD.propTypes={};qD.filterProps=["columnGap"];const $D=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=ES(t.theme,"spacing",8),n=i=>({rowGap:MS(e,i)});return Bd(t,t.rowGap,n)}return null};$D.propTypes={};$D.filterProps=["rowGap"];const EUe=Bn({prop:"gridColumn"}),MUe=Bn({prop:"gridRow"}),AUe=Bn({prop:"gridAutoFlow"}),TUe=Bn({prop:"gridAutoColumns"}),CUe=Bn({prop:"gridAutoRows"}),PUe=Bn({prop:"gridTemplateColumns"}),DUe=Bn({prop:"gridTemplateRows"}),RUe=Bn({prop:"gridTemplateAreas"}),OUe=Bn({prop:"gridArea"});jD(WD,qD,$D,EUe,MUe,AUe,TUe,CUe,PUe,DUe,RUe,OUe);function X0(t,e){return e==="grey"?e:t}const LUe=Bn({prop:"color",themeKey:"palette",transform:X0}),IUe=Bn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:X0}),kUe=Bn({prop:"backgroundColor",themeKey:"palette",transform:X0});jD(LUe,IUe,kUe);function sa(t){return t<=1&&t!==0?`${t*100}%`:t}const NUe=Bn({prop:"width",transform:sa}),NV=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,r,s;return{maxWidth:((i=t.theme)==null||(r=i.breakpoints)==null||(s=r.values)==null?void 0:s[n])||LV[n]||sa(n)}};return Bd(t,t.maxWidth,e)}return null};NV.filterProps=["maxWidth"];const BUe=Bn({prop:"minWidth",transform:sa}),zUe=Bn({prop:"height",transform:sa}),FUe=Bn({prop:"maxHeight",transform:sa}),UUe=Bn({prop:"minHeight",transform:sa});Bn({prop:"size",cssProperty:"width",transform:sa});Bn({prop:"size",cssProperty:"height",transform:sa});const VUe=Bn({prop:"boxSizing"});jD(NUe,NV,BUe,zUe,FUe,UUe,VUe);const HUe={border:{themeKey:"borders",transform:Xc},borderTop:{themeKey:"borders",transform:Xc},borderRight:{themeKey:"borders",transform:Xc},borderBottom:{themeKey:"borders",transform:Xc},borderLeft:{themeKey:"borders",transform:Xc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:GD},color:{themeKey:"palette",transform:X0},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:X0},backgroundColor:{themeKey:"palette",transform:X0},p:{style:Gi},pt:{style:Gi},pr:{style:Gi},pb:{style:Gi},pl:{style:Gi},px:{style:Gi},py:{style:Gi},padding:{style:Gi},paddingTop:{style:Gi},paddingRight:{style:Gi},paddingBottom:{style:Gi},paddingLeft:{style:Gi},paddingX:{style:Gi},paddingY:{style:Gi},paddingInline:{style:Gi},paddingInlineStart:{style:Gi},paddingInlineEnd:{style:Gi},paddingBlock:{style:Gi},paddingBlockStart:{style:Gi},paddingBlockEnd:{style:Gi},m:{style:ji},mt:{style:ji},mr:{style:ji},mb:{style:ji},ml:{style:ji},mx:{style:ji},my:{style:ji},margin:{style:ji},marginTop:{style:ji},marginRight:{style:ji},marginBottom:{style:ji},marginLeft:{style:ji},marginX:{style:ji},marginY:{style:ji},marginInline:{style:ji},marginInlineStart:{style:ji},marginInlineEnd:{style:ji},marginBlock:{style:ji},marginBlockStart:{style:ji},marginBlockEnd:{style:ji},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:WD},rowGap:{style:$D},columnGap:{style:qD},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sa},maxWidth:{style:NV},minWidth:{transform:sa},height:{transform:sa},maxHeight:{transform:sa},minHeight:{transform:sa},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},XD=HUe;function jUe(...t){const e=t.reduce((i,r)=>i.concat(Object.keys(r)),[]),n=new Set(e);return t.every(i=>n.size===Object.keys(i).length)}function GUe(t,e){return typeof t=="function"?t(e):t}function WUe(){function t(n,i,r,s){const o={[n]:i,theme:r},a=s[n];if(!a)return{[n]:i};const{cssProperty:l=n,themeKey:c,transform:d,style:u}=a;if(i==null)return null;if(c==="typography"&&i==="inherit")return{[n]:i};const h=HD(r,c)||{};return u?u(o):Bd(o,i,p=>{let m=n2(h,d,p);return p===m&&typeof p=="string"&&(m=n2(h,d,`${n}${p==="default"?"":Vt(p)}`,p)),l===!1?m:{[l]:m}})}function e(n){var i;const{sx:r,theme:s={}}=n||{};if(!r)return null;const o=(i=s.unstable_sxConfig)!=null?i:XD;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const d=sUe(s.breakpoints),u=Object.keys(d);let h=d;return Object.keys(c).forEach(f=>{const p=GUe(c[f],s);if(p!=null)if(typeof p=="object")if(o[f])h=ow(h,t(f,p,s,o));else{const m=Bd({theme:s},p,g=>({[f]:g}));jUe(m,p)?h[f]=e({sx:p,theme:s}):h=ow(h,m)}else h=ow(h,t(f,p,s,o))}),oUe(u,h)}return Array.isArray(r)?r.map(a):a(r)}return e}const Vle=WUe();Vle.filterProps=["sx"];const YD=Vle,qUe=["breakpoints","palette","spacing","shape"];function BV(t={},...e){const{breakpoints:n={},palette:i={},spacing:r,shape:s={}}=t,o=Dt(t,qUe),a=nUe(n),l=fUe(r);let c=ll({breakpoints:a,direction:"ltr",components:{},palette:_e({mode:"light"},i),spacing:l,shape:_e({},rUe,s)},o);return c=e.reduce((d,u)=>ll(d,u),c),c.unstable_sxConfig=_e({},XD,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(u){return YD({sx:u,theme:this})},c}function $Ue(t){return Object.keys(t).length===0}function XUe(t=null){const e=Z.useContext(RV);return!e||$Ue(e)?t:e}const YUe=BV();function KD(t=YUe){return XUe(t)}function KUe({styles:t,themeId:e,defaultTheme:n={}}){const i=KD(n),r=typeof t=="function"?t(e&&i[e]||i):t;return Te(Q4e,{styles:r})}const ZUe=["sx"],QUe=t=>{var e,n;const i={systemProps:{},otherProps:{}},r=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:XD;return Object.keys(t).forEach(s=>{r[s]?i.systemProps[s]=t[s]:i.otherProps[s]=t[s]}),i};function Hle(t){const{sx:e}=t,n=Dt(t,ZUe),{systemProps:i,otherProps:r}=QUe(n);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return im(a)?_e({},i,a):i}:s=_e({},i,e),_e({},r,{sx:s})}function jle(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=jle(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function qt(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=jle(t))&&(i&&(i+=" "),i+=e);return i}const JUe=["className","component"];function e5e(t={}){const{themeId:e,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:r}=t,s=zle("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(YD);return Z.forwardRef(function(l,c){const d=KD(n),u=Hle(l),{className:h,component:f="div"}=u,p=Dt(u,JUe);return Te(s,_e({as:f,ref:c,className:qt(h,r?r(i):i),theme:e&&d[e]||d},p))})}const t5e=["variant"];function nX(t){return t.length===0}function Gle(t){const{variant:e}=t,n=Dt(t,t5e);let i=e||"";return Object.keys(n).sort().forEach(r=>{r==="color"?i+=nX(i)?t[r]:Vt(t[r]):i+=`${nX(i)?r:Vt(r)}${Vt(t[r].toString())}`}),i}const n5e=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function i5e(t){return Object.keys(t).length===0}function r5e(t){return typeof t=="string"&&t.charCodeAt(0)>96}const s5e=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,o5e=(t,e)=>{let n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);const i={};return n.forEach(r=>{const s=Gle(r.props);i[s]=r.style}),i},a5e=(t,e,n,i)=>{var r,s;const{ownerState:o={}}=t,a=[],l=n==null||(r=n.components)==null||(s=r[i])==null?void 0:s.variants;return l&&l.forEach(c=>{let d=!0;Object.keys(c.props).forEach(u=>{o[u]!==c.props[u]&&t[u]!==c.props[u]&&(d=!1)}),d&&a.push(e[Gle(c.props)])}),a};function aw(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const l5e=BV();function B1({defaultTheme:t,theme:e,themeId:n}){return i5e(e)?t:e[n]||e}function c5e(t={}){const{themeId:e,defaultTheme:n=l5e,rootShouldForwardProp:i=aw,slotShouldForwardProp:r=aw}=t,s=o=>YD(_e({},o,{theme:B1(_e({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{J4e(o,b=>b.filter(w=>!(w!=null&&w.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:d,skipSx:u,overridesResolver:h}=a,f=Dt(a,n5e),p=d!==void 0?d:c&&c!=="Root"||!1,m=u||!1;let g,v=aw;c==="Root"?v=i:c?v=r:r5e(o)&&(v=void 0);const y=zle(o,_e({shouldForwardProp:v,label:g},f)),x=(b,...w)=>{const E=w?w.map(T=>typeof T=="function"&&T.__emotion_real!==T?P=>T(_e({},P,{theme:B1(_e({},P,{defaultTheme:n,themeId:e}))})):T):[];let A=b;l&&h&&E.push(T=>{const P=B1(_e({},T,{defaultTheme:n,themeId:e})),R=s5e(l,P);if(R){const L={};return Object.entries(R).forEach(([O,B])=>{L[O]=typeof B=="function"?B(_e({},T,{theme:P})):B}),h(T,L)}return null}),l&&!p&&E.push(T=>{const P=B1(_e({},T,{defaultTheme:n,themeId:e}));return a5e(T,o5e(l,P),P,l)}),m||E.push(s);const S=E.length-w.length;if(Array.isArray(b)&&S>0){const T=new Array(S).fill("");A=[...b,...T],A.raw=[...b.raw,...T]}else typeof b=="function"&&b.__emotion_real!==b&&(A=T=>b(_e({},T,{theme:B1(_e({},T,{defaultTheme:n,themeId:e}))})));const C=y(A,...E);return o.muiName&&(C.muiName=o.muiName),C};return y.withConfig&&(x.withConfig=y.withConfig),x}}function u5e(t){const{theme:e,name:n,props:i}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?i:MV(e.components[n].defaultProps,i)}function d5e({props:t,name:e,defaultTheme:n,themeId:i}){let r=KD(n);return i&&(r=r[i]||r),u5e({theme:r,name:e,props:t})}function zV(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function h5e(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function tg(t){if(t.type)return t;if(t.charAt(0)==="#")return tg(h5e(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(jf(9,t));let i=t.substring(e+1,t.length-1),r;if(n==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r)===-1)throw new Error(jf(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:n,values:i,colorSpace:r}}function ZD(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return e.indexOf("rgb")!==-1?i=i.map((r,s)=>s<3?parseInt(r,10):r):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function f5e(t){t=tg(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),o=(c,d=(c+n/30)%12)=>r-s*Math.max(Math.min(d-3,9-d,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),ZD({type:a,values:l})}function iX(t){t=tg(t);let e=t.type==="hsl"||t.type==="hsla"?tg(f5e(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function p5e(t,e){const n=iX(t),i=iX(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function Ns(t,e){return t=tg(t),e=zV(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,ZD(t)}function m5e(t,e){if(t=tg(t),e=zV(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return ZD(t)}function g5e(t,e){if(t=tg(t),e=zV(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return ZD(t)}function v5e(t,e){return _e({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const y5e=["mode","contrastThreshold","tonalOffset"],rX={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:x_.white,default:x_.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},JL={text:{primary:x_.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:x_.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function sX(t,e,n,i){const r=i.light||i,s=i.dark||i*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=g5e(t.main,r):e==="dark"&&(t.dark=m5e(t.main,s)))}function x5e(t="light"){return t==="dark"?{main:yv[200],light:yv[50],dark:yv[400]}:{main:yv[700],light:yv[400],dark:yv[800]}}function b5e(t="light"){return t==="dark"?{main:vv[200],light:vv[50],dark:vv[400]}:{main:vv[500],light:vv[300],dark:vv[700]}}function w5e(t="light"){return t==="dark"?{main:gv[500],light:gv[300],dark:gv[700]}:{main:gv[700],light:gv[400],dark:gv[800]}}function _5e(t="light"){return t==="dark"?{main:xv[400],light:xv[300],dark:xv[700]}:{main:xv[700],light:xv[500],dark:xv[900]}}function S5e(t="light"){return t==="dark"?{main:bv[400],light:bv[300],dark:bv[700]}:{main:bv[800],light:bv[500],dark:bv[900]}}function E5e(t="light"){return t==="dark"?{main:k1[400],light:k1[300],dark:k1[700]}:{main:"#ed6c02",light:k1[500],dark:k1[900]}}function M5e(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2}=t,r=Dt(t,y5e),s=t.primary||x5e(e),o=t.secondary||b5e(e),a=t.error||w5e(e),l=t.info||_5e(e),c=t.success||S5e(e),d=t.warning||E5e(e);function u(m){return p5e(m,JL.text.primary)>=n?JL.text.primary:rX.text.primary}const h=({color:m,name:g,mainShade:v=500,lightShade:y=300,darkShade:x=700})=>{if(m=_e({},m),!m.main&&m[v]&&(m.main=m[v]),!m.hasOwnProperty("main"))throw new Error(jf(11,g?` (${g})`:"",v));if(typeof m.main!="string")throw new Error(jf(12,g?` (${g})`:"",JSON.stringify(m.main)));return sX(m,"light",y,i),sX(m,"dark",x,i),m.contrastText||(m.contrastText=u(m.main)),m},f={dark:JL,light:rX};return ll(_e({common:_e({},x_),mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:d,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:GFe,contrastThreshold:n,getContrastText:u,augmentColor:h,tonalOffset:i},f[e]),r)}const A5e=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function T5e(t){return Math.round(t*1e5)/1e5}const oX={textTransform:"uppercase"},aX='"Roboto", "Helvetica", "Arial", sans-serif';function C5e(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:i=aX,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:u}=n,h=Dt(n,A5e),f=r/14,p=u||(v=>`${v/c*f}rem`),m=(v,y,x,b,w)=>_e({fontFamily:i,fontWeight:v,fontSize:p(y),lineHeight:x},i===aX?{letterSpacing:`${T5e(b/y)}em`}:{},w,d),g={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(a,14,1.75,.4,oX),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,oX),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ll(_e({htmlFontSize:c,pxToRem:p,fontFamily:i,fontSize:r,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},g),h,{clone:!1})}const P5e=.2,D5e=.14,R5e=.12;function wi(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${P5e})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${D5e})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${R5e})`].join(",")}const O5e=["none",wi(0,2,1,-1,0,1,1,0,0,1,3,0),wi(0,3,1,-2,0,2,2,0,0,1,5,0),wi(0,3,3,-2,0,3,4,0,0,1,8,0),wi(0,2,4,-1,0,4,5,0,0,1,10,0),wi(0,3,5,-1,0,5,8,0,0,1,14,0),wi(0,3,5,-1,0,6,10,0,0,1,18,0),wi(0,4,5,-2,0,7,10,1,0,2,16,1),wi(0,5,5,-3,0,8,10,1,0,3,14,2),wi(0,5,6,-3,0,9,12,1,0,3,16,2),wi(0,6,6,-3,0,10,14,1,0,4,18,3),wi(0,6,7,-4,0,11,15,1,0,4,20,3),wi(0,7,8,-4,0,12,17,2,0,5,22,4),wi(0,7,8,-4,0,13,19,2,0,5,24,4),wi(0,7,9,-4,0,14,21,2,0,5,26,4),wi(0,8,9,-5,0,15,22,2,0,6,28,5),wi(0,8,10,-5,0,16,24,2,0,6,30,5),wi(0,8,11,-5,0,17,26,2,0,6,32,5),wi(0,9,11,-5,0,18,28,2,0,7,34,6),wi(0,9,12,-6,0,19,29,2,0,7,36,6),wi(0,10,13,-6,0,20,31,3,0,8,38,7),wi(0,10,13,-6,0,21,33,3,0,8,40,7),wi(0,10,14,-6,0,22,35,3,0,8,42,7),wi(0,11,14,-7,0,23,36,3,0,9,44,8),wi(0,11,15,-7,0,24,38,3,0,9,46,8)],L5e=O5e,I5e=["duration","easing","delay"],k5e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},N5e={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function lX(t){return`${Math.round(t)}ms`}function B5e(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function z5e(t){const e=_e({},k5e,t.easing),n=_e({},N5e,t.duration);return _e({getAutoHeightDuration:B5e,create:(r=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Dt(s,I5e),(Array.isArray(r)?r:[r]).map(c=>`${c} ${typeof o=="string"?o:lX(o)} ${a} ${typeof l=="string"?l:lX(l)}`).join(",")}},t,{easing:e,duration:n})}const F5e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},U5e=F5e,V5e=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Wle(t={},...e){const{mixins:n={},palette:i={},transitions:r={},typography:s={}}=t,o=Dt(t,V5e);if(t.vars)throw new Error(jf(18));const a=M5e(i),l=BV(t);let c=ll(l,{mixins:v5e(l.breakpoints,n),palette:a,shadows:L5e.slice(),typography:C5e(a,s),transitions:z5e(r),zIndex:_e({},U5e)});return c=ll(c,o),c=e.reduce((d,u)=>ll(d,u),c),c.unstable_sxConfig=_e({},XD,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(u){return YD({sx:u,theme:this})},c}const H5e=Wle(),QD=H5e;function AS(){const t=KD(QD);return t[wS]||t}function ni({props:t,name:e}){return d5e({props:t,name:e,defaultTheme:QD,themeId:wS})}const hc=t=>aw(t)&&t!=="classes",j5e=aw,G5e=c5e({themeId:wS,defaultTheme:QD,rootShouldForwardProp:hc}),Pt=G5e,W5e=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},cX=W5e;function ng(t){return typeof t=="string"}function q5e(t,e,n){return t===void 0||ng(t)?e:_e({},e,{ownerState:_e({},e.ownerState,n)})}const $5e={disableDefaultClasses:!1},X5e=Z.createContext($5e);function Y5e(t){const{disableDefaultClasses:e}=Z.useContext(X5e);return n=>e?"":t(n)}function K5e(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(i=>i.match(/^on[A-Z]/)&&typeof t[i]=="function"&&!e.includes(i)).forEach(i=>{n[i]=t[i]}),n}function Fz(t,e){return typeof t=="function"?t(e):t}function uX(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function Z5e(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const f=qt(r==null?void 0:r.className,i==null?void 0:i.className,s,n==null?void 0:n.className),p=_e({},n==null?void 0:n.style,r==null?void 0:r.style,i==null?void 0:i.style),m=_e({},n,r,i);return f.length>0&&(m.className=f),Object.keys(p).length>0&&(m.style=p),{props:m,internalRef:void 0}}const o=K5e(_e({},r,i)),a=uX(i),l=uX(r),c=e(o),d=qt(c==null?void 0:c.className,n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),u=_e({},c==null?void 0:c.style,n==null?void 0:n.style,r==null?void 0:r.style,i==null?void 0:i.style),h=_e({},c,n,l,a);return d.length>0&&(h.className=d),Object.keys(u).length>0&&(h.style=u),{props:h,internalRef:c.ref}}const Q5e=["elementType","externalSlotProps","ownerState"];function i2(t){var e;const{elementType:n,externalSlotProps:i,ownerState:r}=t,s=Dt(t,Q5e),o=Fz(i,r),{props:a,internalRef:l}=Z5e(_e({},s,{externalSlotProps:o})),c=es(l,o==null?void 0:o.ref,(e=t.additionalProps)==null?void 0:e.ref);return q5e(n,_e({},a,{ref:c}),r)}const J5e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function eVe(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function tVe(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=i=>t.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function nVe(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||tVe(t))}function iVe(t){const e=[],n=[];return Array.from(t.querySelectorAll(J5e)).forEach((i,r)=>{const s=eVe(i);s===-1||!nVe(i)||(s===0?e.push(i):n.push({documentOrder:r,tabIndex:s,node:i}))}),n.sort((i,r)=>i.tabIndex===r.tabIndex?i.documentOrder-r.documentOrder:i.tabIndex-r.tabIndex).map(i=>i.node).concat(e)}function rVe(){return!0}function sVe(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:r=!1,getTabbable:s=iVe,isEnabled:o=rVe,open:a}=t,l=Z.useRef(!1),c=Z.useRef(null),d=Z.useRef(null),u=Z.useRef(null),h=Z.useRef(null),f=Z.useRef(!1),p=Z.useRef(null),m=es(e.ref,p),g=Z.useRef(null);Z.useEffect(()=>{!a||!p.current||(f.current=!n)},[n,a]),Z.useEffect(()=>{if(!a||!p.current)return;const x=No(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{r||(u.current&&u.current.focus&&(l.current=!0,u.current.focus()),u.current=null)}},[a]),Z.useEffect(()=>{if(!a||!p.current)return;const x=No(p.current),b=A=>{const{current:S}=p;if(S!==null){if(!x.hasFocus()||i||!o()||l.current){l.current=!1;return}if(!S.contains(x.activeElement)){if(A&&h.current!==A.target||x.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let P=[];if((x.activeElement===c.current||x.activeElement===d.current)&&(P=s(p.current)),P.length>0){var C,T;const R=Boolean(((C=g.current)==null?void 0:C.shiftKey)&&((T=g.current)==null?void 0:T.key)==="Tab"),L=P[0],O=P[P.length-1];typeof L!="string"&&typeof O!="string"&&(R?O.focus():L.focus())}else S.focus()}}},w=A=>{g.current=A,!(i||!o()||A.key!=="Tab")&&x.activeElement===p.current&&A.shiftKey&&(l.current=!0,d.current&&d.current.focus())};x.addEventListener("focusin",b),x.addEventListener("keydown",w,!0);const E=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&b(null)},50);return()=>{clearInterval(E),x.removeEventListener("focusin",b),x.removeEventListener("keydown",w,!0)}},[n,i,r,o,a,s]);const v=x=>{u.current===null&&(u.current=x.relatedTarget),f.current=!0,h.current=x.target;const b=e.props.onFocus;b&&b(x)},y=x=>{u.current===null&&(u.current=x.relatedTarget),f.current=!0};return jt(Z.Fragment,{children:[Te("div",{tabIndex:a?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),Z.cloneElement(e,{ref:m,onFocus:v}),Te("div",{tabIndex:a?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})}function oVe(t){return typeof t=="function"?t():t}const aVe=Z.forwardRef(function(e,n){const{children:i,container:r,disablePortal:s=!1}=e,[o,a]=Z.useState(null),l=es(Z.isValidElement(i)?i.ref:null,n);if(Nd(()=>{s||a(oVe(r)||document.body)},[r,s]),Nd(()=>{if(o&&!s)return e2(n,o),()=>{e2(n,null)}},[n,o,s]),s){if(Z.isValidElement(i)){const c={ref:l};return Z.cloneElement(i,c)}return Te(Z.Fragment,{children:i})}return Te(Z.Fragment,{children:o&&du.createPortal(i,o)})}),lVe=aVe;function cVe(t){const e=No(t);return e.body===t?fu(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function lw(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function dX(t){return parseInt(fu(t).getComputedStyle(t).paddingRight,10)||0}function uVe(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,i=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||i}function hX(t,e,n,i,r){const s=[e,n,...i];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!uVe(o);a&&l&&lw(o,r)})}function eI(t,e){let n=-1;return t.some((i,r)=>e(i)?(n=r,!0):!1),n}function dVe(t,e){const n=[],i=t.container;if(!e.disableScrollLock){if(cVe(i)){const o=Sle(No(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${dX(i)+o}px`;const a=No(i).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${dX(l)+o}px`})}let s;if(i.parentNode instanceof DocumentFragment)s=No(i).body;else{const o=i.parentElement,a=fu(i);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:i}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function hVe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class fVe{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&lw(e.modalRef,!1);const r=hVe(n);hX(n,e.mount,e.modalRef,r,!0);const s=eI(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),i):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:r}),i)}mount(e,n){const i=eI(this.containers,s=>s.modals.indexOf(e)!==-1),r=this.containers[i];r.restore||(r.restore=dVe(r,n))}remove(e,n=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const r=eI(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[r];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(i,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&lw(e.modalRef,n),hX(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(r,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&lw(o.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function pVe(t){return Xn("MuiModal",t)}Yn("MuiModal",["root","hidden","backdrop"]);const mVe=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],gVe=t=>{const{open:e,exited:n}=t;return ti({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},Y5e(pVe))};function vVe(t){return typeof t=="function"?t():t}function yVe(t){return t?t.props.hasOwnProperty("in"):!1}const xVe=new fVe,bVe=Z.forwardRef(function(e,n){var i,r;const{children:s,closeAfterTransition:o=!1,container:a,disableAutoFocus:l=!1,disableEnforceFocus:c=!1,disableEscapeKeyDown:d=!1,disablePortal:u=!1,disableRestoreFocus:h=!1,disableScrollLock:f=!1,hideBackdrop:p=!1,keepMounted:m=!1,manager:g=xVe,onBackdropClick:v,onClose:y,onKeyDown:x,open:b,onTransitionEnter:w,onTransitionExited:E,slotProps:A={},slots:S={}}=e,C=Dt(e,mVe),T=g,[P,R]=Z.useState(!b),L=Z.useRef({}),O=Z.useRef(null),B=Z.useRef(null),$=es(B,n),X=yVe(s),H=(i=e["aria-hidden"])!=null?i:!0,U=()=>No(O.current),N=()=>(L.current.modalRef=B.current,L.current.mountNode=O.current,L.current),k=()=>{T.mount(N(),{disableScrollLock:f}),B.current&&(B.current.scrollTop=0)},z=xm(()=>{const Le=vVe(a)||U().body;T.add(N(),Le),B.current&&k()}),W=Z.useCallback(()=>T.isTopModal(N()),[T]),K=xm(Le=>{O.current=Le,!(!Le||!B.current)&&(b&&W()?k():lw(B.current,H))}),J=Z.useCallback(()=>{T.remove(N(),H)},[T,H]);Z.useEffect(()=>()=>{J()},[J]),Z.useEffect(()=>{b?z():(!X||!o)&&J()},[b,J,X,o,z]);const F=_e({},e,{closeAfterTransition:o,disableAutoFocus:l,disableEnforceFocus:c,disableEscapeKeyDown:d,disablePortal:u,disableRestoreFocus:h,disableScrollLock:f,exited:P,hideBackdrop:p,keepMounted:m}),ee=gVe(F),ie=()=>{R(!1),w&&w()},te=()=>{R(!0),E&&E(),o&&J()},re=Le=>{Le.target===Le.currentTarget&&(v&&v(Le),y&&y(Le,"backdropClick"))},me=Le=>{x&&x(Le),!(Le.key!=="Escape"||!W())&&(d||(Le.stopPropagation(),y&&y(Le,"escapeKeyDown")))},se={};s.props.tabIndex===void 0&&(se.tabIndex="-1"),X&&(se.onEnter=Lz(ie,s.props.onEnter),se.onExited=Lz(te,s.props.onExited));const oe=(r=S.root)!=null?r:"div",be=i2({elementType:oe,externalSlotProps:A.root,externalForwardedProps:C,additionalProps:{ref:$,role:"presentation",onKeyDown:me},className:ee.root,ownerState:F}),Ae=S.backdrop,Ie=i2({elementType:Ae,externalSlotProps:A.backdrop,additionalProps:{"aria-hidden":!0,onClick:re,open:b},className:ee.backdrop,ownerState:F});return!m&&!b&&(!X||P)?null:Te(lVe,{ref:K,container:a,disablePortal:u,children:jt(oe,_e({},be,{children:[!p&&Ae?Te(Ae,_e({},Ie)):null,Te(sVe,{disableEnforceFocus:c,disableAutoFocus:l,disableRestoreFocus:h,isEnabled:W,open:b,children:Z.cloneElement(s,se)})]}))})}),wVe=bVe,_Ve=["onChange","maxRows","minRows","style","value"];function ZM(t){return parseInt(t,10)||0}const SVe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function fX(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const EVe=Z.forwardRef(function(e,n){const{onChange:i,maxRows:r,minRows:s=1,style:o,value:a}=e,l=Dt(e,_Ve),{current:c}=Z.useRef(a!=null),d=Z.useRef(null),u=es(n,d),h=Z.useRef(null),f=Z.useRef(0),[p,m]=Z.useState({outerHeightStyle:0}),g=Z.useCallback(()=>{const w=d.current,A=fu(w).getComputedStyle(w);if(A.width==="0px")return{outerHeightStyle:0};const S=h.current;S.style.width=A.width,S.value=w.value||e.placeholder||"x",S.value.slice(-1)===`
`&&(S.value+=" ");const C=A.boxSizing,T=ZM(A.paddingBottom)+ZM(A.paddingTop),P=ZM(A.borderBottomWidth)+ZM(A.borderTopWidth),R=S.scrollHeight;S.value="x";const L=S.scrollHeight;let O=R;s&&(O=Math.max(Number(s)*L,O)),r&&(O=Math.min(Number(r)*L,O)),O=Math.max(O,L);const B=O+(C==="border-box"?T+P:0),$=Math.abs(O-R)<=1;return{outerHeightStyle:B,overflow:$}},[r,s,e.placeholder]),v=(w,E)=>{const{outerHeightStyle:A,overflow:S}=E;return f.current<20&&(A>0&&Math.abs((w.outerHeightStyle||0)-A)>1||w.overflow!==S)?(f.current+=1,{overflow:S,outerHeightStyle:A}):w},y=Z.useCallback(()=>{const w=g();fX(w)||m(E=>v(E,w))},[g]),x=()=>{const w=g();fX(w)||du.flushSync(()=>{m(E=>v(E,w))})};Z.useEffect(()=>{const w=BD(()=>{f.current=0,d.current&&x()});let E;const A=d.current,S=fu(A);return S.addEventListener("resize",w),typeof ResizeObserver<"u"&&(E=new ResizeObserver(w),E.observe(A)),()=>{w.clear(),S.removeEventListener("resize",w),E&&E.disconnect()}}),Nd(()=>{y()}),Z.useEffect(()=>{f.current=0},[a]);const b=w=>{f.current=0,c||y(),i&&i(w)};return jt(Z.Fragment,{children:[Te("textarea",_e({value:a,onChange:b,ref:u,rows:s,style:_e({height:p.outerHeightStyle,overflow:p.overflow?"hidden":void 0},o)},l)),Te("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:_e({},SVe.shadow,o,{padding:0})})]})}),MVe=EVe;function AVe(t){return Xn("MuiSvgIcon",t)}Yn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const TVe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],CVe=t=>{const{color:e,fontSize:n,classes:i}=t,r={root:["root",e!=="inherit"&&`color${Vt(e)}`,`fontSize${Vt(n)}`]};return ti(r,AVe,i)},PVe=Pt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Vt(n.color)}`],e[`fontSize${Vt(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,i,r,s,o,a,l,c,d,u,h,f,p,m,g,v,y;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(i=n.create)==null?void 0:i.call(n,"fill",{duration:(r=t.transitions)==null||(s=r.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=t.typography)==null||(a=o.pxToRem)==null?void 0:a.call(o,20))||"1.25rem",medium:((l=t.typography)==null||(c=l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem",large:((d=t.typography)==null||(u=d.pxToRem)==null?void 0:u.call(d,35))||"2.1875rem"}[e.fontSize],color:(h=(f=(t.vars||t).palette)==null||(p=f[e.color])==null?void 0:p.main)!=null?h:{action:(m=(t.vars||t).palette)==null||(g=m.action)==null?void 0:g.active,disabled:(v=(t.vars||t).palette)==null||(y=v.action)==null?void 0:y.disabled,inherit:void 0}[e.color]}}),qle=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:d=!1,titleAccess:u,viewBox:h="0 0 24 24"}=i,f=Dt(i,TVe),p=_e({},i,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:h}),m={};d||(m.viewBox=h);const g=CVe(p);return jt(PVe,_e({as:a,className:qt(g.root,s),focusable:"false",color:c,"aria-hidden":u?void 0:!0,role:u?"img":void 0,ref:n},m,f,{ownerState:p,children:[r,u?Te("title",{children:u}):null]}))});qle.muiName="SvgIcon";const pX=qle;function $le(t,e){function n(i,r){return Te(pX,_e({"data-testid":`${e}Icon`,ref:r},i,{children:t}))}return n.muiName=pX.muiName,Z.memo(Z.forwardRef(n))}const DVe={configure:t=>{AV.configure(t)}},RVe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Vt,createChainedFunction:Lz,createSvgIcon:$le,debounce:BD,deprecatedPropType:WFe,isMuiElement:sw,ownerDocument:No,ownerWindow:fu,requirePropFactory:qFe,setRef:e2,unstable_ClassNameGenerator:DVe,unstable_useEnhancedEffect:Nd,unstable_useId:EV,unsupportedProp:YFe,useControlled:Iz,useEventCallback:xm,useForkRef:es,useIsFocusVisible:_le},Symbol.toStringTag,{value:"Module"}));function Uz(t,e){return Uz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Uz(t,e)}function Xle(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Uz(t,e)}const mX={disabled:!1},r2=ks.createContext(null);var OVe=function(e){return e.scrollTop},Db="unmounted",$p="exited",Xp="entering",Qv="entered",Vz="exiting",Kd=function(t){Xle(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var o=r,a=o&&!o.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?a?(l=$p,s.appearStatus=Xp):l=Qv:i.unmountOnExit||i.mountOnEnter?l=Db:l=$p,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===Db?{status:$p}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Xp&&o!==Qv&&(s=Xp):(o===Xp||o===Qv)&&(s=Vz)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,o,a;return s=o=a=r,r!=null&&typeof r!="number"&&(s=r.exit,o=r.enter,a=r.appear!==void 0?r.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===Xp){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:nM.findDOMNode(this);o&&OVe(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===$p&&this.setState({status:Db})},n.performEnter=function(r){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:r,l=this.props.nodeRef?[a]:[nM.findDOMNode(this),a],c=l[0],d=l[1],u=this.getTimeouts(),h=a?u.appear:u.enter;if(!r&&!o||mX.disabled){this.safeSetState({status:Qv},function(){s.props.onEntered(c)});return}this.props.onEnter(c,d),this.safeSetState({status:Xp},function(){s.props.onEntering(c,d),s.onTransitionEnd(h,function(){s.safeSetState({status:Qv},function(){s.props.onEntered(c,d)})})})},n.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:nM.findDOMNode(this);if(!s||mX.disabled){this.safeSetState({status:$p},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Vz},function(){r.props.onExiting(a),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:$p},function(){r.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,r(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:nM.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],d=l[1];this.props.addEndListener(c,d)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Db)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Dt(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ks.createElement(r2.Provider,{value:null},typeof o=="function"?o(r,a):ks.cloneElement(ks.Children.only(o),a))},e}(ks.Component);Kd.contextType=r2;Kd.propTypes={};function wv(){}Kd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wv,onEntering:wv,onEntered:wv,onExit:wv,onExiting:wv,onExited:wv};Kd.UNMOUNTED=Db;Kd.EXITED=$p;Kd.ENTERING=Xp;Kd.ENTERED=Qv;Kd.EXITING=Vz;const FV=Kd;function LVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UV(t,e){var n=function(s){return e&&Z.isValidElement(s)?e(s):s},i=Object.create(null);return t&&Z.Children.map(t,function(r){return r}).forEach(function(r){i[r.key]=n(r)}),i}function IVe(t,e){t=t||{},e=e||{};function n(d){return d in e?e[d]:t[d]}var i=Object.create(null),r=[];for(var s in t)s in e?r.length&&(i[s]=r,r=[]):r.push(s);var o,a={};for(var l in e){if(i[l])for(o=0;o<i[l].length;o++){var c=i[l][o];a[i[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<r.length;o++)a[r[o]]=n(r[o]);return a}function bm(t,e,n){return n[e]!=null?n[e]:t.props[e]}function kVe(t,e){return UV(t.children,function(n){return Z.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:bm(n,"appear",t),enter:bm(n,"enter",t),exit:bm(n,"exit",t)})})}function NVe(t,e,n){var i=UV(t.children),r=IVe(e,i);return Object.keys(r).forEach(function(s){var o=r[s];if(Z.isValidElement(o)){var a=s in e,l=s in i,c=e[s],d=Z.isValidElement(c)&&!c.props.in;l&&(!a||d)?r[s]=Z.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:bm(o,"exit",t),enter:bm(o,"enter",t)}):!l&&a&&!d?r[s]=Z.cloneElement(o,{in:!1}):l&&a&&Z.isValidElement(c)&&(r[s]=Z.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:bm(o,"exit",t),enter:bm(o,"enter",t)}))}}),r}var BVe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},zVe={component:"div",childFactory:function(e){return e}},VV=function(t){Xle(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var o=s.handleExited.bind(LVe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?kVe(r,a):NVe(r,o,a),firstRender:!1}},n.handleExited=function(r,s){var o=UV(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(a){var l=_e({},a.children);return delete l[r.key],{children:l}}))},n.render=function(){var r=this.props,s=r.component,o=r.childFactory,a=Dt(r,["component","childFactory"]),l=this.state.contextValue,c=BVe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ks.createElement(r2.Provider,{value:l},c):ks.createElement(r2.Provider,{value:l},ks.createElement(s,a,c))},e}(ks.Component);VV.propTypes={};VV.defaultProps=zVe;const FVe=VV,HV=t=>t.scrollTop;function Ny(t,e){var n,i;const{timeout:r,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof r=="number"?r:r[e.mode]||0,easing:(i=o.transitionTimingFunction)!=null?i:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function UVe(t){return Xn("MuiPaper",t)}Yn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const VVe=["className","component","elevation","square","variant"],HVe=t=>{const{square:e,elevation:n,variant:i,classes:r}=t,s={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${n}`]};return ti(s,UVe,r)},jVe=Pt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return _e({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&_e({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Ns("#fff",cX(e.elevation))}, ${Ns("#fff",cX(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),GVe=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiPaper"}),{className:r,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=i,c=Dt(i,VVe),d=_e({},i,{component:s,elevation:o,square:a,variant:l}),u=HVe(d);return Te(jVe,_e({as:s,ownerState:d,className:qt(u.root,r),ref:n},c))}),Yle=GVe;function WVe(t){const{className:e,classes:n,pulsate:i=!1,rippleX:r,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[d,u]=Z.useState(!1),h=qt(e,n.ripple,n.rippleVisible,i&&n.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+r},p=qt(n.child,d&&n.childLeaving,i&&n.childPulsate);return!a&&!d&&u(!0),Z.useEffect(()=>{if(!a&&l!=null){const m=setTimeout(l,c);return()=>{clearTimeout(m)}}},[l,a,c]),Te("span",{className:h,style:f,children:Te("span",{className:p})})}const qVe=Yn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Za=qVe,$Ve=["center","classes","className"];let JD=t=>t,gX,vX,yX,xX;const Hz=550,XVe=80,YVe=SS(gX||(gX=JD`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),KVe=SS(vX||(vX=JD`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),ZVe=SS(yX||(yX=JD`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),QVe=Pt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),JVe=Pt(WVe,{name:"MuiTouchRipple",slot:"Ripple"})(xX||(xX=JD`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Za.rippleVisible,YVe,Hz,({theme:t})=>t.transitions.easing.easeInOut,Za.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Za.child,Za.childLeaving,KVe,Hz,({theme:t})=>t.transitions.easing.easeInOut,Za.childPulsate,ZVe,({theme:t})=>t.transitions.easing.easeInOut),eHe=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:o}=i,a=Dt(i,$Ve),[l,c]=Z.useState([]),d=Z.useRef(0),u=Z.useRef(null);Z.useEffect(()=>{u.current&&(u.current(),u.current=null)},[l]);const h=Z.useRef(!1),f=Z.useRef(null),p=Z.useRef(null),m=Z.useRef(null);Z.useEffect(()=>()=>{clearTimeout(f.current)},[]);const g=Z.useCallback(b=>{const{pulsate:w,rippleX:E,rippleY:A,rippleSize:S,cb:C}=b;c(T=>[...T,Te(JVe,{classes:{ripple:qt(s.ripple,Za.ripple),rippleVisible:qt(s.rippleVisible,Za.rippleVisible),ripplePulsate:qt(s.ripplePulsate,Za.ripplePulsate),child:qt(s.child,Za.child),childLeaving:qt(s.childLeaving,Za.childLeaving),childPulsate:qt(s.childPulsate,Za.childPulsate)},timeout:Hz,pulsate:w,rippleX:E,rippleY:A,rippleSize:S},d.current)]),d.current+=1,u.current=C},[s]),v=Z.useCallback((b={},w={},E=()=>{})=>{const{pulsate:A=!1,center:S=r||w.pulsate,fakeElement:C=!1}=w;if((b==null?void 0:b.type)==="mousedown"&&h.current){h.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(h.current=!0);const T=C?null:m.current,P=T?T.getBoundingClientRect():{width:0,height:0,left:0,top:0};let R,L,O;if(S||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)R=Math.round(P.width/2),L=Math.round(P.height/2);else{const{clientX:B,clientY:$}=b.touches&&b.touches.length>0?b.touches[0]:b;R=Math.round(B-P.left),L=Math.round($-P.top)}if(S)O=Math.sqrt((2*P.width**2+P.height**2)/3),O%2===0&&(O+=1);else{const B=Math.max(Math.abs((T?T.clientWidth:0)-R),R)*2+2,$=Math.max(Math.abs((T?T.clientHeight:0)-L),L)*2+2;O=Math.sqrt(B**2+$**2)}b!=null&&b.touches?p.current===null&&(p.current=()=>{g({pulsate:A,rippleX:R,rippleY:L,rippleSize:O,cb:E})},f.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},XVe)):g({pulsate:A,rippleX:R,rippleY:L,rippleSize:O,cb:E})},[r,g]),y=Z.useCallback(()=>{v({},{pulsate:!0})},[v]),x=Z.useCallback((b,w)=>{if(clearTimeout(f.current),(b==null?void 0:b.type)==="touchend"&&p.current){p.current(),p.current=null,f.current=setTimeout(()=>{x(b,w)});return}p.current=null,c(E=>E.length>0?E.slice(1):E),u.current=w},[]);return Z.useImperativeHandle(n,()=>({pulsate:y,start:v,stop:x}),[y,v,x]),Te(QVe,_e({className:qt(Za.root,s.root,o),ref:m},a,{children:Te(FVe,{component:null,exit:!0,children:l})}))}),tHe=eHe;function nHe(t){return Xn("MuiButtonBase",t)}const iHe=Yn("MuiButtonBase",["root","disabled","focusVisible"]),rHe=iHe,sHe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],oHe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,o=ti({root:["root",e&&"disabled",n&&"focusVisible"]},nHe,r);return n&&i&&(o.root+=` ${i}`),o},aHe=Pt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${rHe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),lHe=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:d=!1,disableTouchRipple:u=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:x,onKeyDown:b,onKeyUp:w,onMouseDown:E,onMouseLeave:A,onMouseUp:S,onTouchEnd:C,onTouchMove:T,onTouchStart:P,tabIndex:R=0,TouchRippleProps:L,touchRippleRef:O,type:B}=i,$=Dt(i,sHe),X=Z.useRef(null),H=Z.useRef(null),U=es(H,O),{isFocusVisibleRef:N,onFocus:k,onBlur:z,ref:W}=_le(),[K,J]=Z.useState(!1);c&&K&&J(!1),Z.useImperativeHandle(r,()=>({focusVisible:()=>{J(!0),X.current.focus()}}),[]);const[F,ee]=Z.useState(!1);Z.useEffect(()=>{ee(!0)},[]);const ie=F&&!d&&!c;Z.useEffect(()=>{K&&h&&!d&&F&&H.current.pulsate()},[d,h,K,F]);function te(Pe,ae,Fe=u){return xm(he=>(ae&&ae(he),!Fe&&H.current&&H.current[Pe](he),!0))}const re=te("start",E),me=te("stop",g),se=te("stop",v),oe=te("stop",S),be=te("stop",Pe=>{K&&Pe.preventDefault(),A&&A(Pe)}),Ae=te("start",P),Ie=te("stop",C),Le=te("stop",T),fe=te("stop",Pe=>{z(Pe),N.current===!1&&J(!1),p&&p(Pe)},!1),ve=xm(Pe=>{X.current||(X.current=Pe.currentTarget),k(Pe),N.current===!0&&(J(!0),x&&x(Pe)),y&&y(Pe)}),ke=()=>{const Pe=X.current;return l&&l!=="button"&&!(Pe.tagName==="A"&&Pe.href)},ze=Z.useRef(!1),j=xm(Pe=>{h&&!ze.current&&K&&H.current&&Pe.key===" "&&(ze.current=!0,H.current.stop(Pe,()=>{H.current.start(Pe)})),Pe.target===Pe.currentTarget&&ke()&&Pe.key===" "&&Pe.preventDefault(),b&&b(Pe),Pe.target===Pe.currentTarget&&ke()&&Pe.key==="Enter"&&!c&&(Pe.preventDefault(),m&&m(Pe))}),V=xm(Pe=>{h&&Pe.key===" "&&H.current&&K&&!Pe.defaultPrevented&&(ze.current=!1,H.current.stop(Pe,()=>{H.current.pulsate(Pe)})),w&&w(Pe),m&&Pe.target===Pe.currentTarget&&ke()&&Pe.key===" "&&!Pe.defaultPrevented&&m(Pe)});let le=l;le==="button"&&($.href||$.to)&&(le=f);const xe={};le==="button"?(xe.type=B===void 0?"button":B,xe.disabled=c):(!$.href&&!$.to&&(xe.role="button"),c&&(xe["aria-disabled"]=c));const De=es(n,W,X),Ne=_e({},i,{centerRipple:s,component:l,disabled:c,disableRipple:d,disableTouchRipple:u,focusRipple:h,tabIndex:R,focusVisible:K}),He=oHe(Ne);return jt(aHe,_e({as:le,className:qt(He.root,a),ownerState:Ne,onBlur:fe,onClick:m,onContextMenu:me,onFocus:ve,onKeyDown:j,onKeyUp:V,onMouseDown:re,onMouseLeave:be,onMouseUp:oe,onDragLeave:se,onTouchEnd:Ie,onTouchMove:Le,onTouchStart:Ae,ref:De,tabIndex:c?-1:R,type:B},xe,$,{children:[o,ie?Te(tHe,_e({ref:U,center:s},L)):null]}))}),eR=lHe;function cHe(t){return Xn("MuiIconButton",t)}const uHe=Yn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),dHe=uHe,hHe=["edge","children","className","color","disabled","disableFocusRipple","size"],fHe=t=>{const{classes:e,disabled:n,color:i,edge:r,size:s}=t,o={root:["root",n&&"disabled",i!=="default"&&`color${Vt(i)}`,r&&`edge${Vt(r)}`,`size${Vt(s)}`]};return ti(o,cHe,e)},pHe=Pt(eR,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Vt(n.color)}`],n.edge&&e[`edge${Vt(n.edge)}`],e[`size${Vt(n.size)}`]]}})(({theme:t,ownerState:e})=>_e({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Ns(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const i=(n=(t.vars||t).palette)==null?void 0:n[e.color];return _e({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&_e({color:i==null?void 0:i.main},!e.disableRipple&&{"&:hover":_e({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ns(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${dHe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),mHe=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiIconButton"}),{edge:r=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:d="medium"}=i,u=Dt(i,hHe),h=_e({},i,{edge:r,color:a,disabled:l,disableFocusRipple:c,size:d}),f=fHe(h);return Te(pHe,_e({className:qt(f.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:h},u,{children:s}))}),S_=mHe;function gHe(t){return Xn("MuiTypography",t)}Yn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const vHe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],yHe=t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${Vt(e)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return ti(a,gHe,o)},xHe=Pt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Vt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>_e({margin:0},e.variant&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),bX={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},bHe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},wHe=t=>bHe[t]||t,_He=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiTypography"}),r=wHe(i.color),s=Hle(_e({},i,{color:r})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:d=!1,paragraph:u=!1,variant:h="body1",variantMapping:f=bX}=s,p=Dt(s,vHe),m=_e({},s,{align:o,color:r,className:a,component:l,gutterBottom:c,noWrap:d,paragraph:u,variant:h,variantMapping:f}),g=l||(u?"p":f[h]||bX[h])||"span",v=yHe(m);return Te(xHe,_e({as:g,ref:n,ownerState:m,className:qt(v.root,a)},p))}),z1=_He;function Ex({props:t,states:e,muiFormControl:n}){return e.reduce((i,r)=>(i[r]=t[r],n&&typeof t[r]>"u"&&(i[r]=n[r]),i),{})}const SHe=Z.createContext(void 0),jV=SHe;function Mx(){return Z.useContext(jV)}function EHe(t){return Te(KUe,_e({},t,{defaultTheme:QD,themeId:wS}))}function wX(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function s2(t,e=!1){return t&&(wX(t.value)&&t.value!==""||e&&wX(t.defaultValue)&&t.defaultValue!=="")}function MHe(t){return t.startAdornment}function AHe(t){return Xn("MuiInputBase",t)}const THe=Yn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),By=THe,CHe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],tR=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Vt(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},nR=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},PHe=t=>{const{classes:e,color:n,disabled:i,error:r,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:d,readOnly:u,size:h,startAdornment:f,type:p}=t,m={root:["root",`color${Vt(n)}`,i&&"disabled",r&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",h==="small"&&"sizeSmall",d&&"multiline",f&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",u&&"readOnly"],input:["input",i&&"disabled",p==="search"&&"inputTypeSearch",d&&"inputMultiline",h==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",u&&"readOnly"]};return ti(m,AHe,e)},iR=Pt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:tR})(({theme:t,ownerState:e})=>_e({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${By.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&_e({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),rR=Pt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:nR})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",i=_e({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),r={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return _e({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${By.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${By.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),DHe=Te(EHe,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),RHe=Z.forwardRef(function(e,n){var i;const r=ni({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:d={},defaultValue:u,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:x,maxRows:b,minRows:w,multiline:E=!1,name:A,onBlur:S,onChange:C,onClick:T,onFocus:P,onKeyDown:R,onKeyUp:L,placeholder:O,readOnly:B,renderSuffix:$,rows:X,slotProps:H={},slots:U={},startAdornment:N,type:k="text",value:z}=r,W=Dt(r,CHe),K=y.value!=null?y.value:z,{current:J}=Z.useRef(K!=null),F=Z.useRef(),ee=Z.useCallback(He=>{},[]),ie=es(F,x,y.ref,ee),[te,re]=Z.useState(!1),me=Mx(),se=Ex({props:r,muiFormControl:me,states:["color","disabled","error","hiddenLabel","size","required","filled"]});se.focused=me?me.focused:te,Z.useEffect(()=>{!me&&h&&te&&(re(!1),S&&S())},[me,h,te,S]);const oe=me&&me.onFilled,be=me&&me.onEmpty,Ae=Z.useCallback(He=>{s2(He)?oe&&oe():be&&be()},[oe,be]);Nd(()=>{J&&Ae({value:K})},[K,Ae,J]);const Ie=He=>{if(se.disabled){He.stopPropagation();return}P&&P(He),y.onFocus&&y.onFocus(He),me&&me.onFocus?me.onFocus(He):re(!0)},Le=He=>{S&&S(He),y.onBlur&&y.onBlur(He),me&&me.onBlur?me.onBlur(He):re(!1)},fe=(He,...Pe)=>{if(!J){const ae=He.target||F.current;if(ae==null)throw new Error(jf(1));Ae({value:ae.value})}y.onChange&&y.onChange(He,...Pe),C&&C(He,...Pe)};Z.useEffect(()=>{Ae(F.current)},[]);const ve=He=>{F.current&&He.currentTarget===He.target&&F.current.focus(),T&&!se.disabled&&T(He)};let ke=v,ze=y;E&&ke==="input"&&(X?ze=_e({type:void 0,minRows:X,maxRows:X},ze):ze=_e({type:void 0,maxRows:b,minRows:w},ze),ke=MVe);const j=He=>{Ae(He.animationName==="mui-auto-fill-cancel"?F.current:{value:"x"})};Z.useEffect(()=>{me&&me.setAdornedStart(Boolean(N))},[me,N]);const V=_e({},r,{color:se.color||"primary",disabled:se.disabled,endAdornment:p,error:se.error,focused:se.focused,formControl:me,fullWidth:m,hiddenLabel:se.hiddenLabel,multiline:E,size:se.size,startAdornment:N,type:k}),le=PHe(V),xe=U.root||c.Root||iR,De=H.root||d.root||{},Ne=U.input||c.Input||rR;return ze=_e({},ze,(i=H.input)!=null?i:d.input),jt(Z.Fragment,{children:[!f&&DHe,jt(xe,_e({},De,!ng(xe)&&{ownerState:_e({},V,De.ownerState)},{ref:n,onClick:ve},W,{className:qt(le.root,De.className,l,B&&"MuiInputBase-readOnly"),children:[N,Te(jV.Provider,{value:null,children:Te(Ne,_e({ownerState:V,"aria-invalid":se.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:u,disabled:se.disabled,id:g,onAnimationStart:j,name:A,placeholder:O,readOnly:B,required:se.required,rows:X,value:K,onKeyDown:R,onKeyUp:L,type:k},ze,!ng(Ne)&&{as:ke,ownerState:_e({},V,ze.ownerState)},{ref:ie,className:qt(le.input,ze.className,B&&"MuiInputBase-readOnly"),onBlur:Le,onChange:fe,onFocus:Ie}))}),p,$?$(_e({},se,{startAdornment:N})):null]}))]})}),GV=RHe;function OHe(t){return Xn("MuiInput",t)}const LHe=_e({},By,Yn("MuiInput",["root","underline","input"])),F1=LHe;function IHe(t){return Xn("MuiOutlinedInput",t)}const kHe=_e({},By,Yn("MuiOutlinedInput",["root","notchedOutline","input"])),bh=kHe;function NHe(t){return Xn("MuiFilledInput",t)}const BHe=_e({},By,Yn("MuiFilledInput",["root","underline","input"])),Cp=BHe,zHe=$le(Te("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),FHe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],UHe={entering:{opacity:1},entered:{opacity:1}},VHe=Z.forwardRef(function(e,n){const i=AS(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:d,onEntered:u,onEntering:h,onExit:f,onExited:p,onExiting:m,style:g,timeout:v=r,TransitionComponent:y=FV}=e,x=Dt(e,FHe),b=Z.useRef(null),w=es(b,a.ref,n),E=O=>B=>{if(O){const $=b.current;B===void 0?O($):O($,B)}},A=E(h),S=E((O,B)=>{HV(O);const $=Ny({style:g,timeout:v,easing:l},{mode:"enter"});O.style.webkitTransition=i.transitions.create("opacity",$),O.style.transition=i.transitions.create("opacity",$),d&&d(O,B)}),C=E(u),T=E(m),P=E(O=>{const B=Ny({style:g,timeout:v,easing:l},{mode:"exit"});O.style.webkitTransition=i.transitions.create("opacity",B),O.style.transition=i.transitions.create("opacity",B),f&&f(O)}),R=E(p);return Te(y,_e({appear:o,in:c,nodeRef:b,onEnter:S,onEntered:C,onEntering:A,onExit:P,onExited:R,onExiting:T,addEndListener:O=>{s&&s(b.current,O)},timeout:v},x,{children:(O,B)=>Z.cloneElement(a,_e({style:_e({opacity:0,visibility:O==="exited"&&!c?"hidden":void 0},UHe[O],g,a.props.style),ref:w},B))}))}),HHe=VHe;function jHe(t){return Xn("MuiBackdrop",t)}Yn("MuiBackdrop",["root","invisible"]);const GHe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],WHe=t=>{const{classes:e,invisible:n}=t;return ti({root:["root",n&&"invisible"]},jHe,e)},qHe=Pt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>_e({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),$He=Z.forwardRef(function(e,n){var i,r,s;const o=ni({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:d={},componentsProps:u={},invisible:h=!1,open:f,slotProps:p={},slots:m={},TransitionComponent:g=HHe,transitionDuration:v}=o,y=Dt(o,GHe),x=_e({},o,{component:c,invisible:h}),b=WHe(x),w=(i=p.root)!=null?i:u.root;return Te(g,_e({in:f,timeout:v},y,{children:Te(qHe,_e({"aria-hidden":!0},w,{as:(r=(s=m.root)!=null?s:d.Root)!=null?r:c,className:qt(b.root,l,w==null?void 0:w.className),ownerState:_e({},x,w==null?void 0:w.ownerState),classes:b,ref:n,children:a}))}))}),XHe=$He,YHe=Wle(),KHe=e5e({themeId:wS,defaultTheme:YHe,defaultClassName:"MuiBox-root",generateClassName:AV.generate}),hd=KHe;function ZHe(t){return Xn("MuiButton",t)}const QHe=Yn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),QM=QHe,JHe=Z.createContext({}),e6e=JHe,t6e=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],n6e=t=>{const{color:e,disableElevation:n,fullWidth:i,size:r,variant:s,classes:o}=t,a={root:["root",s,`${s}${Vt(e)}`,`size${Vt(r)}`,`${s}Size${Vt(r)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Vt(r)}`],endIcon:["endIcon",`iconSize${Vt(r)}`]},l=ti(a,ZHe,o);return _e({},o,l)},Kle=t=>_e({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),i6e=Pt(eR,{shouldForwardProp:t=>hc(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Vt(n.color)}`],e[`size${Vt(n.size)}`],e[`${n.variant}Size${Vt(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,i;const r=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return _e({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":_e({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Ns(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ns(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ns(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":_e({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${QM.focusVisible}`]:_e({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${QM.disabled}`]:_e({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Ns(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(i=t.palette).getContrastText)==null?void 0:n.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:r,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${QM.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${QM.disabled}`]:{boxShadow:"none"}}),r6e=Pt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${Vt(n.size)}`]]}})(({ownerState:t})=>_e({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},Kle(t))),s6e=Pt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${Vt(n.size)}`]]}})(({ownerState:t})=>_e({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},Kle(t))),o6e=Z.forwardRef(function(e,n){const i=Z.useContext(e6e),r=MV(i,e),s=ni({props:r,name:"MuiButton"}),{children:o,color:a="primary",component:l="button",className:c,disabled:d=!1,disableElevation:u=!1,disableFocusRipple:h=!1,endIcon:f,focusVisibleClassName:p,fullWidth:m=!1,size:g="medium",startIcon:v,type:y,variant:x="text"}=s,b=Dt(s,t6e),w=_e({},s,{color:a,component:l,disabled:d,disableElevation:u,disableFocusRipple:h,fullWidth:m,size:g,type:y,variant:x}),E=n6e(w),A=v&&Te(r6e,{className:E.startIcon,ownerState:w,children:v}),S=f&&Te(s6e,{className:E.endIcon,ownerState:w,children:f});return jt(i6e,_e({ownerState:w,className:qt(i.className,E.root,c),component:l,disabled:d,focusRipple:!h,focusVisibleClassName:qt(E.focusVisible,p),ref:n,type:y},b,{classes:E,children:[A,o,S]}))}),sR=o6e;function a6e(t){return Xn("MuiCircularProgress",t)}Yn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const l6e=["className","color","disableShrink","size","style","thickness","value","variant"];let oR=t=>t,_X,SX,EX,MX;const wh=44,c6e=SS(_X||(_X=oR`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),u6e=SS(SX||(SX=oR`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),d6e=t=>{const{classes:e,variant:n,color:i,disableShrink:r}=t,s={root:["root",n,`color${Vt(i)}`],svg:["svg"],circle:["circle",`circle${Vt(n)}`,r&&"circleDisableShrink"]};return ti(s,a6e,e)},h6e=Pt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Vt(n.color)}`]]}})(({ownerState:t,theme:e})=>_e({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&OV(EX||(EX=oR`
      animation: ${0} 1.4s linear infinite;
    `),c6e)),f6e=Pt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),p6e=Pt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Vt(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>_e({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&OV(MX||(MX=oR`
      animation: ${0} 1.4s ease-in-out infinite;
    `),u6e)),m6e=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:d=0,variant:u="indeterminate"}=i,h=Dt(i,l6e),f=_e({},i,{color:s,disableShrink:o,size:a,thickness:c,value:d,variant:u}),p=d6e(f),m={},g={},v={};if(u==="determinate"){const y=2*Math.PI*((wh-c)/2);m.strokeDasharray=y.toFixed(3),v["aria-valuenow"]=Math.round(d),m.strokeDashoffset=`${((100-d)/100*y).toFixed(3)}px`,g.transform="rotate(-90deg)"}return Te(h6e,_e({className:qt(p.root,r),style:_e({width:a,height:a},g,l),ownerState:f,ref:n,role:"progressbar"},v,h,{children:Te(f6e,{className:p.svg,ownerState:f,viewBox:`${wh/2} ${wh/2} ${wh} ${wh}`,children:Te(p6e,{className:p.circle,style:m,ownerState:f,cx:wh,cy:wh,r:(wh-c)/2,fill:"none",strokeWidth:c})})}))}),g6e=m6e,v6e=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],y6e=Pt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>_e({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),x6e=Pt(XHe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),b6e=Z.forwardRef(function(e,n){var i,r,s,o,a,l;const c=ni({name:"MuiModal",props:e}),{BackdropComponent:d=x6e,BackdropProps:u,classes:h,className:f,closeAfterTransition:p=!1,children:m,container:g,component:v,components:y={},componentsProps:x={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:E=!1,disablePortal:A=!1,disableRestoreFocus:S=!1,disableScrollLock:C=!1,hideBackdrop:T=!1,keepMounted:P=!1,onBackdropClick:R,onClose:L,open:O,slotProps:B,slots:$,theme:X}=c,H=Dt(c,v6e),[U,N]=Z.useState(!0),k={container:g,closeAfterTransition:p,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:E,disablePortal:A,disableRestoreFocus:S,disableScrollLock:C,hideBackdrop:T,keepMounted:P,onBackdropClick:R,onClose:L,open:O},z=_e({},c,k,{exited:U}),W=(i=(r=$==null?void 0:$.root)!=null?r:y.Root)!=null?i:y6e,K=(s=(o=$==null?void 0:$.backdrop)!=null?o:y.Backdrop)!=null?s:d,J=(a=B==null?void 0:B.root)!=null?a:x.root,F=(l=B==null?void 0:B.backdrop)!=null?l:x.backdrop;return Te(wVe,_e({slots:{root:W,backdrop:K},slotProps:{root:()=>_e({},Fz(J,z),!ng(W)&&{as:v,theme:X},{className:qt(f,J==null?void 0:J.className,h==null?void 0:h.root,!z.open&&z.exited&&(h==null?void 0:h.hidden))}),backdrop:()=>_e({},u,Fz(F,z),{className:qt(F==null?void 0:F.className,u==null?void 0:u.className,h==null?void 0:h.backdrop)})},onTransitionEnter:()=>N(!1),onTransitionExited:()=>N(!0),ref:n},H,k,{children:m}))}),Zle=b6e,w6e=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function _6e(t,e,n){const i=e.getBoundingClientRect(),r=n&&n.getBoundingClientRect(),s=fu(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const c=s.getComputedStyle(e);o=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let a=0,l=0;if(o&&o!=="none"&&typeof o=="string"){const c=o.split("(")[1].split(")")[0].split(",");a=parseInt(c[4],10),l=parseInt(c[5],10)}return t==="left"?r?`translateX(${r.right+a-i.left}px)`:`translateX(${s.innerWidth+a-i.left}px)`:t==="right"?r?`translateX(-${i.right-r.left-a}px)`:`translateX(-${i.left+i.width-a}px)`:t==="up"?r?`translateY(${r.bottom+l-i.top}px)`:`translateY(${s.innerHeight+l-i.top}px)`:r?`translateY(-${i.top-r.top+i.height-l}px)`:`translateY(-${i.top+i.height-l}px)`}function S6e(t){return typeof t=="function"?t():t}function JM(t,e,n){const i=S6e(n),r=_6e(t,e,i);r&&(e.style.webkitTransform=r,e.style.transform=r)}const E6e=Z.forwardRef(function(e,n){const i=AS(),r={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:l,container:c,direction:d="down",easing:u=r,in:h,onEnter:f,onEntered:p,onEntering:m,onExit:g,onExited:v,onExiting:y,style:x,timeout:b=s,TransitionComponent:w=FV}=e,E=Dt(e,w6e),A=Z.useRef(null),S=es(l.ref,A,n),C=H=>U=>{H&&(U===void 0?H(A.current):H(A.current,U))},T=C((H,U)=>{JM(d,H,c),HV(H),f&&f(H,U)}),P=C((H,U)=>{const N=Ny({timeout:b,style:x,easing:u},{mode:"enter"});H.style.webkitTransition=i.transitions.create("-webkit-transform",_e({},N)),H.style.transition=i.transitions.create("transform",_e({},N)),H.style.webkitTransform="none",H.style.transform="none",m&&m(H,U)}),R=C(p),L=C(y),O=C(H=>{const U=Ny({timeout:b,style:x,easing:u},{mode:"exit"});H.style.webkitTransition=i.transitions.create("-webkit-transform",U),H.style.transition=i.transitions.create("transform",U),JM(d,H,c),g&&g(H)}),B=C(H=>{H.style.webkitTransition="",H.style.transition="",v&&v(H)}),$=H=>{o&&o(A.current,H)},X=Z.useCallback(()=>{A.current&&JM(d,A.current,c)},[d,c]);return Z.useEffect(()=>{if(h||d==="down"||d==="right")return;const H=BD(()=>{A.current&&JM(d,A.current,c)}),U=fu(A.current);return U.addEventListener("resize",H),()=>{H.clear(),U.removeEventListener("resize",H)}},[d,h,c]),Z.useEffect(()=>{h||X()},[h,X]),Te(w,_e({nodeRef:A,onEnter:T,onEntered:R,onEntering:P,onExit:O,onExited:B,onExiting:L,addEndListener:$,appear:a,in:h,timeout:b},E,{children:(H,U)=>Z.cloneElement(l,_e({ref:S,style:_e({visibility:H==="exited"&&!h?"hidden":void 0},x,l.props.style)},U))}))}),M6e=E6e;function A6e(t){return Xn("MuiDrawer",t)}Yn("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const T6e=["BackdropProps"],C6e=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Qle=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},P6e=t=>{const{classes:e,anchor:n,variant:i}=t,r={root:["root"],docked:[(i==="permanent"||i==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Vt(n)}`,i!=="temporary"&&`paperAnchorDocked${Vt(n)}`]};return ti(r,A6e,e)},D6e=Pt(Zle,{name:"MuiDrawer",slot:"Root",overridesResolver:Qle})(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer})),AX=Pt("div",{shouldForwardProp:hc,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Qle})({flex:"0 0 auto"}),R6e=Pt(Yle,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${Vt(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${Vt(n.anchor)}`]]}})(({theme:t,ownerState:e})=>_e({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})),Jle={left:"right",right:"left",top:"down",bottom:"up"};function O6e(t){return["left","right"].indexOf(t)!==-1}function L6e(t,e){return t.direction==="rtl"&&O6e(e)?Jle[e]:e}const I6e=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiDrawer"}),r=AS(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:a,children:l,className:c,elevation:d=16,hideBackdrop:u=!1,ModalProps:{BackdropProps:h}={},onClose:f,open:p=!1,PaperProps:m={},SlideProps:g,TransitionComponent:v=M6e,transitionDuration:y=s,variant:x="temporary"}=i,b=Dt(i.ModalProps,T6e),w=Dt(i,C6e),E=Z.useRef(!1);Z.useEffect(()=>{E.current=!0},[]);const A=L6e(r,o),C=_e({},i,{anchor:o,elevation:d,open:p,variant:x},w),T=P6e(C),P=Te(R6e,_e({elevation:x==="temporary"?d:0,square:!0},m,{className:qt(T.paper,m.className),ownerState:C,children:l}));if(x==="permanent")return Te(AX,_e({className:qt(T.root,T.docked,c),ownerState:C,ref:n},w,{children:P}));const R=Te(v,_e({in:p,direction:Jle[A],timeout:y,appear:E.current},g,{children:P}));return x==="persistent"?Te(AX,_e({className:qt(T.root,T.docked,c),ownerState:C,ref:n},w,{children:R})):Te(D6e,_e({BackdropProps:_e({},a,h,{transitionDuration:y}),className:qt(T.root,T.modal,c),open:p,ownerState:C,onClose:f,hideBackdrop:u,ref:n},w,b,{children:R}))}),k6e=I6e,N6e=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],B6e=t=>{const{classes:e,disableUnderline:n}=t,r=ti({root:["root",!n&&"underline"],input:["input"]},NHe,e);return _e({},e,r)},z6e=Pt(iR,{shouldForwardProp:t=>hc(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...tR(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const i=t.palette.mode==="light",r=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _e({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${Cp.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${Cp.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Cp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Cp.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Cp.disabled}, .${Cp.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Cp.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&_e({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),F6e=Pt(rR,{name:"MuiFilledInput",slot:"Input",overridesResolver:nR})(({theme:t,ownerState:e})=>_e({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9})),ece=Z.forwardRef(function(e,n){var i,r,s,o;const a=ni({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:d=!1,inputComponent:u="input",multiline:h=!1,slotProps:f,slots:p={},type:m="text"}=a,g=Dt(a,N6e),v=_e({},a,{fullWidth:d,inputComponent:u,multiline:h,type:m}),y=B6e(a),x={root:{ownerState:v},input:{ownerState:v}},b=f??c?ll(f??c,x):x,w=(i=(r=p.root)!=null?r:l.Root)!=null?i:z6e,E=(s=(o=p.input)!=null?o:l.Input)!=null?s:F6e;return Te(GV,_e({slots:{root:w,input:E},componentsProps:b,fullWidth:d,inputComponent:u,multiline:h,ref:n,type:m},g,{classes:y}))});ece.muiName="Input";const tce=ece;function U6e(t){return Xn("MuiFormControl",t)}Yn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const V6e=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],H6e=t=>{const{classes:e,margin:n,fullWidth:i}=t,r={root:["root",n!=="none"&&`margin${Vt(n)}`,i&&"fullWidth"]};return ti(r,U6e,e)},j6e=Pt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>_e({},e.root,e[`margin${Vt(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>_e({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),G6e=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiFormControl"}),{children:r,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:d,fullWidth:u=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:m="medium",variant:g="outlined"}=i,v=Dt(i,V6e),y=_e({},i,{color:o,component:a,disabled:l,error:c,fullWidth:u,hiddenLabel:h,margin:f,required:p,size:m,variant:g}),x=H6e(y),[b,w]=Z.useState(()=>{let L=!1;return r&&Z.Children.forEach(r,O=>{if(!sw(O,["Input","Select"]))return;const B=sw(O,["Select"])?O.props.input:O;B&&MHe(B.props)&&(L=!0)}),L}),[E,A]=Z.useState(()=>{let L=!1;return r&&Z.Children.forEach(r,O=>{sw(O,["Input","Select"])&&(s2(O.props,!0)||s2(O.props.inputProps,!0))&&(L=!0)}),L}),[S,C]=Z.useState(!1);l&&S&&C(!1);const T=d!==void 0&&!l?d:S;let P;const R=Z.useMemo(()=>({adornedStart:b,setAdornedStart:w,color:o,disabled:l,error:c,filled:E,focused:T,fullWidth:u,hiddenLabel:h,size:m,onBlur:()=>{C(!1)},onEmpty:()=>{A(!1)},onFilled:()=>{A(!0)},onFocus:()=>{C(!0)},registerEffect:P,required:p,variant:g}),[b,o,l,c,E,T,u,h,P,p,m,g]);return Te(jV.Provider,{value:R,children:Te(j6e,_e({as:a,ownerState:y,className:qt(x.root,s),ref:n},v,{children:r}))})}),W6e=G6e;function q6e(t){return Xn("MuiFormHelperText",t)}const $6e=Yn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),TX=$6e;var CX;const X6e=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Y6e=t=>{const{classes:e,contained:n,size:i,disabled:r,error:s,filled:o,focused:a,required:l}=t,c={root:["root",r&&"disabled",s&&"error",i&&`size${Vt(i)}`,n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return ti(c,q6e,e)},K6e=Pt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Vt(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>_e({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${TX.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${TX.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),Z6e=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiFormHelperText"}),{children:r,className:s,component:o="p"}=i,a=Dt(i,X6e),l=Mx(),c=Ex({props:i,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),d=_e({},i,{component:o,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),u=Y6e(d);return Te(K6e,_e({as:o,ownerState:d,className:qt(u.root,s),ref:n},a,{children:r===" "?CX||(CX=Te("span",{className:"notranslate",children:""})):r}))}),Q6e=Z6e;function J6e(t){return Xn("MuiFormLabel",t)}const eje=Yn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),cw=eje,tje=["children","className","color","component","disabled","error","filled","focused","required"],nje=t=>{const{classes:e,color:n,focused:i,disabled:r,error:s,filled:o,required:a}=t,l={root:["root",`color${Vt(n)}`,r&&"disabled",s&&"error",o&&"filled",i&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return ti(l,J6e,e)},ije=Pt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>_e({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>_e({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${cw.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${cw.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${cw.error}`]:{color:(t.vars||t).palette.error.main}})),rje=Pt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${cw.error}`]:{color:(t.vars||t).palette.error.main}})),sje=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiFormLabel"}),{children:r,className:s,component:o="label"}=i,a=Dt(i,tje),l=Mx(),c=Ex({props:i,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),d=_e({},i,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),u=nje(d);return jt(ije,_e({as:o,ownerState:d,className:qt(u.root,s),ref:n},a,{children:[r,c.required&&jt(rje,{ownerState:d,"aria-hidden":!0,className:u.asterisk,children:["","*"]})]}))}),oje=sje,aje=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function jz(t){return`scale(${t}, ${t**2})`}const lje={entering:{opacity:1,transform:jz(1)},entered:{opacity:1,transform:"none"}},tI=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),nce=Z.forwardRef(function(e,n){const{addEndListener:i,appear:r=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:d,onExit:u,onExited:h,onExiting:f,style:p,timeout:m="auto",TransitionComponent:g=FV}=e,v=Dt(e,aje),y=Z.useRef(),x=Z.useRef(),b=AS(),w=Z.useRef(null),E=es(w,s.ref,n),A=B=>$=>{if(B){const X=w.current;$===void 0?B(X):B(X,$)}},S=A(d),C=A((B,$)=>{HV(B);const{duration:X,delay:H,easing:U}=Ny({style:p,timeout:m,easing:o},{mode:"enter"});let N;m==="auto"?(N=b.transitions.getAutoHeightDuration(B.clientHeight),x.current=N):N=X,B.style.transition=[b.transitions.create("opacity",{duration:N,delay:H}),b.transitions.create("transform",{duration:tI?N:N*.666,delay:H,easing:U})].join(","),l&&l(B,$)}),T=A(c),P=A(f),R=A(B=>{const{duration:$,delay:X,easing:H}=Ny({style:p,timeout:m,easing:o},{mode:"exit"});let U;m==="auto"?(U=b.transitions.getAutoHeightDuration(B.clientHeight),x.current=U):U=$,B.style.transition=[b.transitions.create("opacity",{duration:U,delay:X}),b.transitions.create("transform",{duration:tI?U:U*.666,delay:tI?X:X||U*.333,easing:H})].join(","),B.style.opacity=0,B.style.transform=jz(.75),u&&u(B)}),L=A(h),O=B=>{m==="auto"&&(y.current=setTimeout(B,x.current||0)),i&&i(w.current,B)};return Z.useEffect(()=>()=>{clearTimeout(y.current)},[]),Te(g,_e({appear:r,in:a,nodeRef:w,onEnter:C,onEntered:T,onEntering:S,onExit:R,onExited:L,onExiting:P,addEndListener:O,timeout:m==="auto"?null:m},v,{children:(B,$)=>Z.cloneElement(s,_e({style:_e({opacity:0,transform:jz(.75),visibility:B==="exited"&&!a?"hidden":void 0},lje[B],p,s.props.style),ref:E},$))}))});nce.muiSupportAuto=!0;const cje=nce,uje=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],dje=t=>{const{classes:e,disableUnderline:n}=t,r=ti({root:["root",!n&&"underline"],input:["input"]},OHe,e);return _e({},e,r)},hje=Pt(iR,{shouldForwardProp:t=>hc(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...tR(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let i=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(i=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),_e({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${F1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${F1.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${F1.disabled}, .${F1.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${F1.disabled}:before`]:{borderBottomStyle:"dotted"}})}),fje=Pt(rR,{name:"MuiInput",slot:"Input",overridesResolver:nR})({}),ice=Z.forwardRef(function(e,n){var i,r,s,o;const a=ni({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:d,fullWidth:u=!1,inputComponent:h="input",multiline:f=!1,slotProps:p,slots:m={},type:g="text"}=a,v=Dt(a,uje),y=dje(a),b={root:{ownerState:{disableUnderline:l}}},w=p??d?ll(p??d,b):b,E=(i=(r=m.root)!=null?r:c.Root)!=null?i:hje,A=(s=(o=m.input)!=null?o:c.Input)!=null?s:fje;return Te(GV,_e({slots:{root:E,input:A},slotProps:w,fullWidth:u,inputComponent:h,multiline:f,ref:n,type:g},v,{classes:y}))});ice.muiName="Input";const rce=ice;function pje(t){return Xn("MuiInputLabel",t)}Yn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const mje=["disableAnimation","margin","shrink","variant","className"],gje=t=>{const{classes:e,formControl:n,size:i,shrink:r,disableAnimation:s,variant:o,required:a}=t,c=ti({root:["root",n&&"formControl",!s&&"animated",r&&"shrink",i==="small"&&"sizeSmall",o],asterisk:[a&&"asterisk"]},pje,e);return _e({},e,c)},vje=Pt(oje,{shouldForwardProp:t=>hc(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${cw.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,e[n.variant]]}})(({theme:t,ownerState:e})=>_e({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&_e({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&_e({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&_e({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),yje=Z.forwardRef(function(e,n){const i=ni({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:s,className:o}=i,a=Dt(i,mje),l=Mx();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const d=Ex({props:i,muiFormControl:l,states:["size","variant","required"]}),u=_e({},i,{disableAnimation:r,formControl:l,shrink:c,size:d.size,variant:d.variant,required:d.required}),h=gje(u);return Te(vje,_e({"data-shrink":c,ownerState:u,ref:n,className:qt(h.root,o)},a,{classes:h}))}),xje=yje,bje=Z.createContext({}),Lm=bje;function wje(t){return Xn("MuiList",t)}Yn("MuiList",["root","padding","dense","subheader"]);const _je=["children","className","component","dense","disablePadding","subheader"],Sje=t=>{const{classes:e,disablePadding:n,dense:i,subheader:r}=t;return ti({root:["root",!n&&"padding",i&&"dense",r&&"subheader"]},wje,e)},Eje=Pt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>_e({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),Mje=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiList"}),{children:r,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=i,d=Dt(i,_je),u=Z.useMemo(()=>({dense:a}),[a]),h=_e({},i,{component:o,dense:a,disablePadding:l}),f=Sje(h);return Te(Lm.Provider,{value:u,children:jt(Eje,_e({as:o,className:qt(f.root,s),ref:n,ownerState:h},d,{children:[c,r]}))})}),sce=Mje;function Aje(t){return Xn("MuiListItem",t)}const Tje=Yn("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Jv=Tje;function Cje(t){return Xn("MuiListItemButton",t)}const Pje=Yn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),e0=Pje,Dje=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],Rje=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Oje=t=>{const{alignItems:e,classes:n,dense:i,disabled:r,disableGutters:s,divider:o,selected:a}=t,c=ti({root:["root",i&&"dense",!s&&"gutters",o&&"divider",r&&"disabled",e==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},Cje,n);return _e({},n,c)},Lje=Pt(eR,{shouldForwardProp:t=>hc(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Rje})(({theme:t,ownerState:e})=>_e({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${e0.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${e0.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${e0.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${e0.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${e0.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),Ije=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:s=!1,component:o="div",children:a,dense:l=!1,disableGutters:c=!1,divider:d=!1,focusVisibleClassName:u,selected:h=!1,className:f}=i,p=Dt(i,Dje),m=Z.useContext(Lm),g=Z.useMemo(()=>({dense:l||m.dense||!1,alignItems:r,disableGutters:c}),[r,m.dense,l,c]),v=Z.useRef(null);Nd(()=>{s&&v.current&&v.current.focus()},[s]);const y=_e({},i,{alignItems:r,dense:g.dense,disableGutters:c,divider:d,selected:h}),x=Oje(y),b=es(v,n);return Te(Lm.Provider,{value:g,children:Te(Lje,_e({ref:b,href:p.href||p.to,component:(p.href||p.to)&&o==="div"?"button":o,focusVisibleClassName:qt(x.focusVisible,u),ownerState:y,className:qt(x.root,f)},p,{classes:x,children:a}))})}),PX=Ije;function kje(t){return Xn("MuiListItemSecondaryAction",t)}Yn("MuiListItemSecondaryAction",["root","disableGutters"]);const Nje=["className"],Bje=t=>{const{disableGutters:e,classes:n}=t;return ti({root:["root",e&&"disableGutters"]},kje,n)},zje=Pt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})(({ownerState:t})=>_e({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),oce=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=i,s=Dt(i,Nje),o=Z.useContext(Lm),a=_e({},i,{disableGutters:o.disableGutters}),l=Bje(a);return Te(zje,_e({className:qt(l.root,r),ownerState:a,ref:n},s))});oce.muiName="ListItemSecondaryAction";const Fje=oce,Uje=["className"],Vje=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Hje=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]},jje=t=>{const{alignItems:e,button:n,classes:i,dense:r,disabled:s,disableGutters:o,disablePadding:a,divider:l,hasSecondaryAction:c,selected:d}=t;return ti({root:["root",r&&"dense",!o&&"gutters",!a&&"padding",l&&"divider",s&&"disabled",n&&"button",e==="flex-start"&&"alignItemsFlexStart",c&&"secondaryAction",d&&"selected"],container:["container"]},Aje,i)},Gje=Pt("div",{name:"MuiListItem",slot:"Root",overridesResolver:Hje})(({theme:t,ownerState:e})=>_e({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&_e({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${e0.root}`]:{paddingRight:48}},{[`&.${Jv.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Jv.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Jv.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Jv.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Jv.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ns(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),Wje=Pt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),qje=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:s=!1,button:o=!1,children:a,className:l,component:c,components:d={},componentsProps:u={},ContainerComponent:h="li",ContainerProps:{className:f}={},dense:p=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,focusVisibleClassName:x,secondaryAction:b,selected:w=!1,slotProps:E={},slots:A={}}=i,S=Dt(i.ContainerProps,Uje),C=Dt(i,Vje),T=Z.useContext(Lm),P=Z.useMemo(()=>({dense:p||T.dense||!1,alignItems:r,disableGutters:g}),[r,T.dense,p,g]),R=Z.useRef(null);Nd(()=>{s&&R.current&&R.current.focus()},[s]);const L=Z.Children.toArray(a),O=L.length&&sw(L[L.length-1],["ListItemSecondaryAction"]),B=_e({},i,{alignItems:r,autoFocus:s,button:o,dense:P.dense,disabled:m,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:O,selected:w}),$=jje(B),X=es(R,n),H=A.root||d.Root||Gje,U=E.root||u.root||{},N=_e({className:qt($.root,U.className,l),disabled:m},C);let k=c||"li";return o&&(N.component=c||"div",N.focusVisibleClassName=qt(Jv.focusVisible,x),k=eR),O?(k=!N.component&&!c?"div":k,h==="li"&&(k==="li"?k="div":N.component==="li"&&(N.component="div")),Te(Lm.Provider,{value:P,children:jt(Wje,_e({as:h,className:qt($.container,f),ref:X,ownerState:B},S,{children:[Te(H,_e({},U,!ng(H)&&{as:k,ownerState:_e({},B,U.ownerState)},N,{children:L})),L.pop()]}))})):Te(Lm.Provider,{value:P,children:jt(H,_e({},U,{as:k,ref:X},!ng(H)&&{ownerState:_e({},B,U.ownerState)},N,{children:[L,b&&Te(Fje,{children:b})]}))})}),U1=qje,$je=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function nI(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function DX(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function ace(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function V1(t,e,n,i,r,s){let o=!1,a=r(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=i?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!ace(a,s)||l)a=r(t,a,n);else return a.focus(),!0}return!1}const Xje=Z.forwardRef(function(e,n){const{actions:i,autoFocus:r=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:d,variant:u="selectedMenu"}=e,h=Dt(e,$je),f=Z.useRef(null),p=Z.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Nd(()=>{r&&f.current.focus()},[r]),Z.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(x,b)=>{const w=!f.current.style.width;if(x.clientHeight<f.current.clientHeight&&w){const E=`${Sle(No(x))}px`;f.current.style[b.direction==="rtl"?"paddingLeft":"paddingRight"]=E,f.current.style.width=`calc(100% + ${E})`}return f.current}}),[]);const m=x=>{const b=f.current,w=x.key,E=No(b).activeElement;if(w==="ArrowDown")x.preventDefault(),V1(b,E,c,l,nI);else if(w==="ArrowUp")x.preventDefault(),V1(b,E,c,l,DX);else if(w==="Home")x.preventDefault(),V1(b,null,c,l,nI);else if(w==="End")x.preventDefault(),V1(b,null,c,l,DX);else if(w.length===1){const A=p.current,S=w.toLowerCase(),C=performance.now();A.keys.length>0&&(C-A.lastTime>500?(A.keys=[],A.repeating=!0,A.previousKeyMatched=!0):A.repeating&&S!==A.keys[0]&&(A.repeating=!1)),A.lastTime=C,A.keys.push(S);const T=E&&!A.repeating&&ace(E,A);A.previousKeyMatched&&(T||V1(b,E,!1,l,nI,A))?x.preventDefault():A.previousKeyMatched=!1}d&&d(x)},g=es(f,n);let v=-1;Z.Children.forEach(o,(x,b)=>{if(!Z.isValidElement(x)){v===b&&(v+=1,v>=o.length&&(v=-1));return}x.props.disabled||(u==="selectedMenu"&&x.props.selected||v===-1)&&(v=b),v===b&&(x.props.disabled||x.props.muiSkipListHighlight||x.type.muiSkipListHighlight)&&(v+=1,v>=o.length&&(v=-1))});const y=Z.Children.map(o,(x,b)=>{if(b===v){const w={};return s&&(w.autoFocus=!0),x.props.tabIndex===void 0&&u==="selectedMenu"&&(w.tabIndex=0),Z.cloneElement(x,w)}return x});return Te(sce,_e({role:"menu",ref:g,className:a,onKeyDown:m,tabIndex:r?0:-1},h,{children:y}))}),Yje=Xje;function Kje(t){return Xn("MuiPopover",t)}Yn("MuiPopover",["root","paper"]);const Zje=["onEntering"],Qje=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],Jje=["slotProps"];function RX(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function OX(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function LX(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function iI(t){return typeof t=="function"?t():t}const eGe=t=>{const{classes:e}=t;return ti({root:["root"],paper:["paper"]},Kje,e)},tGe=Pt(Zle,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),lce=Pt(Yle,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),nGe=Z.forwardRef(function(e,n){var i,r,s;const o=ni({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:d,anchorReference:u="anchorEl",children:h,className:f,container:p,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:x,slotProps:b,transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:E=cje,transitionDuration:A="auto",TransitionProps:{onEntering:S}={}}=o,C=Dt(o.TransitionProps,Zje),T=Dt(o,Qje),P=(i=b==null?void 0:b.paper)!=null?i:y,R=Z.useRef(),L=es(R,P.ref),O=_e({},o,{anchorOrigin:c,anchorReference:u,elevation:m,marginThreshold:g,externalPaperSlotProps:P,transformOrigin:w,TransitionComponent:E,transitionDuration:A,TransitionProps:C}),B=eGe(O),$=Z.useCallback(()=>{if(u==="anchorPosition")return d;const se=iI(l),be=(se&&se.nodeType===1?se:No(R.current).body).getBoundingClientRect();return{top:be.top+RX(be,c.vertical),left:be.left+OX(be,c.horizontal)}},[l,c.horizontal,c.vertical,d,u]),X=Z.useCallback(se=>({vertical:RX(se,w.vertical),horizontal:OX(se,w.horizontal)}),[w.horizontal,w.vertical]),H=Z.useCallback(se=>{const oe={width:se.offsetWidth,height:se.offsetHeight},be=X(oe);if(u==="none")return{top:null,left:null,transformOrigin:LX(be)};const Ae=$();let Ie=Ae.top-be.vertical,Le=Ae.left-be.horizontal;const fe=Ie+oe.height,ve=Le+oe.width,ke=fu(iI(l)),ze=ke.innerHeight-g,j=ke.innerWidth-g;if(Ie<g){const V=Ie-g;Ie-=V,be.vertical+=V}else if(fe>ze){const V=fe-ze;Ie-=V,be.vertical+=V}if(Le<g){const V=Le-g;Le-=V,be.horizontal+=V}else if(ve>j){const V=ve-j;Le-=V,be.horizontal+=V}return{top:`${Math.round(Ie)}px`,left:`${Math.round(Le)}px`,transformOrigin:LX(be)}},[l,u,$,X,g]),[U,N]=Z.useState(v),k=Z.useCallback(()=>{const se=R.current;if(!se)return;const oe=H(se);oe.top!==null&&(se.style.top=oe.top),oe.left!==null&&(se.style.left=oe.left),se.style.transformOrigin=oe.transformOrigin,N(!0)},[H]),z=(se,oe)=>{S&&S(se,oe),k()},W=()=>{N(!1)};Z.useEffect(()=>{v&&k()}),Z.useImperativeHandle(a,()=>v?{updatePosition:()=>{k()}}:null,[v,k]),Z.useEffect(()=>{if(!v)return;const se=BD(()=>{k()}),oe=fu(l);return oe.addEventListener("resize",se),()=>{se.clear(),oe.removeEventListener("resize",se)}},[l,v,k]);let K=A;A==="auto"&&!E.muiSupportAuto&&(K=void 0);const J=p||(l?No(iI(l)).body:void 0),F=(r=x==null?void 0:x.root)!=null?r:tGe,ee=(s=x==null?void 0:x.paper)!=null?s:lce,ie=i2({elementType:ee,externalSlotProps:_e({},P,{style:U?P.style:_e({},P.style,{opacity:0})}),additionalProps:{elevation:m,ref:L},ownerState:O,className:qt(B.paper,P==null?void 0:P.className)}),te=i2({elementType:F,externalSlotProps:(b==null?void 0:b.root)||{},externalForwardedProps:T,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:J,open:v},ownerState:O,className:qt(B.root,f)}),{slotProps:re}=te,me=Dt(te,Jje);return Te(F,_e({},me,!ng(F)&&{slotProps:re},{children:Te(E,_e({appear:!0,in:v,onEntering:z,onExited:W,timeout:K},C,{children:Te(ee,_e({},ie,{children:h}))}))}))}),iGe=nGe;function rGe(t){return Xn("MuiMenu",t)}Yn("MuiMenu",["root","paper","list"]);const sGe=["onEntering"],oGe=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],aGe={vertical:"top",horizontal:"right"},lGe={vertical:"top",horizontal:"left"},cGe=t=>{const{classes:e}=t;return ti({root:["root"],paper:["paper"],list:["list"]},rGe,e)},uGe=Pt(iGe,{shouldForwardProp:t=>hc(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),dGe=Pt(lce,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),hGe=Pt(Yje,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),fGe=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:s,disableAutoFocusItem:o=!1,MenuListProps:a={},onClose:l,open:c,PaperProps:d={},PopoverClasses:u,transitionDuration:h="auto",TransitionProps:{onEntering:f}={},variant:p="selectedMenu"}=i,m=Dt(i.TransitionProps,sGe),g=Dt(i,oGe),v=AS(),y=v.direction==="rtl",x=_e({},i,{autoFocus:r,disableAutoFocusItem:o,MenuListProps:a,onEntering:f,PaperProps:d,transitionDuration:h,TransitionProps:m,variant:p}),b=cGe(x),w=r&&!o&&c,E=Z.useRef(null),A=(T,P)=>{E.current&&E.current.adjustStyleForScrollbar(T,v),f&&f(T,P)},S=T=>{T.key==="Tab"&&(T.preventDefault(),l&&l(T,"tabKeyDown"))};let C=-1;return Z.Children.map(s,(T,P)=>{Z.isValidElement(T)&&(T.props.disabled||(p==="selectedMenu"&&T.props.selected||C===-1)&&(C=P))}),Te(uGe,_e({onClose:l,anchorOrigin:{vertical:"bottom",horizontal:y?"right":"left"},transformOrigin:y?aGe:lGe,slots:{paper:dGe},slotProps:{paper:_e({},d,{classes:_e({},d.classes,{root:b.paper})})},className:b.root,open:c,ref:n,transitionDuration:h,TransitionProps:_e({onEntering:A},m),ownerState:x},g,{classes:u,children:Te(hGe,_e({onKeyDown:S,actions:E,autoFocus:r&&(C===-1||o),autoFocusItem:w,variant:p},a,{className:qt(b.list,a.className),children:s}))}))}),pGe=fGe;function mGe(t){return Xn("MuiNativeSelect",t)}const gGe=Yn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),WV=gGe,vGe=["className","disabled","error","IconComponent","inputRef","variant"],yGe=t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:s,error:o}=t,a={select:["select",n,i&&"disabled",r&&"multiple",o&&"error"],icon:["icon",`icon${Vt(n)}`,s&&"iconOpen",i&&"disabled"]};return ti(a,mGe,e)},cce=({ownerState:t,theme:e})=>_e({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_e({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${WV.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),xGe=Pt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:hc,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${WV.multiple}`]:e.multiple}]}})(cce),uce=({ownerState:t,theme:e})=>_e({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${WV.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),bGe=Pt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Vt(n.variant)}`],n.open&&e.iconOpen]}})(uce),wGe=Z.forwardRef(function(e,n){const{className:i,disabled:r,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=Dt(e,vGe),d=_e({},e,{disabled:r,variant:l,error:s}),u=yGe(d);return jt(Z.Fragment,{children:[Te(xGe,_e({ownerState:d,className:qt(u.select,i),disabled:r,ref:a||n},c)),e.multiple?null:Te(bGe,{as:o,ownerState:d,className:u.icon})]})}),_Ge=wGe;var IX;const SGe=["children","classes","className","label","notched"],EGe=Pt("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),MGe=Pt("legend")(({ownerState:t,theme:e})=>_e({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&_e({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function AGe(t){const{className:e,label:n,notched:i}=t,r=Dt(t,SGe),s=n!=null&&n!=="",o=_e({},t,{notched:i,withLabel:s});return Te(EGe,_e({"aria-hidden":!0,className:e,ownerState:o},r,{children:Te(MGe,{ownerState:o,children:s?Te("span",{children:n}):IX||(IX=Te("span",{className:"notranslate",children:""}))})}))}const TGe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],CGe=t=>{const{classes:e}=t,i=ti({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},IHe,e);return _e({},e,i)},PGe=Pt(iR,{shouldForwardProp:t=>hc(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:tR})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _e({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${bh.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${bh.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${bh.focused} .${bh.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${bh.error} .${bh.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${bh.disabled} .${bh.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&_e({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),DGe=Pt(AGe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),RGe=Pt(rR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:nR})(({theme:t,ownerState:e})=>_e({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),dce=Z.forwardRef(function(e,n){var i,r,s,o,a;const l=ni({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:d=!1,inputComponent:u="input",label:h,multiline:f=!1,notched:p,slots:m={},type:g="text"}=l,v=Dt(l,TGe),y=CGe(l),x=Mx(),b=Ex({props:l,muiFormControl:x,states:["required"]}),w=_e({},l,{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:x,fullWidth:d,hiddenLabel:b.hiddenLabel,multiline:f,size:b.size,type:g}),E=(i=(r=m.root)!=null?r:c.Root)!=null?i:PGe,A=(s=(o=m.input)!=null?o:c.Input)!=null?s:RGe;return Te(GV,_e({slots:{root:E,input:A},renderSuffix:S=>Te(DGe,{ownerState:w,className:y.notchedOutline,label:h!=null&&h!==""&&b.required?a||(a=jt(Z.Fragment,{children:[h,"","*"]})):h,notched:typeof p<"u"?p:Boolean(S.startAdornment||S.filled||S.focused)}),fullWidth:d,inputComponent:u,multiline:f,ref:n,type:g},v,{classes:_e({},y,{notchedOutline:null})}))});dce.muiName="Input";const hce=dce;function OGe(t){return Xn("MuiSelect",t)}const LGe=Yn("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),H1=LGe;var kX;const IGe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],kGe=Pt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${H1.select}`]:e.select},{[`&.${H1.select}`]:e[n.variant]},{[`&.${H1.error}`]:e.error},{[`&.${H1.multiple}`]:e.multiple}]}})(cce,{[`&.${H1.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),NGe=Pt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Vt(n.variant)}`],n.open&&e.iconOpen]}})(uce),BGe=Pt("input",{shouldForwardProp:t=>j5e(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function NX(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function zGe(t){return t==null||typeof t=="string"&&!t.trim()}const FGe=t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:s,error:o}=t,a={select:["select",n,i&&"disabled",r&&"multiple",o&&"error"],icon:["icon",`icon${Vt(n)}`,s&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return ti(a,OGe,e)},UGe=Z.forwardRef(function(e,n){const{"aria-describedby":i,"aria-label":r,autoFocus:s,autoWidth:o,children:a,className:l,defaultOpen:c,defaultValue:d,disabled:u,displayEmpty:h,error:f=!1,IconComponent:p,inputRef:m,labelId:g,MenuProps:v={},multiple:y,name:x,onBlur:b,onChange:w,onClose:E,onFocus:A,onOpen:S,open:C,readOnly:T,renderValue:P,SelectDisplayProps:R={},tabIndex:L,value:O,variant:B="standard"}=e,$=Dt(e,IGe),[X,H]=Iz({controlled:O,default:d,name:"Select"}),[U,N]=Iz({controlled:C,default:c,name:"Select"}),k=Z.useRef(null),z=Z.useRef(null),[W,K]=Z.useState(null),{current:J}=Z.useRef(C!=null),[F,ee]=Z.useState(),ie=es(n,m),te=Z.useCallback(ae=>{z.current=ae,ae&&K(ae)},[]),re=W==null?void 0:W.parentNode;Z.useImperativeHandle(ie,()=>({focus:()=>{z.current.focus()},node:k.current,value:X}),[X]),Z.useEffect(()=>{c&&U&&W&&!J&&(ee(o?null:re.clientWidth),z.current.focus())},[W,o]),Z.useEffect(()=>{s&&z.current.focus()},[s]),Z.useEffect(()=>{if(!g)return;const ae=No(z.current).getElementById(g);if(ae){const Fe=()=>{getSelection().isCollapsed&&z.current.focus()};return ae.addEventListener("click",Fe),()=>{ae.removeEventListener("click",Fe)}}},[g]);const me=(ae,Fe)=>{ae?S&&S(Fe):E&&E(Fe),J||(ee(o?null:re.clientWidth),N(ae))},se=ae=>{ae.button===0&&(ae.preventDefault(),z.current.focus(),me(!0,ae))},oe=ae=>{me(!1,ae)},be=Z.Children.toArray(a),Ae=ae=>{const Fe=be.find(he=>he.props.value===ae.target.value);Fe!==void 0&&(H(Fe.props.value),w&&w(ae,Fe))},Ie=ae=>Fe=>{let he;if(Fe.currentTarget.hasAttribute("tabindex")){if(y){he=Array.isArray(X)?X.slice():[];const Ce=X.indexOf(ae.props.value);Ce===-1?he.push(ae.props.value):he.splice(Ce,1)}else he=ae.props.value;if(ae.props.onClick&&ae.props.onClick(Fe),X!==he&&(H(he),w)){const Ce=Fe.nativeEvent||Fe,Ue=new Ce.constructor(Ce.type,Ce);Object.defineProperty(Ue,"target",{writable:!0,value:{value:he,name:x}}),w(Ue,ae)}y||me(!1,Fe)}},Le=ae=>{T||[" ","ArrowUp","ArrowDown","Enter"].indexOf(ae.key)!==-1&&(ae.preventDefault(),me(!0,ae))},fe=W!==null&&U,ve=ae=>{!fe&&b&&(Object.defineProperty(ae,"target",{writable:!0,value:{value:X,name:x}}),b(ae))};delete $["aria-invalid"];let ke,ze;const j=[];let V=!1;(s2({value:X})||h)&&(P?ke=P(X):V=!0);const le=be.map(ae=>{if(!Z.isValidElement(ae))return null;let Fe;if(y){if(!Array.isArray(X))throw new Error(jf(2));Fe=X.some(he=>NX(he,ae.props.value)),Fe&&V&&j.push(ae.props.children)}else Fe=NX(X,ae.props.value),Fe&&V&&(ze=ae.props.children);return Z.cloneElement(ae,{"aria-selected":Fe?"true":"false",onClick:Ie(ae),onKeyUp:he=>{he.key===" "&&he.preventDefault(),ae.props.onKeyUp&&ae.props.onKeyUp(he)},role:"option",selected:Fe,value:void 0,"data-value":ae.props.value})});V&&(y?j.length===0?ke=null:ke=j.reduce((ae,Fe,he)=>(ae.push(Fe),he<j.length-1&&ae.push(", "),ae),[]):ke=ze);let xe=F;!o&&J&&W&&(xe=re.clientWidth);let De;typeof L<"u"?De=L:De=u?null:0;const Ne=R.id||(x?`mui-component-select-${x}`:void 0),He=_e({},e,{variant:B,value:X,open:fe,error:f}),Pe=FGe(He);return jt(Z.Fragment,{children:[Te(kGe,_e({ref:te,tabIndex:De,role:"button","aria-disabled":u?"true":void 0,"aria-expanded":fe?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[g,Ne].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Le,onMouseDown:u||T?null:se,onBlur:ve,onFocus:A},R,{ownerState:He,className:qt(R.className,Pe.select,l),id:Ne,children:zGe(ke)?kX||(kX=Te("span",{className:"notranslate",children:""})):ke})),Te(BGe,_e({"aria-invalid":f,value:Array.isArray(X)?X.join(","):X,name:x,ref:k,"aria-hidden":!0,onChange:Ae,tabIndex:-1,disabled:u,className:Pe.nativeInput,autoFocus:s,ownerState:He},$)),Te(NGe,{as:p,className:Pe.icon,ownerState:He}),Te(pGe,_e({id:`menu-${x||""}`,anchorEl:re,open:fe,onClose:oe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:_e({"aria-labelledby":g,role:"listbox",disableListWrap:!0},v.MenuListProps),PaperProps:_e({},v.PaperProps,{style:_e({minWidth:xe},v.PaperProps!=null?v.PaperProps.style:null)}),children:le}))]})}),VGe=UGe,HGe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],jGe=t=>{const{classes:e}=t;return e},qV={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>hc(t)&&t!=="variant",slot:"Root"},GGe=Pt(rce,qV)(""),WGe=Pt(hce,qV)(""),qGe=Pt(tce,qV)(""),fce=Z.forwardRef(function(e,n){const i=ni({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:d=zHe,id:u,input:h,inputProps:f,label:p,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:x,onOpen:b,open:w,renderValue:E,SelectDisplayProps:A,variant:S="outlined"}=i,C=Dt(i,HGe),T=y?_Ge:VGe,P=Mx(),R=Ex({props:i,muiFormControl:P,states:["variant","error"]}),L=R.variant||S,O=_e({},i,{variant:L,classes:o}),B=jGe(O),$=h||{standard:Te(GGe,{ownerState:O}),outlined:Te(WGe,{label:p,ownerState:O}),filled:Te(qGe,{ownerState:O})}[L],X=es(n,$.ref);return Te(Z.Fragment,{children:Z.cloneElement($,_e({inputComponent:T,inputProps:_e({children:s,error:R.error,IconComponent:d,variant:L,type:void 0,multiple:v},y?{id:u}:{autoWidth:r,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:x,onOpen:b,open:w,renderValue:E,SelectDisplayProps:_e({id:u},A)},f,{classes:f?ll(B,f.classes):B},h?h.props.inputProps:{})},v&&y&&L==="outlined"?{notched:!0}:{},{ref:X,className:qt($.props.className,a)},!h&&{variant:L},C))})});fce.muiName="Select";const $Ge=fce;function XGe(t){return Xn("MuiTextField",t)}Yn("MuiTextField",["root"]);const YGe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],KGe={standard:rce,filled:tce,outlined:hce},ZGe=t=>{const{classes:e}=t;return ti({root:["root"]},XGe,e)},QGe=Pt(W6e,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),JGe=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:d=!1,error:u=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:p,id:m,InputLabelProps:g,inputProps:v,InputProps:y,inputRef:x,label:b,maxRows:w,minRows:E,multiline:A=!1,name:S,onBlur:C,onChange:T,onClick:P,onFocus:R,placeholder:L,required:O=!1,rows:B,select:$=!1,SelectProps:X,type:H,value:U,variant:N="outlined"}=i,k=Dt(i,YGe),z=_e({},i,{autoFocus:s,color:l,disabled:d,error:u,fullWidth:f,multiline:A,required:O,select:$,variant:N}),W=ZGe(z),K={};N==="outlined"&&(g&&typeof g.shrink<"u"&&(K.notched=g.shrink),K.label=b),$&&((!X||!X.native)&&(K.id=void 0),K["aria-describedby"]=void 0);const J=EV(m),F=p&&J?`${J}-helper-text`:void 0,ee=b&&J?`${J}-label`:void 0,ie=KGe[N],te=Te(ie,_e({"aria-describedby":F,autoComplete:r,autoFocus:s,defaultValue:c,fullWidth:f,multiline:A,name:S,rows:B,maxRows:w,minRows:E,type:H,value:U,id:J,inputRef:x,onBlur:C,onChange:T,onFocus:R,onClick:P,placeholder:L,inputProps:v},K,y));return jt(QGe,_e({className:qt(W.root,a),disabled:d,error:u,fullWidth:f,ref:n,required:O,color:l,variant:N,ownerState:z},k,{children:[b!=null&&b!==""&&Te(xje,_e({htmlFor:J,id:ee},g,{children:b})),$?Te($Ge,_e({"aria-describedby":F,id:J,labelId:ee,value:U,input:te},X,{children:o})):te,p&&Te(Q6e,_e({id:F},h,{children:p}))]}))}),Im=JGe;function eWe(t){return Xn("MuiLoadingButton",t)}const tWe=Yn("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),zu=tWe,nWe=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],iWe=t=>{const{loading:e,loadingPosition:n,classes:i}=t,r={root:["root",e&&"loading"],startIcon:[e&&`startIconLoading${Vt(n)}`],endIcon:[e&&`endIconLoading${Vt(n)}`],loadingIndicator:["loadingIndicator",e&&`loadingIndicator${Vt(n)}`]},s=ti(r,eWe,i);return _e({},i,s)},rWe=t=>t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"&&t!=="classes",sWe=Pt(sR,{shouldForwardProp:t=>rWe(t)||t==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(t,e)=>[e.root,e.startIconLoadingStart&&{[`& .${zu.startIconLoadingStart}`]:e.startIconLoadingStart},e.endIconLoadingEnd&&{[`& .${zu.endIconLoadingEnd}`]:e.endIconLoadingEnd}]})(({ownerState:t,theme:e})=>_e({[`& .${zu.startIconLoadingStart}, & .${zu.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},t.loadingPosition==="center"&&{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${zu.loading}`]:{color:"transparent"}},t.loadingPosition==="start"&&t.fullWidth&&{[`& .${zu.startIconLoadingStart}, & .${zu.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginRight:-8}},t.loadingPosition==="end"&&t.fullWidth&&{[`& .${zu.startIconLoadingStart}, & .${zu.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginLeft:-8}})),oWe=Pt("div",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.loadingIndicator,e[`loadingIndicator${Vt(n.loadingPosition)}`]]}})(({theme:t,ownerState:e})=>_e({position:"absolute",visibility:"visible",display:"flex"},e.loadingPosition==="start"&&(e.variant==="outlined"||e.variant==="contained")&&{left:e.size==="small"?10:14},e.loadingPosition==="start"&&e.variant==="text"&&{left:6},e.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled},e.loadingPosition==="end"&&(e.variant==="outlined"||e.variant==="contained")&&{right:e.size==="small"?10:14},e.loadingPosition==="end"&&e.variant==="text"&&{right:6},e.loadingPosition==="start"&&e.fullWidth&&{position:"relative",left:-10},e.loadingPosition==="end"&&e.fullWidth&&{position:"relative",right:-10})),aWe=Z.forwardRef(function(e,n){const i=ni({props:e,name:"MuiLoadingButton"}),{children:r,disabled:s=!1,id:o,loading:a=!1,loadingIndicator:l,loadingPosition:c="center",variant:d="text"}=i,u=Dt(i,nWe),h=EV(o),f=l??Te(g6e,{"aria-labelledby":h,color:"inherit",size:16}),p=_e({},i,{disabled:s,loading:a,loadingIndicator:f,loadingPosition:c,variant:d}),m=iWe(p),g=a?Te(oWe,{className:m.loadingIndicator,ownerState:p,children:f}):null;return jt(sWe,_e({disabled:s||a,id:h,ref:n},u,{variant:d,classes:m,ownerState:p,children:[p.loadingPosition==="end"?r:g,p.loadingPosition==="end"?g:r]}))}),pce=aWe,lWe=()=>{const[t,e]=Z.useState(!1),n=wu(),i=async()=>{await bS.isAuthenticated()&&n("/home")};Z.useEffect(()=>{i()},[n]);const[r,s]=Z.useState({usernameError:"",passwordError:""});function o(){n("/signup")}const a=async l=>{l.preventDefault(),s({usernameError:"",passwordError:""});const c=new FormData(l.target),d=c.get("username").trim(),u=c.get("password").trim();let h=!1;if(d===""&&(h=!0,s(f=>({...f,usernameError:"Oops! We can't proceed without your username."}))),u===""&&(h=!0,s(f=>({...f,passwordError:"Oops! We can't proceed without your password."}))),!h){e(!0);try{const f=await SV.login({username:d,password:u});e(!1),localStorage.setItem("token",f.token),n("/home")}catch(f){f.data.errors.forEach(m=>{m.param==="username"&&s(g=>({...g,usernameError:m.msg})),m.param==="password"&&s(g=>({...g,passwordError:m.msg})),e(!1)})}}};return Te(fg,{children:Te(N5,{shadows:!0,children:jt(z5,{style:{marginLeft:"35%",marginTop:"15%"},children:[jt(Ry,{children:[Te(H5,{enableZoom:!1,minPolarAngle:_d(60),maxPolarAngle:_d(60)}),Te("ambientLight",{args:["#ffffff",.25]}),Te("spotLight",{args:["#ffffff",1.5,7,_d(45),.4],position:[-1,1,0],castShadow:!0}),Te("directionalLight",{args:["#ffffff",.5],position:[-1,3,0]}),Te(mV,{}),Te(W5,{background:!0,children:jt("mesh",{scale:100,children:[Te("sphereGeometry",{args:[1,1,1]}),Te("meshBasicMaterial",{color:"#b98b93",side:Bs})]})})]}),Te(Ry,{html:!0,style:{},children:jt(hd,{component:"form",sx:{width:"500px"},onSubmit:a,noValidate:!0,children:[Te(Im,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",disabled:t,error:r.usernameError!=="",helperText:r.usernameError}),Te(Im,{margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password",name:"password",type:"password",disabled:t,error:r.passwordError!=="",helperText:r.passwordError}),Te(pce,{sx:{mt:3,mb:2},variant:"outlined",fullWidth:!0,color:"success",type:"submit",loading:t,children:"Login"}),Te(sR,{onClick:o,sx:{textTransform:"none"},fullWidth:!0,children:"New To MyRoom? Create Your Own Now."})]})})]})})})},cWe=()=>{const[t,e]=Z.useState(!1),n=wu();function i(){n("/login")}const r=async()=>{await bS.isAuthenticated()&&n("/home")};Z.useEffect(()=>{r()},[n]);const[s,o]=Z.useState({usernameError:"",passwordError:"",confirmPasswordError:""}),a=async l=>{l.preventDefault(),o({usernameError:"",passwordError:"",confirmPasswordError:""});const c=new FormData(l.target),d=c.get("username").trim(),u=c.get("password").trim(),h=c.get("confirmpassword").trim();let f=!1;if(d===""&&(f=!0,o(p=>({...p,usernameError:"Oops! We can't proceed without your username."}))),u===""&&(f=!0,o(p=>({...p,passwordError:"Oops! We can't proceed without your password."}))),h===""&&(f=!0,o(p=>({...p,confirmPasswordError:"Oops! We can't proceed without your confirmed password."}))),h!==u&&(f=!0,o(p=>({...p,confirmPasswordError:"Oops! Your confirmed password and new password do not match. Please enter your passwords again."}))),!f){e(!0);try{const p=await SV.signup({username:d,password:u,confirmpassword:h});e(!1),localStorage.setItem("token",p.token),n("/")}catch(p){p.data.errors.forEach(g=>{g.param==="username"&&o(v=>({...v,usernameError:g.msg})),g.param==="password"&&o(v=>({...v,passwordError:g.msg})),g.param==="confirmpassword"&&o(v=>({...v,confirmPasswordError:g.msg})),e(!1)})}}};return Te(fg,{children:Te(N5,{shadows:!0,children:jt(z5,{pages:1,style:{marginLeft:"35%",marginTop:"15%"},children:[jt(Ry,{children:[Te(H5,{enableZoom:!1,minPolarAngle:_d(60),maxPolarAngle:_d(60)}),Te("ambientLight",{args:["#ffffff",.25]}),Te("spotLight",{args:["#ffffff",1.5,7,_d(45),.4],position:[-1,1,0],castShadow:!0}),Te("directionalLight",{args:["#ffffff",.5],position:[-1,3,0]}),Te(mV,{}),Te(W5,{background:!0,children:jt("mesh",{scale:100,children:[Te("sphereGeometry",{args:[1,1,1]}),Te("meshBasicMaterial",{color:"#b98b93",side:Bs})]})})]}),Te(Ry,{html:!0,style:{},children:jt(hd,{component:"form",sx:{width:"500px"},onSubmit:a,noValidate:!0,children:[Te(Im,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",disabled:t,error:s.usernameError!=="",helperText:s.usernameError}),Te(Im,{margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password",name:"password",type:"password",disabled:t,error:s.passwordError!=="",helperText:s.passwordError}),Te(Im,{margin:"normal",required:!0,fullWidth:!0,id:"confirmpassword",label:"Confirm Password",name:"confirmpassword",type:"password",disabled:t,error:s.confirmPasswordError!=="",helperText:s.confirmPasswordError}),Te(pce,{sx:{mt:3,mb:2},variant:"outlined",fullWidth:!0,color:"success",type:"submit",loading:t,children:"Sign up"}),Te(sR,{onClick:i,sx:{textTransform:"none"},fullWidth:!0,children:"Already In? Enter MyRoom Now."})]})})]})})})},uWe="modulepreload",dWe=function(t){return"/"+t},BX={},TS=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=dWe(s),s in BX)return;BX[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let d=r.length-1;d>=0;d--){const u=r[d];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":uWe,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};var hWe=Object.create,$V=Object.defineProperty,fWe=Object.getOwnPropertyDescriptor,pWe=Object.getOwnPropertyNames,mWe=Object.getPrototypeOf,gWe=Object.prototype.hasOwnProperty,aR=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),vWe=(t,e)=>{for(var n in e)$V(t,n,{get:e[n],enumerable:!0})},yWe=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of pWe(e))!gWe.call(t,r)&&r!==n&&$V(t,r,{get:()=>e[r],enumerable:!(i=fWe(e,r))||i.enumerable});return t},CS=(t,e,n)=>(n=t!=null?hWe(mWe(t)):{},yWe(e||!t||!t.__esModule?$V(n,"default",{value:t,enumerable:!0}):n,t)),xWe=aR((t,e)=>{(function(n,i){typeof t=="object"?e.exports=i():typeof define=="function"&&define.amd?define(i):n.Alea=i()})(t,function(){return n.importState=function(r){var s=new n;return s.importState(r),s},n;function n(){return function(r){var s=0,o=0,a=0,l=1;r.length==0&&(r=[+new Date]);var c=i();s=c(" "),o=c(" "),a=c(" ");for(var d=0;d<r.length;d++)s-=c(r[d]),s<0&&(s+=1),o-=c(r[d]),o<0&&(o+=1),a-=c(r[d]),a<0&&(a+=1);c=null;var u=function(){var h=2091639*s+l*23283064365386963e-26;return s=o,o=a,a=h-(l=h|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=r,u.exportState=function(){return[s,o,a,l]},u.importState=function(h){s=+h[0]||0,o=+h[1]||0,a=+h[2]||0,l=+h[3]||0},u}(Array.prototype.slice.call(arguments))}function i(){var r=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){r+=o.charCodeAt(a);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),mce=aR((t,e)=>{(function(n,i){typeof t=="object"&&typeof e<"u"?i(t):typeof define=="function"&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})})(t,function(n){n.SVD=function(i,r,s,o,a){if(r=r===void 0||r,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,d,u,h,f,p,m,g,v,y,x,b=i[0].length,w=i.length;if(w<b)throw new TypeError("Invalid matrix: m < n");for(var E=[],A=[],S=[],C=r==="f"?w:b,T=v=p=0;T<w;T++)A[T]=new Array(C).fill(0);for(T=0;T<b;T++)S[T]=new Array(b).fill(0);var P,R=new Array(b).fill(0);for(T=0;T<w;T++)for(l=0;l<b;l++)A[T][l]=i[T][l];for(T=0;T<b;T++){for(E[T]=p,g=0,d=T+1,l=T;l<w;l++)g+=Math.pow(A[l][T],2);if(g<a)p=0;else for(m=(f=A[T][T])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,A[T][T]=f-p,l=d;l<b;l++){for(g=0,c=T;c<w;c++)g+=A[c][T]*A[c][l];for(f=g/m,c=T;c<w;c++)A[c][l]=A[c][l]+f*A[c][T]}for(R[T]=p,g=0,l=d;l<b;l++)g+=Math.pow(A[T][l],2);if(g<a)p=0;else{for(m=(f=A[T][T+1])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,A[T][T+1]=f-p,l=d;l<b;l++)E[l]=A[T][l]/m;for(l=d;l<w;l++){for(g=0,c=d;c<b;c++)g+=A[l][c]*A[T][c];for(c=d;c<b;c++)A[l][c]=A[l][c]+g*E[c]}}v<(y=Math.abs(R[T])+Math.abs(E[T]))&&(v=y)}if(s)for(T=b-1;0<=T;T--){if(p!==0){for(m=A[T][T+1]*p,l=d;l<b;l++)S[l][T]=A[T][l]/m;for(l=d;l<b;l++){for(g=0,c=d;c<b;c++)g+=A[T][c]*S[c][l];for(c=d;c<b;c++)S[c][l]=S[c][l]+g*S[c][T]}}for(l=d;l<b;l++)S[T][l]=0,S[l][T]=0;S[T][T]=1,p=E[T],d=T}if(r){if(r==="f")for(T=b;T<w;T++){for(l=b;l<w;l++)A[T][l]=0;A[T][T]=1}for(T=b-1;0<=T;T--){for(d=T+1,p=R[T],l=d;l<C;l++)A[T][l]=0;if(p!==0){for(m=A[T][T]*p,l=d;l<C;l++){for(g=0,c=d;c<w;c++)g+=A[c][T]*A[c][l];for(f=g/m,c=T;c<w;c++)A[c][l]=A[c][l]+f*A[c][T]}for(l=T;l<w;l++)A[l][T]=A[l][T]/p}else for(l=T;l<w;l++)A[l][T]=0;A[T][T]=A[T][T]+1}}for(o*=v,c=b-1;0<=c;c--)for(var L=0;L<50;L++){for(P=!1,d=c;0<=d;d--){if(Math.abs(E[d])<=o){P=!0;break}if(Math.abs(R[d-1])<=o)break}if(!P){for(h=0,u=d-(g=1),T=d;T<c+1&&(f=g*E[T],E[T]=h*E[T],!(Math.abs(f)<=o));T++)if(p=R[T],R[T]=Math.sqrt(f*f+p*p),h=p/(m=R[T]),g=-f/m,r)for(l=0;l<w;l++)y=A[l][u],x=A[l][T],A[l][u]=y*h+x*g,A[l][T]=-y*g+x*h}if(x=R[c],d===c){if(x<0&&(R[c]=-x,s))for(l=0;l<b;l++)S[l][c]=-S[l][c];break}for(v=R[d],f=(((y=R[c-1])-x)*(y+x)+((p=E[c-1])-(m=E[c]))*(p+m))/(2*m*y),p=Math.sqrt(f*f+1),f=((v-x)*(v+x)+m*(y/(f<0?f-p:f+p)-m))/v,T=d+(g=h=1);T<c+1;T++){if(p=E[T],y=R[T],m=g*p,p*=h,x=Math.sqrt(f*f+m*m),f=v*(h=f/(E[T-1]=x))+p*(g=m/x),p=-v*g+p*h,m=y*g,y*=h,s)for(l=0;l<b;l++)v=S[l][T-1],x=S[l][T],S[l][T-1]=v*h+x*g,S[l][T]=-v*g+x*h;if(x=Math.sqrt(f*f+m*m),f=(h=f/(R[T-1]=x))*p+(g=m/x)*y,v=-g*p+h*y,r)for(l=0;l<w;l++)y=A[l][T-1],x=A[l][T],A[l][T-1]=y*h+x*g,A[l][T]=-y*g+x*h}E[d]=0,E[c]=f,R[c]=v}for(T=0;T<b;T++)R[T]<o&&(R[T]=0);return{u:A,q:R,v:S}},n.VERSION="1.1.1",Object.defineProperty(n,"__esModule",{value:!0})})}),bWe=aR(t=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var h=this||n;if(u=parseFloat(u),h.ctx||d(),typeof u<"u"&&u>=0&&u<=1){if(h._volume=u,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var p=h._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=h._howls[f]._soundById(p[m]);g&&g._node&&(g._node.volume=g._volume*u)}return h}return h._volume},mute:function(u){var h=this||n;h.ctx||d(),h._muted=u,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u?0:h._volume,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var p=h._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=h._howls[f]._soundById(p[m]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return h},stop:function(){for(var u=this||n,h=0;h<u._howls.length;h++)u._howls[h].stop();return u},unload:function(){for(var u=this||n,h=u._howls.length-1;h>=0;h--)u._howls[h].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,d()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var h=new Audio;h.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return u}if(!h||typeof h.canPlayType!="function")return u;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",m=p.match(/OPR\/([0-6].)/g),g=m&&parseInt(m[0].split("/")[1],10)<33,v=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,y=p.match(/Version\/(.*?) /),x=v&&y&&parseInt(y[1],10)<15;return u._codecs={mp3:!!(!g&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var h=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var g=u._howls[m]._getSoundIds(),v=0;v<g.length;v++){var y=u._howls[m]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var b=0;b<u._howls.length;b++)u._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var h=this||n;return u._unlocked&&h._html5AudioPool.push(u),h},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var h=0;h<u._howls.length;h++)if(u._howls[h]._webAudio){for(var f=0;f<u._howls[h]._sounds.length;f++)if(!u._howls[h]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var h=0;h<u._howls.length;h++)u._howls[h]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,i=function(u){var h=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(u)};i.prototype={init:function(u){var h=this;return n.ctx||d(),h._autoplay=u.autoplay||!1,h._format=typeof u.format!="string"?u.format:[u.format],h._html5=u.html5||!1,h._muted=u.mute||!1,h._loop=u.loop||!1,h._pool=u.pool||5,h._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,h._rate=u.rate||1,h._sprite=u.sprite||{},h._src=typeof u.src!="string"?u.src:[u.src],h._volume=u.volume!==void 0?u.volume:1,h._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=u.onend?[{fn:u.onend}]:[],h._onfade=u.onfade?[{fn:u.onfade}]:[],h._onload=u.onload?[{fn:u.onload}]:[],h._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],h._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],h._onpause=u.onpause?[{fn:u.onpause}]:[],h._onplay=u.onplay?[{fn:u.onplay}]:[],h._onstop=u.onstop?[{fn:u.onstop}]:[],h._onmute=u.onmute?[{fn:u.onmute}]:[],h._onvolume=u.onvolume?[{fn:u.onvolume}]:[],h._onrate=u.onrate?[{fn:u.onrate}]:[],h._onseek=u.onseek?[{fn:u.onseek}]:[],h._onunlock=u.onunlock?[{fn:u.onunlock}]:[],h._onresume=[],h._webAudio=n.usingWebAudio&&!h._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var u=this,h=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,m;if(u._format&&u._format[f])p=u._format[f];else{if(m=u._src[f],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(m),p||(p=/\.([^.]+)$/.exec(m.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&n.codecs(p)){h=u._src[f];break}}if(!h){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=h,u._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new r(u),u._webAudio&&o(u),u},play:function(u,h){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var m=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(m++,p=f._sounds[g]._id);m===1?u=null:p=null}}var v=p?f._soundById(p):f._inactiveSound();if(!v)return null;if(p&&!u&&(u=v._sprite||"__default"),f._state!=="loaded"){v._sprite=u,v._ended=!1;var y=v._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(p&&!v._paused)return h||f._loadQueue("play"),v._id;f._webAudio&&n._autoResume();var x=Math.max(0,v._seek>0?v._seek:f._sprite[u][0]/1e3),b=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-x),w=b*1e3/Math.abs(v._rate),E=f._sprite[u][0]/1e3,A=(f._sprite[u][0]+f._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var S=function(){v._paused=!1,v._seek=x,v._start=E,v._stop=A,v._loop=!!(v._loop||f._sprite[u][2])};if(x>=A){f._ended(v);return}var C=v._node;if(f._webAudio){var T=function(){f._playLock=!1,S(),f._refreshBuffer(v);var O=v._muted||f._muted?0:v._volume;C.gain.setValueAtTime(O,n.ctx.currentTime),v._playStart=n.ctx.currentTime,typeof C.bufferSource.start>"u"?v._loop?C.bufferSource.noteGrainOn(0,x,86400):C.bufferSource.noteGrainOn(0,x,b):v._loop?C.bufferSource.start(0,x,86400):C.bufferSource.start(0,x,b),w!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),w)),h||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?T():(f._playLock=!0,f.once("resume",T),f._clearTimer(v._id))}else{var P=function(){C.currentTime=x,C.muted=v._muted||f._muted||n._muted||C.muted,C.volume=v._volume*n.volume(),C.playbackRate=v._rate;try{var O=C.play();if(O&&typeof Promise<"u"&&(O instanceof Promise||typeof O.then=="function")?(f._playLock=!0,S(),O.then(function(){f._playLock=!1,C._unlocked=!0,h?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):h||(f._playLock=!1,S(),f._emit("play",v._id)),C.playbackRate=v._rate,C.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),w):(f._endTimers[v._id]=function(){f._ended(v),C.removeEventListener("ended",f._endTimers[v._id],!1)},C.addEventListener("ended",f._endTimers[v._id],!1))}catch(B){f._emit("playerror",v._id,B)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=f._src,C.load());var R=window&&window.ejecta||!C.readyState&&n._navigator.isCocoonJS;if(C.readyState>=3||R)P();else{f._playLock=!0,f._state="loading";var L=function(){f._state="loaded",P(),C.removeEventListener(n._canPlayEvent,L,!1)};C.addEventListener(n._canPlayEvent,L,!1),f._clearTimer(v._id)}}return v._id},pause:function(u){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(u)}}),h;for(var f=h._getSoundIds(u),p=0;p<f.length;p++){h._clearTimer(f[p]);var m=h._soundById(f[p]);if(m&&!m._paused&&(m._seek=h.seek(f[p]),m._rateSeek=0,m._paused=!0,h._stopFade(f[p]),m._node))if(h._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),h._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||h._emit("pause",m?m._id:null)}return h},stop:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),m=0;m<p.length;m++){f._clearTimer(p[m]);var g=f._soundById(p[m]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(p[m]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),h||f._emit("stop",g._id))}return f},mute:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,h)}}),f;if(typeof h>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(h),m=0;m<p.length;m++){var g=f._soundById(p[m]);g&&(g._muted=u,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=n._muted?!0:u),f._emit("mute",g._id))}return f},volume:function(){var u=this,h=arguments,f,p;if(h.length===0)return u._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var m=u._getSoundIds(),g=m.indexOf(h[0]);g>=0?p=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,h)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)v=u._soundById(p[y]),v&&(v._volume=f,h[2]||u._stopFade(p[y]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,n.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*n.volume()),u._emit("volume",v._id))}else return v=p?u._soundById(p):u._sounds[0],v?v._volume:0;return u},fade:function(u,h,f,p){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,h,f,p)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),m.volume(u,p);for(var g=m._getSoundIds(p),v=0;v<g.length;v++){var y=m._soundById(g[v]);if(y){if(p||m._stopFade(g[v]),m._webAudio&&!y._muted){var x=n.ctx.currentTime,b=x+f/1e3;y._volume=u,y._node.gain.setValueAtTime(u,x),y._node.gain.linearRampToValueAtTime(h,b)}m._startFadeInterval(y,u,h,f,g[v],typeof p>"u")}}return m},_startFadeInterval:function(u,h,f,p,m,g){var v=this,y=h,x=f-h,b=Math.abs(x/.01),w=Math.max(4,b>0?p/b:p),E=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var A=(Date.now()-E)/p;E=Date.now(),y+=x*A,y=Math.round(y*100)/100,x<0?y=Math.max(f,y):y=Math.min(f,y),v._webAudio?u._volume=y:v.volume(y,u._id,!0),g&&(v._volume=y),(f<h&&y<=f||f>h&&y>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(f,u._id),v._emit("fade",u._id))},w)},_stopFade:function(u){var h=this,f=h._soundById(u);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,u),f._fadeTo=null,h._emit("fade",u)),h},loop:function(){var u=this,h=arguments,f,p,m;if(h.length===0)return u._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],u._loop=f;else return m=u._soundById(parseInt(h[0],10)),m?m._loop:!1;else h.length===2&&(f=h[0],p=parseInt(h[1],10));for(var g=u._getSoundIds(p),v=0;v<g.length;v++)m=u._soundById(g[v]),m&&(m._loop=f,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=f,f&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(g[v])&&(u.pause(g[v],!0),u.play(g[v],!0)))));return u},rate:function(){var u=this,h=arguments,f,p;if(h.length===0)p=u._sounds[0]._id;else if(h.length===1){var m=u._getSoundIds(),g=m.indexOf(h[0]);g>=0?p=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));var v;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,h)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)if(v=u._soundById(p[y]),v){u.playing(p[y])&&(v._rateSeek=u.seek(p[y]),v._playStart=u._webAudio?n.ctx.currentTime:v._playStart),v._rate=f,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):v._node&&(v._node.playbackRate=f);var x=u.seek(p[y]),b=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-x,w=b*1e3/Math.abs(v._rate);(u._endTimers[p[y]]||!v._paused)&&(u._clearTimer(p[y]),u._endTimers[p[y]]=setTimeout(u._ended.bind(u,v),w)),u._emit("rate",v._id)}}else return v=u._soundById(p),v?v._rate:u._rate;return u},seek:function(){var u=this,h=arguments,f,p;if(h.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(h.length===1){var m=u._getSoundIds(),g=m.indexOf(h[0]);g>=0?p=parseInt(h[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,h)}}),u;var v=u._soundById(p);if(v)if(typeof f=="number"&&f>=0){var y=u.playing(p);y&&u.pause(p,!0),v._seek=f,v._ended=!1,u._clearTimer(p),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var x=function(){y&&u.play(p,!0),u._emit("seek",p)};if(y&&!u._webAudio){var b=function(){u._playLock?setTimeout(b,0):x()};setTimeout(b,0)}else x()}else if(u._webAudio){var w=u.playing(p)?n.ctx.currentTime-v._playStart:0,E=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(E+w*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var h=this;if(typeof u=="number"){var f=h._soundById(u);return f?!f._paused:!1}for(var p=0;p<h._sounds.length;p++)if(!h._sounds[p]._paused)return!0;return!1},duration:function(u){var h=this,f=h._duration,p=h._soundById(u);return p&&(f=h._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,h=u._sounds,f=0;f<h.length;f++)h[f]._paused||u.stop(h[f]._id),u._webAudio||(u._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(n._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),n._releaseHtml5Audio(h[f]._node)),delete h[f]._node,u._clearTimer(h[f]._id);var p=n._howls.indexOf(u);p>=0&&n._howls.splice(p,1);var m=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===u._src||u._src.indexOf(n._howls[f]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,h,f,p){var m=this,g=m["_on"+u];return typeof h=="function"&&g.push(p?{id:f,fn:h,once:p}:{id:f,fn:h}),m},off:function(u,h,f){var p=this,m=p["_on"+u],g=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(g=0;g<m.length;g++){var v=f===m[g].id;if(h===m[g].fn&&v||!h&&v){m.splice(g,1);break}}else if(u)p["_on"+u]=[];else{var y=Object.keys(p);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(p[y[g]])&&(p[y[g]]=[])}return p},once:function(u,h,f){var p=this;return p.on(u,h,f,1),p},_emit:function(u,h,f){for(var p=this,m=p["_on"+u],g=m.length-1;g>=0;g--)(!m[g].id||m[g].id===h||u==="load")&&(setTimeout(function(v){v.call(this,h,f)}.bind(p,m[g].fn),0),m[g].once&&p.off(u,m[g].fn,m[g].id));return p._loadQueue(u),p},_loadQueue:function(u){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===u&&(h._queue.shift(),h._loadQueue()),u||f.action()}return h},_ended:function(u){var h=this,f=u._sprite;if(!h._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(h._ended.bind(h,u),100),h;var p=!!(u._loop||h._sprite[f][2]);if(h._emit("end",u._id),!h._webAudio&&p&&h.stop(u._id,!0).play(u._id),h._webAudio&&p){h._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);h._endTimers[u._id]=setTimeout(h._ended.bind(h,u),m)}return h._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,h._clearTimer(u._id),h._cleanBuffer(u._node),n._autoSuspend()),!h._webAudio&&!p&&h.stop(u._id,!0),h},_clearTimer:function(u){var h=this;if(h._endTimers[u]){if(typeof h._endTimers[u]!="function")clearTimeout(h._endTimers[u]);else{var f=h._soundById(u);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[u],!1)}delete h._endTimers[u]}return h},_soundById:function(u){for(var h=this,f=0;f<h._sounds.length;f++)if(u===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var h=0;h<u._sounds.length;h++)if(u._sounds[h]._ended)return u._sounds[h].reset();return new r(u)},_drain:function(){var u=this,h=u._pool,f=0,p=0;if(!(u._sounds.length<h)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=h)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var h=this;if(typeof u>"u"){for(var f=[],p=0;p<h._sounds.length;p++)f.push(h._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var h=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=s[h._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),h},_cleanBuffer:function(u){var h=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,h},_clearSound:function(u){var h=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);h||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(u){this._parent=u,this.init()};r.prototype={init:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,h._sounds.push(u),u.create(),u},create:function(){var u=this,h=u._parent,f=n._muted||u._muted||u._parent._muted?0:u._volume;return h._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(f,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=h._src,u._node.preload=h._preload===!0?"auto":h._preload,u._node.volume=f*n.volume(),u._node.load()),u},reset:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,h=u._parent;h._duration=Math.ceil(u._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,h=u._parent;h._duration===1/0&&(h._duration=Math.ceil(u._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var h=u._src;if(s[h]){u._duration=s[h].duration,c(u);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),p=new Uint8Array(f.length),m=0;m<f.length;++m)p[m]=f.charCodeAt(m);l(p.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,h,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){g.setRequestHeader(v,u._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[h],u.load())},a(g)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},p=function(m){m&&h._sounds.length>0?(s[h._src]=m,c(h,m)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(p).catch(f):n.ctx.decodeAudioData(u,p,f)},c=function(u,h){h&&!u._duration&&(u._duration=h.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},d=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),h=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(u&&f&&f<9){var p=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!p&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:n,Howl:i}}),typeof t<"u"&&(t.Howler=n,t.Howl=i),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=n,global.Howl=i,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=i,window.Sound=r)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var r=i._howls.length-1;r>=0;r--)i._howls[r].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,r=typeof r!="number"?s._pos[2]:r,typeof n=="number")s._pos=[n,i,r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,i,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(i=typeof i!="number"?c[1]:i,r=typeof r!="number"?c[2]:r,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,i,r,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,i,r,s,o,a);else return c;return l},Howl.prototype.init=function(n){return function(i){var r=this;return r._orientation=i.orientation||[1,0,0],r._stereo=i.stereo||null,r._pos=i.pos||null,r._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},r._onstereo=i.onstereo?[{fn:i.onstereo}]:[],r._onpos=i.onpos?[{fn:i.onpos}]:[],r._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(n,i)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")r._stereo=n,r._pos=[n,0,0];else return r._stereo;for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",l._id);else return l._stereo}return r},Howl.prototype.pos=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,i,r,s)}}),o;if(i=typeof i!="number"?0:i,r=typeof r!="number"?-.5:r,typeof s>"u")if(typeof n=="number")o._pos=[n,i,r];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,i,r],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(n,i,r)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,i,r,s)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,r=typeof r!="number"?o._orientation[2]:r,typeof s>"u")if(typeof n=="number")o._orientation=[n,i,r];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,i,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(n,i,r)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,r,s,o;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")r=i[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),n._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(i[0],10)),o?o._pannerAttr:n._pannerAttr;else i.length===2&&(r=i[0],s=parseInt(i[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var d=o._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var i=this,r=i._parent;i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,n.call(this),i._stereo?r.stereo(i._stereo):i._pos&&r.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,r=i._parent;return i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,i._stereo?r.stereo(i._stereo):i._pos?r.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,r._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var e=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}}()}),wWe=aR((t,e)=>{e.exports=function(n,i){for(var r=n.split("."),s=i.split("."),o=0;o<3;o++){var a=Number(r[o]),l=Number(s[o]);if(a>l)return 1;if(l>a)return-1;if(!isNaN(a)&&isNaN(l))return 1;if(isNaN(a)&&!isNaN(l))return-1}return 0}}),Ax="149",Fa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_We=0,zX=1,SWe=2,XV=1,gce=2,Rb=3,oc=0,Qr=1,ca=2,wr=0,Y0=1,FX=2,UX=3,VX=4,EWe=5,t0=100,MWe=101,AWe=102,HX=103,jX=104,TWe=200,CWe=201,PWe=202,DWe=203,vce=204,yce=205,RWe=206,OWe=207,LWe=208,IWe=209,kWe=210,NWe=0,BWe=1,zWe=2,Gz=3,FWe=4,UWe=5,VWe=6,HWe=7,xce=0,jWe=1,GWe=2,Sd=0,WWe=1,qWe=2,$We=3,XWe=4,YWe=5,bce=300,ig=301,rg=302,Wz=303,qz=304,PS=306,fd=1e3,sr=1001,$z=1002,Jn=1003,GX=1004,rI=1005,an=1006,KWe=1007,zy=1008,Vs=1009,ZWe=1010,QWe=1011,wce=1012,JWe=1013,rf=1014,sl=1015,Fy=1016,e8e=1017,t8e=1018,km=1020,n8e=1021,Wl=1023,i8e=1024,r8e=1025,Nm=1026,sg=1027,s8e=1028,o8e=1029,_ce=1030,a8e=1031,l8e=1033,sI=33776,oI=33777,aI=33778,lI=33779,WX=35840,qX=35841,$X=35842,XX=35843,c8e=36196,YX=37492,KX=37496,ZX=37808,QX=37809,JX=37810,eY=37811,tY=37812,nY=37813,iY=37814,rY=37815,sY=37816,oY=37817,aY=37818,lY=37819,cY=37820,uY=37821,cI=36492,u8e=36283,dY=36284,hY=36285,fY=36286,pu=3e3,Zt=3001,Zd=3200,Sce=3201,d8e=0,h8e=1,Uc="srgb",o2="srgb-linear",uI=7680,f8e=519,Xz=35044,pY="300 es",Yz=1035,uo=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let n=this._listeners[t];if(n!==void 0){let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let e=this._listeners[t.type];if(e!==void 0){t.target=this;let n=e.slice(0);for(let i=0,r=n.length;i<r;i++)n[i].call(this,t);t.target=null}}},Ms=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],mY=1234567,uw=Math.PI/180,E_=180/Math.PI;function lu(){let t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ms[t&255]+Ms[t>>8&255]+Ms[t>>16&255]+Ms[t>>24&255]+"-"+Ms[e&255]+Ms[e>>8&255]+"-"+Ms[e>>16&15|64]+Ms[e>>24&255]+"-"+Ms[n&63|128]+Ms[n>>8&255]+"-"+Ms[n>>16&255]+Ms[n>>24&255]+Ms[i&255]+Ms[i>>8&255]+Ms[i>>16&255]+Ms[i>>24&255]).toLowerCase()}function Dr(t,e,n){return Math.max(e,Math.min(n,t))}function YV(t,e){return(t%e+e)%e}function p8e(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function m8e(t,e,n){return t!==e?(n-t)/(e-t):0}function dw(t,e,n){return(1-n)*t+n*e}function g8e(t,e,n,i){return dw(t,e,1-Math.exp(-n*i))}function v8e(t,e=1){return e-Math.abs(YV(t,e*2)-e)}function y8e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function x8e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function b8e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function w8e(t,e){return t+Math.random()*(e-t)}function _8e(t){return t*(.5-Math.random())}function S8e(t){t!==void 0&&(mY=t);let e=mY+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function E8e(t){return t*uw}function M8e(t){return t*E_}function Kz(t){return(t&t-1)===0&&t!==0}function A8e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function a2(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function T8e(t,e,n,i,r){let s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),d=o((e+i)/2),u=s((e-i)/2),h=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*d,l*u,l*h,a*c);break;case"YZY":t.set(l*h,a*d,l*u,a*c);break;case"ZXZ":t.set(l*u,l*h,a*d,a*c);break;case"XZX":t.set(a*d,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*d,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function pd(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function oi(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var pn=Object.freeze({__proto__:null,DEG2RAD:uw,RAD2DEG:E_,ceilPowerOfTwo:A8e,clamp:Dr,damp:g8e,degToRad:E8e,denormalize:pd,euclideanModulo:YV,floorPowerOfTwo:a2,generateUUID:lu,inverseLerp:m8e,isPowerOfTwo:Kz,lerp:dw,mapLinear:p8e,normalize:oi,pingpong:v8e,radToDeg:M8e,randFloat:w8e,randFloatSpread:_8e,randInt:b8e,seededRandom:S8e,setQuaternionFromProperEuler:T8e,smootherstep:x8e,smoothstep:y8e}),Se=class{constructor(e=0,n=0){Se.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){let i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},cs=class{constructor(){cs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,i,r,s,o,a,l){let c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],d=n[7],u=n[2],h=n[5],f=n[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],w=i[5],E=i[8];return r[0]=s*p+o*v+a*b,r[3]=s*m+o*y+a*w,r[6]=s*g+o*x+a*E,r[1]=l*p+c*v+d*b,r[4]=l*m+c*y+d*w,r[7]=l*g+c*x+d*E,r[2]=u*p+h*v+f*b,r[5]=u*m+h*y+f*w,r[8]=u*g+h*x+f*E,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*r*c+n*o*a+i*r*l-i*s*a}invert(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],d=c*s-o*l,u=o*a-c*r,h=l*r-s*a,f=e*d+n*u+i*h;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return t[0]=d*p,t[1]=(i*l-c*n)*p,t[2]=(o*n-i*s)*p,t[3]=u*p,t[4]=(c*e-i*a)*p,t[5]=(i*r-o*e)*p,t[6]=h*p,t[7]=(n*a-l*e)*p,t[8]=(s*e-n*r)*p,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){let a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(dI.makeScale(t,e)),this}rotate(t){return this.premultiply(dI.makeRotation(-t)),this}translate(t,e){return this.premultiply(dI.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){let n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}},dI=new cs;function Ece(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}var C8e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function eA(t,e){return new C8e[t](e)}function l2(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Bm(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function jT(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}var hI={[Uc]:{[o2]:Bm},[o2]:{[Uc]:jT}},$s={legacyMode:!0,get workingColorSpace(){return o2},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(hI[e]&&hI[e][n]!==void 0){let i=hI[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Mce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mr={r:0,g:0,b:0},Rl={h:0,s:0,l:0},tA={h:0,s:0,l:0};function fI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function nA(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}var Lt=class{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,e===void 0&&n===void 0?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Uc){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,$s.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=$s.workingColorSpace){return this.r=t,this.g=e,this.b=n,$s.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=$s.workingColorSpace){if(t=YV(t,1),e=Dr(e,0,1),n=Dr(n,0,1),e===0)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+e):n+e-n*e,s=2*n-r;this.r=fI(s,r,t+1/3),this.g=fI(s,r,t),this.b=fI(s,r,t-1/3)}return $s.toWorkingColorSpace(this,i),this}setStyle(t,e=Uc){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let r,s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,$s.toWorkingColorSpace(this,e),n(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,$s.toWorkingColorSpace(this,e),n(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let a=parseFloat(r[1])/360,l=parseFloat(r[2])/100,c=parseFloat(r[3])/100;return n(r[4]),this.setHSL(a,l,c,e)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){let r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,$s.toWorkingColorSpace(this,e),this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,$s.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=Uc){let n=Mce[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Bm(t.r),this.g=Bm(t.g),this.b=Bm(t.b),this}copyLinearToSRGB(t){return this.r=jT(t.r),this.g=jT(t.g),this.b=jT(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Uc){return $s.fromWorkingColorSpace(nA(this,Mr),t),Dr(Mr.r*255,0,255)<<16^Dr(Mr.g*255,0,255)<<8^Dr(Mr.b*255,0,255)<<0}getHexString(t=Uc){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=$s.workingColorSpace){$s.fromWorkingColorSpace(nA(this,Mr),e);let n=Mr.r,i=Mr.g,r=Mr.b,s=Math.max(n,i,r),o=Math.min(n,i,r),a,l,c=(o+s)/2;if(o===s)a=0,l=0;else{let d=s-o;switch(l=c<=.5?d/(s+o):d/(2-s-o),s){case n:a=(i-r)/d+(i<r?6:0);break;case i:a=(r-n)/d+2;break;case r:a=(n-i)/d+4;break}a/=6}return t.h=a,t.s=l,t.l=c,t}getRGB(t,e=$s.workingColorSpace){return $s.fromWorkingColorSpace(nA(this,Mr),e),t.r=Mr.r,t.g=Mr.g,t.b=Mr.b,t}getStyle(t=Uc){return $s.fromWorkingColorSpace(nA(this,Mr),t),t!==Uc?`color(${t} ${Mr.r} ${Mr.g} ${Mr.b})`:`rgb(${Mr.r*255|0},${Mr.g*255|0},${Mr.b*255|0})`}offsetHSL(t,e,n){return this.getHSL(Rl),Rl.h+=t,Rl.s+=e,Rl.l+=n,this.setHSL(Rl.h,Rl.s,Rl.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Rl),t.getHSL(tA);let n=dw(Rl.h,tA.h,e),i=dw(Rl.s,tA.s,e),r=dw(Rl.l,tA.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Lt.NAMES=Mce;var _v,Ace=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{_v===void 0&&(_v=l2("canvas")),_v.width=t.width,_v.height=t.height;let n=_v.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=_v}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=l2("canvas");e.width=t.width,e.height=t.height;let n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);let i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let s=0;s<r.length;s++)r[s]=Bm(r[s]/255)*255;return n.putImageData(i,0,0),e}else if(t.data){let e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Bm(e[n]/255)*255):e[n]=Bm(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Tce=class{constructor(t=null){this.isSource=!0,this.uuid=lu(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?r.push(pI(i[s].image)):r.push(pI(i[s]))}else r=pI(i);n.url=r}return e||(t.images[this.uuid]=n),n}};function pI(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Ace.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var P8e=0,kr=class extends uo{constructor(t=kr.DEFAULT_IMAGE,e=kr.DEFAULT_MAPPING,n=sr,i=sr,r=an,s=zy,o=Wl,a=Vs,l=kr.DEFAULT_ANISOTROPY,c=pu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:P8e++}),this.uuid=lu(),this.name="",this.source=new Tce(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==bce)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case fd:t.x=t.x-Math.floor(t.x);break;case sr:t.x=t.x<0?0:1;break;case $z:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case fd:t.y=t.y-Math.floor(t.y);break;case sr:t.y=t.y<0?0:1;break;case $z:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}};kr.DEFAULT_IMAGE=null;kr.DEFAULT_MAPPING=bce;kr.DEFAULT_ANISOTROPY=1;var sn=class{constructor(t=0,e=0,n=0,i=1){sn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r,s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],u=s[9],h=s[2],f=s[6],p=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-h)<.01&&Math.abs(u-f)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+h)<.1&&Math.abs(u+f)<.1&&Math.abs(o+d+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let g=(o+1)/2,v=(d+1)/2,y=(p+1)/2,x=(a+c)/4,b=(l+h)/4,w=(u+f)/4;return g>v&&g>y?g<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=x/n,r=b/n):v>y?v<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(v),n=x/i,r=w/i):y<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=b/r,i=w/r),this.set(n,i,r,e),this}let m=Math.sqrt((f-u)*(f-u)+(l-h)*(l-h)+(c-a)*(c-a));return Math.abs(m)<.001&&(m=1),this.x=(f-u)/m,this.y=(l-h)/m,this.z=(c-a)/m,this.w=Math.acos((o+d+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},jn=class extends uo{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new sn(0,0,t,e),this.scissorTest=!1,this.viewport=new sn(0,0,t,e);let i={width:t,height:e,depth:1};this.texture=new kr(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:an,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new Tce(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Cce=class extends kr{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=Jn,this.minFilter=Jn,this.wrapR=sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},D8e=class extends kr{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=Jn,this.minFilter=Jn,this.wrapR=sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},R8e=class extends jn{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isWebGLMultipleRenderTargets=!0;let r=this.texture;this.texture=[];for(let s=0;s<n;s++)this.texture[s]=r.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}},vn=class{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],c=n[i+2],d=n[i+3],u=r[s+0],h=r[s+1],f=r[s+2],p=r[s+3];if(o===0){t[e+0]=a,t[e+1]=l,t[e+2]=c,t[e+3]=d;return}if(o===1){t[e+0]=u,t[e+1]=h,t[e+2]=f,t[e+3]=p;return}if(d!==p||a!==u||l!==h||c!==f){let m=1-o,g=a*u+l*h+c*f+d*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let b=Math.sqrt(y),w=Math.atan2(b,g*v);m=Math.sin(m*w)/b,o=Math.sin(o*w)/b}let x=o*v;if(a=a*m+u*x,l=l*m+h*x,c=c*m+f*x,d=d*m+p*x,m===1-o){let b=1/Math.sqrt(a*a+l*l+c*c+d*d);a*=b,l*=b,c*=b,d*=b}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=d}static multiplyQuaternionsFlat(t,e,n,i,r,s){let o=n[i],a=n[i+1],l=n[i+2],c=n[i+3],d=r[s],u=r[s+1],h=r[s+2],f=r[s+3];return t[e]=o*f+c*d+a*h-l*u,t[e+1]=a*f+c*u+l*d-o*h,t[e+2]=l*f+c*h+o*u-a*d,t[e+3]=c*f-o*d-a*u-l*h,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){let n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),d=o(r/2),u=a(n/2),h=a(i/2),f=a(r/2);switch(s){case"XYZ":this._x=u*c*d+l*h*f,this._y=l*h*d-u*c*f,this._z=l*c*f+u*h*d,this._w=l*c*d-u*h*f;break;case"YXZ":this._x=u*c*d+l*h*f,this._y=l*h*d-u*c*f,this._z=l*c*f-u*h*d,this._w=l*c*d+u*h*f;break;case"ZXY":this._x=u*c*d-l*h*f,this._y=l*h*d+u*c*f,this._z=l*c*f+u*h*d,this._w=l*c*d-u*h*f;break;case"ZYX":this._x=u*c*d-l*h*f,this._y=l*h*d+u*c*f,this._z=l*c*f-u*h*d,this._w=l*c*d+u*h*f;break;case"YZX":this._x=u*c*d+l*h*f,this._y=l*h*d+u*c*f,this._z=l*c*f-u*h*d,this._w=l*c*d-u*h*f;break;case"XZY":this._x=u*c*d-l*h*f,this._y=l*h*d-u*c*f,this._z=l*c*f+u*h*d,this._w=l*c*d+u*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],d=e[10],u=n+o+d;if(u>0){let h=.5/Math.sqrt(u+1);this._w=.25/h,this._x=(c-a)*h,this._y=(r-l)*h,this._z=(s-i)*h}else if(n>o&&n>d){let h=2*Math.sqrt(1+n-o-d);this._w=(c-a)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(r+l)/h}else if(o>d){let h=2*Math.sqrt(1+o-n-d);this._w=(r-l)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(a+c)/h}else{let h=2*Math.sqrt(1+d-n-o);this._w=(s-i)/h,this._x=(r+l)/h,this._y=(a+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Dr(this.dot(t),-1,1)))}rotateTowards(t,e){let n=this.angleTo(t);if(n===0)return this;let i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;let a=1-o*o;if(a<=Number.EPSILON){let h=1-e;return this._w=h*s+e*this._w,this._x=h*n+e*this._x,this._y=h*i+e*this._y,this._z=h*r+e*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),c=Math.atan2(l,o),d=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=s*d+this._w*u,this._x=n*d+this._x*u,this._y=i*d+this._y*u,this._z=r*d+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){let t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},q=class{constructor(e=0,n=0,i=0){q.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(gY.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(gY.setFromAxisAngle(e,n))}applyMatrix3(e){let n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){let n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*r-a*i,d=l*i+a*n-s*r,u=l*r+s*i-o*n,h=-s*n-o*i-a*r;return this.x=c*l+h*-s+d*-a-u*-o,this.y=d*l+h*-o+u*-s-c*-a,this.z=u*l+h*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){let i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){let n=e.lengthSq();if(n===0)return this.set(0,0,0);let i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return mI.copy(this).projectOnVector(e),this.sub(mI)}reflect(e){return this.sub(mI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;let i=this.dot(e)/n;return Math.acos(Dr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){let r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){let n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){let n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},mI=new q,gY=new vn,_r=class{constructor(t=new q(1/0,1/0,1/0),e=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){let c=t[a],d=t[a+1],u=t[a+2];c<e&&(e=c),d<n&&(n=d),u<i&&(i=u),c>r&&(r=c),d>s&&(s=d),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){let c=t.getX(a),d=t.getY(a),u=t.getZ(a);c<e&&(e=c),d<n&&(n=d),u<i&&(i=u),c>r&&(r=c),d>s&&(s=d),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=Pp.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let n=t.geometry;if(n!==void 0)if(e&&n.attributes!=null&&n.attributes.position!==void 0){let r=n.attributes.position;for(let s=0,o=r.count;s<o;s++)Pp.fromBufferAttribute(r,s).applyMatrix4(t.matrixWorld),this.expandByPoint(Pp)}else n.boundingBox===null&&n.computeBoundingBox(),gI.copy(n.boundingBox),gI.applyMatrix4(t.matrixWorld),this.union(gI);let i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Pp),Pp.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(j1),iA.subVectors(this.max,j1),Sv.subVectors(t.a,j1),Ev.subVectors(t.b,j1),Mv.subVectors(t.c,j1),_h.subVectors(Ev,Sv),Sh.subVectors(Mv,Ev),Dp.subVectors(Sv,Mv);let e=[0,-_h.z,_h.y,0,-Sh.z,Sh.y,0,-Dp.z,Dp.y,_h.z,0,-_h.x,Sh.z,0,-Sh.x,Dp.z,0,-Dp.x,-_h.y,_h.x,0,-Sh.y,Sh.x,0,-Dp.y,Dp.x,0];return!vI(e,Sv,Ev,Mv,iA)||(e=[1,0,0,0,1,0,0,0,1],!vI(e,Sv,Ev,Mv,iA))?!1:(rA.crossVectors(_h,Sh),e=[rA.x,rA.y,rA.z],vI(e,Sv,Ev,Mv,iA))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Pp.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Pp).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Fu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Fu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Fu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Fu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Fu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Fu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Fu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Fu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Fu),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Fu=[new q,new q,new q,new q,new q,new q,new q,new q],Pp=new q,gI=new _r,Sv=new q,Ev=new q,Mv=new q,_h=new q,Sh=new q,Dp=new q,j1=new q,iA=new q,rA=new q,Rp=new q;function vI(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Rp.fromArray(t,s);let a=r.x*Math.abs(Rp.x)+r.y*Math.abs(Rp.y)+r.z*Math.abs(Rp.z),l=e.dot(Rp),c=n.dot(Rp),d=i.dot(Rp);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}var O8e=new _r,G1=new q,yI=new q,gl=class{constructor(t=new q,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let n=this.center;e!==void 0?n.copy(e):O8e.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;G1.subVectors(t,this.center);let e=G1.lengthSq();if(e>this.radius*this.radius){let n=Math.sqrt(e),i=(n-this.radius)*.5;this.center.addScaledVector(G1,i/n),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(yI.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(G1.copy(t.center).add(yI)),this.expandByPoint(G1.copy(t.center).sub(yI))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Uu=new q,xI=new q,sA=new q,Eh=new q,bI=new q,oA=new q,wI=new q,Tx=class{constructor(t=new q,e=new q(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Uu)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Uu.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Uu.copy(this.direction).multiplyScalar(e).add(this.origin),Uu.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){xI.copy(t).add(e).multiplyScalar(.5),sA.copy(e).sub(t).normalize(),Eh.copy(this.origin).sub(xI);let r=t.distanceTo(e)*.5,s=-this.direction.dot(sA),o=Eh.dot(this.direction),a=-Eh.dot(sA),l=Eh.lengthSq(),c=Math.abs(1-s*s),d,u,h,f;if(c>0)if(d=s*a-o,u=s*o-a,f=r*c,d>=0)if(u>=-f)if(u<=f){let p=1/c;d*=p,u*=p,h=d*(d+s*u+2*o)+u*(s*d+u+2*a)+l}else u=r,d=Math.max(0,-(s*u+o)),h=-d*d+u*(u+2*a)+l;else u=-r,d=Math.max(0,-(s*u+o)),h=-d*d+u*(u+2*a)+l;else u<=-f?(d=Math.max(0,-(-s*r+o)),u=d>0?-r:Math.min(Math.max(-r,-a),r),h=-d*d+u*(u+2*a)+l):u<=f?(d=0,u=Math.min(Math.max(-r,-a),r),h=u*(u+2*a)+l):(d=Math.max(0,-(s*r+o)),u=d>0?r:Math.min(Math.max(-r,-a),r),h=-d*d+u*(u+2*a)+l);else u=s>0?-r:r,d=Math.max(0,-(s*u+o)),h=-d*d+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(sA).multiplyScalar(u).add(xI),h}intersectSphere(t,e){Uu.subVectors(t.center,this.origin);let n=Uu.dot(this.direction),i=Uu.dot(Uu)-n*n,r=t.radius*t.radius;if(i>r)return null;let s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){let n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a,l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||r>i||((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),d>=0?(o=(t.min.z-u.z)*d,a=(t.max.z-u.z)*d):(o=(t.max.z-u.z)*d,a=(t.min.z-u.z)*d),n>a||o>i)||((o>n||n!==n)&&(n=o),(a<i||i!==i)&&(i=a),i<0)?null:this.at(n>=0?n:i,e)}intersectsBox(t){return this.intersectBox(t,Uu)!==null}intersectTriangle(t,e,n,i,r){bI.subVectors(e,t),oA.subVectors(n,t),wI.crossVectors(bI,oA);let s=this.direction.dot(wI),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Eh.subVectors(this.origin,t);let a=o*this.direction.dot(oA.crossVectors(Eh,oA));if(a<0)return null;let l=o*this.direction.dot(bI.cross(Eh));if(l<0||a+l>s)return null;let c=-o*Eh.dot(wI);return c<0?null:this.at(c/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},tt=class{constructor(){tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,i,r,s,o,a,l,c,d,u,h,f,p,m){let g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tt().fromArray(this.elements)}copy(t){let e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){let e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,n=t.elements,i=1/Av.setFromMatrixColumn(t,0).length(),r=1/Av.setFromMatrixColumn(t,1).length(),s=1/Av.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r);if(t.order==="XYZ"){let u=s*c,h=s*d,f=o*c,p=o*d;e[0]=a*c,e[4]=-a*d,e[8]=l,e[1]=h+f*l,e[5]=u-p*l,e[9]=-o*a,e[2]=p-u*l,e[6]=f+h*l,e[10]=s*a}else if(t.order==="YXZ"){let u=a*c,h=a*d,f=l*c,p=l*d;e[0]=u+p*o,e[4]=f*o-h,e[8]=s*l,e[1]=s*d,e[5]=s*c,e[9]=-o,e[2]=h*o-f,e[6]=p+u*o,e[10]=s*a}else if(t.order==="ZXY"){let u=a*c,h=a*d,f=l*c,p=l*d;e[0]=u-p*o,e[4]=-s*d,e[8]=f+h*o,e[1]=h+f*o,e[5]=s*c,e[9]=p-u*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if(t.order==="ZYX"){let u=s*c,h=s*d,f=o*c,p=o*d;e[0]=a*c,e[4]=f*l-h,e[8]=u*l+p,e[1]=a*d,e[5]=p*l+u,e[9]=h*l-f,e[2]=-l,e[6]=o*a,e[10]=s*a}else if(t.order==="YZX"){let u=s*a,h=s*l,f=o*a,p=o*l;e[0]=a*c,e[4]=p-u*d,e[8]=f*d+h,e[1]=d,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=h*d+f,e[10]=u-p*d}else if(t.order==="XZY"){let u=s*a,h=s*l,f=o*a,p=o*l;e[0]=a*c,e[4]=-d,e[8]=l*c,e[1]=u*d+p,e[5]=s*c,e[9]=h*d-f,e[2]=f*d-h,e[6]=o*c,e[10]=p*d+u}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(L8e,t,I8e)}lookAt(t,e,n){let i=this.elements;return Qo.subVectors(t,e),Qo.lengthSq()===0&&(Qo.z=1),Qo.normalize(),Mh.crossVectors(n,Qo),Mh.lengthSq()===0&&(Math.abs(n.z)===1?Qo.x+=1e-4:Qo.z+=1e-4,Qo.normalize(),Mh.crossVectors(n,Qo)),Mh.normalize(),aA.crossVectors(Qo,Mh),i[0]=Mh.x,i[4]=aA.x,i[8]=Qo.x,i[1]=Mh.y,i[5]=aA.y,i[9]=Qo.y,i[2]=Mh.z,i[6]=aA.z,i[10]=Qo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],d=n[5],u=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=i[0],E=i[4],A=i[8],S=i[12],C=i[1],T=i[5],P=i[9],R=i[13],L=i[2],O=i[6],B=i[10],$=i[14],X=i[3],H=i[7],U=i[11],N=i[15];return r[0]=s*w+o*C+a*L+l*X,r[4]=s*E+o*T+a*O+l*H,r[8]=s*A+o*P+a*B+l*U,r[12]=s*S+o*R+a*$+l*N,r[1]=c*w+d*C+u*L+h*X,r[5]=c*E+d*T+u*O+h*H,r[9]=c*A+d*P+u*B+h*U,r[13]=c*S+d*R+u*$+h*N,r[2]=f*w+p*C+m*L+g*X,r[6]=f*E+p*T+m*O+g*H,r[10]=f*A+p*P+m*B+g*U,r[14]=f*S+p*R+m*$+g*N,r[3]=v*w+y*C+x*L+b*X,r[7]=v*E+y*T+x*O+b*H,r[11]=v*A+y*P+x*B+b*U,r[15]=v*S+y*R+x*$+b*N,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],d=t[6],u=t[10],h=t[14],f=t[3],p=t[7],m=t[11],g=t[15];return f*(+r*a*d-i*l*d-r*o*u+n*l*u+i*o*h-n*a*h)+p*(+e*a*h-e*l*u+r*s*u-i*s*h+i*l*c-r*a*c)+m*(+e*l*d-e*o*h-r*s*d+n*s*h+r*o*c-n*l*c)+g*(-i*o*c-e*a*d+e*o*u+i*s*d-n*s*u+n*a*c)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){let i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],d=t[9],u=t[10],h=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=d*m*l-p*u*l+p*a*h-o*m*h-d*a*g+o*u*g,y=f*u*l-c*m*l-f*a*h+s*m*h+c*a*g-s*u*g,x=c*p*l-f*d*l+f*o*h-s*p*h-c*o*g+s*d*g,b=f*d*a-c*p*a-f*o*u+s*p*u+c*o*m-s*d*m,w=e*v+n*y+i*x+r*b;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let E=1/w;return t[0]=v*E,t[1]=(p*u*r-d*m*r-p*i*h+n*m*h+d*i*g-n*u*g)*E,t[2]=(o*m*r-p*a*r+p*i*l-n*m*l-o*i*g+n*a*g)*E,t[3]=(d*a*r-o*u*r-d*i*l+n*u*l+o*i*h-n*a*h)*E,t[4]=y*E,t[5]=(c*m*r-f*u*r+f*i*h-e*m*h-c*i*g+e*u*g)*E,t[6]=(f*a*r-s*m*r-f*i*l+e*m*l+s*i*g-e*a*g)*E,t[7]=(s*u*r-c*a*r+c*i*l-e*u*l-s*i*h+e*a*h)*E,t[8]=x*E,t[9]=(f*d*r-c*p*r-f*n*h+e*p*h+c*n*g-e*d*g)*E,t[10]=(s*p*r-f*o*r+f*n*l-e*p*l-s*n*g+e*o*g)*E,t[11]=(c*o*r-s*d*r-c*n*l+e*d*l+s*n*h-e*o*h)*E,t[12]=b*E,t[13]=(c*p*i-f*d*i+f*n*u-e*p*u-c*n*m+e*d*m)*E,t[14]=(f*o*i-s*p*i-f*n*a+e*p*a+s*n*m-e*o*m)*E,t[15]=(s*d*i-c*o*i+c*n*a-e*d*a-s*n*u+e*o*u)*E,this}scale(t){let e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){let i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,c=s+s,d=o+o,u=r*l,h=r*c,f=r*d,p=s*c,m=s*d,g=o*d,v=a*l,y=a*c,x=a*d,b=n.x,w=n.y,E=n.z;return i[0]=(1-(p+g))*b,i[1]=(h+x)*b,i[2]=(f-y)*b,i[3]=0,i[4]=(h-x)*w,i[5]=(1-(u+g))*w,i[6]=(m+v)*w,i[7]=0,i[8]=(f+y)*E,i[9]=(m-v)*E,i[10]=(1-(u+p))*E,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){let i=this.elements,r=Av.set(i[0],i[1],i[2]).length(),s=Av.set(i[4],i[5],i[6]).length(),o=Av.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Ol.copy(this);let a=1/r,l=1/s,c=1/o;return Ol.elements[0]*=a,Ol.elements[1]*=a,Ol.elements[2]*=a,Ol.elements[4]*=l,Ol.elements[5]*=l,Ol.elements[6]*=l,Ol.elements[8]*=c,Ol.elements[9]*=c,Ol.elements[10]*=c,e.setFromRotationMatrix(Ol),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s){let o=this.elements,a=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),d=(n+i)/(n-i),u=-(s+r)/(s-r),h=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){let o=this.elements,a=1/(e-t),l=1/(n-i),c=1/(s-r),d=(e+t)*a,u=(n+i)*l,h=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){let e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){let n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},Av=new q,Ol=new tt,L8e=new q(0,0,0),I8e=new q(1,1,1),Mh=new q,aA=new q,Qo=new q,vY=new tt,yY=new vn,ls=class{constructor(t=0,e=0,n=0,i=ls.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){let i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],d=i[2],u=i[6],h=i[10];switch(e){case"XYZ":this._y=Math.asin(Dr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Dr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(Dr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-Dr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Dr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Dr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return vY.makeRotationFromQuaternion(t),this.setFromRotationMatrix(vY,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return yY.setFromEuler(this),this.setFromQuaternion(yY,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};ls.DEFAULT_ORDER="XYZ";var KV=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},k8e=0,xY=new q,Tv=new vn,Vu=new tt,lA=new q,W1=new q,N8e=new q,B8e=new vn,bY=new q(1,0,0),wY=new q(0,1,0),_Y=new q(0,0,1),z8e={type:"added"},SY={type:"removed"},ei=class extends uo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:k8e++}),this.uuid=lu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ei.DEFAULT_UP.clone();let t=new q,e=new ls,n=new vn,i=new q(1,1,1);function r(){n.setFromEuler(e,!1)}function s(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new tt},normalMatrix:{value:new cs}}),this.matrix=new tt,this.matrixWorld=new tt,this.matrixAutoUpdate=ei.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new KV,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Tv.setFromAxisAngle(t,e),this.quaternion.multiply(Tv),this}rotateOnWorldAxis(t,e){return Tv.setFromAxisAngle(t,e),this.quaternion.premultiply(Tv),this}rotateX(t){return this.rotateOnAxis(bY,t)}rotateY(t){return this.rotateOnAxis(wY,t)}rotateZ(t){return this.rotateOnAxis(_Y,t)}translateOnAxis(t,e){return xY.copy(t).applyQuaternion(this.quaternion),this.position.add(xY.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(bY,t)}translateY(t){return this.translateOnAxis(wY,t)}translateZ(t){return this.translateOnAxis(_Y,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Vu.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?lA.copy(t):lA.set(t,e,n);let i=this.parent;this.updateWorldMatrix(!0,!1),W1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vu.lookAt(W1,lA,this.up):Vu.lookAt(lA,W1,this.up),this.quaternion.setFromRotationMatrix(Vu),i&&(Vu.extractRotation(i.matrixWorld),Tv.setFromRotationMatrix(Vu),this.quaternion.premultiply(Tv.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(z8e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(SY)),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let e=this.children[t];e.parent=null,e.dispatchEvent(SY)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Vu.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Vu.multiply(t.parent.matrixWorld)),t.applyMatrix4(Vu),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){let r=this.children[n].getObjectByProperty(t,e);if(r!==void 0)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){let s=this.children[i].getObjectsByProperty(t,e);s.length>0&&(n=n.concat(s))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(W1,t,N8e),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(W1,B8e,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);let e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){let e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let e=this.children;for(let n=0,i=e.length;n<i;n++){let r=e[n];(r.matrixWorldAutoUpdate===!0||t===!0)&&r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){let n=this.parent;if(t===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){let i=this.children;for(let r=0,s=i.length;r<s;r++){let o=i[r];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(t){let e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function r(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(t)),a.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){let d=a[l];r(t.shapes,d)}else r(t.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(r(t.materials,this.material[a]));i.material=o}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let a=this.animations[o];i.animations.push(r(t.animations,a))}}if(e){let o=s(t.geometries),a=s(t.materials),l=s(t.textures),c=s(t.images),d=s(t.shapes),u=s(t.skeletons),h=s(t.animations),f=s(t.nodes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),d.length>0&&(n.shapes=d),u.length>0&&(n.skeletons=u),h.length>0&&(n.animations=h),f.length>0&&(n.nodes=f)}return n.object=i,n;function s(o){let a=[];for(let l in o){let c=o[l];delete c.metadata,a.push(c)}return a}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){let i=t.children[n];this.add(i.clone())}return this}};ei.DEFAULT_UP=new q(0,1,0);ei.DEFAULT_MATRIX_AUTO_UPDATE=!0;ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Ll=new q,Hu=new q,_I=new q,ju=new q,Cv=new q,Pv=new q,EY=new q,SI=new q,EI=new q,MI=new q,Eo=class{constructor(t=new q,e=new q,n=new q){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Ll.subVectors(t,e),i.cross(Ll);let r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Ll.subVectors(i,e),Hu.subVectors(n,e),_I.subVectors(t,e);let s=Ll.dot(Ll),o=Ll.dot(Hu),a=Ll.dot(_I),l=Hu.dot(Hu),c=Hu.dot(_I),d=s*l-o*o;if(d===0)return r.set(-2,-1,-1);let u=1/d,h=(l*a-o*c)*u,f=(s*c-o*a)*u;return r.set(1-h-f,f,h)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,ju),ju.x>=0&&ju.y>=0&&ju.x+ju.y<=1}static getUV(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,ju),a.set(0,0),a.addScaledVector(r,ju.x),a.addScaledVector(s,ju.y),a.addScaledVector(o,ju.z),a}static isFrontFacing(t,e,n,i){return Ll.subVectors(n,e),Hu.subVectors(t,e),Ll.cross(Hu).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ll.subVectors(this.c,this.b),Hu.subVectors(this.a,this.b),Ll.cross(Hu).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Eo.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Eo.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return Eo.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Eo.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Eo.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let n=this.a,i=this.b,r=this.c,s,o;Cv.subVectors(i,n),Pv.subVectors(r,n),SI.subVectors(t,n);let a=Cv.dot(SI),l=Pv.dot(SI);if(a<=0&&l<=0)return e.copy(n);EI.subVectors(t,i);let c=Cv.dot(EI),d=Pv.dot(EI);if(c>=0&&d<=c)return e.copy(i);let u=a*d-c*l;if(u<=0&&a>=0&&c<=0)return s=a/(a-c),e.copy(n).addScaledVector(Cv,s);MI.subVectors(t,r);let h=Cv.dot(MI),f=Pv.dot(MI);if(f>=0&&h<=f)return e.copy(r);let p=h*l-a*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),e.copy(n).addScaledVector(Pv,o);let m=c*f-h*d;if(m<=0&&d-c>=0&&h-f>=0)return EY.subVectors(r,i),o=(d-c)/(d-c+(h-f)),e.copy(i).addScaledVector(EY,o);let g=1/(m+p+u);return s=p*g,o=u*g,e.copy(n).addScaledVector(Cv,s).addScaledVector(Pv,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},F8e=0,DS=class extends uo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F8e++}),this.uuid=lu(),this.name="",this.type="Material",this.blending=Y0,this.side=oc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=vce,this.blendDst=yce,this.blendEquation=t0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Gz,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=f8e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=uI,this.stencilZFail=uI,this.stencilZPass=uI,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}let i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Y0&&(n.blending=this.blending),this.side!==oc&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(r){let s=[];for(let o in r){let a=r[o];delete a.metadata,s.push(a)}return s}if(e){let r=i(t.textures),s=i(t.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,n=null;if(e!==null){let i=e.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},Cx=class extends DS{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=xce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},hr=new q,cA=new Se,Wt=class{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=Xz,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)cA.fromBufferAttribute(this,e),cA.applyMatrix3(t),this.setXY(e,cA.x,cA.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.applyMatrix3(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.applyMatrix4(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.applyNormalMatrix(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)hr.fromBufferAttribute(this,e),hr.transformDirection(t),this.setXYZ(e,hr.x,hr.y,hr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=pd(e,this.array)),e}setX(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=pd(e,this.array)),e}setY(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=pd(e,this.array)),e}setZ(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=pd(e,this.array)),e}setW(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=oi(e,this.array),n=oi(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=oi(e,this.array),n=oi(n,this.array),i=oi(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=oi(e,this.array),n=oi(n,this.array),i=oi(i,this.array),r=oi(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Xz&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},Pce=class extends Wt{constructor(t,e,n){super(new Uint16Array(t),e,n)}},K0=class extends Wt{constructor(t,e,n){super(new Uint32Array(t),e,n)}},xt=class extends Wt{constructor(t,e,n){super(new Float32Array(t),e,n)}},U8e=0,Ua=new tt,AI=new ei,Dv=new q,Jo=new _r,q1=new _r,Xr=new q,Ut=class extends uo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:U8e++}),this.uuid=lu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ece(t)?K0:Pce)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let r=new cs().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ua.makeRotationFromQuaternion(t),this.applyMatrix4(Ua),this}rotateX(t){return Ua.makeRotationX(t),this.applyMatrix4(Ua),this}rotateY(t){return Ua.makeRotationY(t),this.applyMatrix4(Ua),this}rotateZ(t){return Ua.makeRotationZ(t),this.applyMatrix4(Ua),this}translate(t,e,n){return Ua.makeTranslation(t,e,n),this.applyMatrix4(Ua),this}scale(t,e,n){return Ua.makeScale(t,e,n),this.applyMatrix4(Ua),this}lookAt(t){return AI.lookAt(t),AI.updateMatrix(),this.applyMatrix4(AI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dv).negate(),this.translate(Dv.x,Dv.y,Dv.z),this}setFromPoints(t){let e=[];for(let n=0,i=t.length;n<i;n++){let r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new xt(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _r);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){let r=e[n];Jo.setFromBufferAttribute(r),this.morphTargetsRelative?(Xr.addVectors(this.boundingBox.min,Jo.min),this.boundingBox.expandByPoint(Xr),Xr.addVectors(this.boundingBox.max,Jo.max),this.boundingBox.expandByPoint(Xr)):(this.boundingBox.expandByPoint(Jo.min),this.boundingBox.expandByPoint(Jo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gl);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(t){let n=this.boundingSphere.center;if(Jo.setFromBufferAttribute(t),e)for(let r=0,s=e.length;r<s;r++){let o=e[r];q1.setFromBufferAttribute(o),this.morphTargetsRelative?(Xr.addVectors(Jo.min,q1.min),Jo.expandByPoint(Xr),Xr.addVectors(Jo.max,q1.max),Jo.expandByPoint(Xr)):(Jo.expandByPoint(q1.min),Jo.expandByPoint(q1.max))}Jo.getCenter(n);let i=0;for(let r=0,s=t.count;r<s;r++)Xr.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(Xr));if(e)for(let r=0,s=e.length;r<s;r++){let o=e[r],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Xr.fromBufferAttribute(o,l),a&&(Dv.fromBufferAttribute(t,l),Xr.add(Dv)),i=Math.max(i,n.distanceToSquared(Xr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wt(new Float32Array(4*o),4));let a=this.getAttribute("tangent").array,l=[],c=[];for(let C=0;C<o;C++)l[C]=new q,c[C]=new q;let d=new q,u=new q,h=new q,f=new Se,p=new Se,m=new Se,g=new q,v=new q;function y(C,T,P){d.fromArray(i,C*3),u.fromArray(i,T*3),h.fromArray(i,P*3),f.fromArray(s,C*2),p.fromArray(s,T*2),m.fromArray(s,P*2),u.sub(d),h.sub(d),p.sub(f),m.sub(f);let R=1/(p.x*m.y-m.x*p.y);!isFinite(R)||(g.copy(u).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(R),v.copy(h).multiplyScalar(p.x).addScaledVector(u,-m.x).multiplyScalar(R),l[C].add(g),l[T].add(g),l[P].add(g),c[C].add(v),c[T].add(v),c[P].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:n.length}]);for(let C=0,T=x.length;C<T;++C){let P=x[C],R=P.start,L=P.count;for(let O=R,B=R+L;O<B;O+=3)y(n[O+0],n[O+1],n[O+2])}let b=new q,w=new q,E=new q,A=new q;function S(C){E.fromArray(r,C*3),A.copy(E);let T=l[C];b.copy(T),b.sub(E.multiplyScalar(E.dot(T))).normalize(),w.crossVectors(A,T);let P=w.dot(c[C])<0?-1:1;a[C*4]=b.x,a[C*4+1]=b.y,a[C*4+2]=b.z,a[C*4+3]=P}for(let C=0,T=x.length;C<T;++C){let P=x[C],R=P.start,L=P.count;for(let O=R,B=R+L;O<B;O+=3)S(n[O+0]),S(n[O+1]),S(n[O+2])}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Wt(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let u=0,h=n.count;u<h;u++)n.setXYZ(u,0,0,0);let i=new q,r=new q,s=new q,o=new q,a=new q,l=new q,c=new q,d=new q;if(t)for(let u=0,h=t.count;u<h;u+=3){let f=t.getX(u+0),p=t.getX(u+1),m=t.getX(u+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,m),c.subVectors(s,r),d.subVectors(i,r),c.cross(d),o.fromBufferAttribute(n,f),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),o.add(c),a.add(c),l.add(c),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let u=0,h=e.count;u<h;u+=3)i.fromBufferAttribute(e,u+0),r.fromBufferAttribute(e,u+1),s.fromBufferAttribute(e,u+2),c.subVectors(s,r),d.subVectors(i,r),c.cross(d),n.setXYZ(u+0,c.x,c.y,c.z),n.setXYZ(u+1,c.x,c.y,c.z),n.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Xr.fromBufferAttribute(t,e),Xr.normalize(),t.setXYZ(e,Xr.x,Xr.y,Xr.z)}toNonIndexed(){function t(o,a){let l=o.array,c=o.itemSize,d=o.normalized,u=new l.constructor(a.length*c),h=0,f=0;for(let p=0,m=a.length;p<m;p++){o.isInterleavedBufferAttribute?h=a[p]*o.data.stride+o.offset:h=a[p]*c;for(let g=0;g<c;g++)u[f++]=l[h++]}return new Wt(u,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new Ut,n=this.index.array,i=this.attributes;for(let o in i){let a=i[o],l=t(a,n);e.setAttribute(o,l)}let r=this.morphAttributes;for(let o in r){let a=[],l=r[o];for(let c=0,d=l.length;c<d;c++){let u=l[c],h=t(u,n);a.push(h)}e.morphAttributes[o]=a}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let o=0,a=s.length;o<a;o++){let l=s[o];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){let t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let a=this.parameters;for(let l in a)a[l]!==void 0&&(t[l]=a[l]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let n=this.attributes;for(let a in n){let l=n[a];t.data.attributes[a]=l.toJSON(t.data)}let i={},r=!1;for(let a in this.morphAttributes){let l=this.morphAttributes[a],c=[];for(let d=0,u=l.length;d<u;d++){let h=l[d];c.push(h.toJSON(t.data))}c.length>0&&(i[a]=c,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let o=this.boundingSphere;return o!==null&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let n=t.index;n!==null&&this.setIndex(n.clone(e));let i=t.attributes;for(let l in i){let c=i[l];this.setAttribute(l,c.clone(e))}let r=t.morphAttributes;for(let l in r){let c=[],d=r[l];for(let u=0,h=d.length;u<h;u++)c.push(d[u].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let l=0,c=s.length;l<c;l++){let d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}let o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());let a=t.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},MY=new tt,Rv=new Tx,TI=new gl,$1=new q,X1=new q,Y1=new q,CI=new q,uA=new q,dA=new Se,hA=new Se,fA=new Se,PI=new q,pA=new q,Po=class extends ei{constructor(t=new Ut,e=new Cx){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let n=t[e[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}getVertexPosition(t,e){let n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(i,t);let o=this.morphTargetInfluences;if(r&&o){uA.set(0,0,0);for(let a=0,l=r.length;a<l;a++){let c=o[a],d=r[a];c!==0&&(CI.fromBufferAttribute(d,t),s?uA.addScaledVector(CI,c):uA.addScaledVector(CI.sub(e),c))}e.add(uA)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){let n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),TI.copy(n.boundingSphere),TI.applyMatrix4(r),t.ray.intersectsSphere(TI)===!1)||(MY.copy(r).invert(),Rv.copy(t.ray).applyMatrix4(MY),n.boundingBox!==null&&Rv.intersectsBox(n.boundingBox)===!1))return;let s,o=n.index,a=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,d=n.groups,u=n.drawRange;if(o!==null)if(Array.isArray(i))for(let h=0,f=d.length;h<f;h++){let p=d[h],m=i[p.materialIndex],g=Math.max(p.start,u.start),v=Math.min(o.count,Math.min(p.start+p.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let b=o.getX(y),w=o.getX(y+1),E=o.getX(y+2);s=mA(this,m,t,Rv,l,c,b,w,E),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{let h=Math.max(0,u.start),f=Math.min(o.count,u.start+u.count);for(let p=h,m=f;p<m;p+=3){let g=o.getX(p),v=o.getX(p+1),y=o.getX(p+2);s=mA(this,i,t,Rv,l,c,g,v,y),s&&(s.faceIndex=Math.floor(p/3),e.push(s))}}else if(a!==void 0)if(Array.isArray(i))for(let h=0,f=d.length;h<f;h++){let p=d[h],m=i[p.materialIndex],g=Math.max(p.start,u.start),v=Math.min(a.count,Math.min(p.start+p.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let b=y,w=y+1,E=y+2;s=mA(this,m,t,Rv,l,c,b,w,E),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{let h=Math.max(0,u.start),f=Math.min(a.count,u.start+u.count);for(let p=h,m=f;p<m;p+=3){let g=p,v=p+1,y=p+2;s=mA(this,i,t,Rv,l,c,g,v,y),s&&(s.faceIndex=Math.floor(p/3),e.push(s))}}}};function V8e(t,e,n,i,r,s,o,a){let l;if(e.side===Qr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===oc,a),l===null)return null;pA.copy(a),pA.applyMatrix4(t.matrixWorld);let c=n.ray.origin.distanceTo(pA);return c<n.near||c>n.far?null:{distance:c,point:pA.clone(),object:t}}function mA(t,e,n,i,r,s,o,a,l){t.getVertexPosition(o,$1),t.getVertexPosition(a,X1),t.getVertexPosition(l,Y1);let c=V8e(t,e,n,i,$1,X1,Y1,PI);if(c){r&&(dA.fromBufferAttribute(r,o),hA.fromBufferAttribute(r,a),fA.fromBufferAttribute(r,l),c.uv=Eo.getUV(PI,$1,X1,Y1,dA,hA,fA,new Se)),s&&(dA.fromBufferAttribute(s,o),hA.fromBufferAttribute(s,a),fA.fromBufferAttribute(s,l),c.uv2=Eo.getUV(PI,$1,X1,Y1,dA,hA,fA,new Se));let d={a:o,b:a,c:l,normal:new q,materialIndex:0};Eo.getNormal($1,X1,Y1,d.normal),c.face=d}return c}var mu=class extends Ut{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};let o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);let a=[],l=[],c=[],d=[],u=0,h=0;f("z","y","x",-1,-1,n,e,t,s,r,0),f("z","y","x",1,-1,n,e,-t,s,r,1),f("x","z","y",1,1,t,n,e,i,s,2),f("x","z","y",1,-1,t,n,-e,i,s,3),f("x","y","z",1,-1,t,e,n,i,r,4),f("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(c,3)),this.setAttribute("uv",new xt(d,2));function f(p,m,g,v,y,x,b,w,E,A,S){let C=x/E,T=b/A,P=x/2,R=b/2,L=w/2,O=E+1,B=A+1,$=0,X=0,H=new q;for(let U=0;U<B;U++){let N=U*T-R;for(let k=0;k<O;k++){let z=k*C-P;H[p]=z*v,H[m]=N*y,H[g]=L,l.push(H.x,H.y,H.z),H[p]=0,H[m]=0,H[g]=w>0?1:-1,c.push(H.x,H.y,H.z),d.push(k/E),d.push(1-U/A),$+=1}}for(let U=0;U<A;U++)for(let N=0;N<E;N++){let k=u+N+O*U,z=u+N+O*(U+1),W=u+(N+1)+O*(U+1),K=u+(N+1)+O*U;a.push(k,z,K),a.push(z,W,K),X+=6}o.addGroup(h,X,S),h+=X,u+=$}}static fromJSON(t){return new mu(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function Uy(t){let e={};for(let n in t){e[n]={};for(let i in t[n]){let r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Zs(t){let e={};for(let n=0;n<t.length;n++){let i=Uy(t[n]);for(let r in i)e[r]=i[r]}return e}function H8e(t){let e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Dce(t){return t.getRenderTarget()===null&&t.outputEncoding===Zt?Uc:o2}var Px={clone:Uy,merge:Zs},j8e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,G8e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,di=class extends DS{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=j8e,this.fragmentShader=G8e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Uy(t.uniforms),this.uniformsGroups=H8e(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let i in this.uniforms){let r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;let n={};for(let i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}},Dx=class extends ei{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tt,this.projectionMatrix=new tt,this.projectionMatrixInverse=new tt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Os=class extends Dx{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=E_*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(uw*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return E_*2*Math.atan(Math.tan(uw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(uw*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let a=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/a,e-=s.offsetY*n/l,i*=s.width/a,n*=s.height/l}let o=this.filmOffset;o!==0&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Ov=-90,Lv=1,W8e=class extends ei{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;let i=new Os(Ov,Lv,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let r=new Os(Ov,Lv,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let s=new Os(Ov,Lv,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let o=new Os(Ov,Lv,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let a=new Os(Ov,Lv,t,e);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);let l=new Os(Ov,Lv,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){this.parent===null&&this.updateMatrixWorld();let n=this.renderTarget,[i,r,s,o,a,l]=this.children,c=t.getRenderTarget(),d=t.toneMapping,u=t.xr.enabled;t.toneMapping=Sd,t.xr.enabled=!1;let h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=d,t.xr.enabled=u,n.texture.needsPMREMUpdate=!0}},ZV=class extends kr{constructor(t,e,n,i,r,s,o,a,l,c){t=t!==void 0?t:[],e=e!==void 0?e:ig,super(t,e,n,i,r,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},q8e=class extends jn{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new ZV(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:an}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new mu(5,5,5),r=new di({name:"CubemapFromEquirect",uniforms:Uy(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Qr,blending:wr});r.uniforms.tEquirect.value=e;let s=new Po(i,r),o=e.minFilter;return e.minFilter===zy&&(e.minFilter=an),new W8e(1,10,this).update(t,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,i){let r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}},DI=new q,$8e=new q,X8e=new cs,ia=class{constructor(t=new q(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){let i=DI.subVectors(n,e).cross($8e.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){let n=t.delta(DI),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){let e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let n=e||X8e.getNormalMatrix(t),i=this.coplanarPoint(DI).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Iv=new gl,gA=new q,QV=class{constructor(t=new ia,e=new ia,n=new ia,i=new ia,r=new ia,s=new ia){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){let o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){let e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){let e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],d=n[7],u=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-i,d-a,p-u,y-m).normalize(),e[1].setComponents(o+i,d+a,p+u,y+m).normalize(),e[2].setComponents(o+r,d+l,p+h,y+g).normalize(),e[3].setComponents(o-r,d-l,p-h,y-g).normalize(),e[4].setComponents(o-s,d-c,p-f,y-v).normalize(),e[5].setComponents(o+s,d+c,p+f,y+v).normalize(),this}intersectsObject(t){let e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),Iv.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Iv)}intersectsSprite(t){return Iv.center.set(0,0,0),Iv.radius=.7071067811865476,Iv.applyMatrix4(t.matrixWorld),this.intersectsSphere(Iv)}intersectsSphere(t){let e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){let e=this.planes;for(let n=0;n<6;n++){let i=e[n];if(gA.x=i.normal.x>0?t.max.x:t.min.x,gA.y=i.normal.y>0?t.max.y:t.min.y,gA.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(gA)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Rce(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Y8e(t,e){let n=e.isWebGL2,i=new WeakMap;function r(c,d){let u=c.array,h=c.usage,f=t.createBuffer();t.bindBuffer(d,f),t.bufferData(d,u,h),c.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,d,u){let h=d.array,f=d.updateRange;t.bindBuffer(u,c),f.count===-1?t.bufferSubData(u,0,h):(n?t.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):t.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),d.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let d=i.get(c);d&&(t.deleteBuffer(d.buffer),i.delete(c))}function l(c,d){if(c.isGLBufferAttribute){let h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let u=i.get(c);u===void 0?i.set(c,r(c,d)):u.version<c.version&&(s(u.buffer,c,d),u.version=c.version)}return{get:o,remove:a,update:l}}var lR=class extends Ut{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};let r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,c=a+1,d=t/o,u=e/a,h=[],f=[],p=[],m=[];for(let g=0;g<c;g++){let v=g*u-s;for(let y=0;y<l;y++){let x=y*d-r;f.push(x,-v,0),p.push(0,0,1),m.push(y/o),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let v=0;v<o;v++){let y=v+l*g,x=v+l*(g+1),b=v+1+l*(g+1),w=v+1+l*g;h.push(y,x,w),h.push(x,b,w)}this.setIndex(h),this.setAttribute("position",new xt(f,3)),this.setAttribute("normal",new xt(p,3)),this.setAttribute("uv",new xt(m,2))}static fromJSON(t){return new lR(t.width,t.height,t.widthSegments,t.heightSegments)}},K8e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Z8e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Q8e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,J8e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,e9e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,t9e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,n9e="vec3 transformed = vec3( position );",i9e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,r9e=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,s9e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,o9e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,a9e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,l9e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,c9e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,u9e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,d9e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,h9e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,f9e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,p9e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,m9e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,g9e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,v9e=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,y9e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,x9e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,b9e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,w9e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_9e="gl_FragColor = linearToOutputTexel( gl_FragColor );",S9e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,E9e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,M9e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,A9e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,T9e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,C9e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,P9e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,D9e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,R9e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,O9e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,L9e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,I9e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,k9e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,N9e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,B9e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,z9e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,F9e=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,U9e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,V9e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,H9e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,j9e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,G9e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,W9e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,q9e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$9e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,X9e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Y9e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,K9e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Z9e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Q9e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,J9e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,e7e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,t7e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,n7e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,i7e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,r7e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,s7e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,o7e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,a7e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,l7e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,c7e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,u7e=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,d7e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,h7e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,f7e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,p7e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,m7e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,g7e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,v7e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,y7e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,x7e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,b7e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,w7e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_7e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,S7e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,E7e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,M7e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,A7e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,T7e=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,C7e=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,P7e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,D7e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,R7e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,O7e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,L7e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,I7e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,k7e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,N7e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,B7e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,z7e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,F7e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,U7e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,V7e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,H7e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,j7e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,G7e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,W7e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,q7e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,$7e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,X7e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Y7e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,K7e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Z7e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Q7e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,J7e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,eqe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,tqe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,nqe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,iqe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,rqe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,sqe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,oqe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aqe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lqe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cqe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uqe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dqe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hqe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fqe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pqe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,mqe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,gqe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vqe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yqe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,xqe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bqe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wqe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_qe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Sqe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Eqe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mqe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Aqe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Tqe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Jt={alphamap_fragment:K8e,alphamap_pars_fragment:Z8e,alphatest_fragment:Q8e,alphatest_pars_fragment:J8e,aomap_fragment:e9e,aomap_pars_fragment:t9e,begin_vertex:n9e,beginnormal_vertex:i9e,bsdfs:r9e,iridescence_fragment:s9e,bumpmap_pars_fragment:o9e,clipping_planes_fragment:a9e,clipping_planes_pars_fragment:l9e,clipping_planes_pars_vertex:c9e,clipping_planes_vertex:u9e,color_fragment:d9e,color_pars_fragment:h9e,color_pars_vertex:f9e,color_vertex:p9e,common:m9e,cube_uv_reflection_fragment:g9e,defaultnormal_vertex:v9e,displacementmap_pars_vertex:y9e,displacementmap_vertex:x9e,emissivemap_fragment:b9e,emissivemap_pars_fragment:w9e,encodings_fragment:_9e,encodings_pars_fragment:S9e,envmap_fragment:E9e,envmap_common_pars_fragment:M9e,envmap_pars_fragment:A9e,envmap_pars_vertex:T9e,envmap_physical_pars_fragment:F9e,envmap_vertex:C9e,fog_vertex:P9e,fog_pars_vertex:D9e,fog_fragment:R9e,fog_pars_fragment:O9e,gradientmap_pars_fragment:L9e,lightmap_fragment:I9e,lightmap_pars_fragment:k9e,lights_lambert_fragment:N9e,lights_lambert_pars_fragment:B9e,lights_pars_begin:z9e,lights_toon_fragment:U9e,lights_toon_pars_fragment:V9e,lights_phong_fragment:H9e,lights_phong_pars_fragment:j9e,lights_physical_fragment:G9e,lights_physical_pars_fragment:W9e,lights_fragment_begin:q9e,lights_fragment_maps:$9e,lights_fragment_end:X9e,logdepthbuf_fragment:Y9e,logdepthbuf_pars_fragment:K9e,logdepthbuf_pars_vertex:Z9e,logdepthbuf_vertex:Q9e,map_fragment:J9e,map_pars_fragment:e7e,map_particle_fragment:t7e,map_particle_pars_fragment:n7e,metalnessmap_fragment:i7e,metalnessmap_pars_fragment:r7e,morphcolor_vertex:s7e,morphnormal_vertex:o7e,morphtarget_pars_vertex:a7e,morphtarget_vertex:l7e,normal_fragment_begin:c7e,normal_fragment_maps:u7e,normal_pars_fragment:d7e,normal_pars_vertex:h7e,normal_vertex:f7e,normalmap_pars_fragment:p7e,clearcoat_normal_fragment_begin:m7e,clearcoat_normal_fragment_maps:g7e,clearcoat_pars_fragment:v7e,iridescence_pars_fragment:y7e,output_fragment:x7e,packing:b7e,premultiplied_alpha_fragment:w7e,project_vertex:_7e,dithering_fragment:S7e,dithering_pars_fragment:E7e,roughnessmap_fragment:M7e,roughnessmap_pars_fragment:A7e,shadowmap_pars_fragment:T7e,shadowmap_pars_vertex:C7e,shadowmap_vertex:P7e,shadowmask_pars_fragment:D7e,skinbase_vertex:R7e,skinning_pars_vertex:O7e,skinning_vertex:L7e,skinnormal_vertex:I7e,specularmap_fragment:k7e,specularmap_pars_fragment:N7e,tonemapping_fragment:B7e,tonemapping_pars_fragment:z7e,transmission_fragment:F7e,transmission_pars_fragment:U7e,uv_pars_fragment:V7e,uv_pars_vertex:H7e,uv_vertex:j7e,uv2_pars_fragment:G7e,uv2_pars_vertex:W7e,uv2_vertex:q7e,worldpos_vertex:$7e,background_vert:X7e,background_frag:Y7e,backgroundCube_vert:K7e,backgroundCube_frag:Z7e,cube_vert:Q7e,cube_frag:J7e,depth_vert:eqe,depth_frag:tqe,distanceRGBA_vert:nqe,distanceRGBA_frag:iqe,equirect_vert:rqe,equirect_frag:sqe,linedashed_vert:oqe,linedashed_frag:aqe,meshbasic_vert:lqe,meshbasic_frag:cqe,meshlambert_vert:uqe,meshlambert_frag:dqe,meshmatcap_vert:hqe,meshmatcap_frag:fqe,meshnormal_vert:pqe,meshnormal_frag:mqe,meshphong_vert:gqe,meshphong_frag:vqe,meshphysical_vert:yqe,meshphysical_frag:xqe,meshtoon_vert:bqe,meshtoon_frag:wqe,points_vert:_qe,points_frag:Sqe,shadow_vert:Eqe,shadow_frag:Mqe,sprite_vert:Aqe,sprite_frag:Tqe},st={common:{diffuse:{value:new Lt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new cs},uv2Transform:{value:new cs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cs}},sprite:{diffuse:{value:new Lt(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cs}}},jc={basic:{uniforms:Zs([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.fog]),vertexShader:Jt.meshbasic_vert,fragmentShader:Jt.meshbasic_frag},lambert:{uniforms:Zs([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.fog,st.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Jt.meshlambert_vert,fragmentShader:Jt.meshlambert_frag},phong:{uniforms:Zs([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.fog,st.lights,{emissive:{value:new Lt(0)},specular:{value:new Lt(1118481)},shininess:{value:30}}]),vertexShader:Jt.meshphong_vert,fragmentShader:Jt.meshphong_frag},standard:{uniforms:Zs([st.common,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.roughnessmap,st.metalnessmap,st.fog,st.lights,{emissive:{value:new Lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag},toon:{uniforms:Zs([st.common,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.gradientmap,st.fog,st.lights,{emissive:{value:new Lt(0)}}]),vertexShader:Jt.meshtoon_vert,fragmentShader:Jt.meshtoon_frag},matcap:{uniforms:Zs([st.common,st.bumpmap,st.normalmap,st.displacementmap,st.fog,{matcap:{value:null}}]),vertexShader:Jt.meshmatcap_vert,fragmentShader:Jt.meshmatcap_frag},points:{uniforms:Zs([st.points,st.fog]),vertexShader:Jt.points_vert,fragmentShader:Jt.points_frag},dashed:{uniforms:Zs([st.common,st.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Jt.linedashed_vert,fragmentShader:Jt.linedashed_frag},depth:{uniforms:Zs([st.common,st.displacementmap]),vertexShader:Jt.depth_vert,fragmentShader:Jt.depth_frag},normal:{uniforms:Zs([st.common,st.bumpmap,st.normalmap,st.displacementmap,{opacity:{value:1}}]),vertexShader:Jt.meshnormal_vert,fragmentShader:Jt.meshnormal_frag},sprite:{uniforms:Zs([st.sprite,st.fog]),vertexShader:Jt.sprite_vert,fragmentShader:Jt.sprite_frag},background:{uniforms:{uvTransform:{value:new cs},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Jt.background_vert,fragmentShader:Jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Jt.backgroundCube_vert,fragmentShader:Jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Jt.cube_vert,fragmentShader:Jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Jt.equirect_vert,fragmentShader:Jt.equirect_frag},distanceRGBA:{uniforms:Zs([st.common,st.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Jt.distanceRGBA_vert,fragmentShader:Jt.distanceRGBA_frag},shadow:{uniforms:Zs([st.lights,st.fog,{color:{value:new Lt(0)},opacity:{value:1}}]),vertexShader:Jt.shadow_vert,fragmentShader:Jt.shadow_frag}};jc.physical={uniforms:Zs([jc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Se(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Lt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Lt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Lt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};var vA={r:0,b:0,g:0};function Cqe(t,e,n,i,r,s,o){let a=new Lt(0),l=s===!0?0:1,c,d,u=null,h=0,f=null;function p(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?n:e).get(x));let b=t.xr,w=b.getSession&&b.getSession();w&&w.environmentBlendMode==="additive"&&(x=null),x===null?m(a,l):x&&x.isColor&&(m(x,1),y=!0),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===PS)?(d===void 0&&(d=new Po(new mu(1,1,1),new di({name:"BackgroundCubeMaterial",uniforms:Uy(jc.backgroundCube.uniforms),vertexShader:jc.backgroundCube.vertexShader,fragmentShader:jc.backgroundCube.fragmentShader,side:Qr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(E,A,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=x,d.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,d.material.toneMapped=x.encoding!==Zt,(u!==x||h!==x.version||f!==t.toneMapping)&&(d.material.needsUpdate=!0,u=x,h=x.version,f=t.toneMapping),d.layers.enableAll(),g.unshift(d,d.geometry,d.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Po(new lR(2,2),new di({name:"BackgroundMaterial",uniforms:Uy(jc.background.uniforms),vertexShader:jc.background.vertexShader,fragmentShader:jc.background.fragmentShader,side:oc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=x.encoding!==Zt,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||h!==x.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=x,h=x.version,f=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function m(g,v){g.getRGB(vA,Dce(t)),i.buffers.color.setClear(vA.r,vA.g,vA.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(a,l)},render:p}}function Pqe(t,e,n,i){let r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=g(null),c=l,d=!1;function u(O,B,$,X,H){let U=!1;if(o){let N=m(X,$,B);c!==N&&(c=N,f(c.object)),U=v(O,X,$,H),U&&y(O,X,$,H)}else{let N=B.wireframe===!0;(c.geometry!==X.id||c.program!==$.id||c.wireframe!==N)&&(c.geometry=X.id,c.program=$.id,c.wireframe=N,U=!0)}H!==null&&n.update(H,34963),(U||d)&&(d=!1,S(O,B,$,X),H!==null&&t.bindBuffer(34963,n.get(H).buffer))}function h(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function f(O){return i.isWebGL2?t.bindVertexArray(O):s.bindVertexArrayOES(O)}function p(O){return i.isWebGL2?t.deleteVertexArray(O):s.deleteVertexArrayOES(O)}function m(O,B,$){let X=$.wireframe===!0,H=a[O.id];H===void 0&&(H={},a[O.id]=H);let U=H[B.id];U===void 0&&(U={},H[B.id]=U);let N=U[X];return N===void 0&&(N=g(h()),U[X]=N),N}function g(O){let B=[],$=[],X=[];for(let H=0;H<r;H++)B[H]=0,$[H]=0,X[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:$,attributeDivisors:X,object:O,attributes:{},index:null}}function v(O,B,$,X){let H=c.attributes,U=B.attributes,N=0,k=$.getAttributes();for(let z in k)if(k[z].location>=0){let W=H[z],K=U[z];if(K===void 0&&(z==="instanceMatrix"&&O.instanceMatrix&&(K=O.instanceMatrix),z==="instanceColor"&&O.instanceColor&&(K=O.instanceColor)),W===void 0||W.attribute!==K||K&&W.data!==K.data)return!0;N++}return c.attributesNum!==N||c.index!==X}function y(O,B,$,X){let H={},U=B.attributes,N=0,k=$.getAttributes();for(let z in k)if(k[z].location>=0){let W=U[z];W===void 0&&(z==="instanceMatrix"&&O.instanceMatrix&&(W=O.instanceMatrix),z==="instanceColor"&&O.instanceColor&&(W=O.instanceColor));let K={};K.attribute=W,W&&W.data&&(K.data=W.data),H[z]=K,N++}c.attributes=H,c.attributesNum=N,c.index=X}function x(){let O=c.newAttributes;for(let B=0,$=O.length;B<$;B++)O[B]=0}function b(O){w(O,0)}function w(O,B){let $=c.newAttributes,X=c.enabledAttributes,H=c.attributeDivisors;$[O]=1,X[O]===0&&(t.enableVertexAttribArray(O),X[O]=1),H[O]!==B&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,B),H[O]=B)}function E(){let O=c.newAttributes,B=c.enabledAttributes;for(let $=0,X=B.length;$<X;$++)B[$]!==O[$]&&(t.disableVertexAttribArray($),B[$]=0)}function A(O,B,$,X,H,U){i.isWebGL2===!0&&($===5124||$===5125)?t.vertexAttribIPointer(O,B,$,H,U):t.vertexAttribPointer(O,B,$,X,H,U)}function S(O,B,$,X){if(i.isWebGL2===!1&&(O.isInstancedMesh||X.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();let H=X.attributes,U=$.getAttributes(),N=B.defaultAttributeValues;for(let k in U){let z=U[k];if(z.location>=0){let W=H[k];if(W===void 0&&(k==="instanceMatrix"&&O.instanceMatrix&&(W=O.instanceMatrix),k==="instanceColor"&&O.instanceColor&&(W=O.instanceColor)),W!==void 0){let K=W.normalized,J=W.itemSize,F=n.get(W);if(F===void 0)continue;let ee=F.buffer,ie=F.type,te=F.bytesPerElement;if(W.isInterleavedBufferAttribute){let re=W.data,me=re.stride,se=W.offset;if(re.isInstancedInterleavedBuffer){for(let oe=0;oe<z.locationSize;oe++)w(z.location+oe,re.meshPerAttribute);O.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let oe=0;oe<z.locationSize;oe++)b(z.location+oe);t.bindBuffer(34962,ee);for(let oe=0;oe<z.locationSize;oe++)A(z.location+oe,J/z.locationSize,ie,K,me*te,(se+J/z.locationSize*oe)*te)}else{if(W.isInstancedBufferAttribute){for(let re=0;re<z.locationSize;re++)w(z.location+re,W.meshPerAttribute);O.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let re=0;re<z.locationSize;re++)b(z.location+re);t.bindBuffer(34962,ee);for(let re=0;re<z.locationSize;re++)A(z.location+re,J/z.locationSize,ie,K,J*te,J/z.locationSize*re*te)}}else if(N!==void 0){let K=N[k];if(K!==void 0)switch(K.length){case 2:t.vertexAttrib2fv(z.location,K);break;case 3:t.vertexAttrib3fv(z.location,K);break;case 4:t.vertexAttrib4fv(z.location,K);break;default:t.vertexAttrib1fv(z.location,K)}}}}E()}function C(){R();for(let O in a){let B=a[O];for(let $ in B){let X=B[$];for(let H in X)p(X[H].object),delete X[H];delete B[$]}delete a[O]}}function T(O){if(a[O.id]===void 0)return;let B=a[O.id];for(let $ in B){let X=B[$];for(let H in X)p(X[H].object),delete X[H];delete B[$]}delete a[O.id]}function P(O){for(let B in a){let $=a[B];if($[O.id]===void 0)continue;let X=$[O.id];for(let H in X)p(X[H].object),delete X[H];delete $[O.id]}}function R(){L(),d=!0,c!==l&&(c=l,f(c.object))}function L(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:R,resetDefaultState:L,dispose:C,releaseStatesOfGeometry:T,releaseStatesOfProgram:P,initAttributes:x,enableAttribute:b,disableUnusedAttributes:E}}function Dqe(t,e,n,i){let r=i.isWebGL2,s;function o(c){s=c}function a(c,d){t.drawArrays(s,c,d),n.update(d,s,1)}function l(c,d,u){if(u===0)return;let h,f;if(r)h=t,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](s,c,d,u),n.update(d,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function Rqe(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){let A=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(A){if(A==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext,a=n.precision!==void 0?n.precision:"highp",l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=o||e.has("WEBGL_draw_buffers"),d=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),h=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),x=h>0,b=o||e.has("OES_texture_float"),w=x&&b,E=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:w,maxSamples:E}}function Oqe(t){let e=this,n=null,i=0,r=!1,s=!1,o=new ia,a=new cs,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){let f=u.length!==0||h||i!==0||r;return r=h,i=u.length,f},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,h){n=d(u,h,0)},this.setState=function(u,h,f){let p=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,v=t.get(u);if(!r||p===null||p.length===0||s&&!g)s?d(null):c();else{let y=s?0:i,x=y*4,b=v.clippingState||null;l.value=b,b=d(p,h,x,f);for(let w=0;w!==x;++w)b[w]=n[w];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(u,h,f,p){let m=u!==null?u.length:0,g=null;if(m!==0){if(g=l.value,p!==!0||g===null){let v=f+m*4,y=h.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,b=f;x!==m;++x,b+=4)o.copy(u[x]).applyMatrix4(y,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function Lqe(t){let e=new WeakMap;function n(o,a){return a===Wz?o.mapping=ig:a===qz&&(o.mapping=rg),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let a=o.mapping;if(a===Wz||a===qz)if(e.has(o)){let l=e.get(o).texture;return n(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let c=new q8e(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var c2=class extends Dx{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,s=n+t,o=i+e,a=i-e;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,s=r+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},A0=4,AY=[.125,.215,.35,.446,.526,.582],rm=20,RI=new c2,TY=new Lt,OI=null,Yp=(1+Math.sqrt(5))/2,kv=1/Yp,CY=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,Yp,kv),new q(0,Yp,-kv),new q(kv,0,Yp),new q(-kv,0,Yp),new q(Yp,kv,0),new q(-Yp,kv,0)],PY=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){OI=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=OY(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=RY(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(OI),t.scissorTest=!1,yA(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===ig||t.mapping===rg?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),OI=this._renderer.getRenderTarget();let n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:an,minFilter:an,generateMipmaps:!1,type:Fy,format:Wl,encoding:pu,depthBuffer:!1},i=DY(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DY(t,e,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Iqe(r)),this._blurMaterial=kqe(r,t,e)}return i}_compileMaterial(t){let e=new Po(this._lodPlanes[0],t);this._renderer.compile(e,RI)}_sceneToCubeUV(t,e,n,i){let r=new Os(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(TY),a.toneMapping=Sd,a.autoClear=!1;let d=new Cx({name:"PMREM.Background",side:Qr,depthWrite:!1,depthTest:!1}),u=new Po(new mu,d),h=!1,f=t.background;f?f.isColor&&(d.color.copy(f),t.background=null,h=!0):(d.color.copy(TY),h=!0);for(let p=0;p<6;p++){let m=p%3;m===0?(r.up.set(0,s[p],0),r.lookAt(o[p],0,0)):m===1?(r.up.set(0,0,s[p]),r.lookAt(0,o[p],0)):(r.up.set(0,s[p],0),r.lookAt(0,0,o[p]));let g=this._cubeSize;yA(i,m*g,p>2?g:0,g,g),a.setRenderTarget(i),h&&a.render(u,r),a.render(t,r)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=l,t.background=f}_textureToCubeUV(t,e){let n=this._renderer,i=t.mapping===ig||t.mapping===rg;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=OY()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=RY());let r=i?this._cubemapMaterial:this._equirectMaterial,s=new Po(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=t;let a=this._cubeSize;yA(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(s,RI)}_applyPMREM(t){let e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=CY[(i-1)%CY.length];this._blur(t,i-1,i,r,s)}e.autoClear=n}_blur(t,e,n,i,r){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){let a=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,d=new Po(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(r)?Math.PI/(2*h):2*Math.PI/(2*rm-1),p=r/f,m=isFinite(r)?1+Math.floor(c*p):rm;m>rm&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${rm}`);let g=[],v=0;for(let E=0;E<rm;++E){let A=E/p,S=Math.exp(-A*A/2);g.push(S),E===0?v+=S:E<m&&(v+=2*S)}for(let E=0;E<g.length;E++)g[E]=g[E]/v;u.envMap.value=t.texture,u.samples.value=m,u.weights.value=g,u.latitudinal.value=s==="latitudinal",o&&(u.poleAxis.value=o);let{_lodMax:y}=this;u.dTheta.value=f,u.mipInt.value=y-n;let x=this._sizeLods[i],b=3*x*(i>y-A0?i-y+A0:0),w=4*(this._cubeSize-x);yA(e,b,w,3*x,2*x),a.setRenderTarget(e),a.render(d,RI)}};function Iqe(t){let e=[],n=[],i=[],r=t,s=t-A0+1+AY.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);n.push(a);let l=1/a;o>t-A0?l=AY[o-t+A0-1]:o===0&&(l=0),i.push(l);let c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=new Float32Array(v*p*f);for(let E=0;E<f;E++){let A=E%3*2/3-1,S=E>2?0:-1,C=[A,S,0,A+2/3,S,0,A+2/3,S+1,0,A,S,0,A+2/3,S+1,0,A,S+1,0];y.set(C,m*p*E),x.set(h,g*p*E);let T=[E,E,E,E,E,E];b.set(T,v*p*E)}let w=new Ut;w.setAttribute("position",new Wt(y,m)),w.setAttribute("uv",new Wt(x,g)),w.setAttribute("faceIndex",new Wt(b,v)),e.push(w),r>A0&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function DY(t,e,n){let i=new jn(t,e,n);return i.texture.mapping=PS,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function yA(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function kqe(t,e,n){let i=new Float32Array(rm),r=new q(0,1,0);return new di({name:"SphericalGaussianBlur",defines:{n:rm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:JV(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:wr,depthTest:!1,depthWrite:!1})}function RY(){return new di({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:JV(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:wr,depthTest:!1,depthWrite:!1})}function OY(){return new di({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:JV(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:wr,depthTest:!1,depthWrite:!1})}function JV(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Nqe(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===Wz||l===qz,d=l===ig||l===rg;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return n===null&&(n=new PY(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{let u=a.image;if(c&&u&&u.height>0||d&&u&&r(u)){n===null&&(n=new PY(t));let h=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function r(a){let l=0,c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){let l=a.target;l.removeEventListener("dispose",s);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function Bqe(t){let e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){let r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function zqe(t,e,n,i){let r={},s=new WeakMap;function o(u){let h=u.target;h.index!==null&&e.remove(h.index);for(let p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];let f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,n.memory.geometries++),h}function l(u){let h=u.attributes;for(let p in h)e.update(h[p],34962);let f=u.morphAttributes;for(let p in f){let m=f[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}}function c(u){let h=[],f=u.index,p=u.attributes.position,m=0;if(f!==null){let y=f.array;m=f.version;for(let x=0,b=y.length;x<b;x+=3){let w=y[x+0],E=y[x+1],A=y[x+2];h.push(w,E,E,A,A,w)}}else{let y=p.array;m=p.version;for(let x=0,b=y.length/3-1;x<b;x+=3){let w=x+0,E=x+1,A=x+2;h.push(w,E,E,A,A,w)}}let g=new(Ece(h)?K0:Pce)(h,1);g.version=m;let v=s.get(u);v&&e.remove(v),s.set(u,g)}function d(u){let h=s.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function Fqe(t,e,n,i){let r=i.isWebGL2,s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function d(h,f){t.drawElements(s,f,a,h*l),n.update(f,s,1)}function u(h,f,p){if(p===0)return;let m,g;if(r)m=t,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,f,a,h*l,p),n.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=u}function Uqe(t){let e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Vqe(t,e){return t[0]-e[0]}function Hqe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function jqe(t,e,n){let i={},r=new Float32Array(8),s=new WeakMap,o=new sn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,u,h){let f=c.morphTargetInfluences;if(e.isWebGL2===!0){let p=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,m=p!==void 0?p.length:0,g=s.get(d);if(g===void 0||g.count!==m){let x=function(){O.dispose(),s.delete(d),d.removeEventListener("dispose",x)};g!==void 0&&g.texture.dispose();let b=d.morphAttributes.position!==void 0,w=d.morphAttributes.normal!==void 0,E=d.morphAttributes.color!==void 0,A=d.morphAttributes.position||[],S=d.morphAttributes.normal||[],C=d.morphAttributes.color||[],T=0;b===!0&&(T=1),w===!0&&(T=2),E===!0&&(T=3);let P=d.attributes.position.count*T,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);let L=new Float32Array(P*R*4*m),O=new Cce(L,P,R,m);O.type=sl,O.needsUpdate=!0;let B=T*4;for(let $=0;$<m;$++){let X=A[$],H=S[$],U=C[$],N=P*R*4*$;for(let k=0;k<X.count;k++){let z=k*B;b===!0&&(o.fromBufferAttribute(X,k),L[N+z+0]=o.x,L[N+z+1]=o.y,L[N+z+2]=o.z,L[N+z+3]=0),w===!0&&(o.fromBufferAttribute(H,k),L[N+z+4]=o.x,L[N+z+5]=o.y,L[N+z+6]=o.z,L[N+z+7]=0),E===!0&&(o.fromBufferAttribute(U,k),L[N+z+8]=o.x,L[N+z+9]=o.y,L[N+z+10]=o.z,L[N+z+11]=U.itemSize===4?o.w:1)}}g={count:m,texture:O,size:new Se(P,R)},s.set(d,g),d.addEventListener("dispose",x)}let v=0;for(let x=0;x<f.length;x++)v+=f[x];let y=d.morphTargetsRelative?1:1-v;h.getUniforms().setValue(t,"morphTargetBaseInfluence",y),h.getUniforms().setValue(t,"morphTargetInfluences",f),h.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{let p=f===void 0?0:f.length,m=i[d.id];if(m===void 0||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[d.id]=m}for(let b=0;b<p;b++){let w=m[b];w[0]=b,w[1]=f[b]}m.sort(Hqe);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(Vqe);let g=d.morphAttributes.position,v=d.morphAttributes.normal,y=0;for(let b=0;b<8;b++){let w=a[b],E=w[0],A=w[1];E!==Number.MAX_SAFE_INTEGER&&A?(g&&d.getAttribute("morphTarget"+b)!==g[E]&&d.setAttribute("morphTarget"+b,g[E]),v&&d.getAttribute("morphNormal"+b)!==v[E]&&d.setAttribute("morphNormal"+b,v[E]),r[b]=A,y+=A):(g&&d.hasAttribute("morphTarget"+b)===!0&&d.deleteAttribute("morphTarget"+b),v&&d.hasAttribute("morphNormal"+b)===!0&&d.deleteAttribute("morphNormal"+b),r[b]=0)}let x=d.morphTargetsRelative?1:1-y;h.getUniforms().setValue(t,"morphTargetBaseInfluence",x),h.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function Gqe(t,e,n,i){let r=new WeakMap;function s(l){let c=i.render.frame,d=l.geometry,u=e.get(l,d);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),u}function o(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}var Oce=new kr,Lce=new Cce,Ice=new D8e,kce=new ZV,LY=[],IY=[],kY=new Float32Array(16),NY=new Float32Array(9),BY=new Float32Array(4);function Rx(t,e,n){let i=t[0];if(i<=0||i>0)return t;let r=e*n,s=LY[r];if(s===void 0&&(s=new Float32Array(r),LY[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function zr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Fr(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function cR(t,e){let n=IY[e];n===void 0&&(n=new Int32Array(e),IY[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Wqe(t,e){let n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function qqe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zr(n,e))return;t.uniform2fv(this.addr,e),Fr(n,e)}}function $qe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(zr(n,e))return;t.uniform3fv(this.addr,e),Fr(n,e)}}function Xqe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zr(n,e))return;t.uniform4fv(this.addr,e),Fr(n,e)}}function Yqe(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(zr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Fr(n,e)}else{if(zr(n,i))return;BY.set(i),t.uniformMatrix2fv(this.addr,!1,BY),Fr(n,i)}}function Kqe(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(zr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Fr(n,e)}else{if(zr(n,i))return;NY.set(i),t.uniformMatrix3fv(this.addr,!1,NY),Fr(n,i)}}function Zqe(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(zr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Fr(n,e)}else{if(zr(n,i))return;kY.set(i),t.uniformMatrix4fv(this.addr,!1,kY),Fr(n,i)}}function Qqe(t,e){let n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Jqe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zr(n,e))return;t.uniform2iv(this.addr,e),Fr(n,e)}}function e$e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zr(n,e))return;t.uniform3iv(this.addr,e),Fr(n,e)}}function t$e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zr(n,e))return;t.uniform4iv(this.addr,e),Fr(n,e)}}function n$e(t,e){let n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function i$e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zr(n,e))return;t.uniform2uiv(this.addr,e),Fr(n,e)}}function r$e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zr(n,e))return;t.uniform3uiv(this.addr,e),Fr(n,e)}}function s$e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zr(n,e))return;t.uniform4uiv(this.addr,e),Fr(n,e)}}function o$e(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Oce,r)}function a$e(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Ice,r)}function l$e(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||kce,r)}function c$e(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Lce,r)}function u$e(t){switch(t){case 5126:return Wqe;case 35664:return qqe;case 35665:return $qe;case 35666:return Xqe;case 35674:return Yqe;case 35675:return Kqe;case 35676:return Zqe;case 5124:case 35670:return Qqe;case 35667:case 35671:return Jqe;case 35668:case 35672:return e$e;case 35669:case 35673:return t$e;case 5125:return n$e;case 36294:return i$e;case 36295:return r$e;case 36296:return s$e;case 35678:case 36198:case 36298:case 36306:case 35682:return o$e;case 35679:case 36299:case 36307:return a$e;case 35680:case 36300:case 36308:case 36293:return l$e;case 36289:case 36303:case 36311:case 36292:return c$e}}function d$e(t,e){t.uniform1fv(this.addr,e)}function h$e(t,e){let n=Rx(e,this.size,2);t.uniform2fv(this.addr,n)}function f$e(t,e){let n=Rx(e,this.size,3);t.uniform3fv(this.addr,n)}function p$e(t,e){let n=Rx(e,this.size,4);t.uniform4fv(this.addr,n)}function m$e(t,e){let n=Rx(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function g$e(t,e){let n=Rx(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function v$e(t,e){let n=Rx(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function y$e(t,e){t.uniform1iv(this.addr,e)}function x$e(t,e){t.uniform2iv(this.addr,e)}function b$e(t,e){t.uniform3iv(this.addr,e)}function w$e(t,e){t.uniform4iv(this.addr,e)}function _$e(t,e){t.uniform1uiv(this.addr,e)}function S$e(t,e){t.uniform2uiv(this.addr,e)}function E$e(t,e){t.uniform3uiv(this.addr,e)}function M$e(t,e){t.uniform4uiv(this.addr,e)}function A$e(t,e,n){let i=this.cache,r=e.length,s=cR(n,r);zr(i,s)||(t.uniform1iv(this.addr,s),Fr(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||Oce,s[o])}function T$e(t,e,n){let i=this.cache,r=e.length,s=cR(n,r);zr(i,s)||(t.uniform1iv(this.addr,s),Fr(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||Ice,s[o])}function C$e(t,e,n){let i=this.cache,r=e.length,s=cR(n,r);zr(i,s)||(t.uniform1iv(this.addr,s),Fr(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||kce,s[o])}function P$e(t,e,n){let i=this.cache,r=e.length,s=cR(n,r);zr(i,s)||(t.uniform1iv(this.addr,s),Fr(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||Lce,s[o])}function D$e(t){switch(t){case 5126:return d$e;case 35664:return h$e;case 35665:return f$e;case 35666:return p$e;case 35674:return m$e;case 35675:return g$e;case 35676:return v$e;case 5124:case 35670:return y$e;case 35667:case 35671:return x$e;case 35668:case 35672:return b$e;case 35669:case 35673:return w$e;case 5125:return _$e;case 36294:return S$e;case 36295:return E$e;case 36296:return M$e;case 35678:case 36198:case 36298:case 36306:case 35682:return A$e;case 35679:case 36299:case 36307:return T$e;case 35680:case 36300:case 36308:case 36293:return C$e;case 36289:case 36303:case 36311:case 36292:return P$e}}var R$e=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=u$e(e.type)}},O$e=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=D$e(e.type)}},L$e=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){let i=this.seq;for(let r=0,s=i.length;r!==s;++r){let o=i[r];o.setValue(t,e[o.id],n)}}},LI=/(\w+)(\])?(\[|\.)?/g;function zY(t,e){t.seq.push(e),t.map[e.id]=e}function I$e(t,e,n){let i=t.name,r=i.length;for(LI.lastIndex=0;;){let s=LI.exec(i),o=LI.lastIndex,a=s[1],l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){zY(n,c===void 0?new R$e(a,t,e):new O$e(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new L$e(a),zY(n,d)),n=d}}}var GT=class{constructor(t,e){this.seq=[],this.map={};let n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){let r=t.getActiveUniform(e,i),s=t.getUniformLocation(e,r.name);I$e(r,s,this)}}setValue(t,e,n,i){let r=this.map[e];r!==void 0&&r.setValue(t,n,i)}setOptional(t,e,n){let i=e[n];i!==void 0&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){let o=e[r],a=n[o.id];a.needsUpdate!==!1&&o.setValue(t,a.value,i)}}static seqWithValue(t,e){let n=[];for(let i=0,r=t.length;i!==r;++i){let s=t[i];s.id in e&&n.push(s)}return n}};function FY(t,e,n){let i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}var k$e=0;function N$e(t,e){let n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function B$e(t){switch(t){case pu:return["Linear","( value )"];case Zt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function UY(t,e,n){let i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+N$e(t.getShaderSource(e),o)}else return r}function z$e(t,e){let n=B$e(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function F$e(t,e){let n;switch(e){case WWe:n="Linear";break;case qWe:n="Reinhard";break;case $We:n="OptimizedCineon";break;case XWe:n="ACESFilmic";break;case YWe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function U$e(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ob).join(`
`)}function V$e(t){let e=[];for(let n in t){let i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function H$e(t,e){let n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){let s=t.getActiveAttrib(e,r),o=s.name,a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Ob(t){return t!==""}function VY(t,e){let n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function HY(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var j$e=/^[ \t]*#include +<([\w\d./]+)>/gm;function Zz(t){return t.replace(j$e,G$e)}function G$e(t,e){let n=Jt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Zz(n)}var W$e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jY(t){return t.replace(W$e,q$e)}function q$e(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function GY(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $$e(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===XV?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===gce?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Rb&&(e="SHADOWMAP_TYPE_VSM"),e}function X$e(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ig:case rg:e="ENVMAP_TYPE_CUBE";break;case PS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Y$e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case rg:e="ENVMAP_MODE_REFRACTION";break}return e}function K$e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case xce:e="ENVMAP_BLENDING_MULTIPLY";break;case jWe:e="ENVMAP_BLENDING_MIX";break;case GWe:e="ENVMAP_BLENDING_ADD";break}return e}function Z$e(t){let e=t.envMapCubeUVHeight;if(e===null)return null;let n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Q$e(t,e,n,i){let r=t.getContext(),s=n.defines,o=n.vertexShader,a=n.fragmentShader,l=$$e(n),c=X$e(n),d=Y$e(n),u=K$e(n),h=Z$e(n),f=n.isWebGL2?"":U$e(n),p=V$e(s),m=r.createProgram(),g,v,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=[p].filter(Ob).join(`
`),g.length>0&&(g+=`
`),v=[f,p].filter(Ob).join(`
`),v.length>0&&(v+=`
`)):(g=[GY(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ob).join(`
`),v=[f,GY(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Sd?"#define TONE_MAPPING":"",n.toneMapping!==Sd?Jt.tonemapping_pars_fragment:"",n.toneMapping!==Sd?F$e("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Jt.encodings_pars_fragment,z$e("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ob).join(`
`)),o=Zz(o),o=VY(o,n),o=HY(o,n),a=Zz(a),a=VY(a,n),a=HY(a,n),o=jY(o),a=jY(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",n.glslVersion===pY?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===pY?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let x=y+g+o,b=y+v+a,w=FY(r,35633,x),E=FY(r,35632,b);if(r.attachShader(m,w),r.attachShader(m,E),n.index0AttributeName!==void 0?r.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){let C=r.getProgramInfoLog(m).trim(),T=r.getShaderInfoLog(w).trim(),P=r.getShaderInfoLog(E).trim(),R=!0,L=!0;if(r.getProgramParameter(m,35714)===!1){R=!1;let O=UY(r,w,"vertex"),B=UY(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+C+`
`+O+`
`+B)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(T===""||P==="")&&(L=!1);L&&(this.diagnostics={runnable:R,programLog:C,vertexShader:{log:T,prefix:g},fragmentShader:{log:P,prefix:v}})}r.deleteShader(w),r.deleteShader(E);let A;this.getUniforms=function(){return A===void 0&&(A=new GT(r,m)),A};let S;return this.getAttributes=function(){return S===void 0&&(S=H$e(r,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=k$e++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=E,this}var J$e=0,eXe=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(r)===!1&&(s.add(r),r.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){let e=this.shaderCache,n=e.get(t);return n===void 0&&(n=new tXe(t),e.set(t,n)),n}},tXe=class{constructor(t){this.id=J$e++,this.code=t,this.usedTimes=0}};function nXe(t,e,n,i,r,s,o){let a=new KV,l=new eXe,c=[],d=r.isWebGL2,u=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(S,C,T,P,R){let L=P.fog,O=R.geometry,B=S.isMeshStandardMaterial?P.environment:null,$=(S.isMeshStandardMaterial?n:e).get(S.envMap||B),X=$&&$.mapping===PS?$.image.height:null,H=p[S.type];S.precision!==null&&(f=r.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let U=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,N=U!==void 0?U.length:0,k=0;O.morphAttributes.position!==void 0&&(k=1),O.morphAttributes.normal!==void 0&&(k=2),O.morphAttributes.color!==void 0&&(k=3);let z,W,K,J;if(H){let re=jc[H];z=re.vertexShader,W=re.fragmentShader}else z=S.vertexShader,W=S.fragmentShader,l.update(S),K=l.getVertexShaderID(S),J=l.getFragmentShaderID(S);let F=t.getRenderTarget(),ee=S.alphaTest>0,ie=S.clearcoat>0,te=S.iridescence>0;return{isWebGL2:d,shaderID:H,shaderName:S.type,vertexShader:z,fragmentShader:W,defines:S.defines,customVertexShaderID:K,customFragmentShaderID:J,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,instancing:R.isInstancedMesh===!0,instancingColor:R.isInstancedMesh===!0&&R.instanceColor!==null,supportsVertexTextures:h,outputEncoding:F===null?t.outputEncoding:F.isXRRenderTarget===!0?F.texture.encoding:pu,map:!!S.map,matcap:!!S.matcap,envMap:!!$,envMapMode:$&&$.mapping,envMapCubeUVHeight:X,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===h8e,tangentSpaceNormalMap:S.normalMapType===d8e,decodeVideoTexture:!!S.map&&S.map.isVideoTexture===!0&&S.map.encoding===Zt,clearcoat:ie,clearcoatMap:ie&&!!S.clearcoatMap,clearcoatRoughnessMap:ie&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!S.clearcoatNormalMap,iridescence:te,iridescenceMap:te&&!!S.iridescenceMap,iridescenceThicknessMap:te&&!!S.iridescenceThicknessMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:S.transparent===!1&&S.blending===Y0,alphaMap:!!S.alphaMap,alphaTest:ee,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!O.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.iridescenceMap||S.iridescenceThicknessMap||S.transmission>0||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||S.sheen>0||S.sheenColorMap||S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!L,useFog:S.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:u,skinning:R.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:N,morphTextureStride:k,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:S.toneMapped?t.toneMapping:Sd,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===ca,flipSided:S.side===Qr,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function g(S){let C=[];if(S.shaderID?C.push(S.shaderID):(C.push(S.customVertexShaderID),C.push(S.customFragmentShaderID)),S.defines!==void 0)for(let T in S.defines)C.push(T),C.push(S.defines[T]);return S.isRawShaderMaterial===!1&&(v(C,S),y(C,S),C.push(t.outputEncoding)),C.push(S.customProgramCacheKey),C.join()}function v(S,C){S.push(C.precision),S.push(C.outputEncoding),S.push(C.envMapMode),S.push(C.envMapCubeUVHeight),S.push(C.combine),S.push(C.vertexUvs),S.push(C.fogExp2),S.push(C.sizeAttenuation),S.push(C.morphTargetsCount),S.push(C.morphAttributeCount),S.push(C.numDirLights),S.push(C.numPointLights),S.push(C.numSpotLights),S.push(C.numSpotLightMaps),S.push(C.numHemiLights),S.push(C.numRectAreaLights),S.push(C.numDirLightShadows),S.push(C.numPointLightShadows),S.push(C.numSpotLightShadows),S.push(C.numSpotLightShadowsWithMaps),S.push(C.shadowMapType),S.push(C.toneMapping),S.push(C.numClippingPlanes),S.push(C.numClipIntersection),S.push(C.depthPacking)}function y(S,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.map&&a.enable(4),C.matcap&&a.enable(5),C.envMap&&a.enable(6),C.lightMap&&a.enable(7),C.aoMap&&a.enable(8),C.emissiveMap&&a.enable(9),C.bumpMap&&a.enable(10),C.normalMap&&a.enable(11),C.objectSpaceNormalMap&&a.enable(12),C.tangentSpaceNormalMap&&a.enable(13),C.clearcoat&&a.enable(14),C.clearcoatMap&&a.enable(15),C.clearcoatRoughnessMap&&a.enable(16),C.clearcoatNormalMap&&a.enable(17),C.iridescence&&a.enable(18),C.iridescenceMap&&a.enable(19),C.iridescenceThicknessMap&&a.enable(20),C.displacementMap&&a.enable(21),C.specularMap&&a.enable(22),C.roughnessMap&&a.enable(23),C.metalnessMap&&a.enable(24),C.gradientMap&&a.enable(25),C.alphaMap&&a.enable(26),C.alphaTest&&a.enable(27),C.vertexColors&&a.enable(28),C.vertexAlphas&&a.enable(29),C.vertexUvs&&a.enable(30),C.vertexTangents&&a.enable(31),C.uvsVertexOnly&&a.enable(32),S.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.physicallyCorrectLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.specularIntensityMap&&a.enable(15),C.specularColorMap&&a.enable(16),C.transmission&&a.enable(17),C.transmissionMap&&a.enable(18),C.thicknessMap&&a.enable(19),C.sheen&&a.enable(20),C.sheenColorMap&&a.enable(21),C.sheenRoughnessMap&&a.enable(22),C.decodeVideoTexture&&a.enable(23),C.opaque&&a.enable(24),S.push(a.mask)}function x(S){let C=p[S.type],T;if(C){let P=jc[C];T=Px.clone(P.uniforms)}else T=S.uniforms;return T}function b(S,C){let T;for(let P=0,R=c.length;P<R;P++){let L=c[P];if(L.cacheKey===C){T=L,++T.usedTimes;break}}return T===void 0&&(T=new Q$e(t,C,S,s),c.push(T)),T}function w(S){if(--S.usedTimes===0){let C=c.indexOf(S);c[C]=c[c.length-1],c.pop(),S.destroy()}}function E(S){l.remove(S)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:b,releaseProgram:w,releaseShaderCache:E,programs:c,dispose:A}}function iXe(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function rXe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function WY(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function qY(){let t=[],e=0,n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(u,h,f,p,m,g){let v=t[e];return v===void 0?(v={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:m,group:g},t[e]=v):(v.id=u.id,v.object=u,v.geometry=h,v.material=f,v.groupOrder=p,v.renderOrder=u.renderOrder,v.z=m,v.group=g),e++,v}function a(u,h,f,p,m,g){let v=o(u,h,f,p,m,g);f.transmission>0?i.push(v):f.transparent===!0?r.push(v):n.push(v)}function l(u,h,f,p,m,g){let v=o(u,h,f,p,m,g);f.transmission>0?i.unshift(v):f.transparent===!0?r.unshift(v):n.unshift(v)}function c(u,h){n.length>1&&n.sort(u||rXe),i.length>1&&i.sort(h||WY),r.length>1&&r.sort(h||WY)}function d(){for(let u=e,h=t.length;u<h;u++){let f=t[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:d,sort:c}}function sXe(){let t=new WeakMap;function e(i,r){let s=t.get(i),o;return s===void 0?(o=new qY,t.set(i,[o])):r>=s.length?(o=new qY,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function oXe(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new q,color:new Lt};break;case"SpotLight":n={position:new q,direction:new q,color:new Lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new q,color:new Lt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new q,skyColor:new Lt,groundColor:new Lt};break;case"RectAreaLight":n={color:new Lt,position:new q,halfWidth:new q,halfHeight:new q};break}return t[e.id]=n,n}}}function aXe(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}var lXe=0;function cXe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function uXe(t,e){let n=new oXe,i=aXe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new q);let s=new q,o=new tt,a=new tt;function l(d,u){let h=0,f=0,p=0;for(let P=0;P<9;P++)r.probe[P].set(0,0,0);let m=0,g=0,v=0,y=0,x=0,b=0,w=0,E=0,A=0,S=0;d.sort(cXe);let C=u!==!0?Math.PI:1;for(let P=0,R=d.length;P<R;P++){let L=d[P],O=L.color,B=L.intensity,$=L.distance,X=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)h+=O.r*B*C,f+=O.g*B*C,p+=O.b*B*C;else if(L.isLightProbe)for(let H=0;H<9;H++)r.probe[H].addScaledVector(L.sh.coefficients[H],B);else if(L.isDirectionalLight){let H=n.get(L);if(H.color.copy(L.color).multiplyScalar(L.intensity*C),L.castShadow){let U=L.shadow,N=i.get(L);N.shadowBias=U.bias,N.shadowNormalBias=U.normalBias,N.shadowRadius=U.radius,N.shadowMapSize=U.mapSize,r.directionalShadow[m]=N,r.directionalShadowMap[m]=X,r.directionalShadowMatrix[m]=L.shadow.matrix,b++}r.directional[m]=H,m++}else if(L.isSpotLight){let H=n.get(L);H.position.setFromMatrixPosition(L.matrixWorld),H.color.copy(O).multiplyScalar(B*C),H.distance=$,H.coneCos=Math.cos(L.angle),H.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),H.decay=L.decay,r.spot[v]=H;let U=L.shadow;if(L.map&&(r.spotLightMap[A]=L.map,A++,U.updateMatrices(L),L.castShadow&&S++),r.spotLightMatrix[v]=U.matrix,L.castShadow){let N=i.get(L);N.shadowBias=U.bias,N.shadowNormalBias=U.normalBias,N.shadowRadius=U.radius,N.shadowMapSize=U.mapSize,r.spotShadow[v]=N,r.spotShadowMap[v]=X,E++}v++}else if(L.isRectAreaLight){let H=n.get(L);H.color.copy(O).multiplyScalar(B),H.halfWidth.set(L.width*.5,0,0),H.halfHeight.set(0,L.height*.5,0),r.rectArea[y]=H,y++}else if(L.isPointLight){let H=n.get(L);if(H.color.copy(L.color).multiplyScalar(L.intensity*C),H.distance=L.distance,H.decay=L.decay,L.castShadow){let U=L.shadow,N=i.get(L);N.shadowBias=U.bias,N.shadowNormalBias=U.normalBias,N.shadowRadius=U.radius,N.shadowMapSize=U.mapSize,N.shadowCameraNear=U.camera.near,N.shadowCameraFar=U.camera.far,r.pointShadow[g]=N,r.pointShadowMap[g]=X,r.pointShadowMatrix[g]=L.shadow.matrix,w++}r.point[g]=H,g++}else if(L.isHemisphereLight){let H=n.get(L);H.skyColor.copy(L.color).multiplyScalar(B*C),H.groundColor.copy(L.groundColor).multiplyScalar(B*C),r.hemi[x]=H,x++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=st.LTC_FLOAT_1,r.rectAreaLTC2=st.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=st.LTC_HALF_1,r.rectAreaLTC2=st.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;let T=r.hash;(T.directionalLength!==m||T.pointLength!==g||T.spotLength!==v||T.rectAreaLength!==y||T.hemiLength!==x||T.numDirectionalShadows!==b||T.numPointShadows!==w||T.numSpotShadows!==E||T.numSpotMaps!==A)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=y,r.point.length=g,r.hemi.length=x,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=E+A-S,r.spotLightMap.length=A,r.numSpotLightShadowsWithMaps=S,T.directionalLength=m,T.pointLength=g,T.spotLength=v,T.rectAreaLength=y,T.hemiLength=x,T.numDirectionalShadows=b,T.numPointShadows=w,T.numSpotShadows=E,T.numSpotMaps=A,r.version=lXe++)}function c(d,u){let h=0,f=0,p=0,m=0,g=0,v=u.matrixWorldInverse;for(let y=0,x=d.length;y<x;y++){let b=d[y];if(b.isDirectionalLight){let w=r.directional[h];w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),h++}else if(b.isSpotLight){let w=r.spot[p];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),p++}else if(b.isRectAreaLight){let w=r.rectArea[m];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),a.identity(),o.copy(b.matrixWorld),o.premultiply(v),a.extractRotation(o),w.halfWidth.set(b.width*.5,0,0),w.halfHeight.set(0,b.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){let w=r.point[f];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),f++}else if(b.isHemisphereLight){let w=r.hemi[g];w.direction.setFromMatrixPosition(b.matrixWorld),w.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:r}}function $Y(t,e){let n=new uXe(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){n.setup(i,d)}function c(d){n.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function dXe(t,e){let n=new WeakMap;function i(s,o=0){let a=n.get(s),l;return a===void 0?(l=new $Y(t,e),n.set(s,[l])):o>=a.length?(l=new $Y(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}var Nce=class extends DS{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Zd,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},hXe=class extends DS{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},fXe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,pXe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function mXe(t,e,n){let i=new QV,r=new Se,s=new Se,o=new sn,a=new Nce({depthPacking:Sce}),l=new hXe,c={},d=n.maxTextureSize,u={[oc]:Qr,[Qr]:oc,[ca]:ca},h=new di({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:fXe,fragmentShader:pXe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new Ut;p.setAttribute("position",new Wt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new Po(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=XV,this.render=function(b,w,E){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;let A=t.getRenderTarget(),S=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),T=t.state;T.setBlending(wr),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let P=0,R=b.length;P<R;P++){let L=b[P],O=L.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;r.copy(O.mapSize);let B=O.getFrameExtents();if(r.multiply(B),s.copy(O.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/B.x),r.x=s.x*B.x,O.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/B.y),r.y=s.y*B.y,O.mapSize.y=s.y)),O.map===null){let X=this.type!==Rb?{minFilter:Jn,magFilter:Jn}:{};O.map=new jn(r.x,r.y,X),O.map.texture.name=L.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();let $=O.getViewportCount();for(let X=0;X<$;X++){let H=O.getViewport(X);o.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),T.viewport(o),O.updateMatrices(L,X),i=O.getFrustum(),x(w,E,O.camera,L,this.type)}O.isPointLightShadow!==!0&&this.type===Rb&&v(O,E),O.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(A,S,C)};function v(b,w){let E=e.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new jn(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(w,null,E,h,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(w,null,E,f,m,null)}function y(b,w,E,A,S,C){let T=null,P=E.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(P!==void 0)T=P;else if(T=E.isPointLight===!0?l:a,t.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){let R=T.uuid,L=w.uuid,O=c[R];O===void 0&&(O={},c[R]=O);let B=O[L];B===void 0&&(B=T.clone(),O[L]=B),T=B}return T.visible=w.visible,T.wireframe=w.wireframe,C===Rb?T.side=w.shadowSide!==null?w.shadowSide:w.side:T.side=w.shadowSide!==null?w.shadowSide:u[w.side],T.alphaMap=w.alphaMap,T.alphaTest=w.alphaTest,T.map=w.map,T.clipShadows=w.clipShadows,T.clippingPlanes=w.clippingPlanes,T.clipIntersection=w.clipIntersection,T.displacementMap=w.displacementMap,T.displacementScale=w.displacementScale,T.displacementBias=w.displacementBias,T.wireframeLinewidth=w.wireframeLinewidth,T.linewidth=w.linewidth,E.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(E.matrixWorld),T.nearDistance=A,T.farDistance=S),T}function x(b,w,E,A,S){if(b.visible===!1)return;if(b.layers.test(w.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&S===Rb)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,b.matrixWorld);let T=e.update(b),P=b.material;if(Array.isArray(P)){let R=T.groups;for(let L=0,O=R.length;L<O;L++){let B=R[L],$=P[B.materialIndex];if($&&$.visible){let X=y(b,$,A,E.near,E.far,S);t.renderBufferDirect(E,null,T,X,b,B)}}}else if(P.visible){let R=y(b,P,A,E.near,E.far,S);t.renderBufferDirect(E,null,T,R,b,null)}}let C=b.children;for(let T=0,P=C.length;T<P;T++)x(C[T],w,E,A,S)}}function gXe(t,e,n){let i=n.isWebGL2;function r(){let ne=!1,ge=new sn,Me=null,qe=new sn(0,0,0,0);return{setMask:function(Qe){Me!==Qe&&!ne&&(t.colorMask(Qe,Qe,Qe,Qe),Me=Qe)},setLocked:function(Qe){ne=Qe},setClear:function(Qe,yt,un,bn,Vr){Vr===!0&&(Qe*=bn,yt*=bn,un*=bn),ge.set(Qe,yt,un,bn),qe.equals(ge)===!1&&(t.clearColor(Qe,yt,un,bn),qe.copy(ge))},reset:function(){ne=!1,Me=null,qe.set(-1,0,0,0)}}}function s(){let ne=!1,ge=null,Me=null,qe=null;return{setTest:function(Qe){Qe?ee(2929):ie(2929)},setMask:function(Qe){ge!==Qe&&!ne&&(t.depthMask(Qe),ge=Qe)},setFunc:function(Qe){if(Me!==Qe){switch(Qe){case NWe:t.depthFunc(512);break;case BWe:t.depthFunc(519);break;case zWe:t.depthFunc(513);break;case Gz:t.depthFunc(515);break;case FWe:t.depthFunc(514);break;case UWe:t.depthFunc(518);break;case VWe:t.depthFunc(516);break;case HWe:t.depthFunc(517);break;default:t.depthFunc(515)}Me=Qe}},setLocked:function(Qe){ne=Qe},setClear:function(Qe){qe!==Qe&&(t.clearDepth(Qe),qe=Qe)},reset:function(){ne=!1,ge=null,Me=null,qe=null}}}function o(){let ne=!1,ge=null,Me=null,qe=null,Qe=null,yt=null,un=null,bn=null,Vr=null;return{setTest:function(It){ne||(It?ee(2960):ie(2960))},setMask:function(It){ge!==It&&!ne&&(t.stencilMask(It),ge=It)},setFunc:function(It,Bi,ii){(Me!==It||qe!==Bi||Qe!==ii)&&(t.stencilFunc(It,Bi,ii),Me=It,qe=Bi,Qe=ii)},setOp:function(It,Bi,ii){(yt!==It||un!==Bi||bn!==ii)&&(t.stencilOp(It,Bi,ii),yt=It,un=Bi,bn=ii)},setLocked:function(It){ne=It},setClear:function(It){Vr!==It&&(t.clearStencil(It),Vr=It)},reset:function(){ne=!1,ge=null,Me=null,qe=null,Qe=null,yt=null,un=null,bn=null,Vr=null}}}let a=new r,l=new s,c=new o,d=new WeakMap,u=new WeakMap,h={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,w=null,E=null,A=null,S=null,C=!1,T=null,P=null,R=null,L=null,O=null,B=t.getParameter(35661),$=!1,X=0,H=t.getParameter(7938);H.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(H)[1]),$=X>=1):H.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),$=X>=2);let U=null,N={},k=t.getParameter(3088),z=t.getParameter(2978),W=new sn().fromArray(k),K=new sn().fromArray(z);function J(ne,ge,Me){let qe=new Uint8Array(4),Qe=t.createTexture();t.bindTexture(ne,Qe),t.texParameteri(ne,10241,9728),t.texParameteri(ne,10240,9728);for(let yt=0;yt<Me;yt++)t.texImage2D(ge+yt,0,6408,1,1,0,6408,5121,qe);return Qe}let F={};F[3553]=J(3553,3553,1),F[34067]=J(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ee(2929),l.setFunc(Gz),Ie(!1),Le(zX),ee(2884),be(wr);function ee(ne){h[ne]!==!0&&(t.enable(ne),h[ne]=!0)}function ie(ne){h[ne]!==!1&&(t.disable(ne),h[ne]=!1)}function te(ne,ge){return f[ne]!==ge?(t.bindFramebuffer(ne,ge),f[ne]=ge,i&&(ne===36009&&(f[36160]=ge),ne===36160&&(f[36009]=ge)),!0):!1}function re(ne,ge){let Me=m,qe=!1;if(ne)if(Me=p.get(ge),Me===void 0&&(Me=[],p.set(ge,Me)),ne.isWebGLMultipleRenderTargets){let Qe=ne.texture;if(Me.length!==Qe.length||Me[0]!==36064){for(let yt=0,un=Qe.length;yt<un;yt++)Me[yt]=36064+yt;Me.length=Qe.length,qe=!0}}else Me[0]!==36064&&(Me[0]=36064,qe=!0);else Me[0]!==1029&&(Me[0]=1029,qe=!0);qe&&(n.isWebGL2?t.drawBuffers(Me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Me))}function me(ne){return g!==ne?(t.useProgram(ne),g=ne,!0):!1}let se={[t0]:32774,[MWe]:32778,[AWe]:32779};if(i)se[HX]=32775,se[jX]=32776;else{let ne=e.get("EXT_blend_minmax");ne!==null&&(se[HX]=ne.MIN_EXT,se[jX]=ne.MAX_EXT)}let oe={[TWe]:0,[CWe]:1,[PWe]:768,[vce]:770,[kWe]:776,[LWe]:774,[RWe]:772,[DWe]:769,[yce]:771,[IWe]:775,[OWe]:773};function be(ne,ge,Me,qe,Qe,yt,un,bn){if(ne===wr){v===!0&&(ie(3042),v=!1);return}if(v===!1&&(ee(3042),v=!0),ne!==EWe){if(ne!==y||bn!==C){if((x!==t0||E!==t0)&&(t.blendEquation(32774),x=t0,E=t0),bn)switch(ne){case Y0:t.blendFuncSeparate(1,771,1,771);break;case FX:t.blendFunc(1,1);break;case UX:t.blendFuncSeparate(0,769,0,1);break;case VX:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}else switch(ne){case Y0:t.blendFuncSeparate(770,771,1,771);break;case FX:t.blendFunc(770,1);break;case UX:t.blendFuncSeparate(0,769,0,1);break;case VX:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}b=null,w=null,A=null,S=null,y=ne,C=bn}return}Qe=Qe||ge,yt=yt||Me,un=un||qe,(ge!==x||Qe!==E)&&(t.blendEquationSeparate(se[ge],se[Qe]),x=ge,E=Qe),(Me!==b||qe!==w||yt!==A||un!==S)&&(t.blendFuncSeparate(oe[Me],oe[qe],oe[yt],oe[un]),b=Me,w=qe,A=yt,S=un),y=ne,C=!1}function Ae(ne,ge){ne.side===ca?ie(2884):ee(2884);let Me=ne.side===Qr;ge&&(Me=!Me),Ie(Me),ne.blending===Y0&&ne.transparent===!1?be(wr):be(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.premultipliedAlpha),l.setFunc(ne.depthFunc),l.setTest(ne.depthTest),l.setMask(ne.depthWrite),a.setMask(ne.colorWrite);let qe=ne.stencilWrite;c.setTest(qe),qe&&(c.setMask(ne.stencilWriteMask),c.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),c.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),ve(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),ne.alphaToCoverage===!0?ee(32926):ie(32926)}function Ie(ne){T!==ne&&(ne?t.frontFace(2304):t.frontFace(2305),T=ne)}function Le(ne){ne!==_We?(ee(2884),ne!==P&&(ne===zX?t.cullFace(1029):ne===SWe?t.cullFace(1028):t.cullFace(1032))):ie(2884),P=ne}function fe(ne){ne!==R&&($&&t.lineWidth(ne),R=ne)}function ve(ne,ge,Me){ne?(ee(32823),(L!==ge||O!==Me)&&(t.polygonOffset(ge,Me),L=ge,O=Me)):ie(32823)}function ke(ne){ne?ee(3089):ie(3089)}function ze(ne){ne===void 0&&(ne=33984+B-1),U!==ne&&(t.activeTexture(ne),U=ne)}function j(ne,ge,Me){Me===void 0&&(U===null?Me=33984+B-1:Me=U);let qe=N[Me];qe===void 0&&(qe={type:void 0,texture:void 0},N[Me]=qe),(qe.type!==ne||qe.texture!==ge)&&(U!==Me&&(t.activeTexture(Me),U=Me),t.bindTexture(ne,ge||F[ne]),qe.type=ne,qe.texture=ge)}function V(){let ne=N[U];ne!==void 0&&ne.type!==void 0&&(t.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)}function le(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function xe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function De(){try{t.texSubImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ne(){try{t.texSubImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function He(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Pe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function ae(){try{t.texStorage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Fe(){try{t.texStorage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function he(){try{t.texImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ce(){try{t.texImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function Ue(ne){W.equals(ne)===!1&&(t.scissor(ne.x,ne.y,ne.z,ne.w),W.copy(ne))}function We(ne){K.equals(ne)===!1&&(t.viewport(ne.x,ne.y,ne.z,ne.w),K.copy(ne))}function rt(ne,ge){let Me=u.get(ge);Me===void 0&&(Me=new WeakMap,u.set(ge,Me));let qe=Me.get(ne);qe===void 0&&(qe=t.getUniformBlockIndex(ge,ne.name),Me.set(ne,qe))}function wt(ne,ge){let Me=u.get(ge).get(ne);d.get(ge)!==Me&&(t.uniformBlockBinding(ge,Me,ne.__bindingPointIndex),d.set(ge,Me))}function $t(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},U=null,N={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,w=null,E=null,A=null,S=null,C=!1,T=null,P=null,R=null,L=null,O=null,W.set(0,0,t.canvas.width,t.canvas.height),K.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ee,disable:ie,bindFramebuffer:te,drawBuffers:re,useProgram:me,setBlending:be,setMaterial:Ae,setFlipSided:Ie,setCullFace:Le,setLineWidth:fe,setPolygonOffset:ve,setScissorTest:ke,activeTexture:ze,bindTexture:j,unbindTexture:V,compressedTexImage2D:le,compressedTexImage3D:xe,texImage2D:he,texImage3D:Ce,updateUBOMapping:rt,uniformBlockBinding:wt,texStorage2D:ae,texStorage3D:Fe,texSubImage2D:De,texSubImage3D:Ne,compressedTexSubImage2D:He,compressedTexSubImage3D:Pe,scissor:Ue,viewport:We,reset:$t}}function vXe(t,e,n,i,r,s,o){let a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,u=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,m,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(j,V){return v?new OffscreenCanvas(j,V):l2("canvas")}function x(j,V,le,xe){let De=1;if((j.width>xe||j.height>xe)&&(De=xe/Math.max(j.width,j.height)),De<1||V===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){let Ne=V?a2:Math.floor,He=Ne(De*j.width),Pe=Ne(De*j.height);m===void 0&&(m=y(He,Pe));let ae=le?y(He,Pe):m;return ae.width=He,ae.height=Pe,ae.getContext("2d").drawImage(j,0,0,He,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+He+"x"+Pe+")."),ae}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function b(j){return Kz(j.width)&&Kz(j.height)}function w(j){return a?!1:j.wrapS!==sr||j.wrapT!==sr||j.minFilter!==Jn&&j.minFilter!==an}function E(j,V){return j.generateMipmaps&&V&&j.minFilter!==Jn&&j.minFilter!==an}function A(j){t.generateMipmap(j)}function S(j,V,le,xe,De=!1){if(a===!1)return V;if(j!==null){if(t[j]!==void 0)return t[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Ne=V;return V===6403&&(le===5126&&(Ne=33326),le===5131&&(Ne=33325),le===5121&&(Ne=33321)),V===33319&&(le===5126&&(Ne=33328),le===5131&&(Ne=33327),le===5121&&(Ne=33323)),V===6408&&(le===5126&&(Ne=34836),le===5131&&(Ne=34842),le===5121&&(Ne=xe===Zt&&De===!1?35907:32856),le===32819&&(Ne=32854),le===32820&&(Ne=32855)),(Ne===33325||Ne===33326||Ne===33327||Ne===33328||Ne===34842||Ne===34836)&&e.get("EXT_color_buffer_float"),Ne}function C(j,V,le){return E(j,le)===!0||j.isFramebufferTexture&&j.minFilter!==Jn&&j.minFilter!==an?Math.log2(Math.max(V.width,V.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?V.mipmaps.length:1}function T(j){return j===Jn||j===GX||j===rI?9728:9729}function P(j){let V=j.target;V.removeEventListener("dispose",P),L(V),V.isVideoTexture&&p.delete(V)}function R(j){let V=j.target;V.removeEventListener("dispose",R),B(V)}function L(j){let V=i.get(j);if(V.__webglInit===void 0)return;let le=j.source,xe=g.get(le);if(xe){let De=xe[V.__cacheKey];De.usedTimes--,De.usedTimes===0&&O(j),Object.keys(xe).length===0&&g.delete(le)}i.remove(j)}function O(j){let V=i.get(j);t.deleteTexture(V.__webglTexture);let le=j.source,xe=g.get(le);delete xe[V.__cacheKey],o.memory.textures--}function B(j){let V=j.texture,le=i.get(j),xe=i.get(V);if(xe.__webglTexture!==void 0&&(t.deleteTexture(xe.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let De=0;De<6;De++)t.deleteFramebuffer(le.__webglFramebuffer[De]),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[De]);else{if(t.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let De=0;De<le.__webglColorRenderbuffer.length;De++)le.__webglColorRenderbuffer[De]&&t.deleteRenderbuffer(le.__webglColorRenderbuffer[De]);le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let De=0,Ne=V.length;De<Ne;De++){let He=i.get(V[De]);He.__webglTexture&&(t.deleteTexture(He.__webglTexture),o.memory.textures--),i.remove(V[De])}i.remove(V),i.remove(j)}let $=0;function X(){$=0}function H(){let j=$;return j>=l&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+l),$+=1,j}function U(j){let V=[];return V.push(j.wrapS),V.push(j.wrapT),V.push(j.wrapR||0),V.push(j.magFilter),V.push(j.minFilter),V.push(j.anisotropy),V.push(j.internalFormat),V.push(j.format),V.push(j.type),V.push(j.generateMipmaps),V.push(j.premultiplyAlpha),V.push(j.flipY),V.push(j.unpackAlignment),V.push(j.encoding),V.join()}function N(j,V){let le=i.get(j);if(j.isVideoTexture&&ke(j),j.isRenderTargetTexture===!1&&j.version>0&&le.__version!==j.version){let xe=j.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(le,j,V);return}}n.bindTexture(3553,le.__webglTexture,33984+V)}function k(j,V){let le=i.get(j);if(j.version>0&&le.__version!==j.version){ie(le,j,V);return}n.bindTexture(35866,le.__webglTexture,33984+V)}function z(j,V){let le=i.get(j);if(j.version>0&&le.__version!==j.version){ie(le,j,V);return}n.bindTexture(32879,le.__webglTexture,33984+V)}function W(j,V){let le=i.get(j);if(j.version>0&&le.__version!==j.version){te(le,j,V);return}n.bindTexture(34067,le.__webglTexture,33984+V)}let K={[fd]:10497,[sr]:33071,[$z]:33648},J={[Jn]:9728,[GX]:9984,[rI]:9986,[an]:9729,[KWe]:9985,[zy]:9987};function F(j,V,le){if(le?(t.texParameteri(j,10242,K[V.wrapS]),t.texParameteri(j,10243,K[V.wrapT]),(j===32879||j===35866)&&t.texParameteri(j,32882,K[V.wrapR]),t.texParameteri(j,10240,J[V.magFilter]),t.texParameteri(j,10241,J[V.minFilter])):(t.texParameteri(j,10242,33071),t.texParameteri(j,10243,33071),(j===32879||j===35866)&&t.texParameteri(j,32882,33071),(V.wrapS!==sr||V.wrapT!==sr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(j,10240,T(V.magFilter)),t.texParameteri(j,10241,T(V.minFilter)),V.minFilter!==Jn&&V.minFilter!==an&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){let xe=e.get("EXT_texture_filter_anisotropic");if(V.magFilter===Jn||V.minFilter!==rI&&V.minFilter!==zy||V.type===sl&&e.has("OES_texture_float_linear")===!1||a===!1&&V.type===Fy&&e.has("OES_texture_half_float_linear")===!1)return;(V.anisotropy>1||i.get(V).__currentAnisotropy)&&(t.texParameterf(j,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,r.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy)}}function ee(j,V){let le=!1;j.__webglInit===void 0&&(j.__webglInit=!0,V.addEventListener("dispose",P));let xe=V.source,De=g.get(xe);De===void 0&&(De={},g.set(xe,De));let Ne=U(V);if(Ne!==j.__cacheKey){De[Ne]===void 0&&(De[Ne]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,le=!0),De[Ne].usedTimes++;let He=De[j.__cacheKey];He!==void 0&&(De[j.__cacheKey].usedTimes--,He.usedTimes===0&&O(V)),j.__cacheKey=Ne,j.__webglTexture=De[Ne].texture}return le}function ie(j,V,le){let xe=3553;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(xe=35866),V.isData3DTexture&&(xe=32879);let De=ee(j,V),Ne=V.source;n.bindTexture(xe,j.__webglTexture,33984+le);let He=i.get(Ne);if(Ne.version!==He.__version||De===!0){n.activeTexture(33984+le),t.pixelStorei(37440,V.flipY),t.pixelStorei(37441,V.premultiplyAlpha),t.pixelStorei(3317,V.unpackAlignment),t.pixelStorei(37443,0);let Pe=w(V)&&b(V.image)===!1,ae=x(V.image,Pe,!1,d);ae=ze(V,ae);let Fe=b(ae)||a,he=s.convert(V.format,V.encoding),Ce=s.convert(V.type),Ue=S(V.internalFormat,he,Ce,V.encoding,V.isVideoTexture);F(xe,V,Fe);let We,rt=V.mipmaps,wt=a&&V.isVideoTexture!==!0,$t=He.__version===void 0||De===!0,ne=C(V,ae,Fe);if(V.isDepthTexture)Ue=6402,a?V.type===sl?Ue=36012:V.type===rf?Ue=33190:V.type===km?Ue=35056:Ue=33189:V.type===sl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),V.format===Nm&&Ue===6402&&V.type!==wce&&V.type!==rf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),V.type=rf,Ce=s.convert(V.type)),V.format===sg&&Ue===6402&&(Ue=34041,V.type!==km&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=km,Ce=s.convert(V.type))),$t&&(wt?n.texStorage2D(3553,1,Ue,ae.width,ae.height):n.texImage2D(3553,0,Ue,ae.width,ae.height,0,he,Ce,null));else if(V.isDataTexture)if(rt.length>0&&Fe){wt&&$t&&n.texStorage2D(3553,ne,Ue,rt[0].width,rt[0].height);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],wt?n.texSubImage2D(3553,ge,0,0,We.width,We.height,he,Ce,We.data):n.texImage2D(3553,ge,Ue,We.width,We.height,0,he,Ce,We.data);V.generateMipmaps=!1}else wt?($t&&n.texStorage2D(3553,ne,Ue,ae.width,ae.height),n.texSubImage2D(3553,0,0,0,ae.width,ae.height,he,Ce,ae.data)):n.texImage2D(3553,0,Ue,ae.width,ae.height,0,he,Ce,ae.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){wt&&$t&&n.texStorage3D(35866,ne,Ue,rt[0].width,rt[0].height,ae.depth);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],V.format!==Wl?he!==null?wt?n.compressedTexSubImage3D(35866,ge,0,0,0,We.width,We.height,ae.depth,he,We.data,0,0):n.compressedTexImage3D(35866,ge,Ue,We.width,We.height,ae.depth,0,We.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?n.texSubImage3D(35866,ge,0,0,0,We.width,We.height,ae.depth,he,Ce,We.data):n.texImage3D(35866,ge,Ue,We.width,We.height,ae.depth,0,he,Ce,We.data)}else{wt&&$t&&n.texStorage2D(3553,ne,Ue,rt[0].width,rt[0].height);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],V.format!==Wl?he!==null?wt?n.compressedTexSubImage2D(3553,ge,0,0,We.width,We.height,he,We.data):n.compressedTexImage2D(3553,ge,Ue,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?n.texSubImage2D(3553,ge,0,0,We.width,We.height,he,Ce,We.data):n.texImage2D(3553,ge,Ue,We.width,We.height,0,he,Ce,We.data)}else if(V.isDataArrayTexture)wt?($t&&n.texStorage3D(35866,ne,Ue,ae.width,ae.height,ae.depth),n.texSubImage3D(35866,0,0,0,0,ae.width,ae.height,ae.depth,he,Ce,ae.data)):n.texImage3D(35866,0,Ue,ae.width,ae.height,ae.depth,0,he,Ce,ae.data);else if(V.isData3DTexture)wt?($t&&n.texStorage3D(32879,ne,Ue,ae.width,ae.height,ae.depth),n.texSubImage3D(32879,0,0,0,0,ae.width,ae.height,ae.depth,he,Ce,ae.data)):n.texImage3D(32879,0,Ue,ae.width,ae.height,ae.depth,0,he,Ce,ae.data);else if(V.isFramebufferTexture){if($t)if(wt)n.texStorage2D(3553,ne,Ue,ae.width,ae.height);else{let ge=ae.width,Me=ae.height;for(let qe=0;qe<ne;qe++)n.texImage2D(3553,qe,Ue,ge,Me,0,he,Ce,null),ge>>=1,Me>>=1}}else if(rt.length>0&&Fe){wt&&$t&&n.texStorage2D(3553,ne,Ue,rt[0].width,rt[0].height);for(let ge=0,Me=rt.length;ge<Me;ge++)We=rt[ge],wt?n.texSubImage2D(3553,ge,0,0,he,Ce,We):n.texImage2D(3553,ge,Ue,he,Ce,We);V.generateMipmaps=!1}else wt?($t&&n.texStorage2D(3553,ne,Ue,ae.width,ae.height),n.texSubImage2D(3553,0,0,0,he,Ce,ae)):n.texImage2D(3553,0,Ue,he,Ce,ae);E(V,Fe)&&A(xe),He.__version=Ne.version,V.onUpdate&&V.onUpdate(V)}j.__version=V.version}function te(j,V,le){if(V.image.length!==6)return;let xe=ee(j,V),De=V.source;n.bindTexture(34067,j.__webglTexture,33984+le);let Ne=i.get(De);if(De.version!==Ne.__version||xe===!0){n.activeTexture(33984+le),t.pixelStorei(37440,V.flipY),t.pixelStorei(37441,V.premultiplyAlpha),t.pixelStorei(3317,V.unpackAlignment),t.pixelStorei(37443,0);let He=V.isCompressedTexture||V.image[0].isCompressedTexture,Pe=V.image[0]&&V.image[0].isDataTexture,ae=[];for(let ge=0;ge<6;ge++)!He&&!Pe?ae[ge]=x(V.image[ge],!1,!0,c):ae[ge]=Pe?V.image[ge].image:V.image[ge],ae[ge]=ze(V,ae[ge]);let Fe=ae[0],he=b(Fe)||a,Ce=s.convert(V.format,V.encoding),Ue=s.convert(V.type),We=S(V.internalFormat,Ce,Ue,V.encoding),rt=a&&V.isVideoTexture!==!0,wt=Ne.__version===void 0||xe===!0,$t=C(V,Fe,he);F(34067,V,he);let ne;if(He){rt&&wt&&n.texStorage2D(34067,$t,We,Fe.width,Fe.height);for(let ge=0;ge<6;ge++){ne=ae[ge].mipmaps;for(let Me=0;Me<ne.length;Me++){let qe=ne[Me];V.format!==Wl?Ce!==null?rt?n.compressedTexSubImage2D(34069+ge,Me,0,0,qe.width,qe.height,Ce,qe.data):n.compressedTexImage2D(34069+ge,Me,We,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rt?n.texSubImage2D(34069+ge,Me,0,0,qe.width,qe.height,Ce,Ue,qe.data):n.texImage2D(34069+ge,Me,We,qe.width,qe.height,0,Ce,Ue,qe.data)}}}else{ne=V.mipmaps,rt&&wt&&(ne.length>0&&$t++,n.texStorage2D(34067,$t,We,ae[0].width,ae[0].height));for(let ge=0;ge<6;ge++)if(Pe){rt?n.texSubImage2D(34069+ge,0,0,0,ae[ge].width,ae[ge].height,Ce,Ue,ae[ge].data):n.texImage2D(34069+ge,0,We,ae[ge].width,ae[ge].height,0,Ce,Ue,ae[ge].data);for(let Me=0;Me<ne.length;Me++){let qe=ne[Me].image[ge].image;rt?n.texSubImage2D(34069+ge,Me+1,0,0,qe.width,qe.height,Ce,Ue,qe.data):n.texImage2D(34069+ge,Me+1,We,qe.width,qe.height,0,Ce,Ue,qe.data)}}else{rt?n.texSubImage2D(34069+ge,0,0,0,Ce,Ue,ae[ge]):n.texImage2D(34069+ge,0,We,Ce,Ue,ae[ge]);for(let Me=0;Me<ne.length;Me++){let qe=ne[Me];rt?n.texSubImage2D(34069+ge,Me+1,0,0,Ce,Ue,qe.image[ge]):n.texImage2D(34069+ge,Me+1,We,Ce,Ue,qe.image[ge])}}}E(V,he)&&A(34067),Ne.__version=De.version,V.onUpdate&&V.onUpdate(V)}j.__version=V.version}function re(j,V,le,xe,De){let Ne=s.convert(le.format,le.encoding),He=s.convert(le.type),Pe=S(le.internalFormat,Ne,He,le.encoding);i.get(V).__hasExternalTextures||(De===32879||De===35866?n.texImage3D(De,0,Pe,V.width,V.height,V.depth,0,Ne,He,null):n.texImage2D(De,0,Pe,V.width,V.height,0,Ne,He,null)),n.bindFramebuffer(36160,j),ve(V)?h.framebufferTexture2DMultisampleEXT(36160,xe,De,i.get(le).__webglTexture,0,fe(V)):(De===3553||De>=34069&&De<=34074)&&t.framebufferTexture2D(36160,xe,De,i.get(le).__webglTexture,0),n.bindFramebuffer(36160,null)}function me(j,V,le){if(t.bindRenderbuffer(36161,j),V.depthBuffer&&!V.stencilBuffer){let xe=33189;if(le||ve(V)){let De=V.depthTexture;De&&De.isDepthTexture&&(De.type===sl?xe=36012:De.type===rf&&(xe=33190));let Ne=fe(V);ve(V)?h.renderbufferStorageMultisampleEXT(36161,Ne,xe,V.width,V.height):t.renderbufferStorageMultisample(36161,Ne,xe,V.width,V.height)}else t.renderbufferStorage(36161,xe,V.width,V.height);t.framebufferRenderbuffer(36160,36096,36161,j)}else if(V.depthBuffer&&V.stencilBuffer){let xe=fe(V);le&&ve(V)===!1?t.renderbufferStorageMultisample(36161,xe,35056,V.width,V.height):ve(V)?h.renderbufferStorageMultisampleEXT(36161,xe,35056,V.width,V.height):t.renderbufferStorage(36161,34041,V.width,V.height),t.framebufferRenderbuffer(36160,33306,36161,j)}else{let xe=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let De=0;De<xe.length;De++){let Ne=xe[De],He=s.convert(Ne.format,Ne.encoding),Pe=s.convert(Ne.type),ae=S(Ne.internalFormat,He,Pe,Ne.encoding),Fe=fe(V);le&&ve(V)===!1?t.renderbufferStorageMultisample(36161,Fe,ae,V.width,V.height):ve(V)?h.renderbufferStorageMultisampleEXT(36161,Fe,ae,V.width,V.height):t.renderbufferStorage(36161,ae,V.width,V.height)}}t.bindRenderbuffer(36161,null)}function se(j,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,j),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),N(V.depthTexture,0);let le=i.get(V.depthTexture).__webglTexture,xe=fe(V);if(V.depthTexture.format===Nm)ve(V)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,le,0,xe):t.framebufferTexture2D(36160,36096,3553,le,0);else if(V.depthTexture.format===sg)ve(V)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,le,0,xe):t.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function oe(j){let V=i.get(j),le=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!V.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");se(V.__webglFramebuffer,j)}else if(le){V.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)n.bindFramebuffer(36160,V.__webglFramebuffer[xe]),V.__webglDepthbuffer[xe]=t.createRenderbuffer(),me(V.__webglDepthbuffer[xe],j,!1)}else n.bindFramebuffer(36160,V.__webglFramebuffer),V.__webglDepthbuffer=t.createRenderbuffer(),me(V.__webglDepthbuffer,j,!1);n.bindFramebuffer(36160,null)}function be(j,V,le){let xe=i.get(j);V!==void 0&&re(xe.__webglFramebuffer,j,j.texture,36064,3553),le!==void 0&&oe(j)}function Ae(j){let V=j.texture,le=i.get(j),xe=i.get(V);j.addEventListener("dispose",R),j.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=t.createTexture()),xe.__version=V.version,o.memory.textures++);let De=j.isWebGLCubeRenderTarget===!0,Ne=j.isWebGLMultipleRenderTargets===!0,He=b(j)||a;if(De){le.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)le.__webglFramebuffer[Pe]=t.createFramebuffer()}else{if(le.__webglFramebuffer=t.createFramebuffer(),Ne)if(r.drawBuffers){let Pe=j.texture;for(let ae=0,Fe=Pe.length;ae<Fe;ae++){let he=i.get(Pe[ae]);he.__webglTexture===void 0&&(he.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&j.samples>0&&ve(j)===!1){let Pe=Ne?V:[V];le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let ae=0;ae<Pe.length;ae++){let Fe=Pe[ae];le.__webglColorRenderbuffer[ae]=t.createRenderbuffer(),t.bindRenderbuffer(36161,le.__webglColorRenderbuffer[ae]);let he=s.convert(Fe.format,Fe.encoding),Ce=s.convert(Fe.type),Ue=S(Fe.internalFormat,he,Ce,Fe.encoding,j.isXRRenderTarget===!0),We=fe(j);t.renderbufferStorageMultisample(36161,We,Ue,j.width,j.height),t.framebufferRenderbuffer(36160,36064+ae,36161,le.__webglColorRenderbuffer[ae])}t.bindRenderbuffer(36161,null),j.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),me(le.__webglDepthRenderbuffer,j,!0)),n.bindFramebuffer(36160,null)}}if(De){n.bindTexture(34067,xe.__webglTexture),F(34067,V,He);for(let Pe=0;Pe<6;Pe++)re(le.__webglFramebuffer[Pe],j,V,36064,34069+Pe);E(V,He)&&A(34067),n.unbindTexture()}else if(Ne){let Pe=j.texture;for(let ae=0,Fe=Pe.length;ae<Fe;ae++){let he=Pe[ae],Ce=i.get(he);n.bindTexture(3553,Ce.__webglTexture),F(3553,he,He),re(le.__webglFramebuffer,j,he,36064+ae,3553),E(he,He)&&A(3553)}n.unbindTexture()}else{let Pe=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(a?Pe=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Pe,xe.__webglTexture),F(Pe,V,He),re(le.__webglFramebuffer,j,V,36064,Pe),E(V,He)&&A(Pe),n.unbindTexture()}j.depthBuffer&&oe(j)}function Ie(j){let V=b(j)||a,le=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let xe=0,De=le.length;xe<De;xe++){let Ne=le[xe];if(E(Ne,V)){let He=j.isWebGLCubeRenderTarget?34067:3553,Pe=i.get(Ne).__webglTexture;n.bindTexture(He,Pe),A(He),n.unbindTexture()}}}function Le(j){if(a&&j.samples>0&&ve(j)===!1){let V=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],le=j.width,xe=j.height,De=16384,Ne=[],He=j.stencilBuffer?33306:36096,Pe=i.get(j),ae=j.isWebGLMultipleRenderTargets===!0;if(ae)for(let Fe=0;Fe<V.length;Fe++)n.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Fe,36161,null),n.bindFramebuffer(36160,Pe.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Fe,3553,null,0);n.bindFramebuffer(36008,Pe.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Pe.__webglFramebuffer);for(let Fe=0;Fe<V.length;Fe++){Ne.push(36064+Fe),j.depthBuffer&&Ne.push(He);let he=Pe.__ignoreDepthValues!==void 0?Pe.__ignoreDepthValues:!1;if(he===!1&&(j.depthBuffer&&(De|=256),j.stencilBuffer&&(De|=1024)),ae&&t.framebufferRenderbuffer(36008,36064,36161,Pe.__webglColorRenderbuffer[Fe]),he===!0&&(t.invalidateFramebuffer(36008,[He]),t.invalidateFramebuffer(36009,[He])),ae){let Ce=i.get(V[Fe]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,Ce,0)}t.blitFramebuffer(0,0,le,xe,0,0,le,xe,De,9728),f&&t.invalidateFramebuffer(36008,Ne)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),ae)for(let Fe=0;Fe<V.length;Fe++){n.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Fe,36161,Pe.__webglColorRenderbuffer[Fe]);let he=i.get(V[Fe]).__webglTexture;n.bindFramebuffer(36160,Pe.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Fe,3553,he,0)}n.bindFramebuffer(36009,Pe.__webglMultisampledFramebuffer)}}function fe(j){return Math.min(u,j.samples)}function ve(j){let V=i.get(j);return a&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function ke(j){let V=o.render.frame;p.get(j)!==V&&(p.set(j,V),j.update())}function ze(j,V){let le=j.encoding,xe=j.format,De=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===Yz||le!==pu&&(le===Zt?a===!1?e.has("EXT_sRGB")===!0&&xe===Wl?(j.format=Yz,j.minFilter=an,j.generateMipmaps=!1):V=Ace.sRGBToLinear(V):(xe!==Wl||De!==Vs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),V}this.allocateTextureUnit=H,this.resetTextureUnits=X,this.setTexture2D=N,this.setTexture2DArray=k,this.setTexture3D=z,this.setTextureCube=W,this.rebindTextures=be,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=Le,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=re,this.useMultisampledRTT=ve}function yXe(t,e,n){let i=n.isWebGL2;function r(s,o=null){let a;if(s===Vs)return 5121;if(s===e8e)return 32819;if(s===t8e)return 32820;if(s===ZWe)return 5120;if(s===QWe)return 5122;if(s===wce)return 5123;if(s===JWe)return 5124;if(s===rf)return 5125;if(s===sl)return 5126;if(s===Fy)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===n8e)return 6406;if(s===Wl)return 6408;if(s===i8e)return 6409;if(s===r8e)return 6410;if(s===Nm)return 6402;if(s===sg)return 34041;if(s===Yz)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===s8e)return 6403;if(s===o8e)return 36244;if(s===_ce)return 33319;if(s===a8e)return 33320;if(s===l8e)return 36249;if(s===sI||s===oI||s===aI||s===lI)if(o===Zt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===sI)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===oI)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===aI)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===lI)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===sI)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===oI)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===aI)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===lI)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===WX||s===qX||s===$X||s===XX)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===WX)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===qX)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$X)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===XX)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===c8e)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===YX||s===KX)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===YX)return o===Zt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===KX)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===ZX||s===QX||s===JX||s===eY||s===tY||s===nY||s===iY||s===rY||s===sY||s===oY||s===aY||s===lY||s===cY||s===uY)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===ZX)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===QX)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===JX)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===eY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===tY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===nY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===iY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===rY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===sY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===oY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===aY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===lY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===cY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===uY)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===cI)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===cI)return o===Zt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===u8e||s===dY||s===hY||s===fY)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===cI)return a.COMPRESSED_RED_RGTC1_EXT;if(s===dY)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===hY)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===fY)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===km?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}var xXe=class extends Os{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},T0=class extends ei{constructor(){super(),this.isGroup=!0,this.type="Group"}},bXe={type:"move"},II=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new T0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new T0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new T0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null,o=this._targetRay,a=this._grip,l=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(l&&t.hand){s=!0;for(let p of t.hand.values()){let m=e.getJointPose(p,n),g=this._getHandJoint(l,p);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}let c=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],u=c.position.distanceTo(d.position),h=.02,f=.005;l.inputState.pinching&&u>h+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&u<=h-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else a!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));o!==null&&(i=e.getPose(t.targetRaySpace,n),i===null&&r!==null&&(i=r),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(bXe)))}return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let n=new T0;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}},Vy=class extends kr{constructor(t,e,n,i,r,s,o,a,l,c){if(c=c!==void 0?c:Nm,c!==Nm&&c!==sg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Nm&&(n=rf),n===void 0&&c===sg&&(n=km),super(null,i,r,s,o,a,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=o!==void 0?o:Jn,this.minFilter=a!==void 0?a:Jn,this.flipY=!1,this.generateMipmaps=!1}},wXe=class extends uo{constructor(t,e){super();let n=this,i=null,r=1,s=null,o="local-floor",a=1,l=null,c=null,d=null,u=null,h=null,f=null,p=e.getContextAttributes(),m=null,g=null,v=[],y=[],x=new Set,b=new Map,w=new Os;w.layers.enable(1),w.viewport=new sn;let E=new Os;E.layers.enable(2),E.viewport=new sn;let A=[w,E],S=new xXe;S.layers.enable(1),S.layers.enable(2);let C=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let z=v[k];return z===void 0&&(z=new II,v[k]=z),z.getTargetRaySpace()},this.getControllerGrip=function(k){let z=v[k];return z===void 0&&(z=new II,v[k]=z),z.getGripSpace()},this.getHand=function(k){let z=v[k];return z===void 0&&(z=new II,v[k]=z),z.getHandSpace()};function P(k){let z=y.indexOf(k.inputSource);if(z===-1)return;let W=v[z];W!==void 0&&W.dispatchEvent({type:k.type,data:k.inputSource})}function R(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",R),i.removeEventListener("inputsourceschange",L);for(let k=0;k<v.length;k++){let z=y[k];z!==null&&(y[k]=null,v[k].disconnect(z))}C=null,T=null,t.setRenderTarget(m),h=null,u=null,d=null,i=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(k){r=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){o=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(k){l=k},this.getBaseLayer=function(){return u!==null?u:h},this.getBinding=function(){return d},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(k){if(i=k,i!==null){if(m=t.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",R),i.addEventListener("inputsourceschange",L),p.xrCompatible!==!0&&await e.makeXRCompatible(),i.renderState.layers===void 0||t.capabilities.isWebGL2===!1){let z={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,e,z),i.updateRenderState({baseLayer:h}),g=new jn(h.framebufferWidth,h.framebufferHeight,{format:Wl,type:Vs,encoding:t.outputEncoding,stencilBuffer:p.stencil})}else{let z=null,W=null,K=null;p.depth&&(K=p.stencil?35056:33190,z=p.stencil?sg:Nm,W=p.stencil?km:rf);let J={colorFormat:32856,depthFormat:K,scaleFactor:r};d=new XRWebGLBinding(i,e),u=d.createProjectionLayer(J),i.updateRenderState({layers:[u]}),g=new jn(u.textureWidth,u.textureHeight,{format:Wl,type:Vs,depthTexture:new Vy(u.textureWidth,u.textureHeight,W,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});let F=t.properties.get(g);F.__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,s=await i.requestReferenceSpace(o),N.setContext(i),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function L(k){for(let z=0;z<k.removed.length;z++){let W=k.removed[z],K=y.indexOf(W);K>=0&&(y[K]=null,v[K].disconnect(W))}for(let z=0;z<k.added.length;z++){let W=k.added[z],K=y.indexOf(W);if(K===-1){for(let F=0;F<v.length;F++)if(F>=y.length){y.push(W),K=F;break}else if(y[F]===null){y[F]=W,K=F;break}if(K===-1)break}let J=v[K];J&&J.connect(W)}}let O=new q,B=new q;function $(k,z,W){O.setFromMatrixPosition(z.matrixWorld),B.setFromMatrixPosition(W.matrixWorld);let K=O.distanceTo(B),J=z.projectionMatrix.elements,F=W.projectionMatrix.elements,ee=J[14]/(J[10]-1),ie=J[14]/(J[10]+1),te=(J[9]+1)/J[5],re=(J[9]-1)/J[5],me=(J[8]-1)/J[0],se=(F[8]+1)/F[0],oe=ee*me,be=ee*se,Ae=K/(-me+se),Ie=Ae*-me;z.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(Ie),k.translateZ(Ae),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert();let Le=ee+Ae,fe=ie+Ae,ve=oe-Ie,ke=be+(K-Ie),ze=te*ie/fe*Le,j=re*ie/fe*Le;k.projectionMatrix.makePerspective(ve,ke,ze,j,Le,fe)}function X(k,z){z===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(z.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(i===null)return;S.near=E.near=w.near=k.near,S.far=E.far=w.far=k.far,(C!==S.near||T!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),C=S.near,T=S.far);let z=k.parent,W=S.cameras;X(S,z);for(let J=0;J<W.length;J++)X(W[J],z);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),k.matrix.copy(S.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale);let K=k.children;for(let J=0,F=K.length;J<F;J++)K[J].updateMatrixWorld(!0);W.length===2?$(S,w,E):S.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(!(u===null&&h===null))return a},this.setFoveation=function(k){a=k,u!==null&&(u.fixedFoveation=k),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=k)},this.getPlanes=function(){return x};let H=null;function U(k,z){if(c=z.getViewerPose(l||s),f=z,c!==null){let W=c.views;h!==null&&(t.setRenderTargetFramebuffer(g,h.framebuffer),t.setRenderTarget(g));let K=!1;W.length!==S.cameras.length&&(S.cameras.length=0,K=!0);for(let J=0;J<W.length;J++){let F=W[J],ee=null;if(h!==null)ee=h.getViewport(F);else{let te=d.getViewSubImage(u,F);ee=te.viewport,J===0&&(t.setRenderTargetTextures(g,te.colorTexture,u.ignoreDepthValues?void 0:te.depthStencilTexture),t.setRenderTarget(g))}let ie=A[J];ie===void 0&&(ie=new Os,ie.layers.enable(J),ie.viewport=new sn,A[J]=ie),ie.matrix.fromArray(F.transform.matrix),ie.projectionMatrix.fromArray(F.projectionMatrix),ie.viewport.set(ee.x,ee.y,ee.width,ee.height),J===0&&S.matrix.copy(ie.matrix),K===!0&&S.cameras.push(ie)}}for(let W=0;W<v.length;W++){let K=y[W],J=v[W];K!==null&&J!==void 0&&J.update(K,z,l||s)}if(H&&H(k,z),z.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:z.detectedPlanes});let W=null;for(let K of x)z.detectedPlanes.has(K)||(W===null&&(W=[]),W.push(K));if(W!==null)for(let K of W)x.delete(K),b.delete(K),n.dispatchEvent({type:"planeremoved",data:K});for(let K of z.detectedPlanes)if(!x.has(K))x.add(K),b.set(K,z.lastChangedTime),n.dispatchEvent({type:"planeadded",data:K});else{let J=b.get(K);K.lastChangedTime>J&&(b.set(K,K.lastChangedTime),n.dispatchEvent({type:"planechanged",data:K}))}}f=null}let N=new Rce;N.setAnimationLoop(U),this.setAnimationLoop=function(k){H=k},this.dispose=function(){}}};function _Xe(t,e){function n(m,g){g.color.getRGB(m.fogColor.value,Dce(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),d(m,g)):g.isMeshPhongMaterial?(r(m,g),c(m,g)):g.isMeshStandardMaterial?(r(m,g),u(m,g),g.isMeshPhysicalMaterial&&h(m,g,x)):g.isMeshMatcapMaterial?(r(m,g),f(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),p(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&o(m,g)):g.isPointsMaterial?a(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Qr&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Qr&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;let b=t.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function a(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function h(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Qr&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function SXe(t,e,n,i){let r={},s={},o=[],a=n.isWebGL2?t.getParameter(35375):0;function l(y,x){let b=x.program;i.uniformBlockBinding(y,b)}function c(y,x){let b=r[y.id];b===void 0&&(p(y),b=d(y),r[y.id]=b,y.addEventListener("dispose",g));let w=x.program;i.updateUBOMapping(y,w);let E=e.render.frame;s[y.id]!==E&&(h(y),s[y.id]=E)}function d(y){let x=u();y.__bindingPointIndex=x;let b=t.createBuffer(),w=y.__size,E=y.usage;return t.bindBuffer(35345,b),t.bufferData(35345,w,E),t.bindBuffer(35345,null),t.bindBufferBase(35345,x,b),b}function u(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(y){let x=r[y.id],b=y.uniforms,w=y.__cache;t.bindBuffer(35345,x);for(let E=0,A=b.length;E<A;E++){let S=b[E];if(f(S,E,w)===!0){let C=S.__offset,T=Array.isArray(S.value)?S.value:[S.value],P=0;for(let R=0;R<T.length;R++){let L=T[R],O=m(L);typeof L=="number"?(S.__data[0]=L,t.bufferSubData(35345,C+P,S.__data)):L.isMatrix3?(S.__data[0]=L.elements[0],S.__data[1]=L.elements[1],S.__data[2]=L.elements[2],S.__data[3]=L.elements[0],S.__data[4]=L.elements[3],S.__data[5]=L.elements[4],S.__data[6]=L.elements[5],S.__data[7]=L.elements[0],S.__data[8]=L.elements[6],S.__data[9]=L.elements[7],S.__data[10]=L.elements[8],S.__data[11]=L.elements[0]):(L.toArray(S.__data,P),P+=O.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,C,S.__data)}}t.bindBuffer(35345,null)}function f(y,x,b){let w=y.value;if(b[x]===void 0){if(typeof w=="number")b[x]=w;else{let E=Array.isArray(w)?w:[w],A=[];for(let S=0;S<E.length;S++)A.push(E[S].clone());b[x]=A}return!0}else if(typeof w=="number"){if(b[x]!==w)return b[x]=w,!0}else{let E=Array.isArray(b[x])?b[x]:[b[x]],A=Array.isArray(w)?w:[w];for(let S=0;S<E.length;S++){let C=E[S];if(C.equals(A[S])===!1)return C.copy(A[S]),!0}}return!1}function p(y){let x=y.uniforms,b=0,w=16,E=0;for(let A=0,S=x.length;A<S;A++){let C=x[A],T={boundary:0,storage:0},P=Array.isArray(C.value)?C.value:[C.value];for(let R=0,L=P.length;R<L;R++){let O=P[R],B=m(O);T.boundary+=B.boundary,T.storage+=B.storage}if(C.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=b,A>0){E=b%w;let R=w-E;E!==0&&R-T.boundary<0&&(b+=w-E,C.__offset=b)}b+=T.storage}return E=b%w,E>0&&(b+=w-E),y.__size=b,y.__cache={},this}function m(y){let x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){let x=y.target;x.removeEventListener("dispose",g);let b=o.indexOf(x.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function v(){for(let y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}function EXe(){let t=l2("canvas");return t.style.display="block",t}function Bce(t={}){this.isWebGLRenderer=!0;let e=t.canvas!==void 0?t.canvas:EXe(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1,d;n!==null?d=n.getContextAttributes().alpha:d=t.alpha!==void 0?t.alpha:!1;let u=null,h=null,f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=pu,this.physicallyCorrectLights=!1,this.toneMapping=Sd,this.toneMappingExposure=1;let m=this,g=!1,v=0,y=0,x=null,b=-1,w=null,E=new sn,A=new sn,S=null,C=e.width,T=e.height,P=1,R=null,L=null,O=new sn(0,0,C,T),B=new sn(0,0,C,T),$=!1,X=new QV,H=!1,U=!1,N=null,k=new tt,z=new Se,W=new q,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return x===null?P:1}let F=n;function ee(Y,ue){for(let ye=0;ye<Y.length;ye++){let ce=Y[ye],we=e.getContext(ce,ue);if(we!==null)return we}return null}try{let Y={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ax}`),e.addEventListener("webglcontextlost",Ue,!1),e.addEventListener("webglcontextrestored",We,!1),e.addEventListener("webglcontextcreationerror",rt,!1),F===null){let ue=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&ue.shift(),F=ee(ue,Y),F===null)throw ee(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}F.getShaderPrecisionFormat===void 0&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let ie,te,re,me,se,oe,be,Ae,Ie,Le,fe,ve,ke,ze,j,V,le,xe,De,Ne,He,Pe,ae,Fe;function he(){ie=new Bqe(F),te=new Rqe(F,ie,t),ie.init(te),Pe=new yXe(F,ie,te),re=new gXe(F,ie,te),me=new Uqe,se=new iXe,oe=new vXe(F,ie,re,se,te,Pe,me),be=new Lqe(m),Ae=new Nqe(m),Ie=new Y8e(F,te),ae=new Pqe(F,ie,Ie,te),Le=new zqe(F,Ie,me,ae),fe=new Gqe(F,Le,Ie,me),De=new jqe(F,te,oe),V=new Oqe(se),ve=new nXe(m,be,Ae,ie,te,ae,V),ke=new _Xe(m,se),ze=new sXe,j=new dXe(ie,te),xe=new Cqe(m,be,Ae,re,fe,d,o),le=new mXe(m,fe,te),Fe=new SXe(F,me,te,re),Ne=new Dqe(F,ie,me,te),He=new Fqe(F,ie,me,te),me.programs=ve.programs,m.capabilities=te,m.extensions=ie,m.properties=se,m.renderLists=ze,m.shadowMap=le,m.state=re,m.info=me}he();let Ce=new wXe(m,F);this.xr=Ce,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){let Y=ie.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){let Y=ie.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(Y){Y!==void 0&&(P=Y,this.setSize(C,T,!1))},this.getSize=function(Y){return Y.set(C,T)},this.setSize=function(Y,ue,ye){if(Ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=Y,T=ue,e.width=Math.floor(Y*P),e.height=Math.floor(ue*P),ye!==!1&&(e.style.width=Y+"px",e.style.height=ue+"px"),this.setViewport(0,0,Y,ue)},this.getDrawingBufferSize=function(Y){return Y.set(C*P,T*P).floor()},this.setDrawingBufferSize=function(Y,ue,ye){C=Y,T=ue,P=ye,e.width=Math.floor(Y*ye),e.height=Math.floor(ue*ye),this.setViewport(0,0,Y,ue)},this.getCurrentViewport=function(Y){return Y.copy(E)},this.getViewport=function(Y){return Y.copy(O)},this.setViewport=function(Y,ue,ye,ce){Y.isVector4?O.set(Y.x,Y.y,Y.z,Y.w):O.set(Y,ue,ye,ce),re.viewport(E.copy(O).multiplyScalar(P).floor())},this.getScissor=function(Y){return Y.copy(B)},this.setScissor=function(Y,ue,ye,ce){Y.isVector4?B.set(Y.x,Y.y,Y.z,Y.w):B.set(Y,ue,ye,ce),re.scissor(A.copy(B).multiplyScalar(P).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(Y){re.setScissorTest($=Y)},this.setOpaqueSort=function(Y){R=Y},this.setTransparentSort=function(Y){L=Y},this.getClearColor=function(Y){return Y.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(Y=!0,ue=!0,ye=!0){let ce=0;Y&&(ce|=16384),ue&&(ce|=256),ye&&(ce|=1024),F.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ue,!1),e.removeEventListener("webglcontextrestored",We,!1),e.removeEventListener("webglcontextcreationerror",rt,!1),ze.dispose(),j.dispose(),se.dispose(),be.dispose(),Ae.dispose(),fe.dispose(),ae.dispose(),Fe.dispose(),ve.dispose(),Ce.dispose(),Ce.removeEventListener("sessionstart",qe),Ce.removeEventListener("sessionend",Qe),N&&(N.dispose(),N=null),yt.stop()};function Ue(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function We(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let Y=me.autoReset,ue=le.enabled,ye=le.autoUpdate,ce=le.needsUpdate,we=le.type;he(),me.autoReset=Y,le.enabled=ue,le.autoUpdate=ye,le.needsUpdate=ce,le.type=we}function rt(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function wt(Y){let ue=Y.target;ue.removeEventListener("dispose",wt),$t(ue)}function $t(Y){ne(Y),se.remove(Y)}function ne(Y){let ue=se.get(Y).programs;ue!==void 0&&(ue.forEach(function(ye){ve.releaseProgram(ye)}),Y.isShaderMaterial&&ve.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,ue,ye,ce,we,Ze){ue===null&&(ue=K);let nt=we.isMesh&&we.matrixWorld.determinant()<0,lt=Vx(Y,ue,ye,ce,we);re.setMaterial(ce,nt);let ct=ye.index,St=1;ce.wireframe===!0&&(ct=Le.getWireframeAttribute(ye),St=2);let ft=ye.drawRange,gt=ye.attributes.position,on=ft.start*St,Ti=(ft.start+ft.count)*St;Ze!==null&&(on=Math.max(on,Ze.start*St),Ti=Math.min(Ti,(Ze.start+Ze.count)*St)),ct!==null?(on=Math.max(on,0),Ti=Math.min(Ti,ct.count)):gt!=null&&(on=Math.max(on,0),Ti=Math.min(Ti,gt.count));let Hr=Ti-on;if(Hr<0||Hr===1/0)return;ae.setup(we,ce,lt,ye,ct);let ms,wn=Ne;if(ct!==null&&(ms=Ie.get(ct),wn=He,wn.setIndex(ms)),we.isMesh)ce.wireframe===!0?(re.setLineWidth(ce.wireframeLinewidth*J()),wn.setMode(1)):wn.setMode(4);else if(we.isLine){let pt=ce.linewidth;pt===void 0&&(pt=1),re.setLineWidth(pt*J()),we.isLineSegments?wn.setMode(1):we.isLineLoop?wn.setMode(2):wn.setMode(3)}else we.isPoints?wn.setMode(0):we.isSprite&&wn.setMode(4);if(we.isInstancedMesh)wn.renderInstances(on,Hr,we.count);else if(ye.isInstancedBufferGeometry){let pt=ye._maxInstanceCount!==void 0?ye._maxInstanceCount:1/0,fo=Math.min(ye.instanceCount,pt);wn.renderInstances(on,Hr,fo)}else wn.render(on,Hr)},this.compile=function(Y,ue){function ye(ce,we,Ze){ce.transparent===!0&&ce.side===ca&&ce.forceSinglePass===!1?(ce.side=Qr,ce.needsUpdate=!0,ii(ce,we,Ze),ce.side=oc,ce.needsUpdate=!0,ii(ce,we,Ze),ce.side=ca):ii(ce,we,Ze)}h=j.get(Y),h.init(),p.push(h),Y.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ue.layers)&&(h.pushLight(ce),ce.castShadow&&h.pushShadow(ce))}),h.setupLights(m.physicallyCorrectLights),Y.traverse(function(ce){let we=ce.material;if(we)if(Array.isArray(we))for(let Ze=0;Ze<we.length;Ze++){let nt=we[Ze];ye(nt,Y,ce)}else ye(we,Y,ce)}),p.pop(),h=null};let ge=null;function Me(Y){ge&&ge(Y)}function qe(){yt.stop()}function Qe(){yt.start()}let yt=new Rce;yt.setAnimationLoop(Me),typeof self<"u"&&yt.setContext(self),this.setAnimationLoop=function(Y){ge=Y,Ce.setAnimationLoop(Y),Y===null?yt.stop():yt.start()},Ce.addEventListener("sessionstart",qe),Ce.addEventListener("sessionend",Qe),this.render=function(Y,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Ce.enabled===!0&&Ce.isPresenting===!0&&(Ce.cameraAutoUpdate===!0&&Ce.updateCamera(ue),ue=Ce.getCamera()),Y.isScene===!0&&Y.onBeforeRender(m,Y,ue,x),h=j.get(Y,p.length),h.init(),p.push(h),k.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),X.setFromProjectionMatrix(k),U=this.localClippingEnabled,H=V.init(this.clippingPlanes,U),u=ze.get(Y,f.length),u.init(),f.push(u),un(Y,ue,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(R,L),H===!0&&V.beginShadows();let ye=h.state.shadowsArray;if(le.render(ye,Y,ue),H===!0&&V.endShadows(),this.info.autoReset===!0&&this.info.reset(),xe.render(u,Y),h.setupLights(m.physicallyCorrectLights),ue.isArrayCamera){let ce=ue.cameras;for(let we=0,Ze=ce.length;we<Ze;we++){let nt=ce[we];bn(u,Y,nt,nt.viewport)}}else bn(u,Y,ue);x!==null&&(oe.updateMultisampleRenderTarget(x),oe.updateRenderTargetMipmap(x)),Y.isScene===!0&&Y.onAfterRender(m,Y,ue),ae.resetDefaultState(),b=-1,w=null,p.pop(),p.length>0?h=p[p.length-1]:h=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function un(Y,ue,ye,ce){if(Y.visible===!1)return;if(Y.layers.test(ue.layers)){if(Y.isGroup)ye=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(ue);else if(Y.isLight)h.pushLight(Y),Y.castShadow&&h.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||X.intersectsSprite(Y)){ce&&W.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(k);let Ze=fe.update(Y),nt=Y.material;nt.visible&&u.push(Y,Ze,nt,ye,W.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(Y.isSkinnedMesh&&Y.skeleton.frame!==me.render.frame&&(Y.skeleton.update(),Y.skeleton.frame=me.render.frame),!Y.frustumCulled||X.intersectsObject(Y))){ce&&W.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(k);let Ze=fe.update(Y),nt=Y.material;if(Array.isArray(nt)){let lt=Ze.groups;for(let ct=0,St=lt.length;ct<St;ct++){let ft=lt[ct],gt=nt[ft.materialIndex];gt&&gt.visible&&u.push(Y,Ze,gt,ye,W.z,ft)}}else nt.visible&&u.push(Y,Ze,nt,ye,W.z,null)}}let we=Y.children;for(let Ze=0,nt=we.length;Ze<nt;Ze++)un(we[Ze],ue,ye,ce)}function bn(Y,ue,ye,ce){let we=Y.opaque,Ze=Y.transmissive,nt=Y.transparent;h.setupLightsView(ye),H===!0&&V.setGlobalState(m.clippingPlanes,ye),Ze.length>0&&Vr(we,ue,ye),ce&&re.viewport(E.copy(ce)),we.length>0&&It(we,ue,ye),Ze.length>0&&It(Ze,ue,ye),nt.length>0&&It(nt,ue,ye),re.buffers.depth.setTest(!0),re.buffers.depth.setMask(!0),re.buffers.color.setMask(!0),re.setPolygonOffset(!1)}function Vr(Y,ue,ye){let ce=te.isWebGL2;N===null&&(N=new jn(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?Fy:Vs,minFilter:zy,samples:ce&&s===!0?4:0})),m.getDrawingBufferSize(z),ce?N.setSize(z.x,z.y):N.setSize(a2(z.x),a2(z.y));let we=m.getRenderTarget();m.setRenderTarget(N),m.clear();let Ze=m.toneMapping;m.toneMapping=Sd,It(Y,ue,ye),m.toneMapping=Ze,oe.updateMultisampleRenderTarget(N),oe.updateRenderTargetMipmap(N),m.setRenderTarget(we)}function It(Y,ue,ye){let ce=ue.isScene===!0?ue.overrideMaterial:null;for(let we=0,Ze=Y.length;we<Ze;we++){let nt=Y[we],lt=nt.object,ct=nt.geometry,St=ce===null?nt.material:ce,ft=nt.group;lt.layers.test(ye.layers)&&Bi(lt,ue,ye,ct,St,ft)}}function Bi(Y,ue,ye,ce,we,Ze){Y.onBeforeRender(m,ue,ye,ce,we,Ze),Y.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),we.onBeforeRender(m,ue,ye,ce,Y,Ze),we.transparent===!0&&we.side===ca&&we.forceSinglePass===!1?(we.side=Qr,we.needsUpdate=!0,m.renderBufferDirect(ye,ue,ce,we,Y,Ze),we.side=oc,we.needsUpdate=!0,m.renderBufferDirect(ye,ue,ce,we,Y,Ze),we.side=ca):m.renderBufferDirect(ye,ue,ce,we,Y,Ze),Y.onAfterRender(m,ue,ye,ce,we,Ze)}function ii(Y,ue,ye){ue.isScene!==!0&&(ue=K);let ce=se.get(Y),we=h.state.lights,Ze=h.state.shadowsArray,nt=we.state.version,lt=ve.getParameters(Y,we.state,Ze,ue,ye),ct=ve.getProgramCacheKey(lt),St=ce.programs;ce.environment=Y.isMeshStandardMaterial?ue.environment:null,ce.fog=ue.fog,ce.envMap=(Y.isMeshStandardMaterial?Ae:be).get(Y.envMap||ce.environment),St===void 0&&(Y.addEventListener("dispose",wt),St=new Map,ce.programs=St);let ft=St.get(ct);if(ft!==void 0){if(ce.currentProgram===ft&&ce.lightsStateVersion===nt)return ap(Y,lt),ft}else lt.uniforms=ve.getUniforms(Y),Y.onBuild(ye,lt,m),Y.onBeforeCompile(lt,m),ft=ve.acquireProgram(lt,ct),St.set(ct,ft),ce.uniforms=lt.uniforms;let gt=ce.uniforms;(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(gt.clippingPlanes=V.uniform),ap(Y,lt),ce.needsLights=lp(Y),ce.lightsStateVersion=nt,ce.needsLights&&(gt.ambientLightColor.value=we.state.ambient,gt.lightProbe.value=we.state.probe,gt.directionalLights.value=we.state.directional,gt.directionalLightShadows.value=we.state.directionalShadow,gt.spotLights.value=we.state.spot,gt.spotLightShadows.value=we.state.spotShadow,gt.rectAreaLights.value=we.state.rectArea,gt.ltc_1.value=we.state.rectAreaLTC1,gt.ltc_2.value=we.state.rectAreaLTC2,gt.pointLights.value=we.state.point,gt.pointLightShadows.value=we.state.pointShadow,gt.hemisphereLights.value=we.state.hemi,gt.directionalShadowMap.value=we.state.directionalShadowMap,gt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,gt.spotShadowMap.value=we.state.spotShadowMap,gt.spotLightMatrix.value=we.state.spotLightMatrix,gt.spotLightMap.value=we.state.spotLightMap,gt.pointShadowMap.value=we.state.pointShadowMap,gt.pointShadowMatrix.value=we.state.pointShadowMatrix);let on=ft.getUniforms(),Ti=GT.seqWithValue(on.seq,gt);return ce.currentProgram=ft,ce.uniformsList=Ti,ft}function ap(Y,ue){let ye=se.get(Y);ye.outputEncoding=ue.outputEncoding,ye.instancing=ue.instancing,ye.skinning=ue.skinning,ye.morphTargets=ue.morphTargets,ye.morphNormals=ue.morphNormals,ye.morphColors=ue.morphColors,ye.morphTargetsCount=ue.morphTargetsCount,ye.numClippingPlanes=ue.numClippingPlanes,ye.numIntersection=ue.numClipIntersection,ye.vertexAlphas=ue.vertexAlphas,ye.vertexTangents=ue.vertexTangents,ye.toneMapping=ue.toneMapping}function Vx(Y,ue,ye,ce,we){ue.isScene!==!0&&(ue=K),oe.resetTextureUnits();let Ze=ue.fog,nt=ce.isMeshStandardMaterial?ue.environment:null,lt=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:pu,ct=(ce.isMeshStandardMaterial?Ae:be).get(ce.envMap||nt),St=ce.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,ft=!!ce.normalMap&&!!ye.attributes.tangent,gt=!!ye.morphAttributes.position,on=!!ye.morphAttributes.normal,Ti=!!ye.morphAttributes.color,Hr=ce.toneMapped?m.toneMapping:Sd,ms=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,wn=ms!==void 0?ms.length:0,pt=se.get(ce),fo=h.state.lights;if(H===!0&&(U===!0||Y!==w)){let Qt=Y===w&&ce.id===b;V.setState(ce,Y,Qt)}let Zn=!1;ce.version===pt.__version?(pt.needsLights&&pt.lightsStateVersion!==fo.state.version||pt.outputEncoding!==lt||we.isInstancedMesh&&pt.instancing===!1||!we.isInstancedMesh&&pt.instancing===!0||we.isSkinnedMesh&&pt.skinning===!1||!we.isSkinnedMesh&&pt.skinning===!0||pt.envMap!==ct||ce.fog===!0&&pt.fog!==Ze||pt.numClippingPlanes!==void 0&&(pt.numClippingPlanes!==V.numPlanes||pt.numIntersection!==V.numIntersection)||pt.vertexAlphas!==St||pt.vertexTangents!==ft||pt.morphTargets!==gt||pt.morphNormals!==on||pt.morphColors!==Ti||pt.toneMapping!==Hr||te.isWebGL2===!0&&pt.morphTargetsCount!==wn)&&(Zn=!0):(Zn=!0,pt.__version=ce.version);let zi=pt.currentProgram;Zn===!0&&(zi=ii(ce,ue,we));let js=!1,jr=!1,gs=!1,Mt=zi.getUniforms(),rn=pt.uniforms;if(re.useProgram(zi.program)&&(js=!0,jr=!0,gs=!0),ce.id!==b&&(b=ce.id,jr=!0),js||w!==Y){if(Mt.setValue(F,"projectionMatrix",Y.projectionMatrix),te.logarithmicDepthBuffer&&Mt.setValue(F,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),w!==Y&&(w=Y,jr=!0,gs=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){let Qt=Mt.map.cameraPosition;Qt!==void 0&&Qt.setValue(F,W.setFromMatrixPosition(Y.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&Mt.setValue(F,"isOrthographic",Y.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||we.isSkinnedMesh)&&Mt.setValue(F,"viewMatrix",Y.matrixWorldInverse)}if(we.isSkinnedMesh){Mt.setOptional(F,we,"bindMatrix"),Mt.setOptional(F,we,"bindMatrixInverse");let Qt=we.skeleton;Qt&&(te.floatVertexTextures?(Qt.boneTexture===null&&Qt.computeBoneTexture(),Mt.setValue(F,"boneTexture",Qt.boneTexture,oe),Mt.setValue(F,"boneTextureSize",Qt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let vs=ye.morphAttributes;if((vs.position!==void 0||vs.normal!==void 0||vs.color!==void 0&&te.isWebGL2===!0)&&De.update(we,ye,ce,zi),(jr||pt.receiveShadow!==we.receiveShadow)&&(pt.receiveShadow=we.receiveShadow,Mt.setValue(F,"receiveShadow",we.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(rn.envMap.value=ct,rn.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),jr&&(Mt.setValue(F,"toneMappingExposure",m.toneMappingExposure),pt.needsLights&&Og(rn,gs),Ze&&ce.fog===!0&&ke.refreshFogUniforms(rn,Ze),ke.refreshMaterialUniforms(rn,ce,P,T,N),GT.upload(F,pt.uniformsList,rn,oe)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(GT.upload(F,pt.uniformsList,rn,oe),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&Mt.setValue(F,"center",we.center),Mt.setValue(F,"modelViewMatrix",we.modelViewMatrix),Mt.setValue(F,"normalMatrix",we.normalMatrix),Mt.setValue(F,"modelMatrix",we.matrixWorld),we.previousModelViewMatrix&&Mt.setValue(F,"previousModelViewMatrix",we.previousModelViewMatrix),Y.previousProjectionMatrix&&Mt.setValue(F,"previousProjectionMatrix",Y.previousProjectionMatrix),ce.isShaderMaterial||ce.isRawShaderMaterial){let Qt=ce.uniformsGroups;for(let Fi=0,wl=Qt.length;Fi<wl;Fi++)if(te.isWebGL2){let Ta=Qt[Fi];Fe.update(Ta,zi),Fe.bind(Ta,zi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return zi}function Og(Y,ue){Y.ambientLightColor.needsUpdate=ue,Y.lightProbe.needsUpdate=ue,Y.directionalLights.needsUpdate=ue,Y.directionalLightShadows.needsUpdate=ue,Y.pointLights.needsUpdate=ue,Y.pointLightShadows.needsUpdate=ue,Y.spotLights.needsUpdate=ue,Y.spotLightShadows.needsUpdate=ue,Y.rectAreaLights.needsUpdate=ue,Y.hemisphereLights.needsUpdate=ue}function lp(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(Y,ue,ye){se.get(Y.texture).__webglTexture=ue,se.get(Y.depthTexture).__webglTexture=ye;let ce=se.get(Y);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=ye===void 0,ce.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Y,ue){let ye=se.get(Y);ye.__webglFramebuffer=ue,ye.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(Y,ue=0,ye=0){x=Y,v=ue,y=ye;let ce=!0,we=null,Ze=!1,nt=!1;if(Y){let lt=se.get(Y);lt.__useDefaultFramebuffer!==void 0?(re.bindFramebuffer(36160,null),ce=!1):lt.__webglFramebuffer===void 0?oe.setupRenderTarget(Y):lt.__hasExternalTextures&&oe.rebindTextures(Y,se.get(Y.texture).__webglTexture,se.get(Y.depthTexture).__webglTexture);let ct=Y.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(nt=!0);let St=se.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(we=St[ue],Ze=!0):te.isWebGL2&&Y.samples>0&&oe.useMultisampledRTT(Y)===!1?we=se.get(Y).__webglMultisampledFramebuffer:we=St,E.copy(Y.viewport),A.copy(Y.scissor),S=Y.scissorTest}else E.copy(O).multiplyScalar(P).floor(),A.copy(B).multiplyScalar(P).floor(),S=$;if(re.bindFramebuffer(36160,we)&&te.drawBuffers&&ce&&re.drawBuffers(Y,we),re.viewport(E),re.scissor(A),re.setScissorTest(S),Ze){let lt=se.get(Y.texture);F.framebufferTexture2D(36160,36064,34069+ue,lt.__webglTexture,ye)}else if(nt){let lt=se.get(Y.texture),ct=ue||0;F.framebufferTextureLayer(36160,36064,lt.__webglTexture,ye||0,ct)}b=-1},this.readRenderTargetPixels=function(Y,ue,ye,ce,we,Ze,nt){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=se.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&nt!==void 0&&(lt=lt[nt]),lt){re.bindFramebuffer(36160,lt);try{let ct=Y.texture,St=ct.format,ft=ct.type;if(St!==Wl&&Pe.convert(St)!==F.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let gt=ft===Fy&&(ie.has("EXT_color_buffer_half_float")||te.isWebGL2&&ie.has("EXT_color_buffer_float"));if(ft!==Vs&&Pe.convert(ft)!==F.getParameter(35738)&&!(ft===sl&&(te.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=Y.width-ce&&ye>=0&&ye<=Y.height-we&&F.readPixels(ue,ye,ce,we,Pe.convert(St),Pe.convert(ft),Ze)}finally{let ct=x!==null?se.get(x).__webglFramebuffer:null;re.bindFramebuffer(36160,ct)}}},this.copyFramebufferToTexture=function(Y,ue,ye=0){let ce=Math.pow(2,-ye),we=Math.floor(ue.image.width*ce),Ze=Math.floor(ue.image.height*ce);oe.setTexture2D(ue,0),F.copyTexSubImage2D(3553,ye,0,0,Y.x,Y.y,we,Ze),re.unbindTexture()},this.copyTextureToTexture=function(Y,ue,ye,ce=0){let we=ue.image.width,Ze=ue.image.height,nt=Pe.convert(ye.format),lt=Pe.convert(ye.type);oe.setTexture2D(ye,0),F.pixelStorei(37440,ye.flipY),F.pixelStorei(37441,ye.premultiplyAlpha),F.pixelStorei(3317,ye.unpackAlignment),ue.isDataTexture?F.texSubImage2D(3553,ce,Y.x,Y.y,we,Ze,nt,lt,ue.image.data):ue.isCompressedTexture?F.compressedTexSubImage2D(3553,ce,Y.x,Y.y,ue.mipmaps[0].width,ue.mipmaps[0].height,nt,ue.mipmaps[0].data):F.texSubImage2D(3553,ce,Y.x,Y.y,nt,lt,ue.image),ce===0&&ye.generateMipmaps&&F.generateMipmap(3553),re.unbindTexture()},this.copyTextureToTexture3D=function(Y,ue,ye,ce,we=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Ze=Y.max.x-Y.min.x+1,nt=Y.max.y-Y.min.y+1,lt=Y.max.z-Y.min.z+1,ct=Pe.convert(ce.format),St=Pe.convert(ce.type),ft;if(ce.isData3DTexture)oe.setTexture3D(ce,0),ft=32879;else if(ce.isDataArrayTexture)oe.setTexture2DArray(ce,0),ft=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}F.pixelStorei(37440,ce.flipY),F.pixelStorei(37441,ce.premultiplyAlpha),F.pixelStorei(3317,ce.unpackAlignment);let gt=F.getParameter(3314),on=F.getParameter(32878),Ti=F.getParameter(3316),Hr=F.getParameter(3315),ms=F.getParameter(32877),wn=ye.isCompressedTexture?ye.mipmaps[0]:ye.image;F.pixelStorei(3314,wn.width),F.pixelStorei(32878,wn.height),F.pixelStorei(3316,Y.min.x),F.pixelStorei(3315,Y.min.y),F.pixelStorei(32877,Y.min.z),ye.isDataTexture||ye.isData3DTexture?F.texSubImage3D(ft,we,ue.x,ue.y,ue.z,Ze,nt,lt,ct,St,wn.data):ye.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),F.compressedTexSubImage3D(ft,we,ue.x,ue.y,ue.z,Ze,nt,lt,ct,wn.data)):F.texSubImage3D(ft,we,ue.x,ue.y,ue.z,Ze,nt,lt,ct,St,wn),F.pixelStorei(3314,gt),F.pixelStorei(32878,on),F.pixelStorei(3316,Ti),F.pixelStorei(3315,Hr),F.pixelStorei(32877,ms),we===0&&ce.generateMipmaps&&F.generateMipmap(ft),re.unbindTexture()},this.initTexture=function(Y){Y.isCubeTexture?oe.setTextureCube(Y,0):Y.isData3DTexture?oe.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?oe.setTexture2DArray(Y,0):oe.setTexture2D(Y,0),re.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,re.reset(),ae.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var MXe=class extends Bce{};MXe.prototype.isWebGL1Renderer=!0;var zce=class{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Lt(t),this.near=e,this.far=n}clone(){return new zce(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},zm=class extends ei{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},AXe=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Xz,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=lu()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lu()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lu()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Xs=new q,Qz=class{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Xs.fromBufferAttribute(this,e),Xs.applyMatrix4(t),this.setXYZ(e,Xs.x,Xs.y,Xs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Xs.fromBufferAttribute(this,e),Xs.applyNormalMatrix(t),this.setXYZ(e,Xs.x,Xs.y,Xs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Xs.fromBufferAttribute(this,e),Xs.transformDirection(t),this.setXYZ(e,Xs.x,Xs.y,Xs.z);return this}setX(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=pd(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=pd(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=pd(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=pd(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=oi(e,this.array),n=oi(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=oi(e,this.array),n=oi(n,this.array),i=oi(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=oi(e,this.array),n=oi(n,this.array),i=oi(i,this.array),r=oi(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new Wt(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Qz(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Jz=class extends kr{constructor(t=null,e=1,n=1,i,r,s,o,a,l=Jn,c=Jn,d,u){super(null,s,o,a,l,c,i,r,d,u),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},TXe=class extends Wt{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},ip=class extends DS{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Lt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},XY=new q,YY=new q,KY=new tt,kI=new Tx,xA=new gl,u2=class extends ei{constructor(t=new Ut,e=new ip){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[0];for(let i=1,r=e.count;i<r;i++)XY.fromBufferAttribute(e,i-1),YY.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=XY.distanceTo(YY);t.setAttribute("lineDistance",new xt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),xA.copy(n.boundingSphere),xA.applyMatrix4(i),xA.radius+=r,t.ray.intersectsSphere(xA)===!1)return;KY.copy(i).invert(),kI.copy(t.ray).applyMatrix4(KY);let o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new q,c=new q,d=new q,u=new q,h=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(f!==null){let m=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=h){let x=f.getX(v),b=f.getX(v+1);if(l.fromBufferAttribute(p,x),c.fromBufferAttribute(p,b),kI.distanceSqToSegment(l,c,u,d)>a)continue;u.applyMatrix4(this.matrixWorld);let w=t.ray.origin.distanceTo(u);w<t.near||w>t.far||e.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let m=Math.max(0,s.start),g=Math.min(p.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=h){if(l.fromBufferAttribute(p,v),c.fromBufferAttribute(p,v+1),kI.distanceSqToSegment(l,c,u,d)>a)continue;u.applyMatrix4(this.matrixWorld);let x=t.ray.origin.distanceTo(u);x<t.near||x>t.far||e.push({distance:x,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let n=t[e[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}},ZY=new q,QY=new q,RS=class extends u2{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[];for(let i=0,r=e.count;i<r;i+=2)ZY.fromBufferAttribute(e,i),QY.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+ZY.distanceTo(QY);t.setAttribute("lineDistance",new xt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},CXe=class extends kr{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:an,this.magFilter=r!==void 0?r:an,this.generateMipmaps=!1;let c=this;function d(){c.needsUpdate=!0,t.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){let t=this.image;!("requestVideoFrameCallback"in t)&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},_u=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){let n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){let e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){let e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e=[],n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){let n=this.getLengths(),i=0,r=n.length,s;e?s=e:s=t*n[r-1];let o=0,a=r-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-s,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===s)return i/(r-1);let c=n[i],d=n[i+1]-c,u=(s-c)/d;return(i+u)/(r-1)}getTangent(t,e){let n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);let r=this.getPoint(n),s=this.getPoint(i),o=e||(r.isVector2?new Se:new q);return o.copy(s).sub(r).normalize(),o}getTangentAt(t,e){let n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){let n=new q,i=[],r=[],s=[],o=new q,a=new tt;for(let h=0;h<=t;h++){let f=h/t;i[h]=this.getTangentAt(f,new q)}r[0]=new q,s[0]=new q;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),d=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let h=1;h<=t;h++){if(r[h]=r[h-1].clone(),s[h]=s[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(Dr(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(a.makeRotationAxis(o,f))}s[h].crossVectors(i[h],r[h])}if(e===!0){let h=Math.acos(Dr(r[0].dot(r[t]),-1,1));h/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(h=-h);for(let f=1;f<=t;f++)r[f].applyMatrix4(a.makeRotationAxis(i[f],h*f)),s[f].crossVectors(i[f],r[f])}return{tangents:i,normals:r,binormals:s}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},uR=class extends _u{constructor(t=0,e=0,n=1,i=1,r=0,s=Math.PI*2,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){let n=e||new Se,i=Math.PI*2,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);let o=this.aStartAngle+t*r,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),u=a-this.aX,h=l-this.aY;a=u*c-h*d+this.aX,l=u*d+h*c+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},PXe=class extends uR{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}};function eH(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,f=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,f*=d,r(o,a,h,f)},calc:function(s){let o=s*s,a=o*s;return t+e*s+n*o+i*a}}}var bA=new q,NI=new eH,BI=new eH,zI=new eH,DXe=class extends _u{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new q){let n=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*t,o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:a===0&&o===r-1&&(o=r-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%r]:(bA.subVectors(i[0],i[1]).add(i[0]),l=bA);let d=i[o%r],u=i[(o+1)%r];if(this.closed||o+2<r?c=i[(o+2)%r]:(bA.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=bA),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(d),h),p=Math.pow(d.distanceToSquared(u),h),m=Math.pow(u.distanceToSquared(c),h);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),NI.initNonuniformCatmullRom(l.x,d.x,u.x,c.x,f,p,m),BI.initNonuniformCatmullRom(l.y,d.y,u.y,c.y,f,p,m),zI.initNonuniformCatmullRom(l.z,d.z,u.z,c.z,f,p,m)}else this.curveType==="catmullrom"&&(NI.initCatmullRom(l.x,d.x,u.x,c.x,this.tension),BI.initCatmullRom(l.y,d.y,u.y,c.y,this.tension),zI.initCatmullRom(l.z,d.z,u.z,c.z,this.tension));return n.set(NI.calc(a),BI.calc(a),zI.calc(a)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(new q().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};function JY(t,e,n,i,r){let s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function RXe(t,e){let n=1-t;return n*n*e}function OXe(t,e){return 2*(1-t)*t*e}function LXe(t,e){return t*t*e}function hw(t,e,n,i){return RXe(t,e)+OXe(t,n)+LXe(t,i)}function IXe(t,e){let n=1-t;return n*n*n*e}function kXe(t,e){let n=1-t;return 3*n*n*t*e}function NXe(t,e){return 3*(1-t)*t*t*e}function BXe(t,e){return t*t*t*e}function fw(t,e,n,i,r){return IXe(t,e)+kXe(t,n)+NXe(t,i)+BXe(t,r)}var Xl=class extends _u{constructor(e=new Se,n=new Se,i=new Se,r=new Se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Se){let i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(fw(e,r.x,s.x,o.x,a.x),fw(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},WT=class extends _u{constructor(t=new q,e=new q,n=new q,i=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new q){let n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(fw(t,i.x,r.x,s.x,o.x),fw(t,i.y,r.y,s.y,o.y),fw(t,i.z,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},nc=class extends _u{constructor(e=new Se,n=new Se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Se){let i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){let i=n||new Se;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Fce=class extends _u{constructor(t=new q,e=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new q){let n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},Gf=class extends _u{constructor(t=new Se,e=new Se,n=new Se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Se){let n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(hw(t,i.x,r.x,s.x),hw(t,i.y,r.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},zXe=class extends _u{constructor(t=new q,e=new q,n=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new q){let n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(hw(t,i.x,r.x,s.x),hw(t,i.y,r.y,s.y),hw(t,i.z,r.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},tH=class extends _u{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Se){let n=e,i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,a=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return n.set(JY(o,a.x,l.x,c.x,d.x),JY(o,a.y,l.y,c.y,d.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(new Se().fromArray(i))}return this}},FXe=Object.freeze({__proto__:null,ArcCurve:PXe,CatmullRomCurve3:DXe,CubicBezierCurve:Xl,CubicBezierCurve3:WT,EllipseCurve:uR,LineCurve:nc,LineCurve3:Fce,QuadraticBezierCurve:Gf,QuadraticBezierCurve3:zXe,SplineCurve:tH}),Uce=class extends _u{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new nc(e,t))}getPoint(t,e){let n=t*this.getLength(),i=this.getCurveLengths(),r=0;for(;r<i.length;){if(i[r]>=n){let s=i[r]-n,o=this.curves[r],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l,e)}r++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){let e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){let e=[],n;for(let i=0,r=this.curves;i<r.length;i++){let s=r[i],o=s.isEllipseCurve?t*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let l=0;l<a.length;l++){let c=a[l];n&&n.equals(c)||(e.push(c),n=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){let i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){let i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){let i=t.curves[e];this.curves.push(new FXe[i.type]().fromJSON(i))}return this}},d2=class extends Uce{constructor(t){super(),this.type="Path",this.currentPoint=new Se,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){let n=new nc(this.currentPoint.clone(),new Se(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){let r=new Gf(this.currentPoint.clone(),new Se(t,e),new Se(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){let o=new Xl(this.currentPoint.clone(),new Se(t,e),new Se(n,i),new Se(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){let e=[this.currentPoint.clone()].concat(t),n=new tH(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){let o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,o,a){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,s,o,a),this}absellipse(t,e,n,i,r,s,o,a){let l=new uR(t,e,n,i,r,s,o,a);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}},Vce=class extends Ut{constructor(t=[new Se(0,-.5),new Se(.5,0),new Se(0,.5)],e=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Dr(i,0,Math.PI*2);let r=[],s=[],o=[],a=[],l=[],c=1/e,d=new q,u=new Se,h=new q,f=new q,p=new q,m=0,g=0;for(let v=0;v<=t.length-1;v++)switch(v){case 0:m=t[v+1].x-t[v].x,g=t[v+1].y-t[v].y,h.x=g*1,h.y=-m,h.z=g*0,p.copy(h),h.normalize(),a.push(h.x,h.y,h.z);break;case t.length-1:a.push(p.x,p.y,p.z);break;default:m=t[v+1].x-t[v].x,g=t[v+1].y-t[v].y,h.x=g*1,h.y=-m,h.z=g*0,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),a.push(h.x,h.y,h.z),p.copy(f)}for(let v=0;v<=e;v++){let y=n+v*c*i,x=Math.sin(y),b=Math.cos(y);for(let w=0;w<=t.length-1;w++){d.x=t[w].x*x,d.y=t[w].y,d.z=t[w].x*b,s.push(d.x,d.y,d.z),u.x=v/e,u.y=w/(t.length-1),o.push(u.x,u.y);let E=a[3*w+0]*x,A=a[3*w+1],S=a[3*w+0]*b;l.push(E,A,S)}}for(let v=0;v<e;v++)for(let y=0;y<t.length-1;y++){let x=y+v*t.length,b=x,w=x+t.length,E=x+t.length+1,A=x+1;r.push(b,w,A),r.push(E,A,w)}this.setIndex(r),this.setAttribute("position",new xt(s,3)),this.setAttribute("uv",new xt(o,2)),this.setAttribute("normal",new xt(l,3))}static fromJSON(t){return new Vce(t.points,t.segments,t.phiStart,t.phiLength)}},nH=class extends Ut{constructor(t=1,e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};let l=this;i=Math.floor(i),r=Math.floor(r);let c=[],d=[],u=[],h=[],f=0,p=[],m=n/2,g=0;v(),s===!1&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new xt(d,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(h,2));function v(){let x=new q,b=new q,w=0,E=(e-t)/n;for(let A=0;A<=r;A++){let S=[],C=A/r,T=C*(e-t)+t;for(let P=0;P<=i;P++){let R=P/i,L=R*a+o,O=Math.sin(L),B=Math.cos(L);b.x=T*O,b.y=-C*n+m,b.z=T*B,d.push(b.x,b.y,b.z),x.set(O,E,B).normalize(),u.push(x.x,x.y,x.z),h.push(R,1-C),S.push(f++)}p.push(S)}for(let A=0;A<i;A++)for(let S=0;S<r;S++){let C=p[S][A],T=p[S+1][A],P=p[S+1][A+1],R=p[S][A+1];c.push(C,T,R),c.push(T,P,R),w+=6}l.addGroup(g,w,0),g+=w}function y(x){let b=f,w=new Se,E=new q,A=0,S=x===!0?t:e,C=x===!0?1:-1;for(let P=1;P<=i;P++)d.push(0,m*C,0),u.push(0,C,0),h.push(.5,.5),f++;let T=f;for(let P=0;P<=i;P++){let R=P/i*a+o,L=Math.cos(R),O=Math.sin(R);E.x=S*O,E.y=m*C,E.z=S*L,d.push(E.x,E.y,E.z),u.push(0,C,0),w.x=L*.5+.5,w.y=O*.5*C+.5,h.push(w.x,w.y),f++}for(let P=0;P<i;P++){let R=b+P,L=T+P;x===!0?c.push(L,L+1,R):c.push(L+1,L,R),A+=3}l.addGroup(g,A,x===!0?1:2),g+=A}}static fromJSON(t){return new nH(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},Hce=class extends nH{constructor(t=1,e=1,n=32,i=1,r=!1,s=0,o=Math.PI*2){super(0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new Hce(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},iH=class extends Ut{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};let r=[],s=[];o(i),l(n),c(),this.setAttribute("position",new xt(r,3)),this.setAttribute("normal",new xt(r.slice(),3)),this.setAttribute("uv",new xt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(v){let y=new q,x=new q,b=new q;for(let w=0;w<e.length;w+=3)h(e[w+0],y),h(e[w+1],x),h(e[w+2],b),a(y,x,b,v)}function a(v,y,x,b){let w=b+1,E=[];for(let A=0;A<=w;A++){E[A]=[];let S=v.clone().lerp(x,A/w),C=y.clone().lerp(x,A/w),T=w-A;for(let P=0;P<=T;P++)P===0&&A===w?E[A][P]=S:E[A][P]=S.clone().lerp(C,P/T)}for(let A=0;A<w;A++)for(let S=0;S<2*(w-A)-1;S++){let C=Math.floor(S/2);S%2===0?(u(E[A][C+1]),u(E[A+1][C]),u(E[A][C])):(u(E[A][C+1]),u(E[A+1][C+1]),u(E[A+1][C]))}}function l(v){let y=new q;for(let x=0;x<r.length;x+=3)y.x=r[x+0],y.y=r[x+1],y.z=r[x+2],y.normalize().multiplyScalar(v),r[x+0]=y.x,r[x+1]=y.y,r[x+2]=y.z}function c(){let v=new q;for(let y=0;y<r.length;y+=3){v.x=r[y+0],v.y=r[y+1],v.z=r[y+2];let x=m(v)/2/Math.PI+.5,b=g(v)/Math.PI+.5;s.push(x,1-b)}f(),d()}function d(){for(let v=0;v<s.length;v+=6){let y=s[v+0],x=s[v+2],b=s[v+4],w=Math.max(y,x,b),E=Math.min(y,x,b);w>.9&&E<.1&&(y<.2&&(s[v+0]+=1),x<.2&&(s[v+2]+=1),b<.2&&(s[v+4]+=1))}}function u(v){r.push(v.x,v.y,v.z)}function h(v,y){let x=v*3;y.x=t[x+0],y.y=t[x+1],y.z=t[x+2]}function f(){let v=new q,y=new q,x=new q,b=new q,w=new Se,E=new Se,A=new Se;for(let S=0,C=0;S<r.length;S+=9,C+=6){v.set(r[S+0],r[S+1],r[S+2]),y.set(r[S+3],r[S+4],r[S+5]),x.set(r[S+6],r[S+7],r[S+8]),w.set(s[C+0],s[C+1]),E.set(s[C+2],s[C+3]),A.set(s[C+4],s[C+5]),b.copy(v).add(y).add(x).divideScalar(3);let T=m(b);p(w,C+0,v,T),p(E,C+2,y,T),p(A,C+4,x,T)}}function p(v,y,x,b){b<0&&v.x===1&&(s[y]=v.x-1),x.x===0&&x.z===0&&(s[y]=b/2/Math.PI+.5)}function m(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(t){return new iH(t.vertices,t.indices,t.radius,t.details)}},jce=class extends iH{constructor(t=1,e=0){let n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,s,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new jce(t.radius,t.detail)}},h2=class extends d2{constructor(t){super(t),this.uuid=lu(),this.type="Shape",this.holes=[]}getPointsHoles(t){let e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){let i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){let i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){let i=t.holes[e];this.holes.push(new d2().fromJSON(i))}return this}},UXe={triangulate:function(t,e,n=2){let i=e&&e.length,r=i?e[0]*n:t.length,s=Gce(t,0,r,n,!0),o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,u,h,f;if(i&&(s=WXe(t,e,s,n)),t.length>80*n){a=c=t[0],l=d=t[1];for(let p=n;p<r;p+=n)u=t[p],h=t[p+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=f!==0?32767/f:0}return M_(s,o,n,a,l,f,0),o}};function Gce(t,e,n,i,r){let s,o;if(r===nYe(t,e,n,i)>0)for(s=e;s<n;s+=i)o=eK(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=eK(s,t[s],t[s+1],o);return o&&dR(o,o.next)&&(T_(o),o=o.next),o}function og(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(dR(n,n.next)||Li(n.prev,n,n.next)===0)){if(T_(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function M_(t,e,n,i,r,s,o){if(!t)return;!o&&s&&KXe(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?HXe(t,i,r,s):VXe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),T_(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=jXe(og(t),e,n),M_(t,e,n,i,r,s,2)):o===2&&GXe(t,e,n,i,r,s):M_(og(t),e,n,i,r,s,1);break}}}function VXe(t){let e=t.prev,n=t,i=t.next;if(Li(e,n,i)>=0)return!1;let r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,d=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=i.next;for(;p!==e;){if(p.x>=d&&p.x<=h&&p.y>=u&&p.y<=f&&C0(r,a,s,l,o,c,p.x,p.y)&&Li(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function HXe(t,e,n,i){let r=t.prev,s=t,o=t.next;if(Li(r,s,o)>=0)return!1;let a=r.x,l=s.x,c=o.x,d=r.y,u=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=d<u?d<h?d:h:u<h?u:h,m=a>l?a>c?a:c:l>c?l:c,g=d>u?d>h?d:h:u>h?u:h,v=eF(f,p,e,n,i),y=eF(m,g,e,n,i),x=t.prevZ,b=t.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&C0(a,d,l,u,c,h,x.x,x.y)&&Li(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&C0(a,d,l,u,c,h,b.x,b.y)&&Li(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&C0(a,d,l,u,c,h,x.x,x.y)&&Li(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&C0(a,d,l,u,c,h,b.x,b.y)&&Li(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function jXe(t,e,n){let i=t;do{let r=i.prev,s=i.next.next;!dR(r,s)&&Wce(r,i,i.next,s)&&A_(r,s)&&A_(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),T_(i),T_(i.next),i=t=s),i=i.next}while(i!==t);return og(i)}function GXe(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&JXe(o,a)){let l=qce(o,a);o=og(o,o.next),l=og(l,l.next),M_(o,e,n,i,r,s,0),M_(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function WXe(t,e,n,i){let r=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=Gce(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(QXe(c));for(r.sort(qXe),s=0;s<r.length;s++)n=$Xe(r[s],n);return n}function qXe(t,e){return t.x-e.x}function $Xe(t,e){let n=XXe(t,e);if(!n)return e;let i=qce(n,t);return og(i,i.next),og(n,n.next)}function XXe(t,e){let n=e,i=-1/0,r,s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>i&&(i=h,r=n.x<n.next.x?n:n.next,h===s))return r}n=n.next}while(n!==e);if(!r)return null;let a=r,l=r.x,c=r.y,d=1/0,u;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&C0(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(s-n.x),A_(n,t)&&(u<d||u===d&&(n.x>r.x||n.x===r.x&&YXe(r,n)))&&(r=n,d=u)),n=n.next;while(n!==a);return r}function YXe(t,e){return Li(t.prev,t,e.prev)<0&&Li(e.next,t,t.next)<0}function KXe(t,e,n,i){let r=t;do r.z===0&&(r.z=eF(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,ZXe(r)}function ZXe(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function eF(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function QXe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function C0(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function JXe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!eYe(t,e)&&(A_(t,e)&&A_(e,t)&&tYe(t,e)&&(Li(t.prev,t,e.prev)||Li(t,e.prev,e))||dR(t,e)&&Li(t.prev,t,t.next)>0&&Li(e.prev,e,e.next)>0)}function Li(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function dR(t,e){return t.x===e.x&&t.y===e.y}function Wce(t,e,n,i){let r=_A(Li(t,e,n)),s=_A(Li(t,e,i)),o=_A(Li(n,i,t)),a=_A(Li(n,i,e));return!!(r!==s&&o!==a||r===0&&wA(t,n,e)||s===0&&wA(t,i,e)||o===0&&wA(n,t,i)||a===0&&wA(n,e,i))}function wA(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _A(t){return t>0?1:t<0?-1:0}function eYe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Wce(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function A_(t,e){return Li(t.prev,t,t.next)<0?Li(t,e,t.next)>=0&&Li(t,t.prev,e)>=0:Li(t,e,t.prev)<0||Li(t,t.next,e)<0}function tYe(t,e){let n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function qce(t,e){let n=new tF(t.i,t.x,t.y),i=new tF(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function eK(t,e,n,i){let r=new tF(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function T_(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function tF(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nYe(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}var $ce=class{static area(t){let e=t.length,n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return n*.5}static isClockWise(t){return $ce.area(t)<0}static triangulateShape(t,e){let n=[],i=[],r=[];tK(t),nK(n,t);let s=t.length;e.forEach(tK);for(let a=0;a<e.length;a++)i.push(s),s+=e[a].length,nK(n,e[a]);let o=UXe.triangulate(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function tK(t){let e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function nK(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var Xce=class extends iH{constructor(t=1,e=0){let n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Xce(t.radius,t.detail)}},rH=class extends Ut{constructor(t=1,e=32,n=16,i=0,r=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));let a=Math.min(s+o,Math.PI),l=0,c=[],d=new q,u=new q,h=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){let v=[],y=g/n,x=0;g==0&&s==0?x=.5/e:g==n&&a==Math.PI&&(x=-.5/e);for(let b=0;b<=e;b++){let w=b/e;d.x=-t*Math.cos(i+w*r)*Math.sin(s+y*o),d.y=t*Math.cos(s+y*o),d.z=t*Math.sin(i+w*r)*Math.sin(s+y*o),f.push(d.x,d.y,d.z),u.copy(d).normalize(),p.push(u.x,u.y,u.z),m.push(w+x,1-y),v.push(l++)}c.push(v)}for(let g=0;g<n;g++)for(let v=0;v<e;v++){let y=c[g][v+1],x=c[g][v],b=c[g+1][v],w=c[g+1][v+1];(g!==0||s>0)&&h.push(y,x,w),(g!==n-1||a<Math.PI)&&h.push(x,b,w)}this.setIndex(h),this.setAttribute("position",new xt(f,3)),this.setAttribute("normal",new xt(p,3)),this.setAttribute("uv",new xt(m,2))}static fromJSON(t){return new rH(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}},Yce=class extends Ut{constructor(t=1,e=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);let o=[],a=[],l=[],c=[],d=new q,u=new q,h=new q,f=new q,p=new q,m=new q,g=new q;for(let y=0;y<=n;++y){let x=y/n*r*Math.PI*2;v(x,r,s,t,h),v(x+.01,r,s,t,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let b=0;b<=i;++b){let w=b/i*Math.PI*2,E=-e*Math.cos(w),A=e*Math.sin(w);d.x=h.x+(E*g.x+A*p.x),d.y=h.y+(E*g.y+A*p.y),d.z=h.z+(E*g.z+A*p.z),a.push(d.x,d.y,d.z),u.subVectors(d,h).normalize(),l.push(u.x,u.y,u.z),c.push(y/n),c.push(b/i)}}for(let y=1;y<=n;y++)for(let x=1;x<=i;x++){let b=(i+1)*(y-1)+(x-1),w=(i+1)*y+(x-1),E=(i+1)*y+x,A=(i+1)*(y-1)+x;o.push(b,w,A),o.push(w,E,A)}this.setIndex(o),this.setAttribute("position",new xt(a,3)),this.setAttribute("normal",new xt(l,3)),this.setAttribute("uv",new xt(c,2));function v(y,x,b,w,E){let A=Math.cos(y),S=Math.sin(y),C=b/x*y,T=Math.cos(C);E.x=w*(2+T)*.5*A,E.y=w*(2+T)*S*.5,E.z=w*Math.sin(C)*.5}}static fromJSON(t){return new Yce(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}},iK={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Kce=class{constructor(t,e,n){let i=this,r=!1,s=0,o=0,a,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(c){o++,r===!1&&i.onStart!==void 0&&i.onStart(c,s,o),r=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,d){return l.push(c,d),this},this.removeHandler=function(c){let d=l.indexOf(c);return d!==-1&&l.splice(d,2),this},this.getHandler=function(c){for(let d=0,u=l.length;d<u;d+=2){let h=l[d],f=l[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return f}return null}}},iYe=new Kce,sH=class{constructor(t){this.manager=t!==void 0?t:iYe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let n=this;return new Promise(function(i,r){n.load(t,i,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}},Gu={},rYe=class extends Error{constructor(t,e){super(t),this.response=e}},nF=class extends sH{constructor(t){super(t)}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let r=iK.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(Gu[t]!==void 0){Gu[t].push({onLoad:e,onProgress:n,onError:i});return}Gu[t]=[],Gu[t].push({onLoad:e,onProgress:n,onError:i});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=Gu[t],d=l.body.getReader(),u=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=u?parseInt(u):0,f=h!==0,p=0,m=new ReadableStream({start(g){v();function v(){d.read().then(({done:y,value:x})=>{if(y)g.close();else{p+=x.byteLength;let b=new ProgressEvent("progress",{lengthComputable:f,loaded:p,total:h});for(let w=0,E=c.length;w<E;w++){let A=c[w];A.onProgress&&A.onProgress(b)}g.enqueue(x),v()}})}}});return new Response(m)}else throw new rYe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(a){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(o),d=c&&c[1]?c[1].toLowerCase():void 0,u=new TextDecoder(d);return l.arrayBuffer().then(h=>u.decode(h))}}}).then(l=>{iK.add(t,l);let c=Gu[t];delete Gu[t];for(let d=0,u=c.length;d<u;d++){let h=c[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{let c=Gu[t];if(c===void 0)throw this.manager.itemError(t),l;delete Gu[t];for(let d=0,u=c.length;d<u;d++){let h=c[d];h.onError&&h.onError(l)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}},OS=class extends ei{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Lt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}},sYe=class extends OS{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Lt(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}},FI=new tt,rK=new q,sK=new q,oH=class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new QV,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,n=this.matrix;rK.setFromMatrixPosition(t.matrixWorld),e.position.copy(rK),sK.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(sK),e.updateMatrixWorld(),FI.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FI),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(FI)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},oYe=class extends oH{constructor(){super(new Os(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,n=E_*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},aYe=class extends OS{constructor(t,e,n=0,i=Math.PI/3,r=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new oYe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},oK=new tt,K1=new q,UI=new q,lYe=class extends oH{constructor(){super(new Os(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(t,e=0){let n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),K1.setFromMatrixPosition(t.matrixWorld),n.position.copy(K1),UI.copy(n.position),UI.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(UI),n.updateMatrixWorld(),i.makeTranslation(-K1.x,-K1.y,-K1.z),oK.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oK)}},cYe=class extends OS{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new lYe}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},uYe=class extends oH{constructor(){super(new c2(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},dYe=class extends OS{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.shadow=new uYe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},hYe=class extends Ut{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}},Zce=class extends sH{constructor(t){super(t)}load(t,e,n,i){let r=this,s=new nF(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,function(o){try{e(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(t)}},n,i)}parse(t){let e={},n={};function i(u,h){if(e[h]!==void 0)return e[h];let f=u.interleavedBuffers[h],p=r(u,f.buffer),m=eA(f.type,p),g=new AXe(m,f.stride);return g.uuid=f.uuid,e[h]=g,g}function r(u,h){if(n[h]!==void 0)return n[h];let f=u.arrayBuffers[h],p=new Uint32Array(f).buffer;return n[h]=p,p}let s=t.isInstancedBufferGeometry?new hYe:new Ut,o=t.data.index;if(o!==void 0){let u=eA(o.type,o.array);s.setIndex(new Wt(u,1))}let a=t.data.attributes;for(let u in a){let h=a[u],f;if(h.isInterleavedBufferAttribute){let p=i(t.data,h.data);f=new Qz(p,h.itemSize,h.offset,h.normalized)}else{let p=eA(h.type,h.array),m=h.isInstancedBufferAttribute?TXe:Wt;f=new m(p,h.itemSize,h.normalized)}h.name!==void 0&&(f.name=h.name),h.usage!==void 0&&f.setUsage(h.usage),h.updateRange!==void 0&&(f.updateRange.offset=h.updateRange.offset,f.updateRange.count=h.updateRange.count),s.setAttribute(u,f)}let l=t.data.morphAttributes;if(l)for(let u in l){let h=l[u],f=[];for(let p=0,m=h.length;p<m;p++){let g=h[p],v;if(g.isInterleavedBufferAttribute){let y=i(t.data,g.data);v=new Qz(y,g.itemSize,g.offset,g.normalized)}else{let y=eA(g.type,g.array);v=new Wt(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),f.push(v)}s.morphAttributes[u]=f}t.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=t.data.groups||t.data.drawcalls||t.data.offsets;if(c!==void 0)for(let u=0,h=c.length;u!==h;++u){let f=c[u];s.addGroup(f.start,f.count,f.materialIndex)}let d=t.data.boundingSphere;if(d!==void 0){let u=new q;d.center!==void 0&&u.fromArray(d.center),s.boundingSphere=new gl(u,d.radius)}return t.name&&(s.name=t.name),t.userData&&(s.userData=t.userData),s}},fYe=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=aK(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=aK();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function aK(){return(typeof performance>"u"?Date:performance).now()}var Qce="\\[\\]\\.:\\/",aH="[^"+Qce+"]",pYe="[^"+Qce.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",aH);/(WCOD+)?/.source.replace("WCOD",pYe);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aH);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aH);var Je=class{constructor(t){this.value=t}clone(){return new Je(this.value.clone===void 0?this.value:this.value.clone())}},Jce=class{constructor(t,e,n=0,i=1/0){this.ray=new Tx(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new KV,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return iF(t,this,n,e),n.sort(lK),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)iF(t[i],this,n,e);return n.sort(lK),n}};function lK(t,e){return t.distance-e.distance}function iF(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){let r=t.children;for(let s=0,o=r.length;s<o;s++)iF(r[s],e,n,!0)}}var cK=class{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Dr(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},uK=new Se,mYe=class{constructor(t=new Se(1/0,1/0),e=new Se(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=uK.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return uK.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},dK=new q,SA=new q,cl=class{constructor(t=new q,e=new q){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){dK.subVectors(t,this.start),SA.subVectors(this.end,this.start);let n=SA.dot(SA),i=SA.dot(dK)/n;return e&&(i=Dr(i,0,1)),i}closestPointToPoint(t,e,n){let i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},hK=new q,gYe=class extends ei{constructor(t,e){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";let n=new Ut,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,a=32;s<a;s++,o++){let l=s/a*Math.PI*2,c=o/a*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new xt(i,3));let r=new ip({fog:!1,toneMapped:!1});this.cone=new RS(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),hK.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(hK),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},vYe=class extends Po{constructor(t,e,n){let i=new rH(e,4,2),r=new Cx({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},fK=new q,EA=new q,pK=new q,yYe=class extends ei{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let i=new Ut;i.setAttribute("position",new xt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));let r=new ip({fog:!1,toneMapped:!1});this.lightPlane=new u2(i,r),this.add(this.lightPlane),i=new Ut,i.setAttribute("position",new xt([0,0,0,0,0,1],3)),this.targetLine=new u2(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),fK.setFromMatrixPosition(this.light.matrixWorld),EA.setFromMatrixPosition(this.light.target.matrixWorld),pK.subVectors(EA,fK),this.lightPlane.lookAt(EA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(EA),this.targetLine.scale.z=pK.length()}},MA=new q,Hi=new Dx,f2=class extends RS{constructor(t){let e=new Ut,n=new ip({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,p){a(f),a(p)}function a(f){i.push(0,0,0),r.push(0,0,0),s[f]===void 0&&(s[f]=[]),s[f].push(i.length/3-1)}e.setAttribute("position",new xt(i,3)),e.setAttribute("color",new xt(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new Lt(16755200),c=new Lt(16711680),d=new Lt(43775),u=new Lt(16777215),h=new Lt(3355443);this.setColors(l,c,d,u,h)}setColors(t,e,n,i,r){let s=this.geometry.getAttribute("color");s.setXYZ(0,t.r,t.g,t.b),s.setXYZ(1,t.r,t.g,t.b),s.setXYZ(2,t.r,t.g,t.b),s.setXYZ(3,t.r,t.g,t.b),s.setXYZ(4,t.r,t.g,t.b),s.setXYZ(5,t.r,t.g,t.b),s.setXYZ(6,t.r,t.g,t.b),s.setXYZ(7,t.r,t.g,t.b),s.setXYZ(8,t.r,t.g,t.b),s.setXYZ(9,t.r,t.g,t.b),s.setXYZ(10,t.r,t.g,t.b),s.setXYZ(11,t.r,t.g,t.b),s.setXYZ(12,t.r,t.g,t.b),s.setXYZ(13,t.r,t.g,t.b),s.setXYZ(14,t.r,t.g,t.b),s.setXYZ(15,t.r,t.g,t.b),s.setXYZ(16,t.r,t.g,t.b),s.setXYZ(17,t.r,t.g,t.b),s.setXYZ(18,t.r,t.g,t.b),s.setXYZ(19,t.r,t.g,t.b),s.setXYZ(20,t.r,t.g,t.b),s.setXYZ(21,t.r,t.g,t.b),s.setXYZ(22,t.r,t.g,t.b),s.setXYZ(23,t.r,t.g,t.b),s.setXYZ(24,e.r,e.g,e.b),s.setXYZ(25,e.r,e.g,e.b),s.setXYZ(26,e.r,e.g,e.b),s.setXYZ(27,e.r,e.g,e.b),s.setXYZ(28,e.r,e.g,e.b),s.setXYZ(29,e.r,e.g,e.b),s.setXYZ(30,e.r,e.g,e.b),s.setXYZ(31,e.r,e.g,e.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){let t=this.geometry,e=this.pointMap,n=1,i=1;Hi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qi("c",e,t,Hi,0,0,-1),Qi("t",e,t,Hi,0,0,1),Qi("n1",e,t,Hi,-n,-i,-1),Qi("n2",e,t,Hi,n,-i,-1),Qi("n3",e,t,Hi,-n,i,-1),Qi("n4",e,t,Hi,n,i,-1),Qi("f1",e,t,Hi,-n,-i,1),Qi("f2",e,t,Hi,n,-i,1),Qi("f3",e,t,Hi,-n,i,1),Qi("f4",e,t,Hi,n,i,1),Qi("u1",e,t,Hi,n*.7,i*1.1,-1),Qi("u2",e,t,Hi,-n*.7,i*1.1,-1),Qi("u3",e,t,Hi,0,i*2,-1),Qi("cf1",e,t,Hi,-n,0,1),Qi("cf2",e,t,Hi,n,0,1),Qi("cf3",e,t,Hi,0,-i,1),Qi("cf4",e,t,Hi,0,i,1),Qi("cn1",e,t,Hi,-n,0,-1),Qi("cn2",e,t,Hi,n,0,-1),Qi("cn3",e,t,Hi,0,-i,-1),Qi("cn4",e,t,Hi,0,i,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Qi(t,e,n,i,r,s,o){MA.set(r,s,o).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],MA.x,MA.y,MA.z)}}var p2=class extends RS{constructor(t,e=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Ut;r.setIndex(new Wt(n,1)),r.setAttribute("position",new xt(i,3)),super(r,new ip({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},xYe=class extends RS{constructor(t=1){let e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ut;i.setAttribute("position",new xt(e,3)),i.setAttribute("color",new xt(n,3));let r=new ip({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(t,e,n){let i=new Lt,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ax}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ax);var Z1=".",lH=Symbol("target"),eue=Symbol("unsubscribe");function rF(t){return t instanceof Date||t instanceof Set||t instanceof Map||t instanceof WeakSet||t instanceof WeakMap||ArrayBuffer.isView(t)}function bYe(t){return(typeof t=="object"?t===null:typeof t!="function")||t instanceof RegExp}var Yc=Array.isArray;function cH(t){return typeof t=="symbol"}var wYe={after:(t,e)=>Yc(t)?t.slice(e.length):e===""?t:t.slice(e.length+1),concat:(t,e)=>Yc(t)?(t=[...t],e&&t.push(e),t):e&&e.toString!==void 0?(t!==""&&(t+=Z1),cH(e)?t+e.toString():t+e):t,initial:t=>{if(Yc(t))return t.slice(0,-1);if(t==="")return t;let e=t.lastIndexOf(Z1);return e===-1?"":t.slice(0,e)},last:t=>{if(Yc(t))return t[t.length-1]||"";if(t==="")return t;let e=t.lastIndexOf(Z1);return e===-1?t:t.slice(e+1)},walk:(t,e)=>{if(Yc(t))for(let n of t)e(n);else if(t!==""){let n=0,i=t.indexOf(Z1);if(i===-1)e(t);else for(;n<t.length;)i===-1&&(i=t.length),e(t.slice(n,i)),n=i+1,i=t.indexOf(Z1,n)}},get(t,e){return this.walk(e,n=>{t&&(t=t[n])}),t}},Ya=wYe;function _Ye(t){return typeof t=="object"&&typeof t.next=="function"}function SYe(t,e,n,i,r){let s=t.next;if(e.name==="entries")t.next=function(){let o=s.call(this);return o.done===!1&&(o.value[0]=r(o.value[0],e,o.value[0],i),o.value[1]=r(o.value[1],e,o.value[0],i)),o};else if(e.name==="values"){let o=n[lH].keys();t.next=function(){let a=s.call(this);return a.done===!1&&(a.value=r(a.value,e,o.next().value,i)),a}}else t.next=function(){let o=s.call(this);return o.done===!1&&(o.value=r(o.value,e,o.value,i)),o};return t}function mK(t,e,n){return t.isUnsubscribed||e.ignoreSymbols&&cH(n)||e.ignoreUnderscores&&n.charAt(0)==="_"||"ignoreKeys"in e&&e.ignoreKeys.includes(n)}var EYe=class{constructor(t){this._equals=t,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(t){let e=this._getDescriptorCache(),n=e.get(t);return n===void 0&&(n={},e.set(t,n)),n}_getOwnPropertyDescriptor(t,e){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(t,e);let n=this._getProperties(t),i=n[e];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(t,e),n[e]=i),i}getProxy(t,e,n,i){if(this.isUnsubscribed)return t;let r=t[i],s=r||t;this._pathCache.set(s,e);let o=this._proxyCache.get(s);return o===void 0&&(o=r===void 0?new Proxy(t,n):t,this._proxyCache.set(s,o)),o}getPath(t){return this.isUnsubscribed?void 0:this._pathCache.get(t)}isDetached(t,e){return!Object.is(t,Ya.get(e,this.getPath(t)))}defineProperty(t,e,n){return Reflect.defineProperty(t,e,n)?(this.isUnsubscribed||(this._getProperties(t)[e]=n),!0):!1}setProperty(t,e,n,i,r){if(!this._equals(r,n)||!(e in t)){let s=this._getOwnPropertyDescriptor(t,e);return s!==void 0&&"set"in s?Reflect.set(t,e,n,i):Reflect.set(t,e,n)}return!0}deleteProperty(t,e,n){if(Reflect.deleteProperty(t,e)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(t);i&&(delete i[e],this._pathCache.delete(n))}return!0}return!1}isSameDescriptor(t,e,n){let i=this._getOwnPropertyDescriptor(e,n);return t!==void 0&&i!==void 0&&Object.is(t.value,i.value)&&(t.writable||!1)===(i.writable||!1)&&(t.enumerable||!1)===(i.enumerable||!1)&&(t.configurable||!1)===(i.configurable||!1)&&t.get===i.get&&t.set===i.set}isGetInvariant(t,e){let n=this._getOwnPropertyDescriptor(t,e);return n!==void 0&&n.configurable!==!0&&n.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function sF(t){return toString.call(t)==="[object Object]"}function AA(){return!0}function Nv(t,e){return t.length!==e.length||t.some((n,i)=>e[i]!==n)}var tue=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),MYe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),nue={push:AA,pop:AA,shift:AA,unshift:AA,copyWithin:Nv,reverse:Nv,sort:Nv,splice:Nv,flat:Nv,fill:Nv},AYe=new Set([...tue,...MYe,...Object.keys(nue)]);function TA(t,e){if(t.size!==e.size)return!0;for(let n of t)if(!e.has(n))return!0;return!1}var iue=["keys","values","entries"],rue=new Set(["has","toString"]),sue={add:TA,clear:TA,delete:TA,forEach:TA},TYe=new Set([...rue,...Object.keys(sue),...iue]);function CA(t,e){if(t.size!==e.size)return!0;let n;for(let[i,r]of t)if(n=e.get(i),n!==r||n===void 0&&!e.has(i))return!0;return!1}var CYe=new Set([...rue,"get"]),oue={set:CA,clear:CA,delete:CA,forEach:CA},PYe=new Set([...CYe,...Object.keys(oue),...iue]),Wf=class{constructor(t,e,n,i){this._path=e,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=e===void 0?t:this._shallowClone(t)}static isHandledMethod(t){return tue.has(t)}_shallowClone(t){let e=t;if(sF(t))e={...t};else if(Yc(t))e=[...t];else if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set([...t].map(n=>this._shallowClone(n)));else if(t instanceof Map){e=new Map;for(let[n,i]of t.entries())e.set(n,this._shallowClone(i))}return this._clonedCache.add(e),e}preferredThisArg(t,e,n,i){return t?(Yc(i)?this._onIsChanged=nue[e]:i instanceof Set?this._onIsChanged=sue[e]:i instanceof Map&&(this._onIsChanged=oue[e]),i):n}update(t,e,n){let i=Ya.after(t,this._path);if(e!=="length"){let r=this.clone;Ya.walk(i,s=>{r&&r[s]&&(this._clonedCache.has(r[s])||(r[s]=this._shallowClone(r[s])),r=r[s])}),this._hasOnValidate&&this._changes.push({path:i,property:e,previous:n}),r&&r[e]&&(r[e]=n)}this._isChanged=!0}undo(t){let e;for(let n=this._changes.length-1;n!==-1;n--)e=this._changes[n],Ya.get(t,e.path)[e.property]=e.previous}isChanged(t){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,t)}},gK=class extends Wf{static isHandledMethod(t){return AYe.has(t)}},DYe=class extends Wf{undo(t){t.setTime(this.clone.getTime())}isChanged(t,e){return!e(this.clone.valueOf(),t.valueOf())}},vK=class extends Wf{static isHandledMethod(t){return TYe.has(t)}undo(t){for(let e of this.clone)t.add(e);for(let e of t)this.clone.has(e)||t.delete(e)}},yK=class extends Wf{static isHandledMethod(t){return PYe.has(t)}undo(t){for(let[e,n]of this.clone.entries())t.set(e,n);for(let e of t.keys())this.clone.has(e)||t.delete(e)}},RYe=class extends Wf{constructor(t,e,n,i){super(void 0,e,n,i),this._arg1=n[0],this._weakValue=t.has(this._arg1)}isChanged(t){return this._weakValue!==t.has(this._arg1)}undo(t){this._weakValue&&!t.has(this._arg1)?t.add(this._arg1):t.delete(this._arg1)}},OYe=class extends Wf{constructor(t,e,n,i){super(void 0,e,n,i),this._weakKey=n[0],this._weakHas=t.has(this._weakKey),this._weakValue=t.get(this._weakKey)}isChanged(t){return this._weakValue!==t.get(this._weakKey)}undo(t){let e=t.has(this._weakKey);this._weakHas&&!e?t.set(this._weakKey,this._weakValue):!this._weakHas&&e?t.delete(this._weakKey):this._weakValue!==t.get(this._weakKey)&&t.set(this._weakKey,this._weakValue)}},n0=class{constructor(t){this._stack=[],this._hasOnValidate=t}static isHandledType(t){return sF(t)||Yc(t)||rF(t)}static isHandledMethod(t,e){return sF(t)?Wf.isHandledMethod(e):Yc(t)?gK.isHandledMethod(e):t instanceof Set?vK.isHandledMethod(e):t instanceof Map?yK.isHandledMethod(e):rF(t)}get isCloning(){return this._stack.length>0}start(t,e,n){let i=Wf;Yc(t)?i=gK:t instanceof Date?i=DYe:t instanceof Set?i=vK:t instanceof Map?i=yK:t instanceof WeakSet?i=RYe:t instanceof WeakMap&&(i=OYe),this._stack.push(new i(t,e,n,this._hasOnValidate))}update(t,e,n){this._stack[this._stack.length-1].update(t,e,n)}preferredThisArg(t,e,n){let{name:i}=t,r=n0.isHandledMethod(n,i);return this._stack[this._stack.length-1].preferredThisArg(r,i,e,n)}isChanged(t,e,n){return this._stack[this._stack.length-1].isChanged(t,e,n)}undo(t){this._previousClone!==void 0&&this._previousClone.undo(t)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},LYe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},uH=(t,e,n={})=>{n={...LYe,...n};let i=Symbol("ProxyTarget"),{equals:r,isShallow:s,ignoreDetached:o,details:a}=n,l=new EYe(r),c=typeof n.onValidate=="function",d=new n0(c),u=(y,x,b,w,E)=>!c||d.isCloning||n.onValidate(Ya.concat(l.getPath(y),x),b,w,E)===!0,h=(y,x,b,w)=>{!mK(l,n,x)&&!(o&&l.isDetached(y,t))&&f(l.getPath(y),x,b,w)},f=(y,x,b,w,E)=>{d.isCloning?d.update(y,x,w):e(Ya.concat(y,x),b,w,E)},p=y=>y&&(y[i]||y),m=(y,x,b,w)=>bYe(y)||b==="constructor"||s&&!n0.isHandledMethod(x,b)||mK(l,n,b)||l.isGetInvariant(x,b)||o&&l.isDetached(x,t)?y:(w===void 0&&(w=l.getPath(x)),l.getProxy(y,Ya.concat(w,b),g,i)),g={get(y,x,b){if(cH(x)){if(x===i||x===lH)return y;if(x===eue&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let w=rF(y)?Reflect.get(y,x):Reflect.get(y,x,b);return m(w,y,x)},set(y,x,b,w){b=p(b);let E=y[i]||y,A=E[x];if(r(A,b)&&x in y)return!0;let S=u(y,x,b,A);return S&&l.setProperty(E,x,b,w,A)?(h(y,x,y[x],A),!0):!S},defineProperty(y,x,b){if(!l.isSameDescriptor(b,y,x)){let w=y[x];u(y,x,b.value,w)&&l.defineProperty(y,x,b,w)&&h(y,x,b.value,w)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let b=Reflect.get(y,x),w=u(y,x,void 0,b);return w&&l.deleteProperty(y,x,b)?(h(y,x,void 0,b),!0):!w},apply(y,x,b){let w=x[i]||x;if(l.isUnsubscribed)return Reflect.apply(y,w,b);if((a===!1||a!==!0&&!a.includes(y.name))&&n0.isHandledType(w)){let E=Ya.initial(l.getPath(y)),A=n0.isHandledMethod(w,y.name);d.start(w,E,b);let S=Reflect.apply(y,d.preferredThisArg(y,x,w),A?b.map(P=>p(P)):b),C=d.isChanged(w,r),T=d.stop();if(n0.isHandledType(S)&&A&&(x instanceof Map&&y.name==="get"&&(E=Ya.concat(E,b[0])),S=l.getProxy(S,E,g)),C){let P={name:y.name,args:b,result:S},R=d.isCloning?Ya.initial(E):E,L=d.isCloning?Ya.last(E):"";u(Ya.get(t,R),L,w,T,P)?f(R,L,w,T,P):d.undo(w)}return(x instanceof Map||x instanceof Set)&&_Ye(S)?SYe(S,y,x,E,m):S}return Reflect.apply(y,x,b)}},v=l.getProxy(t,n.pathAsArray?[]:"",g);return e=e.bind(v),c&&(n.onValidate=n.onValidate.bind(v)),v};uH.target=t=>t&&t[lH]||t;uH.unsubscribe=t=>t[eue]||t;var xK=uH,IYe=typeof global=="object"&&global&&global.Object===Object&&global,aue=IYe,kYe=typeof self=="object"&&self&&self.Object===Object&&self,NYe=aue||kYe||Function("return this")(),fc=NYe,BYe=fc.Symbol,vl=BYe,lue=Object.prototype,zYe=lue.hasOwnProperty,FYe=lue.toString,Q1=vl?vl.toStringTag:void 0;function UYe(t){var e=zYe.call(t,Q1),n=t[Q1];try{t[Q1]=void 0;var i=!0}catch{}var r=FYe.call(t);return i&&(e?t[Q1]=n:delete t[Q1]),r}var VYe=UYe,HYe=Object.prototype,jYe=HYe.toString;function GYe(t){return jYe.call(t)}var WYe=GYe,qYe="[object Null]",$Ye="[object Undefined]",bK=vl?vl.toStringTag:void 0;function XYe(t){return t==null?t===void 0?$Ye:qYe:bK&&bK in Object(t)?VYe(t):WYe(t)}var Eg=XYe;function YYe(t){return t!=null&&typeof t=="object"}var zd=YYe,KYe="[object Symbol]";function ZYe(t){return typeof t=="symbol"||zd(t)&&Eg(t)==KYe}var hR=ZYe;function QYe(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var cue=QYe,JYe=Array.isArray,gu=JYe,eKe=1/0,wK=vl?vl.prototype:void 0,_K=wK?wK.toString:void 0;function uue(t){if(typeof t=="string")return t;if(gu(t))return cue(t,uue)+"";if(hR(t))return _K?_K.call(t):"";var e=t+"";return e=="0"&&1/t==-eKe?"-0":e}var tKe=uue,nKe=/\s/;function iKe(t){for(var e=t.length;e--&&nKe.test(t.charAt(e)););return e}var rKe=iKe,sKe=/^\s+/;function oKe(t){return t&&t.slice(0,rKe(t)+1).replace(sKe,"")}var aKe=oKe;function lKe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ac=lKe,SK=0/0,cKe=/^[-+]0x[0-9a-f]+$/i,uKe=/^0b[01]+$/i,dKe=/^0o[0-7]+$/i,hKe=parseInt;function fKe(t){if(typeof t=="number")return t;if(hR(t))return SK;if(ac(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ac(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=aKe(t);var n=uKe.test(t);return n||dKe.test(t)?hKe(t.slice(2),n?2:8):cKe.test(t)?SK:+t}var EK=fKe;function pKe(t){return t}var mKe=pKe,gKe="[object AsyncFunction]",vKe="[object Function]",yKe="[object GeneratorFunction]",xKe="[object Proxy]";function bKe(t){if(!ac(t))return!1;var e=Eg(t);return e==vKe||e==yKe||e==gKe||e==xKe}var due=bKe,wKe=fc["__core-js_shared__"],VI=wKe,MK=function(){var t=/[^.]+$/.exec(VI&&VI.keys&&VI.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _Ke(t){return!!MK&&MK in t}var SKe=_Ke,EKe=Function.prototype,MKe=EKe.toString;function AKe(t){if(t!=null){try{return MKe.call(t)}catch{}try{return t+""}catch{}}return""}var Mg=AKe,TKe=/[\\^$.*+?()[\]{}|]/g,CKe=/^\[object .+?Constructor\]$/,PKe=Function.prototype,DKe=Object.prototype,RKe=PKe.toString,OKe=DKe.hasOwnProperty,LKe=RegExp("^"+RKe.call(OKe).replace(TKe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IKe(t){if(!ac(t)||SKe(t))return!1;var e=due(t)?LKe:CKe;return e.test(Mg(t))}var kKe=IKe;function NKe(t,e){return t==null?void 0:t[e]}var BKe=NKe;function zKe(t,e){var n=BKe(t,e);return kKe(n)?n:void 0}var Ag=zKe,FKe=Ag(fc,"WeakMap"),oF=FKe,AK=Object.create,UKe=function(){function t(){}return function(e){if(!ac(e))return{};if(AK)return AK(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),VKe=UKe;function HKe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var jKe=HKe;function GKe(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var WKe=GKe,qKe=800,$Ke=16,XKe=Date.now;function YKe(t){var e=0,n=0;return function(){var i=XKe(),r=$Ke-(i-n);if(n=i,r>0){if(++e>=qKe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var KKe=YKe;function ZKe(t){return function(){return t}}var QKe=ZKe,JKe=function(){try{var t=Ag(Object,"defineProperty");return t({},"",{}),t}catch{}}(),m2=JKe,eZe=m2?function(t,e){return m2(t,"toString",{configurable:!0,enumerable:!1,value:QKe(e),writable:!0})}:mKe,tZe=eZe,nZe=KKe(tZe),iZe=nZe;function rZe(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}var sZe=rZe,oZe=9007199254740991,aZe=/^(?:0|[1-9]\d*)$/;function lZe(t,e){var n=typeof t;return e=e??oZe,!!e&&(n=="number"||n!="symbol"&&aZe.test(t))&&t>-1&&t%1==0&&t<e}var dH=lZe;function cZe(t,e,n){e=="__proto__"&&m2?m2(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var hue=cZe;function uZe(t,e){return t===e||t!==t&&e!==e}var hH=uZe,dZe=Object.prototype,hZe=dZe.hasOwnProperty;function fZe(t,e,n){var i=t[e];(!(hZe.call(t,e)&&hH(i,n))||n===void 0&&!(e in t))&&hue(t,e,n)}var fH=fZe;function pZe(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?hue(n,a,l):fH(n,a,l)}return n}var LS=pZe,TK=Math.max;function mZe(t,e,n){return e=TK(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=TK(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),jKe(t,this,a)}}var gZe=mZe,vZe=9007199254740991;function yZe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=vZe}var pH=yZe;function xZe(t){return t!=null&&pH(t.length)&&!due(t)}var fue=xZe,bZe=Object.prototype;function wZe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||bZe;return t===n}var mH=wZe;function _Ze(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var SZe=_Ze,EZe="[object Arguments]";function MZe(t){return zd(t)&&Eg(t)==EZe}var CK=MZe,pue=Object.prototype,AZe=pue.hasOwnProperty,TZe=pue.propertyIsEnumerable,CZe=CK(function(){return arguments}())?CK:function(t){return zd(t)&&AZe.call(t,"callee")&&!TZe.call(t,"callee")},gH=CZe;function PZe(){return!1}var DZe=PZe,mue=typeof ha=="object"&&ha&&!ha.nodeType&&ha,PK=mue&&typeof fa=="object"&&fa&&!fa.nodeType&&fa,RZe=PK&&PK.exports===mue,DK=RZe?fc.Buffer:void 0,OZe=DK?DK.isBuffer:void 0,LZe=OZe||DZe,g2=LZe,IZe="[object Arguments]",kZe="[object Array]",NZe="[object Boolean]",BZe="[object Date]",zZe="[object Error]",FZe="[object Function]",UZe="[object Map]",VZe="[object Number]",HZe="[object Object]",jZe="[object RegExp]",GZe="[object Set]",WZe="[object String]",qZe="[object WeakMap]",$Ze="[object ArrayBuffer]",XZe="[object DataView]",YZe="[object Float32Array]",KZe="[object Float64Array]",ZZe="[object Int8Array]",QZe="[object Int16Array]",JZe="[object Int32Array]",eQe="[object Uint8Array]",tQe="[object Uint8ClampedArray]",nQe="[object Uint16Array]",iQe="[object Uint32Array]",pi={};pi[YZe]=pi[KZe]=pi[ZZe]=pi[QZe]=pi[JZe]=pi[eQe]=pi[tQe]=pi[nQe]=pi[iQe]=!0;pi[IZe]=pi[kZe]=pi[$Ze]=pi[NZe]=pi[XZe]=pi[BZe]=pi[zZe]=pi[FZe]=pi[UZe]=pi[VZe]=pi[HZe]=pi[jZe]=pi[GZe]=pi[WZe]=pi[qZe]=!1;function rQe(t){return zd(t)&&pH(t.length)&&!!pi[Eg(t)]}var sQe=rQe;function oQe(t){return function(e){return t(e)}}var vH=oQe,gue=typeof ha=="object"&&ha&&!ha.nodeType&&ha,pw=gue&&typeof fa=="object"&&fa&&!fa.nodeType&&fa,aQe=pw&&pw.exports===gue,HI=aQe&&aue.process,lQe=function(){try{var t=pw&&pw.require&&pw.require("util").types;return t||HI&&HI.binding&&HI.binding("util")}catch{}}(),Hy=lQe,RK=Hy&&Hy.isTypedArray,cQe=RK?vH(RK):sQe,vue=cQe,uQe=Object.prototype,dQe=uQe.hasOwnProperty;function hQe(t,e){var n=gu(t),i=!n&&gH(t),r=!n&&!i&&g2(t),s=!n&&!i&&!r&&vue(t),o=n||i||r||s,a=o?SZe(t.length,String):[],l=a.length;for(var c in t)(e||dQe.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||dH(c,l)))&&a.push(c);return a}var yue=hQe;function fQe(t,e){return function(n){return t(e(n))}}var xue=fQe,pQe=xue(Object.keys,Object),mQe=pQe,gQe=Object.prototype,vQe=gQe.hasOwnProperty;function yQe(t){if(!mH(t))return mQe(t);var e=[];for(var n in Object(t))vQe.call(t,n)&&n!="constructor"&&e.push(n);return e}var xQe=yQe;function bQe(t){return fue(t)?yue(t):xQe(t)}var yH=bQe;function wQe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var _Qe=wQe,SQe=Object.prototype,EQe=SQe.hasOwnProperty;function MQe(t){if(!ac(t))return _Qe(t);var e=mH(t),n=[];for(var i in t)i=="constructor"&&(e||!EQe.call(t,i))||n.push(i);return n}var AQe=MQe;function TQe(t){return fue(t)?yue(t,!0):AQe(t)}var xH=TQe,CQe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,PQe=/^\w*$/;function DQe(t,e){if(gu(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||hR(t)?!0:PQe.test(t)||!CQe.test(t)||e!=null&&t in Object(e)}var RQe=DQe,OQe=Ag(Object,"create"),C_=OQe;function LQe(){this.__data__=C_?C_(null):{},this.size=0}var IQe=LQe;function kQe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var NQe=kQe,BQe="__lodash_hash_undefined__",zQe=Object.prototype,FQe=zQe.hasOwnProperty;function UQe(t){var e=this.__data__;if(C_){var n=e[t];return n===BQe?void 0:n}return FQe.call(e,t)?e[t]:void 0}var VQe=UQe,HQe=Object.prototype,jQe=HQe.hasOwnProperty;function GQe(t){var e=this.__data__;return C_?e[t]!==void 0:jQe.call(e,t)}var WQe=GQe,qQe="__lodash_hash_undefined__";function $Qe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=C_&&e===void 0?qQe:e,this}var XQe=$Qe;function Ox(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ox.prototype.clear=IQe;Ox.prototype.delete=NQe;Ox.prototype.get=VQe;Ox.prototype.has=WQe;Ox.prototype.set=XQe;var OK=Ox;function YQe(){this.__data__=[],this.size=0}var KQe=YQe;function ZQe(t,e){for(var n=t.length;n--;)if(hH(t[n][0],e))return n;return-1}var fR=ZQe,QQe=Array.prototype,JQe=QQe.splice;function eJe(t){var e=this.__data__,n=fR(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():JQe.call(e,n,1),--this.size,!0}var tJe=eJe;function nJe(t){var e=this.__data__,n=fR(e,t);return n<0?void 0:e[n][1]}var iJe=nJe;function rJe(t){return fR(this.__data__,t)>-1}var sJe=rJe;function oJe(t,e){var n=this.__data__,i=fR(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var aJe=oJe;function Lx(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Lx.prototype.clear=KQe;Lx.prototype.delete=tJe;Lx.prototype.get=iJe;Lx.prototype.has=sJe;Lx.prototype.set=aJe;var pR=Lx,lJe=Ag(fc,"Map"),P_=lJe;function cJe(){this.size=0,this.__data__={hash:new OK,map:new(P_||pR),string:new OK}}var uJe=cJe;function dJe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var hJe=dJe;function fJe(t,e){var n=t.__data__;return hJe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var mR=fJe;function pJe(t){var e=mR(this,t).delete(t);return this.size-=e?1:0,e}var mJe=pJe;function gJe(t){return mR(this,t).get(t)}var vJe=gJe;function yJe(t){return mR(this,t).has(t)}var xJe=yJe;function bJe(t,e){var n=mR(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var wJe=bJe;function Ix(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ix.prototype.clear=uJe;Ix.prototype.delete=mJe;Ix.prototype.get=vJe;Ix.prototype.has=xJe;Ix.prototype.set=wJe;var gR=Ix,_Je="Expected a function";function bH(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_Je);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(bH.Cache||gR),n}bH.Cache=gR;var SJe=bH,EJe=500;function MJe(t){var e=SJe(t,function(i){return n.size===EJe&&n.clear(),i}),n=e.cache;return e}var AJe=MJe,TJe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,CJe=/\\(\\)?/g,PJe=AJe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(TJe,function(n,i,r,s){e.push(r?s.replace(CJe,"$1"):i||n)}),e}),DJe=PJe;function RJe(t){return t==null?"":tKe(t)}var OJe=RJe;function LJe(t,e){return gu(t)?t:RQe(t,e)?[t]:DJe(OJe(t))}var kx=LJe,IJe=1/0;function kJe(t){if(typeof t=="string"||hR(t))return t;var e=t+"";return e=="0"&&1/t==-IJe?"-0":e}var vR=kJe;function NJe(t,e){e=kx(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[vR(e[n++])];return n&&n==i?t:void 0}var bue=NJe;function BJe(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var wH=BJe,LK=vl?vl.isConcatSpreadable:void 0;function zJe(t){return gu(t)||gH(t)||!!(LK&&t&&t[LK])}var FJe=zJe;function wue(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=FJe),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?wue(a,e-1,n,i,r):wH(r,a):i||(r[r.length]=a)}return r}var UJe=wue;function VJe(t){var e=t==null?0:t.length;return e?UJe(t,1):[]}var HJe=VJe;function jJe(t){return iZe(gZe(t,void 0,HJe),t+"")}var _ue=jJe,GJe=xue(Object.getPrototypeOf,Object),_H=GJe,WJe="[object Object]",qJe=Function.prototype,$Je=Object.prototype,Sue=qJe.toString,XJe=$Je.hasOwnProperty,YJe=Sue.call(Object);function KJe(t){if(!zd(t)||Eg(t)!=WJe)return!1;var e=_H(t);if(e===null)return!0;var n=XJe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Sue.call(n)==YJe}var ZJe=KJe;function QJe(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}var JJe=QJe;function eet(){this.__data__=new pR,this.size=0}var tet=eet;function net(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var iet=net;function ret(t){return this.__data__.get(t)}var set=ret;function oet(t){return this.__data__.has(t)}var aet=oet,cet=200;function uet(t,e){var n=this.__data__;if(n instanceof pR){var i=n.__data__;if(!P_||i.length<cet-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new gR(i)}return n.set(t,e),this.size=n.size,this}var det=uet;function Nx(t){var e=this.__data__=new pR(t);this.size=e.size}Nx.prototype.clear=tet;Nx.prototype.delete=iet;Nx.prototype.get=set;Nx.prototype.has=aet;Nx.prototype.set=det;var qT=Nx;function het(t,e){return t&&LS(e,yH(e),t)}var fet=het;function pet(t,e){return t&&LS(e,xH(e),t)}var met=pet,Eue=typeof ha=="object"&&ha&&!ha.nodeType&&ha,IK=Eue&&typeof fa=="object"&&fa&&!fa.nodeType&&fa,get=IK&&IK.exports===Eue,kK=get?fc.Buffer:void 0,NK=kK?kK.allocUnsafe:void 0;function vet(t,e){if(e)return t.slice();var n=t.length,i=NK?NK(n):new t.constructor(n);return t.copy(i),i}var yet=vet;function xet(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}var bet=xet;function wet(){return[]}var Mue=wet,_et=Object.prototype,Eet=_et.propertyIsEnumerable,BK=Object.getOwnPropertySymbols,Met=BK?function(t){return t==null?[]:(t=Object(t),bet(BK(t),function(e){return Eet.call(t,e)}))}:Mue,SH=Met;function Aet(t,e){return LS(t,SH(t),e)}var Tet=Aet,Cet=Object.getOwnPropertySymbols,Pet=Cet?function(t){for(var e=[];t;)wH(e,SH(t)),t=_H(t);return e}:Mue,Aue=Pet;function Det(t,e){return LS(t,Aue(t),e)}var Ret=Det;function Oet(t,e,n){var i=e(t);return gu(t)?i:wH(i,n(t))}var Tue=Oet;function Let(t){return Tue(t,yH,SH)}var aF=Let;function Iet(t){return Tue(t,xH,Aue)}var Cue=Iet,ket=Ag(fc,"DataView"),lF=ket,Net=Ag(fc,"Promise"),cF=Net,Bet=Ag(fc,"Set"),uF=Bet,zK="[object Map]",zet="[object Object]",FK="[object Promise]",UK="[object Set]",VK="[object WeakMap]",HK="[object DataView]",Fet=Mg(lF),Uet=Mg(P_),Vet=Mg(cF),Het=Mg(uF),jet=Mg(oF),Kp=Eg;(lF&&Kp(new lF(new ArrayBuffer(1)))!=HK||P_&&Kp(new P_)!=zK||cF&&Kp(cF.resolve())!=FK||uF&&Kp(new uF)!=UK||oF&&Kp(new oF)!=VK)&&(Kp=function(t){var e=Eg(t),n=e==zet?t.constructor:void 0,i=n?Mg(n):"";if(i)switch(i){case Fet:return HK;case Uet:return zK;case Vet:return FK;case Het:return UK;case jet:return VK}return e});var D_=Kp,Get=Object.prototype,Wet=Get.hasOwnProperty;function qet(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Wet.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var $et=qet,Xet=fc.Uint8Array,v2=Xet;function Yet(t){var e=new t.constructor(t.byteLength);return new v2(e).set(new v2(t)),e}var EH=Yet;function Ket(t,e){var n=e?EH(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Zet=Ket,Qet=/\w*$/;function Jet(t){var e=new t.constructor(t.source,Qet.exec(t));return e.lastIndex=t.lastIndex,e}var ett=Jet,jK=vl?vl.prototype:void 0,GK=jK?jK.valueOf:void 0;function ttt(t){return GK?Object(GK.call(t)):{}}var ntt=ttt;function itt(t,e){var n=e?EH(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var rtt=itt,stt="[object Boolean]",ott="[object Date]",att="[object Map]",ltt="[object Number]",ctt="[object RegExp]",utt="[object Set]",dtt="[object String]",htt="[object Symbol]",ftt="[object ArrayBuffer]",ptt="[object DataView]",mtt="[object Float32Array]",gtt="[object Float64Array]",vtt="[object Int8Array]",ytt="[object Int16Array]",xtt="[object Int32Array]",btt="[object Uint8Array]",wtt="[object Uint8ClampedArray]",_tt="[object Uint16Array]",Stt="[object Uint32Array]";function Ett(t,e,n){var i=t.constructor;switch(e){case ftt:return EH(t);case stt:case ott:return new i(+t);case ptt:return Zet(t,n);case mtt:case gtt:case vtt:case ytt:case xtt:case btt:case wtt:case _tt:case Stt:return rtt(t,n);case att:return new i;case ltt:case dtt:return new i(t);case ctt:return ett(t);case utt:return new i;case htt:return ntt(t)}}var Mtt=Ett;function Att(t){return typeof t.constructor=="function"&&!mH(t)?VKe(_H(t)):{}}var Ttt=Att,Ctt="[object Map]";function Ptt(t){return zd(t)&&D_(t)==Ctt}var Dtt=Ptt,WK=Hy&&Hy.isMap,Rtt=WK?vH(WK):Dtt,Ott=Rtt,Ltt="[object Set]";function Itt(t){return zd(t)&&D_(t)==Ltt}var ktt=Itt,qK=Hy&&Hy.isSet,Ntt=qK?vH(qK):ktt,Btt=Ntt,ztt=1,Ftt=2,Utt=4,Pue="[object Arguments]",Vtt="[object Array]",Htt="[object Boolean]",jtt="[object Date]",Gtt="[object Error]",Due="[object Function]",Wtt="[object GeneratorFunction]",qtt="[object Map]",$tt="[object Number]",Rue="[object Object]",Xtt="[object RegExp]",Ytt="[object Set]",Ktt="[object String]",Ztt="[object Symbol]",Qtt="[object WeakMap]",Jtt="[object ArrayBuffer]",ent="[object DataView]",tnt="[object Float32Array]",nnt="[object Float64Array]",int="[object Int8Array]",rnt="[object Int16Array]",snt="[object Int32Array]",ont="[object Uint8Array]",ant="[object Uint8ClampedArray]",lnt="[object Uint16Array]",cnt="[object Uint32Array]",ai={};ai[Pue]=ai[Vtt]=ai[Jtt]=ai[ent]=ai[Htt]=ai[jtt]=ai[tnt]=ai[nnt]=ai[int]=ai[rnt]=ai[snt]=ai[qtt]=ai[$tt]=ai[Rue]=ai[Xtt]=ai[Ytt]=ai[Ktt]=ai[Ztt]=ai[ont]=ai[ant]=ai[lnt]=ai[cnt]=!0;ai[Gtt]=ai[Due]=ai[Qtt]=!1;function $T(t,e,n,i,r,s){var o,a=e&ztt,l=e&Ftt,c=e&Utt;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!ac(t))return t;var d=gu(t);if(d){if(o=$et(t),!a)return WKe(t,o)}else{var u=D_(t),h=u==Due||u==Wtt;if(g2(t))return yet(t,a);if(u==Rue||u==Pue||h&&!r){if(o=l||h?{}:Ttt(t),!a)return l?Ret(t,met(o,t)):Tet(t,fet(o,t))}else{if(!ai[u])return r?t:{};o=Mtt(t,u,a)}}s||(s=new qT);var f=s.get(t);if(f)return f;s.set(t,o),Btt(t)?t.forEach(function(g){o.add($T(g,e,n,g,t,s))}):Ott(t)&&t.forEach(function(g,v){o.set(v,$T(g,e,n,v,t,s))});var p=c?l?Cue:aF:l?xH:yH,m=d?void 0:p(t);return sZe(m||t,function(g,v){m&&(v=g,g=t[v]),fH(o,v,$T(g,e,n,v,t,s))}),o}var Oue=$T,unt=1,dnt=4;function hnt(t){return Oue(t,unt|dnt)}var yR=hnt,fnt="__lodash_hash_undefined__";function pnt(t){return this.__data__.set(t,fnt),this}var mnt=pnt;function gnt(t){return this.__data__.has(t)}var vnt=gnt;function y2(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new gR;++e<n;)this.add(t[e])}y2.prototype.add=y2.prototype.push=mnt;y2.prototype.has=vnt;var ynt=y2;function xnt(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var bnt=xnt;function wnt(t,e){return t.has(e)}var _nt=wnt,Snt=1,Ent=2;function Mnt(t,e,n,i,r,s){var o=n&Snt,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),d=s.get(e);if(c&&d)return c==e&&d==t;var u=-1,h=!0,f=n&Ent?new ynt:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var p=t[u],m=e[u];if(i)var g=o?i(m,p,u,e,t,s):i(p,m,u,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(f){if(!bnt(e,function(v,y){if(!_nt(f,y)&&(p===v||r(p,v,n,i,s)))return f.push(y)})){h=!1;break}}else if(!(p===m||r(p,m,n,i,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var Lue=Mnt;function Ant(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}var Tnt=Ant;function Cnt(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var Pnt=Cnt,Dnt=1,Rnt=2,Ont="[object Boolean]",Lnt="[object Date]",Int="[object Error]",knt="[object Map]",Nnt="[object Number]",Bnt="[object RegExp]",znt="[object Set]",Fnt="[object String]",Unt="[object Symbol]",Vnt="[object ArrayBuffer]",Hnt="[object DataView]",$K=vl?vl.prototype:void 0,jI=$K?$K.valueOf:void 0;function jnt(t,e,n,i,r,s,o){switch(n){case Hnt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Vnt:return!(t.byteLength!=e.byteLength||!s(new v2(t),new v2(e)));case Ont:case Lnt:case Nnt:return hH(+t,+e);case Int:return t.name==e.name&&t.message==e.message;case Bnt:case Fnt:return t==e+"";case knt:var a=Tnt;case znt:var l=i&Dnt;if(a||(a=Pnt),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=Rnt,o.set(t,e);var d=Lue(a(t),a(e),i,r,s,o);return o.delete(t),d;case Unt:if(jI)return jI.call(t)==jI.call(e)}return!1}var Gnt=jnt,Wnt=1,qnt=Object.prototype,$nt=qnt.hasOwnProperty;function Xnt(t,e,n,i,r,s){var o=n&Wnt,a=aF(t),l=a.length,c=aF(e),d=c.length;if(l!=d&&!o)return!1;for(var u=l;u--;){var h=a[u];if(!(o?h in e:$nt.call(e,h)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++u<l;){h=a[u];var v=t[h],y=e[h];if(i)var x=o?i(y,v,h,e,t,s):i(v,y,h,t,e,s);if(!(x===void 0?v===y||r(v,y,n,i,s):x)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(t),s.delete(e),m}var Ynt=Xnt,Knt=1,XK="[object Arguments]",YK="[object Array]",PA="[object Object]",Znt=Object.prototype,KK=Znt.hasOwnProperty;function Qnt(t,e,n,i,r,s){var o=gu(t),a=gu(e),l=o?YK:D_(t),c=a?YK:D_(e);l=l==XK?PA:l,c=c==XK?PA:c;var d=l==PA,u=c==PA,h=l==c;if(h&&g2(t)){if(!g2(e))return!1;o=!0,d=!1}if(h&&!d)return s||(s=new qT),o||vue(t)?Lue(t,e,n,i,r,s):Gnt(t,e,l,n,i,r,s);if(!(n&Knt)){var f=d&&KK.call(t,"__wrapped__"),p=u&&KK.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new qT),r(m,g,n,i,s)}}return h?(s||(s=new qT),Ynt(t,e,n,i,r,s)):!1}var Jnt=Qnt;function Iue(t,e,n,i,r){return t===e?!0:t==null||e==null||!zd(t)&&!zd(e)?t!==t&&e!==e:Jnt(t,e,n,i,Iue,r)}var eit=Iue;function tit(t,e){return t!=null&&e in Object(t)}var nit=tit;function iit(t,e,n){e=kx(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=vR(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&pH(r)&&dH(o,r)&&(gu(t)||gH(t)))}var rit=iit;function sit(t,e){return t!=null&&rit(t,e,nit)}var oit=sit,ait=function(){return fc.Date.now()},GI=ait,lit="Expected a function",cit=Math.max,uit=Math.min;function dit(t,e,n){var i,r,s,o,a,l,c=0,d=!1,u=!1,h=!0;if(typeof t!="function")throw new TypeError(lit);e=EK(e)||0,ac(n)&&(d=!!n.leading,u="maxWait"in n,s=u?cit(EK(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function f(E){var A=i,S=r;return i=r=void 0,c=E,o=t.apply(S,A),o}function p(E){return c=E,a=setTimeout(v,e),d?f(E):o}function m(E){var A=E-l,S=E-c,C=e-A;return u?uit(C,s-S):C}function g(E){var A=E-l,S=E-c;return l===void 0||A>=e||A<0||u&&S>=s}function v(){var E=GI();if(g(E))return y(E);a=setTimeout(v,m(E))}function y(E){return a=void 0,h&&i?f(E):(i=r=void 0,o)}function x(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function b(){return a===void 0?o:y(GI())}function w(){var E=GI(),A=g(E);if(i=arguments,r=this,l=E,A){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return w.cancel=x,w.flush=b,w}var MH=dit;function hit(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var fit=hit;function pit(t,e){return e.length<2?t:bue(t,JJe(e,0,-1))}var mit=pit;function git(t,e){return eit(t,e)}var AH=git;function vit(t,e){return e=kx(e,t),t=mit(t,e),t==null||delete t[vR(fit(e))]}var yit=vit;function xit(t){return ZJe(t)?void 0:t}var bit=xit,wit=1,_it=2,Sit=4,Eit=_ue(function(t,e){var n={};if(t==null)return n;var i=!1;e=cue(e,function(s){return s=kx(s,t),i||(i=s.length>1),s}),LS(t,Cue(t),n),i&&(n=Oue(n,wit|_it|Sit,bit));for(var r=e.length;r--;)yit(n,e[r]);return n}),dF=Eit;function Mit(t,e,n,i){if(!ac(t))return t;e=kx(e,t);for(var r=-1,s=e.length,o=s-1,a=t;a!=null&&++r<s;){var l=vR(e[r]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(r!=o){var d=a[l];c=i?i(d,l,a):void 0,c===void 0&&(c=ac(d)?d:dH(e[r+1])?[]:{})}fH(a,l,c),a=a[l]}return t}var Ait=Mit;function Tit(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=bue(t,o);n(a,o)&&Ait(s,kx(o,t),a)}return s}var Cit=Tit;function Pit(t,e){return Cit(t,e,function(n,i){return oit(t,i)})}var Dit=Pit,Rit=_ue(function(t,e){return t==null?{}:Dit(t,e)}),R_=Rit,Oit="Expected a function";function Lit(t,e,n){var i=!0,r=!0;if(typeof t!="function")throw new TypeError(Oit);return ac(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),MH(t,e,{leading:i,maxWait:e,trailing:r})}var Iit=Lit;function kit(t){for(let e of Object.keys(t))t[e]===void 0&&delete t[e];return t}function ag(t,e){return Object.setPrototypeOf(t,e),t}var Nit=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),Bit=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),zit=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||xR&&"ontouchend"in document,Fit=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Uit=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,Vit=()=>{if(typeof window>"u")return!1;let t=navigator.userAgent,e=navigator.vendor;return/Safari/i.test(t)&&/Apple Computer/.test(e)},Hit=()=>{if(typeof window>"u")return null;let t=navigator.userAgent.match(/Version\/(\d+\.\d)/);return t&&t[1]};Nit();var xR=Bit(),kue=zit(),jit=Fit(),ua=Uit(),ZK=Vit(),QK=Number(Hit());function Nue(t){return Array.isArray(t)?t:[t]}function Git(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}function DA(t){return xR?t.metaKey:t.ctrlKey}var Nt=[],x2={},Lb={},XT={};function Bue(t){Nt.includes(t)||Nt.push(t)}function Z0(t){delete x2[t.pointerId];for(let e=0;e<Nt.length;e++)if(Nt[e].pointerId===t.pointerId){Nt.splice(e,1);break}}function Wit(){Nt.splice(0,Nt.length)}function b2(t){if(t.pointerType!=="touch")return;let e=x2[t.pointerId];e===void 0&&(e={x:0,y:0},x2[t.pointerId]=e),e.x=t.pageX,e.y=t.pageY}function WI(t){let e=t.pointerId===Nt[0].pointerId?Nt[1]:Nt[0];return x2[e.pointerId]}function zue(t){Lb[t.key]=!0,XT[t.key]=XT[t.key]===void 0?1:XT[t.key]+1}function Fue(t){if(xR&&Lb.Meta)for(let e in Lb)Lb[e]=!1;else Lb[t.key]=!1;XT={}}function qit(t){t.addEventListener("pointerdown",Bue,!0),t.addEventListener("pointerdown",b2,!0),t.addEventListener("pointermove",b2,!0),t.addEventListener("pointerup",Z0,!0),t.addEventListener("pointercancel",Z0,!0),t.addEventListener("pointerleave",Z0,!0),window.addEventListener("keydown",zue,!0),window.addEventListener("keyup",Fue,!0)}function $it(t){t.removeEventListener("pointerdown",Bue,!0),t.removeEventListener("pointerdown",b2,!0),t.removeEventListener("pointermove",b2,!0),t.removeEventListener("pointerup",Z0,!0),t.removeEventListener("pointercancel",Z0,!0),t.removeEventListener("pointerleave",Z0,!0),window.removeEventListener("keydown",zue,!0),window.removeEventListener("keyup",Fue,!0)}var Uue,Xit=new Promise(t=>{Uue=t}),JK=!1;async function Yit(){if(JK)return;let t="https://unpkg.com/@splinetool/navmesh-wasm@0.9.373/build",[e,n]=await Promise.all([TS(()=>import("./navmesh-b38fcedb.js"),[]),fetch(`${t}/navmesh.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});Uue(r),JK=!0}var Vue,Kit=new Promise(t=>{Vue=t}),eZ=!1;async function Zit(){if(eZ)return;let t=await TS(()=>import("./physics-dee4de67.js"),[]);await t.init(),Vue(t),eZ=!0}var mr=class{modifyById(t,e){let n=this;if(n[t]===void 0)throw new Error("not expected");{let i={...n,[t]:e};return Object.setPrototypeOf(i,mr.prototype),i}}add(t,e){var n;return((n=this.runOp({type:1,id:t,data:e}))==null?void 0:n.data)??this}runOp(t){let e=this;if(t.type===1){let n=e[t.id],i;n===void 0?i={type:2,id:t.id}:i={type:1,id:t.id,data:n};let{id:r,data:s}=t,o={...e,[r]:s};return Object.setPrototypeOf(o,mr.prototype),{data:o,actual:t,reverse:i}}else if(t.type===2){let{id:n}=t,i=e[n];if(i===void 0)return null;{let r={...e};return Object.setPrototypeOf(r,mr.prototype),delete r[n],{data:r,actual:t,reverse:{type:1,id:n,data:i}}}}return null}};function TH(t){if(t.deepFreeze!==void 0){t.deepFreeze(t);return}let e=Object.getOwnPropertyNames(t);for(let n of e){let i=t[n];i&&typeof i=="object"&&TH(i)}return Object.freeze(t)}function Qit(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}var Hue=class extends Error{};function qI(t){let e={...t};return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}function sf(t,e,n){if(t===void 0?e===void 0?(t=0,e=10):t=e-10:e===void 0&&(e=t+10),t>e){let s=t;t=e,e=s}let i=[],r=1/(n+1);for(let s=0;s<n;s++){let o=t+(e-t)*(s+.75+Math.random()*.5)*r;i.push(o)}return i}function CH(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array}function Jit(){return typeof process<"u"}function jue(t,e){for(let n of t)e(n.id,n.data)!==!0&&jue(n.children,e)}function Gue(t,e){if(e(t.id,t.data)!==!0)for(let n of t.children)Gue(n,e)}var Bo=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Bo.prototype)}deepFreeze(){let t=0;for(;t<this.length;)TH(this[t]),t++}fillCaches0(t,e){this.objCaches.set(t.id,t),this.parentCaches.set(t.id,e);for(let n of t.children)this.fillCaches0(n,t.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let t of this)this.fillCaches0(t,null)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}nonExistOrDescendantOf(t,e){if(!this.has(t))return!0;for(;t;){let n=this.parent(t);if(n===e)return!0;t=n}return!1}isDescendantOf(t,e){for(;t;){let n=this.parent(t);if(n===e)return!0;t=n}return!1}data(t){var e;return(e=this.get(t))==null?void 0:e.data}has(t){return this.childrenOf(t)!==void 0}get(t){return this.fillCaches(),this.objCaches.get(t)}childrenOf(t){var e;return t===null?this:(e=this.get(t))==null?void 0:e.children}traverseFrom(t,e){if(t===null)this.traverse(e);else{let n=this.get(t);n&&Gue(n,e)}}traverse(t){jue(this,t)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(t){return this.fillCaches(),this.parentCaches.get(t)}childrenArray(t){return t===null?this:this.get(t).children}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this.parent(t),i=this.childrenArray(n),r=i.findIndex(o=>o.id===t);if(r<0)throw new Error("not expected");let s=i[r];return i=[...i],i[r]={...s,data:e},this.modifyArrayBy(n,i)}}modifyArrayBy(t,e){let n=t,i=e;for(;n!==null;){let s=i,o=n;if(n=this.parent(n),n===void 0)throw new Error;i=this.childrenArray(n);let a=i.findIndex(l=>l.id===o);if(a<0)throw new Error;i=[...i],i[a]={...i[a],children:s}}Object.setPrototypeOf(i,Bo.prototype);let r=i;return r.fillCaches(),r}runOp(t){switch(t.type){case 7:return this.addOp(t);case 8:return this.deleteOp(t);case 9:return this.moveOp(t)}return null}checkDuplicatedIdRec({id:t,children:e}){if(this.get(t)!==void 0)return!0;for(let n of e)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(t){let{parent:e,fi:n,id:i,data:r,children:s}=t;if(e!==null&&this.get(e)===void 0||this.checkDuplicatedIdRec(t))return null;{let o=e,a=this.childrenArray(o),l={fi:n,id:i,data:r,children:s};return a=[...a,l],a.sort((c,d)=>c.fi-d.fi),t.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:t,reverse:{type:8,id:i}}}}deleteOp(t){let{id:e}=t;if(this.get(e)===null)return null;{let n=this.parent(e);if(n===void 0)return null;let i=this.childrenArray(n),r=i.findIndex(o=>o.id===e);t.localIndex=r,i=[...i];let s=i.splice(r,1)[0];return{data:this.modifyArrayBy(n,i),actual:t,reverse:{type:7,...s,parent:n}}}}moveOp(t){let{parent:e,fi:n,id:i}=t;if(e!==null&&this.get(e)===void 0)return this.deleteOp({type:8,id:i});if(e!==null){let u=e;for(;u!==null;){if(u===void 0)throw new Error;if(u===i)throw new Hue("cyclic tree");u=this.parent(u)}}let r=this.parent(i);if(r===void 0)return null;let s=r,o=this.childrenArray(r),a=o.findIndex(u=>u.id===i);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(r,o);r=e,o=c.childrenArray(r);let d=l.fi;return l={...l,fi:n},o=[...o,l],o.sort((u,h)=>u.fi-h.fi),t.localIndex=o.indexOf(l),c=c.modifyArrayBy(r,o),{data:c,actual:t,reverse:{type:9,parent:s,fi:d,id:i}}}previous(t,e){if(e===null){let i=this.childrenArray(t);return i.length===0?null:i[i.length-1].id}let n=null;for(let i of this.childrenArray(t)){if(i.id===e)return n;n=i.id}return null}traverseSortNext(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),i=n.findIndex(r=>r.id===t)+1;if(i<n.length)return n[i].id;if(e)return this.traverseSortNext(e)}}sortNext(t){let e=this.childrenArray(t);return e.length>0?e[0].id:this.traverseSortNext(t)}traverseSortPrevious(t){let e=this.childrenArray(t);return e.length>0?this.traverseSortPrevious(e[e.length-1].id):t}sortPrevious(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),i=n.findIndex(r=>r.id===t)-1;return i>=0?this.traverseSortPrevious(n[i].id):e}}getAllSorted(t){let e=[];for(let n of t){let i=this.getWithSortKey(n.id);i!==void 0&&e.push({...n,...i})}e.sort((n,i)=>Qit(n.sortKey,i.sortKey));for(let n of e)delete n.sortKey;return e}getWithSortKey(t){var e=t;let n=[],i=this.get(e),r=i;if(i!==void 0){for(;e;)n.splice(0,0,i.fi),e=this.parent(e),e!==null&&(i=this.get(e));return{...r,sortKey:n}}}insertBeforeHelper(t,e,n){return this.insertAfterHelper(t,this.previous(t,e),n)}insertAfterHelper(t,e,n){let i=this.childrenArray(t);if(e===null){if(i.length===0)return sf(0,n,n);{let r=i[0].fi;return sf(r-n,r,n)}}else{let r=this.get(e);if(r===void 0||this.parent(e)!==t)throw new Error("illegal args");let s=i.find(o=>o.fi>r.fi);if(s===void 0){let o=i[i.length-1].fi;return sf(o,o+n,n)}else return sf(r.fi,s.fi,n)}}},w2;(t=>{function e(n,i){if(i.type!==0)return null;if(Array.isArray(n)){let r=i.props,s={},o=[...n],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=r[l],a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}else{let r=i.props,s={},o={...n},a=!1;if(r)for(let l of Object.keys(r)){s[l]=o[l];let c=r[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}}t.runOp=e})(w2||(w2={}));var ln=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ln.prototype)}deepFreeze(){let t=0;for(;t<this.length;)TH(this[t]),t++}fillCaches0(t){this.objCaches.set(t.id,t)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let t of this)this.fillCaches0(t)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}data(t){var e;return(e=this.get(t))==null?void 0:e.data}get(t){return this.fillCaches(),this.objCaches.get(t)}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this,i=n.findIndex(s=>s.id===t);if(i<0)throw new Error("not expected");let r=n[i];return n=[...n],n[i]={...r,data:e},this.modifyArrayBy(n)}}modifyArrayBy(t){Object.setPrototypeOf(t,ln.prototype);let e=t;return Jit()||e.fillCaches(),e}runOp(t){switch(t.type){case 4:return this.addOp(t);case 5:return this.deleteOp(t);case 6:return this.moveOp(t)}return null}addOp(t){let{fi:e,id:n,data:i}=t,r=this,s={fi:e,id:n,data:i};return r=[...r,s],r.sort((o,a)=>o.fi-a.fi),t.localIndex=r.indexOf(s),{data:this.modifyArrayBy(r),actual:t,reverse:{type:5,id:n}}}deleteOp(t){let{id:e}=t,n=this,i=n.findIndex(s=>s.id===e);if(i===-1)return null;t.localIndex=i,n=[...n];let r=n.splice(i,1)[0];return{data:this.modifyArrayBy(n),actual:t,reverse:{type:4,...r}}}moveOp(t){let{fi:e,id:n}=t,i=this;i=[...i];let r=i.findIndex(a=>a.id===n);if(r===-1)return null;let s=i[r].fi,o={...i[r],fi:e};return i[r]=o,i.sort((a,l)=>a.fi-l.fi),t.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:t,reverse:{type:6,fi:s,id:n}}}previous(t){if(t===null)return this.length===0?null:this[this.length-1].id;let e=null;for(let n of this){if(n.id===t)return e;e=n.id}return null}insertBeforeHelper(t,e){return this.insertAfterHelper(this.previous(t),e)}insertAfterHelper(t,e){let n=this;if(t===null){if(n.length===0)return sf(0,e,e);{let i=n[0].fi;return sf(i-e,i,e)}}else{let i=this.get(t);if(i===void 0)throw new Error("illegal args");let r=n.find(s=>s.fi>i.fi);if(r===void 0){let s=n[n.length-1].fi;return sf(s,s+e,e)}else return sf(i.fi,r.fi,e)}}};function jy(t){return t&&typeof t=="object"&&t instanceof ds}var ds=class{unusedFunOverridesTable(t){}runOp(t){let e=[],n=this,i=0,r={};for(;i<t.path.length;){if(e.push(n),n=n===void 0?void 0:n[t.path[i]],n!==void 0&&!jy(n))return null;i+=1}n=n?qI(n):new ds;for(let[a,l]of Object.entries(t.props)){let c=n[a];r[a]=c,l===void 0?delete n[a]:n[a]=l}for(;i>0;){if(Object.keys(n).length===0){let a=e[i-1];a&&(n=qI(a),delete n[t.path[i-1]])}else{let a=e[i-1];if(a){let l=qI(a);l[t.path[i-1]]=n,n=l}else{let l=new ds;l[t.path[i-1]]=n,n=l}}i-=1}let s=Object.setPrototypeOf(n,ds.prototype),o={...t,props:r};return{data:s,actual:t,reverse:o}}},Fm;(t=>{function e(r,s){return O_(r,s)??r}t.apply=e;function n(r,s){return DH(r,s)}t.merge=n;function i(r,s){let o=0,a=s.path,l=r;for(;o<a.length&&l!==void 0;){if(l=cu.zoomOnce(l,a[o]),l===void 0)return s;if(!jy(l))return;o+=1}if(l===void 0)return s;if(jy(l))if(s.type===0){let c={...s.props};for(let d of Object.keys(l))delete c[d];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=PH([s],l);return c?(console.log(c),c):s}else return s}t.filterOp=i})(Fm||(Fm={}));function PH(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=O_(r.data,e[s]);if(n=n||o!==void 0,o===void 0&&(o=r.data),r.children){let a=PH(r.children,e);return a!==void 0?n=!0:a=r.children,{...r,id:s,data:o,children:a}}else return{...r,id:s,data:o}});if(n)return i}function ert(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=O_(r.data,e[s]);return n=n||o!==void 0,o===void 0&&(o=r.data),{...r,id:s,data:o}});if(n)return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}function O_(t,e){if(!jy(e))return e;if(t instanceof Bo){let n=PH(t,e);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n}else{if(t instanceof ln)return ert(t,e);if(Array.isArray(t)){let n=!1,i=t.map((r,s)=>{let o=O_(r,e[s]);return n=n||o!==void 0,o===void 0&&(o=r),o});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else{if(t instanceof ds)return DH(t,e);if(t&&typeof t=="object"){let n={},i=!1;for(let[r,s]of Object.entries(t)){let o=O_(s,e[r]);i=i||o!==void 0,o===void 0&&(o=s),n[r]=o}return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n):void 0}}}}function DH(t,e){if(t===void 0)return e;if(e===void 0)return t;if(!jy(e))return e;if(!jy(t))return Fm.apply(t,e);let n=new Set;for(let r of Object.keys(t))n.add(r);for(let r of Object.keys(e))n.add(r);let i=new ds;for(let r of n){let s=DH(t===void 0?void 0:t[r],e===void 0?void 0:e[r]);i[r]=s}return i}function trt(t,e){let n={cur:[],result:[],len:0};return t=L_(t,e,n)??t,[t,n.result]}function _2(t,e){return t===null?null:(t.cur[t.len]=e,t.len+=1,t)}function S2(t){t&&(t.len-=1)}function nrt(t){if(t===null)return null;t.result.push(t.cur.slice(0,t.len))}function Wue(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=L_(s.data,e,_2(n,o));S2(n),i=i||l!==void 0,l===void 0&&(l=s.data);let c=Wue(s.children,e,n);return c!==void 0?i=!0:c=s.children,{...s,id:o,data:l,children:c}});if(i)return r}function irt(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=L_(s.data,e,_2(n,o));return S2(n),i=i||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r}function L_(t,e,n){if(t instanceof Bo){let i=Wue(t,e,n);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}else{if(t instanceof ln)return irt(t,e,n);if(Array.isArray(t)){let i=!1,r=t.map((s,o)=>{let a=L_(s,e,_2(n,o));return S2(n),i=i||a!==void 0,a===void 0&&(a=s),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r):void 0}else if(t&&typeof t=="object"&&!CH(t)){let i={},r=!1;for(let[s,o]of Object.entries(t))if(s!=="name"&&s!=="text"){let a=e[s];if(typeof a=="string"){if(n!==null)throw new Error("not supported");r=!0,s=a}let l=L_(o,e,_2(n,s));S2(n),r=r||l!==void 0,l===void 0&&(l=o),i[s]=l}else i[s]=o;return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else if(typeof t=="string"){let i=e[t];if(i!==void 0){if(t.length!==36)throw new Error("for now you should only call this method when the key is a uuid");nrt(n)}return i}else return}}var hF;(t=>{function e(n,i){let r=cu.zoom(i,n.path);if(typeof r=="object"){let s={};for(let o of Object.keys(n.props))s[o]=r[o];return{...n,props:s}}else return{...n,props:{}}}t.replaceProps=e})(hF||(hF={}));var da;(t=>{function e(l,c){return{...l,path:l.path.slice(c)}}t.drop=e;function n(l,c){var d;return((d=i(l,c))==null?void 0:d.data)??l}t.applySimple=n;function i(l,c){var h,f;let d=c.path;for(var u=[];;){let p;if(l instanceof ds&&c.type===0&&(p=l.runOp({...c,path:d.slice(u.length)}),p===null&&(p=void 0)),p===void 0&&u.length===d.length&&(l instanceof Bo||l instanceof ln||l instanceof mr?p=l.runOp(c):p=w2.runOp(l,c)),p!==void 0)if(p!==null){let v=p.data;for(let y=u.length-1;y>=0;y--){let x=d[y],b=u[y];if(b instanceof Bo){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof ln){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof mr){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof ds){let w={...b,[x]:v};v=Object.setPrototypeOf(w,ds.prototype)}else if(typeof b=="object")if(Array.isArray(b)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let w=v;v=[...b],v[x]=w}else v={...b,[x]:v};else return null}return{data:v,actual:{...p.actual,path:d},reverse:{...p.reverse,path:d}}}else return null;let m=d[u.length],g;if(l instanceof Bo){if(typeof m=="number")throw new Error("");g=(h=l.get(m))==null?void 0:h.data}else if(l instanceof ln){if(typeof m=="number")throw new Error("");g=(f=l.get(m))==null?void 0:f.data}else l!==null&&(g=l[m]);if(g!==void 0)u.push(l),l=g;else return null}}t.apply=i;function r(l,c){for(let d=0;d<l.length&&d<c.length;d++)if(l[d]!==c[d])return!0;return!1}t.pathDisjoint=r;function s(l,c){if(l.length!==c.length)return!1;for(let d=0;d<l.length;d++)if(l[d]!==c[d])return!1;return!0}t.pathEq=s;function o(l,c){return r(l.path,c.path)}t.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(d=>c.props[d]!==void 0):!1}t.subsumed=a})(da||(da={}));var tZ;(t=>{function e(){return[]}t.empty=e;function n(c,d){let u=[];for(let h of c){let[f,...p]=h.path;f===d&&u.push({...h,path:p})}return u}t.removePrefix=n;function i(c,d){return c.map(u=>({...u,path:[d,...u.path]}))}t.addPrefix=i;function r(c,d){return[...c,...d]}t.concat=r;function s(c,d){return[...c.filter(u=>!d.some(h=>da.subsumed(u,h))),...d]}t.compress=s;function o(c,d){return c.every(u=>d.every(h=>da.commutative(u,h)))}t.commutative=o;function a(c,d){for(let u of d){let h=l(c,u);h!==null&&(c=h.data)}return c}t.applyAll=a;function l(c,d){var u=c;let h=[],f=[];for(let p of d)try{if(p.type===3){let m=cu.zoom(u,[...p.path,p.id]),g=da.apply(u,{...p,type:2});if(g!==null){u=g.data;let[v,y]=trt(u,{[p.id]:m});u=v;for(let x of y){let b=x[x.length-1];x.splice(x.length-1,1),h.push({type:0,path:x,props:{[b]:m}}),f.push({type:0,path:x,props:{[b]:p.id}})}f.push(g.reverse),h.push(g.actual)}}else{let m=da.apply(u,p);m!==null&&(h.push(m.actual),u=m.data,f.push(m.reverse))}}catch(m){if(m instanceof Hue)return null;throw m}return{data:u,actual:h,reverse:f.reverse()}}t.apply=l})(tZ||(tZ={}));var que=Symbol(),rrt=Symbol(),bR=Symbol(),IS=class{reportOp(t,e,n=[]){let i=this;if(e===null)return;i._current=e.data;let r=n;for(;!(i instanceof Xue);){let s=i._path,o=i._current;if(s!==""&&r.splice(0,0,s),i=i._parent,i===null)return;i.update(s,o)}i.push(r,t,e.actual,e.reverse)}deleteChildren(t){if(this._children){let e=this._children[t];if(e){let n=e[bR];n&&n(),delete this._children[t]}}}},srt=class extends IS{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){if(Array.isArray(this._current)){if(typeof t=="string"&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid path");this._current=[...this._current],this._current[t]=e}else this._current={...this._current,[t]:e}}runOp(t){this.reportOp(t,w2.runOp(this._current,t),t.path)}},ort=class extends IS{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){this._current={...this._current,[t]:e},Object.setPrototypeOf(this._current,mr.prototype)}runOp(t){this.reportOp(t,this._current.runOp(t))}},$ue={get(t,e){if(e===bR)return()=>{t._parent=null};if(e===que)return t._current;if(e===rrt)return t;let{_current:n,_children:i}=t;if(e==="push"&&Array.isArray(n))throw new Error("not supported to expand array");let r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=n[e],o=wR(t,e,s);return o!==s?(i===void 0&&(i={},t._children=i),i[e]=o,o):s},has(t,e){return e in t._current},ownKeys(t){return Reflect.ownKeys(t._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(t){return Object.getPrototypeOf(t._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(t,e){let n=t._current,i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:n[e]}}},art={...$ue,set(t,e,n){let i={type:0,props:{[e]:zs(n)??n}};return t.deleteChildren(e),t.runOp(i),!0},deleteProperty(t,e){let n={type:0,props:{[e]:void 0}};return t.deleteChildren(e),t.runOp(n),!0}},lrt={...$ue,set(t,e,n){return n===void 0?this.deleteProperty(t,e):(t.deleteChildren(e),t.runOp({type:1,id:e,data:n})),!0},deleteProperty(t,e){return t.runOp({type:2,id:e}),!0}},RH=class extends IS{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[bR]=()=>{this._parent=null}}unproxy(){return this._current}update(t,e){this._current=this._current.modifyById(t,e)}runOp(t){this.reportOp(t,this._current.runOp(t))}randomId(){return this._current.randomId()}isDescendantOf(t,e){return this._current.isDescendantOf(t,e)}childrenOf(t){return this._current.childrenOf(t)}traverse(t){return this._current.traverse(t)}get(t){return this._current.get(t)}parent(t){return this._current.parent(t)}traverse(t){this._current.traverse((e,n)=>{t(e,this.data(e))})}data(t){var o;let{_current:e,_children:n}=this,i=n===void 0?void 0:n[t];if(i!==void 0)return i;let r=(o=e.get(t))==null?void 0:o.data,s=wR(this,t,r);return s!==r?(n===void 0&&(n={},this._children=n),n[t]=s,s):r}add(t,e,n,i,r){this.runOp({type:7,parent:t,fi:e,id:n,data:i,children:r})}move(t,e,n){this.runOp({type:9,parent:t,fi:e,id:n})}insertAfter(t,e,n){let i=this._current.insertAfterHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(t,i[r],s.id,s.data,s.children)}}insertBefore(t,e,n){let i=this._current.insertBeforeHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(t,i[r],s.id,s.data,s.children)}}moveAfter(t,e,n){let i=this._current.insertAfterHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(t,i[r],s)}}moveBefore(t,e,n){let i=this._current.insertBeforeHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(t,i[r],s)}}delete(t){this.deleteChildren(t),this.runOp({type:8,id:t})}sortNext(t){return this._current.sortNext(t)}sortPrevious(t){return this._current.sortPrevious(t)}getAllSorted(t){return this._current.getAllSorted(t)}},OH=class extends IS{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[bR]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(t){let e=this.length;for(let n=0;n<e;n++){let i=this._current[n].id,r=this._current[n].fi;t(this.data(this._current[n].id),i,r)}}find(t){let e=this.length;for(let n=0;n<e;n++){let i=this._current[n].id;if(t(this.data(i),i))return this.get(i)}}update(t,e){this._current=this._current.modifyById(t,e)}randomId(){return this._current.randomId()}get(t){return{...this._current.get(t),data:this.data(t)}}data(t){var o;let{_current:e,_children:n}=this,i=n===void 0?void 0:n[t];if(i!==void 0)return i;let r=(o=e.get(t))==null?void 0:o.data,s=wR(this,t,r);return s!==r?(n===void 0&&(n={},this._children=n),n[t]=s,s):r}runOp(t){this.reportOp(t,this._current.runOp(t))}add(t,e,n){this.runOp({type:4,fi:t,id:e,data:n})}move(t,e){this.runOp({type:6,fi:t,id:e})}insertAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.add(n[i],r.id,r.data)}}insertBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.add(n[i],r.id,r.data)}}moveAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.move(n[i],r)}}moveBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.move(n[i],r)}}delete(t){this.deleteChildren(t),this.runOp({type:5,id:t})}};function $I(t,e,n){if(t.length>0){let i=t[t.length-1];if(i.type===0&&e.type===0&&cu.equal(i.path,n)){Object.assign(i.props,e.props);return}}t.push({...e,path:n})}var Xue=class extends IS{constructor(t){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=t}update(t,e){if(t!=="")throw new Error("");this._current=e}push(t,e,n,i){$I(this.ts,e,t),$I(this.actual,n,t),$I(this.reverse,i,t)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function wR(t,e,n){return n instanceof Bo?new RH(t,e,n):n instanceof ln?new OH(t,e,n):n instanceof mr?new Proxy(new ort(t,e,n),lrt):n!==null&&typeof n=="object"?CH(n)?n:new Proxy(new srt(t,e,n),art):n}function Yue(t){let e=new Xue(t);return[wR(e,"",t),e]}function E2(t,e){let[n,i]=Yue(t);return e(n),i.result()}function zs(t){return t instanceof RH||t instanceof OH?t._current:t!==null&&typeof t=="object"?t[que]:t}var cu;(t=>{function e(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}t.equal=e;function n(s,o,a){let l=r(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(d=>{delete c[d]}),c}else return o}t.removeOverridden=n;function i(s,o){if((s instanceof Bo||s instanceof RH)&&typeof o=="string"||(s instanceof ln||s instanceof OH)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object"&&s!==null)return s[o]}t.zoomOnce=i;function r(s,o,a=0){for(;a<o.length&&s!==void 0;)s=i(s,o[a]),a+=1;return s}t.zoom=r})(cu||(cu={}));function crt(t,e){let n=[];if(e.length===t.length)for(var i=0;i<t.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}function Xh(t,e){let n=[];if(e.length<=t.length)for(var i=0;i<e.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}var Kue=class{},nZ=class extends Kue{constructor(t){super(),this.id=t}},iZ=class extends Kue{constructor(t){super(),this.data=t}},fF;try{fF=new TextDecoder}catch{}var mt,Cf,Be=0,Mo={},Rn,of,Ka=0,Kc=0,ta,Ed,ao=[],Nn,rZ={useRecords:!1,mapsAsObjects:!0},Zue=class{},Que=new Zue;Que.name="MessagePack 0xC1";var Gy=!1,M2=class{constructor(t){t&&(t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(mt)return rde(()=>(mF(),this?this.unpack(t,e):M2.prototype.unpack.call(rZ,t,e)));Cf=e>-1?e:t.length,Be=0,Kc=0,of=null,ta=null,mt=t;try{Nn=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(n){throw mt=null,t instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof M2){if(Mo=this,this.structures)return Rn=this.structures,RA();(!Rn||Rn.length>0)&&(Rn=[])}else Mo=rZ,(!Rn||Rn.length>0)&&(Rn=[]);return RA()}unpackMultiple(t,e){let n,i=0;try{Gy=!0;let r=t.length,s=this?this.unpack(t,r):SR.unpack(t,r);if(e){for(e(s);Be<r;)if(i=Be,e(RA())===!1)return}else{for(n=[s];Be<r;)i=Be,n.push(RA());return n}}catch(r){throw r.lastPosition=i,r.values=n,r}finally{Gy=!1,mF()}}_mergeStructures(t,e){t=t||[];for(let n=0,i=t.length;n<i;n++){let r=t[n];r&&(r.isShared=!0,n>=32&&(r.highByte=n-32>>5))}t.sharedLength=t.length;for(let n in e||[])if(n>=0){let i=t[n],r=e[n];r&&(i&&((t.restoreStructures||(t.restoreStructures=[]))[n]=i),t[n]=r)}return this.structures=t}decode(t,e){return this.unpack(t,e)}};function RA(){try{if(!Mo.trusted&&!Gy){let e=Rn.sharedLength||0;e<Rn.length&&(Rn.length=e)}let t=qi();if(Be==Cf)Rn.restoreStructures&&sZ(),Rn=null,mt=null,Ed&&(Ed=null);else if(Be>Cf){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!Gy)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Rn.restoreStructures&&sZ(),mF(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function sZ(){for(let t in Rn.restoreStructures)Rn[t]=Rn.restoreStructures[t];Rn.restoreStructures=null}function qi(){let t=mt[Be++];if(t<160)if(t<128){if(t<64)return t;{let e=Rn[t&63]||Mo.getStructures&&Jue()[t&63];return e?(e.read||(e.read=LH(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,Mo.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[tde()]=qi();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(qi(),qi());return e}else{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=qi();return e}else if(t<192){let e=t-160;if(Kc>=Be)return of.slice(Be-Ka,(Be+=e)-Ka);if(Kc==0&&Cf<140){let n=e<16?IH(e):ede(e);if(n!=null)return n}return pF(e)}else{let e;switch(t){case 192:return null;case 193:return ta?(e=qi(),e>0?ta[1].slice(ta.position1,ta.position1+=e):ta[0].slice(ta.position0,ta.position0-=e)):Que;case 194:return!1;case 195:return!0;case 196:return XI(mt[Be++]);case 197:return e=Nn.getUint16(Be),Be+=2,XI(e);case 198:return e=Nn.getUint32(Be),Be+=4,XI(e);case 199:return Op(mt[Be++]);case 200:return e=Nn.getUint16(Be),Be+=2,Op(e);case 201:return e=Nn.getUint32(Be),Be+=4,Op(e);case 202:if(e=Nn.getFloat32(Be),Mo.useFloat32>2){let n=kH[(mt[Be]&127)<<1|mt[Be+1]>>7];return Be+=4,(n*e+(e>0?.5:-.5)>>0)/n}return Be+=4,e;case 203:return e=Nn.getFloat64(Be),Be+=8,e;case 204:return mt[Be++];case 205:return e=Nn.getUint16(Be),Be+=2,e;case 206:return e=Nn.getUint32(Be),Be+=4,e;case 207:return Mo.int64AsNumber?(e=Nn.getUint32(Be)*4294967296,e+=Nn.getUint32(Be+4)):e=Nn.getBigUint64(Be),Be+=8,e;case 208:return Nn.getInt8(Be++);case 209:return e=Nn.getInt16(Be),Be+=2,e;case 210:return e=Nn.getInt32(Be),Be+=4,e;case 211:return Mo.int64AsNumber?(e=Nn.getInt32(Be)*4294967296,e+=Nn.getUint32(Be+4)):e=Nn.getBigInt64(Be),Be+=8,e;case 212:if(e=mt[Be++],e==114)return uZ(mt[Be++]&63);{let n=ao[e];if(n)return n.read?(Be++,n.read(qi())):n.noBuffer?(Be++,n()):n(mt.subarray(Be,++Be));throw new Error("Unknown extension "+e)}case 213:return e=mt[Be],e==114?(Be++,uZ(mt[Be++]&63,mt[Be++])):Op(2);case 214:return Op(4);case 215:return Op(8);case 216:return Op(16);case 217:return e=mt[Be++],Kc>=Be?of.slice(Be-Ka,(Be+=e)-Ka):drt(e);case 218:return e=Nn.getUint16(Be),Be+=2,Kc>=Be?of.slice(Be-Ka,(Be+=e)-Ka):hrt(e);case 219:return e=Nn.getUint32(Be),Be+=4,Kc>=Be?of.slice(Be-Ka,(Be+=e)-Ka):frt(e);case 220:return e=Nn.getUint16(Be),Be+=2,aZ(e);case 221:return e=Nn.getUint32(Be),Be+=4,aZ(e);case 222:return e=Nn.getUint16(Be),Be+=2,lZ(e);case 223:return e=Nn.getUint32(Be),Be+=4,lZ(e);default:if(t>=224)return t-256;if(t===void 0){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+t)}}}var urt=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function LH(t,e){function n(){if(n.count++>2){let r=t.read=new Function("r","return function(){return {"+t.map(s=>urt.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(qi);return t.highByte===0&&(t.read=oZ(e,t.read)),r()}let i={};for(let r=0,s=t.length;r<s;r++){let o=t[r];i[o]=qi()}return i}return n.count=0,t.highByte===0?oZ(e,n):n}var oZ=(t,e)=>function(){let n=mt[Be++];if(n===0)return e();let i=t<32?-(t+(n<<5)):t+(n<<5),r=Rn[i]||Jue()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=LH(r,t)),r.read()};function Jue(){let t=rde(()=>(mt=null,Mo.getStructures()));return Rn=Mo._mergeStructures(t,Rn)}var pF=_R,drt=_R,hrt=_R,frt=_R;function _R(t){let e;if(t<16&&(e=IH(t)))return e;if(t>64&&fF)return fF.decode(mt.subarray(Be,Be+=t));let n=Be+t,i=[];for(e="";Be<n;){let r=mt[Be++];if(!(r&128))i.push(r);else if((r&224)===192){let s=mt[Be++]&63;i.push((r&31)<<6|s)}else if((r&240)===224){let s=mt[Be++]&63,o=mt[Be++]&63;i.push((r&31)<<12|s<<6|o)}else if((r&248)===240){let s=mt[Be++]&63,o=mt[Be++]&63,a=mt[Be++]&63,l=(r&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(r);i.length>=4096&&(e+=Yr.apply(String,i),i.length=0)}return i.length>0&&(e+=Yr.apply(String,i)),e}function aZ(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=qi();return e}function lZ(t){if(Mo.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[tde()]=qi();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(qi(),qi());return e}}var Yr=String.fromCharCode;function ede(t){let e=Be,n=new Array(t);for(let i=0;i<t;i++){let r=mt[Be++];if((r&128)>0){Be=e;return}n[i]=r}return Yr.apply(String,n)}function IH(t){if(t<4)if(t<2){if(t===0)return"";{let e=mt[Be++];if((e&128)>1){Be-=1;return}return Yr(e)}}else{let e=mt[Be++],n=mt[Be++];if((e&128)>0||(n&128)>0){Be-=2;return}if(t<3)return Yr(e,n);let i=mt[Be++];if((i&128)>0){Be-=3;return}return Yr(e,n,i)}else{let e=mt[Be++],n=mt[Be++],i=mt[Be++],r=mt[Be++];if((e&128)>0||(n&128)>0||(i&128)>0||(r&128)>0){Be-=4;return}if(t<6){if(t===4)return Yr(e,n,i,r);{let s=mt[Be++];if((s&128)>0){Be-=5;return}return Yr(e,n,i,r,s)}}else if(t<8){let s=mt[Be++],o=mt[Be++];if((s&128)>0||(o&128)>0){Be-=6;return}if(t<7)return Yr(e,n,i,r,s,o);let a=mt[Be++];if((a&128)>0){Be-=7;return}return Yr(e,n,i,r,s,o,a)}else{let s=mt[Be++],o=mt[Be++],a=mt[Be++],l=mt[Be++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){Be-=8;return}if(t<10){if(t===8)return Yr(e,n,i,r,s,o,a,l);{let c=mt[Be++];if((c&128)>0){Be-=9;return}return Yr(e,n,i,r,s,o,a,l,c)}}else if(t<12){let c=mt[Be++],d=mt[Be++];if((c&128)>0||(d&128)>0){Be-=10;return}if(t<11)return Yr(e,n,i,r,s,o,a,l,c,d);let u=mt[Be++];if((u&128)>0){Be-=11;return}return Yr(e,n,i,r,s,o,a,l,c,d,u)}else{let c=mt[Be++],d=mt[Be++],u=mt[Be++],h=mt[Be++];if((c&128)>0||(d&128)>0||(u&128)>0||(h&128)>0){Be-=12;return}if(t<14){if(t===12)return Yr(e,n,i,r,s,o,a,l,c,d,u,h);{let f=mt[Be++];if((f&128)>0){Be-=13;return}return Yr(e,n,i,r,s,o,a,l,c,d,u,h,f)}}else{let f=mt[Be++],p=mt[Be++];if((f&128)>0||(p&128)>0){Be-=14;return}if(t<15)return Yr(e,n,i,r,s,o,a,l,c,d,u,h,f,p);let m=mt[Be++];if((m&128)>0){Be-=15;return}return Yr(e,n,i,r,s,o,a,l,c,d,u,h,f,p,m)}}}}}function XI(t){return Mo.copyBuffers?Uint8Array.prototype.slice.call(mt,Be,Be+=t):mt.subarray(Be,Be+=t)}function Op(t){let e=mt[Be++];if(ao[e])return ao[e](mt.subarray(Be,Be+=t));throw new Error("Unknown extension type "+e)}var cZ=new Array(4096);function tde(){let t=mt[Be++];if(t>=160&&t<192){if(t=t-160,Kc>=Be)return of.slice(Be-Ka,(Be+=t)-Ka);if(!(Kc==0&&Cf<180))return pF(t)}else return Be--,qi();let e=(t<<5^(t>1?Nn.getUint16(Be):t>0?mt[Be]:0))&4095,n=cZ[e],i=Be,r=Be+t-3,s,o=0;if(n&&n.bytes==t){for(;i<r;){if(s=Nn.getUint32(i),s!=n[o++]){i=1879048192;break}i+=4}for(r+=3;i<r;)if(s=mt[i++],s!=n[o++]){i=1879048192;break}if(i===r)return Be=i,n.string;r-=3,i=Be}for(n=[],cZ[e]=n,n.bytes=t;i<r;)s=Nn.getUint32(i),n.push(s),i+=4;for(r+=3;i<r;)s=mt[i++],n.push(s);let a=t<16?IH(t):ede(t);return a!=null?n.string=a:n.string=pF(t)}var uZ=(t,e)=>{var n=qi();let i=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let r=Rn[t];return r&&r.isShared&&((Rn.restoreStructures||(Rn.restoreStructures=[]))[t]=r),Rn[t]=n,n.read=LH(n,i),n.read()},nde=typeof self=="object"?self:global;ao[0]=()=>{};ao[0].noBuffer=!0;ao[101]=()=>{let t=qi();return(nde[t[0]]||Error)(t[1])};ao[105]=t=>{let e=Nn.getUint32(Be-4);Ed||(Ed=new Map);let n=mt[Be],i;n>=144&&n<160||n==220||n==221?i=[]:i={};let r={target:i};Ed.set(e,r);let s=qi();return r.used?Object.assign(i,s):(r.target=s,s)};ao[112]=t=>{let e=Nn.getUint32(Be-4),n=Ed.get(e);return n.used=!0,n.target};ao[115]=()=>new Set(qi());var ide=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");ao[116]=t=>{let e=t[0],n=ide[e];if(!n)throw new Error("Could not find typed array for code "+e);return new nde[n](Uint8Array.prototype.slice.call(t,1).buffer)};ao[120]=()=>{let t=qi();return new RegExp(t[0],t[1])};ao[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],n=Be;Be+=e-4,ta=[qi(),qi()],ta.position0=0,ta.position1=0;let i=Be;Be=n;try{return qi()}finally{Be=i}};ao[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function rde(t){let e=Cf,n=Be,i=Ka,r=Kc,s=of,o=Ed,a=ta,l=new Uint8Array(mt.slice(0,Cf)),c=Rn,d=Rn.slice(0,Rn.length),u=Mo,h=Gy,f=t();return Cf=e,Be=n,Ka=i,Kc=r,of=s,Ed=o,ta=a,mt=l,Gy=h,Rn=c,Rn.splice(0,Rn.length,...d),Mo=u,Nn=new DataView(mt.buffer,mt.byteOffset,mt.byteLength),f}function mF(){mt=null,Ed=null,Rn=null}function prt(t){t.unpack?ao[t.type]=t.unpack:ao[t.type]=t}var kH=new Array(147);for(let t=0;t<256;t++)kH[t]=+("1e"+Math.floor(45.15-t*.30103));var SR=new M2({useRecords:!1});SR.unpack;SR.unpackMultiple;SR.unpack;var mrt=new Float32Array(1);new Uint8Array(mrt.buffer,0,4);var YT;try{YT=new TextEncoder}catch{}var A2,NH,ER=typeof Buffer<"u",YI=ER?Buffer.allocUnsafeSlow:Uint8Array,sde=ER?Buffer:Uint8Array,dZ=ER?4294967296:2144337920,Ke,Ji,je=0,Sc,Ec=null,grt=/[\u0080-\uFFFF]/,J1=Symbol("record-id"),ode=class extends M2{constructor(t){super(t),this.offset=0;let e,n,i,r,s,o=0,a=sde.prototype.utf8Write?function(E,A,S){return Ke.utf8Write(E,A,S)}:YT&&YT.encodeInto?function(E,A){return YT.encodeInto(E,Ke.subarray(A)).written}:!1,l=this;t||(t={});let c=t&&t.sequential,d=t.structures||t.saveStructures,u=t.maxSharedStructures;if(u==null&&(u=d?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=t.maxOwnStructures;h==null&&(h=d?32:64),c&&!t.saveStructures&&(this.structures=[]);let f=u>32||h+u>64,p=u+64,m=u+h+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(E,A){if(Ke||(Ke=new YI(8192),Ji=new DataView(Ke.buffer,0,8192),je=0),Sc=Ke.length-10,Sc-je<2048?(Ke=new YI(Ke.length),Ji=new DataView(Ke.buffer,0,Ke.length),Sc=Ke.length-10,je=0):je=je+7&2147483640,e=je,s=l.structuredClone?new Map:null,l.bundleStrings?(Ec=["",""],Ke[je++]=214,Ke[je++]=98,Ec.position=je-e,je+=4):Ec=null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let S=n.sharedLength||0;if(S>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let C=0;C<S;C++){let T=n[C];if(!T)continue;let P,R=n.transitions;for(let L=0,O=T.length;L<O;L++){let B=T[L];P=R[B],P||(P=R[B]=Object.create(null)),R=P}R[J1]=C+64}o=S}c||(n.nextId=S+64)}i&&(i=!1),r=n||[];try{if(x(E),Ec){Ji.setUint32(Ec.position+e,je-Ec.position-e);let S=Ec;Ec=null,x(S[0]),x(S[1])}if(l.offset=je,s&&s.idsToInsert){je+=s.idsToInsert.length*6,je>Sc&&w(je),l.offset=je;let S=yrt(Ke.subarray(e,je),s.idsToInsert);return s=null,S}return A&xrt?(Ke.start=e,Ke.end=je,Ke):Ke.subarray(e,je)}finally{if(n){if(y<10&&y++,v>1e4)n.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!c){for(let S=0,C=g.length;S<C;S++)g[S][J1]=0;g=[]}if(i&&l.saveStructures){let S=n.sharedLength||u;n.length>S&&(n=n.slice(0,S));let C=Ke.subarray(e,je);return l.saveStructures(n,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(E)):(o=S,C)}}A&brt&&(je=e)}};let x=E=>{je>Sc&&(Ke=w(je));var A=typeof E,S;if(A==="string"){let C=E.length;if(Ec&&C>=8&&C<4096){let R=grt.test(E);Ec[R?0:1]+=E,Ke[je++]=193,x(R?-C:C);return}let T;C<32?T=1:C<256?T=2:C<65536?T=3:T=5;let P=C*3;if(je+P>Sc&&(Ke=w(je+P)),C<64||!a){let R,L,O,B=je+T;for(R=0;R<C;R++)L=E.charCodeAt(R),L<128?Ke[B++]=L:L<2048?(Ke[B++]=L>>6|192,Ke[B++]=L&63|128):(L&64512)===55296&&((O=E.charCodeAt(R+1))&64512)===56320?(L=65536+((L&1023)<<10)+(O&1023),R++,Ke[B++]=L>>18|240,Ke[B++]=L>>12&63|128,Ke[B++]=L>>6&63|128,Ke[B++]=L&63|128):(Ke[B++]=L>>12|224,Ke[B++]=L>>6&63|128,Ke[B++]=L&63|128);S=B-je-T}else S=a(E,je+T,P);S<32?Ke[je++]=160|S:S<256?(T<2&&Ke.copyWithin(je+2,je+1,je+1+S),Ke[je++]=217,Ke[je++]=S):S<65536?(T<3&&Ke.copyWithin(je+3,je+2,je+2+S),Ke[je++]=218,Ke[je++]=S>>8,Ke[je++]=S&255):(T<5&&Ke.copyWithin(je+5,je+3,je+3+S),Ke[je++]=219,Ji.setUint32(je,S),je+=4),je+=S}else if(A==="number")if(E>>>0===E)E<64?Ke[je++]=E:E<256?(Ke[je++]=204,Ke[je++]=E):E<65536?(Ke[je++]=205,Ke[je++]=E>>8,Ke[je++]=E&255):(Ke[je++]=206,Ji.setUint32(je,E),je+=4);else if(E>>0===E)E>=-32?Ke[je++]=256+E:E>=-128?(Ke[je++]=208,Ke[je++]=E+256):E>=-32768?(Ke[je++]=209,Ji.setInt16(je,E),je+=2):(Ke[je++]=210,Ji.setInt32(je,E),je+=4);else{let C;if((C=this.useFloat32)>0&&E<4294967296&&E>=-2147483648){Ke[je++]=202,Ji.setFloat32(je,E);let T;if(C<4||(T=E*kH[(Ke[je]&127)<<1|Ke[je+1]>>7])>>0===T){je+=4;return}else je--}Ke[je++]=203,Ji.setFloat64(je,E),je+=8}else if(A==="object")if(!E)Ke[je++]=192;else{if(s){let T=s.get(E);if(T){if(!T.id){let P=s.idsToInsert||(s.idsToInsert=[]);T.id=P.push(T)}Ke[je++]=214,Ke[je++]=112,Ji.setUint32(je,T.id),je+=4;return}else s.set(E,{offset:je-e})}let C=E.constructor;if(C===Object)b(E,!0);else if(C===Array){S=E.length,S<16?Ke[je++]=144|S:S<65536?(Ke[je++]=220,Ke[je++]=S>>8,Ke[je++]=S&255):(Ke[je++]=221,Ji.setUint32(je,S),je+=4);for(let T=0;T<S;T++)x(E[T])}else if(C===Map){S=E.size,S<16?Ke[je++]=128|S:S<65536?(Ke[je++]=222,Ke[je++]=S>>8,Ke[je++]=S&255):(Ke[je++]=223,Ji.setUint32(je,S),je+=4);for(let[T,P]of E)x(T),x(P)}else{for(let T=0,P=A2.length;T<P;T++){let R=NH[T];if(E instanceof R){let L=A2[T];if(L.write){L.type&&(Ke[je++]=212,Ke[je++]=L.type,Ke[je++]=0),x(L.write.call(this,E));return}let O=Ke,B=Ji,$=je;Ke=null;let X;try{X=L.pack.call(this,E,H=>(Ke=O,O=null,je+=H,je>Sc&&w(je),{target:Ke,targetView:Ji,position:je-H}),x)}finally{O&&(Ke=O,Ji=B,je=$,Sc=Ke.length-10)}X&&(X.length+je>Sc&&w(X.length+je),je=vrt(X,Ke,je,L.type));return}}b(E,!E.hasOwnProperty)}}else if(A==="boolean")Ke[je++]=E?195:194;else if(A==="bigint"){if(E<BigInt(1)<<BigInt(63)&&E>=-(BigInt(1)<<BigInt(63)))Ke[je++]=211,Ji.setBigInt64(je,E);else if(E<BigInt(1)<<BigInt(64)&&E>0)Ke[je++]=207,Ji.setBigUint64(je,E);else if(this.largeBigIntToFloat)Ke[je++]=203,Ji.setFloat64(je,Number(E));else throw new RangeError(E+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");je+=8}else if(A==="undefined")this.encodeUndefinedAsNil?Ke[je++]=192:(Ke[je++]=212,Ke[je++]=0,Ke[je++]=0);else if(A==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+A)},b=this.useRecords===!1?this.variableMapSize?E=>{let A=Object.keys(E),S=A.length;S<16?Ke[je++]=128|S:S<65536?(Ke[je++]=222,Ke[je++]=S>>8,Ke[je++]=S&255):(Ke[je++]=223,Ji.setUint32(je,S),je+=4);let C;for(let T=0;T<S;T++)x(C=A[T]),x(E[C])}:(E,A)=>{Ke[je++]=222;let S=je-e;je+=2;let C=0;for(let T in E)(A||E.hasOwnProperty(T))&&(x(T),x(E[T]),C++);Ke[S+++e]=C>>8,Ke[S+e]=C&255}:E=>{let A=Object.keys(E),S,C=r.transitions||(r.transitions=Object.create(null)),T=0;for(let R=0,L=A.length;R<L;R++){let O=A[R];S=C[O],S||(S=C[O]=Object.create(null),T++),C=S}let P=C[J1];if(P)P>=96&&f?(Ke[je++]=((P-=96)&31)+96,Ke[je++]=P>>5):Ke[je++]=P;else{P=r.nextId,P||(P=64),P<p&&this.shouldShareStructure&&!this.shouldShareStructure(A)?(P=r.nextOwnId,P<m||(P=p),r.nextOwnId=P+1):(P>=m&&(P=p),r.nextId=P+1);let R=A.highByte=P>=96&&f?P-96>>5:-1;C[J1]=P,r[P-64]=A,P<p?(A.isShared=!0,r.sharedLength=P-63,i=!0,R>=0?(Ke[je++]=(P&31)+96,Ke[je++]=R):Ke[je++]=P):(R>=0?(Ke[je++]=213,Ke[je++]=114,Ke[je++]=(P&31)+96,Ke[je++]=R):(Ke[je++]=212,Ke[je++]=114,Ke[je++]=P),T&&(v+=y*T),g.length>=h&&(g.shift()[J1]=0),g.push(C),x(A))}for(let R=0,L=A.length;R<L;R++)x(E[A[R]])},w=E=>{let A;if(E>16777216){if(E-e>dZ)throw new Error("Packed buffer would be larger than maximum buffer size");A=Math.min(dZ,Math.round(Math.max((E-e)*(E>67108864?1.25:2),4194304)/4096)*4096)}else A=(Math.max(E-e<<2,Ke.length-1)>>12)+1<<12;let S=new YI(A);return Ji=new DataView(S.buffer,0,A),Ke.copy?Ke.copy(S,0,e,E):S.set(Ke.slice(e,E)),je-=e,e=0,Sc=S.length-10,Ke=S}}useBuffer(t){Ke=t,Ji=new DataView(Ke.buffer,Ke.byteOffset,Ke.byteLength),je=0}};NH=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Zue];A2=[{pack(t,e,n){let i=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:r,targetView:s,position:o}=e(6);r[o++]=214,r[o++]=255,s.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:r,targetView:s,position:o}=e(10);r[o++]=215,r[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),n(this.onInvalidDate());let{target:r,targetView:s,position:o}=e(3);r[o++]=212,r[o++]=255,r[o++]=255}else{let{target:r,targetView:s,position:o}=e(15);r[o++]=199,r[o++]=12,r[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(t,e,n){let i=Array.from(t),{target:r,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=115,r[s++]=0),n(i)}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([t.source,t.flags])}},{pack(t,e){this.structuredClone?hZ(t,16,e):fZ(ER?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==sde&&this.structuredClone?hZ(t,ide.indexOf(n.name),e):fZ(t,e)}},{pack(t,e){let{target:n,position:i}=e(1);n[i]=193}}];function hZ(t,e,n,i){let r=t.byteLength;if(r+1<256){var{target:s,position:o}=n(4+r);s[o++]=199,s[o++]=r+1}else if(r+1<65536){var{target:s,position:o}=n(5+r);s[o++]=200,s[o++]=r+1>>8,s[o++]=r+1&255}else{var{target:s,position:o,targetView:a}=n(7+r);s[o++]=201,a.setUint32(o,r+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function fZ(t,e){let n=t.byteLength;var i,r;if(n<256){var{target:i,position:r}=e(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=e(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=n&255}else{var{target:i,position:r,targetView:s}=e(n+5);i[r++]=198,s.setUint32(r,n),r+=4}i.set(t,r)}function vrt(t,e,n,i){let r=t.length;switch(r){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:r<256?(e[n++]=199,e[n++]=r):r<65536?(e[n++]=200,e[n++]=r>>8,e[n++]=r&255):(e[n++]=201,e[n++]=r>>24,e[n++]=r>>16&255,e[n++]=r>>8&255,e[n++]=r&255)}return e[n++]=i,e.set(t,n),n+=r,n}function yrt(t,e){let n,i=e.length*6,r=t.length-i;for(e.sort((s,o)=>s.offset>o.offset?1:-1);n=e.pop();){let s=n.offset,o=n.id;t.copyWithin(s+i,s,r),i-=6;let a=s+i;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,r=s}return t}function Bx(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");NH.unshift(t.Class),A2.unshift(t)}prt(t)}var ade=new ode({useRecords:!1});ade.pack;ade.pack;var xrt=512,brt=1024,pZ=new ode({structuredClone:!0});Bx({Class:mr.prototype.constructor,type:1,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,mr.prototype),t}});Bx({Class:ln.prototype.constructor,type:2,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,ln.prototype),t}});Bx({Class:Bo.prototype.constructor,type:3,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,Bo.prototype),t}});Bx({Class:nZ.prototype.constructor,type:4,write(t){return t.id},read(t){return new nZ(t)}});Bx({Class:iZ.prototype.constructor,type:5,write(t){return t.data},read(t){return new iZ(t)}});Bx({Class:ds.prototype.constructor,type:6,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,ds.prototype),t}});function wrt(t){var e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){let i=t[n];e=(e<<5)-e+i,e=e&e}return e}function gF(t){if(CH(t))return t;if(Array.isArray(t))return t.map(gF);if(typeof t=="object"&&t!==null){let e={};for(let n of Object.keys(t).sort())e[n]=gF(t[n]);return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}else return t}var vF;(t=>{function e(r){return pZ.pack(r)}t.serialize=e;function n(r){return pZ.unpack(r)}t.deserialize=n;function i(r){return wrt(e(gF(r))).toString()}t.checksum=i})(vF||(vF={}));var Ah={LookAt:[],Follow:["Create"],DragDrop:["Transition","Audio","Create"],MouseHover:["Transition","Create","Destroy","SwitchCamera"],Scroll:["Transition","Create"],Start:["Transition","Audio","Video","Create","Destroy","SwitchCamera"],Conditional:["Transition","Audio","Video","Create","Destroy","SwitchCamera","Reset"],MouseDown:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],MouseUp:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],MousePress:["Transition","SwitchCamera","Audio","Video","Link","Create","Reset"],KeyDown:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],KeyUp:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],KeyPress:["Transition","SwitchCamera","Audio","Video","Link","Create","Reset"],GameControl:["Transition","Audio","Video","Create"],Collision:["Transition","Audio","Video","Create","Destroy","Reset"]},mZ;(t=>{function e(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}t.is=e;function n(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,toggle:!1,actions:new ln}:{type:i,disabled:!1,key:void 0,toggle:!1,actions:new ln}}t.defaultData=n})(mZ||(mZ={}));var T2;(t=>{function e(n){return{type:"Property",value:[n??null,"position","x"]}}t.propertyDefaultData=e,t.valueDefaultData={type:"Literal",value:0}})(T2||(T2={}));var yF;(t=>{function e(r){return{type:"Comparison",operator:"==",lOperand:T2.propertyDefaultData(r),rOperand:{...T2.valueDefaultData}}}t.comparisonDefaultData=e;function n(r){return{type:"Distance",toObject:r??null,fromObject:r??null,distance:200}}t.distanceDefaultData=n;function i(r,s){return{type:"State",object:r??null,state:s??null}}t.stateDefaultData=i})(yF||(yF={}));var gZ;(t=>{function e(i){return i.type==="Conditional"}t.is=e;function n(i){return{type:"Conditional",disabled:!1,inActions:new ln,outActions:new ln,condition:yF.distanceDefaultData(i)}}t.defaultData=n})(gZ||(gZ={}));var vZ;(t=>t.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new ln,drop:new ln}})(vZ||(vZ={}));var xF;(t=>t.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new ln})(xF||(xF={}));var bF;(t=>t.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(bF||(bF={}));var yZ;(t=>{function e(i){return i.type==="MouseHover"}t.is=e;function n(){return{type:"MouseHover",disabled:!1,actions:new ln}}t.defaultData=n})(yZ||(yZ={}));var xZ;(t=>{function e(i){return i.type==="Scroll"}t.is=e;function n(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new ln}}t.defaultData=n})(xZ||(xZ={}));var bZ;(t=>{function e(i){return i.type==="Start"}t.is=e;function n(){return{type:"Start",disabled:!1,actions:new ln}}t.defaultData=n})(bZ||(bZ={}));var wZ;(t=>{function e(i){return i.type==="Collision"}t.is=e;function n(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new ln}}t.defaultData=n})(wZ||(wZ={}));var P0;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s]}t.lerp=n})(P0||(P0={}));var Um;(t=>{function e(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}t.isEqual=e;function n(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}t.add=n;function i(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}t.sub=i;function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}t.div=r;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}t.mul=s;function o(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}t.dist=o;function a(l,c,d){return[l[0]+(c[0]-l[0])*d,l[1]+(c[1]-l[1])*d,l[2]+(c[2]-l[2])*d]}t.lerp=a})(Um||(Um={}));var C2;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s,i[2]+(r[2]-i[2])*s,i[3]+(r[3]-i[3])*s]}t.lerp=n})(C2||(C2={}));var Wy;(t=>{t.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(r,s){for(let o=0;o<16;o++)if(r[o]!==s[o])return!1;return!0}t.isEqual=e;function n(r){return r??t.identity}t.simplify=n;function i(r,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=r[3]*s[a]+r[7]*s[a+1]+r[11]*s[a+2]+r[15];o[a]=(r[0]*s[a]+r[4]*s[a+1]+r[8]*s[a+2]+r[12])/c,o[a+1]=(r[1]*s[a]+r[5]*s[a+1]+r[9]*s[a+2]+r[13])/c,o[a+2]=(r[2]*s[a]+r[6]*s[a+1]+r[10]*s[a+2]+r[14])/c}return o}t.applyMatrix4=i})(Wy||(Wy={}));var Ds;(t=>{function e(l){return typeof l=="object"&&typeof l.r=="number"&&typeof l.g=="number"&&typeof l.b=="number"}t.isRGB=e,t.white={r:1,g:1,b:1},t.red={r:1,g:0,b:0},t.black={r:0,g:0,b:0};function n(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:1}}t.toRgb255a1=n;function i(l){return{r:l.r,g:l.g,b:l.b}}t.clone=i;function r(l){return l=Math.floor(l),{r:(l>>16&255)/255,g:(l>>8&255)/255,b:(l&255)/255}}t.fromHex=r;function s(l){return Math.round(l.r*255)*65536+Math.round(l.g*255)*256+Math.round(l.b*255)}t.toHex=s;function o(l,c){return l.r===c.r&&l.g===c.g&&l.b===c.b}t.equals=o;function a(l,c,d){return{r:l.r+(c.r-l.r)*d,g:l.g+(c.g-l.g)*d,b:l.b+(c.b-l.b)*d}}t.lerp=a})(Ds||(Ds={}));var ol;(t=>{t.white={...Ds.white,a:1},t.transparent={...Ds.white,a:0};function e(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}t.from0to1=e;function n(o,a){return{...Ds.fromHex(o),a}}t.fromHexAndA=n;function i(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}t.toRgb255a1=i;function r(o,a){return Ds.equals(o,a)&&o.a===a.a}t.equals=r;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}t.lerp=s})(ol||(ol={}));var wF;(t=>t.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(wF||(wF={}));var _Z;(t=>t.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(_Z||(_Z={}));var SZ;(t=>t.defaultData={control1:[.5,0],control2:[.5,1]})(SZ||(SZ={}));var Hh;(t=>(t.linear=[0,0,1,1],t.ease=[.25,.1,.25,1],t.easeIn=[.42,0,1,1],t.easeOut=[0,0,.58,1],t.easeInOut=[.42,0,.58,1]))(Hh||(Hh={}));var lg;(t=>{t.all=["PerspectiveCamera","OrthographicCamera"];function e(n){return t.all.includes(n)}t.is=e})(lg||(lg={}));var I_;(t=>{t.DefaultUp=[0,1,0],t.DefaultTargetOffset=1e3,t.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:t.DefaultUp,isUpVectorFlipped:!1,targetOffset:t.DefaultTargetOffset};function e(n){return n.type==="PerspectiveCamera"?n.perspective.zoom:n.orthographic.zoom}t.getZoom=e})(I_||(I_={}));var af;(t=>{function e(i,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*r,0,0]},grid:{count:[2,2,2],size:i.map(s=>s*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}t.defaultData=e;function n(i,r){let s={...i};if(lde.forEach(o=>{Object.assign(s,{[o]:r[o]??i[o]})}),s.radial={...i.radial},r.radial){let o=i.radial,a=r.radial;cde.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...i.linear},r.linear){let o=i.linear,a=r.linear;ude.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...i.grid},r.grid){let o=i.grid,a=r.grid;dde.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...i.toObject},r.toObject){let o=i.toObject,a=r.toObject;hde.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...i.randomnessObject},r.randomnessObject){let o=i.randomnessObject,a=r.randomnessObject;fde.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}t.merge=n})(af||(af={}));var _F;(t=>{t.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let e=["radial","linear","grid","toObject","randomnessObject"];function n(i,r){let s=[];i.count!==void 0&&s.push({type:0,path:r,props:{count:i.count}});for(let o of e){let a=i[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...r,o],props:a})}return s}t.toOps=n})(_F||(_F={}));var lde=["count"],cde=["radius","start","end","position","scale","rotation"],ude=["position","scale","rotation"],dde=["count","size"],hde=["count","position","scale","rotation"],fde=["strength","scale","rotation","position","movement","seed","freqScale"],k_;(t=>{let e={opacity:1,blendFunction:13,enabled:!1};t.defaultData={enabled:!1,pixelation:{...e,blendFunction:16,granularity:15},bloom:{...e,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...e,offset:[2,2]},vignette:{...e,darkness:1,offset:0},hueSaturation:{...e,hue:3,saturation:0},brightnessContrast:{...e,brightness:.25,contrast:0},depthOfField:{...e,focalLength:2,focusDistance:2,bokehScale:2},noise:{...e,blendFunction:16}}})(k_||(k_={}));var SF;(t=>{t.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function e(n){return t.all.includes(n)}t.is=e})(SF||(SF={}));var EF;(t=>{function e(i){return n(i)}t.defaultData=e;function n(i){if(i==="PointLight")return{type:i,color:ol.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(i==="SpotLight")return{type:i,color:ol.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:ol.white,intensity:1,shadows:!0,size:2e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(EF||(EF={}));var MF;(t=>{t.defaultData={castShadow:!0,receiveShadow:!0};function e(n,i){return n.castShadow===i.castShadow&&n.receiveShadow===i.receiveShadow}t.equals=e})(MF||(MF={}));var AF;(t=>{t.defaultData={flatShading:!1,wireframe:!1,side:0};function e(n,i){return n.flatShading===i.flatShading&&n.side===i.side&&n.wireframe===i.wireframe}t.equals=e})(AF||(AF={}));var TF;(t=>t.defaultData={...AF.defaultData,...MF.defaultData})(TF||(TF={}));var P2;(t=>(t.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},t.maxSize=3e7))(P2||(P2={}));var EZ;(t=>{function e(n){return n==="texture"||n==="video"||n==="color"||n==="depth"||n==="normal"||n==="gradient"||n==="noise"||n==="fresnel"||n==="rainbow"||n==="toon"||n==="outline"||n==="transmission"||n==="matcap"||n==="displace"||n==="pattern"||n==="light"}t.is=e})(EZ||(EZ={}));function _rt(t){return t.type!=="displace"}var MZ;(t=>{function e(n){return n==="phong"||n==="toon"||n==="lambert"||n==="physical"}t.is=e})(MZ||(MZ={}));var pde=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Srt=["wrapping","image","video"],el;(t=>{function e(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}}t.patch=e;function n(s,o){return s==="light"&&o?i(o):r(s)}t.defaultData=n;function i(s){let o={mode:0,isMask:!1,visible:!0};switch(s){case"phong":return{...o,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...o,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...o,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...o,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function r(s){let o={alpha:1,mode:0,isMask:!1,visible:!0};switch(s){case"texture":return{...o,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...o,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:P2.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...o,type:"color",color:Ds.fromHex(5526619)};case"depth":return{...o,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...o,type:"normal",cnormal:[1,1,1]};case"gradient":return{...o,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...o,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Ds.fromHex(6710886),a:1},colorB:{...Ds.fromHex(6710886),a:1},colorC:{...Ds.fromHex(16777215),a:1},colorD:{...Ds.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...o,type:"fresnel",color:ol.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...o,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...o,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:ol.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...o,type:"outline",outlineColor:ol.fromHexAndA(0,1),contourColor:ol.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...o,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...o,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...o,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Ds.fromHex(0),a:1},colorB:{...Ds.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(el||(el={}));var va;(t=>{function e(c){return!c.layers.some(d=>d.data.type==="texture"&&d.data.projection!==0||d.data.type==="depth"&&!d.data.isWorldSpace||d.data.type==="noise"||d.data.type==="displace")}t.isMergable=e;function n(c){let d="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([h,f])=>{d+=`${h}${f}`,Array.isArray(f)?f.forEach(p=>d+=`${p}`):typeof f=="object"?Object.values(f).forEach(p=>{typeof p=="number"?d+=`${p.toFixed(4)}`:d+=`${p}`}):d+=`${f}`})}),d}t.getHash=n;function i(){return{layers:new ln}}t.defaultEmptyData=i;function r(c="layer1",d="layer2"){return o("phong",c,d)}t.defaultData=r;function s(c,d){return{...c,name:d}}t.withName=s;function o(c,d="layer1",u="layer2"){let h=new ln;return h.push({fi:0,data:el.defaultData("light",c),id:d}),h.push({fi:1,data:el.defaultData("color"),id:u}),{layers:h}}t.defaultTwoLayerData=o;function a(c,d="phong",u="layer1",h="layer2"){let f=el.defaultData("texture");Object.assign(f.texture,{image:c});let p=new ln;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:el.defaultData("light",d),id:h}),{layers:p}}t.defaultTwoLayerTextureData=a;function l(c,d="phong",u="layer1",h="layer2"){let f=el.defaultData("video");Object.assign(f.texture,{video:c});let p=new ln;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:el.defaultData("light",d),id:h}),{layers:p}}t.defaultTwoLayerVideoTextureData=l})(va||(va={}));var D2;(t=>{function e(){return{points:new ln,roundness:0,shapeHoles:[],isClosed:!1}}t.defaultData=e})(D2||(D2={}));var R2;(t=>{function e(){return{points:new ln,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}t.defaultData=e})(R2||(R2={}));var mde={type:"Ellipse",width:100,height:100,spikes:64,angle:360,innerRadius:0},CF;(t=>{function e(n,i){let r={...n};return vde.forEach(s=>{Object.assign(r,{[s]:i[s]??n[s]})}),r}t.merge=e})(CF||(CF={}));var gde={shape:mde,depth:1,offset:0,bevel:0,bevelSides:1,angle:0,twist:0,startScale:1,endScale:1},vde=["depth","offset","angle","twist","startScale","endScale"],O2;(t=>{function e(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}t.is2DParametricMesh=e;function n(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}t.isParametricMesh=n})(O2||(O2={}));var PF;(t=>{function e(n,i){let r={...n};return Object.assign(r,i),r.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(r.extrusion={...n.extrusion},Object.assign(r.extrusion,CF.merge(r.extrusion,i.extrusion))),r}t.merge=e})(PF||(PF={}));var Q0;(t=>{function e(n){if(n==="RectangleGeometry")return{width:320,height:320,type:n,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="PathGeometry")return{type:n,width:1,height:1,depth:1,path:R2.defaultData(),extrusion:gde};if(n==="VectorGeometry")return{width:1,height:1,type:n,subdivisions:12,shape:D2.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="BooleanGeometry")return{type:n,operation:2,width:0,height:0,depth:0,phongAngle:35};if(n==="TextGeometry")return{type:n,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI};throw new Error("not implemented")}t.defaultData=e})(Q0||(Q0={}));var AZ=["width","height","depth"],TZ;(t=>{function e(i){return i==="Component"||i==="Instance"}t.isComponentRelated=e;function n(i){return i==="Empty"||i==="Instance"}t.isEmptyOrComponent=n})(TZ||(TZ={}));var qy;(t=>{t.identity={...wF.identity,hiddenMatrix:Wy.identity};function e(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}}t.fromObject=e;function n(r,s){return{position:(s==null?void 0:s.position)||r.position,rotation:(s==null?void 0:s.rotation)||r.rotation,scale:(s==null?void 0:s.scale)||r.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||r.hiddenMatrix}}t.merge=n;function i(r,s){return kit({position:Um.isEqual(r.position,s.position)?void 0:s.position,rotation:Um.isEqual(r.rotation,s.rotation)?void 0:s.rotation,scale:Um.isEqual(r.scale,s.scale)?null:s.scale,hiddenMatrix:Wy.isEqual(r.hiddenMatrix,s.hiddenMatrix)?void 0:s.hiddenMatrix})}t.diff=i})(qy||(qy={}));var CZ;(t=>t.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(CZ||(CZ={}));var ul;(t=>t.defaultData={states:new ln,events:new ln,visible:!0,raycastLock:!1,collision:"visibility",physics:null,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...qy.identity,cloner:null})(ul||(ul={}));var PZ;(t=>t.defaultData={type:"Empty",...ul.defaultData})(PZ||(PZ={}));var DZ;(t=>t.defaultData={type:"Component",...ul.defaultData})(DZ||(DZ={}));var J0;(t=>t.defaultData={type:"Mesh",...ul.defaultData,...TF.defaultData})(J0||(J0={}));var L2;(t=>t.defaultData={...ul.defaultData,...qy.identity,...I_.defaultData})(L2||(L2={}));var DF;(t=>{function e(n){return{...ul.defaultData,...EF.defaultData(n)}}t.defaultData=e})(DF||(DF={}));var I2;(t=>{function e(i,r,s=0){for(;s<r.length;){let o=i?i[r[s]]:void 0;if(r.length===s+1)return o;if(o)i=o.descendants,s+=1;else return}}t.resolveWithDes=e;function n(i,r,s=0){let o=e(i,r,s);if(o){let a=Object.keys(o);if(a.length===1&&a[0]==="descendants")return}return o}t.resolve=n})(I2||(I2={}));var $y;(t=>{t.rootOverrideProps=["physics"],t.compositeNonOptionalOverrideProps=["geometry"],t.compositeEntireOverrideOverrideProps=["material"];function e(i,r){return{...ul.defaultData,...r,component:i,overrides:new ds,physics:void 0,type:"Instance"}}t.ofComponent=e;function n(i){let r=qy.fromObject(i.data);return e(i.id,r)}t.fromComponentData=n})($y||($y={}));var RF;(t=>(t.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Wy.identity,name:"Play Camera",visible:!0,raycastLock:!1,collision:"visibility",physics:null,states:new ln,events:new ln,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...I_.defaultData},t.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},t.defaultMeshObject={name:"Rectangle",...ul.defaultData,...J0.defaultData,geometry:Q0.defaultData("RectangleGeometry"),material:va.defaultTwoLayerData("phong","layer1","layer2")},t.defaultBooleanObject={name:"Boolean",...ul.defaultData,...J0.defaultData,geometry:Q0.defaultData("BooleanGeometry"),material:va.defaultTwoLayerData("phong","layer1","layer2")},t.defaultTextObject={name:"Text",...ul.defaultData,...J0.defaultData,geometry:Q0.defaultData("TextGeometry"),material:va.defaultTwoLayerData("phong","layer1","layer2")}))(RF||(RF={}));var wm;(t=>{function e(s,o){let a={name:o};return s.type==="Mesh"?(a.geometry={},"material"in s&&(a.material={layers:new ds}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new ds})))):lg.is(s.type)&&(a.perspective={},a.orthographic={}),a}t.newEmpty=e;function n(s,o){if(o===void 0)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=E2(a.material,l=>{if(typeof l!="string")for(let[c,d]of Object.entries(o.material.layers)){let u=l.layers.data(c);u&&el.patch(u,d)}}).data),a.materials&&o.materials&&(a.materials=E2(a.materials,l=>{var c,d;for(let u=0;u<a.materials.length;u++){let h=o.materials[u];if(typeof h!="string")for(let[f,p]of Object.entries(h.layers)){let m=(d=(c=l[u])==null?void 0:c.layers)==null?void 0:d.data(f);m&&el.patch(m,p)}}}).data),a}function i(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function d(u,h){for(let[f,p]of Object.entries(h.layers)){let{texture:m,...g}=p;if(m!==void 0&&Object.keys(m).length>0){let v={path:[...u,"layers",f,"texture"],props:m,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...u,"layers",f],props:g,type:0};l.push(v)}}}for(let[u,h]of Object.entries(o))if(u!=="name")if(u==="cloner")l.push(..._F.toOps(h,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:h.slide,offset:h.offset},type:0});else if(u==="material")d(["material"],h);else if(u==="materials")for(let[f,p]of Object.entries(h))d(["materials",f],p);else if(c[u]===0){if(u==="geometry"&&h.extrusion!==void 0){let f={path:[u,"extrusion"],props:h.extrusion,type:0};l.push(f),h={...h},delete h.extrusion}if(Object.keys(h).length>0){let f={path:[u],props:h,type:0};l.push(f)}}else a===void 0&&(a={path:[],props:{},type:0},l.push(a)),a.props[u]=h;return l}t.toOps=i;function r(s,o){var l,c,d,u,h,f;if(o===void 0)return s;let a={...s};if(Object.assign(a,qy.merge(a,o)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??((c=a.pathSnapping)==null?void 0:c.slide)??0,offset:((d=o.pathSnapping)==null?void 0:d.offset)??((u=a.pathSnapping)==null?void 0:u.offset)??0})}),lg.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let p=o;((h=p.orthographic)==null?void 0:h.zoom)!==void 0&&(a.orthographic.zoom=p.orthographic.zoom),((f=p.perspective)==null?void 0:f.zoom)!==void 0&&(a.perspective.zoom=p.perspective.zoom),p.isUpVectorFlipped!==void 0&&(a.isUpVectorFlipped=p.isUpVectorFlipped),p.targetOffset!==void 0&&(a.targetOffset=p.targetOffset)}else if(s.type==="Mesh")"geometry"in o&&Object.assign(a,{geometry:PF.merge(a.geometry,o.geometry)}),(o.material||o.materials)&&(a=n(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:af.merge(a.cloner,o.cloner)});else if(s.type==="Empty")a.cloner&&"cloner"in o&&Object.assign(a,{cloner:af.merge(a.cloner,o.cloner)});else if(SF.is(s.type)){let p=o;p.intensity!==void 0&&(a.intensity=p.intensity),p.color!==void 0&&(typeof p.color=="string"?a.color=p.color:a.color=Ds.clone(p.color))}return a}t.patch=r})(wm||(wm={}));var k2;(t=>t.defaultData={enabled:!1,useBackgroundColor:!1,color:Ds.white,near:.1,far:2e3})(k2||(k2={}));var N2;(t=>t.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(N2||(N2={}));var Xy;(t=>t.defaultData={orbitControls:N2.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((e,n)=>{let i=0,r=0;return n<5?r=-30:n<10&&(r=30),n===0||n===10||n===5?i=30:(n===4||n===11||n===9)&&(i=-30),[120,[i,r],"show"]}),gameControlObject:null,hdTransmission:!1})(Xy||(Xy={}));var OF;(t=>t.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(OF||(OF={}));var LF;(t=>t.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(LF||(LF={}));var N_;(t=>(t.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...OF.defaultData},isRandomSeed:!0,seed:t.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:LF.defaultData}),t.generateSeed=()=>Math.round(Math.random()*1e5)))(N_||(N_={}));var ra;(t=>t.defaultData={ambientLight:{enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75,depth:100,groundColor:{r:.5098039215686274,g:.5098039215686274,b:.5098039215686274},softShadows:!0,softShadowQuality:"low",occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}},usePhysics:!1,gravity:-10,pixelsPerMeter:200,skinWidthRelative:.02,stepThreshRelative:.3,slopeThresh:65})(ra||(ra={}));var RZ;(t=>{t.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function e(r={withLight:!0,withSquare:!0}){let s=new Bo,o=RF.defaultMeshObject;return r.withLight===!0&&s.push({fi:-1,data:{...DF.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7},id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),r.withSquare===!0&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]}),s}t.defaultData={backgroundColor:ol.fromHexAndA(2960946,1),postprocessing:k_.defaultData,fog:k2.defaultData,objects:e(),environment:ra.defaultData,publish:Xy.defaultData,styles:N_.defaultData()},t.emptyData=function(r){return{backgroundColor:ol.fromHexAndA(2960946,1),postprocessing:k_.defaultData,fog:k2.defaultData,objects:r?e(r):new Bo,environment:ra.defaultData,publish:Xy.defaultData,styles:N_.defaultData()}};function n(r){return{...t.defaultData,objects:ag(r,Bo.prototype)}}t.withObjs=n;function i(r,s){return n([{id:r,data:s,children:[],fi:0}])}t.withObj=i})(RZ||(RZ={}));var B2;(t=>t.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(B2||(B2={}));var IF;(t=>{function e(){let r={};return r["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},ag(r,mr.prototype)}t.defaultColors=e;function n(r){let s={};return r!=null&&r.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...B2.emptyImage,name:"AI generated image"}),ag(s,mr.prototype)}t.defaultImages=n;function i(){return{materials:new mr,images:new mr,videos:new mr,colors:new mr,audios:new mr,fonts:new mr,penumbraSize:[2,2,2]}}t.emptyData=i})(IF||(IF={}));var z2;(t=>(t.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},t.defaultDataThirdPerson={moveMode:"walk",speedTranslate:1e3,speedRotate:100,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX",""],["rotPosY",""],["rotNegX",""],["rotNegY",""],["jump","Space"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:t.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new ln,move:new ln,jump:new ln},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:ol.fromHexAndA(3728051,1)}}))(z2||(z2={}));function OZ(t){t.layers.forEach(e=>{if(e.type==="depth"&&e.colorA!==void 0){let n=e.colorA,i=e.colorB,r=[[n.r,n.g,n.b,n.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let a=2;a<10;a++)r.push(r[1]),s.push(1);let o={...R_(zs(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,e.near),far:Math.max(0,e.far),colors:r,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(e,o)}else if(e.type==="depth"&&e.gradientType===1&&(e.near<0||e.far<0)){let n={...zs(e),near:Math.max(e.near,0),far:Math.max(e.far,0)};Object.assign(e,n)}})}function D0(t,e){Object.values(t.shared.materials).forEach(n=>e(n))}function R0(t,e){t.scene.objects.traverse((n,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&e(r)}):"material"in i&&typeof i.material!="string"&&e(i.material)})}function Ert(t){Object.assign(t.scene.publish,{orbitControls:{...N2.defaultData,...zs(t.scene.publish.orbitControls)}})}function Mrt(t){Object.assign(t.scene.publish.settings,{video:{...Xy.defaultData.settings.video,...zs(t.scene.publish.settings.video)}})}function Art(t){function e(n){if(n.layers){for(let i of Object.values(n.layers))if(i){for(let[r,s]of Object.entries(i))if((pde.includes(r)||typeof s=="boolean")&&delete i[r],r==="texture")for(let[o,a]of Object.entries(s))(Srt.includes(o)||typeof a=="boolean")&&delete s[o]}}}t.scene.objects.traverse((n,i)=>{i.states.forEach(r=>{let s=r;s.material?e(s.material):s.materials&&s.materials.forEach(o=>{e(o)})})})}function Trt(t){t.scene.publish.withBackground=!0}function Crt(t){t.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Prt(t){t.scene.objects.traverse((e,n)=>{let i=n.cloner;i&&(i.radial.scale=i.radial.scale.map(r=>r+1),i.linear.scale=i.linear.scale.map(r=>r+1))})}function Drt(t){t.scene.objects.traverse((e,n)=>{let i=n.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function Rrt(t){t.scene.objects.traverse((e,n)=>{let i=t.scene.objects.unproxy().parent(e);if(i){let r=zs(t.scene.objects.data(i));r&&r.type==="Mesh"&&r.geometry.type==="BooleanGeometry"&&n.type==="Mesh"&&(n.visible=zs(n).booleanExclude!==!0)}})}function Ort(t){t.scene.objects.traverse((e,n)=>{if(n.type==="Mesh"){let i=n;n.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function Lrt(t){function e(i){Object.setPrototypeOf(i,ds.prototype),i.texture&&Object.setPrototypeOf(i.texture,ds.prototype)}function n(i){Object.setPrototypeOf(i,ds.prototype);for(let r in i)e(i[r])}t.scene.objects.traverse((i,r)=>{r.states.forEach(s=>{let o=s;if(o.material){let a=zs(o.material).layers;n(a),o.material.layers=a}if(o.materials)for(let a=0;a<o.materials.length;a++){let l=o.materials[a],c=zs(l).layers;n(c),l.layers=c}})})}function LZ(t){t.layers===void 0&&Object.assign(t,va.defaultTwoLayerData("lambert"))}function KI(t){!t.layers||t.layers.forEach(e=>{if(e.type==="depth"&&e.colors.length===10){let n=[...e.colors];n.push(e.colors[9]);let i=[...e.steps];i.push(e.steps[9]);let r={...zs(e),colors:n,steps:i};Object.assign(e,r)}})}function Irt(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&(n.geometry.type==="BooleanGeometry"||n.geometry.type==="SubdivGeometry")&&(n.geometry.phongAngle=35)})}function IZ(t){t.scene.objects.traverse((e,n)=>{"materials"in n?n.materials.forEach(i=>{typeof i!="string"&&KI(i)}):"material"in n&&typeof n.material!="string"&&KI(n.material)}),Object.values(t.shared.materials).forEach(e=>KI(e))}function krt(t){t.scene.environment.ambientLight.softShadows=!1,t.scene.environment.ambientLight.softShadowQuality="low",t.scene.objects.traverse((e,n)=>{(n.type==="DirectionalLight"||n.type==="SpotLight")&&(n.shadowResolution=1024,n.shadowRadius=1,n.depth=1e5)}),t.shared.penumbraSize=new Array(5).fill(.5)}function Nrt(t){t.shared.audios=ag({},mr.prototype)}function Brt(t){t.shared.videos=ag({},mr.prototype)}function zrt(t){let e=t.shared.materials;Object.entries(e).forEach(([n,i])=>{if(!i.layers){let r={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(e,{[n]:r})}})}function Frt(t){Object.entries(zs(t.shared.images)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.images[e]}),Object.entries(zs(t.shared.audios)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.audios[e]})}function Urt(t){t.scene.publish.settings.web.preload=!1}function kZ(t){t.layers&&t.layers.forEach(e=>{e.type==="depth"&&e.num!==void 0&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)})}function NZ(t){t.layers&&t.layers.forEach(e=>{_rt(e)&&e.isMask===void 0&&(e.isMask=!1),(e.type==="texture"||e.type==="video")&&e.blending===void 0&&(e.blending=0),(e.type==="noise"||e.type==="displace"&&e.displacementType==="noise")&&(e.voronoiStyle===void 0&&(e.voronoiStyle=0),e.highCut===void 0&&(e.highCut=1),e.lowCut===void 0&&(e.lowCut=0),e.smoothness===void 0&&(e.smoothness=.3),e.seed===void 0&&(e.seed=0),e.quality===void 0&&(e.quality=1))})}function Vrt(t){t.shared.fonts=ag({},mr.prototype)}function Hrt(t){return t.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function jrt(t){let e=[];t.scene.objects.traverse((n,i)=>{let r=i;if(r.type==="TextFrame"){let s=va.defaultTwoLayerData("phong"),o=typeof r.color=="string"?t.shared.colors[r.color]:r.color;s.layers[1].data.color={r:o.r,g:o.g,b:o.b},s.layers[1].data.alpha=r.alpha;let a=Hrt(r.font);t.shared.fonts[a]===void 0&&(t.shared.fonts[a]={name:a});let l={name:r.name,...ul.defaultData,...J0.defaultData,flatShading:!1,wireframe:!1,geometry:{...Q0.defaultData("TextGeometry"),width:r.width,height:r.height,font:a,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:r.fontSize*1.40625,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:zs(r.states),events:zs(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix},c=zs(t.scene.objects).parent(n);t.scene.objects.insertAfter(c??null,n,[{id:n+"new",data:l,children:[]}]),e.push(n)}}),e.forEach(n=>{t.scene.objects.delete(n)})}function Grt(t){let e={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};t.scene.objects.traverse((n,i)=>{i.events.forEach(r=>{if(e[Number(r.type)])if(Object.assign(r,{type:e[Number(r.type)]}),r.type==="Audio"&&"audioEvent"in r&&(Object.assign(r,{playAudio:r.audioEvent}),delete r.audioEvent),r.type==="GameControl")Object.assign(r,{gameActions:{idle:new ln,move:new ln,jump:new ln}});else{let s=new ln;Object.assign(r,{actions:s}),(r.type==="MouseDown"||r.type==="MouseUp"||r.type==="KeyDown"||r.type==="KeyUp")&&"url"in r&&s.push({fi:0,id:pn.generateUUID(),data:{type:"Link",url:r.url,delay:0}}),"targets"in r&&(r.targets.forEach((o,a,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},d={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(d,R_(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(d,{control1:{...o.control1},control2:{...o.control2}});let u={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},h={state:o.state,...u,...d},f={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new ln({fi:0,id:pn.generateUUID(),data:c},{fi:1,id:pn.generateUUID(),data:h})};s.push({fi:l,id:a,data:f})}),delete r.targets)}})})}function Wrt(t){t.scene.objects.traverse((e,n)=>{function i(r,s){var l;let o=new ln,a=[];if(n.events.forEach((c,d,u)=>{if(c.type==="Audio"&&c.trigger===s){let h;a.push(d),c.interaction==="play"?h={...R_(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(h={...R_(c,"interaction","delay","object","playAudio"),type:"Audio"}),h&&o.push({fi:u,id:d,data:h})}}),a.forEach(c=>n.events.delete(c)),o.length){let c=(l=n.events.find(d=>d.type===r))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,o):n.events.insertBefore(null,[{id:pn.generateUUID(),data:{type:r,actions:o}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function BZ(t){var n;let e=(n=t.layers.find(i=>i.type==="light"))==null?void 0:n.data;if((e==null?void 0:e.category)==="basic"){let i=el.defaultData("light","phong"),r=e;Object.assign(r,i),r.visible=!1}}function zZ(t){D0(t,BZ),R0(t,BZ)}function qrt(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="SubdivGeometry"&&(n.geometry.scaleBaked||(n.geometry.scaleBaked=[1,1,1]))})}function $rt(t){t.scene.objects.traverse((e,n)=>{(n.type==="Empty"||n.type==="Mesh")&&n.cloner&&!n.cloner.randomnessObject&&!n.cloner.toObject&&!n.cloner.randomness&&(n.cloner={...n.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function Xrt(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="NonParametricGeometry"&&!("material"in n)&&!("materials"in n)&&(n.material=va.defaultTwoLayerData("phong"))})}function Yrt(t){t.scene.publish.orbitControls.autoZoom===void 0&&(t.scene.publish.orbitControls.autoZoom=!1),t.scene.objects.traverse((e,n)=>{(n.type==="OrthographicCamera"||n.type==="PerspectiveCamera")&&(n.orthographic.autoZoom===void 0&&(n.orthographic.autoZoom=!1),n.orthographic.autoZoomFrustumSize===void 0&&(n.orthographic.autoZoomFrustumSize=790))})}function Krt(t){t.scene.objects.traverse((e,n)=>{n.pathSnapping===void 0&&(n.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),n.pathSnapping.offset===void 0&&(n.pathSnapping.offset=0)})}function Zrt(t){t.scene.publish.mouseEventTarget===void 0&&(t.scene.publish.mouseEventTarget="canvas"),t.scene.publish.settings.web.hint===void 0&&(t.scene.publish.settings.web.hint=!1)}function Qrt(t){let{video:e}=t.scene.publish.settings;e.format==="gif"&&e.fps>48&&(e.fps=15)}function Jrt(t){t.scene.objects.traverse((e,n)=>{n.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-n.position[1]))})})}function est(t){let e=t.scene.environment.usePhysics;t.scene.objects.traverse((n,i)=>{e&&i.physics===null?i.collision=!1:i.collision="visibility"})}function tst(t){t.scene.objects.traverse((e,n)=>{n.events.forEach(i=>{i.type==="GameControl"&&(i.navmesh=z2.defaultDataThirdPerson.navmesh)})})}function nst(t){t.scene.styles||(t.scene.styles=N_.defaultData())}function FZ(t){t.layers.forEach(e=>{e.type==="light"&&e.category!=="toon"&&e.occlusion===void 0&&(e.occlusion=!0)})}function ist(t){t.scene.environment.ambientLight.occlusion===void 0&&(t.scene.environment.ambientLight.occlusion=!1),t.scene.environment.ambientLight.aoFullRes===void 0&&(t.scene.environment.ambientLight.aoFullRes=!1),t.scene.environment.ambientLight.radius===void 0&&(t.scene.environment.ambientLight.radius=256),t.scene.environment.ambientLight.bias===void 0&&(t.scene.environment.ambientLight.bias=.5),t.scene.environment.ambientLight.aoColor===void 0&&(t.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),R0(t,FZ),D0(t,FZ)}var UZ=41;function rst(t){let e=t.schema??0;e!==UZ&&(console.warn("updating from ",e,"to ",UZ),e<1&&(R0(t,OZ),D0(t,OZ),t.schema=1),e<2&&(Ert(t),t.schema=2),e<3&&(Art(t),t.schema=3),e<4&&(Trt(t),t.schema=4),e<5&&(Crt(t),t.schema=5),e<6&&(Prt(t),t.schema=6),e<7&&(Drt(t),t.schema=7),e<8&&(t.schema=8),e<9&&(IZ(t),t.schema=9),e<10&&(Irt(t),t.schema=10),e<11&&(krt(t),t.schema=11),e<12&&(IZ(t),t.schema=12),e<13&&(Nrt(t),t.schema=13),e<14&&(zrt(t),t.schema=14),e<15&&(Frt(t),t.schema=15),e<16&&(Urt(t),t.schema=16),e<17&&(R0(t,kZ),D0(t,kZ),t.schema=17),e<18&&(R0(t,LZ),D0(t,LZ),t.schema=18),e<19&&(Mrt(t),t.schema=19),e<20&&(Vrt(t),jrt(t),t.schema=20),e<21&&(Grt(t),Wrt(t),t.schema=21),e<22&&(zZ(t),t.schema=22),e<23&&(qrt(t),t.schema=23),e<24&&($rt(t),t.schema=24),(e<25||t.shared.videos===void 0)&&(Brt(t),e<25&&(t.schema=25)),e<26&&(Rrt(t),t.schema=26),e<27&&(Ort(t),t.schema=27),e<28&&(zZ(t),t.schema=28),e<29&&(Lrt(t),t.schema=29),e<30&&(Xrt(t),t.schema=30),e<31&&(Yrt(t),t.schema=31),e<33&&(Krt(t),t.schema=33),e<34&&(Zrt(t),t.schema=34),e<35&&(Qrt(t),t.schema=35),e<36&&(Jrt(t),t.schema=36),e<37&&(est(t),t.schema=37),e<38&&(R0(t,NZ),D0(t,NZ),t.schema=38),e<39&&(tst(t),t.schema=39),e<40&&(nst(t),t.schema=40),e<41&&(ist(t),t.schema=41))}function _m(t,e=!1){let n=t[0].index!==null,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,l=new Ut,c=0;for(let d=0;d<t.length;++d){let u=t[d],h=0;if(n!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),h++}if(h!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(e){let f;if(n)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,d),c+=f}}if(n){let d=0,u=[];for(let h=0;h<t.length;++h){let f=t[h].index;for(let p=0;p<f.count;++p)u.push(f.getX(p)+d);d+=t[h].attributes.position.count}l.setIndex(u)}for(let d in s){let u=VZ(s[d]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,u)}for(let d in o){let u=o[d][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let h=0;h<u;++h){let f=[];for(let m=0;m<o[d].length;++m)f.push(o[d][m][h]);let p=VZ(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(p)}}return l}function VZ(t){let e,n,i,r=0;for(let a=0;a<t.length;++a){let l=t[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=l.itemSize),n!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}let s=new e(r),o=0;for(let a=0;a<t.length;++a)s.set(t[a].array,o),o+=t[a].array.length;return new Wt(s,n,i)}var sst=Math.pow(2,-24),OA=class{constructor(){}};function Zc(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function HZ(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){let r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function jZ(t,e){e.set(t)}function GZ(t,e,n){let i,r;for(let s=0;s<3;s++){let o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function LA(t,e,n){for(let i=0;i<3;i++){let r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function eb(t){let e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}function ost(t,e){if(!t.index){let n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r;n>65535?r=new Uint32Array(new i(4*n)):r=new Uint16Array(new i(2*n)),t.setIndex(new Wt(r,1));for(let s=0;s<n;s++)r[s]=s}}function ast(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];let e=[],n=new Set;for(let r of t.groups)n.add(r.start),n.add(r.start+r.count);let i=Array.from(n.values()).sort((r,s)=>r-s);for(let r=0;r<i.length-1;r++){let s=i[r],o=i[r+1];e.push({offset:s/3,count:(o-s)/3})}return e}function ZI(t,e,n,i,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0,u=1/0,h=1/0,f=1/0,p=-1/0,m=-1/0,g=-1/0,v=r!==null;for(let y=e*6,x=(e+n)*6;y<x;y+=6){let b=t[y+0],w=t[y+1],E=b-w,A=b+w;E<s&&(s=E),A>l&&(l=A),v&&b<u&&(u=b),v&&b>p&&(p=b);let S=t[y+2],C=t[y+3],T=S-C,P=S+C;T<o&&(o=T),P>c&&(c=P),v&&S<h&&(h=S),v&&S>m&&(m=S);let R=t[y+4],L=t[y+5],O=R-L,B=R+L;O<a&&(a=O),B>d&&(d=B),v&&R<f&&(f=R),v&&R>g&&(g=R)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=d,v&&(r[0]=u,r[1]=h,r[2]=f,r[3]=p,r[4]=m,r[5]=g)}function lst(t,e,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let d=e*6,u=(e+n)*6;d<u;d+=6){let h=t[d+0];h<r&&(r=h),h>a&&(a=h);let f=t[d+2];f<s&&(s=f),f>l&&(l=f);let p=t[d+4];p<o&&(o=p),p>c&&(c=p)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}function cst(t,e,n,i,r){let s=n,o=n+i-1,a=r.pos,l=r.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let d=t[s*3+c];t[s*3+c]=t[o*3+c],t[o*3+c]=d;let u=e[s*6+c*2+0];e[s*6+c*2+0]=e[o*6+c*2+0],e[o*6+c*2+0]=u;let h=e[s*6+c*2+1];e[s*6+c*2+1]=e[o*6+c*2+1],e[o*6+c*2+1]=h}s++,o--}else return s}}var Ku=32,ust=(t,e)=>t.candidate-e.candidate,Th=new Array(Ku).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),IA=new Float32Array(6);function dst(t,e,n,i,r,s){let o=-1,a=0;if(s===0)o=HZ(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===1)o=HZ(t),o!==-1&&(a=hst(n,i,r,o));else if(s===2){let l=eb(t),c=1.25*r,d=i*6,u=(i+r)*6;for(let h=0;h<3;h++){let f=e[h],p=(e[h+3]-f)/Ku;if(r<Ku/4){let m=[...Th];m.length=r;let g=0;for(let y=d;y<u;y+=6,g++){let x=m[g];x.candidate=n[y+2*h],x.count=0;let{bounds:b,leftCacheBounds:w,rightCacheBounds:E}=x;for(let A=0;A<3;A++)E[A]=1/0,E[A+3]=-1/0,w[A]=1/0,w[A+3]=-1/0,b[A]=1/0,b[A+3]=-1/0;LA(y,n,b)}m.sort(ust);let v=r;for(let y=0;y<v;y++){let x=m[y];for(;y+1<v&&m[y+1].candidate===x.candidate;)m.splice(y+1,1),v--}for(let y=d;y<u;y+=6){let x=n[y+2*h];for(let b=0;b<v;b++){let w=m[b];x>=w.candidate?LA(y,n,w.rightCacheBounds):(LA(y,n,w.leftCacheBounds),w.count++)}}for(let y=0;y<v;y++){let x=m[y],b=x.count,w=r-x.count,E=x.leftCacheBounds,A=x.rightCacheBounds,S=0;b!==0&&(S=eb(E)/l);let C=0;w!==0&&(C=eb(A)/l);let T=1+1.25*(S*b+C*w);T<c&&(o=h,c=T,a=x.candidate)}}else{for(let v=0;v<Ku;v++){let y=Th[v];y.count=0,y.candidate=f+p+v*p;let x=y.bounds;for(let b=0;b<3;b++)x[b]=1/0,x[b+3]=-1/0}for(let v=d;v<u;v+=6){let y=~~((n[v+2*h]-f)/p);y>=Ku&&(y=Ku-1);let x=Th[y];x.count++,LA(v,n,x.bounds)}let m=Th[Ku-1];jZ(m.bounds,m.rightCacheBounds);for(let v=Ku-2;v>=0;v--){let y=Th[v],x=Th[v+1];GZ(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<Ku-1;v++){let y=Th[v],x=y.count,b=y.bounds,w=Th[v+1].rightCacheBounds;x!==0&&(g===0?jZ(b,IA):GZ(b,IA,IA)),g+=x;let E=0,A=0;g!==0&&(E=eb(IA)/l);let S=r-g;S!==0&&(A=eb(w)/l);let C=1+1.25*(E*g+A*S);C<c&&(o=h,c=C,a=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function hst(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[s*6+i*2];return r/n}function fst(t,e){let n=t.attributes.position,i=n.array,r=t.index.array,s=r.length/3,o=new Float32Array(s*6),a=n.offset||0,l=3;n.isInterleavedBufferAttribute&&(l=n.data.stride);for(let c=0;c<s;c++){let d=c*3,u=c*6,h=r[d+0]*l+a,f=r[d+1]*l+a,p=r[d+2]*l+a;for(let m=0;m<3;m++){let g=i[h+m],v=i[f+m],y=i[p+m],x=g;v<x&&(x=v),y<x&&(x=y);let b=g;v>b&&(b=v),y>b&&(b=y);let w=(b-x)/2,E=m*2;o[u+E+0]=x+w,o[u+E+1]=w+(Math.abs(x)+w)*sst,x<e[m]&&(e[m]=x),b>e[m+3]&&(e[m+3]=b)}}return o}function pst(t,e){function n(v){h&&h(v/f)}function i(v,y,x,b=null,w=0){if(!p&&w>=l&&(p=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),x<=d||w>=l)return n(y+x),v.offset=y,v.count=x,v;let E=dst(v.boundingData,b,o,y,x,u);if(E.axis===-1)return n(y+x),v.offset=y,v.count=x,v;let A=cst(a,o,y,x,E);if(A===y||A===y+x)n(y+x),v.offset=y,v.count=x;else{v.splitAxis=E.axis;let S=new OA,C=y,T=A-y;v.left=S,S.boundingData=new Float32Array(6),ZI(o,C,T,S.boundingData,s),i(S,C,T,s,w+1);let P=new OA,R=A,L=x-T;v.right=P,P.boundingData=new Float32Array(6),ZI(o,R,L,P.boundingData,s),i(P,R,L,s,w+1)}return v}ost(t,e);let r=new Float32Array(6),s=new Float32Array(6),o=fst(t,r),a=t.index.array,l=e.maxDepth,c=e.verbose,d=e.maxLeafTris,u=e.strategy,h=e.onProgress,f=t.index.count/3,p=!1,m=[],g=ast(t);if(g.length===1){let v=g[0],y=new OA;y.boundingData=r,lst(o,v.offset,v.count,s),i(y,v.offset,v.count,s),m.push(y)}else for(let v of g){let y=new OA;y.boundingData=new Float32Array(6),ZI(o,v.offset,v.count,y.boundingData,s),i(y,v.offset,v.count,s),m.push(y)}return m}function mst(t,e){let n=pst(t,e),i,r,s,o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<n.length;d++){let u=n[d],h=l(u),f=new a(32*h);i=new Float32Array(f),r=new Uint32Array(f),s=new Uint16Array(f),c(0,u),o.push(f)}return o;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function c(d,u){let h=d/4,f=d/2,p=!!u.count,m=u.boundingData;for(let g=0;g<6;g++)i[h+g]=m[g];if(p){let g=u.offset,v=u.count;return r[h+6]=g,s[f+14]=v,s[f+15]=65535,d+32}else{let g=u.left,v=u.right,y=u.splitAxis,x;if(x=c(d+32,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[h+6]=x/4,x=c(x,v),r[h+7]=y,x}}}var Fd=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){let a=e[s][n];i=a<i?a:i,r=a>r?a:r}this.min=i,this.max=r}setFromPoints(e,n){let i=1/0,r=-1/0;for(let s=0,o=n.length;s<o;s++){let a=n[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};Fd.prototype.setFromBox=function(){let t=new q;return function(e,n){let i=n.min,r=n.max,s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){t.x=i.x*a+r.x*(1-a),t.y=i.y*l+r.y*(1-l),t.z=i.z*c+r.z*(1-c);let d=e.dot(t);s=Math.min(d,s),o=Math.max(d,o)}this.min=s,this.max=o}}();var gst=function(){let t=new q,e=new q,n=new q;return function(i,r,s){let o=i.start,a=t,l=r.start,c=e;n.subVectors(o,l),t.subVectors(i.end,r.start),e.subVectors(r.end,r.start);let d=n.dot(c),u=c.dot(a),h=c.dot(c),f=n.dot(a),p=a.dot(a)*h-u*u,m,g;p!==0?m=(d*u-f*h)/p:m=0,g=(d+m*u)/h,s.x=m,s.y=g}}(),BH=function(){let t=new Se,e=new q,n=new q;return function(i,r,s,o){gst(i,r,t);let a=t.x,l=t.y;if(a>=0&&a<=1&&l>=0&&l<=1){i.at(a,s),r.at(l,o);return}else if(a>=0&&a<=1){l<0?r.at(0,o):r.at(1,o),i.closestPointToPoint(o,!0,s);return}else if(l>=0&&l<=1){a<0?i.at(0,s):i.at(1,s),r.closestPointToPoint(s,!0,o);return}else{let c;a<0?c=i.start:c=i.end;let d;l<0?d=r.start:d=r.end;let u=e,h=n;if(i.closestPointToPoint(d,!0,e),r.closestPointToPoint(c,!0,n),u.distanceToSquared(d)<=h.distanceToSquared(c)){s.copy(u),o.copy(d);return}else{s.copy(c),o.copy(h);return}}}}(),vst=function(){let t=new q,e=new q,n=new ia,i=new cl;return function(r,s){let{radius:o,center:a}=r,{a:l,b:c,c:d}=s;if(i.start=l,i.end=c,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o||(i.start=l,i.end=d,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)||(i.start=c,i.end=d,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o))return!0;let u=s.getPlane(n);if(Math.abs(u.distanceToPoint(a))<=o){let h=u.projectPoint(a,e);if(s.containsPoint(h))return!0}return!1}}(),yst=1e-15;function Bv(t){return Math.abs(t)<yst}var Ud=class extends Eo{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new q),this.satBounds=new Array(4).fill().map(()=>new Fd),this.points=[this.a,this.b,this.c],this.sphere=new gl,this.plane=new ia,this.needsUpdate=!0}intersectsSphere(e){return vst(e,this)}update(){let e=this.a,n=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);let c=s[1],d=o[1];c.subVectors(e,n),d.setFromPoints(c,r);let u=s[2],h=o[2];u.subVectors(n,i),h.setFromPoints(u,r);let f=s[3],p=o[3];f.subVectors(i,e),p.setFromPoints(f,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};Ud.prototype.closestPointToSegment=function(){let t=new q,e=new q,n=new cl;return function(i,r=null,s=null){let{start:o,end:a}=i,l=this.points,c,d=1/0;for(let u=0;u<3;u++){let h=(u+1)%3;n.start.copy(l[u]),n.end.copy(l[h]),BH(n,i,t,e),c=t.distanceToSquared(e),c<d&&(d=c,r&&r.copy(t),s&&s.copy(e))}return this.closestPointToPoint(o,t),c=o.distanceToSquared(t),c<d&&(d=c,r&&r.copy(t),s&&s.copy(o)),this.closestPointToPoint(a,t),c=a.distanceToSquared(t),c<d&&(d=c,r&&r.copy(t),s&&s.copy(a)),Math.sqrt(d)}}();Ud.prototype.intersectsTriangle=function(){let t=new Ud,e=new Array(3),n=new Array(3),i=new Fd,r=new Fd,s=new q,o=new q,a=new q,l=new q,c=new cl,d=new cl,u=new cl;return function(h,f=null){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(t.copy(h),t.update(),h=t);let p=this.plane,m=h.plane;if(Math.abs(p.normal.dot(m.normal))>1-1e-10){let g=this.satBounds,v=this.satAxes;n[0]=h.a,n[1]=h.b,n[2]=h.c;for(let b=0;b<4;b++){let w=g[b],E=v[b];if(i.setFromPoints(E,n),w.isSeparated(i))return!1}let y=h.satBounds,x=h.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let b=0;b<4;b++){let w=y[b],E=x[b];if(i.setFromPoints(E,e),w.isSeparated(i))return!1}for(let b=0;b<4;b++){let w=v[b];for(let E=0;E<4;E++){let A=x[E];if(s.crossVectors(w,A),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let g=this.points,v=!1,y=0;for(let R=0;R<3;R++){let L=g[R],O=g[(R+1)%3];c.start.copy(L),c.end.copy(O),c.delta(o);let B=v?d.start:d.end,$=Bv(m.distanceToPoint(L));if(Bv(m.normal.dot(o))&&$){d.copy(c),y=2;break}if((m.intersectLine(c,B)||$)&&!Bv(B.distanceTo(O))){if(y++,v)break;v=!0}}if(y===1&&this.containsPoint(d.start))return f&&(f.start.copy(d.start),f.end.copy(d.start)),!0;if(y!==2)return!1;let x=h.points,b=!1,w=0;for(let R=0;R<3;R++){let L=x[R],O=x[(R+1)%3];c.start.copy(L),c.end.copy(O),c.delta(a);let B=b?u.start:u.end,$=Bv(p.distanceToPoint(L));if(Bv(p.normal.dot(a))&&$){u.copy(c),w=2;break}if((p.intersectLine(c,B)||$)&&!Bv(B.distanceTo(O))){if(w++,b)break;b=!0}}if(w===1&&this.containsPoint(u.start))return f&&(f.start.copy(u.start),f.end.copy(u.start)),!0;if(w!==2)return!1;if(d.delta(o),u.delta(a),o.dot(a)<0){let R=u.start;u.start=u.end,u.end=R}let E=d.start.dot(o),A=d.end.dot(o),S=u.start.dot(o),C=u.end.dot(o),T=A<S,P=E<C;return E!==C&&S!==A&&T===P?!1:(f&&(l.subVectors(d.start,u.start),l.dot(o)>0?f.start.copy(d.start):f.start.copy(u.start),l.subVectors(d.end,u.end),l.dot(o)<0?f.end.copy(d.end):f.end.copy(u.end)),!0)}}}();Ud.prototype.distanceToPoint=function(){let t=new q;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();Ud.prototype.distanceToTriangle=function(){let t=new q,e=new q,n=["a","b","c"],i=new cl,r=new cl;return function(s,o=null,a=null){let l=o||a?i:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let c=1/0;for(let d=0;d<3;d++){let u,h=n[d],f=s[h];this.closestPointToPoint(f,t),u=f.distanceToSquared(t),u<c&&(c=u,o&&o.copy(t),a&&a.copy(f));let p=this[h];s.closestPointToPoint(p,t),u=p.distanceToSquared(t),u<c&&(c=u,o&&o.copy(p),a&&a.copy(t))}for(let d=0;d<3;d++){let u=n[d],h=n[(d+1)%3];i.set(this[u],this[h]);for(let f=0;f<3;f++){let p=n[f],m=n[(f+1)%3];r.set(s[p],s[m]),BH(i,r,t,e);let g=t.distanceToSquared(e);g<c&&(c=g,o&&o.copy(t),a&&a.copy(e))}}return Math.sqrt(c)}}();var vu=class extends _r{constructor(...t){super(...t),this.isOrientedBox=!0,this.matrix=new tt,this.invMatrix=new tt,this.points=new Array(8).fill().map(()=>new q),this.satAxes=new Array(3).fill().map(()=>new q),this.satBounds=new Array(3).fill().map(()=>new Fd),this.alignedSatBounds=new Array(3).fill().map(()=>new Fd),this.needsUpdate=!1}set(t,e,n){super.set(t,e),this.matrix.copy(n),this.needsUpdate=!0}copy(t){super.copy(t),this.matrix.copy(t.matrix),this.needsUpdate=!0}};vu.prototype.update=function(){return function(){let t=this.matrix,e=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let d=0;d<=1;d++){let u=1*l|2*c|4*d,h=i[u];h.x=l?n.x:e.x,h.y=c?n.y:e.y,h.z=d?n.z:e.z,h.applyMatrix4(t)}let r=this.satBounds,s=this.satAxes,o=i[0];for(let l=0;l<3;l++){let c=s[l],d=r[l],u=1<<l,h=i[u];c.subVectors(o,h),d.setFromPoints(c,i)}let a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();vu.prototype.intersectsBox=function(){let t=new Fd;return function(e){this.needsUpdate&&this.update();let n=e.min,i=e.max,r=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(t.min=n.x,t.max=i.x,o[0].isSeparated(t)||(t.min=n.y,t.max=i.y,o[1].isSeparated(t))||(t.min=n.z,t.max=i.z,o[2].isSeparated(t)))return!1;for(let a=0;a<3;a++){let l=s[a],c=r[a];if(t.setFromBox(l,e),c.isSeparated(t))return!1}return!0}}();vu.prototype.intersectsTriangle=function(){let t=new Ud,e=new Array(3),n=new Fd,i=new Fd,r=new q;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);let o=this.satBounds,a=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let u=0;u<3;u++){let h=o[u],f=a[u];if(n.setFromPoints(f,e),h.isSeparated(n))return!1}let l=s.satBounds,c=s.satAxes,d=this.points;for(let u=0;u<3;u++){let h=l[u],f=c[u];if(n.setFromPoints(f,d),h.isSeparated(n))return!1}for(let u=0;u<3;u++){let h=a[u];for(let f=0;f<4;f++){let p=c[f];if(r.crossVectors(h,p),n.setFromPoints(r,e),i.setFromPoints(r,d),n.isSeparated(i))return!1}}return!0}}();vu.prototype.closestPointToPoint=function(){return function(t,e){return this.needsUpdate&&this.update(),e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e}}();vu.prototype.distanceToPoint=function(){let t=new q;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();vu.prototype.distanceToBox=function(){let t=["x","y","z"],e=new Array(12).fill().map(()=>new cl),n=new Array(12).fill().map(()=>new cl),i=new q,r=new q;return function(s,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),a&&a.copy(i),l&&l.copy(r)),0;let c=o*o,d=s.min,u=s.max,h=this.points,f=1/0;for(let m=0;m<8;m++){let g=h[m];r.copy(g).clamp(d,u);let v=g.distanceToSquared(r);if(v<f&&(f=v,a&&a.copy(g),l&&l.copy(r),v<c))return Math.sqrt(v)}let p=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(m+1)%3,x=(m+2)%3,b=g<<y|v<<x,w=1<<m|g<<y|v<<x,E=h[b],A=h[w];e[p].set(E,A);let S=t[m],C=t[y],T=t[x],P=n[p],R=P.start,L=P.end;R[S]=d[S],R[C]=g?d[C]:u[C],R[T]=v?d[T]:u[C],L[S]=u[S],L[C]=g?d[C]:u[C],L[T]=v?d[T]:u[C],p++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){r.x=m?u.x:d.x,r.y=g?u.y:d.y,r.z=v?u.z:d.z,this.closestPointToPoint(r,i);let y=r.distanceToSquared(i);if(y<f&&(f=y,a&&a.copy(i),l&&l.copy(r),y<c))return Math.sqrt(y)}for(let m=0;m<12;m++){let g=e[m];for(let v=0;v<12;v++){let y=n[v];BH(g,y,i,r);let x=i.distanceToSquared(r);if(x<f&&(f=x,a&&a.copy(i),l&&l.copy(r),x<c))return Math.sqrt(x)}}return Math.sqrt(f)}}();var kA=new q,NA=new q,BA=new q,WZ=new Se,qZ=new Se,$Z=new Se,XZ=new q;function xst(t,e,n,i,r,s){let o;return s===Qr?o=t.intersectTriangle(i,n,e,!0,r):o=t.intersectTriangle(e,n,i,s!==ca,r),o===null?null:{distance:t.origin.distanceTo(r),point:r.clone()}}function bst(t,e,n,i,r,s,o){kA.fromBufferAttribute(e,i),NA.fromBufferAttribute(e,r),BA.fromBufferAttribute(e,s);let a=xst(t,kA,NA,BA,XZ,o);if(a){n&&(WZ.fromBufferAttribute(n,i),qZ.fromBufferAttribute(n,r),$Z.fromBufferAttribute(n,s),a.uv=Eo.getUV(XZ,kA,NA,BA,WZ,qZ,$Z,new Se));let l={a:i,b:r,c:s,normal:new q,materialIndex:0};Eo.getNormal(kA,NA,BA,l.normal),a.face=l,a.faceIndex=i}return a}function yde(t,e,n,i,r){let s=i*3,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),c=bst(n,t.attributes.position,t.attributes.uv,o,a,l,e);return c?(c.faceIndex=i,r&&r.push(c),c):null}function wst(t,e,n,i,r,s){for(let o=i,a=i+r;o<a;o++)yde(t,e,n,o,s)}function _st(t,e,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){let c=yde(t,e,n,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function xde(t,e,n){return t===null||(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far)?null:t}function Gc(t,e,n,i){let r=t.a,s=t.b,o=t.c,a=e,l=e+1,c=e+2;n&&(a=n.getX(e),l=n.getX(e+1),c=n.getX(e+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function YZ(t,e,n,i,r,s,o){let a=n.index,l=n.attributes.position;for(let c=t,d=e+t;c<d;c++)if(Gc(o,c*3,a,l),o.needsUpdate=!0,i(o,c,r,s))return!0;return!1}var bde=class{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){let t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}};function Yh(t,e){return e[t+15]===65535}function ey(t,e){return e[t+6]}function B_(t,e){return e[t+14]}function z_(t){return t+8}function F_(t,e){return e[t+6]}function Sst(t,e){return e[t+7]}var O0=new _r,F2=new q,Est=["x","y","z"];function kF(t,e,n,i,r){let s=t*2,o=zx,a=Pf,l=Df;if(Yh(s,a)){let c=ey(t,l),d=B_(s,a);wst(e,n,i,c,d,r)}else{let c=z_(t);U2(c,o,i,F2)&&kF(c,e,n,i,r);let d=F_(t,l);U2(d,o,i,F2)&&kF(d,e,n,i,r)}}function NF(t,e,n,i){let r=t*2,s=zx,o=Pf,a=Df;if(Yh(r,o)){let l=ey(t,a),c=B_(r,o);return _st(e,n,i,l,c)}else{let l=Sst(t,a),c=Est[l],d=i.direction[c]>=0,u,h;d?(u=z_(t),h=F_(t,a)):(u=F_(t,a),h=z_(t));let f=U2(u,s,i,F2)?NF(u,e,n,i):null;if(f){let m=f.point[c];if(d?m<=s[h+l]:m>=s[h+l+3])return f}let p=U2(h,s,i,F2)?NF(h,e,n,i):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var Mst=function(){let t,e,n=[],i=new bde(()=>new _r);return function(...s){t=i.getPrimitive(),e=i.getPrimitive(),n.push(t,e);let o=r(...s);i.releasePrimitive(t),i.releasePrimitive(e),n.pop(),n.pop();let a=n.length;return a>0&&(e=n[a-1],t=n[a-2]),o};function r(s,o,a,l,c=null,d=0,u=0){function h(y){let x=y*2,b=Pf,w=Df;for(;!Yh(x,b);)y=z_(y),x=y*2;return ey(y,w)}function f(y){let x=y*2,b=Pf,w=Df;for(;!Yh(x,b);)y=F_(y,w),x=y*2;return ey(y,w)+B_(x,b)}let p=s*2,m=zx,g=Pf,v=Df;if(Yh(p,g)){let y=ey(s,v),x=B_(p,g);return Zc(s,m,t),l(y,x,!1,u,d+s,t)}else{let y=z_(s),x=F_(s,v),b=y,w=x,E,A,S,C;if(c&&(S=t,C=e,Zc(b,m,S),Zc(w,m,C),E=c(S),A=c(C),A<E)){b=x,w=y;let $=E;E=A,A=$,S=C}S||(S=t,Zc(b,m,S));let T=Yh(b*2,g),P=a(S,T,E,u+1,d+b),R;if(P===2){let $=h(b),X=f(b)-$;R=l($,X,!0,u+1,d+b,S)}else R=P&&r(b,o,a,l,c,d,u+1);if(R)return!0;C=e,Zc(w,m,C);let L=Yh(w*2,g),O=a(C,L,A,u+1,d+w),B;if(O===2){let $=h(w),X=f(w)-$;B=l($,X,!0,u+1,d+w,C)}else B=O&&r(w,o,a,l,c,d,u+1);return!!B}}}(),Ast=function(){let t=new Ud,e=new Ud,n=new tt,i=new vu,r=new vu;return function s(o,a,l,c,d=null){let u=o*2,h=zx,f=Pf,p=Df;if(d===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),d=i),Yh(u,f)){let m=a,g=m.index,v=m.attributes.position,y=l.index,x=l.attributes.position,b=ey(o,p),w=B_(u,f);if(n.copy(c).invert(),l.boundsTree)return Zc(o,h,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:E=>r.intersectsBox(E),intersectsTriangle:E=>{E.a.applyMatrix4(c),E.b.applyMatrix4(c),E.c.applyMatrix4(c),E.needsUpdate=!0;for(let A=b*3,S=(w+b)*3;A<S;A+=3)if(Gc(e,A,g,v),e.needsUpdate=!0,E.intersectsTriangle(e))return!0;return!1}});for(let E=b*3,A=w+b*3;E<A;E+=3){Gc(t,E,g,v),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let S=0,C=y.count;S<C;S+=3)if(Gc(e,S,y,x),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}else{let m=o+8,g=p[o+6];return Zc(m,h,O0),!!(d.intersectsBox(O0)&&s(m,a,l,c,d)||(Zc(g,h,O0),d.intersectsBox(O0)&&s(g,a,l,c,d)))}}}();function U2(t,e,n,i){return Zc(t,e,O0),n.intersectBox(O0,i)}var BF=[],KT,zx,Pf,Df;function Ib(t){KT&&BF.push(KT),KT=t,zx=new Float32Array(t),Pf=new Uint16Array(t),Df=new Uint32Array(t)}function zA(){KT=null,zx=null,Pf=null,Df=null,BF.length&&Ib(BF.pop())}var QI=Symbol("skip tree generation"),JI=new _r,ek=new _r,zv=new tt,Lp=new vu,tb=new vu,nb=new q,FA=new q,Tst=new q,Cst=new q,Pst=new q,KZ=new _r,Mc=new bde(()=>new Ud),hs=class{static serialize(t,e={}){if(e.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),hs.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});e={cloneBuffers:!0,...e};let n=t.geometry,i=t._roots,r=n.getIndex(),s;return e.cloneBuffers?s={roots:i.map(o=>o.slice()),index:r.array.slice()}:s={roots:i,index:r.array},s}static deserialize(t,e,n={}){if(typeof n=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),hs.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});n={setIndex:!0,...n};let{index:i,roots:r}=t,s=new hs(e,{...n,[QI]:!0});if(s._roots=r,n.setIndex){let o=e.getIndex();if(o===null){let a=new Wt(t.index,1,!1);e.setIndex(a)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return s}constructor(t,e={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[QI]:!1},e),e.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,e[QI]||(this._roots=mst(t,e),!t.boundingBox&&e.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new _r))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));let e=this.geometry,n=e.index.array,i=e.attributes.position,r=i.array,s=i.offset||0,o=3;i.isInterleavedBufferAttribute&&(o=i.data.stride);let a,l,c,d,u=0,h=this._roots;for(let p=0,m=h.length;p<m;p++)a=h[p],l=new Uint32Array(a),c=new Uint16Array(a),d=new Float32Array(a),f(0,u),u+=a.byteLength;function f(p,m,g=!1){let v=p*2;if(c[v+15]===65535){let y=l[p+6],x=c[v+14],b=1/0,w=1/0,E=1/0,A=-1/0,S=-1/0,C=-1/0;for(let T=3*y,P=3*(y+x);T<P;T++){let R=n[T]*o+s,L=r[R+0],O=r[R+1],B=r[R+2];L<b&&(b=L),L>A&&(A=L),O<w&&(w=O),O>S&&(S=O),B<E&&(E=B),B>C&&(C=B)}return d[p+0]!==b||d[p+1]!==w||d[p+2]!==E||d[p+3]!==A||d[p+4]!==S||d[p+5]!==C?(d[p+0]=b,d[p+1]=w,d[p+2]=E,d[p+3]=A,d[p+4]=S,d[p+5]=C,!0):!1}else{let y=p+8,x=l[p+6],b=y+m,w=x+m,E=g,A=!1,S=!1;t?E||(A=t.has(b),S=t.has(w),E=!A&&!S):(A=!0,S=!0);let C=E||A,T=E||S,P=!1;C&&(P=f(y,m,E));let R=!1;T&&(R=f(x,m,E));let L=P||R;if(L)for(let O=0;O<3;O++){let B=y+O,$=x+O,X=d[B],H=d[B+3],U=d[$],N=d[$+3];d[p+O]=X<U?X:U,d[p+O+3]=H>N?H:N}return L}}}traverse(t,e=0){let n=this._roots[e],i=new Uint32Array(n),r=new Uint16Array(n);s(0);function s(o,a=0){let l=o*2,c=r[l+15]===65535;if(c){let d=i[o+6],u=r[l+14];t(a,c,new Float32Array(n,o*4,6),d,u)}else{let d=o+8,u=i[o+6],h=i[o+7];t(a,c,new Float32Array(n,o*4,6),h)||(s(d,a+1),s(u,a+1))}}}raycast(t,e=oc){let n=this._roots,i=this.geometry,r=[],s=e.isMaterial,o=Array.isArray(e),a=i.groups,l=s?e.side:e;for(let c=0,d=n.length;c<d;c++){let u=o?e[a[c].materialIndex].side:l,h=r.length;if(Ib(n[c]),kF(0,i,u,t,r),zA(),o){let f=a[c].materialIndex;for(let p=h,m=r.length;p<m;p++)r[p].face.materialIndex=f}}return r}raycastFirst(t,e=oc){let n=this._roots,i=this.geometry,r=e.isMaterial,s=Array.isArray(e),o=null,a=i.groups,l=r?e.side:e;for(let c=0,d=n.length;c<d;c++){let u=s?e[a[c].materialIndex].side:l;Ib(n[c]);let h=NF(0,i,u,t);zA(),h!=null&&(o==null||h.distance<o.distance)&&(o=h,s&&(h.face.materialIndex=a[c].materialIndex))}return o}intersectsGeometry(t,e){let n=this.geometry,i=!1;for(let r of this._roots)if(Ib(r),i=Ast(0,n,t,e),zA(),i)break;return i}shapecast(t,e,n){let i=this.geometry;if(t instanceof Function){if(e){let u=e;e=(h,f,p,m)=>{let g=f*3;return u(h,g,g+1,g+2,p,m)}}t={boundsTraverseOrder:n,intersectsBounds:t,intersectsTriangle:e,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let r=Mc.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=t;if(a&&l){let u=a;a=(h,f,p,m,g)=>u(h,f,p,m,g)?!0:YZ(h,f,i,l,p,m,r)}else a||(l?a=(u,h,f,p)=>YZ(u,h,i,l,f,p,r):a=(u,h,f)=>f);let c=!1,d=0;for(let u of this._roots){if(Ib(u),c=Mst(0,i,o,a,s,d),zA(),c)break;d+=u.byteLength}return Mc.releasePrimitive(r),c}bvhcast(t,e,n){let{intersectsRanges:i,intersectsTriangles:r}=n,s=this.geometry.index,o=this.geometry.attributes.position,a=t.geometry.index,l=t.geometry.attributes.position;zv.copy(e).invert();let c=Mc.getPrimitive(),d=Mc.getPrimitive();if(r){let h=function(f,p,m,g,v,y,x,b){for(let w=m,E=m+g;w<E;w++){Gc(d,w*3,a,l),d.a.applyMatrix4(e),d.b.applyMatrix4(e),d.c.applyMatrix4(e),d.needsUpdate=!0;for(let A=f,S=f+p;A<S;A++)if(Gc(c,A*3,s,o),c.needsUpdate=!0,r(c,d,A,w,v,y,x,b))return!0}return!1};if(i){let f=i;i=function(p,m,g,v,y,x,b,w){return f(p,m,g,v,y,x,b,w)?!0:h(p,m,g,v,y,x,b,w)}}else i=h}t.getBoundingBox(ek),ek.applyMatrix4(e);let u=this.shapecast({intersectsBounds:h=>ek.intersectsBox(h),intersectsRange:(h,f,p,m,g,v)=>(JI.copy(v),JI.applyMatrix4(zv),t.shapecast({intersectsBounds:y=>JI.intersectsBox(y),intersectsRange:(y,x,b,w,E)=>i(h,f,y,x,m,g,w,E)}))});return Mc.releasePrimitive(c),Mc.releasePrimitive(d),u}intersectsBox(t,e){return Lp.set(t.min,t.max,e),Lp.needsUpdate=!0,this.shapecast({intersectsBounds:n=>Lp.intersectsBox(n),intersectsTriangle:n=>Lp.intersectsTriangle(n)})}intersectsSphere(t){return this.shapecast({intersectsBounds:e=>t.intersectsBox(e),intersectsTriangle:e=>e.intersectsSphere(t)})}closestPointToGeometry(t,e,n={},i={},r=0,s=1/0){t.boundingBox||t.computeBoundingBox(),Lp.set(t.boundingBox.min,t.boundingBox.max,e),Lp.needsUpdate=!0;let o=this.geometry,a=o.attributes.position,l=o.index,c=t.attributes.position,d=t.index,u=Mc.getPrimitive(),h=Mc.getPrimitive(),f=FA,p=Tst,m=null,g=null;i&&(m=Cst,g=Pst);let v=1/0,y=null,x=null;return zv.copy(e).invert(),tb.matrix.copy(zv),this.shapecast({boundsTraverseOrder:b=>Lp.distanceToBox(b),intersectsBounds:(b,w,E)=>E<v&&E<s?(w&&(tb.min.copy(b.min),tb.max.copy(b.max),tb.needsUpdate=!0),!0):!1,intersectsRange:(b,w)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:E=>tb.distanceToBox(E),intersectsBounds:(E,A,S)=>S<v&&S<s,intersectsRange:(E,A)=>{for(let S=E*3,C=(E+A)*3;S<C;S+=3){Gc(h,S,d,c),h.a.applyMatrix4(e),h.b.applyMatrix4(e),h.c.applyMatrix4(e),h.needsUpdate=!0;for(let T=b*3,P=(b+w)*3;T<P;T+=3){Gc(u,T,l,a),u.needsUpdate=!0;let R=u.distanceToTriangle(h,f,m);if(R<v&&(p.copy(f),g&&g.copy(m),v=R,y=T/3,x=S/3),R<r)return!0}}}});{let E=d?d.count:c.count;for(let A=0,S=E;A<S;A+=3){Gc(h,A,d,c),h.a.applyMatrix4(e),h.b.applyMatrix4(e),h.c.applyMatrix4(e),h.needsUpdate=!0;for(let C=b*3,T=(b+w)*3;C<T;C+=3){Gc(u,C,l,a),u.needsUpdate=!0;let P=u.distanceToTriangle(h,f,m);if(P<v&&(p.copy(f),g&&g.copy(m),v=P,y=C/3,x=A/3),P<r)return!0}}}}}),Mc.releasePrimitive(u),Mc.releasePrimitive(h),v===1/0?null:(n.point?n.point.copy(p):n.point=p.clone(),n.distance=v,n.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(zv),p.applyMatrix4(zv),i.distance=p.sub(i.point).length(),i.faceIndex=x),n)}closestPointToPoint(t,e={},n=0,i=1/0){let r=n*n,s=i*i,o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:c=>(nb.copy(t).clamp(c.min,c.max),nb.distanceToSquared(t)),intersectsBounds:(c,d,u)=>u<o&&u<s,intersectsTriangle:(c,d)=>{c.closestPointToPoint(t,nb);let u=t.distanceToSquared(nb);return u<o&&(FA.copy(nb),o=u,a=d),u<r}}),o===1/0)return null;let l=Math.sqrt(o);return e.point?e.point.copy(FA):e.point=FA.clone(),e.distance=l,e.faceIndex=a,e}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(e=>{Zc(0,new Float32Array(e),KZ),t.union(KZ)}),t}},ZZ=hs.prototype.raycast;hs.prototype.raycast=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[e,n,i,r]=t;return ZZ.call(this,i,e.material).forEach(s=>{s=xde(s,e,n),s&&r.push(s)}),r}else return ZZ.apply(this,t)};var QZ=hs.prototype.raycastFirst;hs.prototype.raycastFirst=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[e,n,i]=t;return xde(QZ.call(this,i,e.material),e,n)}else return QZ.apply(this,t)};var JZ=hs.prototype.closestPointToPoint;hs.prototype.closestPointToPoint=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),t.unshift();let e=t[1],n={};return t[1]=n,JZ.apply(this,t),e&&e.copy(n.point),n.distance}else return JZ.apply(this,t)};var eQ=hs.prototype.closestPointToGeometry;hs.prototype.closestPointToGeometry=function(...t){let e=t[2],n=t[3];if(e&&e.isVector3||n&&n.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let i={},r={},s=t[1];return t[2]=i,t[3]=r,eQ.apply(this,t),e&&e.copy(i.point),n&&n.copy(r.point).applyMatrix4(s),i.distance}else return eQ.apply(this,t)};var tQ=hs.prototype.refit;hs.prototype.refit=function(...t){let e=t[0],n=t[1];if(n&&(n instanceof Set||Array.isArray(n))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let i=new Set;n.forEach(r=>i.add(r)),e&&e.forEach(r=>i.add(r)),tQ.call(this,i)}else tQ.apply(this,t)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(t=>{let e=hs.prototype[t];hs.prototype[t]=function(...n){return(n[0]===null||n[0].isMesh)&&(n.shift(),console.warn(`MeshBVH: The function signature for "${t}" has changed and no longer takes Mesh. See docs for new signature.`)),e.apply(this,n)}});var ib=CS(xWe()),Dst=.5*(Math.sqrt(3)-1),rb=(3-Math.sqrt(3))/6,Rst=1/3,Ac=1/6,mw=t=>Math.floor(t)|0,nQ=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),tk=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function nk(t=Math.random){let e=wde(t),n=new Float64Array(e).map(r=>nQ[r%12*2]),i=new Float64Array(e).map(r=>nQ[r%12*2+1]);return function(r,s){let o=0,a=0,l=0,c=(r+s)*Dst,d=mw(r+c),u=mw(s+c),h=(d+u)*rb,f=d-h,p=u-h,m=r-f,g=s-p,v,y;m>g?(v=1,y=0):(v=0,y=1);let x=m-v+rb,b=g-y+rb,w=m-1+2*rb,E=g-1+2*rb,A=d&255,S=u&255,C=.5-m*m-g*g;if(C>=0){let R=A+e[S],L=n[R],O=i[R];C*=C,o=C*C*(L*m+O*g)}let T=.5-x*x-b*b;if(T>=0){let R=A+v+e[S+y],L=n[R],O=i[R];T*=T,a=T*T*(L*x+O*b)}let P=.5-w*w-E*E;if(P>=0){let R=A+1+e[S+1],L=n[R],O=i[R];P*=P,l=P*P*(L*w+O*E)}return 70*(o+a+l)}}function Ost(t=Math.random){let e=wde(t),n=new Float64Array(e).map(s=>tk[s%12*3]),i=new Float64Array(e).map(s=>tk[s%12*3+1]),r=new Float64Array(e).map(s=>tk[s%12*3+2]);return function(s,o,a){let l,c,d,u,h=(s+o+a)*Rst,f=mw(s+h),p=mw(o+h),m=mw(a+h),g=(f+p+m)*Ac,v=f-g,y=p-g,x=m-g,b=s-v,w=o-y,E=a-x,A,S,C,T,P,R;b>=w?w>=E?(A=1,S=0,C=0,T=1,P=1,R=0):b>=E?(A=1,S=0,C=0,T=1,P=0,R=1):(A=0,S=0,C=1,T=1,P=0,R=1):w<E?(A=0,S=0,C=1,T=0,P=1,R=1):b<E?(A=0,S=1,C=0,T=0,P=1,R=1):(A=0,S=1,C=0,T=1,P=1,R=0);let L=b-A+Ac,O=w-S+Ac,B=E-C+Ac,$=b-T+2*Ac,X=w-P+2*Ac,H=E-R+2*Ac,U=b-1+3*Ac,N=w-1+3*Ac,k=E-1+3*Ac,z=f&255,W=p&255,K=m&255,J=.6-b*b-w*w-E*E;if(J<0)l=0;else{let te=z+e[W+e[K]];J*=J,l=J*J*(n[te]*b+i[te]*w+r[te]*E)}let F=.6-L*L-O*O-B*B;if(F<0)c=0;else{let te=z+A+e[W+S+e[K+C]];F*=F,c=F*F*(n[te]*L+i[te]*O+r[te]*B)}let ee=.6-$*$-X*X-H*H;if(ee<0)d=0;else{let te=z+T+e[W+P+e[K+R]];ee*=ee,d=ee*ee*(n[te]*$+i[te]*X+r[te]*H)}let ie=.6-U*U-N*N-k*k;if(ie<0)u=0;else{let te=z+1+e[W+1+e[K+1]];ie*=ie,u=ie*ie*(n[te]*U+i[te]*N+r[te]*k)}return 32*(l+c+d+u)}}function wde(t){let e=new Uint8Array(512);for(let n=0;n<512/2;n++)e[n]=n;for(let n=0;n<512/2-1;n++){let i=n+~~(t()*(256-n)),r=e[n];e[n]=e[i],e[i]=r}for(let n=256;n<512;n++)e[n]=e[n-256];return e}var Il=new Eo,Lst=class{constructor(t){this.weightAttribute=null;let e=t.geometry;if(!e.isBufferGeometry||e.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");e.index&&(e=e.toNonIndexed()),this.geometry=e,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let t=this.positionAttribute,e=new Float32Array(t.count/3);for(let i=0;i<t.count;i+=3){let r=1;Il.a.fromBufferAttribute(t,i),Il.b.fromBufferAttribute(t,i+1),Il.c.fromBufferAttribute(t,i+2),r*=Il.getArea(),e[i/3]=r}this.distribution=new Float32Array(t.count/3);let n=0;for(let i=0;i<e.length;i++)n+=e[i],this.distribution[i]=n;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,e){if(this.distribution){let n=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*n);return this.sampleFace(i,t,e)}}binarySearch(t){if(!this.distribution)return 0;let e=this.distribution,n=0,i=e.length-1,r=-1;for(;n<=i;){let s=Math.ceil((n+i)/2);if(s===0||e[s-1]<=t&&e[s]>t){r=s;break}else t<e[s]?i=s-1:n=s+1}return r}sampleFace(t,e,n){let i=this.randomFunction(),r=this.randomFunction();return i+r>1&&(i=1-i,r=1-r),Il.a.fromBufferAttribute(this.positionAttribute,t*3),Il.b.fromBufferAttribute(this.positionAttribute,t*3+1),Il.c.fromBufferAttribute(this.positionAttribute,t*3+2),e.set(0,0,0).addScaledVector(Il.a,i).addScaledVector(Il.b,r).addScaledVector(Il.c,1-(i+r)),Il.getNormal(n),this}},Ist=CS(mce()),kst=new tt,Nst=new tt,Bst=new tt,V2;(t=>{function e(n){return n&&n.__isSPEObject}t.is=e})(V2||(V2={}));var zH=t=>class extends t{constructor(){super(...arguments),this.previousModelViewMatrix=new tt,this.copyPreviousMatrix=!0,this.hiddenMatrix=new tt,this.matrixWorldRigid=new tt,this.shearScale=new tt,this.shearScaleInv=new tt}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof ei&&(e=e.uuid);let n=this;for(;n.parent;){if(n.parent.uuid===e)return!0;n=n.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let n of this.children)n.updateMatrixWorld(e)}updateWorldMatrix(e,n){let i=this.parent;if(e&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),n)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseObject(e,n=0){if(e(this,n)!==!0)for(let i of this.children)V2.is(i)&&i.traverseObject(e,n+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,n=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:i,v:r,q:s}=(0,Ist.SVD)(n),o=kst.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=Nst.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=Bst.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,n){this.updateWorldMatrix(!0,!1);let i=new tt().copy(this.matrixWorld).invert();return e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),i.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof tt?e.hiddenMatrix.premultiply(i):e.applyMatrix4(i),e.updateWorldMatrix(!1,!1),this.add(e),n!==void 0&&(this.children.pop(),this.children.splice(n,0,e)),this}copy(e,n=!1){return super.copy(e,n),this.hasNonUniformScale=e.hasNonUniformScale,this}onAfterRender(e,n,i,r,s,o){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},zst=class extends zH(ei){},Fst=t=>t.type==="Mesh",io=class extends zst{constructor(t){super(),this.object=t,this.matrixAutoUpdate=!1,this.hasNonUniformScale=t.hasNonUniformScale}raycast(t,e){}expand(){let t=0,e=this.object.entityChildren(t);for(;e;){let n=this.children[t];(n==null?void 0:n.object)!==e&&(n&&this.remove(n),n=new io(e),this.add(n),this.children.splice(t,0,this.children.pop()),n.matrixWorldNeedsUpdate=!0,n.matrixAutoUpdate=!1,n.matrix=e.matrix,n.hiddenMatrix=e.hiddenMatrix),n.expand(),t+=1,e=this.object.entityChildren(t)}for(;this.children.length>t;)this.remove(this.children[t])}get visible(){var t;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((t=this.object.dataPatched.cloner)==null?void 0:t.hideBase)===!0}set visible(t){}get castShadow(){return this.object.castShadow}set castShadow(t){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(t){}get isMesh(){return Fst(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(t){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},sm=new q,om=new q,ty=new tt,_de=[new q(-1,1,1),new q(-1,-1,1),new q(1,-1,1),new q(1,1,1),new q(-1,1,-1),new q(-1,-1,-1),new q(1,-1,-1),new q(1,1,-1)],Ust=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],Vst=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],iQ=(t,e,n)=>{t.updateEntityBoxSize(sm,om),ty.copy(e).multiply(t.matrixWorld),om.x===0&&om.y===0&&om.z===0?n.push(new q(sm.x,sm.y,sm.z).applyMatrix4(ty)):_de.forEach(i=>{n.push(i.clone().multiply(om).add(sm).applyMatrix4(ty))})},rQ=class extends _r{constructor(){super(...arguments),this.matrix=new tt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(t){return super.copy(t),this.matrix.copy(t.matrix),this.vertices=t.vertices.map(e=>e.clone()),this.faces=t.faces.map(e=>e.clone()),this.edges=t.edges.map(e=>e.clone()),this.centerEdges=t.centerEdges.map(e=>e.clone()),this}setFromObjectSize(t,e=!1){t.updateWorldMatrix(!1,e),this.makeEmpty(),this.matrix.copy(t.matrixWorld);let n=new tt().copy(t.matrixWorld).invert();return this.expandByObjectSize(t,n,e)}expandByObjectSize(t,e,n=!1){let i=[];return n===!0?t.traverseEntity(r=>{if(r.visible||r.cloner&&r.data.visible){if(!("geometry"in r)){i.push(new q);return}iQ(r,e,i)}}):iQ(t,e,i),this.setFromPoints(i)}getCenter(t){return t=super.getCenter(t),t.applyMatrix4(this.matrix),t}getPositionToCenter(t){return t=super.getCenter(t),t.applyMatrix4(ty.copy(this.matrix).setPosition(0,0,0)),t}computeVertices(){this.getSize(om).multiplyScalar(.5),this.getCenter(sm),ty.copy(this.matrix).setPosition(sm),this.vertices=_de.map(t=>t.clone().multiply(om).applyMatrix4(ty))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=Ust.map(([t,e])=>new cl(this.vertices[t],this.vertices[e])),this.centerEdges=this.edges.map(t=>t.getCenter(new q))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=Vst.map(([t,e])=>this.vertices[t].clone().add(this.vertices[e]).multiplyScalar(.5))}},lf={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},Hst=class extends Uce{constructor(){super()}getPoints(t=12){let e=[],n,i=this.getCurveLengths(),r=i[i.length-1]/i.length;for(let s=0,o=this.curves;s<o.length;s++){let a=o[s],l=s===0?i[s]:i[s]-i[s-1],c=Math.ceil(t*l/r),d=a.getPoints(c);for(let u=0;u<d.length;u++){let h=d[u];n&&n.equals(h)||(e.push(h),n=h)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}},zF=.001;function FF(t,e,n){return e.clone().sub(t).cross(e.clone().sub(n)).length()<=zF}function ik(t,e){let n=new q(...t.position),i=new q(...t.controlNext.position),r=new q(...e.controlPrevious.position),s=new q(...e.position);return FF(n,i,s)&&FF(n,r,s)}function Sde(t){let e=t.points.map(d=>new q(...d.data.position)),n=[t.points[0]],i=new q(...n[0].data.position);for(let d=0;d<t.points.length-1;d++)FF(i,e[d],e[d+1])||(n.push(t.points[d]),i=e[d]);n.push(t.points[t.points.length-1]);let r=t.isClosed,s=n.length-(r?0:1),o=n.length,a=[];for(let d=0;d<o;d++){let u=n[d].data,h=new q(...u.position),f=new q(...u.controlPrevious.position),p=new q(...u.controlNext.position),m={position:h,baseRoundness:u.roundness,controlPrevious:f,controlNext:p};if(u.roundness===0||!t.isClosed&&(d===0||d===o-1)){a[d]={...m,removedLength:0};continue}let g=r&&d==0?o-1:d-1,v=r&&d==o-1?0:d+1,y=n[g].data,x=n[v].data,b=new q(...y.position),w=new q(...x.position),E=b.clone().sub(h).normalize(),A=w.clone().sub(h).normalize();Object.assign(m,{prevDir:E,nextDir:A});let S=ik(y,u),C=ik(u,x);if(!S||!C)a[d]={...m,removedLength:0};else{let T=E.clone().add(A).normalize(),P=T.clone().cross(E).length()/E.dot(T);a[d]={...m,tan:P,removedLength:u.roundness/P}}}for(let d=0;d<s;d++){let u=d,h=r&&d===o-1?0:d+1,f=a[u],p=a[h];if(f.removedLength!==0||p.removedLength!==0){let m=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,m/2),p.removedLength=Math.min(p.removedLength,m/2)}}let l=[];for(let d=0;d<s;d++){let u=d,h=r&&d===o-1?0:d+1,f=a[u],p=a[h],m=null;if(!ik(n[u].data,n[h].data))f.position.distanceTo(p.position)>zF&&(m=new WT(f.position,f.controlNext,p.controlPrevious,p.position));else{let g=f.position.clone(),v=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&g.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&v.add(p.prevDir.clone().setLength(p.removedLength))),g.distanceTo(v)>zF&&(m=new WT(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*d+1]=m}for(let d=0;d<o;d++){let u=a[d];if(u.removedLength===0){l[2*d]=null;continue}let h=u.position,f=u.prevDir.clone().multiplyScalar(u.removedLength).add(h),p=u.nextDir.clone().multiplyScalar(u.removedLength).add(h),m=u.tan*u.removedLength,g=u.prevDir.clone().add(u.nextDir).normalize(),v=f.clone().lerp(p,.5),y=f.distanceTo(p)/2,x=g.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(y,2))).add(v),b=g.clone().multiplyScalar(-m).add(x),w=h.distanceTo(b)/h.distanceTo(v),E=u.prevDir.clone().multiplyScalar(w*h.distanceTo(f)).add(h),A=E.clone().lerp(b,2),S=f.clone().lerp(E,4/3),C=p.clone().lerp(A,4/3);l[2*d]=new WT(f,S,C,p)}let c=new Hst;return l.forEach(d=>{d&&c.add(d)}),c}var Vn;(t=>{function e(n){return n&&n.__isEntity}t.is=e})(Vn||(Vn={}));var Kh=t=>Vn.is(t),jst={type:"completeState",isfromEntity:!0},Ede=t=>class extends zH(t){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new rQ,this._recursiveBBox=new rQ,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let n=this.children[e];if(Vn.is(n))return n}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let e=this;for(;e.data.type!=="Instance";){let n=e.parent;if(Vn.is(n))e=n;else return}return e}forInstancesRec(e){this.instances.forEach(n=>{n.disposed||e(n),n.forInstancesRec(e)})}super_Entity(e,n){typeof e=="string"&&(this.uuid=e),this.identity=e,this.data=n,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,n,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)wm.toOps(this.data,r.data).forEach(s=>{let o=hF.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,n)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=wm.patch(this.data,r),wm.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,n)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,n){e.setScalar(0),n.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{Kh(e)&&e.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(e=>{e.resetBBoxNeedsUpdateSelf()})}find(e){let n;return this.traverseEntity(i=>{i.uuid===e&&(n=i)}),n}traverseSortNextHelper(){let e=this.parent;if(e){let n=e.children,i=n.indexOf(this)+1;if(Vn.is(n[i]))return n[i];if(Vn.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&Vn.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let n=this;for(;e>0&&n!==null;)n=n.parent,e-=1;return n}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let n=this.parent;for(;n;){if(e===n)return!0;n=n.parent}return!1}countToAccestor(e){let n=0,i=this;for(;i!==e;){if(i===null)return-1;i=i.parent,n+=1}return n}forEachEntity(e){for(let n of this.children)Kh(n)&&e(n)}traverseEntityAncestors(e){this.traverseAncestors(n=>{Vn.is(n)&&e(n)})}traverseEntity(e,n=0){if(e(this,n)!==!0)for(let i of this.children)Kh(i)&&i.traverseEntity(e,n+1)}traverseVisibleEntity(e){e(this);for(let n of this.children)Kh(n)&&n.visible&&n.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(e,n=!1){return super.copy(e,n),this.dataPatched=e.dataPatched,this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some(e=>Kh(e))}isAncestorOf(e){if(this.uuid===e)return!1;let n=!1;return this.traverseEntity(i=>{i.uuid===e&&(n=!0)}),n}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let n={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return dF(n,e)}updateTransformState(e){let n=!1;return e.position&&(this.position.fromArray(e.position),n=!0),e.rotation&&(this.rotation.fromArray(e.rotation),n=!0),e.scale&&(n=!0,this.scale.fromArray(e.scale)),e.hiddenMatrix!==void 0&&(n=!0,this.hiddenMatrix.fromArray(e.hiddenMatrix??Wy.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),e.position&&e.rotation&&e.scale&&e.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),n}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)Vn.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(e=>{Vn.is(e)&&e.disposeRecursively()})}toState(e=[]){let n={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return dF(n,e)}updateByOp(e,n,i,r){let s=this.data;this.data=n;let o=e,a=Xh(e.path,["states","*"]);if(a!==null){if(e.type===0){let[l]=a;if((this==null?void 0:this.stateSelection)===l){let c={...e.props};if(Object.values(e.props).some(d=>d===void 0)){let d=this.data;if(d!==void 0){let u=cu.zoom(d,e.path.slice(2));if(u)for(let h in e.props)e.props[h]===void 0&&h in u&&(c[h]=u[h])}}o={...e,props:c,path:e.path.slice(2)}}}}else if(e.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(e.props.name!==void 0&&l.name){let{name:d,...u}=l;l=u}if(e.props.material!==void 0&&"material"in l){let{material:d,...u}=l;l=u}let c=cu.removeOverridden(e.path,e.props,l);o={...e,props:c}}}if(this.updateByPatchedOpBase(o,wm.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),Xh(e.path,["overrides"])){let l=[],c=[...e.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(e.type===0)for(let d of Object.keys(e.props)){l[l.length-1]=d;let u=i.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=e.props[d],u.updateState(Fm.apply(u.component.data,u.overrideData),i))}}else{let d=i.scene.findInstance([this.uuid,...l]);if(d){let u=cu.zoom(d.component.data,c);if(e={...e,path:c},e.type===0){let h=e.props;if(u)for(let[f,p]of Object.entries(e.props))p===void 0&&(h===e.props&&(h={...e.props}),h[f]=u[f]);e={...e,props:h}}d.overrideData=I2.resolve(n.overrides,l),d.updateByOp(e,da.applySimple(d.data,e),i,!1)}}}else if(this.instances.length>0){let l;if(e.path.length===0&&e.type===0){let c;for(let d of $y.rootOverrideProps)d in e.props&&(c===void 0&&(c={}),c[d]=e.props[d]);c&&(l={...e,props:c})}else for(let c of $y.rootOverrideProps)if(Xh(e.path,[c])){l=e;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let d=Fm.filterOp(c.overrideData,l);d&&c.updateByOp(d,da.applySimple(c.data,d),i,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let d=Fm.filterOp(c.overrideData,e);if(d){let u;s===c.data&&e===d?u=n:u=da.applySimple(c.data,d),c.updateByOp(d,u,i,!0)}}})}}updateByPatchedOpBase(e,n,i){if(this.dataPatched=n,e.path.length===0&&e.type===0)e.props.type!==void 0&&!lg.is(e.props.type)&&lf.changeEntityProptotype(this,n,i);else if(e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&"type"in e.props){lf.changeEntityProptotype(this,n,i);for(let r of this.children)Vn.is(r)&&r.updateVisible()}this.updateByPatchedOp(e,n,i)}updateByPatchedOp(e,n,i){if(e.path.length===0&&e.type===0&&this.updateState(e.props,i),Xh(e.path,["pathSnapping"])!==null&&this.updatePathSnapping(n.pathSnapping),Xh(e.path,["cloner"])!==null){let r=da.drop(e,1);r.path.length===0&&r.type===0&&r.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(n.cloner,i.scene):(this.setFromClonerState(n.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(e){this._updatedPathSnapping=e,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(e){var p,m,g,v,y;let n=((p=this._updatedPathSnapping)==null?void 0:p.pathId)??this.dataPatched.pathSnapping.pathId,i=((m=this._updatedPathSnapping)==null?void 0:m.slide)??this.dataPatched.pathSnapping.slide??0,r=((g=this._updatedPathSnapping)==null?void 0:g.offset)??this.dataPatched.pathSnapping.offset,s=((v=this._updatedPathSnapping)==null?void 0:v.orientation)??this.dataPatched.pathSnapping.orientation;if(n===null)return;let o=e.find(n);if(!o||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let a=o.data,l=Sde(a.geometry.path),c=(i+r)%1;i+r===1&&c===0&&(c=1);let d=l.getPointAt(c),u=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new tt;o.updateMatrixWorld();let h=new tt().multiplyMatrices(u.clone().invert(),o.matrixWorld);d.applyMatrix4(h);let f={position:d.toArray(),rotation:a.rotation};if(s==="tangential"){let x=new tt().extractRotation(o.matrixWorld),b=l.getTangentAt(c).applyMatrix4(x).add(d),w=new tt().lookAt(d,b,new q(0,1,0)),E=new ls().setFromRotationMatrix(w);f={...f,rotation:[E.x,E.y,E.z]}}this.updateTransformState(f),this.traverseEntity(x=>{x._cameraType&&x.dispatchEvent(jst)})}updateVisible(){var e;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((e=this.dataPatched.cloner)==null?void 0:e.hideBase)!==!0)}updateState_Entity(e,n){e.name!==void 0&&(this.name=e.name),e.raycastLock!==void 0&&(this.raycastLock=e.raycastLock),e.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in e&&e.cloner!==void 0&&(this.setFromClonerState(e.cloner,n),this.updateVisible()),this.updateTransformState(e)}get attachedSurfaceCloners(){return this.children.filter(e=>e instanceof lf.Cloner&&e.parameters.type==="toObject")}setFromClonerState(e,n){this.disposed||(e===null||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new lf.Cloner(this,e),n.scene.addPendingExpandCloner(this)):this.cloner.updateState(e,n.scene))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}},Mde=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},t.parameters),i=n.width/2,r=n.radiusTop??i,s=n.radiusBottom??i;return r===s?(r=i,s=i):r>s?(r=i,s=s*i/r):(r=r*i/s,s=i),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:r,radiusBottom:s})}}static build(t){let{width:e,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:d,cornerRadius:u,cornerSegments:h,hollow:f}=t.parameters,p;return u||f?p=new Ade(c,d,i,r,s,o,a,l*Math.PI/180,u,u,h,f):p=new nH(c,d,i,r,s,o,a,l*Math.PI/180),p.scale(1,1,n/e),Object.assign(p,{userData:{...t,type:"CylinderGeometry"}})}};function Ch(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function sQ(t){return new Se(t.y,-t.x)}var Ade=class extends Ut{constructor(t,e,n,i,r,s,o,a,l,c,d,u,h=!1){super(),this.type="RoundedCylinderBufferGeometry",t=t!==void 0?t:1,e=e!==void 0?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let f=[],p=[],m=[],g=[],v=0,y=n/2,x=new q,b=new q;h&&t==0&&(t=l),h&&e==0&&(e=c);let w=new Se(t,y),E=new Se(e,-y),A=null,S=null,C=null,T=null,P=w.clone().sub(E),R=0,L=0,O=0;u>0&&(R=Math.min(t,e)*(1-u),L=t-R,O=e-R);let B=w.clone();B.x-=R;let $=Math.PI-P.angle(),X=P.angle(),H=Math.tan(X/2),U=Math.tan($/2),N=H+U,k=u?N:U,z=u?N:H;if(l=Math.min(l,(t-L)/k,P.length()/N),c=Math.min(c,(e-O)/z,P.length()/N),l>0){let ie=l/H;A=w.clone().sub(new Se(ie,l)),u&&(C=A.clone(),C.x-=R-N*l),w.sub(P.clone().setLength(ie))}if(c>0){let ie=c/U;S=E.clone().sub(new Se(ie,-c)),E.add(P.clone().setLength(ie)),u&&(T=S.clone(),T.x-=R-N*c,B.sub(P.clone().setLength(ie)))}P=w.clone().sub(E);let W=P.length()<.5,K=[];for(let ie=0;ie<=i;ie++){let te=[],re=ie/i,me=re*a+o,se=new Se(Math.sin(me),Math.cos(me));T&&S?(J(te,re,se,$,c,T,-1,!0),J(te,re,se,X,c,S,-1,!1)):S?(F(te,se,S.x,0,-1),J(te,re,se,X,c,S,-1,!1)):s||F(te,se,e,O,-1);let oe=sQ(P).normalize();if(Ch(oe,se,x),!W)for(let be=0;be<=r;be++){let Ae=be/r,Ie=P.clone().multiplyScalar(Ae).add(E);Ch(Ie,se,b),p.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(re,.5+b.y/n),te.push(v++)}if(C&&A?(J(te,re,se,$,l,A,1,!1),J(te,re,se,X,l,C,1,!0)):A?(J(te,re,se,$,l,A,1,!1),F(te,se,A.x,0,1)):s||F(te,se,t,L,1),u&&!W){let be=sQ(P).multiplyScalar(-1).normalize();Ch(be,se,x);for(let Ae=0;Ae<=r;Ae++){let Ie=Ae/r,Le=P.clone().multiplyScalar(-Ie).add(B);Ch(Le,se,b),p.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(re,.5+b.y/n),te.push(v++)}}u&&!s&&te.push(te[0]),K.push(te)}for(let ie=0;ie<K.length-1;ie++)for(let te=0;te<K[0].length-1;te++){if(s&&u&&te==r)continue;let re=K[ie][te],me=K[ie+1][te],se=K[ie+1][te+1],oe=K[ie][te+1],be=p[se*3+0],Ae=p[se*3+2];f.push(re,me,oe),(be!=0||Ae!=0)&&f.push(me,se,oe)}a<Math.PI*2&&(ee(-1,K[0],o),ee(1,K[K.length-1],o+a)),this.setIndex(f),this.setAttribute("position",new xt(p,3)),this.setAttribute("normal",new xt(m,3)),this.setAttribute("uv",new xt(g,2));function J(ie,te,re,me,se,oe,be,Ae){for(let Ie=0;Ie<d+1;Ie++){let Le=Ie/d,fe=be<0?Le:1-Le;Ae&&(fe-=1),fe*=me;let ve=new Se(Math.sin(fe),Math.cos(fe)*be),ke=ve.clone().multiplyScalar(se).add(oe);Ch(ke,re,b),p.push(b.x,b.y,b.z),Ch(ve,re,x),m.push(x.x,x.y,x.z),g.push(te,.5+b.y/n),ie.push(v++)}}function F(ie,te,re,me,se){let oe=new q,be=new Se,Ae=[re,me];se<0&&Ae.reverse();for(let Ie of Ae)be.set(Ie,y*se),Ch(be,te,oe),p.push(oe.x,oe.y,oe.z),m.push(0,se,0),g.push(.5,.5),ie.push(v++)}function ee(ie,te,re){let me=new Se(Math.sin(re),Math.cos(re)),se=new Se(-Math.cos(re),Math.sin(re)),oe=new q,be=ie<0?(Le,fe,ve)=>f.push(Le,fe,ve):(Le,fe,ve)=>f.push(Le,ve,fe),Ae=new Se((t+e+L+O)/4,0);Ch(Ae,me,oe),p.push(oe.x,oe.y,oe.z),m.push(se.x,0,se.y),g.push(.5,.5);let Ie=v++;for(let Le of te){let fe=p.slice(Le*3,Le*3+3);p.push(...fe),m.push(se.x,0,se.y);let ve=g.slice(Le*2,Le*2+2);g.push(...ve),v++}for(let Le=Ie+1;Le<v-1;Le++)be(Ie,Le,Le+1);be(Ie,v-1,Ie+1)}}},Gst=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:d,cornerSegments:u}=t.parameters,h;return c>0||d>0||l<360?h=new Ade(0,e/2,i,r,s,o,a,l*Math.PI/180,c,d,u,0,!0):h=new Hce(e/2,i,r,s,o),h.scale(1,1,n/e),Object.assign(h,{userData:{...t,type:"ConeGeometry"}})}},Wst=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=t.parameters,c;return a==0?c=new mu(e,n,i,r,s,o):c=new qst(e,n,i,r,s,o,a,l),Object.assign(c,{userData:{...t,type:"CubeGeometry"}})}},rk=Math.PI/2,qst=class extends Ut{constructor(t=1,e=1,n=1,i=1,r=1,s=1,o=0,a=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,t/2,e/2,n/2);let c=[],d=[],u=[],h=[],f=0,p=0;m("z","y","x",-1,-1,n,e,t,s,r,0),m("z","y","x",1,-1,n,e,-t,s,r,1),m("x","z","y",1,1,t,n,e,i,s,2),m("x","z","y",1,-1,t,n,-e,i,s,3),m("x","y","z",1,-1,t,e,n,i,r,4),m("x","y","z",-1,-1,t,e,-n,i,r,5),o>0&&(g("z","y","x",-1,-1,1,n,e,t,s,0),g("z","y","x",1,-1,-1,n,e,t,s,1),g("z","y","x",-1,1,-1,n,e,t,s,1),g("z","y","x",1,1,1,n,e,t,s,0),g("x","y","z",-1,-1,-1,t,e,n,i,0),g("x","y","z",1,-1,1,t,e,n,i,1),g("x","y","z",-1,1,1,t,e,n,i,0),g("x","y","z",1,1,-1,t,e,n,i,1),g("y","x","z",-1,-1,1,e,t,n,r,0),g("y","x","z",1,-1,-1,e,t,n,r,1),g("y","x","z",1,1,1,e,t,n,r,1),g("y","x","z",-1,1,-1,e,t,n,r,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new xt(d,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(h,2));function m(y,x,b,w,E,A,S,C,T,P,R){let L=(A-2*o)/T,O=(S-2*o)/P,B=A/2-o,$=S/2-o,X=C/2,H=T+1,U=P+1,N=0,k=0,z=new q;for(let W=0;W<U;W++){let K=W*O-$;for(let J=0;J<H;J++){let F=J*L-B;z[y]=F*w,z[x]=K*E,z[b]=X,d.push(z.x,z.y,z.z),z[y]=0,z[x]=0,z[b]=C>0?1:-1,u.push(z.x,z.y,z.z),h.push(J/T),h.push(1-W/P),N+=1}}for(let W=0;W<P;W++)for(let K=0;K<T;K++){let J=f+K+H*W,F=f+K+H*(W+1),ee=f+(K+1)+H*(W+1),ie=f+(K+1)+H*W;c.push(J,F,ie),c.push(F,ee,ie),k+=6}l.addGroup(p,k,R),p+=k,f+=N}function g(y,x,b,w,E,A,S,C,T,P,R){let L=(S-2*o)/P,O=S/2-o,B=C/2-o,$=T/2,X=P+1,H=0,U=0,N=new q,k=new q;for(let z=0;z<a+1;z++){let W=z/a*rk,K=Math.sin(W)*o,J=(1-Math.cos(W))*o,F=Math.sin(W),ee=Math.cos(W);N[x]=(B+K)*E,N[b]=($-J)*A,k[y]=0,k[x]=F*Math.sign(N[x]),k[b]=ee*Math.sign(N[b]);for(let ie=0;ie<X;ie++){let te=ie*L-O;N[y]=te*w,d.push(N.x,N.y,N.z),u.push(k.x,k.y,k.z),h.push(ie/P),h.push(0),H+=1}}for(let z=0;z<a;z++)for(let W=0;W<P;W++){let K=f+W+X*z,J=f+W+X*(z+1),F=f+(W+1)+X*(z+1),ee=f+(W+1)+X*z;c.push(K,J,ee),c.push(J,F,ee),U+=6}l.addGroup(p,U,R),p+=U,f+=H}function v(y,x,b){let w=new q,E=new q(t/2,e/2,n/2);E.subScalar(o);let A=[],S=y*x*b>0?(T,P,R)=>c.push(T,P,R):(T,P,R)=>c.push(T,R,P);for(let T=0;T<=a;T++){let P=[],R=rk*(1-T/a),L=Math.cos(R),O=Math.sin(R),B=0;for(let $=0;$<=T;$++){let X=Math.cos(B),H=Math.sin(B);w.x=L*X,w.y=O,w.z=L*H;let U=E.clone().addScaledVector(w,o);d.push(y*U.x,x*U.y,b*U.z),u.push(y*w.x,x*w.y,b*w.z),h.push(0,0),P.push(f++),B+=rk/T}A.push(P)}let C=A.length-1;for(let T=0;T<C;T++){let P=A[T],R=A[T+1],L=P.length-1;S(P[0],R[1],R[0]);for(let O=1;O<=L;O++)S(P[O-1],P[O],R[O]),S(P[O],R[O+1],R[O])}}}},FH=class extends Ut{constructor(t=[],e=[],n="",i=1,r=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),d(),this.setAttribute("position",new xt(o,3)),this.setAttribute("normal",new xt(l,3)),this.setAttribute("uv",new xt(a,2));return;function c(){var X;r=Math.min(1-1e-5,r),r==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],h=new q,f=h.clone(),p=new Eo,m=r*i,g=i-m,v=s+1,y=new q,x=(H,U)=>y.subVectors(H,U).normalize(),b=(H,U)=>Array(H).fill(void 0).map(U),w=b(t.length/3,(H,U)=>new q().fromArray(t,U*3).setLength(i)),E=[],A=1e6;for(let H=0;H<w.length;H++){let U=w[H],N=[],k,z,W,K=1e10,J=-1;for(;(J=e.indexOf(H,J+1))!=-1;){let te=J-J%3;k=e[te+(J+1)%3],z=e[te+(J+2)%3],W=U.distanceToSquared(w[k]),K=Math.min(K,W),N.push([k,z,W])}K+=1e-6;let F=[],ee=0,ie=N.length;for(let te=0;te<ie;te++){[k,z,W]=N[ee];let re=((X=E[k])==null?void 0:X.includes(H))==!0;W<=K&&F.push(k+ +re*A),ee=N.findIndex(me=>me[0]==z)}E.push(F)}let S=[];{let H=0,U=0,N,k,z=u==3;for(let W=0;W<=s;W++){N=W*(W+1)/2,k=(W+1)*(W+2)/2;for(let K=0;K<s-W;K++)[H,U]=[N+K+W+2,k+K+W+3],S.push(N,k,...z?[U,N]:[H,k],U,H),[N,k]=[H,U];S.push(N,k,N+s+2)}}let C=h.clone(),T=h.clone(),P=h.clone(),R=h.clone(),L=h.clone(),O=[],B=b(w.length,()=>b(u,()=>h.clone()));for(let H=0;H<w.length;H++){h.copy(w[H]).normalize(),C.copy(h).multiplyScalar(g);let U=E[H];for(let F=0;F<U.length;F++){let ee=U[F],ie=U[(F+1)%u];p.setFromPointsAndIndices(w,H,ee%A,ie%A),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(C,B[H][F])}let N=[],k=[],z=[],W=new q;s==0&&[...B[H]].reduce((F,ee)=>F.add(ee),W).multiplyScalar(1/u);for(let F=0;F<u;F++){let ee=[],ie=(F-1+u)%u,te=B[H][ie],re=B[H][F];h.copy(te).sub(C),f.copy(re).sub(C);let me=C.angleTo(h),se=h.angleTo(f),oe=Math.cos(me)*m;s==0?T.copy(W):T.copy(C).setLength(g+oe),k.push(oe);let be=[T,te,re];for(let Ae=0;Ae<2;Ae++){let Ie=be[Ae],Le=be[Ae+1];R.subVectors(Ie,C),L.subVectors(Le,C),P.crossVectors(R,L).normalize();for(let fe=0;fe<v;fe++){let ve=[me,se][Ae]*fe/v;h.copy(R).applyAxisAngle(P,ve).add(C),N.push(h.clone()),Ae&&(x(h,C),ee.push([fe==0?Ie:h.clone(),y.clone()]))}Ae&&(x(Le,C),ee.push([Le,y.clone()]))}z.push(ee)}O.push(z);let K=2*v,J=2;for(let F=0;F<u;F++){let ee=K*F,ie=K*((F+1)%u),te=[N[ee]];for(let me=1;me<v;me++){R=N[ee+me],L=N[ie+me],te.push(R);for(let se=1,oe=me-J+1;se<=oe;se++)h.lerpVectors(R,L,se/(oe+1)),h.sub(C).setLength(k[F]).add(C),te.push(h.clone());te.push(L)}for(let me=0;me<v;me++)te.push(N[me+v+ee]);te.push(N[ie+v]);let re=S.map(me=>te[me]);o.push(...re.map(me=>[me.x,me.y,me.z]).flat()),l.push(...re.map(me=>(x(me,C),[y.x,y.y,y.z])).flat())}}let $=[];for(let H=0;H<E.length;H++)for(let U=0;U<u;U++){let N=E[H][U];if(N<A){let k=E[N].findIndex(K=>K%A==H),z=O[H][U],W=O[N][k];for(let K=0;K<v;K++){let J=z[K],F=W[v-K],ee=z[K+1],ie=W[v-(K+1)];[J,F,ee,ee,F,ie].forEach(te=>{o.push(te[0].x,te[0].y,te[0].z),l.push(te[1].x,te[1].y,te[1].z)})}$.push(z[0][0],W[v][0],z[v][0],W[0][0])}}for(;$.length;){let H,U,N,k;[H,U]=$.splice(0,2);let z=[H];for(;H!=U;)z.push(U),N=$.indexOf(U),k=N%2,U=$.splice(N-k,2)[1-k];y.subVectors(z[0],z[1]).cross(h.subVectors(z[0],z[2])).normalize();let W=y.dot(z[0])<0;W&&y.negate();for(let K=1;K<=z.length-2;K++)[z[K+ +W],z[K+1-+W],z[0]].forEach(J=>{o.push(J.x,J.y,J.z),l.push(y.x,y.y,y.z)})}}function d(){let u=new q;for(let E=0;E<o.length;E+=3){u.x=o[E+0],u.y=o[E+1],u.z=o[E+2];let A=b(u)/2/Math.PI+.5,S=w(u)/Math.PI+.5;a.push(A,1-S)}let h=new q,f=new q,p=new q,m=new q,g=new Se,v=new Se,y=new Se,x=(E,A,S,C)=>{C<0&&E.x===1&&(a[A]=E.x-1),S.x===0&&S.z===0&&(a[A]=C/2/Math.PI+.5)};for(let E=0,A=0;E<o.length;E+=9,A+=6){h.set(o[E+0],o[E+1],o[E+2]),f.set(o[E+3],o[E+4],o[E+5]),p.set(o[E+6],o[E+7],o[E+8]),g.set(a[A+0],a[A+1]),v.set(a[A+2],a[A+3]),y.set(a[A+4],a[A+5]),m.copy(h).add(f).add(p).divideScalar(3);let S=b(m);x(g,A+0,h,S),x(v,A+2,f,S),x(y,A+4,p,S)}for(let E=0;E<a.length;E+=6){let A=a[E+0],S=a[E+2],C=a[E+4],T=Math.max(A,S,C),P=Math.min(A,S,C);T>.9&&P<.1&&(A<.2&&(a[E+0]+=1),S<.2&&(a[E+2]+=1),C<.2&&(a[E+4]+=1))}function b(E){return Math.atan2(E.z,-E.x)}function w(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}}static fromJSON(t){return new FH(t.vertices,t.indices,t.radius,t.corner,t.cornerSides)}},$st=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,detail:r,corner:s,cornerSides:o}=t.parameters,a=r===0&&s!==0?new Tde(e*.5,s,o):new jce(e*.5,r);return a.scale(1,n/e,i/e),Object.assign(a,{userData:{...t,type:"DodecahedronGeometry"}})}},Tde=class extends FH{constructor(t=1,e=.2,n=4){let i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a="DodecahedronGeometry";super(s,o,a,t,e,n),this.type=a}static fromJSON(t){return new Tde(t.radius,t.corner,t.cornerSides)}},sb=1e-12,UH=class{constructor(t){this.position=new Se,this.startPosition=new Se,this.uuid=pn.generateUUID(),this.position=t.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(t){this.position.copy(this.startPosition).add(t)}copy(t){return this.position.copy(t.position),this.startPosition.copy(t.startPosition),this}clone(){return new UH(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},UF=class extends UH{constructor(t){super(t.position),this.parent=t}copy(t){return super.copy(t),this}clone(){return new UF(this.parent).copy(this)}},ny=class extends UH{constructor(t,e){super(e),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=t,this.controls.push(new UF(this),new UF(this))}static create(t,e){let n=new ny(t,new Se(...e.position));return n.controls[0].position.set(...e.controlPrevious.position),n.controls[1].position.set(...e.controlNext.position),n.roundness=e.roundness,n.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored,n}getOppositeControl(t){let e=this.controls.indexOf(t);return e===0?this.controls[1]:e===1?this.controls[0]:null}applyOffsetToControls(t,e=1){for(let n=0,i=this.controls.length;n<i;n++){let r=this.controls[n];this.position.distanceTo(r.position)<=e?r.position.copy(this.position):r.applyOffset(t)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(t){return super.copy(t),this.controls[0].copy(t.controls[0]),this.controls[1].copy(t.controls[1]),this.roundness=t.roundness,this.uuid=t.uuid,this}clone(){return new ny(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var n,i;let t=(n=this.curveBefore)==null?void 0:n.getTangentAt(1),e=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[t,e]}computeNormals(t=new Se,e=new Se){let[n,i]=this.computeTangents();return n&&i&&(oQ(n,t),oQ(i,e)),[t,e]}computeTangent(t=new Se){let[e,n]=this.computeTangents();return e&&n&&t.copy(e).add(n).normalize(),t}computeNormal(t=new Se){let[e,n]=this.computeNormals();return t.copy(e).add(n).normalize(),t}};function oQ(t,e=new Se){let n=t.length();return e.set(-t.y/n,t.x/n)}var VH=t=>t,Fx=new Se,MR=new Se,Xst=new Se,Yst=new Se,Kst=new Se,Zst=new Se,Cde=new q,Pde=new q;function Qst(t){let e=new Se;e.addVectors(t.v0,Fx.subVectors(t.v1,t.v0).multiplyScalar(2/3));let n=new Se;return n.addVectors(t.v2,MR.subVectors(t.v1,t.v2).multiplyScalar(2/3)),new Xl(t.v0,e,n,t.v2)}function kb(t,e,n=Number.EPSILON){return Math.abs(t-e)<n}function Jst(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function eot(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function Dde(t,e,n){let i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),s=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return Math.acos((r*r+i*i-s*s)/(2*r*i))}function tot(t,e,n){return lQ(t,e)&&lQ(e,n)&&VF(t.position,e.position,n.position)}function VF(t,e,n){return Fx.copy(e).sub(t).cross(MR.copy(n).sub(t))===0}function not(t,e,n,i,r){let s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=(t.y+e.y)/2,a=(t.x+e.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(t.y-e.y)/s,c=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(e.x-t.x)/s;return i.set(a+l,o+c),r.set(a-l,o-c),[i,r]}function iot(t,e,n){let i=t.distanceTo(n),r=e.distanceTo(n);return i<r?e:t}function rot(t,e,n,i,r,s){let o=e.x-t.x,a=e.y-t.y,l=n.x-t.x,c=n.y-t.y,d=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return Dde(e,t,n)>Math.PI&&(d*=-1),kb(c,a)?u=(a+c)*(i/d-.5)*8/3/(o-l):u=(o+l)*(i/d-.5)*8/3/(c-a),r.set(e.x-u*a,e.y+u*o),s.set(n.x+u*c,n.y-u*l),[r,s]}function aQ(t,e){return t.position.equals(t.controls[1].position)&&e.position.equals(e.controls[0].position)}function lQ(t,e){return VF(t.position,t.controls[1].position,e.position)&&VF(t.position,e.controls[0].position,e.position)}function sot(t,e,n,i,r=.5){let s=Fx.subVectors(e,t).multiplyScalar(r).add(t),o=MR.subVectors(n,e).multiplyScalar(r).add(e),a=Xst.subVectors(i,n).multiplyScalar(r).add(n),l=s,c=Yst.subVectors(o,s).multiplyScalar(r).add(s),d=Kst.subVectors(a,o).multiplyScalar(r).add(o),u=a,h=Zst.subVectors(d,c).multiplyScalar(r).add(c);return[t.x,t.y,l.x,l.y,c.x,c.y,h.x,h.y,d.x,d.y,u.x,u.y,i.x,i.y]}function oot(t,e,n=12,i=!0){let r=Pde.set(0,0,0),s,o=0;for(let a=0;a<e.length;a++){let l=VH(e[a]),c=Fx,d=Vm(l,n);for(let u=0;u<=d;u++)if(l instanceof Xl||l instanceof Gf||l instanceof nc){if(l.getPoint(u/d,c),r.set(c.x,c.y,0),s!==void 0&&eot(s,r))continue;s===void 0&&(s=Cde),s.copy(r),t.setXYZ(o,r.x,r.y,r.z),o++}}return i&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),t}function aot(t,e,n,i=12,r=!0){let s=Pde.set(0,0,0),o=0,a=[];for(let l=0;l<e.length;l++){if(n[l]===!1)continue;let c,d=VH(e[l]),u=Fx,h=Vm(d,i);a.push(h);for(let f=0;f<=h;f++)if(d instanceof Xl||d instanceof Gf||d instanceof nc){if(d.getPoint(f/h,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=Cde:(t.setXYZ(o,c.x,c.y,c.z),o++,t.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return r&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),a}function cQ(t,e=12,n=!1){let i=[];for(let r=0,s=t.length;r<s;r++){let o=t[r],a=0;if(n&&o.roundedCurveCorner!==void 0){let l=Vm(o.roundedCurveCorner,e)*.5;r>0&&(i[r-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=Vm(o.curveAfter,e)),i.push(a)}return t.length>0&&n&&t[0].roundedCurveCorner!==void 0&&(i[t.length-1]+=Vm(t[0].roundedCurveCorner,e)*.5),i}function Vm(t,e=12){return t&&t instanceof uR?e*2:t&&(t instanceof nc||t instanceof Fce)?1:t&&t instanceof tH?e*t.points.length:e}function lot(t,e,n=12,i=!0){let r,s=0;for(let o=0;o<e.length;o++){let a=VH(e[o]),l=Vm(a,n),c=Fx;for(let d=0;d<=l;d++)if(a instanceof Xl||a instanceof Gf||a instanceof nc){if(a.getPoint(d/l,c),r!==void 0&&Jst(r,c,sb))continue;r===void 0&&(r=MR),r.copy(c),t.push(c.x,c.y),s++}}return kb(t[0],t[t.length-2],sb)&&kb(t[1],t[t.length-1],sb)&&(t.pop(),t.pop()),i&&s>1&&!(kb(t[s-1],t[1],sb)&&kb(t[s-2],t[0],sb))&&(t.push(t[0],t[1]),s++),t}var sk=new Se,cot=new Se,uot=new Se,dot=new Se,hot=new Se,fot=new Se,$i=class extends h2{constructor(t=100,e=100){super(),this.points=[],this.shapeHoles=[],this.plane=new ia(new q(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=pn.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=t,this._height=e}static createFromState(t,e,n){let i=new $i;return i.isClosed=t.isClosed,i.points=t.points.map(r=>ny.create(r.id,r.data)),typeof t.roundness=="number"&&(i.roundness=t.roundness),i.shapeHoles=t.shapeHoles.map(r=>$i.createFromState(r)),e!==void 0&&n!==void 0&&i.applySize(e,n),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(t){if(this._roundness!==t){this._roundness=t;for(let e=0,n=this.points.length;e<n;e++)this.points[e].roundness=t;this.needsUpdate=!0}}getPointsIndexesByIds(t){return t.map(e=>this.getPointIndexById(e)).filter(e=>e>=0)}getPointIndexById(t){let e=this.points.length,n=this.points.findIndex(i=>i.uuid===t);if(n<0){let i=e;for(let r=0,s=this.shapeHoles.length;r<s;r++){let o=this.shapeHoles[r],a=o.points.length,l=o.getPointIndexById(t);if(l<0)i+=a;else return l+i}}return n}getLineIndexById(t){return this.getPointIndexById(t)}getBezierPoint(t){if(t<=this.points.length-1)return this.points[t];if(this.shapeHoles.length>0){let e=this.points.length;for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=t-e;if(s<=r.points.length-1)return r.points[s];e+=r.points.length}}throw new Error("This shape does not have a point for this index: "+t)}getBezierPointIndex(t){let e=this.points.indexOf(t);if(e>=0)return e;if(e=this.points.length,this.shapeHoles.length>0)for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=r.points.indexOf(t);if(s>=0)return e+s;e+=r.points.length}return-1}getAllPoints(){let t=[].concat(...this.shapeHoles.map(e=>e.points));return[...this.points,...t]}applySize(t,e){t===0&&(t=.001),e===0&&(e=.001),this._width=t,this._height=e}applyScale(t,e){let n=sk.set(t,e);for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i];s.position.multiply(n),s.controls[0].position.multiply(n),s.controls[1].position.multiply(n)}for(let i=0,r=this.shapeHoles.length;i<r;i++)this.shapeHoles[i].applyScale(t,e);this._update()}createPoint(t,e=0,n=pn.generateUUID()){let i;t instanceof Se?i=t:i=new Se(t,e);let r=new ny(n,i);return r.roundness=this.roundness,r}addPoint(t){this.points.push(t),this.needsUpdate=!0}addPointAt(t,e){this.points.splice(e,0,t),this.needsUpdate=!0}getPointByUuid(t){for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];if(i.uuid===t)return i}for(let e=0,n=this.shapeHoles.length;e<n;e++){let i=this.shapeHoles[e].getPointByUuid(t);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(t){let e=this.points.indexOf(t);e>=0&&this.points.splice(e,1),this.needsUpdate=!0}removePointById(t){let e=this.points.find(n=>n.uuid===t);e&&this.removePoint(e)}update(){for(let t=0,e=this.shapeHoles.length;t<e;t++)this.shapeHoles[t].update();this._update()}extractShapePointsToBuffer(t,e=12,n=!1){this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e);let i=n?this.roundedCurveDivisions:this.curveDivisions;return oot(t,n?this.roundedCurves:this.curves,e,this.autoClose),i.reduce((r,s)=>r+s,0)+1}computeCurveDivisions(t=12){return this.curveDivisions=cQ(this.points,t,!1),this.roundedCurveDivisions=cQ(this.points,t,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(t,e,n=12){return aot(t,this.curves,e,n,this.autoClose).reduce((i,r)=>i+r,0)*2}extractShapePointsToFlatArray(t,e=12){return this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e),lot(t,this.roundedCurves,e,this.autoClose)}getCurveIndexFromVertexId(t,e=!1){let n=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=e?this.roundedCurveDivisions:this.curveDivisions,r=0;e&&this.points[0].roundedCurveCorner!==void 0&&(r=Vm(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=t-r;s<0&&(s+=i.reduce((o,a)=>o+a,0));for(let o=0,a=i.length;o<a;o++){let l=i[o];if(s<n+l)return[o,(s-n+1)/l];n+=l}return[0,1]}getCurveT(t,e,n){let i=this.points[t],r=this.points[t>=this.points.length-1?0:t+1],s=this.curveDivisions,o=s[t];if(aQ(i,r)){let l=i.position.distanceTo(r.position);return i.position.distanceTo(sk.set(n.x,n.y))/l}let a=0;for(let l=0;l<t;l++)a+=s[l];return(e-a)/o}dispose(){}_applyCurveForPoint(t,e){aQ(e,t)?this.lineTo(t.position.x,t.position.y):this.bezierCurveTo(e.controls[1].position.x,e.controls[1].position.y,t.controls[0].position.x,t.controls[0].position.y,t.position.x,t.position.y);let n=this.curves[this.curves.length-1];t.curveBefore=n,e.curveAfter=n;let i=n.clone();t.roundedCurveBefore=i,e.roundedCurveAfter=i,t.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];if(e===0)this.moveTo(i.position.x,i.position.y);else{let r=this.points[e-1];this._applyCurveForPoint(i,r)}}let t=this.getLastPoint();if(t!=null&&t.curveAfter&&(t.curveAfter=void 0),this.isClosed){let e=this.points[0],n=this.points[this.points.length-1];this._applyCurveForPoint(e,n)}if(this.points.length>2){let e=0;for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n],s=this.points[n-1]??this.points[this.points.length-1],o=this.points[n+1]??this.points[0],a=r.roundness,l=s&&o&&tot(s,r,o);if(!r.controlsMoved()&&a>0&&!l){let c=r.curveBefore,d=r.curveAfter;if(c===void 0||d===void 0)continue;let u=r.roundedCurveBefore,h=r.roundedCurveAfter,f=c.getLength(),p=d.getLength(),m=Math.min(a,f*.499),g=Math.min(a,p*.499),v=Math.min(m,g),y=1-v/f,x=v/p,b=c.getPointAt(y,sk),w=d.getPointAt(x,cot);this._subSplitCurve(c,u,y,b,void 0),this._subSplitCurve(d,h,x,void 0,w);let E;if(this.useCubicForRoundedCorners){let A=Dde(b,r.position,w)/2,S=Math.tan(A)*b.distanceTo(r.position),[C,T]=not(b,w,S,uot,dot),P=iot(C,T,r.position),[R,L]=rot(P,b,w,S,hot,fot);E=new Xl(b.clone(),R.clone(),L.clone(),w.clone())}else E=new Gf(b.clone(),r.position.clone(),w.clone());r.roundedCurveCorner=E,this.roundedCurves.splice(n+e,0,E),e++}}}}_subSplitCurve(t,e,n,i,r){if(t instanceof nc)i!==void 0&&e.v2.copy(i),r!==void 0&&e.v1.copy(r);else{let s=t,o=e,a=s.getUtoTmapping(n,0),l=sot(s.v0,s.v1,s.v2,s.v3,a);return i!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),r!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return e}clone(){let t=new $i(this._width,this._height);return t.points=this.points.map(e=>e.clone()),t.isClosed=this.isClosed,t.roundness=this.roundness,t.isMesh2D=this.isMesh2D,t.shapeHoles=this.shapeHoles.map(e=>e.clone()),t}toJSON(){return{points:this.points.reduce((t,e)=>t.concat(e.toJSON()),[]),shapeHoles:this.shapeHoles.map(t=>t.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(t){var n;this.points=[],this.pointIDs=0;let e=t.points.length/7;for(let i=0;i<e;i++){let r=i*7,s=t.points[r+0],o=t.points[r+1],a=t.points[r+2],l=t.points[r+3],c=t.points[r+4],d=t.points[r+5],u=t.points[r+6],h=new ny(pn.generateUUID(),new Se(s,o));h.controls[0].position.set(a,l),h.controls[1].position.set(c,d),h.roundness=u,this.points.push(h)}return this.shapeHoles=(n=t.shapeHoles)!=null&&n.length?t.shapeHoles.map(i=>{let r=new $i;return r.fromJSON(i),r}):[],this.isClosed=t.isClosed,this._roundness=t.roundness,this._update(),this}fromShape(t){let e=(i,r)=>{r instanceof Xl&&r.v3.equals(i.position)&&i.controls[0].position.copy(r.v2)},n=i=>{let r=[],s,o;for(s=0,o=i.length;s<o;s++)i[s]instanceof Gf&&(i[s]=Qst(i[s]));for(s=0,o=i.length;s<o;s++){let c=i[s],d=s>0?i[s-1]:null,u;c instanceof Xl?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof nc&&(u=this.createPoint(c.v1)),u!==void 0&&(d!==null&&e(u,d),r.push(u))}let a=i[i.length-1],l=!1;return a instanceof Xl?a.v3.equals(r[0].position)&&(r[0].controls[0].position.copy(a.v2),l=!0):a instanceof nc&&a.v2.equals(r[0].position)&&(l=!0),this.isClosed=l,r};return this.points=n(t.curves),t instanceof h2&&(this.shapeHoles=t.holes.map(i=>{let r=new $i;return r.fromShape(i),r})),this.update(),this}updatePoint(t,e){let n=this.getPointByUuid(t);n&&(e.position!==void 0&&n.position.fromArray(e.position),e.roundness!==void 0&&(n.roundness=e.roundness),e.areControlsDirectionsMirrored!==void 0&&(n.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(t,e){var i;let n=(i=this.getPointByUuid(t))==null?void 0:i.controls[0];n&&(e.position&&n.position.fromArray(e.position),this.needsUpdate=!0)}updateNextControl(t,e){var i;let n=(i=this.getPointByUuid(t))==null?void 0:i.controls[1];n&&(e.position&&n.position.fromArray(e.position),this.needsUpdate=!0)}},HF=Math.PI*2;function ok({x:t,y:e},n,i,r,s){return{x:t*n+r,y:e*i+s}}function pot(t,e){let n=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[{x:i-r*n,y:r+i*n},{x:s+o*n,y:o-s*n},{x:s,y:o}]}function uQ(t,e,n,i){let r=t*i-e*n<0?-1:1,s=Math.min(1,Math.max(-1,t*n+e*i));return r*Math.acos(s)}function mot(t,e,n,i,r,s,o,a,l,c){let d=Math.pow(r,2),u=Math.pow(s,2),h=Math.pow(o,2),f=Math.pow(a,2),p=d*u-d*f-u*h;p<0&&(p=0),p/=d*f+u*h,p=Math.sqrt(p)*(l===c?-1:1);let m=p*r/s*a,g=p*-s/r*o,v=m+(t+n)/2,y=g+(e+i)/2,x=(o-m)/r,b=(a-g)/s,w=(-o-m)/r,E=(-a-g)/s,A=uQ(1,0,x,b),S=uQ(x,b,w,E);return!c&&S>0&&(S-=HF),c&&S<0&&(S+=HF),{centerx:v,centery:y,ang1:A,ang2:S}}function got({px:t,py:e,cx:n,cy:i,rx:r,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(r===0||s===0)return[];let c=(t-n)/2,d=(e-i)/2;if(c===0&&d===0)return[];r=Math.abs(r),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(r,2)+Math.pow(d,2)/Math.pow(s,2);u>1&&(r*=Math.sqrt(u),s*=Math.sqrt(u));let h=mot(t,e,n,i,r,s,c,d,o,a),{ang1:f,ang2:p}=h,{centerx:m,centery:g}=h,v=Math.abs(p)/(HF/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);p/=y;for(let x=0;x<y;x++)l.push(pot(f,p)),f+=p;return l.map(x=>{let{x:b,y:w}=ok(x[0],r,s,m,g),{x:E,y:A}=ok(x[1],r,s,m,g),{x:S,y:C}=ok(x[2],r,s,m,g);return{x1:b,y1:w,x2:E,y2:A,x:S,y:C}})}var Hn;(function(t){t[t.ODD=0]="ODD",t[t.NONZERO=1]="NONZERO",t[t.POSITIVE=2]="POSITIVE",t[t.NEGATIVE=3]="NEGATIVE",t[t.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Hn||(Hn={}));var yr;(function(t){t[t.POLYGONS=0]="POLYGONS",t[t.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",t[t.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(yr||(yr={}));function Bt(t,e){if(!t)throw e||"Assertion Failed!"}var Ct=function(){function t(){}return t.vertEq=function(e,n){return e.s===n.s&&e.t===n.t},t.vertLeq=function(e,n){return e.s<n.s||e.s===n.s&&e.t<=n.t},t.transLeq=function(e,n){return e.t<n.t||e.t===n.t&&e.s<=n.s},t.edgeGoesLeft=function(e){return t.vertLeq(e.Dst,e.Org)},t.edgeGoesRight=function(e){return t.vertLeq(e.Org,e.Dst)},t.vertL1dist=function(e,n){return Math.abs(e.s-n.s)+Math.abs(e.t-n.t)},t.edgeEval=function(e,n,i){Bt(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?r<s?n.t-e.t+(e.t-i.t)*(r/(r+s)):n.t-i.t+(i.t-e.t)*(s/(r+s)):0},t.edgeSign=function(e,n,i){Bt(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?(n.t-i.t)*r+(n.t-e.t)*s:0},t.transEval=function(e,n,i){Bt(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?r<s?n.s-e.s+(e.s-i.s)*(r/(r+s)):n.s-i.s+(i.s-e.s)*(s/(r+s)):0},t.transSign=function(e,n,i){Bt(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?(n.s-i.s)*r+(n.s-e.s)*s:0},t.vertCCW=function(e,n,i){return e.s*(n.t-i.t)+n.s*(i.t-e.t)+i.s*(e.t-n.t)>=0},t.interpolate=function(e,n,i,r){return e=e<0?0:e,i=i<0?0:i,e<=i?i===0?(n+r)/2:n+(r-n)*(e/(e+i)):r+(n-r)*(i/(e+i))},t.intersect=function(e,n,i,r,s){var o,a,l;t.vertLeq(e,n)||(l=e,e=n,n=l),t.vertLeq(i,r)||(l=i,i=r,r=l),t.vertLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.vertLeq(i,n)?t.vertLeq(n,r)?(o=t.edgeEval(e,i,n),a=t.edgeEval(i,n,r),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,n.s)):(o=t.edgeSign(e,i,n),a=-t.edgeSign(e,r,n),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,r.s)):s.s=(i.s+n.s)/2,t.transLeq(e,n)||(l=e,e=n,n=l),t.transLeq(i,r)||(l=i,i=r,r=l),t.transLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.transLeq(i,n)?t.transLeq(n,r)?(o=t.transEval(e,i,n),a=t.transEval(i,n,r),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,n.t)):(o=t.transSign(e,i,n),a=-t.transSign(e,r,n),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,r.t)):s.t=(i.t+n.t)/2},t}(),ob=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return t}(),UA=function(){function t(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(t.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),t}(),i0=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return t}(),dQ=function(){function t(){var e=new i0,n=new ob,i=new UA(0),r=new UA(1);e.next=e.prev=e,e.anEdge=null,n.next=n.prev=n,i.next=i,i.Sym=r,r.next=r,r.Sym=i,this.vHead=e,this.fHead=n,this.eHead=i,this.eHeadSym=r}return t.prototype.makeEdge_=function(e){var n=new UA(0),i=new UA(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return i.next=r,r.Sym.next=n,n.next=e,e.Sym.next=i,n.Sym=i,n.Onext=n,n.Lnext=i,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,i.Sym=n,i.Onext=i,i.Lnext=n,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,n},t.prototype.splice_=function(e,n){var i=e.Onext,r=n.Onext;i.Sym.Lnext=n,r.Sym.Lnext=e,e.Onext=r,n.Onext=i},t.prototype.makeVertex_=function(e,n,i){var r=e;Bt(r,"Vertex can't be null!");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n;var o=n;do o.Org=r,o=o.Onext;while(o!==n)},t.prototype.makeFace_=function(e,n,i){var r=e;Bt(r,"Face can't be null");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n,r.trail=null,r.marked=!1,r.inside=i.inside;var o=n;do o.Lface=r,o=o.Lnext;while(o!==n)},t.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var n=e.next,i=e.Sym.next;n.Sym.next=i,i.Sym.next=n},t.prototype.killVertex_=function(e,n){var i=e.anEdge,r=i;do r.Org=n,r=r.Onext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.killFace_=function(e,n){var i=e.anEdge,r=i;do r.Lface=n,r=r.Lnext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.makeEdge=function(){var e=new i0,n=new i0,i=new ob,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(n,r.Sym,this.vHead),this.makeFace_(i,r,this.fHead),r},t.prototype.splice=function(e,n){var i=!1,r=!1;if(e!==n){if(n.Org!==e.Org&&(r=!0,this.killVertex_(n.Org,e.Org)),n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(n,e),!r){var s=new i0;this.makeVertex_(s,n,e.Org),e.Org.anEdge=e}if(!i){var o=new ob;this.makeFace_(o,n,e.Lface),e.Lface.anEdge=e}}},t.prototype.delete=function(e){var n=e.Sym,i=!1;if(e.Lface!==e.Rface&&(i=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!i){var r=new ob;this.makeFace_(r,e,e.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(e.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(e)},t.prototype.addEdgeVertex=function(e){var n=this.makeEdge_(e),i=n.Sym;this.splice_(n,e.Lnext),n.Org=e.Dst;var r=new i0;return this.makeVertex_(r,i,n.Org),n.Lface=i.Lface=e.Lface,n},t.prototype.splitEdge=function(e){var n=this.addEdgeVertex(e),i=n.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,i),e.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=e.Rface,i.winding=e.winding,i.Sym.winding=e.Sym.winding,i.idx=e.idx,i.Sym.idx=e.Sym.idx,i},t.prototype.connect=function(e,n){var i=!1,r=this.makeEdge_(e),s=r.Sym;if(n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(s,n),r.Org=e.Dst,s.Org=n.Org,r.Lface=s.Lface=e.Lface,e.Lface.anEdge=s,!i){var o=new ob;this.makeFace_(o,r,e.Lface)}return r},t.prototype.zapFace=function(e){var n=e.anEdge,i,r,s,o,a;r=n.Lnext;do i=r,r=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=n);o=e.prev,a=e.next,a.prev=o,o.next=a},t.prototype.countFaceVerts_=function(e){var n=e.anEdge,i=0;do i++,n=n.Lnext;while(n!==e.anEdge);return i},t.prototype.mergeConvexFaces=function(e){var n,i,r,s,o,a,l;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(i=n.anEdge,o=i.Org;r=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(n),l=this.countFaceVerts_(s.Lface),a+l-2<=e&&Ct.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&Ct.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(r=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===o);)i=r;return!0},t.prototype.check=function(){var e=this.fHead,n=this.vHead,i=this.eHead,r,s,o,a,l,c;for(s=e,s=e;(r=s.next)!==e;s=r){Bt(r.prev===s),l=r.anEdge;do Bt(l.Sym!==l),Bt(l.Sym.Sym===l),Bt(l.Lnext.Onext.Sym===l),Bt(l.Onext.Sym.Lnext===l),Bt(l.Lface===r),l=l.Lnext;while(l!==r.anEdge)}for(Bt(r.prev===s&&r.anEdge===null),a=n,a=n;(o=a.next)!==n;a=o){Bt(o.prev===a),l=o.anEdge;do Bt(l.Sym!==l),Bt(l.Sym.Sym===l),Bt(l.Lnext.Onext.Sym===l),Bt(l.Onext.Sym.Lnext===l),Bt(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(Bt(o.prev===a&&o.anEdge===null),c=i,c=i;(l=c.next)!==i;c=l)Bt(l.Sym.next===c.Sym),Bt(l.Sym!==l),Bt(l.Sym.Sym===l),Bt(l.Org!==null),Bt(l.Dst!==null),Bt(l.Lnext.Onext.Sym===l),Bt(l.Onext.Sym.Lnext===l);Bt(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},t}(),hQ=function(){function t(){this.handle=null}return t}(),fQ=function(){function t(){this.key=null,this.node=0}return t}(),vot=function(){function t(e,n){this.leq=n,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var i=0;i<e+1;i++)this.nodes[i]=new hQ,this.handles[i]=new fQ;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return t.prototype.floatDown_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e<<1,o<this.size&&this.leq(i[n[o+1].handle].key,i[n[o].handle].key)&&++o,Bt(o<=this.max),s=n[o].handle,o>this.size||this.leq(i[r].key,i[s].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.floatUp_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e>>1,s=n[o].handle,o===0||this.leq(i[s].key,i[r].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},t.prototype.min=function(){return this.handles[this.nodes[1].handle].key},t.prototype.insert=function(e){var n,i;if(n=++this.size,n*2>this.max){this.max*=2;var r,s;for(s=this.nodes.length,this.nodes.length=this.max+1,r=s;r<this.nodes.length;r++)this.nodes[r]=new hQ;for(s=this.handles.length,this.handles.length=this.max+1,r=s;r<this.handles.length;r++)this.handles[r]=new fQ}return this.freeList===0?i=n:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[n].handle=i,this.handles[i].node=n,this.handles[i].key=e,this.initialized&&this.floatUp_(n),i},t.prototype.extractMin=function(){var e=this.nodes,n=this.handles,i=e[1].handle,r=n[i].key;return this.size>0&&(e[1].handle=e[this.size].handle,n[e[1].handle].node=1,n[i].key=null,n[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),r},t.prototype.delete=function(e){var n=this.nodes,i=this.handles,r;Bt(e>=1&&e<=this.max&&i[e].key!==null),r=i[e].node,n[r].handle=n[this.size].handle,i[n[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(i[n[r>>1].handle].key,i[n[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),i[e].key=null,i[e].node=this.freeList,this.freeList=e},t}(),ak=function(){function t(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return t}(),pQ=function(){function t(){this.key=null,this.next=null,this.prev=null}return t}(),yot=function(){function t(e,n){this.frame=e,this.leq=n,this.head=new pQ,this.head.next=this.head,this.head.prev=this.head}return t.prototype.min=function(){return this.head.next},t.prototype.max=function(){return this.head.prev},t.prototype.insert=function(e){return this.insertBefore(this.head,e)},t.prototype.search=function(e){var n=this.head;do n=n.next;while(n.key!==null&&!this.leq(this.frame,e,n.key));return n},t.prototype.insertBefore=function(e,n){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,n));var i=new pQ;return i.key=n,i.next=e.next,e.next.prev=i,i.prev=e,e.next=i,i},t.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},t}(),xot=function(){function t(){}return t.regionBelow=function(e){return e.nodeUp.prev.key},t.regionAbove=function(e){return e.nodeUp.next.key},t.debugEvent=function(e){},t.addWinding=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.edgeLeq=function(e,n,i){var r=e.event,s=n.eUp,o=i.eUp;if(s.Dst===r)return o.Dst===r?Ct.vertLeq(s.Org,o.Org)?Ct.edgeSign(o.Dst,s.Org,o.Org)<=0:Ct.edgeSign(s.Dst,o.Org,s.Org)>=0:Ct.edgeSign(o.Dst,r,o.Org)<=0;if(o.Dst===r)return Ct.edgeSign(s.Dst,r,s.Org)>=0;var a=Ct.edgeEval(s.Dst,r,s.Org),l=Ct.edgeEval(o.Dst,r,o.Org);return a>=l},t.deleteRegion=function(e,n){n.fixUpperEdge&&Bt(n.eUp.winding===0),n.eUp.activeRegion=null,e.dict.delete(n.nodeUp)},t.fixUpperEdge=function(e,n,i){Bt(n.fixUpperEdge),e.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=i,i.activeRegion=n},t.topLeftRegion=function(e,n){var i=n.eUp.Org,r;do n=t.regionAbove(n);while(n.eUp.Org===i);if(n.fixUpperEdge){if(r=e.mesh.connect(t.regionBelow(n).eUp.Sym,n.eUp.Lnext),r===null)return null;t.fixUpperEdge(e,n,r),n=t.regionAbove(n)}return n},t.topRightRegion=function(e){var n=e.eUp.Dst;do e=t.regionAbove(e);while(e.eUp.Dst===n);return e},t.addRegionBelow=function(e,n,i){var r=new ak;return r.eUp=i,r.nodeUp=e.dict.insertBefore(n.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,i.activeRegion=r,r},t.isWindingInside=function(e,n){switch(e.windingRule){case Hn.ODD:return(n&1)!==0;case Hn.NONZERO:return n!==0;case Hn.POSITIVE:return n>0;case Hn.NEGATIVE:return n<0;case Hn.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")},t.computeWinding=function(e,n){n.windingNumber=t.regionAbove(n).windingNumber+n.eUp.winding,n.inside=t.isWindingInside(e,n.windingNumber)},t.finishRegion=function(e,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,t.deleteRegion(e,n)},t.finishLeftRegions=function(e,n,i){for(var r,s=null,o=n,a=n.eUp;o!==i;){if(o.fixUpperEdge=!1,s=t.regionBelow(o),r=s.eUp,r.Org!=a.Org){if(!s.fixUpperEdge){t.finishRegion(e,o);break}r=e.mesh.connect(a.Lprev,r.Sym),t.fixUpperEdge(e,s,r)}a.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(a,r)),t.finishRegion(e,o),a=s.eUp,o=s}return a},t.addRightEdges=function(e,n,i,r,s,o){var a,l,c,d,u=!0;c=i;do Bt(Ct.vertLeq(c.Org,c.Dst)),t.addRegionBelow(e,n,c.Sym),c=c.Onext;while(c!==r);for(s===null&&(s=t.regionBelow(n).eUp.Rprev),l=n,d=s;a=t.regionBelow(l),c=a.eUp.Sym,c.Org===d.Org;)c.Onext!==d&&(e.mesh.splice(c.Oprev,c),e.mesh.splice(d.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=t.isWindingInside(e,a.windingNumber),l.dirty=!0,!u&&t.checkForRightSplice(e,l)&&(t.addWinding(c,d),t.deleteRegion(e,l),e.mesh.delete(d)),u=!1,l=a,d=c;l.dirty=!0,Bt(l.windingNumber-c.winding===a.windingNumber),o&&t.walkDirtyRegions(e,l)},t.spliceMergeVertices=function(e,n,i){e.mesh.splice(n,i)},t.vertexWeights=function(e,n,i){var r=Ct.vertL1dist(n,e),s=Ct.vertL1dist(i,e),o=.5*s/(r+s),a=.5*r/(r+s);e.coords[0]+=o*n.coords[0]+a*i.coords[0],e.coords[1]+=o*n.coords[1]+a*i.coords[1],e.coords[2]+=o*n.coords[2]+a*i.coords[2]},t.getIntersectData=function(e,n,i,r,s,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,t.vertexWeights(n,i,r),t.vertexWeights(n,s,o)},t.checkForRightSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp;if(Ct.vertLeq(r.Org,s.Org)){if(Ct.edgeSign(s.Dst,r.Org,s.Org)>0)return!1;Ct.vertEq(r.Org,s.Org)?r.Org!==s.Org&&(e.pq.delete(r.Org.pqHandle),t.spliceMergeVertices(e,s.Oprev,r)):(e.mesh.splitEdge(s.Sym),e.mesh.splice(r,s.Oprev),n.dirty=i.dirty=!0)}else{if(Ct.edgeSign(r.Dst,s.Org,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Oprev,r)}return!0},t.checkForLeftSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o;if(Bt(!Ct.vertEq(r.Dst,s.Dst)),Ct.vertLeq(r.Dst,s.Dst)){if(Ct.edgeSign(r.Dst,s.Dst,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,o=e.mesh.splitEdge(r),e.mesh.splice(s.Sym,o),o.Lface.inside=n.inside}else{if(Ct.edgeSign(s.Dst,r.Dst,s.Org)>0)return!1;n.dirty=i.dirty=!0,o=e.mesh.splitEdge(s),e.mesh.splice(r.Lnext,s.Sym),o.Rface.inside=n.inside}return!0},t.checkForIntersect=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o=r.Org,a=s.Org,l=r.Dst,c=s.Dst,d,u,h=new i0,f,p;if(Bt(!Ct.vertEq(c,l)),Bt(Ct.edgeSign(l,e.event,o)<=0),Bt(Ct.edgeSign(c,e.event,a)>=0),Bt(o!==e.event&&a!==e.event),Bt(!n.fixUpperEdge&&!i.fixUpperEdge),o===a||(d=Math.min(o.t,l.t),u=Math.max(a.t,c.t),d>u))return!1;if(Ct.vertLeq(o,a)){if(Ct.edgeSign(c,o,a)>0)return!1}else if(Ct.edgeSign(l,a,o)<0)return!1;return t.debugEvent(e),Ct.intersect(l,o,c,a,h),Bt(Math.min(o.t,l.t)<=h.t),Bt(h.t<=Math.max(a.t,c.t)),Bt(Math.min(c.s,l.s)<=h.s),Bt(h.s<=Math.max(a.s,o.s)),Ct.vertLeq(h,e.event)&&(h.s=e.event.s,h.t=e.event.t),f=Ct.vertLeq(o,a)?o:a,Ct.vertLeq(f,h)&&(h.s=f.s,h.t=f.t),Ct.vertEq(h,o)||Ct.vertEq(h,a)?(t.checkForRightSplice(e,n),!1):!Ct.vertEq(l,e.event)&&Ct.edgeSign(l,e.event,h)>=0||!Ct.vertEq(c,e.event)&&Ct.edgeSign(c,e.event,h)<=0?c===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Sym,r),n=t.topLeftRegion(e,n),r=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),i),t.addRightEdges(e,n,r.Oprev,r,r,!0),!0):l===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(r.Lnext,s.Oprev),i=n,n=t.topRightRegion(n),p=t.regionBelow(n).eUp.Rprev,i.eUp=s.Oprev,s=t.finishLeftRegions(e,i,null),t.addRightEdges(e,n,s.Onext,r.Rprev,p,!0),!0):(Ct.edgeSign(l,e.event,h)>=0&&(t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),Ct.edgeSign(c,e.event,h)<=0&&(n.dirty=i.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(r.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,r),r.Org.s=h.s,r.Org.t=h.t,r.Org.pqHandle=e.pq.insert(r.Org),t.getIntersectData(e,r.Org,o,l,a,c),t.regionAbove(n).dirty=n.dirty=i.dirty=!0,!1)},t.walkDirtyRegions=function(e,n){for(var i=t.regionBelow(n),r,s;;){for(;i.dirty;)n=i,i=t.regionBelow(i);if(!n.dirty&&(i=n,n=t.regionAbove(n),n===null||!n.dirty))return;if(n.dirty=!1,r=n.eUp,s=i.eUp,r.Dst!==s.Dst&&t.checkForLeftSplice(e,n)&&(i.fixUpperEdge?(t.deleteRegion(e,i),e.mesh.delete(s),i=t.regionBelow(n),s=i.eUp):n.fixUpperEdge&&(t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i),r=n.eUp)),r.Org!==s.Org)if(r.Dst!==s.Dst&&!n.fixUpperEdge&&!i.fixUpperEdge&&(r.Dst===e.event||s.Dst===e.event)){if(t.checkForIntersect(e,n))return}else t.checkForRightSplice(e,n);r.Org===s.Org&&r.Dst===s.Dst&&(t.addWinding(s,r),t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i))}},t.connectRightVertex=function(e,n,i){var r,s=i.Onext,o=t.regionBelow(n),a=n.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&t.checkForIntersect(e,n),Ct.vertEq(a.Org,e.event)&&(e.mesh.splice(s.Oprev,a),n=t.topLeftRegion(e,n),s=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),o),c=!0),Ct.vertEq(l.Org,e.event)&&(e.mesh.splice(i,l.Oprev),i=t.finishLeftRegions(e,o,null),c=!0),c){t.addRightEdges(e,n,i.Onext,s,s,!0);return}Ct.vertLeq(l.Org,a.Org)?r=l.Oprev:r=a,r=e.mesh.connect(i.Lprev,r),t.addRightEdges(e,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,t.walkDirtyRegions(e,n)},t.connectLeftDegenerate=function(e,n,i){var r,s,o,a,l;if(r=n.eUp,Ct.vertEq(r.Org,i)){Bt(!1),t.spliceMergeVertices(e,r,i.anEdge);return}if(!Ct.vertEq(r.Dst,i)){e.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(e.mesh.delete(r.Onext),n.fixUpperEdge=!1),e.mesh.splice(i.anEdge,r),t.sweepEvent(e,i);return}Bt(!1),n=t.topRightRegion(n),l=t.regionBelow(n),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(Bt(s!==o),t.deleteRegion(e,l),e.mesh.delete(o),o=s.Oprev),e.mesh.splice(i.anEdge,o),Ct.edgeGoesLeft(s)||(s=null),t.addRightEdges(e,n,o.Onext,a,s,!0)},t.connectLeftVertex=function(e,n){var i,r,s,o,a,l,c=new ak;if(c.eUp=n.anEdge.Sym,i=e.dict.search(c).key,r=t.regionBelow(i),!!r){if(o=i.eUp,a=r.eUp,Ct.edgeSign(o.Dst,n,o.Org)===0){t.connectLeftDegenerate(e,i,n);return}if(s=Ct.vertLeq(a.Dst,o.Dst)?i:r,i.inside||s.fixUpperEdge){if(s===i)l=e.mesh.connect(n.anEdge.Sym,o.Lnext);else{var d=e.mesh.connect(a.Dnext,n.anEdge);l=d.Sym}s.fixUpperEdge?t.fixUpperEdge(e,s,l):t.computeWinding(e,t.addRegionBelow(e,i,l)),t.sweepEvent(e,n)}else t.addRightEdges(e,i,n.anEdge,n.anEdge,null,!0)}},t.sweepEvent=function(e,n){e.event=n,t.debugEvent(e);for(var i=n.anEdge;i.activeRegion===null;)if(i=i.Onext,i===n.anEdge){t.connectLeftVertex(e,n);return}var r=t.topLeftRegion(e,i.activeRegion);Bt(r!==null);var s=t.regionBelow(r),o=s.eUp,a=t.finishLeftRegions(e,s,null);a.Onext===o?t.connectRightVertex(e,r,a):t.addRightEdges(e,r,a.Onext,o,o,!0)},t.addSentinel=function(e,n,i,r){var s=new ak,o=e.mesh.makeEdge();o.Org.s=i,o.Org.t=r,o.Dst.s=n,o.Dst.t=r,e.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=e.dict.insert(s)},t.initEdgeDict=function(e){e.dict=new yot(e,t.edgeLeq);var n=e.bmax[0]-e.bmin[0],i=e.bmax[1]-e.bmin[1],r=e.bmin[0]-n,s=e.bmax[0]+n,o=e.bmin[1]-i,a=e.bmax[1]+i;t.addSentinel(e,r,s,o),t.addSentinel(e,r,s,a)},t.doneEdgeDict=function(e){for(var n,i=0;(n=e.dict.min().key)!==null;)n.sentinel||(Bt(n.fixUpperEdge),Bt(++i===1)),Bt(n.windingNumber===0),t.deleteRegion(e,n)},t.removeDegenerateEdges=function(e){var n,i,r,s=e.mesh.eHead;for(n=s.next;n!==s;n=i)i=n.next,r=n.Lnext,Ct.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(t.spliceMergeVertices(e,r,n),e.mesh.delete(n),n=r,r=n.Lnext),r.Lnext===n&&(r!==n&&((r===i||r===i.Sym)&&(i=i.next),e.mesh.delete(r)),(n===i||n===i.Sym)&&(i=i.next),e.mesh.delete(n))},t.initPriorityQ=function(e){var n,i,r,s=0;for(r=e.mesh.vHead,i=r.next;i!==r;i=i.next)s++;for(s+=8,n=e.pq=new vot(s,Ct.vertLeq),r=e.mesh.vHead,i=r.next;i!==r;i=i.next)i.pqHandle=n.insert(i);return i!==r?!1:(n.init(),!0)},t.donePriorityQ=function(e){e.pq=null},t.removeDegenerateFaces=function(e,n){var i,r,s;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,s=i.anEdge,Bt(s.Lnext!==s),s.Lnext.Lnext===s&&(t.addWinding(s.Onext,s),e.mesh.delete(s));return!0},t.computeInterior=function(e,n){n===void 0&&(n=!0);var i,r;if(t.removeDegenerateEdges(e),!t.initPriorityQ(e))return!1;for(t.initEdgeDict(e);(i=e.pq.extractMin())!==null;){for(;r=e.pq.min(),!(r===null||!Ct.vertEq(r,i));)r=e.pq.extractMin(),t.spliceMergeVertices(e,i.anEdge,r.anEdge);t.sweepEvent(e,i)}return e.event=e.dict.min().key.eUp.Org,t.debugEvent(e),t.doneEdgeDict(e),t.donePriorityQ(e),t.removeDegenerateFaces(e,e.mesh)?(n&&e.mesh.check(),!0):!1},t}(),bot=function(){function t(){this.mesh=new dQ,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Hn.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return t.prototype.dot_=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},t.prototype.normalize_=function(e){var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),e[0]/=n,e[1]/=n,e[2]/=n},t.prototype.longAxis_=function(e){var n=0;return Math.abs(e[1])>Math.abs(e[0])&&(n=1),Math.abs(e[2])>Math.abs(e[n])&&(n=2),n},t.prototype.computeNormal_=function(e){var n,i,r,s,o,a,l=[0,0,0],c=[0,0,0],d=[0,0,0],u=[0,0,0],h=[0,0,0],f=[null,null,null],p=[null,null,null],m=this.mesh.vHead;n=m.next;for(var g=0;g<3;++g)s=n.coords[g],c[g]=s,p[g]=n,l[g]=s,f[g]=n;for(n=m.next;n!==m;n=n.next)for(var v=0;v<3;++v)s=n.coords[v],s<c[v]&&(c[v]=s,p[v]=n),s>l[v]&&(l[v]=s,f[v]=n);var y=0;if(l[1]-c[1]>l[0]-c[0]&&(y=1),l[2]-c[2]>l[y]-c[y]&&(y=2),c[y]>=l[y]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,i=p[y],r=f[y],d[0]=i.coords[0]-r.coords[0],d[1]=i.coords[1]-r.coords[1],d[2]=i.coords[2]-r.coords[2],n=m.next;n!==m;n=n.next)u[0]=n.coords[0]-r.coords[0],u[1]=n.coords[1]-r.coords[1],u[2]=n.coords[2]-r.coords[2],h[0]=d[1]*u[2]-d[2]*u[1],h[1]=d[2]*u[0]-d[0]*u[2],h[2]=d[0]*u[1]-d[1]*u[0],o=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],o>a&&(a=o,e[0]=h[0],e[1]=h[1],e[2]=h[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(d)]=1)},t.prototype.checkOrientation_=function(){for(var e=this.mesh.fHead,n,i=this.mesh.vHead,r,s=0,o=e.next;o!==e;o=o.next)if(r=o.anEdge,!(r.winding<=0))do s+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext;while(r!==o.anEdge);if(s<0){for(n=i.next;n!==i;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},t.prototype.projectPolygon_=function(){var e=this.mesh.vHead,n=[0,0,0],i,r,s=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),s=!0),i=this.sUnit,r=this.tUnit;var o=this.longAxis_(n);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=n[o]>0?1:-1;for(var a=e.next;a!==e;a=a.next)a.s=this.dot_(a.coords,i),a.t=this.dot_(a.coords,r);s&&this.checkOrientation_();for(var l=!0,c=e.next;c!==e;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},t.prototype.addWinding_=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.prototype.tessellateMonoRegion_=function(e,n){var i,r;if(i=n.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;Ct.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Ct.vertLeq(i.Org,i.Dst);i=i.Lnext);r=i.Lprev;for(var s=void 0;i.Lnext!==r;)if(Ct.vertLeq(i.Dst,r.Org)){for(;r.Lnext!==i&&(Ct.edgeGoesLeft(r.Lnext)||Ct.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)s=e.connect(r.Lnext,r),r=s.Sym;r=r.Lprev}else{for(;r.Lnext!==i&&(Ct.edgeGoesRight(i.Lprev)||Ct.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=e.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(r.Lnext===i)throw"Mono region invalid";for(;r.Lnext.Lnext!==i;)s=e.connect(r.Lnext,r),r=s.Sym;return!0},t.prototype.tessellateInterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)if(n=i.next,i.inside&&!this.tessellateMonoRegion_(e,i))return!1;return!0},t.prototype.discardExterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)n=i.next,i.inside||e.zapFace(i)},t.prototype.setWindingNumber_=function(e,n,i){for(var r,s=e.eHead.next;s!==e.eHead;s=r)r=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?n:-n:i?e.delete(s):s.winding=0},t.prototype.getNeighbourFace_=function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},t.prototype.outputPolymesh_=function(e,n,i,r){var s,o=0,a=0,l;i>3&&e.mergeConvexFaces(i);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var d=e.fHead.next;d!==e.fHead;d=d.next)if(d.n=-1,!!d.inside){s=d.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==d.anEdge);if(l>i)throw"Face vertex greater that support polygon";d.n=o,++o}this.elementCount=o,n===yr.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=e.vHead.next;c!==e.vHead;c=c.next)if(c.n!==-1){var u=c.n*r;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],r>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var h=0,d=e.fHead.next;d!==e.fHead;d=d.next)if(d.inside){s=d.anEdge,l=0;do{var c=s.Org;this.elements[h++]=c.n,l++,s=s.Lnext}while(s!==d.anEdge);for(var f=l;f<i;++f)this.elements[h++]=-1;if(n===yr.CONNECTED_POLYGONS){s=d.anEdge;do this.elements[h++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==d.anEdge);for(var p=l;p<i;++p)this.elements[h++]=-1}}},t.prototype.outputContours_=function(e,n){var i,r,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=i=a.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,d=0;s=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=i=a.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],n>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==r);this.elements[d++]=s,this.elements[d++]=o,s+=o}},t.prototype.addContour=function(e,n){this.mesh===null&&(this.mesh=new dQ),e<2&&(e=2),e>3&&(e=3);for(var i=null,r=0;r<n.length;r+=e)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=n[r+0],i.Org.coords[1]=n[r+1],e>2?i.Org.coords[2]=n[r+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},t.prototype.tesselate=function(e,n,i,r,s,o){if(e===void 0&&(e=Hn.ODD),n===void 0&&(n=yr.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),xot.computeInterior(this,o);var a=this.mesh;return n===yr.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),n===yr.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,n,i,r),!0},t}();function cf(t){var e=t.windingRule,n=e===void 0?Hn.ODD:e,i=t.elementType,r=i===void 0?yr.POLYGONS:i,s=t.polySize,o=s===void 0?3:s,a=t.vertexSize,l=a===void 0?2:a,c=t.normal,d=c===void 0?[0,0,1]:c,u=t.contours,h=u===void 0?[]:u,f=t.strict,p=f===void 0?!0:f,m=t.debug,g=m===void 0?!1:m;if(!h&&p)throw new Error("Contours can't be empty");if(h){var v=new bot;t.edgeCreateCallback&&(v.edgeCreateCallback=t.edgeCreateCallback),t.vertexIdCallback&&(v.vertexIdCallback=t.vertexIdCallback);for(var y=0;y<h.length;y++)v.addContour(l||2,h[y]);return v.tesselate(n,r,o,l,d,p),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}Hn.ODD;Hn.NONZERO;Hn.POSITIVE;Hn.NEGATIVE;Hn.ABS_GEQ_TWO;yr.POLYGONS;yr.CONNECTED_POLYGONS;yr.BOUNDARY_CONTOURS;var jF=class{constructor(t=256,e=!1){this.capacity=t,this.size=0,this.debug=e,this.debug&&console.log(`allocating with cap ${t}`);let n=t*jF.eSize;this.buffer=new ArrayBuffer(n);let i=Float32Array.BYTES_PER_ELEMENT,r=0;this.positions=new Float32Array(this.buffer,r*i,3*t),r+=3*t,this.normals=new Float32Array(this.buffer,r*i,3*t),r+=3*t,this.uvs=new Float32Array(this.buffer,r*i,2*t)}realloc(t,e=!1){if(t<this.size)throw Error("cannot shrink buffer");if(t<=this.capacity&&!e)return;this.debug&&console.log(`resizing from ${this.capacity}  ${t}`);let n=t*jF.eSize,i=new ArrayBuffer(n),r=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(i,s*r,3*t);s+=3*t;let a=new Float32Array(i,s*r,3*t);s+=3*t;let l=new Float32Array(i,s*r,2*t);o.set(this.positions.slice(0,this.size*3)),a.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=i,this.positions=o,this.normals=a,this.uvs=l,this.capacity=t}get(t=1){let e=this.size+t;if(e>this.capacity){let i=this.capacity;for(;e>i;)i*=2;this.realloc(i)}let n=this.size;return this.size=e,n}reserve(t){let e=this.size+t;e>this.capacity&&this.realloc(e)}shrink(){this.debug&&console.log(`shrinking ${this.capacity}  ${this.size}`),this.realloc(this.size,!0)}},Rde=jF;Rde.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var HH={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},Ode={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},Lde={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},lk=(t,e)=>([n,i])=>(i<n&&(i+=e),(t>=n?t:t+e)<=i),Ide=class extends Ut{constructor(t,e,n=0,i=12,r=3,s=Hn.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=t,this._depth=e,this._bevel=n,this._curveSegments=i,this._bevelSegmentsInput=r,n<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(n,e/2-1e-12),this._bevelSegments=Math.floor(r));let o=this._shape.extractShapePointsToFlatArray([],i),a=this._shape.shapeHoles.map(w=>{let E=w.extractShapePointsToFlatArray([],i),A=[];for(let S=E.length-1;S>=1;S-=2){let C=E[S-1],T=E[S-0];A.push(C,T)}return A}),l;try{l=cf({windingRule:s,elementType:yr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{l=HH}let c;try{c=cf({windingRule:Hn.ODD,elementType:yr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]})}catch{c=Ode}if(!l)throw new Error("error generating geometry");let d=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let w=0;w<c.elements.length;w++){let E=c.elements[w],A=w%2===0?l.vertexCount:0;l.elements.push(E+A)}for(let w=0;w<c.vertexIndices.length;w++){let E=c.vertexIndices[w],A=l.vertexCount;l.vertexIndices.push(E+A)}for(let w=0;w<c.vertices.length;w++){let E=c.vertices[w];l.vertices.push(E)}}let u=1/0,h=-1/0,f=1/0,p=-1/0;for(let w=0,E=l.vertexCount;w<E;w++){let A=w*2,S=l.vertices[A+0],C=l.vertices[A+1];S<u&&(u=S),S>h&&(h=S),C<f&&(f=C),C>p&&(p=C)}this._minX=u,this._minY=f,this._width=h-u,this._height=p-f,this._buffer=new Rde(this._computeBufferEstimatedSize(l));let m=[],g=[];for(let w=l.elementCount-1;w>=0;w--){let E=w>=d,A=w*2,S=l.elements[A+0],C=l.elements[A+1],T=S+C,P={start:S,count:C,normals:[],continuous:[],concave:[]},R=S,L=T-1,O=S+1,B=this._shape.roundedCurves.length;do{let U=R-S,N=l.vertices[L*2+0],k=l.vertices[L*2+1],z=l.vertices[R*2+0],W=l.vertices[R*2+1],K=l.vertices[O*2+0],J=l.vertices[O*2+1],F=z-N,ee=W-k,ie=Math.sqrt(F*F+ee*ee);F/=ie,ee/=ie;let te=z-K,re=W-J,me=Math.sqrt(te*te+re*re);te/=me,re/=me,P.normals[U*2+0]=-re,P.normals[U*2+1]=te,P.concave[U]=F*re-ee*te>0;let se=l.vertexIndices[R];if(Array.isArray(se))P.continuous[U]=!1;else{let[oe,be]=this._shape.getCurveIndexFromVertexId(se-1,!0);if(be>0&&be<1)P.continuous[U]=!0;else{let Ae=be===1?oe+1:oe-1;Ae=(Ae+B)%B;let Ie=be===1?0:1,Le=this._shape.roundedCurves[oe].getTangent(be),fe=this._shape.roundedCurves[Ae].getTangent(Ie);P.continuous[U]=Le.dot(fe)>.95}}E&&(P.normals[U*2+0]*=-1,P.normals[U*2+1]*=-1),[L,R,O]=[R,O,O+1],O>=T&&(O-=C)}while(O!==S+1);let $=[];$.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(S*2,T*2),vertexCount:C,vertexIndices:new Array(C).fill(!0).map((U,N)=>[N,N]),elements:[0,C],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(S*2,T*2)});for(let U=1;U<=this._bevelSegments;U++){let N=U/this._bevelSegments*Math.PI/2,k=(1-Math.cos(N))*this._bevelSize,z=[],W=[],K=0;for(let F=0;F<C;F++){let ee=F*2,ie=(F-1+C)%C*2,te=l.vertices[P.start*2+ee+0],re=l.vertices[P.start*2+ee+1],me=-P.normals[ie+0]*k,se=-P.normals[ie+1]*k,oe=-P.normals[ee+0]*k,be=-P.normals[ee+1]*k;if(P.concave[F]||!P.concave[F]&&E){let Ae=Math.atan2(se,me),Ie=Math.atan2(be,oe);Ie>Ae&&(Ie-=Math.PI*2);let Le=Ie-Ae;if(P.continuous[F]||E){let fe=Ae+Le/2,ve=Math.cos(fe)*k,ke=Math.sin(fe)*k;z[2*K+0]=te+ve*(E?-1:1),z[2*K+1]=re+ke*(E?-1:1),W[K]=F,K++}else{let fe=Math.max(1,Math.floor(i/4*Math.abs(Le)/Math.PI));for(let ve=0;ve<=fe;ve++){let ke=Ae+Le*(ve/fe),ze=Math.cos(ke)*k,j=Math.sin(ke)*k;z[2*K+0]=te+ze,z[2*K+1]=re+j,W[K]=F,K++}}}else z[2*K+0]=te+me,z[2*K+1]=re+se,W[K]=F,K++,z[2*K+0]=te,z[2*K+1]=re,W[K]=F,K++,z[2*K+0]=te+oe,z[2*K+1]=re+be,W[K]=F,K++}let J=cf({windingRule:Hn.POSITIVE,elementType:yr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[z],edgeCreateCallback:F=>{let ee=F.Org.idx,ie=W[ee],te=W[(ee+1)%W.length];F.idx=[ie,te],F.Sym.idx=[te,ie]},vertexIdCallback:F=>{let ee=F.Lprev.idx;return[ee?ee[1]:0,F.idx?F.idx[0]:0]}});if(!J)throw console.log("Error"),new Error(`error generating bevel geometry for ${U}'th loop`);if(!J.vertexCount)break;for(let F=0;F<J.vertexIndices.length;F++){let[ee,ie]=J.vertexIndices[F];if(ee===ie)continue;let te=ie;ie<ee&&(te+=C);for(let re=ee;re<te;re++){let me=re%C,se=(re+1)%C;if(!P.continuous[me]||!P.continuous[se]){J.vertexIndices[F]=[ee,me],J.vertexIndices.splice(F+1,0,[se,ie]),J.vertices.splice((F+1)*2,0,J.vertices[F*2],J.vertices[F*2+1]);break}}}$.push({bevelI:U,angle:N,size:k,boundary:J,reverseMap:W,insetPoints:z})}let X=(U,N,k)=>{let z=0,W=U.boundary.vertexIndices.length;for(;z<W&&k(U.boundary.vertexIndices[N]);)N=(N+1)%W,z++;return z},H=m.length;for(let U=1;U<$.length;U++){let N=$[U-1],k=$[U],z=N.boundary.vertexIndices.length,W=k.boundary.vertexIndices.length;if(!z||!W)break;let K=P.concave.length,J=0,F=lk(J,C);for(;!N.boundary.vertexIndices.filter(F).length||!k.boundary.vertexIndices.filter(F).length;)J++,F=lk(J,C);let ee=N.boundary.vertexIndices.findIndex(F),ie=k.boundary.vertexIndices.findIndex(F);do ee=(ee+1)%z;while(F(N.boundary.vertexIndices[ee]));do ie=(ie+1)%W;while(F(k.boundary.vertexIndices[ie]));J=(J+1)%C;let te=J,re=this._buildBevelVert(P,N,(ee-1+z)%z),me=this._buildBevelVert(P,k,(ie-1+W)%W),se=re,oe=me,be,Ae,Ie=!1;do{F=lk(J,C);let Le=X(N,ee,F),fe=X(k,ie,F),ve=Ie;if(Ie=!1,Le&&!fe){for(let ke=0;ke<Le;ke++)be=this._buildBevelVert(P,N,(ee+ke)%z,ke/(Le-1)),m.push(se.topN,be.topP,oe.topN),m.push(be.bottomP,se.bottomN,oe.bottomN),se=be;Ie=!0}else if(!Le&&fe)for(let ke=0;ke<fe;ke++)Ae=this._buildBevelVert(P,k,(ie+ke)%W,ke/(fe-1)),m.push(oe.topN,se.topP,Ae.topP),m.push(se.bottomP,oe.bottomN,Ae.bottomP),oe=Ae;else if(Le&&fe)if(be=this._buildBevelVert(P,N,ee,0),Ae=this._buildBevelVert(P,k,ie,0),ve?(m.push(se.topN,Ae.topP,oe.topN),m.push(se.topN,be.topP,Ae.topP),m.push(Ae.bottomP,se.bottomN,oe.bottomN),m.push(Ae.bottomP,be.bottomP,se.bottomN)):(m.push(oe.topN,se.topN,be.topP),m.push(oe.topN,be.topP,Ae.topP),m.push(be.bottomP,se.bottomN,oe.bottomN),m.push(be.bottomP,oe.bottomN,Ae.bottomP)),se=be,oe=Ae,Le===fe)for(let ke=1;ke<Le;ke++)be=this._buildBevelVert(P,N,(ee+ke)%z,ke/(Le-1)),Ae=this._buildBevelVert(P,k,(ie+ke)%W,ke/(fe-1)),m.push(se.topN,be.topP,oe.topN),m.push(oe.topN,be.topP,Ae.topP),m.push(be.bottomP,se.bottomN,oe.bottomN),m.push(be.bottomP,oe.bottomN,Ae.bottomP),se=be,oe=Ae;else if(Le>fe){let ke=Le/fe,ze=0;for(let j=1;j<Le;j++)be=this._buildBevelVert(P,N,(ee+j)%z,j/(Le-1)),m.push(se.topN,be.topP,oe.topN),m.push(be.bottomP,se.bottomN,oe.bottomN),se=be,j>(ze+1)*ke&&(ze++,Ae=this._buildBevelVert(P,k,(ie+ze)%W,ze/(fe-1)),m.push(oe.topN,be.topP,Ae.topP),m.push(be.bottomP,oe.bottomN,Ae.bottomP),oe=Ae)}else{let ke=fe/Le,ze=0;for(let j=1;j<fe;j++)Ae=this._buildBevelVert(P,k,(ie+j)%W,j/(fe-1)),m.push(oe.topN,be.topP,Ae.topP),m.push(be.bottomP,oe.bottomN,Ae.bottomP),oe=Ae,j>(ze+1)*ke&&(ze++,be=this._buildBevelVert(P,N,(ee+ze)%z,ze/(Le-1)),m.push(se.topN,be.topP,oe.topN),m.push(be.bottomP,se.bottomN,oe.bottomN),se=be)}ee=(ee+Le)%z,ie=(ie+fe)%W,J=(J+1)%K}while(J!==te)}if(this._buildWall($,P,m),E){let U=[];for(let N=m.length-1;N>=H+2;N-=3){let k=m[N-2],z=m[N-1],W=m[N-0];U.push(W,z,k)}m.splice(H,m.length-H,...U)}if(E){let U=[];for(let N=$[$.length-1].boundary.vertices.length-1;N>=1;N-=2){let k=$[$.length-1].boundary.vertices[N-1],z=$[$.length-1].boundary.vertices[N-0];U.push(k,z)}g.push(U)}if(!E){let U=$[$.length-1],N;try{N=cf({windingRule:$.length>1?Hn.POSITIVE:Hn.ODD,elementType:yr.POLYGONS,vertexSize:2,strict:!0,contours:[U.insetPoints,...g]})}catch{N=Lde}if(!N)throw new Error("Error generating geometry for surface");a.length===0&&Object.assign(this,{capStartIndex:m.length});for(let k=0;k<N.elementCount*3;k+=3){let z=this._buildSurfaceVert(N,N.elements[k+0]),W=this._buildSurfaceVert(N,N.elements[k+1]),K=this._buildSurfaceVert(N,N.elements[k+2]);m.push(z.top,W.top,K.top),m.push(K.bottom,W.bottom,z.bottom)}}this.vertexCache={}}this._buffer.shrink();let v=new Wt(Uint32Array.from(m),1),y=new Wt(this._buffer.positions,3),x=new Wt(this._buffer.normals,3),b=new Wt(this._buffer.uvs,2);y.needsUpdate=!0,x.needsUpdate=!0,b.needsUpdate=!0,v.needsUpdate=!0,this.setAttribute("position",y),this.setAttribute("normal",x),this.setAttribute("uv",b),this.setIndex(v)}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,e,n){let i=t[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,i,r),a=this._buildBevelVert(e,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}_buildSurfaceVert(t,e){let n=e.toString();if(n in this.vertexCache)return this.vertexCache[n];let i=t.vertices[e*2+0],r=t.vertices[e*2+1],s=(i-this._minX)/this._width,o=(r-this._minY)/this._height,a=this._buffer.get(2),l=a*3,c=a*2,d={top:a+0,bottom:a+1};return this._buffer.positions[l+0]=i,this._buffer.positions[l+1]=r,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this._buffer.positions[l+3]=i,this._buffer.positions[l+4]=r,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o,this.vertexCache[n]=d,d}_buildBevelVert(t,e,n,i=1){let r=`${e.bevelI}:${n}`;if(r in this.vertexCache)return this.vertexCache[r];let[s,o]=e.boundary.vertexIndices[n],a,l,c,d;s!==o?(l=s,a=o,d=!1,c=t.continuous[l]&&t.continuous[a]):(a=s,l=(a-1+t.count)%t.count,d=t.concave[a]&&e.bevelI>0,c=t.continuous[a]||d);let u=Math.cos(e.angle),h=Math.sin(e.angle),f=n*2,p=a*2,m=l*2,g=e.boundary.vertices[f+0],v=e.boundary.vertices[f+1],y=(1-h)*this._bevelSize,x=(g-this._minX)/this._width,b=(v-this._minY)/this._height,w=t.normals[p+0],E=t.normals[p+1],A=t.normals[m+0],S=t.normals[m+1];if(d){let L=A-w,O=S-E;w=w+L*(1-i),E=E+O*(1-i);let B=Math.sqrt(w*w+E*E);w/=B,E/=B}let C=this._buffer.get(c?2:4),T=C*3,P=C*2,R={i:n,fi:a,topP:C+0,topN:C+0,bottomP:C+1,bottomN:C+1};return this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=v,this._buffer.positions[T+2]=this._depth-y,this._buffer.normals[T+0]=w*u,this._buffer.normals[T+1]=E*u,this._buffer.normals[T+2]=h,this._buffer.uvs[P+0]=x,this._buffer.uvs[P+1]=b,this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=v,this._buffer.positions[T+5]=y,this._buffer.normals[T+3]=w*u,this._buffer.normals[T+4]=E*u,this._buffer.normals[T+5]=-h,this._buffer.uvs[P+2]=b,this._buffer.uvs[P+3]=x,c||(C+=2,T+=6,P+=4,R.topP=C+0,R.bottomP=C+1,this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=v,this._buffer.positions[T+2]=this._depth-y,this._buffer.normals[T+0]=A*u,this._buffer.normals[T+1]=S*u,this._buffer.normals[T+2]=h,this._buffer.uvs[P+0]=x,this._buffer.uvs[P+1]=b,this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=v,this._buffer.positions[T+5]=y,this._buffer.normals[T+3]=A*u,this._buffer.normals[T+4]=S*u,this._buffer.normals[T+5]=-h,this._buffer.uvs[P+2]=b,this._buffer.uvs[P+3]=x),this.vertexCache[r]=R,R}clone(){let t=new Ide(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=yR(this.userData),t}},kde=class extends Ut{constructor(t,e=12,n={}){super(),this.type="ShapeGeometry",this.windingRule=Hn.ODD,this.elementType=yr.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=t,this._curveSegments=e,this._triangulationOptions=Object.assign({windingRule:Hn.ODD,elementType:yr.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),r=this._shape.shapeHoles.map(h=>h.extractShapePointsToFlatArray([],this._curveSegments)),s,o=!0,a=!0,l,c;for(let h=0,f=i.length/2;h<f;h++){let p=h*2,m=i[p+0],g=i[p+1];if(l!==void 0&&m!==l&&(o=!1),c!==void 0&&g!==c&&(a=!1),l=m,c=g,!o&&!a)break}if(!o&&!a)try{s=cf({contours:[i,...r],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{s=HH}let d=(s==null?void 0:s.vertexCount)??1,u=(s==null?void 0:s.elementCount)??1;if(this._positionAttribute=new Wt(new Float32Array(d*3),3),this._normalAttribute=new Wt(new Float32Array(d*3),3),this._uvAttribute=new Wt(new Float32Array(d*2),2),this._indexAttribute=new Wt(new Uint32Array(u*3),1),s){let h=1/0,f=-1/0,p=1/0,m=-1/0;for(let y=0,x=d;y<x;y++){let b=y*2,w=s.vertices[b+0],E=s.vertices[b+1];w<h&&(h=w),w>f&&(f=w),E<p&&(p=E),E>m&&(m=E)}let g=f-h,v=m-p;for(let y=0,x=d;y<x;y++){let b=y*2,w=s.vertices[b+0],E=s.vertices[b+1],A=(w-h)/g,S=(E-p)/v;this._positionAttribute.setXYZ(y,w,E,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,A,S)}for(let y=0,x=u;y<x;y++){let b=y*3,w=s.elements[b+0],E=s.elements[b+1],A=s.elements[b+2];this._indexAttribute.setX(b+0,w),this._indexAttribute.setX(b+1,E),this._indexAttribute.setX(b+2,A)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((s==null?void 0:s.elementCount)??1)*3)}clone(){let t=new kde(this._shape,this._curveSegments);return t.userData=yR(this.userData),t}},Nde=class extends Ide{constructor(t,e,n=0,i=12,r=3,s=Hn.ODD){super(t,e,n,i,r,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,e,n){let i=t[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,i,r),a=this._buildBevelVert(e,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}clone(){let t=new Nde(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=yR(this.userData),t}},Tg=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var c,d;let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Hn.ODD},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.abs(n.depth??0),o=t.shape??(e==null?void 0:e.shape),a=(o==null?void 0:o.roundness)??n.roundness;o!==void 0&&(o instanceof $i?(o.width!==i||o.height!==r)&&o.applySize(i,r):o=new $i(i,r).fromJSON(o),((c=t.parameters)==null?void 0:c.roundness)!==void 0&&((d=t.parameters)==null?void 0:d.roundness)>0&&o.update());let l=o??new $i(i,r);return{parameters:Object.assign(n,{width:i,height:r,depth:s,roundness:a}),shape:l}}static build(t){let{depth:e,extrudeBevelSize:n,extrudeBevelSegments:i,subdivisions:r,roundness:s,windingRule:o}=t.parameters;t.shape.roundness=s;let a;return e<=0?a=new kde(t.shape,r,{windingRule:o}):a=new Nde(t.shape,e,n,r,i,o),Object.assign(a,{userData:{...t,type:"VectorGeometry"}})}},Bde=Math.PI*2,jH=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof $i?t.shape:new $i,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,spikes:i,angle:r,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c=t.shape,d=e*.5,u=n*.5,h=wot(c,d,u,r*Math.PI/180,i,s);c.isClosed=!0,c.update();let f=Tg.create({shape:c,parameters:{subdivisions:h,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...t,type:"EllipseGeometry"}})}};function wot(t,e,n,i,r,s){if(i>=Bde)return r>30||r%4===0?(Sot(t,e,n,s),Math.round(r/4)):mQ(t,i,r,e,n,s);i=Math.max(i,.001);let o={x:0,y:n},a=i+Math.PI*.5,l={x:Math.cos(a)*e,y:Math.sin(a)*n},c=got({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:e,ry:n,largeArcFlag:i>Math.PI,sweepFlag:!0});return r>30||r%c.length===0?_ot(t,o.x,o.y,c,r,e,n,s):mQ(t,i,r,e,n,s)}function _ot(t,e,n,i,r,s,o,a){let l=Math.round(r/i.length);t.addPoint(iy(e,n));for(let c=0,d=i.length;c<d;c++){let u=i[c],h=t.points[c],f=iy(u.x,u.y);h.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),t.addPoint(f)}return a>0?zde(t,s,o,a):t.addPoint(iy(0,0)),l}function mQ(t,e,n,i,r,s){let o=-e/n;for(let a=0;a<=n;a++){let l=o*a,c=Math.sin(l)*i,d=Math.cos(l)*r;t.addPoint(iy(c,d))}return e<Bde?s>0?zde(t,i,r,s):t.addPoint(iy(0,0)):(t.removePoint(t.points[t.points.length-1]),s>0&&Fde(t,i,r,s)),1}function Sot(t,e,n,i=0,r=0,s=0){let o=.5522847498,a=e*o,l=n*o;t.addPoint(VA(r-e,s,r-e,s-l,r-e,s+l)),t.addPoint(VA(r,s+n,r-a,s+n,r+a,s+n)),t.addPoint(VA(r+e,s,r+e,s+l,r+e,s-l)),t.addPoint(VA(r,s-n,r+a,s-n,r-a,s-n)),i>0&&Fde(t,e,n,i)}function iy(t,e){return new ny(pn.generateUUID(),new Se(t,e))}function VA(t,e,n,i,r,s){let o=iy(t,e);return o.controls[0].position.set(n,i),o.controls[1].position.set(r,s),o}function zde(t,e,n,i){Ude(t,e,n,i).forEach(r=>t.addPoint(r))}function Fde(t,e,n,i){let r=Ude(t,e,n,i),s=new $i;r.forEach(o=>s.addPoint(o)),s.isClosed=!0,t.shapeHoles.push(s)}function Ude(t,e,n,i){let r=i*e/100,s=r*(Math.abs(n)/Math.abs(e)),o=new Se(r/e,s/n),a=t.points.map(l=>{let c=l.clone();return c.uuid=pn.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),d=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(d),l.controls[1].position.copy(c)}),a}var Eot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??i),s=Math.abs(n.depth??i),o=Math.abs(Math.min(i,s))/2;return{parameters:Object.assign(n,{width:i,height:r,depth:s,radius:o,segments:Math.round(n.segments),pathSegments:Math.round(n.pathSegments),cornerSegments:Math.round(n.cornerSegments)})}}static build(t){let{width:e,height:n,depth:i,radius:r,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:d,cornerSegments:u}=t.parameters,h=new Vde(!1,e,n,i,r,s,o,a,l,c,d,u);return Object.assign(h,{userData:{...t,type:"HelixGeometry"}})}},ck=new K0([0,0,0],1),Vde=class extends Ut{constructor(t=!0,e=1,n=1,i=1,r=1,s=1,o=1,a=1,l=1,c=1,d=1,u=1){if(super(),s===0)return;let h=t&&s===1;h&&(u=0),d>100&&(d=100),d===0&&(u=0);let f=()=>new q,p=new q,m=f(),g=f(),v=f(),y,x,b,w,E,A,S,C,T=f(),P=f(),R=f(),L=f(),O=f(),B=f(),$=f(),X=f(),H=n-2*a+.001,U=H/s,N=Math.ceil(o*s),k=N+1,z=H/N,W=-H/2,K=c+1,J=2*Math.PI/c,F=Math.PI/2/u,ee=.01,ie=Math.min((1-d/100)*a,a-ee),te=a-ie,re=0,me=2,se=u*me+me,oe=K*se/me,be=oe+K*k,Ae=K*(k+se),[Ie,Le,fe]=[3,3,2].map(ae=>Array(Ae*ae).fill(0)),ve=[],ke=r-a;function ze(ae,Fe){let he=Math.PI/2;A=Fe*z,C=2*Math.PI*(A%U)/U+he,A+=W,S=Math.sin(C)*ke,E=Math.cos(C)*ke,t?ae.set(E,S,A):ae.set(E,A,S)}ze(p,-1e-10),ze(m,0),T.copy(p),ze(p,1);let j=p.distanceTo(m),V=h?0:te+ie,le=j*N+2*V,xe=ie,De=le-V;for(let ae=0;ae<=N;ae++){ze(g,ae),X.subVectors(g,T).normalize(),T.copy(g),B.copy(g).setComponent(+t+1,0).normalize(),$.crossVectors(X,B).normalize();let Fe=ae===0,he=ae===N,Ce=Fe?3*Math.PI/2:F,Ue=Fe?xe:De,We=Fe?K:be,rt=Fe?0:Ae-K,wt=X.clone().multiplyScalar(Fe?-te:te).add(g),$t=X.clone().multiplyScalar(Fe?-1:1).normalize();for(let ne=0;ne<K;ne++){let ge=ne*J;if(P.addVectors(p.copy(B).multiplyScalar(a*Math.cos(ge)),m.copy($).multiplyScalar(a*Math.sin(ge))),R.copy(P).normalize(),Fe||he){h||(re=rt+ne,[0,1,2].forEach(Me=>{Ie[re*3+Me]=wt.getComponent(Me),Le[re*3+Me]=$t.getComponent(Me)}),fe[re*2]=+he,fe[re*2+1]=ne/c),m.copy(R).multiplyScalar(ie),v.addVectors(g,m);for(let Me=0;Me<u;Me++){let qe=Me*F+Ce;L.addVectors(p.copy(X).multiplyScalar(te*Math.sin(qe)),m.copy(R).multiplyScalar(te*Math.cos(qe))),O.copy(L).normalize(),m.addVectors(v,L),L.normalize(),re=We+Me*K+ne,[0,1,2].forEach(yt=>{Ie[re*3+yt]=m.getComponent(yt),Le[re*3+yt]=O.getComponent(yt)});let Qe=+Fe+Math.sin(qe);fe[re*2]=(Ue+te*Qe)/le,fe[re*2+1]=ne/c}}m.addVectors(g,P),re=oe+ae*K+ne,[0,1,2].forEach(Me=>{Ie[re*3+Me]=m.getComponent(Me),Le[re*3+Me]=R.getComponent(Me)}),fe[re*2]=(V+ae*j)/le,fe[re*2+1]=ne/c}}let Ne=k+2*u+me,[He,Pe]=[+h,Ne-1];for(let ae=He;ae<=Pe-1;ae++){let Fe=h&&ae===Pe-1;for(let he=0;he<K-1;he++)y=ae*K+he,x=y+1,b=(Fe?he:y)+K,w=(Fe?he+1:x)+K,ae===0?ve.push(x,w,b):ae===Ne-2?ve.push(y,x,b):ve.push(y,x,b,x,w,b)}this.setIndex(ve),this.setAttribute("position",new xt(Ie,3)),this.setAttribute("normal",new xt(Le,3)),this.setAttribute("uv",new xt(fe,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let t=this.userData.parameters,e=Math.ceil(t.tubularSegments),n=t.radialSegments+1,i=Array.from(this.getIndex().array),r,s,o,a,l=6*(e-1)*t.radialSegments,c=e,d=c===e;for(let u=0;u<t.radialSegments;u++)r=c*n+u,s=r+1,o=(d?u:r)+n,a=(d?u+1:s)+n,i[l++]=r,i[l++]=s,i[l++]=o,i[l++]=s,i[l++]=a,i[l++]=o;return i.length=l,ck.array=i,ck.count=i.length,ck}},Mot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,detail:r,corner:s,cornerSides:o}=t.parameters,a=r===0&&s!==0?new Hde(e*.5,s,o):new Xce(e*.5,r);return a.scale(1,n/e,i/e),Object.assign(a,{userData:{...t,type:"IcosahedronGeometry"}})}},Hde=class extends FH{constructor(t=1,e=.2,n=4){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(r,s,o,t,e,n),this.type=o}static fromJSON(t){return new Hde(t.radius,t.corner,t.cornerSides)}},Aot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var i;(((i=t.parameters)==null?void 0:i.points)??[]).forEach(r=>{Array.isArray(r)&&(r.x=r[0],r.y=r[1])});let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{points:e,segments:n,verticalSegments:i}=t.parameters,r=new h2;r.moveTo(e[0].x,e[0].y),r.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y);let s=new Vce(r.extractPoints(i).shape,n);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...t,type:"LatheGeometry"}})}},Tc=new tt,uk=new ei,HA=new q,H2=class extends uo{constructor(){super(),this.uuid=pn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(t){let e=new cs().getNormalMatrix(t);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(t){return Tc.makeRotationX(t),this.applyMatrix4(Tc),this}rotateY(t){return Tc.makeRotationY(t),this.applyMatrix4(Tc),this}rotateZ(t){return Tc.makeRotationZ(t),this.applyMatrix4(Tc),this}translate(t,e,n){return Tc.makeTranslation(t,e,n),this.applyMatrix4(Tc),this}scale(t,e,n){return Tc.makeScale(t,e,n),this.applyMatrix4(Tc),this}lookAt(t){return uk.lookAt(t),uk.updateMatrix(),this.applyMatrix4(uk.matrix),this}fromBufferGeometry(t){let e=this,n=t.index!==null?t.index:void 0,i=t.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=i.position,s=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)e.vertices.push(new q().fromBufferAttribute(r,u)),o!==void 0&&e.colors.push(new Lt().fromBufferAttribute(o,u));function c(u,h,f,p){let m=o===void 0?[]:[e.colors[u].clone(),e.colors[h].clone(),e.colors[f].clone()],g=s===void 0?[]:[new q().fromBufferAttribute(s,u),new q().fromBufferAttribute(s,h),new q().fromBufferAttribute(s,f)],v=new GF(u,h,f,g,m,p);e.faces.push(v),a!==void 0&&e.faceVertexUvs[0].push([new Se().fromBufferAttribute(a,u),new Se().fromBufferAttribute(a,h),new Se().fromBufferAttribute(a,f)]),l!==void 0&&e.faceVertexUvs[1].push([new Se().fromBufferAttribute(l,u),new Se().fromBufferAttribute(l,h),new Se().fromBufferAttribute(l,f)])}let d=t.groups;if(d.length>0)for(let u=0;u<d.length;u++){let h=d[u],f=h.start,p=h.count;for(let m=f,g=f+p;m<g;m+=3)n!==void 0?c(n.getX(m),n.getX(m+1),n.getX(m+2),h.materialIndex):c(m,m+1,m+2,h.materialIndex)}else if(n!==void 0)for(let u=0;u<n.count;u+=3)c(n.getX(u),n.getX(u+1),n.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(HA).negate(),this.translate(HA.x,HA.y,HA.z),this}normalize(){this.computeBoundingSphere();let t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,i=new tt;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let t=new q,e=new q;for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,o),e.subVectors(s,o),t.cross(e),t.normalize(),r.normal.copy(t)}}computeVertexNormals(t=!0){let e=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)e[n]=new q;if(t){let n=new q,i=new q;for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),i.subVectors(a,l),n.cross(i),e[o.a].add(n),e[o.b].add(n),e[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];e[r.a].add(r.normal),e[r.b].add(r.normal),e[r.c].add(r.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)e[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=r.vertexNormals;s.length===3?(s[0].copy(e[r.a]),s[1].copy(e[r.b]),s[2].copy(e[r.c])):(s[0]=e[r.a].clone(),s[1]=e[r.b].clone(),s[2]=e[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){let n=this.faces[t],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,n=this.faces.length;e<n;e++){let i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,s=i.vertexNormals.length;r<s;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}let t=new H2;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];let r=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new q,c={a:new q,b:new q,c:new q};r.push(l),s.push(c)}}let i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=i.faceNormals[r],l=i.vertexNormals[r];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,n=this.faces.length;e<n;e++){let i=this.faces[e];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _r),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gl),this.boundingSphere.setFromPoints(this.vertices)}merge(t,e,n=0){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}let i,r=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.colors,d=t.colors;e!==void 0&&(i=new cs().getNormalMatrix(e));for(let u=0,h=o.length;u<h;u++){let f=o[u].clone();e!==void 0&&f.applyMatrix4(e),s.push(f)}for(let u=0,h=d.length;u<h;u++)c.push(d[u].clone());for(let u=0,h=l.length;u<h;u++){let f=l[u],p,m,g=f.vertexNormals,v=f.vertexColors,y=new GF(f.a+r,f.b+r,f.c+r);y.normal.copy(f.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let x=0,b=g.length;x<b;x++)p=g[x].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),y.vertexNormals.push(p);y.color.copy(f.color);for(let x=0,b=v.length;x<b;x++)m=v[x],y.vertexColors.push(m.clone());y.materialIndex=f.materialIndex+n,a.push(y)}for(let u=0,h=t.faceVertexUvs.length;u<h;u++){let f=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let g=f[p],v=[];for(let y=0,x=g.length;y<x;y++)v.push(g[y].clone());this.faceVertexUvs[u].push(v)}}}mergeMesh(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)}mergeVertices(t=4){let e={},n=[],i=[],r=Math.pow(10,t);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],d=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[d]===void 0?(e[d]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[e[d]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let d=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(d[u]===d[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,d=this.faceVertexUvs.length;c<d;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-n.length;return this.vertices=n,o}setFromPoints(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){let i=t[e];this.vertices.push(new q(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let t=this.faces,e=t.length;for(let a=0;a<e;a++)t[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}t.sort(n);let i=this.faceVertexUvs[0],r=this.faceVertexUvs[1],s,o;i&&i.length===e&&(s=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){let l=t[a]._id;s&&s.push(i[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(t[p]=f[p]);return t}let e=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];e.push(p.x,p.y,p.z)}let n=[],i=[],r={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],m=!0,g=!1,v=this.faceVertexUvs[0][f]!==void 0,y=p.normal.length()>0,x=p.vertexNormals.length>0,b=p.color.r!==1||p.color.g!==1||p.color.b!==1,w=p.vertexColors.length>0,E=0;if(E=c(E,0,0),E=c(E,1,m),E=c(E,2,g),E=c(E,3,v),E=c(E,4,y),E=c(E,5,x),E=c(E,6,b),E=c(E,7,w),n.push(E),n.push(p.a,p.b,p.c),n.push(p.materialIndex),v){let A=this.faceVertexUvs[0][f];n.push(h(A[0]),h(A[1]),h(A[2]))}if(y&&n.push(d(p.normal)),x){let A=p.vertexNormals;n.push(d(A[0]),d(A[1]),d(A[2]))}if(b&&n.push(u(p.color)),w){let A=p.vertexColors;n.push(u(A[0]),u(A[1]),u(A[2]))}}function c(f,p,m){return m?f|1<<p:f&~(1<<p)}function d(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return r[p]!==void 0||(r[p]=i.length/3,i.push(f.x,f.y,f.z)),r[p]}function u(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=s.length,s.push(f.getHex())),o[p]}function h(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(f.x,f.y)),l[p]}return t.data={},t.data.vertices=e,t.data.normals=i,s.length>0&&(t.data.colors=s),a.length>0&&(t.data.uvs=[a]),t.data.faces=n,t}clone(){return new H2().copy(this)}copy(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;let e=t.vertices;for(let u=0,h=e.length;u<h;u++)this.vertices.push(e[u].clone());let n=t.colors;for(let u=0,h=n.length;u<h;u++)this.colors.push(n[u].clone());let i=t.faces;for(let u=0,h=i.length;u<h;u++)this.faces.push(i[u].clone());for(let u=0,h=t.faceVertexUvs.length;u<h;u++){let f=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let g=f[p],v=[];for(let y=0,x=g.length;y<x;y++){let b=g[y];v.push(b.clone())}this.faceVertexUvs[u].push(v)}}let r=t.morphTargets;for(let u=0,h=r.length;u<h;u++){let f={};if(f.name=r[u].name,r[u].vertices!==void 0){f.vertices=[];for(let p=0,m=r[u].vertices.length;p<m;p++)f.vertices.push(r[u].vertices[p].clone())}if(r[u].normals!==void 0){f.normals=[];for(let p=0,m=r[u].normals.length;p<m;p++)f.normals.push(r[u].normals[p].clone())}this.morphTargets.push(f)}let s=t.morphNormals;for(let u=0,h=s.length;u<h;u++){let f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,m=s[u].vertexNormals.length;p<m;p++){let g=s[u].vertexNormals[p],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),f.vertexNormals.push(v)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,m=s[u].faceNormals.length;p<m;p++)f.faceNormals.push(s[u].faceNormals[p].clone())}this.morphNormals.push(f)}let o=t.skinWeights;for(let u=0,h=o.length;u<h;u++)this.skinWeights.push(o[u].clone());let a=t.skinIndices;for(let u=0,h=a.length;u<h;u++)this.skinIndices.push(a[u].clone());let l=t.lineDistances;for(let u=0,h=l.length;u<h;u++)this.lineDistances.push(l[u]);let c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());let d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}toBufferGeometry(){let t=new Tot().fromGeometry(this),e=new Ut,n=new Float32Array(t.vertices.length*3);if(e.setAttribute("position",jA.call(new Wt(n,3),t.vertices)),t.normals.length>0){let i=new Float32Array(t.normals.length*3);e.setAttribute("normal",jA.call(new Wt(i,3),t.normals))}if(t.colors.length>0){let i=new Float32Array(t.colors.length*3);e.setAttribute("color",gQ.call(new Wt(i,3),t.colors))}if(t.uvs.length>0){let i=new Float32Array(t.uvs.length*2);e.setAttribute("uv",vQ.call(new Wt(i,2),t.uvs))}if(t.uvs2.length>0){let i=new Float32Array(t.uvs2.length*2);e.setAttribute("uv2",vQ.call(new Wt(i,2),t.uvs2))}e.groups=t.groups;for(let i in t.morphTargets){let r=[],s=t.morphTargets[i];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new xt(l.data.length*3,3);c.name=l.name,r.push(jA.call(c,l.data))}e.morphAttributes[i]=r}if(t.skinIndices.length>0){let i=new xt(t.skinIndices.length*4,4);e.setAttribute("skinIndex",yQ.call(i,t.skinIndices))}if(t.skinWeights.length>0){let i=new xt(t.skinWeights.length*4,4);e.setAttribute("skinWeight",yQ.call(i,t.skinWeights))}return t.boundingSphere!==null&&(e.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(e.boundingBox=t.boundingBox.clone()),e}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(t){let e=new Ut,n=t.geometry;if(t.isPoints||t.isLine){let i=new xt(n.vertices.length*3,3),r=new xt(n.colors.length*3,3);if(e.setAttribute("position",jA.call(i,n.vertices)),e.setAttribute("color",gQ.call(r,n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let s=new xt(n.lineDistances.length,1);e.setAttribute("lineDistance",Cot.call(s,n.lineDistances))}n.boundingSphere!==null&&(e.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(e.boundingBox=n.boundingBox.clone())}else t.isMesh&&(e=n.toBufferGeometry());return e}};H2.prototype.isGeometry=!0;var Tot=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){let e=[],n,i,r,s=t.faces;for(i=0;i<s.length;i++){let o=s[i];o.materialIndex!==r&&(r=o.materialIndex,n!==void 0&&(n.count=i*3-n.start,e.push(n)),n={start:i*3,materialIndex:r})}n!==void 0&&(n.count=i*3-n.start,e.push(n)),this.groups=e}fromGeometry(t){let e=t.faces,n=t.vertices,i=t.faceVertexUvs,r=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,o=t.morphTargets,a=o.length,l;if(a>0){l=[];for(let g=0;g<a;g++)l[g]={name:o[g].name,data:[]};this.morphTargets.position=l}let c=t.morphNormals,d=c.length,u;if(d>0){u=[];for(let g=0;g<d;g++)u[g]={name:c[g].name,data:[]};this.morphTargets.normal=u}let h=t.skinIndices,f=t.skinWeights,p=h.length===n.length,m=f.length===n.length;n.length>0&&e.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<e.length;g++){let v=e[g];this.vertices.push(n[v.a],n[v.b],n[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let b=v.normal;this.normals.push(b,b,b)}let x=v.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let b=v.color;this.colors.push(b,b,b)}if(r===!0){let b=i[0][g];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new Se,new Se,new Se))}if(s===!0){let b=i[1][g];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new Se,new Se,new Se))}for(let b=0;b<a;b++){let w=o[b].vertices;l[b].data.push(w[v.a],w[v.b],w[v.c])}for(let b=0;b<d;b++){let w=c[b].vertexNormals[g];u[b].data.push(w.a,w.b,w.c)}p&&this.skinIndices.push(h[v.a],h[v.b],h[v.c]),m&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}},GF=class{constructor(t,e,n,i,r,s=0){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new q,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Lt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}};function Cot(t){return this.array.set(t),this}function gQ(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Lt),e[n++]=s.r,e[n++]=s.g,e[n++]=s.b}return this}function vQ(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Se),e[n++]=s.x,e[n++]=s.y}return this}function jA(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new q),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this}function yQ(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new sn),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this}var Pot=["a","b","c"];function Dot(t,e){switch(e){case"c":return t.c;case"b":return t.b;case"a":default:return t.a}}function dk(t,e,n){let i=Math.min(t,e),r=Math.max(t,e),s=i+"_"+r;return n.get(s)}function hk(t,e,n,i,r,s){let o=Math.min(t,e),a=Math.max(t,e),l=o+"_"+a,c;if(i.has(l))c=i.get(l);else{let d=n[o],u=n[a];c={a:d,b:u,newEdge:null,faces:[]},i.set(l,c)}c.faces.push(r),s[t].edges.push(c),s[e].edges.push(c)}function Rot(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;r++)n[r]={edges:[]};for(r=0,s=e.length;r<s;r++)o=e[r],hk(o.a,o.b,t,i,o,n),hk(o.b,o.c,t,i,o,n),hk(o.c,o.a,t,i,o,n)}function GA(t,e,n,i,r){t.push(new GF(e,n,i,void 0,void 0,r))}function Fv(t,e){return Math.abs(e-t)/2+Math.min(t,e)}function WA(t,e,n,i){t.push([e.clone(),n.clone(),i.clone()])}var Oot=class{constructor(t=1){this.subdivisions=t}modify(t){t instanceof Ut?t=new H2().fromBufferGeometry(t):t=t.clone(),t.mergeVertices();let e=this.subdivisions;for(;e-- >0;)this._smooth(t);return t.computeFaceNormals(),t.computeVertexNormals(),t}_smooth(t){let e=new q,n,i,r,s,o,a=t.vertices,l=t.faces,c=t.faceVertexUvs[0],d=c!==void 0&&c.length>0,u=[],h=new Map;Rot(a,l,u,h);let f=[],p,m,g,v,y,x,b;for(let ee of Array.from(h.keys())){for(m=h.get(ee),g=new q,y=3/8,x=1/8,b=m.faces.length,b!=2&&(y=.5,x=0,b!=1),g.addVectors(m.a,m.b).multiplyScalar(y),e.set(0,0,0),s=0;s<b;s++){for(v=m.faces[s],o=0;o<3&&(p=a[Dot(v,Pot[o])],!(p!==m.a&&p!==m.b));o++);p&&e.add(p)}e.multiplyScalar(x),g.add(e),m.newEdge=f.length,f.push(g)}let w,E,A,S,C,T,P,R=[];for(i=0,r=a.length;i<r;i++){for(T=a[i],C=u[i].edges,n=C.length,n==3?w=3/16:n>3&&(w=3/(8*n)),E=1-n*Number(w),A=w,n<=2&&(n==2?(E=3/4,A=1/8):n==1||n==0),P=T.clone().multiplyScalar(E),e.set(0,0,0),s=0;s<n;s++)S=C[s],p=S.a!==T?S.a:S.b,e.add(p);e.multiplyScalar(Number(A)),P.add(e),R.push(P)}let L=R.concat(f),O=R.length,B,$,X,H=[],U=[],N,k,z,W,K=new Se,J=new Se,F=new Se;for(i=0,r=l.length;i<r;i++)v=l[i],B=Number(dk(v.a,v.b,h).newEdge)+O,$=Number(dk(v.b,v.c,h).newEdge)+O,X=Number(dk(v.c,v.a,h).newEdge)+O,GA(H,B,$,X,v.materialIndex),GA(H,v.a,B,X,v.materialIndex),GA(H,v.b,$,B,v.materialIndex),GA(H,v.c,X,$,v.materialIndex),d&&(N=c[i],k=N[0],z=N[1],W=N[2],K.set(Fv(k.x,z.x),Fv(k.y,z.y)),J.set(Fv(z.x,W.x),Fv(z.y,W.y)),F.set(Fv(k.x,W.x),Fv(k.y,W.y)),WA(U,K,J,F),WA(U,k,K,F),WA(U,z,J,K),WA(U,W,F,J));t.vertices=L,t.faces=H,d&&(t.faceVertexUvs[0]=U)}},Ar=new q,Lot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=t.geometry??(e==null?void 0:e.geometry)??new Ut().copy(new mu(100,100,100)),i;e===void 0?(n.computeBoundingBox(),n.boundingBox.getSize(Ar),i={width:Ar.x,height:Ar.y,depth:Ar.z,subdivisions:0}):i=e.parameters;let r={...i,...t.parameters};return{parameters:{width:Math.abs(r.width),height:Math.abs(r.height),depth:Math.abs(r.depth),subdivisions:Math.abs(r.subdivisions)},geometry:n}}static build(t){let{width:e,height:n,depth:i,subdivisions:r}=t.parameters,s=t.geometry??new Ut().copy(new mu(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(Ar)):Ar.set(o.width,o.height,o.depth),(e!==Ar.x||n!==Ar.y||i!==Ar.z)&&s.scale(Ar.x===0?1:e/Ar.x,Ar.y===0?1:n/Ar.y,Ar.z===0?1:i/Ar.z);let a=s.originalGeometry;try{r>0?(a===void 0||(o==null?void 0:o.subdivisions)!==r)&&(a===void 0&&(a=s),s=new Oot(r).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals())}catch{a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()}return a!==void 0&&Object.assign(s,{originalGeometry:a}),delete t.geometry,Object.assign(s,{userData:{...t,type:"NonParametricGeometry"}})}static loadFromUrl(t,e,n){new Zce(n).load(t,i=>{let r=this.normalizeInputs({geometry:i});i.boundingBox.getSize(Ar);let s=100/Ar.x;Object.assign(r.parameters,{width:100,height:Ar.y*s,depth:Ar.z*s}),e(this.build(r))})}},jde=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters);return{shape:t.shape&&t.shape instanceof $i?t.shape:new $i,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,spikes:i,cornerRadius:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=t.parameters,l=t.shape,c=e*.5,d=n*.5,u=0,h=0,f=2*Math.PI/i;for(let m=0;m<i;m++){let g=f*m,v=u+Math.sin(g)*c,y=h+Math.cos(g)*d;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let m=0,g=l.points.length;m<g;m++)l.points[m].roundness=r;l.roundness=r,l.update();let p=Tg.create({shape:l,parameters:{roundness:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(p,{userData:{...t,type:"PolygonGeometry"}})}},Iot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,radialSegments:r,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=new Not(e*.5,n,r,s,o,a,l);return c.scale(1,1,i/e),Object.assign(c,{userData:{...t,type:"PyramidGeometry"}})}};function ab(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function fk(t,e,n,i,r,s){let o=e.clone().sub(t),a=n.clone().sub(t),l=o.angleTo(a);if(o.normalize(),a.normalize(),i===r){let c=o.add(a).normalize();s.copy(t).addScaledVector(c,i/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(t),s.addScaledVector(o,r/Math.sin(c)),s.addScaledVector(a,i/Math.sin(c))}}function kot(t,e,n){let i=t.clone().sub(e),r=n.clone().sub(e);return i.projectOnVector(r),i.add(e)}var Not=class extends Ut{constructor(t=.5,e=1,n=4,i=1,r=!1,s=0,o=4){super(),n=Math.floor(Math.max(3,n)),i=Math.floor(i),o=Math.floor(o);let a=[],l=[],c=[],d=[],u=0,h=e/2,f=Math.PI/n,p=t*Math.cos(Math.PI/n),m=2*Math.PI/n,g=(n-2)*Math.PI/n,v=Math.PI-g,y=new q(0,-h,0),x=new q(0,h,0),b=new Se(t,-h),w=new Se(p,-h),E=new Se(0,x.y).sub(w),A=new Se(0,x.y).sub(b),S=new Se(E.y,-E.x).normalize(),C=new Se(A.y,-A.x).normalize(),T=t*Math.cos(Math.PI/n)*Math.tan((Math.PI-E.angle())/2)-1e-8;s=Math.min(s,T);let P;{let X=new q(S.x,S.y,0),H=new q(Math.cos(m)*X.x,X.y,Math.sin(m)*X.x);P=X.angleTo(H)}let R=s/Math.tan((Math.PI-E.angle())/2),L=s/Math.tan((Math.PI-P)/2),O=new q;if(!r){l.push(y.x,y.y,y.z),c.push(0,-1,0),d.push(0,0);let X=u++,H=[],U=b.clone(),N=R/Math.cos(Math.PI/n);U.x-=N;for(let k=0;k<n;k++){let z=k/n*Math.PI*2+f,W=new Se(Math.sin(z),Math.cos(z));ab(U,W,O),l.push(O.x,O.y,O.z),c.push(0,-1,0),d.push(0,0),H.push(u++)}for(let k=0;k<H.length;k++)a.push(H[k],X,H[(k+1)%H.length])}{let X=new q,H=new q,U=new q,N=new q,k=new q,z=new q;for(let W=0;W<n;W++){let K=W/n*Math.PI*2+f,J=(W+.5)/n*Math.PI*2+f,F=(W+1)/n*Math.PI*2+f,ee=new Se(Math.sin(K),Math.cos(K)),ie=new Se(Math.sin(J),Math.cos(J)),te=new Se(Math.sin(F),Math.cos(F));ab(b,ee,H),ab(b,te,U),ab(S,ie,X),fk(x,H,U,L,L,N),l.push(N.x,N.y,N.z),fk(H,x,U,L,R,k),l.push(k.x,k.y,k.z),fk(U,H,x,R,L,z),l.push(z.x,z.y,z.z),c.push(X.x,X.y,X.z),c.push(X.x,X.y,X.z),c.push(X.x,X.y,X.z),d.push(0,0),d.push(0,0),d.push(0,0);let re=u++,me=u++,se=u++;if(a.push(re,me,se),s>0){{let Ae=H.clone().add(U).multiplyScalar(.5),Ie=x.clone().sub(Ae).normalize(),Le=y.clone().sub(Ae).normalize().add(Ie).normalize().multiplyScalar(-1),fe=z.clone().sub(k);B(Ae,fe,Le,E.angle())}let oe,be;{let Ae=new q;ab(C,te,Ae);let Ie=z.clone().add(N).multiplyScalar(.5);Ie=kot(Ie,U,x);let Le=z.clone().sub(N);[oe,be]=B(Ie,Le,Ae,P,N.y)}{let Ae=oe,Ie=Ae.clone().setY(0).normalize(),Le=new q(0,-1,0),fe=Ie.clone().cross(Le);$(Ae,Ie,Le,fe)}{let Ae=E.angle(),Ie=Math.PI-Ae,Le=x.clone();Le.y-=s/Math.sin(Ae-Math.PI/2);let fe=new q,ve=[];for(let ze=0;ze<o;ze++){let j=[],V=Math.PI/2-Ie*ze/o,le=Math.cos(V),xe=Math.sin(V),De=J;for(let Ne=0;Ne<=ze;Ne++){let He=Math.cos(De),Pe=Math.sin(De);X.x=le*Pe,X.y=xe,X.z=le*He,fe.copy(Le).addScaledVector(X,s),l.push(fe.x,fe.y,fe.z),c.push(X.x,X.y,X.z),d.push(0,0),j.push(u++),De+=Math.PI*2/ze/n}ve.push(j)}be.reverse(),ve.push(be);let ke=ve.length-1;for(let ze=0;ze<ke;ze++){let j=ve[ze],V=ve[ze+1],le=j.length-1;a.push(V[1],j[0],V[0]);for(let xe=1;xe<=le;xe++)a.push(j[xe],j[xe-1],V[xe]),a.push(V[xe+1],j[xe],V[xe])}}}}}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(c,3)),this.setAttribute("uv",new xt(d,2));function B(X,H,U,N,k){let z=-N/2,W=(Math.PI-N)/2,K=H.clone().normalize().cross(U);X.addScaledVector(U,-s/Math.sin(W));let J=new q,F=new q,ee=1,ie=u,te=[];for(let re=0;re<=o;re++){let me=z+re/o*N;F.set(0,0,0),F.addScaledVector(K,Math.sin(me)),F.addScaledVector(U,Math.cos(me));for(let se=0;se<=ee;se++){let oe=se/ee-.5;if(J.copy(X),J.addScaledVector(H,oe),J.addScaledVector(F,s),k!=null){let be=Math.max(0,J.y-k);J.addScaledVector(H,-be/H.y)}l.push(J.x,J.y,J.z),c.push(F.x,F.y,F.z),d.push(0,0),se===0&&te.push(u),u++}}for(let re=0;re<o;re++)for(let me=0;me<ee;me++){let se=ie+me+(ee+1)*re,oe=se+(ee+1),be=oe+1,Ae=se+1;a.push(se,oe,Ae),a.push(oe,be,Ae)}return[X.clone().addScaledVector(H,.5),te]}function $(X,H,U,N){let k=Math.PI/2,z=A.angle()-k,W=[],K=new q,J=new q;for(let ee=0;ee<=o;ee++){let ie=[],te=ee/o;for(let re=0;re<=ee;re++){let me=((ee?re/ee:0)-.5)*v,se=Math.cos(me),oe=Math.sin(me),be=Math.atan(Math.tan(z)*se),Ae=(k+be)*te,Ie=Math.cos(Ae),Le=Math.sin(Ae);K.set(0,0,0),K.addScaledVector(H,Le*se),K.addScaledVector(U,Ie),K.addScaledVector(N,Le*oe),J.copy(X).addScaledVector(K,s),l.push(J.x,J.y,J.z),c.push(K.x,K.y,K.z),d.push(0,0),ie.push(u++)}W.push(ie)}let F=W.length-1;for(let ee=0;ee<F;ee++){let ie=W[ee],te=W[ee+1],re=ie.length-1;a.push(ie[0],te[1],te[0]);for(let me=1;me<=re;me++)a.push(ie[me-1],ie[me],te[me]),a.push(ie[me],te[me+1],te[me])}}}},Gde=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters),i=Object.assign((e==null?void 0:e.ui)??{enabledIndieCorners:!1},t.ui);return{shape:t.shape&&t.shape instanceof $i?t.shape:new $i,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)}),ui:i}}static build(t){let e=t.shape,{width:n,height:i,cornerRadius:r,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c={x:n*.5,y:i*.5},d={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function h(b,w,E){return w>n&&E>i?Math.min(b*n/w,b*i/E):w>n?b*n/w:E>i?b*i/E:b}let f=[];f[0]=r[0]===0?0:h(r[0],r[0]+r[3],r[0]+r[1]),f[1]=r[1]===0?0:h(r[1],r[1]+r[2],r[1]+r[0]),f[2]=r[2]===0?0:h(r[2],r[2]+r[1],r[2]+r[3]),f[3]=r[3]===0?0:h(r[3],r[3]+r[0],r[3]+r[2]);let p=d.x,m=u.x,g=u.y,v=d.y;e.addPoint(e.createPoint(p,g)),e.addPoint(e.createPoint(m,g)),e.addPoint(e.createPoint(m,v)),e.addPoint(e.createPoint(p,v)),e.isClosed=!0;let y=!0;for(let b=0,w=e.points.length;b<w;b++)e.points[b].roundness=f[b],b>0&&f[b]!==f[b-1]&&(y=!1);y&&(e.roundness=f[0]),e.useCubicForRoundedCorners=s!==1,e.update();let x=Tg.create({shape:e,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...t,type:"RectangleGeometry"}})}},Bot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e=100,height:n=e,depth:i=e,widthSegments:r=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=t.parameters,d=new rH(.5*e,r,s,o,a,l,c);return d.scale(1,n/e,i/e),Object.assign(d,{userData:{...t,type:"SphereGeometry"}})}},zot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:0})}}static build(t){let{width:e=100,height:n=e,widthSegments:i=8,heightSegments:r=8}=t.parameters,s=new lR(e,n,i,r);return s.scale(1,1,1),Object.assign(s,{userData:{...t,type:"PlaneGeometry"}})}},Fot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,angle:r,cornerRadius:s,cornerSegments:o}=t.parameters,a=new Uot(e,n,i,r,s,o);return Object.assign(a,{userData:{...t,type:"BackdropGeometry"}})}},Uot=class extends Ut{constructor(t=1,e=1,n=1,i=90,r=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;r==0&&(s=1),s=Math.max(1,Math.floor(s)),r=Math.min(r,100),i=Math.min(180-c,i),i*=Math.PI/180;let d=[],u=Math.PI/2,h=(ee=0,ie=0,te=0)=>new q(ee,ie,te),f=h(),p=h(),[m,g,v]=[e/2,t/2,n/2],y=-g,x=+g,[b,w,E]=[h(y,-m,+v),h(y,-m,-v),h(y,+m,-v)],A=(ee,ie=!1)=>Math.sin(ee-Math.PI/(1+ +ie)),S=(ee,ie=!1)=>Math.cos(ee-Math.PI/(1+ +ie));E.y=Math.sin(i)*e-m;let C=Math.cos(i)*e-v,T=b.z-c;i<=u?(E.z=Math.min(C,T),E.z==T&&(E.y-=(C-T)/Math.tan(u-i))):w.z=Math.min(w.z-C-v,b.z-c),f.subVectors(b,w),p.subVectors(E,w);let P=Math.min(f.length(),p.length())*r/100,R=P*Math.tan(i/2),L=P/Math.cos(i/2),O=f.clone().normalize().add(p.normalize()).setLength(L).add(w);f.set(0,A(i,!0),S(i,!0)),d.push([E,f.clone()]);let B=(Math.PI-i)/s;for(let ee=0;ee<=s;ee++){let ie=u+i+ee*B;f.set(0,Math.sin(ie)*R,Math.cos(ie)*R),f.add(O),p.set(0,A(ie),S(ie)),d.push([f.clone(),p.clone()])}d.push([b,h(0,1,0)]);let $=Math.sin(B/2)*R*2,X=d.length-1,H=d[0][0].distanceTo(d[1][0]),U=d[X-1][0].distanceTo(d[X][0]),N=H+$*s+U;d[0].push(1);for(let ee=0;ee<=s;ee++)d[ee+1].push(1-(H+ee*$)/N);d[X].push(0);let[k,z,W]=d[0],K,J,F;for(let ee=1;ee<d.length;ee++)[K,J,F]=d[ee],o.push(y,k.y,k.z,y,K.y,K.z,x,k.y,k.z,x,k.y,k.z,y,K.y,K.z,x,K.y,K.z),a.push(0,z.y,z.z,0,J.y,J.z,0,z.y,z.z,0,z.y,z.z,0,J.y,J.z,0,J.y,J.z),l.push(0,W,0,F,1,W,1,W,0,F,1,F),[k,z,W]=[K,J,F];this.setAttribute("position",new xt(o,3)),this.setAttribute("normal",new xt(a,3)),this.setAttribute("uv",new xt(l,2))}},Wde=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof $i?t.shape:new $i,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,innerRadiusPercent:i,spikes:r,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=t.parameters,d=t.shape,u=e*.5,h=n*.5,f=0,p=0,m=o*Math.PI/360/r,g=Math.PI/2*3*-1,v=u*i/100,y=h*i/100;if(r===3&&i===50){m=2*Math.PI/r;for(let b=0;b<r;b++){let w=m*b,E=f+Math.sin(w)*u,A=p+Math.cos(w)*h;d.addPoint(d.createPoint(E,A))}}else for(let b=0;b<r;b++){let w=f+Math.cos(g)*u,E=p+Math.sin(g)*h;d.addPoint(d.createPoint(w,E)),g+=m,w=f+Math.cos(g)*v,E=p+Math.sin(g)*y,d.addPoint(d.createPoint(w,E)),g+=m}d.isClosed=!0;for(let b=0,w=d.points.length;b<w;b++)d.points[b].roundness=s;d.roundness=s,d.update();let x=Tg.create({shape:d,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(x,{userData:{...t,type:"StarGeometry"}})}},Vot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n}=t.parameters,i=new lR(e,n);return Object.assign(i,{userData:{...t,type:"TextFrameGeometry"}})}},Hot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.round(Math.abs(n.depth??n.width*.25));return{parameters:Object.assign(n,{width:i,height:r,depth:s})}}static build(t){let{width:e,height:n,depth:i,radialSegments:r,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=jot(e,n,i,e*.5,o,s,0,0,r,a,l);return c.scale(1,n/e,1),Object.assign(c,{userData:{...t,type:"TorusGeometry"}})}};function jot(t,e,n,i,r,s,o,a,l,c,d){return[e,n]=[n,e],o=e/2,r/=2*Math.PI,r==1&&(c=0),new Vde(!0,t,e,n,i,r,s,o,a,l,c,d)}var Got=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),tube:n.tube??n.width*.125})}}static build(t){let{width:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o}=t.parameters,a=e*.5;a!==n&&(a-=n);let l=new Yce(a,n,i,r,s,o);return Object.assign(l,{userData:{...t,type:"TorusKnotGeometry"}})}},Wot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},t.parameters);return{shape:t.shape&&t.shape instanceof $i?t.shape:new $i,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width*(n.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e=100,height:n,cornerRadius:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=t.parameters,l=t.shape,c=e*.5,d=n*.5;a?(l.addPoint(l.createPoint(-c,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=i;l.roundness=i,l.update();let u=Tg.create({shape:l,parameters:{roundness:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...t,type:"TriangleGeometry"}})}};function qot(t,e){let n=2*Math.PI;return(t%n+n)%n===(e%n+n)%n}function $ot(t,e,n){let i=[new q,new q,new q],r=[new q,new q,new q];return t.extractBasis(i[0],i[1],i[2]),e.extractBasis(r[0],r[1],r[2]),i.forEach((s,o)=>{let a=r[o],l=pn.lerp(s.length(),a.length(),n);s.lerp(a,n).setLength(l)}),new tt().makeBasis(i[0],i[1],i[2])}var Xot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.abs(n.depth??0),o=(e==null?void 0:e.shapeData)??jH.create({parameters:mde}).userData.shape;return{path:t.path??R2.defaultData(),parameters:Object.assign(n,{width:i,height:r,depth:s,extrusion:{...gde,...n.extrusion}}),shapeData:o}}static build(t){if(t.path.points.length>=2){let e=new Yot(t);return Object.assign(e,{userData:{...t,type:"PathGeometry"}})}else return Object.assign(new Ut,{userData:{...t,type:"PathGeometry"}})}},Yot=class extends Ut{constructor(t){super(),this.type="PathExtrusionGeometry",this.inputs=t,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let t=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&t.depth===1)||!qot(t.twist,0)||t.startScale!==t.endScale}build(){let t=this._extractPathPoints();if(t.length<2)return;let e=this._computeBasisMatrices(t),{depth:n,offset:i}=this.inputs.parameters.extrusion,r=this.inputs.path.isClosed?t.length:t.length-1,s=Math.floor(i*r),o=this.inputs.path.isClosed?Math.ceil((n+i)*r):Math.ceil(Math.min(1,n+i)*r),a=Math.min(Math.max(2,o-s+1),r+2),l=[],c=[];for(let T=0;T<a;T++){let P=this.inputs.path.isClosed?(T+s)%t.length:Math.min(T+s,t.length-1);l.push(t[P].clone()),c.push(e[P].clone())}let d=(T,P,R)=>{l[T]=l[T].clone().lerp(l[P],R),c[T]=$ot(c[T],c[P],R)},u=0,h=i*r%1;(!this.inputs.path.isClosed||n<=1)&&(h||i===0)&&(u=h,d(0,1,u));let f=0,p=(i+n)*r%1;if((this.inputs.path.isClosed&&n<=1||!this.inputs.path.isClosed&&i+n<1)&&p&&(f=p,d(l.length-1,l.length-2,1-f)),n===0){let T=l.length-1;l[T].copy(l[0]),c[T].copy(c[0])}this._applyPathModifiers(c,u,f);let{regions:m,infos:g,vertices:v}=this._computeShapePoints(5),y=0,x=0;g.sort((T,P)=>T.start-P.start),g.forEach(T=>{T.verticesStart=y,T.verticesCount=T.continuous.reduce((P,R,L)=>P+(L===0||!R?2:1),0),x+=T.verticesCount,y=x});let b=x*a,w,E=0;if(this._isOpenEnded()){try{w=cf({windingRule:Hn.ODD,elementType:yr.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:m})}catch{w=Lde}E=w.vertexCount}let A=b+2*E,S={positions:new Float32Array(A*3),normals:new Float32Array(A*3),uvs:new Float32Array(A*2)},C=[];g.forEach(T=>{this._extrudeRegion(T,v,c,l,S,C,this._isGeometryClosed()&&!this._isOpenEnded())}),w&&(this._closeEnd(w,b,C,S,c[0],l[0],!1),this._closeEnd(w,b+E,C,S,c[c.length-1],l[l.length-1],!0)),this.setAttribute("position",new Wt(S.positions,3)),this.setAttribute("normal",new Wt(S.normals,3)),this.setAttribute("uv",new Wt(S.uvs,2)),this.setIndex(C)}_extractPathPoints(){let t=Sde(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(t.length<2)return[];let e=[t[0]];return t.forEach(n=>{e[e.length-1].distanceToSquared(n)>.001&&e.push(n)}),this.inputs.path.isClosed&&e[e.length-1].distanceTo(e[0])<.001&&e.pop(),e}_computeBasisMatrices(t){let e=[],n=t.length,i=this.inputs.path.isClosed,r=new q,s=new q,o=new q,a=new q,l=new q(0,1,0);for(let p=0;p<n;p++){let m=t[p],g;p===0?g=i?t[t.length-2]:m.clone().multiplyScalar(2).sub(t[1]):g=t[p-1];let v;p===n-1?v=i?t[1]:m.clone().multiplyScalar(2).sub(t[p-1]):v=t[p+1];let y=m.clone().sub(g).normalize(),x=v.clone().sub(m).normalize(),b=y.clone().add(x).normalize();o.copy(b),p===0&&(b.equals(l)||b.clone().negate().equals(l))&&l.set(0,0,1);let w=l.clone().cross(b).normalize(),E=b.clone().cross(w).normalize();l.copy(E),a.copy(w),p===0&&(r.copy(E),s.copy(b));let A=new tt().makeBasis(w,E,b);e.push(A)}let c=i?s:o,d=i?r:new q(0,1,0),u=c.clone().cross(a).normalize(),h=Math.acos(d.dot(u));if(isNaN(h))return e;let f=d.clone().cross(u);c.dot(f)>0&&(h*=-1);for(let p=1;p<e.length;p++){let m=new tt().makeRotationZ(h*p/e.length);e[p].multiply(m)}return e}_applyPathModifiers(t,e,n){let i=t.length,{angle:r,twist:s,startScale:o,endScale:a}=this.inputs.parameters.extrusion,l=new tt,c=new tt;return t.forEach((d,u)=>{let h=u===0?0:u===i-1?1:(u-e)/(i-(n===0?0:1)-(e+(1-n)));l.makeRotationZ(pn.lerp(r,r+s,h));let f=pn.lerp(o,a,h);c.makeScale(f,f,f),d.multiply(l).multiply(c)}),t}_computeShapePoints(t=12,e=Hn.ODD){let n=this.inputs.shapeData,i=n.extractShapePointsToFlatArray([],t),r=n.shapeHoles.map(c=>{let d=c.extractShapePointsToFlatArray([],t),u=[];for(let h=d.length-1;h>=1;h-=2){let f=d[h-1],p=d[h-0];u.push(f,p)}return u}),s;try{s=cf({windingRule:e,elementType:yr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{s=HH}let o;try{o=cf({windingRule:Hn.ODD,elementType:yr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...r]})}catch{o=Ode}if(!s)throw new Error("error generating geometry");let a=s.elementCount;if(o){s.elementCount+=o.elementCount;for(let c=0;c<o.elements.length;c++){let d=o.elements[c],u=c%2===0?s.vertexCount:0;s.elements.push(d+u)}for(let c=0;c<o.vertexIndices.length;c++){let d=o.vertexIndices[c],u=s.vertexCount;s.vertexIndices.push(d+u)}for(let c=0;c<o.vertices.length;c++){let d=o.vertices[c];s.vertices.push(d)}}for(let c=0,d=s.vertexCount;c<d;c++){let u=c*2;s.vertices[u+0],s.vertices[u+1]}let l=[];for(let c=s.elementCount-1;c>=0;c--){let d=c>=a,u=c*2,h=s.elements[u+0],f=s.elements[u+1],p=h+f,m={start:h,count:f,normals:[],isHole:d,continuous:[],verticesStart:0,verticesCount:0};l.push(m);let g=h,v=p-1,y=h+1,x=n.roundedCurves.length;do{let b=g-h;s.vertices[v*2+0],s.vertices[v*2+1];let w=s.vertices[g*2+0],E=s.vertices[g*2+1],A=s.vertices[y*2+0],S=s.vertices[y*2+1],C=w-A,T=E-S,P=Math.sqrt(C*C+T*T);C/=P,T/=P,m.normals[b*2+0]=-T,m.normals[b*2+1]=C;let R=s.vertexIndices[g];if(Array.isArray(R))m.continuous[b]=!1;else{let[L,O]=n.getCurveIndexFromVertexId(R-1,!0);if(O>0&&O<1)m.continuous[b]=!0;else{let B=O===1?L+1:L-1;B=(B+x)%x;let $=O===1?0:1,X=n.roundedCurves[L].getTangent(O),H=n.roundedCurves[B].getTangent($);m.continuous[b]=X.dot(H)>.95}}d&&(m.normals[b*2+0]*=-1,m.normals[b*2+1]*=-1),[v,g,y]=[g,y,y+1],y>=p&&(y-=f)}while(y!==h+1)}return{regions:[i,...r],infos:l,vertices:s.vertices}}_insertVertex(t,e,n,i,r){let s=e*2,o=e*3;t.positions[o+0]=n.x,t.positions[o+1]=n.y,t.positions[o+2]=n.z,t.normals[o+0]=i.x,t.normals[o+1]=i.y,t.normals[o+2]=i.z,t.uvs[s+0]=r.x,t.uvs[s+1]=r.y}_extrudeRegion(t,e,n,i,r,s,o){let a=new q,l=new q,c=new q,d=new q,u=new Se;n.forEach((f,p)=>{let m=i[p],g=t.verticesStart*n.length+t.verticesCount*p;for(let v=0;v<t.count;v++){let y=(t.start+v)*2;if(a.set(e[y+0],e[y+1],0),c.copy(a).applyMatrix4(f).add(m),t.continuous[v])d.set(t.normals[v*2+0],t.normals[v*2+1],0);else{let x=v==0?(t.start+t.count-1)*2:y-2;l.set(e[x+0],e[x+1],0),d.copy(a).sub(l),d.set(-d.y,d.x,0),t.isHole||d.negate()}if(d.applyMatrix4(f).normalize(),u.set(v===0?1:v/t.count,p/(n.length-1)),this._insertVertex(r,g,c,d,u),g++,!t.continuous[v]||v===0){if(v===0)d.set(t.normals[v*2+0],t.normals[v*2+1],0),u.set(0,p/(n.length-1));else{let x=v===t.count-1?t.start*2:y+2;l.set(e[x+0],e[x+1],0),d.copy(l).sub(a),d.set(-d.y,d.x,0),t.isHole||d.negate()}d.applyMatrix4(f).normalize(),this._insertVertex(r,g,c,d,u),g++}}});let h=n.length-1;for(let f=0;f<h;f++){let p=t.verticesStart*n.length+t.verticesCount*f,m=t.verticesStart*n.length+t.verticesCount*(f+1),g=0;for(let v=0;v<t.count;v++){(!t.continuous[v]||v===0)&&g++;let y=v===t.count-1?0:g+1,x=p+g,b=p+y,w=m+y,E=m+g;t.isHole?s.push(x,w,b,x,E,w):s.push(x,b,w,x,w,E),g++}}}_closeEnd(t,e,n,i,r,s,o){let a=t.vertexCount,l=new q(0,0,o?-1:1).applyMatrix4(r),c=new q,d=new Se;for(let h=0;h<a;h++){let f=2*h;c.set(t.vertices[f+0],t.vertices[f+1],0).applyMatrix4(r).add(s),this._insertVertex(i,e+h,c,l,d)}let u=t.elements;for(let h=0;h<t.elementCount;h++){let f=3*h,p=u[f+0]+e,m=u[f+(o?1:2)]+e,g=u[f+(o?2:1)]+e;n.push(p,m,g)}}};function qde(){let t=new Ut;return t.setAttribute("position",new Wt(new Float32Array([]),3)),t.setIndex(new Wt(new Uint16Array([]),1)),t}var Kot=qde().attributes,Zot=12,Qot=1,$de=class extends Ut{constructor(t,e){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,Kot),this.userData={parameters:t,type:"TextGeometry"};let n=e.getFont(t.font);n!=null&&n.isLoaded?(this.font=n,this.update(t)):this.updateFont(t.font,e).then(()=>{this.update(t),e==null||e.requestRender()})}async updateFont(t,e){let n=e.getFont(t);n&&(this.font=n,await n.loadingPromise)}update(t){let e=this.font;if(this.userData={parameters:t,type:"TextGeometry"},!(e!=null&&e.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:n,height:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,text:a,textTransform:l}=t,c=l===2?a.toUpperCase():l===3?a.toLowerCase():a,d=Jot(t,e,c),{shapes:u,charWidths:h,charCoords:f}=e.generateShapes(d,t),p=n*.5,m=i*.5,g=u.map(x=>new $i().fromShape(x));this.vectorShapes=g;let v=g.map(x=>Tg.create({shape:x,parameters:{depth:r,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:r<=0?Hn.NONZERO:Hn.ODD,subdivisions:this.isLowResolution&&r>0?Qot:Zot}})),y=v.length?_m(v):qde();y.translate(-p,m,0),this.dispose(),this.wrappedText=d,this.charCoords=f,this.charWidths=h,this.deleteAttribute("extrudeNormal"),Object.entries(y.attributes).forEach(([x,b])=>{this.setAttribute(x,b)}),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let t=ag(new Ut,$de.prototype);return t.copy(this),console.log("CloneGeometry",this,t),t}copy(t){return Object.entries(t.attributes).forEach(([e,n])=>{this.setAttribute(e,n)}),this.setIndex(t.index),this.userData={parameters:{...t.userData.parameters},type:"TextGeometry"},this}async setText(t){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:t})}get text(){return this.userData.parameters.text??""}};function Jot(t,e,n){n=n??t.text;let i=[""],r="";for(let s of n)r+=s,s===" "||s===`
`?(i[i.length-1]+=r,r="",s===`
`&&i.push("")):e.getTextWidth(i[i.length-1]+r,t)>t.width&&(i[i.length-1].length&&i.push(""),e.getTextWidth(i[i.length-1]+r,t)>t.width&&(r.length===1?(i[i.length-1]+=r,r=""):(i[i.length-1]+=r.slice(0,-1),r=r[r.length-1],i.push(""))));return i[i.length-1]+=r,i}var Xde,GH=new Promise(t=>{Xde=t}),xQ=!1;async function eat(){if(xQ)return;let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.373/build",[e,n]=await Promise.all([TS(()=>import("./process-92a1d41a.js"),[]),fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});Xde(r),xQ=!0}function j2(t,e,n){let i={parameters:t,type:t.type};if(t.type==="PathGeometry")i.path=t.path;else if(t.type==="VectorGeometry"){let s=$i.createFromState(t.shape,t.width,t.height);i.shape=s}else if(t.type==="NonParametricGeometry")t.data.groups&&t.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),i.geometry=new Zce().parse(t);else{if(t.type==="SubdivGeometry")return new to(t,n);if(t.type==="TextGeometry")return new $de(t,e)}let r;try{r=MQ(i)}catch(s){console.error(s)}if(!r){let s=$i.createFromState(D2.defaultData(),100,100);i.shape=s,r=MQ(i)}return r}var tat=new tt;function WF(t,e,n,i){let r=t.position.array,s=t.normal.array,o=tat.makeScale(e,n,i).invert().elements,a,l,c;for(var d=0,u=r.length;d<u;d+=3)r[d]*=e,r[d+1]*=n,r[d+2]*=i,a=s[d],l=s[d+1],c=s[d+2],s[d]=o[0]*a+o[4]*l+o[8]*c,s[d+1]=o[1]*a+o[5]*l+o[9]*c,s[d+2]=o[2]*a+o[6]*l+o[10]*c;t.position.needsUpdate=!0,t.normal.needsUpdate=!0}var qA=new _r,Uv=new q,Rt;GH.then(t=>{Rt=t});var bQ=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),wQ=new Uint32Array([0,1,2,3]),_Q=new Uint8Array([4]),to=class extends Ut{constructor(t,e){super(),this.data=t,this.flatShading=e,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(t,e){this.freeSubdivPointer();let n=this.data.scaleBaked,i=Um.div(e,n);this.subdividedGeometry&&WF(this.subdividedGeometry.attributes,...i),this.originalGeometry&&WF(this.originalGeometry.attributes,...i),this.data=t;let r=this.userData.parameters;this.userData.parameters={width:r.width*i[0],height:r.height*i[1],depth:r.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(Uv.fromArray(i));let s=Uv.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let t,e,n;try{({originalGeometry:t,subdividedGeometry:e,subdivPointer:n}=to.build(this.data,void 0,!this.flatShading,void 0))}catch{t=new mu(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=t,this.subdividedGeometry=e??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(to.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new gl,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let e=t.attributes.position,n=t.boundingSphere.center;qA.setFromBufferAttribute(e),qA.getCenter(n),t.boundingSphere.radius=n.distanceTo(qA.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),qA.getSize(Uv);let i={width:Uv.x,height:Uv.y,depth:Uv.z};return this.userData.parameters=i,i}static build(t,e,n,i){let r,s,o,a=(t==null?void 0:t.phongAngle)??35;n===!1&&(a=-1),e&&(Rt.free_bvh(e),Rt.free_subdivision_surface(e));try{r=to.allocate(t,i)}catch(l){console.error(l,t),r=to.allocate({positionWASM:bQ,indexWASM:wQ,verticesPerFaceWASM:_Q},i)}if(Rt.set_destination_refinement_level(r,0),s=to.buildLevel(r,!0,a),t.subdivisions>0)try{Rt.set_destination_refinement_level(r,t.subdivisions),o=to.buildLevel(r,!1,a)}catch{try{Rt.set_destination_refinement_level(r,t.subdivisions-1),o=to.buildLevel(r,!1,a)}catch{o=null}}else o=null;return{subdivPointer:r,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(t,e,n){t.widthSegments>16&&(t.widthSegments=16),t.heightSegments>16&&(t.heightSegments=16),t.depthSegments>16&&(t.depthSegments=16),t.radialSegments>16&&(t.radialSegments=16),t.type==="DodecahedronGeometry"&&(t.detail=0);let i=t.shape!==void 0?e.geometry:j2(t,n,!1),r;t.type==="TorusGeometry"&&t.arc===Math.PI*2?r=i.getClosedTorusIndicesForBooleanOrSubdiv():r=i.getIndex();let s,o,a,l;({positions:s,triIndices:l}=AR(i.getAttribute("position"),r));let c;if(t.type==="CylinderGeometry"&&t.cornerRadius===0&&t.hollow===0&&t.openEnded===!1){let d=t.radialSegments*t.heightSegments*3*2,u=d+t.radialSegments*3;c=[d,u]}return{indices:o,verticesPerFace:a}=Yde(s,l,i,c),{positions:s,indices:o,verticesPerFace:a}}static allocate(t,e){var x;let n,i,r,s=[],o=[];t.positionWASM&&t.positionWASM.length>0?(n=t.positionWASM,i=t.indexWASM,r=t.verticesPerFaceWASM):(n=bQ,i=wQ,r=_Q);let a=n.length,l=i.length,c=r.length,d=n.length+s.length+o.length,u=i.length+r.length,h=d*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=d*Float32Array.BYTES_PER_ELEMENT,p=Rt._malloc(h),m=new Float32Array(Rt.HEAPF32.buffer,p,d),g=new Uint32Array(Rt.HEAPU32.buffer,p+f,u);m.set(n,0),m.set(s,n.length),m.set(o,n.length+s.length),g.set(i,0),g.set(r,i.length);let v;(x=t==null?void 0:t.scaleBaked)!=null&&x.some(b=>b!==1)&&(v=new tt().makeScale(...t.scaleBaked)),e&&(v?v.premultiply(e):v=e);let y=v?Rt.alloc_subdivision_surface2(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c,v.elements):Rt.alloc_subdivision_surface(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return Rt._free(p),y}static buildLevel(t,e,n,i,r){let s=r?Rt.get_mesh_data2(t,e?Rt.Level.CONTROL:Rt.Level.REFINED,n,r.elements):Rt.get_mesh_data(t,e?Rt.Level.CONTROL:Rt.Level.REFINED,n),o=8,a=Rt.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,d=Rt.HEAPU32[a[c]>>2],u=Rt.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let h=Rt.HEAPU32[a[c]>>2],f=Rt.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let p=Rt.HEAPU32[a[c]>>2],m=Rt.HEAPU32.subarray(p>>2,(p>>2)+l[c]);c++;let g=Rt.HEAPU32[a[c]>>2],v=Rt.HEAPU32.subarray(g>>2,(g>>2)+l[c]);if(c++,i===void 0){let y=new Ut;if(y.setIndex(new K0(v,1)),y.setAttribute("position",new xt(u,3)),y.setAttribute("normal",new xt(f,3)),e){y.setAttribute("faceMap",new K0(m,1));let x=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new Wt(x,4))}return Rt.free_mesh_data(s),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(u),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,Rt.free_mesh_data(s)}static freeSubdivPointer(t){Rt.free_bvh(t),Rt.free_subdivision_surface(t)}static buildControlCageWireframe(t,e,n){let i=Rt.get_wireframe_data_for_base_level(t),r=4,s=Rt.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(2,2+2),a=0,l=Rt.HEAPU32[s[a]>>2],c=Rt.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let d=Rt.HEAPU32[s[a]>>2],u=Rt.HEAPU32.subarray(d>>2,(d>>2)+o[a]);if(e===void 0){let h=new Ut;h.setAttribute("position",new xt(c,3));let f=new Float32Array(c.length);for(let p=0,m=c.length;p<m;)f[p++]=n.r,f[p++]=n.g,f[p++]=n.b;return h.setAttribute("color",new Wt(f,3)),h.setIndex(new K0(u,1)),Rt.free_wireframe_data_for_base_level(i),h}e.getAttribute("position").copyArray(c),e.attributes.position.needsUpdate=!0,Rt.free_wireframe_data_for_base_level(i)}static updateCollabMesh(t,e,n){let i=e===0;i||Rt.set_destination_refinement_level(t,e);let r=n?Rt.get_topological_data2(t,i?Rt.Level.CONTROL:Rt.Level.REFINED,n.elements):Rt.get_topological_data(t,i?Rt.Level.CONTROL:Rt.Level.REFINED),s=6,o=Rt.HEAPU32.subarray(r>>2,(r>>2)+s),a=o.subarray(3,3+3),l=0,c=Rt.HEAPU32[o[l]>>2],d=new Float32Array(Rt.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=Rt.HEAPU32[o[l]>>2],h=new Uint32Array(Rt.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let f=Rt.HEAPU32[o[l]>>2],p=new Uint8Array(Rt.HEAPU32.subarray(f>>2,(f>>2)+a[l]));return Rt.free_topological_data(r),{positions:d,indices:h,verticesPerFace:p}}},SQ=["getX","getY","getZ"];function AR(t,e){let n={},i=e?e.count:t.count,r=0,s=[],o=[],a=1e4;for(let c=0;c<i;c++){let d=e?e.getX(c):c,u="";for(let h=0;h<3;h++)u+=`${~~(t[SQ[h]](d)*a)},`;if(u in n)s.push(n[u]);else{for(let h=0;h<3;h++)o.push(t[SQ[h]](d));n[u]=r,s.push(r),r++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var $A=new q,pk=new q,mk=new q,gk=new q;function Yde(t,e,n,i){let r=[],s=[];if(n.userData.shape!==void 0&&n.userData.parameters.depth===0&&n.userData.shape.shapeHoles.length===0){let o=n.userData.shape.extractShapePointsToFlatArray([]),a=n.userData.parameters.spikes;if(n.userData.type==="EllipseGeometry"&&a<=24&&a%4===0&&n.userData.parameters.angle>=360){let d=o.length/2/a;o=o.filter((u,h)=>Math.floor(h/2)%d===0)}let l=0;for(let d=0;d<o.length;d+=2)l+=(o[d]-o[(d===0?o.length:d)-2])*(o[d+1]+o[(d===0?o.length:d)-1]);t.length=0;let c=0;if(l<0)for(let d=0;d<o.length;d+=2)t.push(o[d],o[d+1],0),r.push(c++);else for(let d=o.length-2;d>=0;d-=2)t.push(o[d],o[d+1],0),r.push(c++);return s.push(c),{indices:r,verticesPerFace:s}}for(let o=0,a=n.capStartIndex??e.length;o<a;)if(e[o+1]===e[o+3]&&e[o+2]===e[o+5]||e[o+0]===e[o+3]&&e[o+2]===e[o+4]){$A.set(t[e[o]*3],t[e[o]*3+1],t[e[o]*3+2]),pk.set(t[e[o+1]*3],t[e[o+1]*3+1],t[e[o+1]*3+2]),mk.set(t[e[o+4]*3],t[e[o+4]*3+1],t[e[o+4]*3+2]),gk.set(t[e[o+5]*3],t[e[o+5]*3+1],t[e[o+5]*3+2]),pk.sub($A).normalize(),mk.sub($A).normalize(),gk.sub($A).normalize();let l=pk.cross(mk).dot(gk);Math.abs(l)>.005||i&&i.some((c,d)=>d%2===1?!1:o>=i[d]&&o<i[d+1])?(r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3):(r.push(e[o],e[o+1],e[o+4],e[o+5]),s.push(4),o+=6)}else r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3;if(n.capStartIndex!==void 0){let o=[],a=[],l=0,c=new Float32Array([n.userData.parameters.depth])[0];for(let d=0,u=0;d<t.length;d+=3,u++)t[d+2]===0&&(o.push(u),l++),t[d+2]===c&&a.push(u);if(n.userData.parameters.extrudeBevelSize===0){let d=a[0];a[0]=a[1],a[1]=d}o.reverse(),r.push(...o,...a),s.push(l,l)}return{indices:r,verticesPerFace:s}}var jh={};vWe(jh,{calcBoolean:()=>oat,calcBooleanTopological:()=>sat,freeMeshSet:()=>cat,getMeshSet:()=>aat,transformMeshSet:()=>lat});var Kde,nat=new Promise(t=>{Kde=t}),EQ=!1;async function iat(){if(EQ)return;let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.373/build",[e,n]=await Promise.all([TS(()=>import("./boolean-9d58d081.js"),[]),fetch(`${t}/boolean.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});Kde(r),EQ=!0}var yn,ry;nat.then(t=>yn=t);function rat(t,e,n){let i,r;t.userData.parameters.type==="TorusGeometry"&&t.userData.parameters.arc===Math.PI*2?r=t.getClosedTorusIndicesForBooleanOrSubdiv():r=t.getIndex();let{positions:s,triIndices:o}=AR(t.getAttribute("position"),r),a;if(e&&n){let{indices:l,verticesPerFace:c}=Yde(s,o,t);a=c.length,i=[];for(let d=0,u=0;d<a;d++){i.push(c[d]);for(let h=0;h<c[d];h++)i.push(l[u++])}}else{let l=o.length;i=Array(l+l/3),a=0;for(let c=0,d=0;d<i.length;)i[d++]=3,a++,i[d++]=o[c++],i[d++]=o[c++],i[d++]=o[c++]}return{positions:s,faceIndices:i,nFaces:a}}function Zde(t){let e=t.length,n=e*Uint32Array.BYTES_PER_ELEMENT,i=e*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(t[0])?n:i,s=yn._malloc(r);return(Number.isInteger(t[0])?new Uint32Array(yn.HEAPU32.buffer,s,e):new Float32Array(yn.HEAPF32.buffer,s,e)).set(t,0),s}function Qde(t){switch(t){case 0:return yn.OP.UNION;case 1:return yn.OP.INTERSECTION;case 2:return yn.OP.A_MINUS_B;case 3:return yn.OP.B_MINUS_A;case 4:return yn.OP.SYMMETRIC_DIFFERENCE;case 5:return yn.OP.ALL;default:throw new Error("Unknown boolean operation "+t)}}function sat(t,e){ry===void 0&&(ry=yn.init_csg());let n=Zde(t),i=yn.csg_calc_topological(ry,n,t.length,Qde(e));yn._free(n);let r=6,s=yn.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(3,3+3),a=0,l=yn.HEAPU32[s[a]>>2],c=new Float32Array(yn.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let d=yn.HEAPU32[s[a]>>2],u=new Uint32Array(yn.HEAPU32.subarray(d>>2,(d>>2)+o[a]));a++;let h=yn.HEAPU32[s[a]>>2],f=new Uint8Array(yn.HEAPU32.subarray(h>>2,(h>>2)+o[a]));return yn.free_mesh_data(i),{positions:c,indices:u,verticesPerFace:f}}function oat(t,e,n,i){ry===void 0&&(ry=yn.init_csg());let r=Zde(t),s=yn.csg_calc(ry,r,t.length,i,Qde(e));yn._free(r);let o=5,a=yn.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,d=yn.HEAPU32[a[c]>>2],u=yn.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let h=yn.HEAPU32[a[c]>>2],f=yn.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let p=l[c];n.setAttribute("position",new xt(u,3)),n.setAttribute("normal",new xt(f,3));let m=yn.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return n.boundingSphere===null&&(n.boundingSphere=new gl),n.boundingSphere.center.set(m[0],m[1],m[2]),n.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,n.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},yn.free_mesh_data(s),p}function aat(t,e,n){if(yn===void 0)return-1;let i,r,s;if(e&&t.userData.positions!==void 0){let m=t.userData;s=m.verticesPerFace.length,i=m.positions,r=Array(m.verticesPerFace.reduce((g,v)=>g+v,0)+s);for(let g=0,v=0,y=0;g<m.verticesPerFace.length;g++){r[y++]=m.verticesPerFace[g];for(let x=0;x<m.verticesPerFace[g];x++)r[y++]=m.indices[v++]}}else({positions:i,faceIndices:r,nFaces:s}=rat(t,e,n));let o=i.length,a=r.length,l=i.length,c=r.length,d=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,h=yn._malloc(d),f=new Float32Array(yn.HEAPF32.buffer,h,l),p=new Uint32Array(yn.HEAPU32.buffer,h+u,c);return f.set(i,0),p.set(r,0),yn.get_csg_mesh(h,o,h+u,a,s)}function lat(t,e){yn.transform_csg_mesh(t,e.elements)}function cat(t){yn.free_csg_mesh(t)}var uat={ConeGeometry:Gst,CubeGeometry:Wst,CylinderGeometry:Mde,DodecahedronGeometry:$st,EllipseGeometry:jH,HelixGeometry:Eot,IcosahedronGeometry:Mot,LatheGeometry:Aot,NonParametricGeometry:Lot,PolygonGeometry:jde,PyramidGeometry:Iot,RectangleGeometry:Gde,SphereGeometry:Bot,PlaneGeometry:zot,BackdropGeometry:Fot,StarGeometry:Wde,TextFrameGeometry:Vot,TorusGeometry:Hot,TorusKnotGeometry:Got,TriangleGeometry:Wot,PathGeometry:Xot,VectorGeometry:Tg},MQ=t=>uat[t.type].create(t);function lb(t){return t!==null&&"booleanOp"in t}var Jde=class extends Ede(Po){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new tt}updateVisible(){super.updateVisible(),this.visible=!lb(this.parent)&&this.visible,lb(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(jh.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(t=!1){return t?this.booleanWasTransformed=!0:this.freeBooleanPointer(),lb(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let t of this.children)t instanceof Jde&&(t.freeBooleanPointer(),lb(t)&&t.invalidateUpstreamBooleanData())}updateTransformState(t){let e=super.updateTransformState(t);return e&&lb(this.parent)&&this.invalidateDownstreamBooleanData(!0),e}},XA=new _r;function WH(t,e=0,n=t.count,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0;for(let u=e;u<n;u++){let h=t.getX(u),f=t.getY(u),p=t.getZ(u);h<s&&(s=h),f<o&&(o=f),p<a&&(a=p),h>l&&(l=h),f>c&&(c=f),p>d&&(d=p)}XA.min.set(s,o,a),XA.max.set(l,c,d),XA.getCenter(i),XA.getSize(r).multiplyScalar(.5)}var dat=new Ut,hat=new Cx,Ho=class extends Jde{constructor(t,e){super(dat,hat),this.super_Entity(t,e)}updateState(t,e){this.updateState_Entity(t,e)}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?WH(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},AQ=class{constructor(t){t=t??{},this.name=t.name,this.type=t.type,this.node=t.node,this.size=t.size,this.needsUpdate=t.needsUpdate}get value(){return this.node.value}set value(t){this.node.value=t}},rp=class{constructor(t){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=pn.generateUUID(),this.type=t,this.name=""}analyze(t,e){e=e??{},t.analyzing=!0,this.build(t.addFlow(e.slot,e.cache,e.context),"v4"),t.clearVertexNodeCode(),t.clearFragmentNodeCode(),t.removeFlow(),t.analyzing=!1}analyzeAndFlow(t,e,n){return n=n??{},this.analyze(t,n),this.flow(t,e,n)}flow(t,e,n){n=n??{},t.addFlow(n.slot,n.cache,n.context);let i={result:this.build(t,e),code:t.clearNodeCode(),extra:t.context.extra};return t.removeFlow(),i}build(t,e,n){e=e??this.getType(t,e);let i=t.getNodeData(n??this);return t.analyzing&&this.appendDepsNode(t,i,e),t.nodes.indexOf(this)===-1&&t.nodes.push(this),this.updateFrame!==void 0&&t.updaters.indexOf(this)===-1&&t.updaters.push(this),this.generate(t,e,n)}updateFrame(t){}generateReadonly(t,e,n,i,r,s){return""}generate(t,e,n,i,r){return""}parse(t,e,n,i){}appendDepsNode(t,e,n){e.deps=(e.deps||0)+1;let i=t.getTypeLength(n);(i>(e.outputMax||0)||this.getType(t,n))&&(e.outputMax=i,e.output=n)}setName(t){this.name=t}getName(){return this.name}getType(t,e){return e==="sampler2D"||e==="samplerCube"?e:this.type}getHash(){let t="{",e,n;for(e in this)n=this[e],n instanceof rp&&(t+='"'+e+'":'+n.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)e=this.hashProperties[i],n=this[e],t+='"'+e+'":"'+String(n)+'",';return t+='"id":"'+this.uuid+'"}',t}},fat=class{constructor(){this.nodes={},this.keywords={}}add(t){this.nodes[t.name]=t}addKeyword(t,e,n){n=n!==void 0?n:!0,this.keywords[t]={callback:e,cache:n}}remove(t){delete this.nodes[t.name]}removeKeyword(t){delete this.keywords[t]}get(t){return this.nodes[t]}getKeyword(t,e){return this.keywords[t].callback(e)}getKeywordData(t){return this.keywords[t]}contains(t){return this.nodes[t]!==void 0}containsKeyword(t){return this.keywords[t]!==void 0}},Ao=new fat,Kn=class extends rp{constructor(t,e){super(t),this.scope="",e=e??{},this.shared=e.shared!==void 0?e.shared:!0,this.unique=e.unique!==void 0?e.unique:!1}build(t,e,n,i){if(e=e??this.getType(t),this.getShared(t,e)){let r=this.getUnique(t,e);r&&this.uuid===void 0&&(this.uuid=pn.generateUUID()),n=t.getUUID(n??this.getUUID(),!r);let s=t.getNodeData(n),o=s.output||this.getType(t);if(t.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(t,s,e),this.generate(t,e,n)):super.build(t,e,n);if(r)return s.name=s.name||super.build(t,e,n),s.name;if(!this.getLabel()&&(!this.getShared(t,o)||t.context.ignoreCache||s.deps===1))return super.build(t,e,n);n=this.getUUID(!1);let a=this.getTemp(t,n);if(a)return t.format(a,o,e);{a=super.generate(t,e,n,s.output,i);let l=this.generate(t,o,n);return t.addNodeCode(a+" = "+l+";"),t.format(a,o,e)}}return super.build(t,e,n)}getShared(t,e){return e!=="sampler2D"&&e!=="samplerCube"&&this.shared}getUnique(t,e){return this.unique}setLabel(t){return this.label=t,this}getLabel(){return this.label}getUUID(t){let e=this.uuid;return typeof this.scope=="string"&&(e=this.scope+"-"+e),e}getTemp(t,e){e=e||this.uuid;let n=t.getVars()[e];return n?n.name:void 0}generate(t,e,n,i,r){return this.getShared(t,e)||console.error("TempNode is not shared"),n=n??this.uuid,t.getTempVar(n,i??this.getType(t),r,this.getLabel()).name}},Go=class extends Kn{constructor(t,e){e=e??{},e.shared=e.shared!==void 0?e.shared:!1,super(t,e),this.readonly=!1}setReadonly(t){return this.readonly=t,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(t,e,n,i,r,s){n=t.getUUID(n??this.getUUID()),i=i??this.getType(t);let o=t.getNodeData(n);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(t,e,n,i,r,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(i,this,r,s,this.getLabel())),t.format(o.vertex.name,i,e)):(o.fragment||(o.fragment=t.createFragmentUniform(i,this,r,s,this.getLabel())),t.format(o.fragment.name,i,e))}},Ps=class extends Go{constructor(t=0,e){super("v2"),this.nodeType="Vector2",this.value=t instanceof Se?t:new Se(t,e)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}generateReadonly(t,e,n,i,r,s){return t.format("vec2("+this.value.x+", "+this.value.y+")",i,e)}},$a=class extends Go{constructor(e=0,n,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof q?e:new q(e,n,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,n,i,r,s,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,n)}},zo=class extends Lt{constructor(t,e,n,i){super(t,e,n),this.isColorA=!0,this.a=i}setRGBA(t,e,n,i){super.setRGB(t,e,n),this.a=i}copy(t){return super.copy(t),this.a="a"in t?t.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(t,e="srgb"){let n;if(t==="transparent")return this.setRGBA(0,0,0,0),this;if(n=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(t)){let i,r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=r==="rgba"?parseFloat(i[4]):1,super.setStyle(t,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=r==="hsla"?parseFloat(i[4]):1,super.setStyle(t,e);break}}return super.setStyle(t,e)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(t){this.r=t}set y(t){this.g=t}set z(t){this.b=t}set w(t){this.a=t}},ed=class extends Go{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof zo?e:new zo(e.r,e.g,e.b,e.a)}generateReadonly(e,n,i,r,s,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,n)}},pat=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,TQ=/[a-z_0-9]+/gi,ot=class extends Kn{constructor(t,e,n,i,r){super(r),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=r===void 0,this.isInterface=!1,this.parse(t,e,n,i)}getShared(t,e){return!this.isMethod}getType(t){return t.getTypeByFormat(this.type)}getInputByName(t){if(this.inputs){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}}getIncludeByName(t){if(this.includes){let e=this.includes.length;for(;e--;)if(this.includes[e].name===t)return this.includes[e]}}generate(t,e,n,i,r){let s,o=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)t.include(this.includes[c],this);for(let c in this.extensions)t.extensions[c]=!0;let l=[];for(;s=TQ.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let d=l[c],u=d[0],h=this.isMethod?!this.getInputByName(u):!0,f=u;if(this.keywords[u]||this.useKeywords&&h&&Ao.containsKeyword(u)){let p=this.keywords[u];if(!p){let m=Ao.getKeywordData(u);m.cache&&(p=t.keywords[u]),p=p||Ao.getKeyword(u,t),m.cache&&(t.keywords[u]=p)}f=p.build(t)}u!==f&&a[d.index+o-1]!=="."&&(a=a.substring(0,d.index+o)+f+a.substring(d.index+u.length+o),o+=f.length-u.length),this.getIncludeByName(f)===void 0&&Ao.contains(f)&&t.include(Ao.get(f))}return e==="source"?a:this.isMethod?(this.isInterface||t.include(this,void 0,a),this.name):t.format("( "+a+" )",this.getType(t),e)}parse(t,e,n,i){if(this.src=t||"",this.includes=e??[],this.extensions=n??{},this.keywords=i??{},this.isMethod){let r=pat.exec(this.src);if(this.inputs=[],r&&r.length==4){this.type=r[1],this.name=r[2];let s=r[3].match(TQ);if(s){let o=0;for(;o<s.length;){let a=s[o++],l;a==="in"||a==="out"||a==="inout"?l=s[o++]:(l=a,a="");let c=s[o++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},mat=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,ehe=class extends Kn{constructor(t="",e){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(t||ehe.PI,void 0,void 0,void 0,e)}getType(t){return t.getTypeByFormat(this.type)}parse(t,e,n,i,r){this.src=t||"";let s,o,a="",l=mat.exec(t);this.useDefine=r??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(t,e){if(e==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return t.include(this),t.format(this.name,this.getType(t),e)}generate(t,e,n,i,r){return t.format(this.name,this.getType(t),e)}},Un=ehe;Un.PI="PI",Un.PI2="PI2",Un.RECIPROCAL_PI="RECIPROCAL_PI",Un.RECIPROCAL_PI2="RECIPROCAL_PI2",Un.LOG2="LOG2",Un.EPSILON="EPSILON";var gat=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),vat=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),the=class extends Kn{constructor(t=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(t)}getType(t){return t.getTypeByFormat(this.name)}getInputByName(t){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}generate(t,e,n,i,r){return e==="source"?this.src+";":t.format("( "+this.src+" )",this.getType(t),e)}parse(t=""){this.src=t,this.inputs=[];let e=gat.exec(t);if(e){let n=e[2],i;for(;i=vat.exec(n);)this.inputs.push({type:i[1],name:i[2]});this.name=e[1]}else this.name="";this.type=this.name}},qH=class extends Kn{constructor(t){super("v2",{shared:!1}),this.nodeType="UV",this.index=t??0}generate(t,e){t.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",i=t.isShader("vertex")?"uv"+n:"vUv"+n;return t.format(i,this.getType(t),e)}};Ao.addKeyword("uv",function(){return new qH});Ao.addKeyword("uv2",function(){return new qH(1)});var r0=class extends Kn{constructor(t,e){super("v4"),this.nodeType="ColorSpace",this.input=t,this.method=e??r0.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(t){switch(t){case pu:return["Linear"];case Zt:return["sRGB"];default:return[]}}generate(t,e){var o;let n=this.input.build(t,"v4"),i=this.getType(t),r=r0.Nodes[this.method],s=t.include(r);if(s===r0.LINEAR_TO_LINEAR)return t.format(n,i,e);if(((o=r.inputs)==null?void 0:o.length)===2){let a=this.factor.build(t,"f");return t.format(s+"( "+n+", "+a+" )",i,e)}else return t.format(s+"( "+n+" )",i,e)}fromEncoding(t){let e=r0.getEncodingComponents(t);this.method="LinearTo"+e[0],this.factor=e[1]}fromDecoding(t){let e=r0.getEncodingComponents(t);this.method=e[0]+"ToLinear",this.factor=e[1]}},Jc=r0;Jc.Nodes={LinearToLinear:new ot(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new ot(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new ot(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Jc.LINEAR_TO_LINEAR="LinearToLinear",Jc.SRGB_TO_LINEAR="sRGBToLinear",Jc.LINEAR_TO_SRGB="LinearTosRGB";var li=class extends ot{constructor(t="",e,n,i,r){super(t,r,i,n,e),this.nodeType="Expression"}},od=class extends Go{constructor(e=new kr,n,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=n??new qH,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,n){return super.generate(e,n,this.value.uuid,"t")}generate(e,n){if(n==="sampler2D")return this.getTexture(e,n);let i=this.getTexture(e,n),r=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let o,a;this.project?o="texture2DProj":o=s?"tex2DBias":"tex2D",s?a=o+"( "+i+", "+r+", "+s+" )":a=o+"( "+i+", "+r+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=this.colorSpace??new Jc(new li("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,c),e.removeContext(),e.format(a,c,n)}},vt=class extends Go{constructor(t){super("f"),this.nodeType="Float",this.value=t??0}generateReadonly(t,e,n,i,r,s){return t.format(this.value+(this.value%1?"":".0"),i,e)}},CQ=class extends Kn{constructor(t,e){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=t,this.inputs=e??[]}getFunction(){return this.value}getType(t){return this.value.getType(t)}generate(t,e,n,i,r){i=this.getType(t);let s=this.value,o=s.build(t,e)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],d=this.inputs[l]||this.inputs[c.name];a.push(d.build(t,t.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return t.format(o,i,e)}},nhe=class extends Kn{constructor(t,e,n=nhe.ADD){super(),this.nodeType="Operator",this.type=t.type,this.a=t,this.b=e,this.op=n}getType(t){let e=this.a.getType(t),n=this.b.getType(t);return t.isTypeMatrix(e)?"v4":t.getTypeLength(n)>t.getTypeLength(e)?n:e}generate(t,e){let n=this.getType(t);this.type=n;let i=this.a.build(t,n),r=this.b.build(t,n);return t.format("( "+i+" "+this.op+" "+r+" )",n,e)}},bo=nhe;bo.ADD="+",bo.SUB="-",bo.MUL="*",bo.DIV="/";var Fn=class extends Kn{constructor(t,e=Fn.ABS,n,i){super(),this.nodeType="Math",this.a=t,typeof e!="string"?this.b=e:i=e,typeof n!="string"?this.c=n:i=n,this.method=i,this.hashProperties=["method"]}getNumInputs(t){switch(this.method){case Fn.MIX:case Fn.CLAMP:case Fn.REFRACT:case Fn.SMOOTHSTEP:case Fn.FACEFORWARD:return 3;case Fn.MIN:case Fn.MAX:case Fn.MOD:case Fn.STEP:case Fn.REFLECT:case Fn.DISTANCE:case Fn.DOT:case Fn.CROSS:case Fn.POW:return 2;default:return 1}}getInputType(t){let e=t.getTypeLength(this.a.getType(t)),n=this.b?t.getTypeLength(this.b.getType(t)):0,i=this.c?t.getTypeLength(this.c.getType(t)):0;return e>n&&e>i?this.a.getType(t):n>i?this.b.getType(t):this.c.getType(t)}getType(t){switch(this.method){case Fn.LENGTH:case Fn.DISTANCE:case Fn.DOT:return"f";case Fn.CROSS:return"v3"}return this.getInputType(t)}generate(t,e){let n,i,r,s=this.a?t.getTypeLength(this.a.getType(t)):0,o=this.b?t.getTypeLength(this.b.getType(t)):0,a=this.c?t.getTypeLength(this.c.getType(t)):0,l=this.getInputType(t),c=this.getType(t);switch(this.type=c,this.method){case Fn.NEGATE:return t.format("( -"+this.a.build(t,l)+" )",l,e);case Fn.INVERT:return t.format("( 1.0 - "+this.a.build(t,l)+" )",l,e);case Fn.CROSS:n=this.a.build(t,"v3"),i=this.b.build(t,"v3");break;case Fn.STEP:n=this.a.build(t,s===1?"f":l),i=this.b.build(t,l);break;case Fn.MIN:case Fn.MAX:case Fn.MOD:n=this.a.build(t,l),i=this.b.build(t,o===1?"f":l);break;case Fn.REFRACT:n=this.a.build(t,l),i=this.b.build(t,l),r=this.c.build(t,"f");break;case Fn.MIX:n=this.a.build(t,l),i=this.b.build(t,l),r=this.c.build(t,a===1?"f":l);break;default:n=this.a.build(t,l),this.b&&(i=this.b.build(t,l)),this.c&&(r=this.c.build(t,l));break}let d=[];d.push(n),i&&d.push(i),r&&d.push(r);let u=this.getNumInputs(t);if(d.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${d.length}.`);return t.format(this.method+"( "+d.join(", ")+" )",c,e)}},Xt=Fn;Xt.RAD="radians",Xt.DEG="degrees",Xt.EXP="exp",Xt.EXP2="exp2",Xt.LOG="log",Xt.LOG2="log2",Xt.SQRT="sqrt",Xt.INV_SQRT="inversesqrt",Xt.FLOOR="floor",Xt.CEIL="ceil",Xt.NORMALIZE="normalize",Xt.FRACT="fract",Xt.SATURATE="saturate",Xt.SIN="sin",Xt.COS="cos",Xt.TAN="tan",Xt.ASIN="asin",Xt.ACOS="acos",Xt.ARCTAN="atan",Xt.ABS="abs",Xt.SIGN="sign",Xt.LENGTH="length",Xt.NEGATE="negate",Xt.INVERT="invert",Xt.MIN="min",Xt.MAX="max",Xt.MOD="mod",Xt.STEP="step",Xt.REFLECT="reflect",Xt.DISTANCE="distance",Xt.DOT="dot",Xt.CROSS="cross",Xt.POW="pow",Xt.MIX="mix",Xt.CLAMP="clamp",Xt.REFRACT="refract",Xt.SMOOTHSTEP="smoothstep",Xt.FACEFORWARD="faceforward";var Nb=class extends Kn{constructor(t,e,n){super("v4"),this.nodeType="TextureCubeUV",this.value=t,this.uv=e,this.bias=n}bilinearCubeUV(t,e,n,i){let r=new CQ(Nb.Nodes.bilinearCubeUV,[e,n,i]);this.colorSpaceTL=this.colorSpaceTL??new Jc(new li("","v4")),this.colorSpaceTL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(t)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Jc(new li("","v4")),this.colorSpaceTR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(t)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Jc(new li("","v4")),this.colorSpaceBL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(t)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Jc(new li("","v4")),this.colorSpaceBR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(t)+".br");let s={include:t.isShader("vertex"),ignoreCache:!0};t.addContext(s),this.colorSpaceTLExp=new li(this.colorSpaceTL.build(t,"v4"),"v4"),this.colorSpaceTRExp=new li(this.colorSpaceTR.build(t,"v4"),"v4"),this.colorSpaceBLExp=new li(this.colorSpaceBL.build(t,"v4"),"v4"),this.colorSpaceBRExp=new li(this.colorSpaceBR.build(t,"v4"),"v4"),t.removeContext();let o=new li("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=r,o}generate(t,e){if(t.isShader("fragment")){let n=this.uv,i=this.bias||t.context.roughness,r=new CQ(Nb.Nodes.roughnessToMip,[i]),s=new Xt(r,Nb.Nodes.m0,Nb.Nodes.cubeUV_maxMipLevel,Xt.CLAMP),o=new Xt(s,Xt.FLOOR),a=new Xt(s,Xt.FRACT),l=this.bilinearCubeUV(t,this.value,n,o),c=this.bilinearCubeUV(t,this.value,n,new bo(o,new vt(1).setReadonly(!0),bo.ADD)),d=new Xt(l,c,a,Xt.MIX);return t.format(d.build(t),"v4",e)}else return console.warn("TextureCubeUVNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e)}},qF=Nb;qF.Nodes=function(){let t=new the(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),e=new Un("float cubeUV_maxMipLevel 8.0",!0),n=new Un("float cubeUV_minMipLevel 4.0",!0),i=new Un("float cubeUV_maxTileSize 256.0",!0),r=new Un("float cubeUV_minTileSize 16.0",!0),s=new ot(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new ot(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new ot(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[t,s,o,e,n,i,r]);a.useKeywords=!1;let l=new Un("float r0 1.0",!0),c=new Un("float v0 0.339",!0),d=new Un("float m0 -2.0",!0),u=new Un("float r1 0.8",!0),h=new Un("float v1 0.276",!0),f=new Un("float m1 -1.0",!0),p=new Un("float r4 0.4",!0),m=new Un("float v4 0.046",!0),g=new Un("float m4 2.0",!0),v=new Un("float r5 0.305",!0),y=new Un("float v5 0.016",!0),x=new Un("float m5 3.0",!0),b=new Un("float r6 0.21",!0),w=new Un("float v6 0.0038",!0),E=new Un("float m6 4.0",!0),A=[l,c,d,u,h,f,p,m,g,v,y,x,b,w,E],S=new ot(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,A);return{bilinearCubeUV:a,roughnessToMip:S,m0:d,cubeUV_maxMipLevel:e}}();var s0=class extends Kn{constructor(t){super("v3"),this.nodeType="Normal",this.scope=t??s0.VIEW}getShared(){return this.scope===s0.WORLD}build(t,e,n,i){let r=t.context[this.scope+"Normal"];return r?r.build(t,e,n,i):super.build(t,e,n)}generate(t,e,n,i,r){let s;switch(this.scope){case s0.VIEW:t.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case s0.LOCAL:t.isShader("vertex")?s="objectNormal":(t.requires.normal=!0,s="vObjectNormal");break;case s0.WORLD:t.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(t.requires.worldNormal=!0,s="vWNormal");break}return t.format(s,this.getType(t),e)}},Do=s0;Do.LOCAL="local",Do.WORLD="world",Do.VIEW="view",Do.NORMAL="normal";Ao.addKeyword("viewNormal",function(){return new Do(Do.VIEW)});Ao.addKeyword("localNormal",function(){return new Do(Do.NORMAL)});Ao.addKeyword("worldNormal",function(){return new Do(Do.WORLD)});var Zu=class extends Kn{constructor(t){super("v3"),this.nodeType="Position",this.scope=t??Zu.LOCAL}getType(){switch(this.scope){case Zu.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Zu.LOCAL:case Zu.WORLD:return!1}return!0}generate(t,e,n,i,r){let s;switch(this.scope){case Zu.LOCAL:t.isShader("vertex")?s="transformed":(t.requires.position=!0,s="vPosition");break;case Zu.WORLD:if(t.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";t.requires.worldPosition=!0,s="vWPosition";break;case Zu.VIEW:s=t.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Zu.PROJECTION:s=t.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return t.format(s,this.getType(),e)}},Yl=Zu;Yl.LOCAL="local",Yl.WORLD="world",Yl.VIEW="view",Yl.PROJECTION="projection";Ao.addKeyword("position",function(){return new Yl});Ao.addKeyword("worldPosition",function(){return new Yl(Yl.WORLD)});Ao.addKeyword("viewPosition",function(){return new Yl(Yl.VIEW)});var Nc=class extends Kn{constructor(t){super("v3"),this.nodeType="Reflect",this.scope=t??Nc.CUBE}getUnique(t){return!t.context.viewNormal}getType(){switch(this.scope){case Nc.SPHERE:return"v2"}return this.type}generate(t,e){let n=this.getUnique(t);if(t.isShader("fragment")){let i;switch(this.scope){case Nc.VECTOR:{let r=new Do(Do.VIEW),s=t.context.roughness,o=r.build(t,"v3"),a=new Yl(Yl.VIEW).build(t,"v3"),l=s?s.build(t,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${c}, viewMatrix )`;n?(t.addNodeCode(`vec3 reflectVec = ${d};`),i="reflectVec"):i=d;break}case Nc.CUBE:{let r=new Nc(Nc.VECTOR).build(t,"v3"),s="vec3( -"+r+".x, "+r+".yz )";n?(t.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case Nc.SPHERE:{let r="normalize( ( viewMatrix * vec4( "+new Nc(Nc.VECTOR).build(t,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(t.addNodeCode(`vec2 reflectSphereVec = ${r};`),i="reflectSphereVec"):i=r;break}}return t.format(i,this.getType(),e)}else return console.warn("ReflectNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.type,e)}},sy=Nc;sy.CUBE="cube",sy.SPHERE="sphere",sy.VECTOR="vector";var yat=class extends Kn{constructor(t=new od,e,n){super("v4"),this.nodeType="TextureCube",this.value=t,this.radianceNode=new qF(this.value,e??new sy(sy.VECTOR),n),this.irradianceNode=new qF(this.value,new Do(Do.WORLD),new vt(1).setReadonly(!0))}generate(t,e){return t.isShader("fragment")?(t.require("irradiance"),t.context.bias&&t.context.bias.setTexture(this.value),(t.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(t,e)):(console.warn("TextureCubeNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e))}},xat=class extends Go{constructor(t=new ZV,e,n){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=t,this.uv=e??new sy,this.bias=n}getTexture(t,e){return super.generate(t,e,this.value.uuid,"tc")}generate(t,e){var l;if(e==="samplerCube")return this.getTexture(t,e);let n=this.getTexture(t,e),i=(l=this.uv)==null?void 0:l.build(t,"v3"),r=this.bias?this.bias.build(t,"f"):void 0;r===void 0&&t.context.bias&&(r=t.context.bias.setTexture(this).build(t,"f"));let s;r?s="texCubeBias( "+n+", "+i+", "+r+" )":s="texCube( "+n+", "+i+" )";let o={include:t.isShader("vertex"),ignoreCache:!0},a=this.getType(t);return t.addContext(o),this.colorSpace=this.colorSpace??new Jc(new li("",a)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(t,a),t.removeContext(),t.format(s,a,e)}},bat=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,wat=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,_at=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,Sat=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// NOTE: We use the blue channel to avoid temporal reprojection
// with incorrect velocity if the fragment is transparent.
gVelocity = vec4(velocity, gl_FragColor.a < 1.0 ? 0.0 : 1.0, 1.);
`,PQ=["x","y","z","w"],Eat=["float","vec2","vec3","vec4"],Mat={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Aat={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Tat=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function t(e,n){return e.deps.length-n.deps.length}return function(e,n){let i=this.getIncludes(e,n);if(!i)return"";let r="";i=i.sort(t);for(let s=0;s<i.length;s++)i[s].src&&(r+=i[s].src+`
`);return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(t,e){this.addVertexParsCode(bat),this.addFragmentParsCode(wat),this.buildShader("vertex",t),this.buildShader("fragment",e);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(_at),this.addFragmentFinalCode(Sat)),this}buildShader(t,e){this.resultCode[t]=e.build(this.setShader(t),"v4")}setMaterial(t,e){return this.defines={},this}addFlow(t,e,n){return this.addSlot(t).addCache(e).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(t){return this.cache=t??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(t){return this.context=Object.assign({},this.context,t),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(t){return this.slot=t||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(t,e){this.fragmentVariables[t]===void 0&&(this.addFragmentCode(`${e} ${t};`),this.fragmentVariables[t]="")}addFragmentParsVariable(t,e){this.fragmentParsVariables[t]===void 0&&(this.addFragmentParsCode(`${e} ${t};`),this.fragmentParsVariables[t]="")}addVertexParsVariable(t,e){this.vertexParsVariables[t]===void 0&&(this.addVertexParsCode(`${e} ${t};`),this.vertexParsVariables[t]="")}addVertexCode(t){this.addCode(t,"vertex")}addFragmentCode(t){this.addCode(t,"fragment")}addCode(t,e){this.code[e??this.shader]+=t+`
`}addVertexNodeCode(t){this.addNodeCode(t,"vertex")}addFragmentNodeCode(t){this.addNodeCode(t,"fragment")}addNodeCode(t,e){this.nodeCode[e??this.shader]+=t+`
`}clearNodeCode(t){t=t??this.shader;let e=this.nodeCode[t];return this.nodeCode[t]="",e}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(t){this.addFinalCode(t,"vertex")}addFragmentFinalCode(t){this.addFinalCode(t,"fragment")}addFinalCode(t,e){this.finalCode[e??this.shader]+=t+`
`}addVertexParsCode(t){this.addParsCode(t,"vertex")}addFragmentParsCode(t){this.addParsCode(t,"fragment")}addParsCode(t,e){this.parsCode[e??this.shader]+=t+`
`}addVaryCode(t){this.addVertexParsCode(t),this.addFragmentParsCode(t)}isCache(t){return this.caches.indexOf(t)!==-1}isSlot(t){return this.slots.indexOf(t)!==-1}define(t,e){this.defines[t]=e===void 0?1:e}require(t){this.requires[t]=!0}isDefined(t){return this.defines[t]!==void 0}getVar(t,e,n,i="varying",r="V",s=""){let o=this.getVars(i),a=o[t];if(!a){let l=o.length;a={name:n||"node"+r+l+(s?"_"+s:""),type:e},o.push(a),o[t]=a}return a}getTempVar(t,e,n,i){return this.getVar(t,e,n,this.shader,"T",i)}getAttribute(t,e){if(!this.attributes[t]){let n=this.getVar(t,e);this.addVertexParsCode("attribute "+e+" "+t+";"),this.addVertexFinalCode(n.name+" = "+t+";"),this.attributes[t]={varying:n,name:t,type:e}}return this.attributes[t]}getCode(t){return[this.prefixCode,this.parsCode[t],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[t],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[t],"uniform"),this.getIncludesCode("consts",t),this.getIncludesCode("structs",t),this.getIncludesCode("functions",t),"void main() {",this.getVarListCode(this.getVars(t)),this.code[t],this.resultCode[t],this.finalCode[t],"}"].join(`
`)}getVarListCode(t,e){e=e??"";let n="";for(let i=0,r=t.length;i<r;++i){let s=t[i],o=s.type,a=s.name,l=s.size,c=this.getFormatByType(o);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?n+=e+" "+c.substring(0,c.length-2)+" "+a+`[${l}];
`:n+=e+" "+c+" "+a+`;
`}return n}getVars(t){return this.inputs.vars[t??this.shader]}getNodeData(t){let e=t instanceof rp?t.uuid:t;return this.nodeData[e]=this.nodeData[e]||{}}createUniform(t,e,n,i,r,s){if(e.includes("[]")){let o=this.inputs.arrayUniforms,a=o.list.length,l=new AQ({type:e,size:n.size,name:i||"nodeUA"+a+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,a=o.list.length,l=new AQ({type:e,name:i||"nodeU"+a+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(t,e,n,i,r){return this.createUniform("vertex",t,e,n,i,r)}createFragmentUniform(t,e,n,i,r){return this.createUniform("fragment",t,e,n,i,r)}include(t,e,n){var s;let i;if(t=typeof t=="string"?Ao.get(t):t,this.context.include===!1)return t.name;t instanceof ot?i=this.includes.functions:t instanceof Un?i=this.includes.consts:t instanceof the&&(i=this.includes.structs);let r=i[this.shader]=i[this.shader]||[];if(t){let o=r[t.name];if(o||(o=r[t.name]={node:t,deps:[]},r.push(o),o.src=t.build(this,"source")),t instanceof ot&&e&&r[e.name]&&r[e.name].deps.indexOf(t)===-1&&(r[e.name].deps.push(t),(s=t.includes)==null?void 0:s.length)){let a=0;do this.include(t.includes[a++],e);while(a<t.includes.length)}return n&&(o.src=n),t.name}else throw new Error("Include not found.")}colorToVectorProperties(t){return t.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(t){return t.replace(/c/g,"v3")}getIncludes(t,e){return this.includes[t][e||this.shader]}getConstructorFromLength(t){return Eat[t-1]}isTypeMatrix(t){return/^m/.test(t)}getTypeLength(t){return t==="f"?1:parseInt(this.colorToVector(t).substr(1))}getTypeFromLength(t){return t===1?"f":"v"+t}findNode(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!=null&&n.isNode)return n}}resolve(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!==void 0){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case ig:case rg:return new xat(n);case PS:return new yat(new od(n));default:return new od(n)}else{if(n.isVector2)return new Ps(n);if(n.isVector3)return new $a(n);if(n.isVector4)return new ed(n)}}}}format(t,e,n){switch(this.colorToVector(n+" <- "+e)){case"f <- v2":return t+".x";case"f <- v3":return t+".x";case"f <- v4":return t+".x";case"f <- i":case"f <- b":return"float( "+t+" )";case"v2 <- f":return"vec2( "+t+" )";case"v2 <- v3":return t+".xy";case"v2 <- v4":return t+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+t+" ) )";case"v3 <- f":return"vec3( "+t+" )";case"v3 <- v2":return"vec3( "+t+", 0.0 )";case"v3 <- v4":return t+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+t+" ) )";case"v4 <- f":return"vec4( "+t+" )";case"v4 <- v2":return"vec4( "+t+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+t+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+t+" ) )";case"i <- f":case"i <- b":return"int( "+t+" )";case"i <- v2":return"int( "+t+".x )";case"i <- v3":return"int( "+t+".x )";case"i <- v4":return"int( "+t+".x )";case"b <- f":return"( "+t+" != 0.0 )";case"b <- v2":return"( "+t+" != vec2( 0.0 ) )";case"b <- v3":return"( "+t+" != vec3( 0.0 ) )";case"b <- v4":return"( "+t+" != vec4( 0.0 ) )";case"b <- i":return"( "+t+" != 0 )"}return t}getTypeByFormat(t){return Mat[t]||t}getFormatByType(t){return Aat[t]||t}getUUID(t,e){return e=e!==void 0?e:!0,e&&this.cache&&(t=this.cache+"-"+t),t}getElementByIndex(t){return PQ[t]}getIndexByElement(t){return PQ.indexOf(t)}isShader(t){return this.shader===t}setShader(t){return this.shader=t,this}mergeDefines(t){for(let e in t)this.defines[e]=t[e];return this.defines}mergeUniform(t){for(let e in t)this.uniforms[e]=t[e];return this.uniforms}getTextureEncodingFromMap(t){let e;return t?t.isTexture&&(e=t.encoding):e=pu,e===pu&&this.context.gamma&&(e=Zt),e}},Xi=class extends Go{constructor(t=0,e,n,i){super("c"),this.nodeType="Color",this.value=t instanceof zo?t:new zo(t||0,e,n,i)}setRGBA(t){this.value.setRGBA(t.r,t.g,t.b,t.a)}generate(t,e,n,i,r,s){n=t.getUUID(n??this.getUUID()),i=i??this.getType(t);let o=t.getNodeData(n),a=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(t,"f");t.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(t,e,n,i,r,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(i,this,r,s,this.getLabel())),t.format(o.vertex.name,i,e)):(o.fragment||(o.fragment=t.createFragmentUniform(i,this,r,s,this.getLabel())),t.format(o.fragment.name,i,e))}generateReadonly(t,e,n,i,r,s){return t.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,e)}},Qn=class extends Go{constructor(t){super("i"),this.nodeType="Int",this.value=Math.floor(t??0)}generateReadonly(t,e,n,i,r,s){return t.format(this.value.toString(),i,e)}},no=class extends Go{constructor(t){super("b"),this.nodeType="Bool",this.value=t??!1}generateReadonly(t,e,n,i){return t.format(this.value?"true":"false",i,e)}},Zp=class extends Go{constructor(t=1,e){super("f[]"),this.nodeType="FloatArray",this.size=t,this.value=Array.isArray(e)?e:typeof e=="number"?new Array(t).fill(e):new Array(t).fill(0)}},$H=class extends Go{},Cat=class extends $H{constructor(t){super("v3"),this.image=t,this._value=new q}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},$F=class extends $H{constructor(t,e){super("t"),this.image=t,this.wrap=e}get value(){return this.image.getTexture(this.wrap)}},ihe=class extends Go{constructor(t){super("m3"),this.nodeType="Matrix3",this.value=t??new cs}generateReadonly(t,e,n,i,r,s){return t.format("mat3("+this.value.elements.join(", ")+")",i,e)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}},yu=class extends Go{constructor(t){super("m4"),this.nodeType="Matrix4",this.value=t??new tt}generateReadonly(t,e,n,i,r,s){return t.format("mat4("+this.value.elements.join(", ")+")",i,e)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}};function DQ(t,e,n){t.setUvTransform(n[0],n[1],e[0],e[1],0,0,0)}var Pat=class extends ihe{constructor(t,e){super(new cs),this.repeat=t,this.offset=e,DQ(this.value,t,e)}updateMatrix(){DQ(this.value,this.repeat,this.offset)}},Qp=class extends Go{constructor(t=1,e){super("v4[]"),this.nodeType="Vector4Array",this.size=t,this.value=Array.isArray(e)?e:e instanceof sn?new Array(t).fill(e):new Array(t).fill(new sn(0))}},RQ=class extends Kn{constructor(t,e,n,i){super("v3"),this.nodeType="Blend",this.a=t,this.b=e,this.alpha=n,this.mode=i}generate(t,e){if(t.isShader("fragment")){let n=[];return n.push(this.a.build(t,"c")),n.push(this.b.build(t,"c")),n.push(this.alpha.build(t,"f")),n.push(this.mode.build(t,"i")),t.format("spe_blend("+n.join(",")+")",this.getType(t),e)}else return console.warn("BlendNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},rhe=class extends Kn{constructor(t,e){super("v3"),this.nodeType="CustomColor",this.color=t,this.alpha=e,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){let n=t.include(rhe.Nodes.customColor);t.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(t,"v3")),i.push(this.mask?`luminance(${this.mask.build(t,"v3")})`:"1.0"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("CustomColorNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},XF=rhe;XF.Nodes=function(){return{customColor:new ot(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var she=class extends Kn{constructor(t,e){super("v3"),this.nodeType="CustomNormal",this.cnormal=t,this.alpha=e,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){let n=t.include(she.Nodes.customNormal);t.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(t,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("CustomNormalNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},ohe=she;ohe.Nodes=function(){return{customNormal:new ot(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var Bb=class extends Kn{constructor(t,e,n,i,r,s,o,a,l,c,d,u){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=t,this.textureSize=e,this.crop=n,this.projection=i,this.axis=r,this.side=s,this.size=o,this.blending=a,this.mat=l,this.alpha=c,this.mode=d,this.isMask=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){t.require("position"),t.require("normal"),t.require("uv"),t.requires.uv=[!0],t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0;let n=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=t.include(Bb.Nodes.cylindrical);break;case 2:i=t.include(Bb.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new ot(`
		vec3 ${n}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${n}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);i=t.include(o);break;case 4:i=t.include(Bb.Nodes.triplanar);break;default:i=t.include(Bb.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){t.addVertexParsCode(`varying vec2 ${n}_vCustomUv;`),t.addFragmentParsCode(`varying vec2 ${n}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];t.addVertexFinalCode(`${n}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}t.addFragmentVariable(this.calpha,"float");let r=[];return r.push("normal"),r.push(this.texture.generate(t,"t")),r.push(this.textureSize.build(t,"v2")),r.push(this.crop.build(t,"f")),r.push(this.mat.build(t,"mat3")),r.push(this.size.build(t,"v2")),r.push(this.blending.build(t,"f")),r.push(this.isMask.build(t,"b")),r.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),r.push(this.alpha.build(t,"f")),r.push(this.mode.build(t,"i")),r.push(this.calpha),this.firstTime=!this.firstTime,t.format(i+"("+r.join(",")+")",this.getType(t),e)}},ahe=Bb;ahe.Nodes=function(){let t=new ot(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),e=new ot(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),n=new ot(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),i=new ot(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:t,spherical:e,uv:n,triplanar:i}}();var zb=class extends Kn{constructor(t,e,n,i,r,s,o,a,l,c,d,u){super("v3"),this.nodeType="Depth",this.gradientType=t,this.smooth=e,this.near=n,this.far=i,this.isVector=r,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.isMask=u,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){let n=`g${this.uuid.toString().replace(/-/g,"")}`,i=new ot(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${n}_IS_VECTOR
                   #ifdef ${n}_LINEAR
                       #ifdef ${n}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${n}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${n}_SMOOTH
				for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[zb.Nodes.vectorLinearWorldSpaceDepth,zb.Nodes.vectorLinearObjectSpaceDepth,zb.Nodes.vectorSphericalObjectSpaceDepth,zb.Nodes.vectorSphericalWorldSpaceDepth]);if(t.isShader("fragment")){t.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&t.define(`${n}_SMOOTH`),this.isVector.value>.5&&t.define(`${n}_IS_VECTOR`),this.gradientType.value===0&&t.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&t.define(`${n}_WORLDSPACE`),t.require("worldPosition"),t.addFragmentVariable(this.calpha,"float");let r=t.include(i),s=[];return s.push(this.near.build(t,"f")),s.push(this.far.build(t,"f")),s.push(this.origin.build(t,"v3")),s.push(this.direction.build(t,"v3")),s.push(this.colors.build(t,"v4[]")),s.push(this.steps.build(t,"f[]")),s.push(this.isMask.build(t,"b")),s.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),e)}else return console.warn("DepthNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},lhe=zb;lhe.Nodes=function(){let t=new ot(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),e=new ot(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),n=new ot(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new ot(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:t,vectorLinearObjectSpaceDepth:e,vectorSphericalWorldSpaceDepth:n,vectorSphericalObjectSpaceDepth:i}}();var Dat=class extends Kn{constructor(t,e,n,i,r,s,o,a){super("v3"),this.nodeType="Fresnel",this.color=t,this.bias=e,this.scale=n,this.intensity=i,this.factor=r,this.isMask=a,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=new ot(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),i=t.include(n),r=[];return r.push(this.color.build(t,"c")),r.push(this.bias.build(t,"f")),r.push(this.scale.build(t,"f")),r.push(this.intensity.build(t,"f")),r.push(this.factor.build(t,"f")),r.push(this.isMask.build(t,"b")),r.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),r.push(this.alpha.build(t,"f")),r.push(this.mode.build(t,"i")),r.push(this.calpha),t.format(i+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("FresnelNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},che=class extends Kn{constructor(t,e,n,i,r,s,o,a,l){super("v3"),this.nodeType="Gradient",this.gradientType=t,this.smooth=e,this.colors=n,this.steps=i,this.offset=r,this.morph=s,this.angle=o,this.isMask=l,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.define("GRAD_MAX",10),t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(che.Nodes.gradient),i=[];return i.push(this.gradientType.build(t,"i")),i.push(this.smooth.build(t,"b")),i.push(this.colors.build(t,"v4[]")),i.push(this.steps.build(t,"f[]")),i.push(this.offset.build(t,"v2")),i.push(this.morph.build(t,"v2")),i.push(this.angle.build(t,"f")),i.push(this.isMask.build(t,"b")),i.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("GradientNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},uhe=che;uhe.Nodes=function(){return{gradient:new ot(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var dhe=class extends Kn{constructor(t,e,n,i){super("v3"),this.nodeType="Matcap",this.texture=t,this.isMask=i,this.alpha=e,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=t.include(dhe.Nodes.matcap);t.require("normal"),t.requires.normal=!0;let i=[];return i.push(this.texture.generate(t,"t")),i.push("normal"),i.push(this.isMask.build(t,"b")),i.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),i.push(this.alpha.build(t,"f")),i.push(this.mode.build(t,"i")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("MatcapNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},hhe=dhe;hhe.Nodes=function(){return{matcap:new ot(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var XH=(t=>(t.SIMPLEX="simplex3d",t.SIMPLEX_FRACTAL="simplex3dFractal",t.ASHIMA="simplexAshima",t.FBM="fbm",t.PERLIN="perlin",t.VORONOI="voronoi",t))(XH||{}),_o=function(){let t=new ot(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),e=new ot(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);e.keywords.F3=new Un("float F3 0.3333333"),e.keywords.G3=new Un("float G3 0.1666667");let n=new ot(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[e]),i=new ot("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new ot("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new ot(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,r]),o=new ot("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new ot("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new ot(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new ot(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new Un(`int NUM_OCTAVES ${5}`);let d=new ot("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new ot(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,r,d]),h=new ot(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),f=new ot(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),p=new ot(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),m=new ot(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),g=new ot(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),v=new ot(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),y=new ot(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[h,f,p,m,g,v]);return{simplex:e,simplexFractal:n,simplexAshima:s,fbm:c,perlin:u,voronoi:y}}(),fhe=class extends Kn{constructor(t,e,n,i,r,s,o,a,l,c,d,u,h,f,p,m,g,v,y){super("v3"),this.nodeType="Noise",this.scale=t,this.size=e,this.move=n,this.fA=i,this.fB=r,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.noiseType=u,this.voronoiStyle=f,this.highCut=p,this.lowCut=m,this.smoothness=g,this.seed=v,this.quality=y,this.isMask=h,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e,n,i,r){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let s=Object.values(XH)[this.noiseType.value],o=s=="voronoi"?`
		float v = ${s}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${s}(st),
					   ${s}(st + vec3(1.0)),
					   ${s}(st + vec3(1.0)));
		vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${s}(st * q));
		float f = ${s}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,a=new ot(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${o}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[_o.simplex,_o.simplexFractal,_o.simplexAshima,_o.fbm,_o.perlin,_o.voronoi]),l=t.include(a),c=[];return c.push(this.scale.build(t,"f")),c.push(this.size.build(t,"v3")),c.push(this.move.build(t,"f")),c.push(this.fA.build(t,"v2")),c.push(this.fB.build(t,"v2")),c.push(this.distortion.build(t,"v2")),c.push(this.colorA.build(t,"v4")),c.push(this.colorB.build(t,"v4")),c.push(this.colorC.build(t,"v4")),c.push(this.colorD.build(t,"v4")),c.push(this.voronoiStyle.build(t,"i")),c.push(this.highCut.build(t,"f")),c.push(this.lowCut.build(t,"f")),c.push(this.smoothness.build(t,"f")),c.push(this.seed.build(t,"f")),c.push(this.quality.build(t,"i")),c.push(this.isMask.build(t,"b")),c.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),c.push(this.alpha.build(t,"f")),c.push(this.calpha),t.format(l+"("+c.join(",")+")",this.getType(t),e)}};fhe.numOctaves=5;var phe=class extends Kn{constructor(t,e,n,i,r,s,o,a,l,c,d,u,h,f,p,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=t,this.contourColor=e,this.outlineWidth=n,this.contourWidth=i,this.contourThreshold=r,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=d,this.resolution=u,this.normalMap=h,this.depthMap=f,this.pixelRatio=p,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){let n=`g${this.uuid.toString().replace(/-/g,"")}`;if(t.require("vWorldViewDir"),t.require("worldNormal"),t.extensions.derivatives=!0,this.compensation.value&&t.define("OUTLINE_COMPENSATION",`${n}_offset`),this.firstTime){let i=this.outlineWidth.build(t,"f"),r=this.resolution.build(t,"v2"),s=this.compensation.build(t,"b"),o=this.pixelRatio.build(t,"f");t.addVertexParsVariable("randomColor","attribute vec3"),t.addVertexParsVariable("extrudeNormal","attribute vec3"),t.addVertexParsVariable(i,"uniform float"),t.addVertexParsVariable(r,"uniform vec2"),t.addVertexParsVariable(s,"uniform bool"),t.addVertexParsVariable(o,"uniform float"),t.addVertexParsVariable("vID","flat out float"),t.addFragmentParsVariable("vID","flat in float"),t.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${n}_offset = vec2(0.0);
                if (${s}) {
                    vec4 ${n}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${n}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${n}_offset = normalize(${n}_clipNormal.xy) / ${r} * (${i} / 2.0) * ${n}_clipPosition.w * 2.0 * ${o};
                    ${n}_clipPosition.xy += ${n}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${n}_clipPosition;
                }
            `)}if(t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let i=t.include(phe.Nodes.outline),r=[];return r.push(this.outlineColor.build(t,"c")),r.push(this.contourColor.build(t,"c")),r.push(this.outlineWidth.build(t,"f")),r.push(this.contourWidth.build(t,"f")),r.push(this.contourThreshold.build(t,"f")),r.push(this.outlineThreshold.build(t,"f")),r.push(this.contourFrequency.build(t,"f")),r.push(this.outlineSmoothing.build(t,"f")),r.push(this.contourDirection.build(t,"v3")),r.push(this.positionalLines.build(t,"b")),r.push(this.resolution.build(t,"v2")),r.push(this.normalMap.getTexture(t,"t")),r.push(this.depthMap.getTexture(t,"t")),r.push(this.pixelRatio.build(t,"f")),r.push(this.compensation.build(t,"b")),r.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),r.push(this.alpha.build(t,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,t.format(i+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("OutlineNode is not compatible with "+t.shader+" shader."),""}},mhe=phe;mhe.Nodes=function(){let t=new ot(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new ot(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[t])}}();var Qu=class extends Kn{constructor(t,e,n,i,r,s,o,a,l,c,d,u,h,f,p,m,g,v){super("v3"),this.nodeType="Pattern",this.style=t,this.projection=e,this.axis=n,this.blending=i,this.offset=r,this.colorA=s,this.colorB=o,this.frequency=a,this.size=l,this.variation=c,this.smoothness=d,this.zigzag=u,this.rotation=h,this.vertical=f,this.horizontal=p,this.sides=m,this.isMask=v,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.require("position"),t.require("uv"),t.requires.uv=[!0],t.require("normal"),t.requires.normal=!0,t.addFragmentVariable(this.calpha,"float");let n;switch(this.style.value){case 0:n="circle";break;case 1:n="ring";break;case 2:n="polygon";break;case 3:n="xcross";break;case 4:n="diamond";break;case 5:n="checkerboard";break;case 6:n="line";break;case 7:n="wave";break;default:n="circle";break}let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new ot(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),s=new ot(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),o="";if(this.projection.value===4){let d=this.style.value===2?`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u=this.style.value===2?`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;o=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${d};
				float d1 = ${u};
				float d2 = ${h};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let d=this.style.value===2?`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u="";this.axis.value===0?u=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?u=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,u=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let h="";switch(this.projection.value){case 0:h="custom_uv = vUv.st;";break;case 1:break;case 2:h=`
							vec3 p = position;
							${u}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}o=`
				vec2 custom_uv;
				${h}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${d};
				`}let a=new ot(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${o}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[s,r,Qu.DrawFunctions.circle,Qu.DrawFunctions.ring,Qu.DrawFunctions.polygon,Qu.DrawFunctions.cross,Qu.DrawFunctions.diamond,Qu.DrawFunctions.checkerboard,Qu.DrawFunctions.line,Qu.DrawFunctions.wave]),l=t.include(a),c=[];return c.push("normal"),c.push(this.blending.build(t,"f")),c.push(this.style.build(t,"i")),c.push(this.offset.build(t,"v2")),c.push(this.colorA.build(t,"v4")),c.push(this.colorB.build(t,"v4")),c.push(this.frequency.build(t,"v2")),c.push(this.size.build(t,"f")),c.push(this.variation.build(t,"f")),c.push(this.smoothness.build(t,"f")),c.push(this.zigzag.build(t,"f")),c.push(this.rotation.build(t,"f")),c.push(this.vertical.build(t,"v2")),c.push(this.horizontal.build(t,"v2")),c.push(this.sides.build(t,"i")),c.push(this.isMask.build(t,"b")),c.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),c.push(this.alpha.build(t,"f")),c.push(this.calpha),t.format(l+"("+c.join(",")+")",this.getType(t),e)}else return console.warn("PatterNode is not compatible with "+t.shader+" shader."),t.format("vec3(0.0)",this.getType(t),e)}},ghe=Qu;ghe.DrawFunctions=function(){let t=new ot(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),e=new ot(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[t]),n=new ot(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[e]),i=new ot(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[e]),r=new ot(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[e]),s=new ot(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[e]),o=new ot(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[e]),a=new ot(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new ot(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[e]),c=new ot(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:e,circle:n,ring:i,polygon:r,cross:s,diamond:o,checkerboard:a,line:l,wave:c}}();var vhe=class extends Kn{constructor(t,e,n,i,r,s,o,a){super("v3"),this.nodeType="Rainbow",this.filmThickness=t,this.movement=e,this.wavelengths=n,this.noiseStrength=i,this.noiseScale=r,this.offset=s,this.isMask=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(vhe.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(t,"f")),i.push(this.movement.build(t,"f")),i.push(this.wavelengths.build(t,"v3")),i.push(this.noiseStrength.build(t,"f")),i.push(this.noiseScale.build(t,"f")),i.push(this.offset.build(t,"v3")),i.push(this.isMask.build(t,"b")),i.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("RainbowNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},yhe=vhe;yhe.Nodes=function(){let t=new ot(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[_o.simplex]);return{rainbow:new ot(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[t])}}();var xhe=class extends Kn{constructor(t,e,n,i,r,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=t,this.colors=e,this.steps=n,this.source=i,this.isWorldSpace=r,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("worldNormal"),t.require("worldPosition"),t.isShader("fragment")){t.define("COLORS_MAX",10),t.addFragmentVariable(this.calpha,"float");let n=t.include(xhe.Nodes.toon),i=[];return i.push(this.positioning.build(t,"i")),i.push(this.colors.build(t,"v4[]")),i.push(this.steps.build(t,"f[]")),i.push(this.source.build(t,"v3")),i.push(this.isWorldSpace.build(t,"b")),i.push(this.noiseStrength.build(t,"f")),i.push(this.noiseScale.build(t,"f")),i.push(this.shadowColor.build(t,"v4")),i.push(this.offset.build(t,"v3")),i.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("ToonNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},bhe=xhe;bhe.Nodes=function(){let t=new ot(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),e=new ot(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),n=new ot(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[e]),i=new ot(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),r=new ot(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new ot(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[_o.simplex,t,n,r])}}();var whe=class extends Kn{constructor(t,e,n,i,r,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=t,this.ior=e,this.roughness=n,this.transmissionSamplerSize=i,this.transmissionSamplerMap=r,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0,t.isShader("fragment")){t.define("NUM_SAMPLES",6),t.define("BLUR_SLOD",Math.pow(2,Ot.transmissionLod.value)),t.require("worldPosition"),t.requires.worldNormal=!0,t.requires.modelMatrix=!0,t.requires.projectionMatrix=!0,t.addFragmentVariable(this.calpha,"float");let n=t.include(whe.Nodes.transmission),i=[];return i.push(this.thickness.build(t,"f")),i.push(this.ior.build(t,"f")),i.push(this.roughness.build(t,"f")),i.push(this.transmissionSamplerSize.build(t,"v2")),i.push(this.transmissionSamplerMap.getTexture(t,"t")),i.push(this.transmissionDepthMap.getTexture(t,"t")),i.push(this.aspectRatio.build(t,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("TransmissionNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},_he=whe;_he.Nodes=function(){let t=new ot(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);

            }`),e=new ot(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),n=new ot(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),i=new ot(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[n,t]),r=new ot(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[i,e]);return{transmission:new ot(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[r])}}();var YF=(t=>(t.NOISE="noise",t.MAP="map",t))(YF||{}),She=class extends Kn{constructor(t,e,n,i,r,s,o,a,l,c,d){super("v3"),this.displacementTypeIndex=new Qn(0),this.nodeType="VertexDisplacement",this.intensity=t,this.movementOrTexture=e,Object.values(YF)[this.displacementTypeIndex.value]==="map"&&(this.mat=new ihe(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=c,this.noiseFunctionIndex=d,this.voronoiStyle=i,this.smoothness=r,this.seed=s,this.highCut=o,this.lowCut=a,this.quality=l}generate(t,e){if(t.isShader("vertex")){t.define("USE_LAYER_DISPLACE");let n,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(YF)[this.displacementTypeIndex.value]){case"map":{n=t.include(She.Nodes.map),i.push(this.movementOrTexture.getTexture(t,"t")),i.push("uv"),i.push(this.cropOrOffset.build(t,"f")),this.mat&&i.push(this.mat.build(t,"mat3"));break}case"noise":{let r=Object.values(XH)[this.noiseFunctionIndex.value],s=new ot(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=r=="voronoi"?`
					float v = ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,a=new ot(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${o}
						}`,[_o.simplex,_o.simplexFractal,_o.simplexAshima,_o.fbm,_o.perlin,_o.voronoi]),l=new ot(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[a,s]);n=t.include(l),i.push(this.scale.build(t,"f")),i.push(this.cropOrOffset.build(t,"v3")),i.push(this.movementOrTexture.build(t,"f")),i.push(this.voronoiStyle.build(t,"i")),i.push(this.smoothness.build(t,"f")),i.push(this.seed.build(t,"f")),i.push(this.highCut.build(t,"f")),i.push(this.lowCut.build(t,"f")),i.push(this.quality.build(t,"i"));break}}return i.push(this.intensity.build(t,"f")),i.push("displaced_normal"),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("VertexDisplacementNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Ehe=She;Ehe.Nodes=function(){let t=new ot(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),e=new ot(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new ot(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[t,e])}}();var Ot={normalRenderTarget:new od,normalRenderTargetDepth:new od,transmissionRenderTarget:new od,transmissionSize:new Ps(2048,2048),transmissionRenderTargetDepth:new od,aoRenderTarget:new od,aoEnabled:new no,pixelRatioNode:new vt(1),resolution:new Ps,penumbraSize:new Zp(5,.5),frameIndex:new Qn(0),transmissionLod:new Qn(2)};for(let t of Object.values(Ot))t.isRenderGlobal=!0;var Mhe=class extends rp{constructor(){super("basic"),this.nodeType="Basic",this.color=new Xi(5526619),this.shadingAlpha=new vt(1),this.shadingBlend=new Qn(0),this.previousModelViewMatrix=new yu,this.previouseProjectionMatrix=new yu}get category(){return"phong"}generate(t){let e;if(t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({resolution:Ot.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Px.merge([st.fog])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.alpha&&this.alpha.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"});let n=this.color.flow(t,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(t,"f"):void 0,r=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0;t.requires.transparent=i!==void 0,t.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",n.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),r?s.push(r.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${r.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${n.result};`);let o="1.0";this.mask&&(this.mask.analyze(t),o=`luminance(${this.mask.flow(t,"v3").result})`),i?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${o} );`):s.push("gl_FragColor = vec4("+n.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),e=s.join(`
`)}return e}},Rat=class extends rp{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Xi(5526619),this.emissive=new Xi(0),this.emissiveIntensity=new vt(1),this.previousModelViewMatrix=new yu,this.previouseProjectionMatrix=new yu,this.shadingAlpha=new vt(1),this.shadingBlend=new Qn(0),this.occlusion=new no(!0)}get category(){return"lambert"}build(t){let e;if(t.define("LAMBERT"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({resolution:Ot.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Px.merge([st.fog,st.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:Ot.penumbraSize}),t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({aoMap:Ot.aoRenderTarget}),t.mergeUniform({aoEnabled:Ot.aoEnabled}),this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.emissive.flow(t,"c",{slot:"emissive"}),r=this.emissiveIntensity.flow(t,"f",{slot:"emissive"}),s=this.occlusion.flow(t,"b",{slot:"occlusion"}),o=this.shadingAlpha.flow(t,"f"),a=this.shadingBlend.flow(t,"i"),l=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=c!==void 0,t.addParsCode([`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];d.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&d.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),d.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&d.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+r.result+";"),d.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let u="1.0";this.mask&&(this.mask.analyze(t),u=`luminance(${this.mask.flow(t,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${u} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${u}, ${a.result} );

					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=d.join(`
`)}return e}},Oat=class extends rp{constructor(){super("phong"),this.nodeType="Phong",this.color=new Xi(5526619),this.specular=new Xi(1118481),this.shininess=new vt(30),this.previousModelViewMatrix=new yu,this.previouseProjectionMatrix=new yu,this.shadingAlpha=new vt(1),this.shadingBlend=new Qn(0),this.occlusion=new no(!0)}get category(){return"phong"}build(t){let e;if(t.define("PHONG"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({resolution:Ot.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Px.merge([st.fog,st.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:Ot.penumbraSize}),t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({aoMap:Ot.aoRenderTarget}),t.mergeUniform({aoEnabled:Ot.aoEnabled}),this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t);let n=this.occlusion.flow(t,"b",{slot:"occlusion"});this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let i=this.color.flow(t,"c",{slot:"color"}),r=this.specular.flow(t,"c"),s=this.shininess.flow(t,"f"),o=this.shadingAlpha.flow(t,"f"),a=this.shadingBlend.flow(t,"i"),l=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=c!==void 0,t.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];d.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",r.code,"	vec3 specular = "+r.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),c&&d.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let u="1.0";this.mask&&(this.mask.analyze(t),u=`luminance(${this.mask.flow(t,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${u} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${u}, ${a.result} );
					
					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=d.join(`
`)}return e}},Lat=class extends rp{constructor(){super("standard"),this.nodeType="Standard",this.color=new Xi(5526619),this.roughness=new vt(.3),this.metalness=new vt(0),this.reflectivity=new vt(.5),this.previousModelViewMatrix=new yu,this.previouseProjectionMatrix=new yu,this.shadingAlpha=new vt(1),this.shadingBlend=new Qn(0),this.occlusion=new no(!0)}get category(){return"physical"}build(t){let e;if(t.define("STANDARD"),t.requires.lights=!0,t.extensions.derivatives=!0,t.extensions.shaderTextureLOD=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({resolution:Ot.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Px.merge([st.fog,st.lights])),st.LTC_1&&(t.uniforms.ltc_1={value:void 0},t.uniforms.ltc_2={value:void 0}),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:Ot.penumbraSize}),t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({aoMap:Ot.aoRenderTarget}),t.mergeUniform({aoEnabled:Ot.aoEnabled});let n={gamma:!0};this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color",context:n}),this.roughness.analyze(t),this.metalness.analyze(t);let i=this.occlusion.flow(t,"b",{slot:"occlusion"});this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t),this.reflectivity&&this.reflectivity.analyze(t);let r=this.color.flow(t,"c",{slot:"color",context:n}),s=this.roughness.flow(t,"f"),o=this.metalness.flow(t,"f"),a=this.shadingAlpha.flow(t,"f"),l=this.shadingBlend.flow(t,"i"),c=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,d=this.alpha?this.alpha.flow(t,"f"):void 0,u=this.reflectivity?this.reflectivity.flow(t,"f"):void 0;t.requires.transparent=d!==void 0,t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let h=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"	float roughnessFactor = "+s.result+";",o.code,"	float metalnessFactor = "+o.result+";"),d&&h.push(d.code,"#ifdef ALPHATEST","	if ( "+d.result+" <= ALPHATEST ) discard;","#endif"),h.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),h.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),u?h.push(u.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+u.result+" ) ), diffuseColor, metalnessFactor );"):h.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),h.push("#include <lights_fragment_begin>"),h.push("#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let f="1.0";this.mask&&(this.mask.analyze(t),f=`luminance(${this.mask.flow(t,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${f} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${f}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),c&&h.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),d?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${d.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=h.join(`
`)}return e}},Iat=class extends rp{constructor(){super("toon"),this.nodeType="Toon",this.color=new Xi(5526619),this.specular=new Xi(1118481),this.shininess=new vt(30),this.previousModelViewMatrix=new yu,this.previouseProjectionMatrix=new yu,this.shadingAlpha=new vt(1),this.shadingBlend=new Qn(0)}get category(){return"toon"}build(t){let e;if(t.define("TOON"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({resolution:Ot.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Px.merge([st.fog,st.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:Ot.penumbraSize}),t.mergeUniform({frameIndex:Ot.frameIndex}),t.mergeUniform({aoMap:Ot.aoRenderTarget}),t.mergeUniform({aoEnabled:Ot.aoEnabled}),this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.specular.flow(t,"c"),r=this.shininess.flow(t,"f"),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode([`uniform float penumbraSize[${5}];`,"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",r.code,"	float shininess = max( 0.0001, "+r.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let d="1.0";this.mask&&(this.mask.analyze(t),d=`luminance(${this.mask.flow(t,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${d}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},kat=class{constructor(t=1e3*10){this.timeout=t,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...t){}remove(t){let e=this.cache.get(t);e&&(this.dispose(t,e.data),this.cache.delete(t),e.prev.next=e.next,e.next.prev=e.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let t=Date.now(),e=this.head.next;for(;e.time<t-this.timeout;)this.dispose(e.src,e.data),this.cache.delete(e.src),e=e.next,e.prev=this.head,this.head.next=e;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(t){var e;return(e=this.cache.get(t))==null?void 0:e.data}load(t){let e=Date.now(),n=this.cache.get(t);return n===void 0?(n={data:this.create(t),src:t,time:e,next:null,prev:null},this.cache.set(t,n)):(n.time=e,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}},Nat=class extends kat{create(t){return URL.createObjectURL(new Blob([t]))}dispose(t,e){URL.revokeObjectURL(e)}},vk;function Bat(t){return typeof t=="string"?t:(vk||(vk=new Nat),vk.load(t))}var zat=class{constructor(t,e){this.data=t,this.cache=e,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},Fat=class{constructor(){this.cache=new Map}remove(t){this.cache.delete(t.data)}load(t){let e=this.cache.get(t);return e===void 0&&(e=this.create(t),this.cache.set(t,e)),e.refCount+=1,e}},Ahe=class extends zat{constructor(t,e){super(t,e.imageHolderCache),this.data=t,this.shared=e,this.loaded=!1,this.isVideo=!1,this.isVideo=t.type==="video",this.updateSrc(t.data)}async updateSrc(t){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let e=()=>{this.loaded=!0;let i=[1e3,1001,1002];for(let r of i){let s=this[r];s&&(s.image=this.img,s.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof t!="string"){var n=new FileReader;n.readAsDataURL(new Blob([t],{type:"video/mp4"}));let i;await new Promise(r=>{n.onloadend=s=>{var o;i=(o=s.target)==null?void 0:o.result,r(null)}}),this.img.src=i}else this.img.src=t;this.img.onloadeddata=()=>{e()}}else this.img=new Image,this.img.src=Bat(t),this.img.onload=e}getTexture(t){let e=this[t];if(e)return e;{let n;return this.isVideo?n=new CXe(this.img,void 0,t,t):n=new kr(this.img,void 0,t,t),this.loaded&&(n.needsUpdate=!0),this[t]=n,n}}disposeTextures(){var t,e,n;(t=this[1e3])==null||t.dispose(),this[1e3]=void 0,(e=this[1001])==null||e.dispose(),this[1001]=void 0,(n=this[1002])==null||n.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},Sm=class extends Ahe{};function Ls(t,e){return e.color(t)}function Uat(t,e){switch(t.type){case"fresnel":return jat(t,e);case"gradient":return Gat(t);case"depth":return Wat(t);case"normal":return qat(t);case"noise":return $at(t,e);case"rainbow":return Xat(t);case"toon":return Yat(t,e);case"outline":return Kat(t,e);case"transmission":return Zat(t);case"color":return Hat(t,e);case"pattern":return Qat(t,e)}}function Vat(t){return{type:t.type}}function pc(t){let{alpha:e,mode:n,isMask:i}=t;return{...Vat(t),alpha:e,mode:n,isMask:i}}function Hat(t,e){return{...pc(t),color:Ls(t.color,e)}}function jat(t,e){let{bias:n,scale:i,intensity:r,factor:s,color:o,isMask:a}=t;return{...pc(t),color:Ls(o,e),bias:n,scale:i,intensity:r,factor:s}}function Gat(t){let{gradientType:e,smooth:n,colors:i,steps:r,angle:s,offset:o,morph:a}=t;return{...pc(t),gradientType:e,smooth:n,colors:i.map(l=>new sn(l[0],l[1],l[2],l[3])),num:i.length,steps:r,offset:new Se(...o),morph:new Se(...a),angle:s}}function Wat(t){let{gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:d}=t;return{...pc(t),gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:new q(...o),direction:a?new q(...a):new q(1,0,0),colors:l.map(u=>u!==void 0?new sn(u[0],u[1],u[2],u[3]):new sn(0,0,0,0)),steps:c.slice(0,l.length),smooth:d}}function qat(t){let{cnormal:e}=t;return{...pc(t),cnormal:new q(e[0],e[1],e[2])}}function $at(t,e){return{...pc(t),scale:t.scale,move:t.move,fA:new Se(...t.fA),fB:new Se(...t.fB),size:new q(...t.size),distortion:new Se(...t.distortion),colorA:Ls(t.colorA,e),colorB:Ls(t.colorB,e),colorC:Ls(t.colorC,e),colorD:Ls(t.colorD,e),noiseType:t.noiseType,voronoiStyle:t.voronoiStyle,highCut:t.highCut,lowCut:t.lowCut,smoothness:t.smoothness,seed:t.seed,quality:t.quality}}function Xat(t){return{...pc(t),filmThickness:t.filmThickness,movement:t.movement,wavelengths:new q(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new q(...t.offset)}}function Yat(t,e){return{...pc(t),positioning:t.positioning,colors:t.colors.map(n=>new sn(n[0],n[1],n[2],n[3])),num:t.colors.length,steps:t.steps,source:new q(...t.source),isWorldSpace:t.isWorldSpace,noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,shadowColor:Ls(t.shadowColor,e),offset:new q(...t.offset)}}function Kat(t,e){return{...pc(t),outlineColor:Ls(t.outlineColor,e),contourColor:Ls(t.contourColor,e),outlineWidth:t.outlineWidth,contourWidth:t.contourWidth,outlineThreshold:t.outlineThreshold,contourThreshold:t.contourThreshold,outlineSmoothing:t.outlineSmoothing,contourFrequency:t.contourFrequency,contourDirection:new q(...t.contourDirection),positionalLines:t.positionalLines,compensation:t.compensation}}function Zat(t,e){return{...pc(t),thickness:t.thickness,ior:t.ior,roughness:t.roughness}}function Qat(t,e){return{...pc(t),style:t.style,projection:t.projection,axis:t.axis,blending:t.blending,offset:new Se(...t.offset),colorA:Ls(t.colorA,e),colorB:Ls(t.colorB,e),frequency:new Se(...t.frequency),size:t.size,variation:t.variation,smoothness:t.smoothness,zigzag:t.zigzag,rotation:t.rotation,vertical:new Se(...t.vertical),horizontal:new Se(...t.horizontal),sides:t.sides}}var G2=class extends zo{},The={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},Che={depth:["colors"]};function Jat(t,e,n){var s,o;if(e==="isMask")return!0;let i=The[t.type],r=Che[t.type];if(r!==void 0){let a=t.color;if(r.includes(e)){let l=(o=(s=a[e])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==n.length)return!0}}return i!==void 0?i.includes(e):!1}function Phe(t,e,n){let i=n.uniforms[`f${n.id}_texture`];if(!i)return!1;let r=!1,s=t;if("image"in s){let o=s.image,a=e.image(o),l=i;l.image instanceof Sm||l.image.deref(),l.image=a}if("video"in s){let o=s.video,a=e.video(o),l=i;l.image instanceof Sm||l.image.deref(),l.image=a}if("wrapping"in s){let o=i;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=n.uniforms[`f${n.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return r}function elt(t,e,n,i){let r=!1;for(let[s,o]of Object.entries(t)){if(!s||o===void 0)continue;if(Rhe(s,n,i)){s==="visible"&&n.type==="light"&&(r=!0);continue}n.visible=i.visible;let a=n.uniforms[`f${n.id}_${s}`];if(a&&!(a instanceof $H))switch(r=r||Jat(n,s,o),a.constructor){case Xi:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof G2?a.value=new zo(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case ed:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof G2?a.value=new zo(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case Ps:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case $a:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case od:{Phe(o,e,n);break}case Qp:{a.value=o.map(l=>new sn(...l));break}default:{a.value=o;break}}}return r}var Hm=class{constructor(t,e,n,i){this.id=t,this.uuid=e,this.data=n,this.uniforms={};for(let r in i)this.uniforms[`f${this.id}_${r}`]=i[r];for(let r in n)Rhe(r,this,n)}get type(){return this.data.type}static create(t,e,n,i){if(n.type==="light")return Gh.createLigherLayer(t,e,n,i);if(n.type==="texture"||n.type==="video"){let r=n.type==="texture"?i.image(n.texture.image):i.video(n.texture.video),s=new $F(r,n.texture.wrapping),o=new Cat(r),a=new Pat(n.texture.repeat,n.texture.offset),l=new vt(n.crop?1:0),c=new Qn(n.projection??0),d=new Qn(["x","y","z"].indexOf(n.axis)??0),u=new Qn(n.side??0),h=new Ps(n.size?new Se(n.size[0],n.size[1]):new Se(100,100)),f=new vt(n.blending??0),p=new vt(n.alpha??1),m=new Qn(n.mode??0),g=new no(n.isMask??!1),v=new ahe(s,o,l,c,d,u,h,f,a,p,m,g),y=new li(v.calpha,"f");return new tr(t,e,n,{texture:s,textureSize:o,crop:l,projection:c,axis:d,side:u,size:h,blending:f,mat:a,alpha:p,mode:m,isMask:g},v,m,y,g)}else if(n.type==="matcap"){let r=i.image(n.texture.image),s=new $F(r,n.texture.wrapping),o=new vt(n.alpha??1),a=new Qn(n.mode??0),l=new no(n.isMask??!1),c=new hhe(s,o,a,l),d=new li(c.calpha,"f");return new tr(t,e,n,{texture:s,alpha:o,mode:a,isMask:l},c,a,d,l)}else if(n.type==="displace")if(n.displacementType==="noise"){let r=new $a(new q(...n.offset)),s=new vt(n.scale??10),o=new vt(n.intensity??8),a=new vt(n.movement??1),l=new Qn(n.noiseType??0),c=new Qn(n.voronoiStyle??0),d=new vt(n.smoothness??.5),u=new vt(n.seed??0),h=new vt(n.highCut??1),f=new vt(n.lowCut??0),p=new Qn(n.quality??1),m=new Ehe(o,a,r,c,d,u,h,f,p,s,l);return new Dhe(t,e,n,{offset:r,scale:s,intensity:o,movement:a,noiseType:l,voronoiStyle:c,smoothness:d,seed:u,highCut:h,lowCut:f,quality:p},m)}else throw new Error;else return ilt(t,e,n,i)}updateByOp(t,e,n){var r;let i=t;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props?((r=n.scene)==null||r.markNeedsUpdateRendererDirty(),!0):elt(i.props,n.shared,this,e)}else if(i.path[0]==="texture")return"texture"in e||"video"in e?Phe(i.props,n.shared,this):!0;return!1}dispose(){if(tlt(this)){let t=this.uniforms[`f${this.id}_texture`];if(!t)return!1;let e=t;e.image instanceof Sm||e.image.deref()}}hasValueByKey(t){return this.uniforms[t]!==void 0}hasValue(t){return this.hasValueByKey(`f${this.id}_${t}`)}setValue(t,e){let n=`f${this.id}_${t}`;this.hasValueByKey(n)&&e!==void 0&&(this.uniforms[n].value=e)}getNode(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e]}getValue(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e].value}getName(t){let e=/f\d+_(.*)/.exec(t);if(e&&e.length>1)return e[1];console.log(`Layer.getName: error ${t}`)}getNames(){let t=[];for(let e in this.uniforms){let n=this.getName(e);n&&t.push(n)}return t}},tr=class extends Hm{constructor(e,n,i,r,s,o,a,l){super(e,n,i,r),this.params=r,this.color=s,this.mode=o,this.alpha=a,this.isMask=l}},Dhe=class extends Hm{constructor(t,e,n,i,r){super(t,e,n,i),this.position=r}},Gh=class extends Hm{constructor(t,e,n,i,r){super(t,e,n,r),this.node=i}static createLigherLayer(t,e,n,i){let r,s=new vt(n.alpha),o=new Qn(n.mode),a;if(!n.visible)r=new Mhe,a={};else if(n.category==="lambert"){r=new Rat;let l=new Xi(i.color(n.emissive)??0),c=new no(n.occlusion??!0);a={emissive:l,occlusion:c},r.emissive=l,r.occlusion=c}else if(n.category==="toon"){r=new Iat;let l=new vt(n.shininess??30),c=new Xi(i.color(n.specular)??1118481);a={shininess:l,specular:c},r.shininess=l,r.specular=c}else if(n.category==="physical"){r=new Lat;let l=new vt(n.roughness??.3),c=new vt(n.metalness??0),d=new vt(n.reflectivity??.5),u=new no(n.occlusion??!0);a={roughness:l,metalness:c,reflectivity:d,occlusion:u},r.roughness=l,r.metalness=c,r.reflectivity=d,r.occlusion=u}else{r=new Oat;let l=new vt(n.shininess??30),c=new Xi(n.specular!==void 0?i.color(n.specular)??1118481:1118481),d=new no(n.occlusion??!0);a={shininess:l,specular:c,occlusion:d},r.shininess=l,r.specular=c,r.occlusion=d}return r.alpha=new vt(1),r.shadingAlpha=s,r.shadingBlend=o,a.alpha=r.shadingAlpha,a.mode=r.shadingBlend,new Gh(t,e,n,r,a)}get category(){return this.node.category}};function tlt(t){let e=t instanceof Hm?t.type:t;return e==="texture"||e==="video"||e==="displace_map"||e==="matcap"}function Va(t){return{alpha:new vt(t.alpha??1),mode:new Qn(t.mode??0),isMask:new no(t.isMask??!1)}}function nlt(t,e,n,i){switch(t.type){case"color":{let r=new Xi(i.color??5526619),s=Va(i),o=new XF(r,s.alpha),a=new li(o.calpha,"f");return new tr(e,n,t,{color:r,...s},o,s.mode,a,s.isMask)}case"fresnel":{let r=new Xi(i.color??16777215),s=new vt(i.bias??.1),o=new vt(i.scale??1),a=new vt(i.intensity??2),l=new vt(i.factor??1),c=Va(i),d=new Dat(r,s,o,a,l,c.alpha,c.mode,c.isMask),u=new li(d.calpha,"f");return new tr(e,n,t,{color:r,bias:s,scale:o,intensity:a,factor:l,...c},d,c.mode,u,c.isMask)}case"rainbow":{let r=new vt(i.filmThickness??30),s=new vt(i.movement??0),o=new $a(i.wavelengths??new q(0,0,0)),a=new vt(i.noiseStrength??0),l=new vt(i.noiseScale??1),c=new $a(i.offset??new q(0,0,0)),d=Va(i),u=new yhe(r,s,o,a,l,c,d.alpha,d.isMask),h=new li(u.calpha,"f");return new tr(e,n,t,{filmThickness:r,movement:s,wavelengths:o,noiseStrength:a,noiseScale:l,offset:c,...d},u,d.mode,h,d.isMask)}case"transmission":{let r=new vt(i.thickness??10),s=new vt(i.ior??1.5),o=new vt(i.roughness??.5),a=Ot.transmissionSize,l=Ot.transmissionRenderTarget,c=Ot.transmissionRenderTargetDepth,d=window.innerWidth,u=window.innerHeight,h=d>=u?new Ps(u/d,1):new Ps(1,d/u),f=Va(i),p=new _he(r,s,o,a,l,c,h,f.alpha),m=new li(p.calpha,"f");return new tr(e,n,t,{thickness:r,ior:s,roughness:o,aspectRatio:h,...f},p,f.mode,m,f.isMask)}case"toon":{let r=new Qn(i.positioning??0),s;i.colors?s=new Qp(i.colors.length,i.colors):(s=new Qp(10,new sn(0,0,0,1)),s.value[1]=new sn(1,1,1,1));let o;i.steps?o=new Zp(i.steps.length,i.steps):(o=new Zp(10,1),o.value[0]=0);let a=new $a(i.source??new q(0,0,0)),l=new no(i.isWorldSpace??!0),c=new vt(i.noiseStrength??0),d=new vt(i.noiseScale??1),u=new ed(i.shadowColor),h=new $a(i.offset??new q(0,0,0)),f=Va(i),p=new bhe(r,s,o,a,l,c,d,u,h,f.alpha),m=new li(p.calpha,"f");return new tr(e,n,t,{positioning:r,colors:s,steps:o,source:a,isWorldSpace:l,noiseStrength:c,noiseScale:d,shadowColor:u,offset:h,...f},p,f.mode,m,f.isMask)}case"outline":{let r=new Xi(i.outlineColor??16777215),s=new Xi(i.contourColor??16777215),o=new vt(i.outlineWidth??.1),a=new vt(i.contourWidth??.1),l=new vt(i.outlineThreshold??.1),c=new vt(i.contourThreshold??.1),d=new vt(i.outlineSmoothing??.1),u=new vt(i.contourFrequency??.1),h=new $a(i.contourDirection??new q(0,1,0)),f=new no(i.positionalLines??!1),p=new no(i.compensation??!0),m=Ot.normalRenderTarget,g=Ot.normalRenderTargetDepth,v=Ot.pixelRatioNode,y=Ot.resolution,x=Va(i),b=new mhe(r,s,o,a,l,c,d,u,h,f,p,y,m,g,v,x.alpha),w=new li(b.calpha,"f");return new tr(e,n,t,{outlineColor:r,contourColor:s,outlineWidth:o,contourWidth:a,outlineThreshold:l,contourThreshold:c,outlineSmoothing:d,contourFrequency:u,contourDirection:h,positionalLines:f,compensation:p,...x},b,x.mode,w,x.isMask)}case"depth":{let r=new Qn(i.gradientType??0),s=new no(i.smooth??!1),o=new vt(i.near??50),a=new vt(i.far??200),l=new vt(i.isVector??1),c=new vt(i.isWorldSpace??0),d=new $a(i.origin??new q),u=new $a(i.direction??new q),h;i.colors?h=new Qp(i.colors.length,i.colors):(h=new Qp(2,new sn(0,0,0,1)),h.value[1]=new sn(1,1,1,1));let f;i.steps?f=new Zp(i.steps.length,i.steps):(f=new Zp(2,1),f.value[0]=0);let p=Va(i),m=new lhe(r,s,o,a,l,c,d,u,h,f,p.alpha,p.isMask),g=new li(m.calpha,"f");return new tr(e,n,t,{gradientType:r,smooth:s,near:o,far:a,isVector:l,isWorldSpace:c,origin:d,direction:u,colors:h,steps:f,...p},m,p.mode,g,p.isMask)}case"noise":{let r=new vt(i.scale??1),s=new $a(i.size??new q(100,100,100)),o=new vt(i.move??1),a=new Ps(i.fA??new Se(1.7,9.2)),l=new Ps(i.fB??new Se(8.3,2.8)),c=new Ps(i.distortion??new Se(1,1)),d=new ed(i.colorA),u=new ed(i.colorB),h=new ed(i.colorC),f=new ed(i.colorD),p=new Qn(i.noiseType??0),m=new Qn(i.voronoiStyle??0),g=new vt(i.highCut??1),v=new vt(i.lowCut??0),y=new vt(i.smoothness??.5),x=new vt(i.seed??.5),b=new Qn(i.quality??1),w=Va(i),E=new fhe(r,s,o,a,l,c,d,u,h,f,w.alpha,p,w.isMask,m,g,v,y,x,b),A=new li(E.calpha,"f");return new tr(e,n,t,{scale:r,size:s,move:o,fA:a,fB:l,distortion:c,colorA:d,colorB:u,colorC:h,colorD:f,noiseType:p,...w,voronoiStyle:m,highCut:g,lowCut:v,smoothness:y,seed:x,quality:b},E,w.mode,A,w.isMask)}case"normal":{let r=new $a(i.cnormal??new q(1,1,1)),s=Va(i),o=new ohe(r,s.alpha),a=new li(o.calpha,"f");return new tr(e,n,t,{cnormal:r,...s},o,s.mode,a,s.isMask)}case"gradient":{let r=new Qn(i.gradientType??0),s=new no(i.smooth??!1),o;i.colors?o=new Qp(i.colors.length,i.colors):(o=new Qp(10,new sn(0,0,0,1)),o.value[1]=new sn(1,1,1,1));let a;i.steps?a=new Zp(i.steps.length,i.steps):(a=new Zp(10,1),a.value[0]=0);let l=new Ps(i.offset??new Se(0,0)),c=new Ps(i.morph??new Se(0,0)),d=new vt(i.angle??0),u=Va(i),h=new uhe(r,s,o,a,l,c,d,u.alpha,u.isMask),f=new li(h.calpha,"f");return new tr(e,n,t,{gradientType:r,smooth:s,colors:o,steps:a,offset:l,morph:c,angle:d,...u},h,u.mode,f,u.isMask)}case"pattern":{let r=new Qn(i.style??0),s=new Qn(i.projection??0),o=new Qn(["x","y","z"].indexOf(i.axis)??0),a=new vt(i.blending??0),l=new Ps(i.offset??new Se(0,0)),c=new ed(i.colorA),d=new ed(i.colorB),u=new Ps(i.frequency??new Se(10,10)),h=new vt(i.size??.5),f=new vt(i.variation??0),p=new vt(i.smoothness??.5),m=new vt(i.zigzag??0),g=new vt(i.rotation??0),v=new Ps(i.vertical??new Se(0,1)),y=new Ps(i.horizontal??new Se(0,1)),x=new Qn(i.sides??6),b=Va(i),w=new ghe(r,s,o,a,l,c,d,u,h,f,p,m,g,v,y,x,b.alpha,b.isMask),E=new li(w.calpha,"f");return new tr(e,n,t,{style:r,projection:s,axis:o,blending:a,offset:l,colorA:c,colorB:d,frequency:u,size:h,variation:f,smoothness:p,zigzag:m,rotation:g,vertical:v,horizontal:y,sides:x,...b},w,b.mode,E,b.isMask)}default:{let r=new Xi(1,0,0,1),s=Va(i),o=new XF(r,s.alpha),a=new li(o.calpha,"f");return new tr(e,n,t,{color:r,...s},o,s.mode,a,s.isMask)}}}function ilt(t,e,n,i){let r=Uat(n,i);return nlt(n,t,e,r)}function Rhe(t,e,n){if(n.type==="displace"&&(t==="intensity"||t==="visible")){let i=e.uniforms[`f${e.id}_intensity`];return i?(i.value=n.intensity*(n.visible?1:0),i):void 0}if(n.type!=="displace"&&(t==="alpha"||t==="visible")){let i=e.uniforms[`f${e.id}_alpha`];if(!i)return;if(i.value=n.alpha*(n.visible?1:0),n.type==="outline"&&t==="visible"){let r=e.uniforms[`f${e.id}_compensation`];r&&(r.value=n.compensation&&n.visible)}return i}}function W2(t,e){let n=0;for(let i of t.layers){if(i.data.type!=="displace"&&i.data.isMask)return!0;if(i.data.type!=="displace"&&"alpha"in i.data&&i.data.type!=="light"&&i.data.type!=="fresnel"&&i.data.type!=="texture"&&i.data.type!=="matcap"&&i.data.type!=="rainbow"&&i.data.type!=="outline"&&i.data.type!=="pattern"){let r=i.data.visible?i.data.alpha:0;if(r===1&&i.data.type==="depth"||i.data.type==="gradient"){for(let s of i.data.colors)if(s[3]<1){r=s[3];break}}else if(r===1&&i.data.type==="noise"){let s=e.color(i.data.colorA).a,o=e.color(i.data.colorB).a,a=e.color(i.data.colorC).a,l=e.color(i.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(a,l)));c<1&&(r=c)}n+=(1-n)*r}}return n<1}var qf=class extends di{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},rlt=class extends qf{constructor(t,e,n,i){super(),this.flatShading=t,this.side=e,this.wireframe=n,this.root=i}updateAfterBuild(){let t=this.root;this.lights=t.lights,this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.transparent=t.transparent,this.cacheKey=t.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(t,e){this.root.onBeforeCompile(t)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(t,e,n){return this.root.getFlavor(t,e,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(t){return this.root.getLayersOfType(t)}getLayerByUuid(t){return this.root.getLayerByUuid(t)}updateByOp(t,e,n){this.root.updateByOp(t,e,n)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Ohe=class extends qf{constructor(t,e){super(),this.data=t,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(t,e)}get nodeMaterial(){return this}getFlavor(t,e,n){let i=n?6:(t?3:0)+e;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let r=this.flavors[i];return r===void 0&&(r=new rlt(t,e,n,this),this.flavors[i]=r,r.flatShading=t,r.side=e,r.updateAfterBuild()),r}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var t;return((t=this.lightLayer.getNode("occlusion"))==null?void 0:t.value)??!1}reset(t,e){this.data!==t&&this.reset0(t,e)}reset0(t,e){this.data=t;let n=t.layers??va.defaultTwoLayerData("phong").layers;this.layers=n.map(i=>Hm.create(this.layerIdGen++,i.id,i.data,e.shared)),this.layers.reverse(),this.name=t.name??"Untitled Material",this.onUpdate(),this.transparent=W2(t,e.shared)}getLayersOfType(t){return this.layers.filter(e=>e.type===t)}getLayerByUuid(t){return this.layers.find(e=>e.uuid===t)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof Gh),this.lightLayer===void 0&&(this.lightLayer=new Gh(0,"",{...el.defaultData("light","phong"),visible:!1},new Mhe,{})),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(t,e,n){var i,r,s,o;if(e!==void 0?this.data=e:e=this.data,this.transparent=W2(e,n.shared),t.path[0]==="layers"){this.data=e;let a=n.shared,l=t.path[1];if(l===void 0){if(this.layers.reverse(),t.type===4){let c=Hm.create(this.layerIdGen++,t.id,t.data,n.shared);this.layers.splice(t.localIndex,0,c),(i=n.scene)==null||i.markNeedsUpdateRendererDirty()}else if(t.type===5)this.layers.splice(t.localIndex,1)[0].dispose(),(r=n.scene)==null||r.markNeedsUpdateRendererDirty();else if(t.type===6){let c=this.layers.findIndex(u=>u.uuid===t.id),d=this.layers[c];this.layers.splice(c,1),this.layers.splice(t.localIndex,0,d),(s=n.scene)==null||s.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{t.type===0&&t.props.occlusion!==void 0&&((o=n.scene)==null||o.markNeedsUpdateRendererDirty());let c=this.layers.find(d=>d.uuid===l);if(c){let d=e.layers.data(l);if(c.updateByOp({...t,path:t.path.slice(2)},d,n)){let u=Hm.create(this.layerIdGen++,l,d,a);this.layers.splice(this.layers.findIndex(h=>h.uuid===l),1,u),this.onUpdate()}}}}else this.reset(e,n)}applyMasks(){for(let t=0;t<this.layers.length;++t){let e=this.layers[t];e instanceof tr?e.color.mask=void 0:e instanceof Gh&&(e.node.mask=void 0)}for(let t=0;t<this.layers.length;++t){let e=this.layers[t];if(e instanceof tr&&e.isMask.value&&e.data.visible&&t>0){let n=t-1,i=this.layers[n];i instanceof Gh?i.node.mask=new bo(e.color,e.alpha,bo.MUL):i instanceof tr&&(i.isMask.value||(i.color.mask=new bo(e.color,e.alpha,bo.MUL)))}}}blendColors(){let t=this.layers.findIndex(n=>n instanceof tr),e=this.layers.findIndex(n=>n instanceof Gh);if(t!==-1&&t<e){let n=this.layers[t].color;for(let i=t+1;i<e;++i){let r=this.layers[i];if(r instanceof tr){if(r.isMask.value)continue;n=new RQ(n,r.color,r.alpha,r.mode)}}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let t=new li("outgoingLight","f"),e=this.layers.findIndex(n=>n instanceof Gh);if(this.layers.length>e+1){for(let n=e+1;n<this.layers.length;++n){let i=this.layers[n];if(i instanceof tr){if(i.isMask.value)continue;t=new RQ(t,i.color,i.alpha,i.mode)}}this.fragment.afterColor=t}else this.fragment.afterColor=void 0}blendPositions(){let t=this.layers.filter(e=>e instanceof Dhe);if(t.length>0){let e=t[0].position;for(let n=1;n<t.length;++n)t[n]&&(e=new bo(e,t[n].position,bo.ADD),e=new bo(e,new vt(.5).setReadonly(!0),bo.MUL));this.fragment.position=e}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(t){this.build(),t.defines=this.defines,t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.extensionDerivatives=this.extensions.derivatives===!0,t.extensionFragDepth=this.extensions.fragDepth===!0,t.extensionDrawBuffers=this.extensions.drawBuffers===!0,t.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(t,e){let n=(i,r,s)=>Math.min(Math.max(i,r),s);for(let i of this.layers)if(i.type==="displace"){let r=n(i.uniforms[`f${i.id}_intensity`].value,t,e);i.uniforms[`f${i.id}_intensity`].value=r}}computeCacheKey(){let t="[";for(let{data:e}of this.data.layers)if(e.type==="light")t+=`"${e.visible?e.category.toUpperCase():"Basic"}"`;else{let n=(The[e.type]??[]).map(s=>e[s]),i=(Che[e.type]??[]).map(s=>{var o;return((o=e[s])==null?void 0:o.length)??0}),r=[...n,...i];r.length?t+=`["${e.type}", "${r.join('","')}"],`:t+=`"${e.type}",`}return t=t.slice(0,-1)+"]",t}updateFrame(t){for(let e=0;e<this.updaters.length;++e)t.updateNode(this.updaters[e])}build(){let t=new Tat;t.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,t.build(this.fragment,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters;for(let e of this.flavors)e&&e.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(t=>t.dispose()),super.dispose();for(let t of this.flavors)t&&t.dispose()}assetsLoaded(){for(let t of this.layers)if(t instanceof tr){let e=t.params.texture;if(e instanceof $F&&!e.image.loaded)return!1}return!0}getHash(){let t="{";return t+='"fragment":'+this.fragment.getHash(),t+="}",t}};Object.defineProperties(qf.prototype,{properties:{get:function(){return this.fragment.properties}}});var KF=class extends Ohe{},slt=CS(bWe()),OQ=new Map;function olt(t){if(typeof t=="string")return t;let e=OQ.get(t);return e||(e={url:URL.createObjectURL(new Blob([t]))},OQ.set(t,e)),e.url}var Fb=class{constructor({src:t,volume:e,delay:n,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let r;typeof t=="string"?r={src:t}:r={src:olt(t),format:"wav"},this.sound=new slt.Howl(r),this.sound.on("end",this.onEnd),this.src=t,e!==void 0&&(this.volume=e),n!==void 0&&(this.delay=n),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(t){this._volume=t,this.sound.volume(t)}get loop(){return this._loop}set loop(t){this._loop=t,this.loopsRemaining=t}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(t,e=1e3){t?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,e),this.clearFade()},t)):this.sound.fade(this._volume,0,e)}on(t,e,n){this.sound.on(t,e,n)}off(t,e,n){this.sound.off(t,e,n)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(t=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},alt=class{constructor(){this.type="ShapePath",this.color=new Lt,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new d2,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){var n;return(n=this.currentPath)==null||n.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){var r;return(r=this.currentPath)==null||r.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,s){var o;return(o=this.currentPath)==null||o.bezierCurveTo(t,e,n,i,r,s),this}splineThru(t){var e;return(e=this.currentPath)==null||e.splineThru(t),this}toShapes(){let t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},e={loc:t.ORIGIN,t:0};function n(f,p,m,g){let v=f.x,y=p.x,x=m.x,b=g.x,w=f.y,E=p.y,A=m.y,S=g.y,C=(b-x)*(w-A)-(S-A)*(v-x),T=(y-v)*(w-A)-(E-w)*(v-x),P=(S-A)*(y-v)-(b-x)*(E-w),R=C/P,L=T/P;if(P===0&&C!==0||R<=0||R>=1||L<0||L>1)return null;if(C===0&&P===0){for(let O=0;O<2;O++)if(i(O===0?m:g,f,p),e.loc===t.ORIGIN){let B=O===0?m:g;return{x:B.x,y:B.y,t:e.t}}else if(e.loc===t.BETWEEN){let B=+(v+e.t*(y-v)).toPrecision(10),$=+(w+e.t*(E-w)).toPrecision(10);return{x:B,y:$,t:e.t}}return null}else{for(let $=0;$<2;$++)if(i($===0?m:g,f,p),e.loc===t.ORIGIN){let X=$===0?m:g;return{x:X.x,y:X.y,t:e.t}}let O=+(v+R*(y-v)).toPrecision(10),B=+(w+R*(E-w)).toPrecision(10);return{x:O,y:B,t:R}}}function i(f,p,m){let g=m.x-p.x,v=m.y-p.y,y=f.x-p.x,x=f.y-p.y,b=g*x-y*v;if(f.x===p.x&&f.y===p.y){e.loc=t.ORIGIN,e.t=0;return}if(f.x===m.x&&f.y===m.y){e.loc=t.DESTINATION,e.t=1;return}if(b<-Number.EPSILON){e.loc=t.LEFT;return}if(b>Number.EPSILON){e.loc=t.RIGHT;return}if(g*y<0||v*x<0){e.loc=t.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(y*y+x*x)){e.loc=t.BEYOND;return}let w;g!==0?w=y/g:w=x/v,e.loc=t.BETWEEN,e.t=w}function r(f,p){let m=[],g=[];for(let v=1;v<f.length;v++){let y=f[v-1],x=f[v];for(let b=1;b<p.length;b++){let w=p[b-1],E=p[b],A=n(y,x,w,E);A!==null&&m.find(S=>S.t<=A.t+Number.EPSILON&&S.t>=A.t-Number.EPSILON)===void 0&&(m.push(A),g.push(new Se(A.x,A.y)))}}return g}function s(f,p,m){let g=new Se;p.getCenter(g);let v=[];return m.forEach(y=>{y.boundingBox.containsPoint(g)&&r(f,y.points).forEach(x=>{v.push({identifier:y.identifier,isCW:y.isCW,point:x})})}),v.sort((y,x)=>y.point.x-x.point.x),v}function o(f,p,m,g,v){(v==null||v==="")&&(v="nonzero");let y=new Se;f.boundingBox.getCenter(y);let x=[new Se(m,y.y),new Se(g,y.y)],b=s(x,f.boundingBox,p);b.sort((T,P)=>T.point.x-P.point.x);let w=[],E=[];b.forEach(T=>{T.identifier===f.identifier?w.push(T):E.push(T)});let A=w[0].point.x,S=[],C=0;for(;C<E.length&&E[C].point.x<A;)S.length>0&&S[S.length-1]===E[C].identifier?S.pop():S.push(E[C].identifier),C++;if(S.push(f.identifier),v==="evenodd"){let T=S.length%2===0,P=S[S.length-2];return{identifier:f.identifier,isHole:T,for:P}}else if(v==="nonzero"){let T=!0,P=null,R=null;for(let L=0;L<S.length;L++){let O=S[L];p[O]&&(T?(R=p[O].isCW,T=!1,P=O):R!==p[O].isCW&&(R=p[O].isCW,T=!0))}return{identifier:f.identifier,isHole:T,for:P}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let a=0,l=999999999,c=-999999999,d=[];this.subPaths.forEach(f=>{let p=f.getPoints(),m=-999999999,g=999999999,v=-999999999,y=999999999;for(let x=0;x<p.length;x++){let b=p[x];b.y>m&&(m=b.y),b.y<g&&(g=b.y),b.x>v&&(v=b.x),b.x<y&&(y=b.x)}c<=v&&(c=v+1),l>=y&&(l=y-1),p.length&&d.push({curves:f.curves,points:p,isCW:$ce.isClockWise(p),identifier:a++,boundingBox:new mYe(new Se(y,g),new Se(v,m))})});let u=d.map(f=>{var p;return o(f,d,l,c,(p=this.userData)==null?void 0:p.style.fillRule)}),h=[];return d.forEach(f=>{let p=u[f.identifier];if(p&&!p.isHole){let m=new h2;m.curves=f.curves,u.filter(g=>(g==null?void 0:g.isHole)&&g.for===f.identifier).forEach(g=>{if(g){let v=d[g.identifier],y=new d2;y.curves=v.curves,m.holes.push(y)}}),h.push(m)}}),h}},Lhe,LQ=new Promise(t=>{Lhe=t}),IQ=!1;async function llt(){if(IQ)return;let t=await TS(()=>import("./opentype-b9a672c1.js"),[]);Lhe(t),IQ=!0}var clt=class{async load(t,e,n=()=>{}){let{load:i}=await LQ;i(t,(r,s)=>{r||!s?n(r??"Something went wrong"):e(s)})}async parse(t){let{parse:e,Bidi:n}=await LQ;try{let i=e(t),r=new n,s=o=>i.charToGlyphIndex(o.char);return r.registerModifier("glyphIndex",null,s),r.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:r}}catch(i){console.error(i)}}};async function ult(t){return await(await fetch(t)).arrayBuffer()}var dlt=new clt;async function kQ(t){let e,n,i=!1;if(t.url?(e=await ult(t.url),n=t.url,i=t.url.startsWith("/")):t.data&&(e=t.data.buffer),e){let r=await dlt.parse(e);if(r)return{font:r.font,url:n,intercepted:i,arr:e,bidi:r.bidi}}}function hlt(t,e){return e.state.glyphIndex===t||e.state.fina===t||e.state.medi===t||e.state.init===t}var flt=class{constructor(t){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=t.isUserFont??!1,this._loadingPromise=kQ(t).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}update(t){this._isLoaded=!1,this._isUserFont=t.isUserFont??!1,this._loadingPromise=kQ(t).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(t,e,n){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(e);let r=i.tokenizer.tokens,s=[],o=0,a=n.length===r.length;for(let l=0;l<n.length;l++){let c=n[l].index,d=String.fromCharCode(n[l].unicode),u=r[o];if(hlt(c,u)||a)s.push({char:d,index:c,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),o++;else{let h=u.char,f="",p=[u.state.glyphIndex],m=[],g=!1;for(;!g;)o++,f=e.charAt(o),h+=f,p.push(t.charToGlyphIndex(f)),m=t.stringToGlyphs(h),m.length===1&&m[0].index===c&&(g=!0),o>e.length&&(g=!0);s.push({char:d,index:c,replacements:p,replacementChars:Array.from(h)}),o++}}return s}generateShapes(t,e){if(!this._isLoaded)return;let n=this.font,i=e.fontSize/this.unitsPerEm,r=e.fontSize*e.lineHeight,s=t.map(v=>this.getTextWidth(v,e)),o=e.width,a=this.getCharWidth(`
`,e),l=e.horizontalAlign===1?a:0,c=this.computeSpaceWidthForLine(t,0,e),d=this.getLineInitialOffsetX(s[0],o,e.horizontalAlign,t[0],a),u=this.getLineInitialOffsetY(r,t.length,e.height,i,e.verticalAlign),h=[],f=t.map(v=>[]),p=t.map(v=>[]),m;for(let v=0;v<t.length;v++){let y=t[v],x={features:{liga:!0}},b=[];try{b=n.stringToGlyphs(y,x)}catch(E){console.warn(E)}d=this.getLineInitialOffsetX(s[v],o,e.horizontalAlign,y,a);let w=[];try{w=this.reverseLigaturesTable(n,y,b)}catch(E){console.warn(E)}c=this.computeSpaceWidthForLine(t,v,e);for(let E=0;E<b.length;E++){let A=b[E],S=A.index===0?`
`:A.unicode?String.fromCharCode(A.unicode):void 0,C=w[E],T=0,P=0;E===0&&e.horizontalAlign===2&&A.leftSideBearing!==void 0&&(P=-A.leftSideBearing*i),m&&(T=n.getKerningValue(A,m)*i),d+=P+T;let R=0;if(S===`
`)R=l;else if(S===" ")R=c;else{let L=this.createPath(A,i,d,u,e);L&&(R=L.offsetX-(T+P),h.push(L.path))}if(C.replacements.length===1)p[v].push([d,u]),f[v].push(R);else{let L=C.replacements.map(X=>(n.glyphs.get(X).advanceWidth??0)*i),O=L.reduce((X,H)=>X+=H,0),B=L.map(X=>X/O),$=d;for(let X=0;X<B.length;X++){let H=R*B[X];p[v].push([$,u]),f[v].push(H),$+=H}}d+=R,m=A}u-=r}let g=[];for(let v=0,y=h.length;v<y;v++)g.push(...h[v].toShapes());return{shapes:g,charWidths:f,lineWidths:s,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var t;return((t=this.font)==null?void 0:t.ascender)??0}get descender(){var t;return((t=this.font)==null?void 0:t.descender)??0}get familyName(){var t;return((t=this.font)==null?void 0:t.names.fontFamily)??""}get subfamilyName(){var t;return((t=this.font)==null?void 0:t.names.fontSubfamily)??""}get unitsPerEm(){var t;return((t=this.font)==null?void 0:t.unitsPerEm)??1}getLineInitialOffsetX(t,e,n,i,r){return(n===3||n===2)&&i.indexOf(`
`)>=0&&(t-=r),n===3?e*.5-t*.5:n===2?e-t:0}getLineInitialOffsetY(t,e,n,i,r){let s=e*t,o=Math.abs(this.ascender-this.descender)*i,a=t-o,l=-this.ascender*i-a/2;return r===3?-(n-s-l):r===2?-(n*.5-s*.5-l):l}createPath(t,e,n,i,r){var l;let s=t.getPath(n,-i,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+this.familyName+".");return}let o=new alt,a=(t.advanceWidth??1)*e;if(t)for(let c of s.commands){let d=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(d&&c.type!=="Z"&&d.x===c.x&&-d.y===c.y))switch(c.type){case"M":o.moveTo(c.x,-c.y);break;case"L":o.lineTo(c.x,-c.y);break;case"Q":o.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":o.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return o.subPaths.forEach(c=>{let d=plt(c.curves);d!==void 0&&c.currentPoint.distanceTo(d)>0&&c.lineTo(d.x,d.y)}),{offsetX:a+r.fontSize*r.letterSpacing,path:o}}getCharWidth(t,e){var n;return((n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}getTextWidth(t,e){var n;return((n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}computeSpaceWidthForLine(t,e,n){let i=this.getCharWidth(" ",n),r=t[e];if(r){let s=this.countSpaces(r.trimEnd());if(n.horizontalAlign===4&&e<t.length-1&&s){let o=n.width,a=this.getTextWidth(r,n);return(o-(a-s*i))/s}}return i}countSpaces(t){return(t.match(/ /g)||[]).length}};function plt(t){if(t.length){let e=t[0];if(e instanceof nc)return e.v1;if(e instanceof Xl||e instanceof Gf)return e.v0}}var mlt=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(t){return this.objects.get(t)}get size(){return this.objects.size}get(t,e){let n=this.objects.get(t);return n===void 0?(n=this.createObject(t,e),this.objects.set(t,n)):n.isShared=!0,n}mutateIfUnique(t,e){let n=this.objects.get(t);if(n&&n.isShared!==!0)return this.objects.delete(t),this.objects.set(e,n),n}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(t,e){let n=this.objects.get(t);e===n&&this.unreachable.delete(t)}endGc(){this.unreachable.forEach(t=>{this.disposeObject(this.objects.get(t)),this.objects.delete(t)}),this.unreachable.clear()}dispose(){this.objects.forEach(t=>{this.disposeObject(t)}),this.objects.clear()}},NQ=class extends mlt{constructor(t){super(),this.flatShading=t}disposeObject(t){t.dispose()}createObject(t,e){let n=j2(t,e,this.flatShading);return n.computeBoundingSphere(),n}},glt={find(t){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(t){},addPendingUpdateCloner(t){},addPendingCommand(t){}},vlt=class extends Fat{constructor(t){super(),this.shared=t}create(t){return new Ahe(t,this.shared)}},YH=class{constructor(t,e={}){if(this.geometryCache=new NQ(!0),this.geometryCache2=new NQ(!1),this.imageHolderCache=new vlt(this),this.thisContext={scene:glt,shared:this},this.deletedMaterial=new KF(va.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new Sm(B2.emptyImage,this),this.deletedVideo=new Sm(P2.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},e.images)for(let[n,i]of Object.entries(e.images))this.addImage(n,i);if(e.videos)for(let[n,i]of Object.entries(e.videos))this.addVideo(n,i);if(e.audios)for(let[n,i]of Object.entries(e.audios))this.addAudio(n,i.data);this.reset(t)}setRequestRender(t){this._requestRender=t}reset(t){for(let[e,n]of Object.entries(t.images))this.addImage(e,n);for(let[e,n]of Object.entries(t.videos))this.addVideo(e,n);for(let[e,n]of Object.entries(t.colors))this.addColor(e,n);for(let[e,n]of Object.entries(t.materials))this.addMaterial(e,new KF(n,this.thisContext));for(let[e,n]of Object.entries(t.audios))this.addAudio(e,n.data);for(let[e,n]of Object.entries(t.fonts))this.addFont(e,n);this.penumbraSize=t.penumbraSize}addMaterial(t,e){e.uuid=t,this.materials[t]?(this.materials[t].reset(e.data,this.thisContext),e.dispose()):this.materials[t]=e}deleteMaterial(t){this.materials[t]&&(this.materials[t].nodeMaterialDispose(),delete this.materials[t])}getMaterial(t){return this.materials[t]}getMaterialOrDeletedPlaceholder(t){return this.materials[t]??this.deletedMaterial}material(t){return typeof t=="string"?this.getMaterialOrDeletedPlaceholder(t):new Ohe(t,this.thisContext)}getMaterials(){return this.materials}addImage(t,e){return this.images[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[t].updateSrc(e.data),!0):(this.images[t]=new Sm(e,this),!1)}deleteImage(t){let e=this.images[t];e&&(e.dispose(),delete this.images[t])}getDefaultImage(){return this.images.image_0}getImage(t){return this.images[t]??this.deletedImage}image(t){return typeof t=="string"?this.getImage(t):this.imageHolderCache.load(t)}addVideo(t,e){return this.videos[t]?(this.videos[t].updateSrc(e.data),!0):(this.videos[t]=new Sm(e,this),!1)}deleteVideo(t){let e=this.videos[t];e&&(e.dispose(),delete this.videos[t])}getVideo(t){return this.videos[t]??this.deletedVideo}video(t){return typeof t=="string"?this.getVideo(t):this.imageHolderCache.load(t)}addColor(t,e){return this.colors[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in e?this.colors[t].setRGBA(e.r,e.g,e.b,e.a):this.colors[t].setRGBA(e.r,e.g,e.b,1),!0):("a"in e?this.colors[t]=new G2(e.r,e.g,e.b,e.a):this.colors[t]=new G2(e.r,e.g,e.b,1),!1)}updateColor(t,e){if(this.colors[t]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let n=this.colors[t];return this.colors[t].r=e.r??n.r,this.colors[t].g=e.g??n.g,this.colors[t].b=e.b??n.b,this.colors[t].a=e.a??n.a,!0}return!1}deleteColor(t){this.colors[t]&&delete this.colors[t]}getColor(t){return this.colors[t]}color(t){let e;if(typeof t=="string"){let n=this.getColor(t);n?e=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),e=new zo(0,0,0,0))}else return"a"in t?new zo(t.r,t.g,t.b,t.a):new zo(t.r,t.g,t.b,1);return e}addAudio(t,e){this.audios[t]=e}getAudio(t){let e=this.audios[t];if(e instanceof Fb)return e;{let n=new Fb({src:e});return this.audios[t]=n,n}}deleteAudio(t){let e=this.audios[t];e&&(e instanceof Fb&&e.dispose(),delete this.audios[t])}addFont(t,e){this.fonts[t]=new flt(e),this.fonts[t].loadingPromise.then(()=>this.requestRender())}getFont(t){return this.fonts[t]}deleteFont(t){this.fonts[t]&&delete this.fonts[t]}dispose(){Object.keys(this.materials).forEach(t=>this.deleteMaterial(t)),this._requestRender=void 0,Object.values(this.audios).forEach(t=>{t instanceof Fb&&t.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}};new YH(IF.emptyData());var kS=class extends Ho{updateByPatchedOp(t,e,n){if(super.updateByPatchedOp(t,e,n),crt(t.path,["materials"])!==null&&t.type===0&&Array.isArray(this.material))for(let[i,r]of Object.entries(t.props)){let s=n.shared.material(r);this.material[Number(i)]=s}else if(Xh(t.path,["material"])&&this.material instanceof qf)"material"in e&&typeof e.material!="string"&&this.material.updateByOp(da.drop(t,1),e.material,n);else if(Xh(t.path,["materials","*"])&&Array.isArray(this.material)){let i=t.path[1];if("materials"in e&&i<this.material.length){let r=e.materials[i];typeof r!="string"&&this.material[i].updateByOp(da.drop(t,2),r,n)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(t,e){var i,r,s,o,a;super.updateState(t,e),t.castShadow!==void 0&&(this.castShadow=t.castShadow),t.receiveShadow!==void 0&&(this.receiveShadow=t.receiveShadow);let n=this.dataPatched;if(((i=t.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=e.shared.material(t.material).getFlavor(n.flatShading,n.side,n.wireframe),(r=e.scene)==null||r.markNeedsUpdateRendererDirty()),((s=t.geometry)==null?void 0:s.type)==="NonParametricGeometry"&&("materials"in t&&t.materials!==void 0?(this.disposeMaterial(),this.material=t.materials.map(l=>e.shared.material(l).getFlavor(n.flatShading,n.side,n.wireframe)),(o=e.scene)==null||o.markNeedsUpdateRendererDirty()):"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=[e.shared.material(t.material).getFlavor(n.flatShading,n.side,n.wireframe)],(a=e.scene)==null||a.markNeedsUpdateRendererDirty())),t.flatShading!==void 0||t.wireframe!==void 0||t.side!==void 0)if(Array.isArray(this.material))for(let l=0;l<this.material.length;l++)this.material[l]=this.material[l].getFlavor(n.flatShading,n.side,n.wireframe);else this.material=this.material.getFlavor(n.flatShading,n.side,n.wireframe)}disposeMaterial(){this.material&&Nue(this.material).forEach(t=>{t instanceof qf&&(t instanceof KF||t.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},yl=class extends kS{constructor(e,n,i){super(e,n),this.data=n,this.localGeometry=void 0}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Ut&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof YH){let e=this.geometryCreateDeleyed,n=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=n.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return O2.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return O2.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,n,i){super.updateByPatchedOp(e,n,i),Xh(e.path,["geometry"])&&this.updateByPatchedOpGeometry(da.drop(e,1),n.geometry,i)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,n){var r;this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if(i==="NonParametricGeometry"||i==="SubdivGeometry"){let s=e;if(this.localGeometry===void 0){let d={...this.data.geometry,...s};this.localGeometry=j2(d,n,this.data.flatShading)}let o,a,l;s.scaleBaked?[o,a,l]=s.scaleBaked:{width:o,height:a,depth:l}=s;let c=this.localGeometry.userData;c.sxPrev!==void 0&&WF(this.localGeometry.attributes,o/c.sxPrev,a/c.syPrev,l/c.szPrev),c.sxPrev=o,c.syPrev=a,c.szPrev=l}else{let s={...this.data.geometry,...e};(r=this.localGeometry)==null||r.dispose(),this.localGeometry=j2(s,n,this.data.flatShading)}}refreshAttachedCloners(e){for(let n of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(n.object)}refreshAttachedPaths(e){for(let n of this.attachedPaths)e.scene.addPendingCommand(()=>n.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,n,i){var s;let r=!1;e.type===0&&e.path.length===0&&AH(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof to&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,n)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(n,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),r||((s=i.scene)==null||s.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,n){this.createGeometryDelayed(n)}updateState(e,n){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,n),super.updateState(e,n)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,n){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),n.set(i.width,i.height,i.depth??0).multiplyScalar(.5)):e.setScalar(0),n.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}};function ylt(t){var o,a;if(t.geometry.attributes.extrudeNormal||!t.geometry.attributes.position||!t.geometry.attributes.normal)return;let e=new Map,n=t.geometry.attributes,i=n.position.array,r=n.normal.array,s=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,d=new q(r[l],r[l+1],r[l+2]);e.has(c)?(o=e.get(c))==null||o.normals.push(d):e.set(c,{normals:[d],result:new q})}e.forEach((l,c)=>{for(let d of l.normals)l.result.add(d);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,d=(a=e.get(c))==null?void 0:a.result;d&&(s[l]=d.x,s[l+1]=d.y,s[l+2]=d.z)}t.geometry.setAttribute("extrudeNormal",new xt(s,3))}function xlt(t){if(t.geometry.attributes.extrudeNormals||!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=new q;for(let r=0;r<e.length;r+=3)i.set(e[r],e[r+1],e[r+2]).normalize(),n[r]=i.x,n[r+1]=i.y,n[r+2]=i.z;t.geometry.setAttribute("extrudeNormal",new xt(n,3))}function KH(t){if(Array.isArray(t.material)){for(let e of t.material)if(e.getLayersOfType("outline").length===0)return}else if(!(t.material instanceof qf)||t.material.getLayersOfType("outline").length===0)return;t instanceof yl&&t.is2DAndNoDepth?xlt(t):ylt(t)}function ZH(t){if(!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=parseInt(t.uuid.replace(/\D/g,"")),r=[pn.seededRandom(i),pn.seededRandom(i+1e4),pn.seededRandom(i+2e4)];for(let s=0;s<e.length;s++)n[s]=r[s%3];t.geometry.setAttribute("randomColor",new Wt(n,3))}GH.then(t=>{});var Cc=new _r,cb=new q;function blt(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(e=!0)}),e}var U_=class extends yl{constructor(t,e,n){super(t,e,n),this.data=e,this.hiddenMatrixOld=new tt,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(t){return this.dataPatched.flatShading?t.geometryCache:t.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(t,e){let n=this.geometry.userData.parameters;t.copy(this.originalGeometryNew.boundingSphere.center),e.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}createGeometryByControls(t){var s,o,a;if(this.skipReactionUpdate===!0)return;let e=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:n,subdividedGeometry:i,subdivPointer:r}=to.build(t,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=r,n!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=n),i!==void 0&&((a=this.subdividedGeometry)==null||a.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,KH(this),ZH(this),this.calcBoundingBox(),e&&(this.localGeometry.uuid=e)}updateState(t,e){if(super.updateState(t,e),t.flatShading!==void 0){let n=this.material;this.material=n.getFlavor(!1,n.side,n.wireframe),this.smoothShading=!t.flatShading,this.createGeometryDelayed(e)}}updateMesh(t=!1){to.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&to.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=to.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=to.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(t,e){let n=this.localGeometry;this.localGeometry=this.originalGeometryNew,Ho.prototype.raycast.call(this,t,e),this.localGeometry=n}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new gl,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let e=t.attributes.position,n=t.boundingSphere.center;Cc.setFromBufferAttribute(e),Cc.getCenter(n),t.boundingSphere.radius=n.distanceTo(Cc.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Cc.getSize(cb),this.hasNonUniformScale&&cb.divide(this.scale);let i={width:cb.x,height:cb.y,depth:cb.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(t){let e=this.originalGeometry;Cc.min.set(t[0],t[2],t[4]),Cc.max.set(t[1],t[3],t[5]),this.hasNonUniformScale&&(Cc.min.applyMatrix4(this.shearScaleInv),Cc.max.applyMatrix4(this.shearScaleInv)),e.boundingSphere===null&&(e.boundingSphere=new gl);let n=e.boundingSphere.center;Cc.getCenter(n),e.boundingSphere.radius=n.distanceTo(Cc.max)}freeSubdivPointer(){var t,e;this.subdivPointer&&(to.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(t=this.originalGeometry)==null||t.dispose(),(e=this.subdividedGeometry)==null||e.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(t,e,n){super.updateByPatchedOpGeometry(t,e,n),this.localGeometry&&this.createGeometryByControls(e)}},BQ=-1,wlt=1,_lt={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Slt={polygon_center:0,edge:1,vertex:2},YA=(t,e)=>(n,i)=>!e||n===0||t===0?0:t*i/100,Kt=(t,e)=>{let n=Math.abs(e),i=n*-1;return(t-BQ)*(n-i)/(wlt-BQ)+i};function Elt(t){let e=[],n={};for(var i=0,r=t.length;i<r;i++){var s=JSON.stringify(t[i].pos.map(o=>Math.round(o*1e4)/1e4));n[s]||(e.push(t[i]),n[s]=!0)}return e}var Mlt=new q,KA=new q,Alt=new q,Tlt=new q;function oy(t,e){let n=Alt.fromArray(t),i=Tlt.fromArray(e);KA.copy(i).sub(n);let r=KA.length();return KA.normalize().multiplyScalar(r*.5),Mlt.copy(n).add(KA).toArray()}var tl=new Eo,ZA=new q,q2=new q,am=new q;function Clt(t){let e=[];for(let n=0;n<=t.index.count;n++)if(ZA.fromArray(t.index.array,n*3),tl.setFromAttributeAndIndices(t.attributes.position,ZA.x,ZA.y,ZA.z),tl.getNormal(q2),tl.getMidpoint(am),!(isNaN(am.x)||isNaN(am.y)||isNaN(am.z))){let{a:i,b:r,c:s}=tl,o=i.toArray(),a=r.toArray(),l=s.toArray(),c=i.distanceTo(r),d=r.distanceTo(s),u=s.distanceTo(i),h=oy(o,a),f=oy(a,l),p=oy(l,o),m=[c,d,u],g=Math.max(...m),v=m.filter(b=>Math.round(b)===Math.round(g)).length>1,y=[],x=tl.getMidpoint(am).toArray();g===c&&!v&&(y=[f,p,p],x=h),g===d&&!v&&(y=[h,p,p],x=f),g===u&&!v&&(y=[h,f,f],x=p),v&&(y=[h,f,p]),e.push({vertices:[o,a,l],faceCenters:y,midpoint:x,norm:tl.getNormal(q2).toArray()})}return e}function Plt(t){let e=[],{position:n}=t.attributes;for(let i=0;i<n.count;i++){tl.setFromAttributeAndIndices(n,i*3,i*3+1,i*3+2),tl.getNormal(q2),tl.getMidpoint(am);let r=tl.a.toArray(),s=tl.b.toArray(),o=tl.c.toArray();e.push({vertices:[r,s,o],faceCenters:[oy(r,s),oy(s,o),oy(o,r)],midpoint:am.toArray(),norm:q2.toArray()})}return e}var Dlt=4,Rlt=.5,yk=t=>.5*(1-Math.cos(t*Math.PI)),Olt=class{constructor(){this.perlin=new Array(4095+1)}noise(t,e=0,n=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),n<0&&(n=-n);let i=Math.floor(t),r=Math.floor(e),s=Math.floor(n),o=t-i,a=e-r,l=n-s,c,d,u=0,h=.5,f,p,m;for(let g=0;g<Dlt;g++){let v=i+(r<<4)+(s<<8);c=yk(o),d=yk(a),f=this.perlin[v&4095],f+=c*(this.perlin[v+1&4095]-f),p=this.perlin[v+16&4095],p+=c*(this.perlin[v+16+1&4095]-p),f+=d*(p-f),v+=256,p=this.perlin[v&4095],p+=c*(this.perlin[v+1&4095]-p),m=this.perlin[v+16&4095],m+=c*(this.perlin[v+16+1&4095]-m),p+=d*(m-p),f+=yk(l)*(p-f),u+=f*h,h*=Rlt,i<<=1,o*=2,r<<=1,a*=2,s<<=1,l*=2,o>=1&&(i++,o--),a>=1&&(r++,a--),l>=1&&(s++,l--)}return u}noiseSeed(t){let e=(()=>{let n,i;return{setSeed(r){i=n=(r??Math.random()*4294967296)>>>0},getSeed(){return n},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();e.setSeed(t),this.perlin=new Array(4095+1);for(let n=0;n<4095+1;n++)this.perlin[n]=e.rand()}},Llt=Olt,zQ=new q,FQ=new tt,UQ=new Tx;function VQ(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="TextGeometry"&&(e=!0)}),e}var Ihe=class extends yl{constructor(t,e,n){super(t,e,n),this.data=e}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var e;let t=this.dataPatched;return((e=this.font)==null?void 0:e.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,t.geometry.height,this.fontScale,t.geometry.verticalAlign))??0}get fontScale(){let t=this.dataPatched;return this.font?t.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var t;return(((t=this.font)==null?void 0:t.ascender)??1)*this.fontScale}get descender(){var t;return(((t=this.font)==null?void 0:t.descender)??1)*this.fontScale}get lineHeight(){let t=this.dataPatched;return t.geometry.fontSize*t.geometry.lineHeight}raycast(t,e){let{matrixWorld:n}=this;if(!(isNaN(t.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(FQ.copy(n).invert(),UQ.copy(t.ray).applyMatrix4(FQ),UQ.intersectBox(this.singleBBox,zQ))){let i=zQ.applyMatrix4(n),r=t.ray.origin.distanceTo(i);e.push({distance:r,point:i.clone(),object:this})}}},Ys=1e-4,Pc,khe,Nhe,Bhe,HQ=new q,jQ=new q;GH.then(t=>{Pc=t,khe=[Pc.get_face_center,Pc.get_edge_midpoint,Pc.get_vertex_position],Nhe=[Pc.get_face_normal,Pc.get_edge_normal,Pc.get_vertex_normal],Bhe=[Pc.face_count,Pc.edge_count,Pc.vertex_count]});var Ilt=new tt,klt=new tt,Ph=new q,Ip=new q,ub=new q,xk=new q,Nlt=new q,Blt=new q,Wu=new Llt,Kl=class extends zH(ei){constructor(e,n){super(),this.parameters=n,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let n of this.children)n instanceof io&&n.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(n=>{n instanceof io&&n.object===e&&(n.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let n;if(e!==void 0?n=e:n=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(n=0),this.parameters.type==="toObject"&&this.objectForSample){for(let r=0,s=this.children.length;r<s;++r)this.remove(this.children[0]);let i=this.children;if(i.length===n)return;if(i.length<n)for(let r=0,s=n-i.length;r<s;++r){let o=new io(this.object);o.expand(),this.add(o)}else for(let r=0,s=i.length-n;r<s;++r)this.remove(i[r])}else{if(this.children.length===n)return;if(this.children.length<n)for(let i=0,r=n-this.children.length;i<r;++i){let s=new io(this.object);s.expand(),this.add(s)}else for(let i=0,r=this.children.length-n;i<r;++i)this.remove(this.children[0])}}_updateRadial(e){let n=e.radial,i=n.start*pn.DEG2RAD,r=n.end*pn.DEG2RAD,s=i-r,o=new ls(n.rotation[0],n.rotation[1],n.rotation[2]),a;switch(n.axis){case"z":a=new q(0,0,1);break;case"y":a=new q(0,1,0);break;default:case"x":a=new q(1,0,0);break}let l=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,c=l.noiseType==="perlin";Wu.noiseSeed(l.seed);let d=nk((0,ib.default)(l.seed)),u=YA(l.strength,this.parameters.randomness);for(let[h,f]of this.children.entries()){let p=h*(l.freqScale/10)+l.movement,m=c?Wu.noise(p):d(p,p);f.scale.x=n.scale[0]+u(h,Kt(m,l.scale[0]))||Ys,f.scale.y=n.scale[1]+u(h,Kt(m,l.scale[1]))||Ys,f.scale.z=n.scale[2]+u(h,Kt(m,l.scale[2]))||Ys,f.position.setScalar(0);let g=s/e.count*h-i;switch(n.axis){case"x":f.rotation.set(0,g,0);break;case"y":f.rotation.set(0,0,g);break;case"z":f.rotation.set(g,0,0);break}f.translateOnAxis(a,n.radius),f.position.x+=n.position[0]+u(h,Kt(m,l.position[0])),f.position.y+=n.position[1]+u(h,Kt(m,l.position[1])),f.position.z+=n.position[2]+u(h,Kt(m,l.position[2]));let v=u(h,Kt(m,l.rotation[0])),y=u(h,Kt(m,l.rotation[1])),x=u(h,Kt(m,l.rotation[2]));n.alignment===!0?(f.rotation.x+=o.x+v,f.rotation.y+=o.y+y,f.rotation.z+=o.z+x):f.rotation.set(o.x+v,o.y+y,o.z+x)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let n=e.linear,i=new ls(n.rotation[0],n.rotation[1],n.rotation[2]),r=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,s=r.noiseType==="perlin";Wu.noiseSeed(r.seed);let o=nk((0,ib.default)(r.seed)),a=YA(r.strength,this.parameters.randomness);for(let[l,c]of this.children.entries()){let d=l*(r.freqScale/10)+r.movement,u=s?Wu.noise(d):o(d,d),h=a(l,Kt(u,r.rotation[0])),f=a(l,Kt(u,r.rotation[1])),p=a(l,Kt(u,r.rotation[2]));c.scale.x=1+(n.scale[0]-1)*l+a(l,Kt(u,r.scale[0]))||Ys,c.scale.y=1+(n.scale[1]-1)*l+a(l,Kt(u,r.scale[1]))||Ys,c.scale.z=1+(n.scale[2]-1)*l+a(l,Kt(u,r.scale[2]))||Ys,c.rotation.x=i.x*l+h,c.rotation.y=i.y*l+f,c.rotation.z=i.z*l+p,c.position.x=n.position[0]*l+a(l,Kt(u,r.position[0])),c.position.y=n.position[1]*l+a(l,Kt(u,r.position[1])),c.position.z=n.position[2]*l+a(l,Kt(u,r.position[2]))}}_updateGrid(e){let n=0,i=e.grid,r=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,s=YA(r.strength,this.parameters.randomness),o=r.noiseType==="perlin";Wu.noiseSeed(r.seed);let a=Ost((0,ib.default)(r.seed));if(i.useCenter===!0){let l={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},c=new q(i.size[0]*(i.count[0]-l.x)*.5,i.size[1]*(i.count[1]-l.y)*.5,i.size[2]*(i.count[2]-l.z)*.5);for(let d=0;d<i.count[0];d++)for(let u=0;u<i.count[1];u++)for(let h=0;h<i.count[2];h++){let f=[(d+1)*(r.freqScale/10)+r.movement,(u+1)*(r.freqScale/10)+r.movement,(h+1)*(r.freqScale/10)+r.movement],p=o?Wu.noise(...f):a(...f),m=this.children[n++];m.scale.x=1+s(n,Kt(p,r.scale[0]))||Ys,m.scale.y=1+s(n,Kt(p,r.scale[1]))||Ys,m.scale.z=1+s(n,Kt(p,r.scale[2]))||Ys;let g=s(n,Kt(p,r.rotation[0])),v=s(n,Kt(p,r.rotation[1])),y=s(n,Kt(p,r.rotation[2]));m.rotation.set(g,v,y),m.position.x=i.size[0]*d-c.x+s(n,Kt(p,r.position[0])),m.position.y=i.size[1]*u-c.y+s(n,Kt(p,r.position[1])),m.position.z=i.size[2]*h-c.z+s(n,Kt(p,r.position[2]))}}else for(let l=0;l<i.count[0];l++)for(let c=0;c<i.count[1];c++)for(let d=0;d<i.count[2];d++){let u=[(l+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement,(d+1)*(r.freqScale/10)+r.movement],h=o?Wu.noise(...u):a(...u),f=this.children[n++];f.scale.x=1+s(n,Kt(h,r.scale[0]))||Ys,f.scale.y=1+s(n,Kt(h,r.scale[1]))||Ys,f.scale.z=1+s(n,Kt(h,r.scale[2]))||Ys;let p=s(n,Kt(h,r.rotation[0])),m=s(n,Kt(h,r.rotation[1])),g=s(n,Kt(h,r.rotation[2]));f.rotation.set(p,m,g),f.position.x=i.size[0]*l+s(n,Kt(h,r.position[0])),f.position.y=-i.size[1]*c+s(n,Kt(h,r.position[1])),f.position.z=-i.size[2]*d+s(n,Kt(h,r.position[2]))}}_updateToObject(e){var g;if(e.type!=="toObject")throw new Error;let{toObject:n}=e,i=new ls(n.rotation[0],n.rotation[1],n.rotation[2]),r=e.randomnessObject??af.defaultData([1,1,1]).randomnessObject,s=r.noiseType==="perlin";Wu.noiseSeed(r.seed);let o=nk((0,ib.default)(r.seed)),a=YA(r.strength,this.parameters.randomness);if(!n.object){for(let[,v]of this.children.entries())v.position.set(0,0,0),v.scale.setScalar(1),v.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof Ihe)if(!((g=this.objectForSample.font)!=null&&g.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let l=this.getSubdivData(),c=[],d=v=>{let y=v.length,x=v.map(E=>E[0]).reduce((E,A)=>E+A,0),b=v.map(E=>E[1]).reduce((E,A)=>E+A,0),w=v.map(E=>E[2]).reduce((E,A)=>E+A,0);return[x/y,b/y,w/y]},u=v=>Math.round(v*1e6)/1e6;l.forEach(v=>{let y=l.filter(x=>u(v.pos[0])===u(x.pos[0])&&u(v.pos[1])===u(x.pos[1])&&u(v.pos[2])===u(x.pos[2]));y.length>1?c.push({pos:v.pos,norm:d(y.map(x=>x.norm))}):c.push(v)});let h=Elt(c);if(l.length>0){let v=Math.round(h.length*n.count/100);this._updateCount(v)}this.objectForSample.updateMatrixWorld();let f=new Lst(this.objectForSample).build(),p=_lt[n.axis],m=this.children;f.setRandomGenerator((0,ib.default)(this.object.uuid+n.seed));for(let[v,y]of m.entries()){let x=v*(r.freqScale/10)+r.movement,b=s?Wu.noise(x):o(x,x),w=a(v,Kt(b,r.rotation[0])),E=a(v,Kt(b,r.rotation[1])),A=a(v,Kt(b,r.rotation[2]));n.spreadType==="random"?f.sample(ub,xk):(h.length&&(ub.fromArray(h[v].pos),xk.fromArray(h[v].norm)),this.objectForSample instanceof U_&&ub.applyMatrix4(Ilt.copy(this.objectForSample.matrixWorld).invert())),ub.applyMatrix4(this.object.hiddenMatrix.clone().invert()),y.position.copy(ub),Ph.fromArray(p);let S=n.align==="normal"?xk:this.object.getWorldDirection(Blt),C=Ip.fromArray(n.position);Ip.x+=Ip.x+a(v,Kt(b,r.position[0])),Ip.y+=Ip.y+a(v,Kt(b,r.position[1])),Ip.z+=Ip.z+a(v,Kt(b,r.position[2]));let T=Math.acos(S.dot(Ph)),P=Nlt.crossVectors(Ph,S).normalize(),R=klt.makeRotationAxis(P,T),L=S.clone().cross(this.object.up).normalize(),O=L.clone().cross(S).normalize(),B=new tt().makeBasis(L,S,O),$=new q(Ph.y,Ph.z,Ph.x).normalize(),X=$.clone().cross(Ph).normalize(),H=new tt().makeBasis($,Ph,X).invert(),U=new tt().multiplyMatrices(B,H);y.rotation.setFromRotationMatrix(U),C.applyMatrix4(R),y.position.add(C),y.rotation.x=y.rotation.x+i.x+w,y.rotation.y=y.rotation.y+i.y+E,y.rotation.z=y.rotation.z+i.z+A,y.scale.setScalar(1),y.scale.x=y.scale.x+n.scale[0]+a(v,Kt(b,r.scale[0]))||Ys,y.scale.y=y.scale.y+n.scale[1]+a(v,Kt(b,r.scale[1]))||Ys,y.scale.z=y.scale.z+n.scale[2]+a(v,Kt(b,r.scale[2]))||Ys,y.scale.multiply(this.object.scale),y.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof U_){let n=this.objectForSample,i=Slt[e],r=Bhe[i],s=khe[i],o=Nhe[i],a=[],l=r(n.subdivPointerNew);for(let c=0;c<=l-1;c++){let d=s(n.subdivPointerNew,c),u=o(n.subdivPointerNew,c);HQ.fromArray(d).applyMatrix4(n.matrixWorld),jQ.fromArray(u),a.push({pos:HQ.toArray(),norm:jQ.toArray()})}return a}else return(this.objectForSample.geometry.index?Clt(this.objectForSample.geometry):Plt(this.objectForSample.geometry)).map((n,i)=>e==="polygon_center"?{pos:n.midpoint,norm:n.norm}:e==="vertex"?[{pos:n.vertices[0],norm:n.norm},{pos:n.vertices[1],norm:n.norm},{pos:n.vertices[2],norm:n.norm}]:e==="edge"?[{pos:n.faceCenters[0],norm:n.norm},{pos:n.faceCenters[1],norm:n.norm},{pos:n.faceCenters[2],norm:n.norm}]:[]).flat()}updateState(e,n){var i;if(this.parameters=yR(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let r=n.find(this.parameters.toObject.object);r instanceof Ho?this.objectForSample=r:this.objectForSample=void 0,this.matrix=new tt,this.hiddenMatrix=new tt,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,r&&r.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},NS=t=>{var e;return e=class extends t{},e.geometryHelper=new mu(30,30,30),e},QA=new Tx,bk=new gl,GQ=new tt,BS=(t,e,n,i,r=!1)=>{let s=e,o=t.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),bk.copy(s.boundingSphere),bk.applyMatrix4(o),n.ray.intersectsSphere(bk)===!1||(GQ.copy(o).invert(),QA.copy(n.ray).applyMatrix4(GQ),s.boundingBox!==null&&QA.intersectsBox(s.boundingBox)===!1))return;let a,l,c,d,u=s.index,h=s.attributes.position,f=s.drawRange,p,m;if(r===!1){let v=Math.max(0,f.start),y=Math.min(u.count,f.start+f.count);for(p=v,m=y;p<m;p+=3)if(l=u.getX(p),c=u.getX(p+1),d=u.getX(p+2),a=g(t,n,QA,h,l,c,d),a){a.faceIndex=Math.floor(p/3),i.push(a);return}}else{let v=s.attributes.position,y=new q,x=new q,b=new q,w=new q,E=2,A=1/((t.scale.x+t.scale.y+t.scale.z)/3),S=A*A,C=Math.max(0,f.start),T=Math.min(v.count,f.start+f.count);for(let P=C,R=T-1;P<R;P+=E){if(y.fromBufferAttribute(v,P),x.fromBufferAttribute(v,P+1),QA.distanceSqToSegment(y,x,w,b)>S)continue;w.applyMatrix4(t.matrixWorld);let L=n.ray.origin.distanceTo(w);L<n.near||L>n.far||i.push({distance:L,point:b.clone().applyMatrix4(t.matrixWorld),object:t})}}function g(v,y,x,b,w,E,A){let S=new q,C=new q,T=new q,P=new q,R=new q;if(S.fromBufferAttribute(b,w),C.fromBufferAttribute(b,E),T.fromBufferAttribute(b,A),x.intersectTriangle(S,C,T,!1,P)===null)return null;R.copy(P),R.applyMatrix4(v.matrixWorld);let L=y.ray.origin.distanceTo(R);return L<y.near||L>y.far?null:{faceIndex:1,distance:L,point:R.clone(),object:v}}},JA=new q,Ha=new Dx,zlt=class extends RS{constructor(t){let e=new Ut,n=new ip({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={},o=new Lt(15711266),a=new Lt(15711266),l=new Lt(2857471);c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,h,f){d(u,f),d(h,f)}function d(u,h){i.push(0,0,0),r.push(h.r,h.g,h.b),s[u]===void 0&&(s[u]=[]),s[u].push(i.length/3-1)}e.setAttribute("position",new xt(i,3)),e.setAttribute("color",new xt(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let t=this.geometry,e=this.pointMap;Ha.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let n=1,i=1,r=.8;kl("n1",e,t,Ha,-n,-i,r),kl("n2",e,t,Ha,n,-i,r),kl("n3",e,t,Ha,-n,i,r),kl("n4",e,t,Ha,n,i,r);let s=r;kl("f1",e,t,Ha,-n,-i,s),kl("f2",e,t,Ha,n,-i,s),kl("f3",e,t,Ha,-n,i,s),kl("f4",e,t,Ha,n,i,s);let o=s,a=.5;kl("u1",e,t,Ha,n*.7*a,i*1.1,o),kl("u2",e,t,Ha,-n*.7*a,i*1.1,o),kl("u3",e,t,Ha,0,i*(1.1+.9*a),o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function kl(t,e,n,i,r,s,o){JA.set(r,s,o).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],JA.x,JA.y,JA.z)}}var Flt=class extends NS(zlt){constructor(t){super(t),this.object=t,this.object=t,this.name=`CombinedCameraHelper: ${t.uuid}`}updateMatrixWorld(t){super.updateMatrixWorld(t),this.updateTarget()}updateTarget(){let t=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(t)}raycast(t,e){BS(this.object,this.geometry,t,e,!0)}},ZF;(t=>t.is=e=>"objectHelper"in e)(ZF||(ZF={}));var TR=(t,e)=>class extends Ede(t){constructor(){super(...arguments),this.objectHelper=new e(this),this.gizmos={}}get geometryHelper(){return e.geometryHelper}raycast(n,i){this.objectHelper.raycast(n,i)}showGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof p2&&(i.visible=!0)}}updateEntityBoxSize(n,i){this.objectHelper.visible&&this.geometryHelper instanceof mu?(n.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(n,i)}hideGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof p2&&(i.visible=!1)}}},wk=790,Vv=new q,_k=new q,Sk=new vn,Ek=new q,db=new q,Mk=new q,so=class extends TR(Dx,Flt){constructor(t="",e={...L2.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=I_.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(t,e),this.previousProjectionMatrix=new tt,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let n=this.width,i=this.height;if(e.orthographic.autoZoom){let r=e.orthographic.autoZoomFrustumSize??wk,s=n/i,o=n>i?s:1,a=n>i?1:s;this.orthoCamera=new c2(-r*.5*o,r*.5*o,r*.5*(1/a),-r*.5*(1/a),-5e4,1e4)}else this.orthoCamera=new c2(n*-.5,n*.5,i*.5,i*-.5,-5e4,1e4);this.perspCamera=new Os(45,n/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(t){this.perspCamera.fov=t}get fov(){return this.perspCamera.fov}setNear(t,e){t==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}setZoom(t,e){e>=0&&(t==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}set cameraType(t){t==="PerspectiveCamera"?this.toPerspective():t==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(t){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(t){t>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}lookAt(t,e,n){typeof t=="number"&&(t=new q(t,e,n)),super.lookAt(t),this.getWorldPosition(Vv),this.targetOffset=Vv.distanceTo(t)}getTarget(t=new q){return this.getWorldDirection(_k),this.getWorldPosition(Vv),_k.multiplyScalar(this.targetOffset),t.copy(Vv).add(_k),t}getDistanceToTarget(){let t=this.getTarget();return this.getWorldPosition(Vv),Vv.distanceTo(t)}updateUp(){this.getWorldQuaternion(Sk),Ek.set(0,0,1).applyQuaternion(Sk),db.copy(ei.DEFAULT_UP),this.isUpVectorFlipped&&db.negate(),db.applyQuaternion(Sk),Mk.copy(ei.DEFAULT_UP).projectOnPlane(Ek),this.angleOffsetFromUp=Mk.angleTo(db),this.angleOffsetFromUp*=Mk.cross(db).dot(Ek)>=0?1:-1}updateTransformState(t){let e=super.updateTransformState(t);return t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateUp(),e}getViewFrontToObject(t){let e=t.getWorldPosition(new q),n=t.getWorldDirection(new q).multiplyScalar(this.targetOffset);return{position:e.clone().add(n),target:e}}getViewToObject(t){let e=t.getWorldPosition(new q),n=this.getWorldDirection(new q).multiplyScalar(this.targetOffset);return{position:e.clone().sub(n),target:e}}setViewplaneSize(t,e){if(this.aspect=t/e,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let n=this.data.orthographic.autoZoomFrustumSize??wk,i=t>e?this.aspect:1,r=t>e?1:this.aspect;this.left=-n*.5*i,this.right=n*.5*i,this.top=n*.5*(1/r),this.bottom=-n*.5*(1/r)}else this.left=-t*.5,this.right=t*.5,this.top=e*.5,this.bottom=-e*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(t){this.perspCamera.setFocalLength(t),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(t,e,n,i,r,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(t,e,n,i,r,s):this.orthoCamera.setViewOffset(t,e,n,i,r,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(t,e){return super.copy(t,e),this.parent=t.parent,this.orthoCamera.copy(t.orthoCamera),this.perspCamera.copy(t.perspCamera),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.far=t.far,this.view=t.view===null?null:Object.assign({},t.view),this._cameraType=t._cameraType,this.aspect=t.aspect,this.fov=t.fov,this.focus=t.focus,this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this.targetOffset=t.targetOffset,this.updateProjectionMatrix(),this}toCameraState(t=[]){let e={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:wk},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return dF(e,t)}updateCameraSubtype(t,e){let n=t==="perspective"?"PerspectiveCamera":"OrthographicCamera";e.zoom!==void 0&&this.setZoom(n,e.zoom),e.near!==void 0&&this.setNear(n,e.near),e.fov!==void 0&&n==="PerspectiveCamera"&&(this.fov=e.fov)}updateState(t,e){this.updateCameraState(t,e)}updateCameraState(t,e){this.updateState_Entity(t,e),t.far!==void 0&&(this.far=t.far),t.orthographic!==void 0&&this.updateCameraSubtype("orthographic",t.orthographic),t.perspective!==void 0&&this.updateCameraSubtype("perspective",t.perspective),t.type!==void 0&&(this.cameraType=t.type),t.up!==void 0&&this.up.fromArray(t.up),t.targetOffset!==void 0&&(this.targetOffset=t.targetOffset),t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),t.path.length===1&&t.type===0&&this.updateCameraSubtype(t.path[0],t.props)}toState(t){return{...super.toState(t),...this.toCameraState(t),type:this.cameraType}}},Hv=new tt,Ult=new tt;function WQ(t){let e=!1;return t.scene.objects.traverse((n,i)=>{var r;((r=i.geometry)==null?void 0:r.type)==="BooleanGeometry"&&(e=!0)}),e}var Yy=class extends kS{constructor(t,e,n){super(t,e),this.data=e,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Ut,this.onAfterRender=(i,r,s,o,a,l)=>{super.onAfterRender(i,r,s,o,a,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&t.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(t,e=!0){var i;if(this.booleanMeshSetAddress!==-1&&!t)return;for(let r=0;r<this.children.length;r++){let s=this.children[r];s instanceof Yy&&s.recomputeBoolean(t===!0,e)}this.meshSetAddresses=[];for(let r=0;r<this.children.length;r++){let s=this.children[r];if(s instanceof Ho&&s.dataPatched.visible===!0&&((i=s.geometry.attributes.position)==null?void 0:i.count)>0&&s.geometry.drawRange.count>0){if(Hv.multiplyMatrices(s.hiddenMatrix,s.matrix),s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=jh.getMeshSet(s.geometry,t===!0,e)),s.booleanMeshSetAddress===-1)return;jh.transformMeshSet(s.booleanMeshSetAddress,Hv),s.booleanMatrixInvOld.copy(Hv).invert(),s.booleanWasTransformed=!1}else s instanceof Yy&&s.needsTransformForDownstream===!0?(jh.transformMeshSet(s.booleanMeshSetAddress,Hv),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(jh.transformMeshSet(s.booleanMeshSetAddress,Ult.multiplyMatrices(Hv,s.booleanMatrixInvOld)),s.booleanMatrixInvOld.copy(Hv).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new xt([],0)),this.geometry.setDrawRange(0,0);return}if(t===!0)return jh.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new Ut,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=jh.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(r){this.booleanMeshSetAddress=0,console.error(r)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,KH(this),ZH(this)}dispose(){super.dispose(),this.geometry.dispose()}},QF;(t=>{function e(n){return Vn.is(n)&&n instanceof OS}t.is=e})(QF||(QF={}));var QH=(t,e)=>class extends TR(t,e){updateState_Light(n,i){this.updateState_Entity(n,i),n.color!==void 0&&(this.color=i.shared.color(n.color)),n.intensity!==void 0&&(this.intensity=n.intensity),n.depth!==void 0&&(this.shadow.camera.far=n.depth,this.shadow.needsUpdate=!0),n.shadows!==void 0&&(this.castShadow=n.shadows)}},Qc=t=>t instanceof Ho,md=t=>t!==null&&t instanceof Yy,Vlt=t=>t instanceof so,Hlt=t=>QF.is(t),qQ=t=>ZF.is(t),JH=class extends NS(xYe){constructor(t,e=15){super(e),this.object=t,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${t.uuid}`,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}raycast(t,e){BS(this.object,JH.geometryHelper,t,e)}update(){}},$2=class extends TR(T0,JH){constructor(t,e){super(),this.super_Entity(t,e),this.objectHelper.update()}updateState(t,e){this.updateState_Entity(t,e)}},zhe=class extends NS(yYe){constructor(t,e=15,n=10066329){super(t,e,n),this.object=t,this.added=!1,this.name=`DirectionalLightHelper: ${t.uuid}`}raycast(t,e){BS(this.object,zhe.geometryHelper,t,e)}},Fhe=class extends NS(vYe){constructor(t,e=15,n=6710886){super(t,e,n),this.object=t,this.name=`PointLightHelper: ${t.uuid}`}raycast(t,e){BS(this.object,Fhe.geometryHelper,t,e)}},JF=class extends NS(gYe){constructor(t,e=6710886){super(t,e),this.object=t,this.name=`SpotLightHelper: ${t.uuid}`}raycast(t,e){BS(this.object,JF.geometryHelper,t,e)}update(){if(this.object!==void 0){let t=JF._vector,e=this.object.distance?this.object.distance:1e3,n=e*Math.tan(this.object.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(t);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,s=this.cone.material.length;r<s;r++)this.cone.material[r].color.set(i);else this.cone.material.color.set(i)}}},Uhe=JF;Uhe._vector=new q;function jlt(t,e){t.shadow.camera.right=e/2,t.shadow.camera.left=-e/2,t.shadow.camera.top=e/2,t.shadow.camera.bottom=-e/2,t.shadow.needsUpdate=!0}var Glt=class extends QH(dYe,zhe){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let r=new f2(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let e=this.gizmos[t];e instanceof f2&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e);let n=t.depth!==void 0&&t.depth!==this.shadow.camera.far||t.size!==void 0&&t.size/2!==this.shadow.camera.right;t.size!==void 0&&jlt(this,t.size),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),n&&this.update()}},Wlt=class extends QH(cYe,Fhe){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let r=new q(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new q(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),o=new _r(r,s),a=new p2(o,new Lt(16755200));a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let t in this.gizmos){let e=this.gizmos[t];if(e instanceof p2){let n=this.shadow.camera,i=new q(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),r=new q(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);e.box.set(i,r),e.updateMatrixWorld(!0)}}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},$Q=new q,XQ=new q,YQ=new vn,qlt=class extends QH(aYe,Uhe){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=pn.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let r=new f2(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let e=this.gizmos[t];e instanceof f2&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),XQ.setFromMatrixPosition(this.matrixWorld),YQ.setFromRotationMatrix(this.matrixWorld),$Q.copy(this.up).applyQuaternion(YQ).negate().multiplyScalar(this.distance),this.target.position.copy(XQ).add($Q),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.angle!==void 0&&(this.angle=t.angle),t.penumbra!==void 0&&(this.penumbra=t.penumbra),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},$lt=class extends yl{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?WH(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},e6=class extends yl{constructor(t,e,n){super(t,e,n),this._shapeId=null,this._context=n}updateState(t,e){super.updateState(t,e),this.updateShape()}updateShape(){var i;let t=this.data.geometry.extrusion.shape,e;if(t.type==="Custom"){let r=t.shapeId;if(r!==this._shapeId&&this.detachShape(),r){this._shapeId=r;let s=this._context.scene.find(r);s!=null&&s.data&&(s.attachedPaths.add(this),e=(i=s.geometry.userData)==null?void 0:i.shape),e||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let r;switch(t.type){case"Rectangle":r=Gde;break;case"Ellipse":r=jH;break;case"Polygon":r=jde;break;case"Star":r=Wde;break;default:throw new Error(`Unknown shape type: ${t.type}`)}e=r.create({parameters:t}).userData.shape}let n=this.geometry;e&&n.inputs&&(n.inputs.shapeData=e,n.build(),this.attachedSurfaceCloners.forEach(r=>r.update()))}detachShape(){var t;this._shapeId!==null&&((t=this._context.scene.find(this._shapeId))==null||t.attachedPaths.delete(this))}createGeometryDelayed(t){this.geometryCreateDeleyed=t.shared,this.updateShape(),this.refreshAttachedPaths(t)}updateTransformState(t){return super.updateTransformState(t)}updateGeometryInteractions(t,e){super.updateGeometryInteractions(t,e),this.updateShape()}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?WH(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},ay=class extends TR(T0,JH){constructor(t,e,n){super(),e.type==="Instance"&&typeof t=="string"&&(e=this.transformAssignData(e,n)),this.super_Entity(t,e),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(t,e){let n=e.scene.data.objects.get(t.component);if(n){let i,r;for(let s of $y.rootOverrideProps)t[s]===void 0?(i===void 0&&(i={...t}),i[s]=n.data[s]):(r===void 0&&(r={}),r[s]=t[s]);return this.overrideData=r,i??t}return t}updateByOp(t,e,n,i){let r;if(this.isInstanceRoot&&!i&&(e=this.transformAssignData(e,n),t.type===0&&t.path.length===0&&this.component))for(let s of $y.rootOverrideProps)s in t.props&&t.props[s]===void 0&&(r===void 0&&(r={...t,props:{...t.props}}),r.props[s]=this.component.data[s]);super.updateByOp(r??t,e,n,i)}updateState(t,e){this.updateState_Entity(t,e)}expandInstanceChildren(t){let e=this.data;if(this.component===void 0){this.component=t.scene.find(e.component)??null;let n=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let i=0;for(let r of this.children)if(Vn.is(r))t.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),t6(r),i+=1;else break;this.children.splice(0,i)}n=!0}this.component&&Vhe(t,[this.uuid],e.overrides,this,this.component,this.component,0,n),this.oldComponent=this.component}}};function t6(t){if(t.component){let e=t.component.instances.indexOf(t);e>=0&&t.component.instances.splice(e,1);for(let n of t.children)Vn.is(n)&&t6(n)}}function KQ(t,e,n,i){return t.component===e&&AH(t.identity,i)?t.overrideData===n?2:1:0}function Vhe(t,e,n,i,r,s,o,a){if(o>50)return!1;if(i.component!==r){if(i.component){let c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}r.instances.push(i),i.component=r}r instanceof ay&&r.isInstanceRoot&&r.expandInstanceChildren(t);let l=0;for(let c of r.children)if(Vn.is(c)){let d=[...e,...typeof c.identity=="string"?[c.identity]:c.identity],u=I2.resolve(n,d,1),h=null,f;if(!a){let p=i.children[l];if(h=Vn.is(p)?p:null,h!==null){let m=KQ(h,c,u,d);f=m>=1?h.stateSelection:void 0,m!==2&&(h=null)}if(h===null&&(h=t.scene.findInstance(d)??null,h!==null)){let m=KQ(h,c,u,d);if(f=m>=1?h.stateSelection:void 0,m!==2)h=null;else{let g=h.parent.children.indexOf(h);h.parent.children.splice(g,1),i.children.splice(l,0,h),h.parent===i?g<=l&&console.error("not possible"):(h.parent=i,h.matrixWorldNeedsUpdate=!0,h.resetBBoxNeedsUpdate(),h.updateVisible(),t.pendingDeletes.delete(h))}}}if(h===null){let p=u?Fm.apply(c.data,u):c.data;lg.is(p.type)&&(p={...p,type:"Empty"}),h=lf.createEntity(d,p,t),h.overrideData=u,i.add(h),i.children.splice(i.children.length-1,1),i.children.splice(l,0,h),h.updateState(h.data,t),f&&h.changeSelectedState(f,t),t.scene.registerInstanceAndSetUuid(h)}l+=1,Vhe(t,e,n,h,c,s,o+1,a)}if(!a){let c=l;for(;;){let d=i.children[l];if(Vn.is(d))t.pendingDeletes.add(d);else break;l+=1}i.children.splice(c,l-c)}return!0}function Xlt(t,e,n){let i;return e.geometry.type==="TextGeometry"?new Ihe(t,e,n):(e.geometry.type==="SubdivGeometry"?i=new U_(t,e,n):e.geometry.type==="PathGeometry"?i=new e6(t,e,n):e.geometry.type==="VectorGeometry"?i=new $lt(t,e,n):e.geometry.type==="BooleanGeometry"?i=new Yy(t,e,n):i=new yl(t,e,n),i)}function n6(t,e,n){return e.type==="Mesh"?Xlt(t,e,n):e.type==="Empty"?new $2(t,e):e.type==="PointLight"?new Wlt(t,e,n):e.type==="SpotLight"?new qlt(t,e,n):e.type==="DirectionalLight"?new Glt(t,e,n):e.type==="Component"||e.type==="Instance"?new ay(t,e,n):lg.is(e.type)?new so(t,e):(console.error(e),new $2(t,e))}lf.createEntity=n6;function Ylt(t,e,n){let i=n6(t.identity,e,n),r=t.children,s=t.attachedPaths,o=t.parent,a=t.component,l=t.instances,c=t.overrideData,d=t.uuid,u=t.stateSelection;t.dispose();for(let h of Object.keys(t))delete t[h];Object.setPrototypeOf(t,Object.getPrototypeOf(i));for(let h of Object.keys(i))t[h]=i[h];t.children=[...t.children,...r],t.attachedPaths=s,t.parent=o,t.component=a,t.instances=l,t.uuid=d,t.overrideData=c,t.updateState(t.data,n),u&&t.changeSelectedState(u,n),t.resetBBoxNeedsUpdate()}lf.changeEntityProptotype=Ylt;lf.Cloner=Kl;function Klt(t,e,n,i){t.updateByOp(e,n,i,!1)}function ZQ(t,e){let n=!1,i=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return r.length>0&&(t.layers.set(8),i.length>0&&t.layers.enable(3),n=!0,ZH(t),KH(t)),i.length===0&&r.length===0&&t.layers.set(0),t instanceof kS&&t.needsAO&&t.layers.enable(5),n}function QQ(t,e){if(!e.layers)return!1;let n=!1,i=e.getLayersOfType("transmission").filter(s=>s.data.visible),r=e.getLayersOfType("outline").filter(s=>s.data.visible);return i.length>0&&(t.layers.set(3),r.length>0&&t.layers.enable(8),n=!0),i.length===0&&r.length===0&&t.layers.set(0),t.needsAO&&t.layers.enable(5),n}function Zlt(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof kS)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)ZQ(n,n.material[i])&&(e=!0);else ZQ(n,n.material)&&(e=!0)}),e}function Qlt(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof kS)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)QQ(n,n.material[i])&&(e=!0);else QQ(n,n.material)&&(e=!0)}),e}var Jlt=new Jce,ect=new tt,tct=new Tx;function JQ(t,e,n,i=!1){let r=t.cloner;if(r)for(let s of r.children){let o=ect.copy(s.matrixWorld).invert(),a=tct.copy(e.ray).applyMatrix4(o),l=t.matrixWorld;a.applyMatrix4(l);let c=Jlt;c.set(a.origin,a.direction),c.near=e.near,c.far=e.far;let d=c.intersectObject(t,!1);d.length>0&&n.push({...d[0],object:i?s:t})}}var nct=t=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${t};
const int gShadowSamples = ${t};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, ${5} - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,ict=Jt.lights_fragment_begin,rct=Jt.shadowmask_pars_fragment,eJ=!1,sct=t=>{switch(t){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},oct=(t="medium")=>{if(eJ)return;eJ=!0;let e=sct(t);Jt.shadowmap_pars_fragment=nct(e);let n=ict.slice();n=n.replace("getShadow( spotShadowMap[ i ]",`getShadow( UNROLLED_LOOP_INDEX + ${3}, spotShadowMap[ i ]`),n=n.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Jt.lights_fragment_begin=n;let i=rct.slice();i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Jt.shadowmask_pars_fragment=i},act=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,lct=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,Ak=new di({vertexShader:act,fragmentShader:lct,uniforms:{depthContrast:{value:1}}}),cct=class{constructor(){this._constraints=new Map}setConstraint(t,e){e===null?this._constraints.delete(t):this._constraints.set(t,e)}removeDependencies(t){this._constraints.delete(t)}applyConstraints(t){let e=new Set;this._constraints.forEach((n,i)=>{let r=[i,n],s=n;for(;this._constraints.has(s);)s=this._constraints.get(s),e.has(s)||r.push(s);for(let o=r.length-2;o>=0;o--)if(!e.has(r[o])){let a=t.find(r[o]);a?a.applyPathSnapping(t):console.warn(`missing entity ${r[o]}`),e.add(r[o])}})}findDependency(t,e){let n=t;for(;this._constraints.has(n);)if(n=this._constraints.get(n),n===e)return!0;return!1}},e4=new Cx;e4.wireframe=!0;var tJ=new q,Hhe=class extends zm{constructor(t,e){super(),this.data=t,this.backupFog=new zce(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.occlusion=!1,this.aoFullRes=!1,this.radius=128,this.bias=.5,this.aoColor={r:0,g:0,b:0},this.geometryCacheChanged=!1,this.bgColor=new zo(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new cct,this.needsRecomputeInstances=!1,this.ambientLight=new sYe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=t.postprocessing,this.init(t,e),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=Qlt(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=Zlt(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(t){let e=t.identity.join("-"),n=this.entityIdentityToEntity[e];n&&(t.uuid=n.uuid),this.entityIdentityToEntity[e]=t,this.entityByUuid[t.uuid]=t}findInstance(t){return this.entityIdentityToEntity[t.join("-")]}getWithSortKey(t){let e=this.find(t);if(e===void 0)return;let n=[],i=e;for(;i!==this;){let r=i;i=i.parent;let s=i.children.indexOf(r);n.splice(0,0,s)}return{entity:e,sortKey:n}}getAllSorted(t){let e=[];for(let n of t){let i=this.getWithSortKey(n.id);i!==void 0&&e.push(i)}return e.sort((n,i)=>Git(n.sortKey,i.sortKey)),e.map(n=>n.entity)}nonExistOrDescendantOf(t,e){let n=this.find(t);if(n===void 0)return!0;for(;n;){if(n.uuid===e)return!0;n=n.parent}return!1}find(t){if(t===""||t===void 0)return;let e=this.entityByUuid[t];return e===void 0?this.getObjectByProperty("uuid",t):e}debugEnsureEntity(t){let e=this.find(t);if(e){if(Array.isArray(e.identity)&&this.findInstance(e.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(t){this.toExpandCloner.add(t)}addPendingUpdateCloner(t){this.toUpdateCloner.add(t)}markToExpandCloner(t){this.toExpandCloner.add(t),t.traverseEntityAncestors(e=>{this.toExpandCloner.add(e)})}doPendingExpandCloner(){this.toExpandCloner.forEach(t=>{t.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(t=>{var e;(e=t.cloner)==null||e.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(t){this.pendingCommands.push(t)}applyPendingCommands(){this.pendingCommands.forEach(t=>t()),this.pendingCommands.length=0}updateTreeByOp(t,e){var n;if(t.path.length===0&&t.type===7){let i=t.parent===null?this:this.find(t.parent);if(i===void 0)throw new Error("unexpected");let r=this.createObject(t.id,t.data,t.children,i,t.localIndex,e);r.updateVisible(),r.resetBBoxNeedsUpdate(),Qc(r)&&md(r.parent)&&(r.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(r),this.markToExpandCloner(r)}else if(t.path.length===0&&t.type===8){let i=this.find(t.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(i),i.parent.remove(i),md(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Qc(i)&&(i.freeBooleanPointer(),r instanceof Yy&&r.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof e6&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid)}else if(t.path.length===0&&t.type===9){let i=this.find(t.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),(n=i.cloner)==null||n.resetOnMove(),this.markToExpandCloner(i);let s=t.parent===null?this:this.find(t.parent);if(s===void 0)throw new Error("unexpected");s.add(i),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(),i.resetBBoxNeedsUpdate();let o=t.localIndex;s.children.splice(o,0,s.children.pop()),Qc(i)&&(i.invalidateUpstreamBooleanData(),md(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():r instanceof Yy&&r.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(t,e,n,i){if(e.type===0){if(("overrides"in e.props||"component"in e.props)&&this.markNeedsRecomputeInstances(),e.path.includes("overrides")&&"states"in e.props){let{rest:s}=e.props;e={...e,props:s},this.markNeedsRecomputeInstances()}e.path[0]==="pathSnapping"&&e.props.pathId!==void 0&&this.pathConstraints.setConstraint(t,e.props.pathId)}let r=this.find(t);if(r)try{Klt(r,e,n,{scene:this,shared:i}),r instanceof yl&&r.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get enableFog(){return this.fog!==null}set enableFog(t){this.fog=t===!0?this.backupFog:null}init(t,e){if(this.createChildrenObjects(t.objects,this,e),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(Ls(t.backgroundColor,e)),this.updateFog(t.fog,e),this.updateAmbientLight(t.environment.ambientLight,e),this.activeCamera=this.personalCamera,t.publish.playCamera!==null){let n=this.find(t.publish.playCamera);n instanceof so&&this.switchActiveCamera(n)}this.expandInstances(e,!0),this.traverseEntity(n=>{md(n)&&n.recomputeBoolean(),n instanceof so&&n.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(t){t.traverseEntity(e=>{(e.data.type==="Component"||e.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(t){Vn.is(t)&&(t.data.type==="Component"&&this.markNeedsRecomputeInstances(),t.traverseAncestors(e=>{Vn.is(e)&&e.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(t,e,n,i,r,s,o){t&&t!==i.uuid&&i.find(t)&&r.forInstancesRec(a=>{a.isInstanceRoot||(a.data=E2(a.data,l=>{let c=l.events.data(o.id),d=a.goUp(s);if(d){let u=[...Nue(d.identity),t].join("-"),h=this.entityIdentityToEntity[u];if(h){let f=h.uuid;cu.zoom(c,e)[n]=f}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(t=>{if(t instanceof ay&&typeof t.identity=="string"&&t.data.type==="Component")return t.traverseEntity((e,n)=>{e.data.events.forEach(i=>{i.data.type==="GameControl"?e.forInstancesRec(r=>{r.isInstanceRoot||(r.data=E2(r.data,s=>{s.events.delete(i.id)}).data)}):i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",t,e,n,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",t,e,n,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",t,e,n,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,t,e,n,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,t,e,n,i)),i.data.inActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["inActions",r.id],"object",t,e,n,i)}),i.data.outActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["outActions",r.id],"object",t,e,n,i)})):"actions"in i.data&&i.data.actions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["actions",r.id],"object",t,e,n,i)})})}),!0})}expandInstances(t,e){let n=new Set;this.traverseEntity(i=>{if(i instanceof ay&&i.isInstanceRoot)return i.expandInstanceChildren({scene:this,shared:t,pendingDeletes:n}),e||i.resetBBoxNeedsUpdate(),!0});for(let i of n)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),t6(i)}recomputeInstances(t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(e=>{e instanceof ay&&e.isInstanceRoot&&(e.component=void 0)}),this.expandInstances(t,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(t){t.traverseEntity(e=>{let n=typeof e.identity=="string"?e.identity:e.identity.join("-");this.entityIdentityToEntity[n]===e&&(delete this.entityByUuid[e.uuid],delete this.entityIdentityToEntity[n]),e.dispose()})}clearScene(){for(let t of this.children)Vn.is(t)&&t.disposeRecursively();this.children.length=0}resetAfterClear(t,e){this.init(t,e)}createPersonalCamera(){let t=new so(Hhe.PERSONAL_CAMERA_ID,{...L2.defaultData,name:"Personal Camera"});return t.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(t),t}raycast(t){let e=[],n=i=>{for(let r of i.children){let s=r.cloner;Vn.is(r)&&!r.raycastLock&&(r.visible||s!=null&&s.object.data.visible)&&((Qc(r)||qQ(r)&&this.enableHelpers&&r.objectHelper.visible)&&(t.intersectObject(r,!1,e),JQ(r,t,e)),n(r))}};return n(this),e}raycastWithClones(t){let e=[],n=i=>{for(let r of i.children){let s=r.cloner;Vn.is(r)&&(r.visible||s!=null&&s.object.data.visible)&&((Qc(r)||qQ(r)&&this.enableHelpers&&r.objectHelper.visible)&&(t.intersectObject(r,!1,e),JQ(r,t,e,!0)),n(r))}};return n(this),e}forEachEntity(t){for(let e of this.children)Vn.is(e)&&t(e)}traverseEntity(t){for(let e of this.children)Vn.is(e)&&e.traverseEntity(t)}traverseObject(t){for(let e of this.children)V2.is(e)&&e.traverseObject(t)}traverseVisibleEntity(t){for(let e of this.children)Vn.is(e)&&e.visible&&e.traverseVisibleEntity(t)}updateFog(t,e){this.enableFog=t.enabled,this.fogUseBGColor=t.useBackgroundColor,t.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Ls(t.color,e),this.backupFog.near=t.near,this.backupFog.far=t.far}dispose(){this.clearScene()}updateAmbientLight(t,e){t.color!==void 0&&(this.ambientLight.color=Ls(t.color,e)),t.intensity!==void 0&&(this.ambientLight.intensity=t.intensity),t.groundColor!==void 0&&(this.ambientLight.groundColor=Ls(t.groundColor,e)),t.enabled!==void 0&&(this.ambientLight.visible=t.enabled),t.occlusion!==void 0&&(this.occlusion=t.occlusion),t.aoFullRes!==void 0&&(this.aoFullRes=t.aoFullRes),t.radius!==void 0&&(this.radius=t.radius),t.bias!==void 0&&(this.bias=t.bias),t.aoColor!==void 0&&(this.aoColor=Ls(t.aoColor,e))}switchActiveCamera(t){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=t,t.objectHelper.visible=!1}setBackgroundColor(t){this.bgColor=t,this.fogUseBGColor===!0&&(this.backupFog.color=t)}createChildrenObjects(t,e,n){let i=0;for(let r of t)this.createObject(r.id,r.data,r.children,e,i,n),i+=1}registerObjectCreatedInLegacy(t){this.entityByUuid[t.uuid]=t}unregisterObject(t){delete this.entityByUuid[t.uuid];for(let e of t.children)this.unregisterObject(e)}createObject(t,e,n,i,r,s){var l;let o={scene:this,shared:s},a=n6(t,e,o);return a&&(this.entityByUuid[t]=a,i.add(a),i.children.splice(r,0,i.children.pop()),n.length>0&&(a.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(n,a,s)),a.updateState(e,o),a instanceof yl&&a.updateGeometryGroupsIfNeeded(),a.updateVisible(),a.cloner&&this.toExpandCloner.add(a),(l=e.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(t,e.pathSnapping.pathId)),a}getCenter(t){let e=[];for(let i=0,r=t.length;i<r;++i){let{id:s,recursive:o}=t[i],a=this.find(s),l=o?a.recursiveBBox:a.singleBBox;e.push(...l.vertices)}let n=new _r;return n.setFromPoints(e),n.getCenter(tJ),tJ}copyMatrixWorld(t,e){if(t===null){e.identity();return}let n=this.find(t);n?e.copy(n.matrixWorld):e.identity()}copyParentMatrixWorld(t,e){var i;if(t===null){e.identity();return}let n=(i=this.find(t))==null?void 0:i.parent;n?e.copy(n.matrixWorld):e.identity()}traverseMaterial(t){this.traverseEntity(e=>{if(e instanceof Ho)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)e.material[n]instanceof qf&&t(e.material[n]);else e.material instanceof qf&&t(e.material)})}updateCanvasSize(t,e){this.activeCamera.setViewplaneSize(t,e);let n,i;t>=e?(n=e/t,i=1):(n=1,i=t/e),this.traverseMaterial(r=>{r.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=n,s.uniforms[`f${s.id}_aspectRatio`].value.y=i})})}},dl=Hhe;dl.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera",dl.PERSONAL_CAMERA_EXPORT_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCameraExport";var ZT=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},uct=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return hct(Math.atan2(i,n))},dct=(t,e,n)=>{let i={x:0,y:0};return n=t4(n),i.x=t.x-e*Math.cos(n),i.y=t.y-e*Math.sin(n),i},t4=t=>t*(Math.PI/180),hct=t=>t*(180/Math.PI),fct=t=>isNaN(t.buttons)?t.pressure!==0:t.buttons!==0,Tk=new Map,nJ=t=>{Tk.has(t)&&clearTimeout(Tk.get(t)),Tk.set(t,setTimeout(t,100))},X2=(t,e,n)=>{let i=e.split(/[ ,]+/g),r;for(let s=0;s<i.length;s+=1)r=i[s],t.addEventListener?t.addEventListener(r,n,!1):t.attachEvent&&t.attachEvent(r,n)},iJ=(t,e,n)=>{let i=e.split(/[ ,]+/g),r;for(let s=0;s<i.length;s+=1)r=i[s],t.removeEventListener?t.removeEventListener(r,n):t.detachEvent&&t.detachEvent(r,n)},jhe=t=>(t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t),rJ=()=>{if(typeof window>"u")return;let t=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:t,y:e}},n4=(t,e)=>{e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},i6=(t,e,n)=>{let i=Ghe(t);for(let r in i)if(i.hasOwnProperty(r))if(typeof e=="string")i[r]=e+" "+n;else{let s="";for(let o=0,a=e.length;o<a;o+=1)s+=e[o]+" "+n+", ";i[r]=s.slice(0,-2)}return i},pct=(t,e)=>{let n=Ghe(t);for(let i in n)n.hasOwnProperty(i)&&(n[i]=e);return n},Ghe=t=>{let e={};return e[t]="",["webkit","Moz","o"].forEach(function(n){e[n+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},Ck=(t,e)=>{for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},mct=(t,e)=>{let n={};for(let i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:t.hasOwnProperty(i)&&(n[i]=t[i]);return n},i4=(t,e)=>{if(t.length)for(let n=0,i=t.length;n<i;n+=1)e(t[n]);else e(t)},gct=(t,e,n)=>({x:Math.min(Math.max(t.x,e.x-n),e.x+n),y:Math.min(Math.max(t.y,e.y-n),e.y+n)});typeof window<"u"&&(Whe="ontouchstart"in window,qhe=!!window.PointerEvent,$he=!!window.MSPointerEvent);var Whe,qhe,$he,hb={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},L0,V_={};qhe?L0=hb.pointer:$he?L0=hb.MSPointer:Whe?(L0=hb.touch,V_=hb.mouse):L0=hb.mouse;function Cg(){}Cg.prototype.on=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)r=i[s],n._handlers_[r]=n._handlers_[r]||[],n._handlers_[r].push(e);return n};Cg.prototype.off=function(t,e){var n=this;return n._handlers_=n._handlers_||{},t===void 0?n._handlers_={}:e===void 0?n._handlers_[t]=null:n._handlers_[t]&&n._handlers_[t].indexOf(e)>=0&&n._handlers_[t].splice(n._handlers_[t].indexOf(e),1),n};Cg.prototype.trigger=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)r=i[s],n._handlers_[r]&&n._handlers_[r].length&&n._handlers_[r].forEach(function(o){o.call(n,{type:r,target:n},e)})};Cg.prototype.config=function(t){var e=this;e.options=e.defaults||{},t&&(e.options=mct(e.options,t))};Cg.prototype.bindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){typeof n["on"+e]=="function"?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},X2(t,L0[e],n._domHandlers_[e]),V_[e]&&X2(t,V_[e],n._domHandlers_[e]),n};Cg.prototype.unbindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},iJ(t,L0[e],n._domHandlers_[e]),V_[e]&&iJ(t,V_[e],n._domHandlers_[e]),delete n._domHandlers_[e],this};var r6=Cg;function Ur(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Ur.id,Ur.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Ur.prototype=new r6;Ur.constructor=Ur;Ur.id=0;Ur.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Ur.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=pct("borderRadius","50%"),n=i6("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},Ck(i.el,n),this.options.shape==="circle"&&Ck(i.back,e),Ck(i.front,e),this.applyStyles(i),this};Ur.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this};Ur.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Ur.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Ur.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Ur.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof t=="function"&&t.call(this)},e.options.fadeTime)),e};Ur.prototype.hide=function(t){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=n,typeof t=="function"&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){let n=e.options.restJoystick,i={};i.x=n===!0||n.x!==!1?0:e.instance.frontPosition.x,i.y=n===!0||n.y!==!1?0:e.instance.frontPosition.y,e.setPosition(t,i)}return e};Ur.prototype.setPosition=function(t,e){var n=this;n.frontPosition={x:e.x,y:e.y};var i=n.options.fadeTime+"ms",r={};r.front=i6("transition",["top","left"],i);var s={front:{}};s.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(r),n.applyStyles(s),n.restTimeout=setTimeout(function(){typeof t=="function"&&t.call(n),n.restCallback()},n.options.fadeTime)};Ur.prototype.restCallback=function(){var t=this,e={};e.front=i6("transition","none",""),t.applyStyles(e),t.trigger("rested",t.instance)};Ur.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Ur.prototype.computeDirection=function(t){var e=t.angle.radian,n=Math.PI/4,i=Math.PI/2,r,s,o;if(e>n&&e<n*3&&!t.lockX?r="up":e>-n&&e<=n&&!t.lockY?r="left":e>-n*3&&e<=-n&&!t.lockX?r="down":t.lockY||(r="right"),t.lockY||(e>-i&&e<i?s="left":s="right"),t.lockX||(e>0?o="up":o="down"),t.force>this.options.threshold){var a={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};this.direction={x:s,y:o,angle:r},t.direction=this.direction;for(l in a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return t;(!c.x||!c.y)&&this.trigger("plain",t),c.x||this.trigger("plain:"+s,t),c.y||this.trigger("plain:"+o,t),c.angle||this.trigger("dir dir:"+r,t)}else this.resetDirection();return t};var vct=Ur;function lr(t,e){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=t,n.id=lr.id,lr.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(e),(n.options.mode==="static"||n.options.mode==="semi")&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);let i=getComputedStyle(n.options.zone.parentElement);return i&&i.display==="flex"&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}lr.prototype=new r6;lr.constructor=lr;lr.id=0;lr.prototype.prepareNipples=function(){var t=this,e=t.nipples;e.on=t.on.bind(t),e.off=t.off.bind(t),e.options=t.options,e.destroy=t.destroy.bind(t),e.ids=t.ids,e.id=t.id,e.processOnMove=t.processOnMove.bind(t),e.processOnEnd=t.processOnEnd.bind(t),e.get=function(n){if(n===void 0)return e[0];for(var i=0,r=e.length;i<r;i+=1)if(e[i].identifier===n)return e[i];return!1}};lr.prototype.bindings=function(){var t=this;t.bindEvt(t.options.zone,"start"),t.options.zone.style.touchAction="none",t.options.zone.style.msTouchAction="none"};lr.prototype.begin=function(){var t=this,e=t.options;if(e.mode==="static"){var n=t.createNipple(e.position,t.manager.getIdentifier());n.add(),t.idles.push(n)}};lr.prototype.createNipple=function(t,e){var n=this,i=n.manager.scroll,r={},s=n.options,o={x:n.parentIsFlex?i.x:i.x+n.box.left,y:n.parentIsFlex?i.y:i.y+n.box.top};if(t.x&&t.y)r={x:t.x-o.x,y:t.y-o.y};else if(t.top||t.right||t.bottom||t.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=t.top,a.style.right=t.right,a.style.bottom=t.bottom,a.style.left=t.left,a.style.position="absolute",s.zone.appendChild(a);var l=a.getBoundingClientRect();s.zone.removeChild(a),r=t,t={x:l.left+i.x,y:l.top+i.y}}var c=new vct(n,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:e,position:t,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(n4(c.ui.el,r),n4(c.ui.front,c.frontPosition)),n.nipples.push(c),n.trigger("added "+c.identifier+":added",c),n.manager.trigger("added "+c.identifier+":added",c),n.bindNipple(c),c};lr.prototype.updateBox=function(){var t=this;t.box=t.options.zone.getBoundingClientRect()};lr.prototype.bindNipple=function(t){var e=this,n,i=function(r,s){n=r.type+" "+s.id+":"+r.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};lr.prototype.pressureFn=function(t,e,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var s=t.force||t.pressure||t.webkitForce||0;s!==r&&(e.trigger("pressure",s),i.trigger("pressure "+e.identifier+":pressure",s),r=s)}.bind(i),100)};lr.prototype.onstart=function(t){var e=this,n=e.options,i=t;t=jhe(t),e.updateBox();var r=function(s){e.actives.length<n.maxNumberOfNipples?e.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var a=[t[0]];a.identifier=o,e.processOnEnd(a)}}),e.actives.length<n.maxNumberOfNipples&&e.processOnStart(s))};return i4(t,r),e.manager.bindDocument(),!1};lr.prototype.processOnStart=function(t){var e=this,n=e.options,i,r=e.manager.getIdentifier(t),s=t.force||t.pressure||t.webkitForce||0,o={x:t.pageX,y:t.pageY},a=e.getOrCreate(r,o);a.identifier!==r&&e.manager.removeIdentifier(a.identifier),a.identifier=r;var l=function(d){d.trigger("start",d),e.trigger("start "+d.id+":start",d),d.show(),s>0&&e.pressureFn(t,d,d.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),n.mode!=="semi")l(a);else{var c=ZT(o,a.position);if(c<=n.catchDistance)l(a);else{a.destroy(),e.processOnStart(t);return}}return a};lr.prototype.getOrCreate=function(t,e){var n=this,i=n.options,r;return/(semi|static)/.test(i.mode)?(r=n.idles[0],r?(n.idles.splice(0,1),r):i.mode==="semi"?n.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1)):(r=n.createNipple(e,t),r)};lr.prototype.processOnMove=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),s=e.manager.scroll;if(!fct(t)){this.processOnEnd(t);return}if(!r){console.error("Found zombie joystick with ID "+i),e.manager.removeIdentifier(i);return}if(n.dynamicPage){var o=r.el.getBoundingClientRect();r.position={x:s.x+o.left,y:s.y+o.top}}r.identifier=i;var a=r.options.size/2,l={x:t.pageX,y:t.pageY};n.lockX&&(l.y=r.position.y),n.lockY&&(l.x=r.position.x);var c=ZT(l,r.position),d=uct(l,r.position),u=t4(d),h=c/a,f={distance:c,position:l},p,m;if(r.options.shape==="circle"?(p=Math.min(c,a),m=dct(r.position,p,d)):(m=gct(l,r.position,a),p=ZT(m,r.position)),n.follow){if(c>a){let x=l.x-m.x,b=l.y-m.y;r.position.x+=x,r.position.y+=b,r.el.style.top=r.position.y-(e.box.top+s.y)+"px",r.el.style.left=r.position.x-(e.box.left+s.x)+"px",c=ZT(l,r.position)}}else l=m,c=p;var g=l.x-r.position.x,v=l.y-r.position.y;r.frontPosition={x:g,y:v},n.dataOnly||n4(r.ui.front,r.frontPosition);var y={identifier:r.identifier,position:l,force:h,pressure:t.force||t.pressure||t.webkitForce||0,distance:c,angle:{radian:u,degree:d},vector:{x:g/a,y:-v/a},raw:f,instance:r,lockX:n.lockX,lockY:n.lockY};y=r.computeDirection(y),y.angle={radian:t4(180-d),degree:180-d},r.trigger("move",y),e.trigger("move "+r.id+":move",y)};lr.prototype.processOnEnd=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),s=e.manager.removeIdentifier(r.identifier);!r||(n.dataOnly||r.hide(function(){n.mode==="dynamic"&&(r.trigger("removed",r),e.trigger("removed "+r.id+":removed",r),e.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(e.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),e.trigger("end "+r.id+":end",r),e.ids.indexOf(r.identifier)>=0&&e.ids.splice(e.ids.indexOf(r.identifier),1),e.actives.indexOf(r)>=0&&e.actives.splice(e.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?e.idles.push(r):e.nipples.indexOf(r)>=0&&e.nipples.splice(e.nipples.indexOf(r),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[s.id]=s.identifier))};lr.prototype.onDestroyed=function(t,e){var n=this;n.nipples.indexOf(e)>=0&&n.nipples.splice(n.nipples.indexOf(e),1),n.actives.indexOf(e)>=0&&n.actives.splice(n.actives.indexOf(e),1),n.idles.indexOf(e)>=0&&n.idles.splice(n.idles.indexOf(e),1),n.ids.indexOf(e.identifier)>=0&&n.ids.splice(n.ids.indexOf(e.identifier),1),n.manager.removeIdentifier(e.identifier),n.manager.unbindDocument()};lr.prototype.destroy=function(){var t=this;t.unbindEvt(t.options.zone,"start"),t.nipples.forEach(function(n){n.destroy()});for(var e in t.pressureIntervals)t.pressureIntervals.hasOwnProperty(e)&&clearInterval(t.pressureIntervals[e]);t.trigger("destroyed",t.nipples),t.manager.unbindDocument(),t.off()};var yct=lr;function ts(t){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=rJ(),e.config(t),e.prepareCollections();var n=function(){var r;e.collections.forEach(function(s){s.forEach(function(o){r=o.el.getBoundingClientRect(),o.position={x:e.scroll.x+r.left,y:e.scroll.y+r.top}})})};if(typeof window>"u")return e.collections;X2(window,"resize",function(){nJ(n)});var i=function(){e.scroll=rJ()};return X2(window,"scroll",function(){nJ(i)}),e.collections}ts.prototype=new r6;ts.constructor=ts;ts.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(i){return n=i.get(e),!n}),n}};ts.prototype.create=function(t){return this.createCollection(t)};ts.prototype.createCollection=function(t){var e=this,n=new yct(e,t);return e.bindCollection(n),e.collections.push(n),n};ts.prototype.bindCollection=function(t){var e=this,n,i=function(r,s){n=r.type+" "+s.id+":"+r.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};ts.prototype.bindDocument=function(){var t=this;t.binded||(t.bindEvt(document,"move").bindEvt(document,"end"),t.binded=!0)};ts.prototype.unbindDocument=function(t){var e=this;(!Object.keys(e.ids).length||t===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};ts.prototype.getIdentifier=function(t){var e;return t?(e=t.identifier===void 0?t.pointerId:t.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};ts.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e};ts.prototype.onmove=function(t){var e=this;return e.onAny("move",t),!1};ts.prototype.onend=function(t){var e=this;return e.onAny("end",t),!1};ts.prototype.oncancel=function(t){var e=this;return e.onAny("end",t),!1};ts.prototype.onAny=function(t,e){var n=this,i,r="processOn"+t.charAt(0).toUpperCase()+t.slice(1);e=jhe(e);var s=function(a,l,c){c.ids.indexOf(l)>=0&&(c[r](a),a._found_=!0)},o=function(a){i=n.getIdentifier(a),i4(n.collections,s.bind(null,a,i)),a._found_||n.removeIdentifier(i)};return i4(e,o),!1};ts.prototype.destroy=function(){var t=this;t.unbindDocument(!0),t.ids={},t.index=0,t.collections.forEach(function(e){e.destroy()}),t.off()};ts.prototype.onDestroyed=function(t,e){var n=this;if(n.collections.indexOf(e)<0)return!1;n.collections.splice(n.collections.indexOf(e),1)};var xct=ts,sJ=new xct,bct={create:function(t){return sJ.create(t)},factory:sJ},wct=CS(mce());function nd(t,e){let n=new Ut;if(!t.getAttribute("position"))return n.setAttribute("position",new xt([],3)),n.setIndex([]),n;let{positions:i,triIndices:r}=AR(t.getAttribute("position"),t.getIndex());return n.setAttribute("position",new xt(i,3)),n.setIndex(r),e&&n.applyMatrix4(e),n}var _ct=new tt,Sct=new tt,Dc=[[0,0,0],[0,0,0],[0,0,0]];function Xhe(t){let e=t.elements;Dc[0][0]=e[0],Dc[0][1]=e[4],Dc[0][2]=e[8],Dc[1][0]=e[1],Dc[1][1]=e[5],Dc[1][2]=e[9],Dc[2][0]=e[2],Dc[2][1]=e[6],Dc[2][2]=e[10];let{u:n,v:i}=(0,wct.SVD)(Dc),r=_ct.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),s=Sct.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return r.multiply(s.transpose())}var Ect=class extends Jce{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(t,e){e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):e.isPerspectiveCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(e),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(t,e=!0,n=[]){return t.forEach(i=>{i.visible&&this.intersectObject(i,e,n)}),n}createRaycastLineHelper(){let t=new ip({color:65280,linewidth:10}),e=new q(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new q(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,r=new q().addVectors(e,n.multiplyScalar(i)),s=new Ut;return s.setFromPoints([e,r]),new u2(s,t)}},Yhe=t=>t instanceof $2||t instanceof ay;function Mct(t,e){return t.distance-e.distance}function Khe(t,e,n){if(!(!Kh(e)||!e.visible)){Qc(e)&&e.raycast(t,n);for(let i of e.children)Khe(t,i,n)}}function r4(t,e,n){if(!n.some(r=>Y2(t,r)!==void 0))return[];let i=[];return e.children.forEach(r=>Khe(t,r,i)),i.sort(Mct),i}function s4(t){let e=[];if(t.length){let n=t[0].object;Kh(n)&&e.push(n);let i=n.parent;for(;i;)Yhe(i)&&e.push(i),i=i.parent}return e}function Y2(t,e){if(Qc(e)){if(e.visible){let n=[];return e.raycast(t,n),n.length?n[0]:void 0}}else if(Yhe(e))return Zhe(t,e)}function Zhe(t,e){if(!(!Kh(e)||!e.visible)){if(Qc(e)){let n=[];if(e.raycast(t,n),n.length)return n[0]}for(let n of e.children){let i=Zhe(t,n);if(i)return i}}}function Act(t,e,n){return{x:(t-(n.left+window.scrollX))/n.width*2-1,y:-((e-(n.top+window.scrollY))/n.height)*2+1}}var Tct=class{constructor(t,e,n,i,r,s,o){this.scene=e,this.camera=n,this.sharedAssets=i,this.stopRaycast=r,this.requestRender=s,this.isExport=o,this.raycaster=new Ect,this.raycasterNeedsUpdate=!0,this._useWindowEvents=!1,this.renderer=t,this._useWindowEvents=e.data.publish.mouseEventTarget==="window",this.domElement=t.domElement,this.eventElement=this._useWindowEvents?window:t.domElement}set useWindowEvents(t){this._useWindowEvents=t,this.eventElement=t?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}updateRaycaster(t){if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:e,pageY:n}=t.touches!==void 0&&t.touches.length>0?t.touches[0]:t,i=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(Act(e,n,i),this.camera)}},Qhe=(t=>(t[t.keydown=0]="keydown",t[t.keyup=1]="keyup",t[t.pointerdown=2]="pointerdown",t[t.pointerup=3]="pointerup",t[t.pointermove=4]="pointermove",t[t.wheel=5]="wheel",t[t.scroll=6]="scroll",t))(Qhe||{}),Qd=class{constructor(t){this.eventContext=t,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},Jhe=new Map,gw=new Map,I0=class{constructor(t,e,n,i){this.data=e;let{audio:r,volume:s,delay:o,loop:a}=e;if(!r)throw new Error("Missing property");let l=typeof r=="string"?i.getAudio(r).src:r.data;this.audioPlayer=new Fb({src:l,volume:s,delay:o,loop:a}),gw.has(n.uuid)?gw.get(n.uuid).push(this):gw.set(n.uuid,[this]),Jhe.set(t,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},o4=class{constructor(t){this.data=t}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(t){let e=Jhe.get(t);!e||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):e.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(t){let e=gw.get(t);!(e!=null&&e.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(n=>n.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):e.forEach(n=>n.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let t=[...gw.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>{e.forEach(n=>{n.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(e=>{e.forEach(n=>{n.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},vw=class{constructor(t,e,n,i){if(this.data=e,e.interaction==="play")this.interaction=new I0(t,e,n,i);else if(e.interaction==="pause"||e.interaction==="stop")this.interaction=new o4(e);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof I0?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof I0?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(t){this.interaction instanceof I0&&(t==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}};function Cct(t,e){let n;if("material"in t){let i=t.material;Array.isArray(i)?n=t.material[0].layers.find(r=>r.uuid===e):n=t.material.layers.find(r=>r.uuid===e)}if(n)return n.color.texture.image.img instanceof HTMLVideoElement?n.color.texture.image.img:void 0}var efe=new Map,yw=new Map,xw=class{constructor(t,e,n){this.data=e,this.delay=0,this.status="stopped";let{layerId:i,loop:r,volume:s,delay:o}=e;if(this.object=n,i===void 0)throw new Error("Missing property");let a=Cct(n,i);a&&(this.videoElement=a,this.videoElement.loop=r===1/0,this.videoElement.autoplay=!0,s!==void 0&&(this.videoElement.volume=s)),o!==void 0&&(this.delay=o),yw.has(n.uuid)?yw.get(n.uuid).push(this):yw.set(n.uuid,[this]),efe.set(t,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(t){if(!this.videoElement)return;let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t?(this.mute(),this.delay+=150):e?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let n=this.videoElement.play();n!==void 0&&n.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},a4=class{constructor(t){this.data=t}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(t){let e=efe.get(t);!e||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e[this.data.interaction](),this.disposeDelay()},this.data.delay)):e[this.data.interaction]())}pauseAllVideosFromObject(t){let e=yw.get(t);!(e!=null&&e.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(n=>n[this.data.interaction]()),this.disposeDelay()},this.data.delay)):e.forEach(n=>n[this.data.interaction]()))}pauseAllVideos(){let t=[...yw.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>{e.forEach(n=>{n[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(e=>{e.forEach(n=>{n[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},s6=class{constructor(t,e,n){if(this.data=e,e.interaction==="play")this.interaction=new xw(t,e,n);else if(e.interaction==="pause"||e.interaction==="stop")this.interaction=new a4(e);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof xw?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof xw?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},Pct="text/plain",Dct="us-ascii",oJ=(t,e)=>e.some(n=>n instanceof RegExp?n.test(t):n===t),Rct=(t,{stripHash:e})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:i,data:r,hash:s}=n.groups,o=i.split(";");s=e?"":s;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let l=(o.shift()||"").toLowerCase(),c=[...o.map(d=>{let[u,h=""]=d.split("=").map(f=>f.trim());return u==="charset"&&(h=h.toLowerCase(),h===Dct)?"":`${u}${h?`=${h}`:""}`}).filter(Boolean)];return a&&c.push("base64"),(c.length>0||l&&l!==Pct)&&c.unshift(l),`data:${c.join(";")},${a?r.trim():r}${s?`#${s}`:""}`};function Oct(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return Rct(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,a="";for(;;){let c=s.exec(i.pathname);if(!c)break;let d=c[0],u=c.index,h=i.pathname.slice(o,u);a+=h.replace(/\/{2,}/g,"/"),a+=d,o=u+d.length}let l=i.pathname.slice(o,i.pathname.length);a+=l.replace(/\/{2,}/g,"/"),i.pathname=a}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),o=s[s.length-1];oJ(o,e.removeDirectoryIndex)&&(s=s.slice(0,-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let s of[...i.searchParams.keys()])oJ(s,e.removeQueryParameters)&&i.searchParams.delete(s);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let r=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!r.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var Lct=class{constructor({url:t,context:e},n){if(this.managers=n,!t)throw new Error("Missing property");this.url=t.startsWith("mailto:")?t:Oct(t,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=e??"tab"}dispatch(){var t;kue?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(t=this.managers.controlsManager.orbitControls)==null||t.onPointerUp(Nt[0]),Wit())}},tfe=class{constructor(t,e,n){this.data=t,this.managers=n,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=i=>{var a,l;this.timeoutIdQueue.shift();let r=this.scene.find(i);if(r===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,o=s?(a=r.dataPatched.physics)==null?void 0:a.fusedBody:!0;if(r.cloner){for(let c of r.cloner.children)o?(c.playModeVisible=!1,c.rigidBody&&((l=r.dataPatched.physics)==null?void 0:l.rigidBody)==="positioned"&&(s.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.boundsTree&&(c.boundsTree=void 0)):this.clone===void 0||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(s.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):c.playModeVisible===void 0&&(c.playModeVisible=!0);(o||this.clone===void 0||this.clone===!1)&&(r.visible=!1,r.rigidBody&&(s.removeRigidBody(r.rigidBody),r.rigidBody=void 0),r.boundsTree&&(r.boundsTree=void 0))}else r.rigidBody&&(s.removeRigidBody(r.rigidBody),r.rigidBody=void 0),r.boundsTree&&(r.boundsTree=void 0),r.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.boundsTree!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.rigidBody!==void 0),this.managers.eventManager.requestRender()},this.objects=[...t.objects],this.scene=e,this.controlsManager=n.controlsManager}dispatch(t){this.clone=t,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(t=>window.clearTimeout(t))}},aJ=(()=>{let t,e,n,i;function r(a){!t&&!lJ()&&(e==null?void 0:e.sharedGameControlGlobals.createdObjects.length)>0&&(t=requestAnimationFrame(s)),a&&(e=a,i=a.requestRender)}function s(a){let l=n?a-n:0,c=e.sharedGameControlGlobals.createdObjects,d=e.sharedGameControlGlobals.nCreatedPerAction,u=c.length,h=0;for(;h<u;){let f=c[h];f.userData.createdTime===void 0&&(f.userData.createdTime=a),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&a-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&d[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),i()),h++):(d[f.userData.actionId]>f.userData.quantity&&d[f.userData.actionId]--,c.splice(h,1),f.removeFromParent(),e.sharedGameControlGlobals.rapierWorld&&f.rigidBody?e.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody):(f.boundsTree=void 0,e.sharedGameControlGlobals.entitiesWithTransformAnim=e.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.boundsTree!==void 0)),u--,i())}t=h>0?requestAnimationFrame(s):void 0,n=h>0?a:void 0}function o(){lJ()?t&&(cancelAnimationFrame(t),n=void 0):r()}return typeof document<"u"&&document.addEventListener("visibilitychange",o),r})();function lJ(){return!!document&&document.hidden}var cJ=new vn,Ict=new q,kct=new q,bw=class{constructor(t,e,n){this.data=t,this.scene=e,this.controlsManager=n,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=pn.generateUUID(),this.dispatch=()=>{this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=Iit(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{if(this.timeoutIdQueue.shift(),this.object===void 0)return;let i=new io(this.object);if(i.playModeVisible=!0,i.expand(),this.data.coordinateSystem!=="world"){let s=this.data.coordinateSystem;s===dl.PERSONAL_CAMERA_ID&&this.scene.find(dl.PERSONAL_CAMERA_EXPORT_ID)&&(s=dl.PERSONAL_CAMERA_EXPORT_ID);let o=this.scene.find(s);o&&(o.updateMatrixWorldSVD(),i.hiddenMatrix.setPosition(0,0,0),i.hiddenMatrix.premultiply(o.matrixWorldRigid),i.updateMatrixWorld())}i.position.fromArray(this.data.position),i.rotation.fromArray(this.data.rotation),i.updateMatrix(),this.scene.add(i);let r=this.controlsManager.sharedGameControlGlobals;r.createdObjects.push(i),r.nCreatedPerAction[this.uniqueId]===void 0?r.nCreatedPerAction[this.uniqueId]=1:r.nCreatedPerAction[this.uniqueId]++,i.updateWorldMatrix(!0,!0),i.traverseObject(this.traverseObjectCB),aJ(),this.controlsManager.requestRender()},this.traverseObjectCB=i=>{var a,l,c,d;i.hasNonUniformScale&&i.updateMatrixWorldSVD();let r;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(i instanceof Kl)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;r=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof io)r=i.object;else if(r=i,(a=r.dataPatched.cloner)==null?void 0:a.hideBase)return!0}else{if(i instanceof Kl)return;i instanceof io?r=i.object:r=i}this.data.destroy==="Time"?i.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(i.userData.quantity=this.data.destroyAfterQuantity,i.userData.actionId=this.uniqueId),i.matrixWorld.decompose(Ict,cJ,kct);let s=new q().fromArray(this.data.velocity).applyQuaternion(cJ),o=r.dataPatched;if(!(o.collision==="visibility"?!o.visible:!o.collision)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(i,r,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((l=i.rigidBody)==null||l.collider(0).setActiveEvents(1),i.userData.hasCollisionDestroy=!0),this.data.velocity.some(u=>u!==0)&&this.data.dynamic&&((c=i.rigidBody)==null||c.setLinvel(s.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in i.object&&this.controlsManager.addBoundsTree(i),this.data.velocity.some(u=>u!==0)&&this.data.dynamic&&(i.userData.velocity=s)),((d=r.dataPatched.physics)==null?void 0:d.fusedBody)===!0))return!0},this.scene=e,this.object=this.scene.find(this.data.object),aJ(n)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(t=>window.clearTimeout(t)),this.dispatchThrottled.cancel(),this.scene.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},Nct=class{constructor(t,e,n,i){this.scene=e,this.sharedAssets=n,this.sceneData=t,this.managers=i}dispatch(){var e,n;bfe(this.sceneData,this.scene,this.sharedAssets,!0),(e=this.managers.eventManager)==null||e.reset(),(n=this.managers.controlsManager)==null||n.gameControls.forEach(i=>i.reset(!0));let t;this.sceneData.publish.playCamera?t=this.scene.find(this.sceneData.publish.playCamera):(t=this.scene.find(dl.PERSONAL_CAMERA_ID),t||(t=this.scene.find(dl.PERSONAL_CAMERA_EXPORT_ID))),this.scene.switchActiveCamera(t),this.managers.controlsManager.requestRender()}},nfe={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},o6={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},Bct=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],K2={CSS:{},springs:{}};function Zl(t,e,n){return Math.min(Math.max(t,e),n)}function ww(t,e){return t.indexOf(e)>-1}function Pk(t,e){return t.apply(null,e)}var Ft={arr:function(t){return Array.isArray(t)},obj:function(t){return ww(Object.prototype.toString.call(t),"Object")},pth:function(t){return Ft.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return!("isNode"in t)&&(t.nodeType||Ft.svg(t))},str:function(t){return typeof t=="string"},fnc:function(t){return typeof t=="function"},und:function(t){return typeof t>"u"},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return Ft.hex(t)||Ft.rgb(t)||Ft.hsl(t)},key:function(t){return!nfe.hasOwnProperty(t)&&!o6.hasOwnProperty(t)&&t!=="targets"&&t!=="keyframes"}};function ife(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function rfe(t,e){var n=ife(t),i=Zl(Ft.und(n[0])?1:n[0],.1,100),r=Zl(Ft.und(n[1])?100:n[1],.1,100),s=Zl(Ft.und(n[2])?10:n[2],.1,100),o=Zl(Ft.und(n[3])?0:n[3],.1,100),a=Math.sqrt(r/i),l=s/(2*Math.sqrt(r*i)),c=l<1?a*Math.sqrt(1-l*l):0,d=1,u=l<1?(l*a+-o)/c:-o+a;function h(p){var m=e?e*p/1e3:p;return l<1?m=Math.exp(-m*l*a)*(d*Math.cos(c*m)+u*Math.sin(c*m)):m=(d+u*m)*Math.exp(-m*a),p===0||p===1?p:1-m}function f(){var p=K2.springs[t];if(p)return p;for(var m=1/6,g=0,v=0;;)if(g+=m,h(g)===1){if(v++,v>=16)break}else v=0;var y=g*m*1e3;return K2.springs[t]=y,y}return e?h:f}function zct(t){return t===void 0&&(t=10),function(e){return Math.ceil(Zl(e,1e-6,1)*t)*(1/t)}}var Fct=function(){var t=11,e=1/(t-1);function n(d,u){return 1-3*u+3*d}function i(d,u){return 3*u-6*d}function r(d){return 3*d}function s(d,u,h){return((n(u,h)*d+i(u,h))*d+r(u))*d}function o(d,u,h){return 3*n(u,h)*d*d+2*i(u,h)*d+r(u)}function a(d,u,h,f,p){var m,g,v=0;do g=u+(h-u)/2,m=s(g,f,p)-d,m>0?h=g:u=g;while(Math.abs(m)>1e-7&&++v<10);return g}function l(d,u,h,f){for(var p=0;p<4;++p){var m=o(u,h,f);if(m===0)return u;var g=s(u,h,f)-d;u-=g/m}return u}function c(d,u,h,f){if(!(0<=d&&d<=1&&0<=h&&h<=1))return;var p=new Float32Array(t);if(d!==u||h!==f)for(var m=0;m<t;++m)p[m]=s(m*e,d,h);function g(v){for(var y=0,x=1,b=t-1;x!==b&&p[x]<=v;++x)y+=e;--x;var w=(v-p[x])/(p[x+1]-p[x]),E=y+w*e,A=o(E,d,h);return A>=.001?l(v,E,d,h):A===0?E:a(v,y,y+e,d,h)}return function(v){return d===u&&h===f||v===0||v===1?v:s(g(v),u,f)}}return c}(),sfe=function(){var t={linear:function(){return function(i){return i}}},e={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var r,s=4;i<((r=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((r*3-2)/22-i,2)}},Elastic:function(i,r){i===void 0&&(i=1),r===void 0&&(r=.5);var s=Zl(i,1,10),o=Zl(r,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},n=["Quad","Cubic","Quart","Quint","Expo"];return n.forEach(function(i,r){e[i]=function(){return function(s){return Math.pow(s,r+2)}}}),Object.keys(e).forEach(function(i){var r=e[i];t["easeIn"+i]=r,t["easeOut"+i]=function(s,o){return function(a){return 1-r(s,o)(1-a)}},t["easeInOut"+i]=function(s,o){return function(a){return a<.5?r(s,o)(a*2)/2:1-r(s,o)(a*-2+2)/2}}}),t}();function a6(t,e){if(Ft.fnc(t))return t;var n=t.split("(")[0],i=sfe[n],r=ife(t);switch(n){case"spring":return rfe(t,e);case"cubicBezier":return Pk(Fct,r);case"steps":return Pk(zct,r);default:return Pk(i,r)}}function ofe(t){try{var e=document.querySelectorAll(t);return e}catch{return}}function CR(t,e){for(var n=t.length,i=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r}function PR(t){return t.reduce(function(e,n){return e.concat(Ft.arr(n)?PR(n):n)},[])}function uJ(t){return Ft.arr(t)?t:(Ft.str(t)&&(t=ofe(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function l6(t,e){return t.some(function(n){return n===e})}function c6(t){var e={};for(var n in t)e[n]=t[n];return e}function l4(t,e){var n=c6(t);for(var i in t)n[i]=e.hasOwnProperty(i)?e[i]:t[i];return n}function DR(t,e){var n=c6(t);for(var i in e)n[i]=Ft.und(t[i])?e[i]:t[i];return n}function Uct(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}function Vct(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=t.replace(e,function(a,l,c,d){return l+l+c+c+d+d}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),r=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+r+","+s+","+o+",1)"}function Hct(t){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),n=parseInt(e[1],10)/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100,s=e[4]||1;function o(h,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?h+(f-h)*6*p:p<1/2?f:p<2/3?h+(f-h)*(2/3-p)*6:h}var a,l,c;if(i==0)a=l=c=r;else{var d=r<.5?r*(1+i):r+i-r*i,u=2*r-d;a=o(u,d,n+1/3),l=o(u,d,n),c=o(u,d,n-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+s+")"}function jct(t){if(Ft.rgb(t))return Uct(t);if(Ft.hex(t))return Vct(t);if(Ft.hsl(t))return Hct(t)}function Md(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function Gct(t){if(ww(t,"translate")||t==="perspective")return"px";if(ww(t,"rotate")||ww(t,"skew"))return"deg"}function c4(t,e){return Ft.fnc(t)?t(e.target,e.id,e.total):t}function eu(t,e){return t.getAttribute(e)}function u6(t,e,n){var i=Md(e);if(l6([n,"deg","rad","turn"],i))return e;var r=K2.CSS[e+n];if(!Ft.und(r))return r;var s=100,o=document.createElement(t.tagName),a=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+n;var l=s/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(e);return K2.CSS[e+n]=c,c}function afe(t,e,n){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return n?u6(t,r,n):r}}function d6(t,e){if(Ft.dom(t)&&!Ft.inp(t)&&(eu(t,e)||Ft.svg(t)&&t[e]))return"attribute";if(Ft.dom(t)&&l6(Bct,e))return"transform";if(Ft.dom(t)&&e!=="transform"&&afe(t,e))return"css";if(t[e]!=null)return"object"}function lfe(t){if(Ft.dom(t)){for(var e=t.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map,r;r=n.exec(e);)i.set(r[1],r[2]);return i}}function Wct(t,e,n,i){var r=ww(e,"scale")?1:0+Gct(e),s=lfe(t).get(e)||r;return n&&(n.transforms.list.set(e,s),n.transforms.last=e),i?u6(t,s,i):s}function h6(t,e,n,i){switch(d6(t,e)){case"transform":return Wct(t,e,i,n);case"css":return afe(t,e,n);case"attribute":return eu(t,e);default:return t[e]||0}}function f6(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var i=Md(t)||0,r=parseFloat(e),s=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}function cfe(t,e){if(Ft.col(t))return jct(t);if(/\s/g.test(t))return t;var n=Md(t),i=n?t.substr(0,t.length-n.length):t;return e?i+e:i}function p6(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qct(t){return Math.PI*2*eu(t,"r")}function $ct(t){return eu(t,"width")*2+eu(t,"height")*2}function Xct(t){return p6({x:eu(t,"x1"),y:eu(t,"y1")},{x:eu(t,"x2"),y:eu(t,"y2")})}function ufe(t){for(var e=t.points,n=0,i,r=0;r<e.numberOfItems;r++){var s=e.getItem(r);r>0&&(n+=p6(i,s)),i=s}return n}function Yct(t){var e=t.points;return ufe(t)+p6(e.getItem(e.numberOfItems-1),e.getItem(0))}function dfe(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return qct(t);case"rect":return $ct(t);case"line":return Xct(t);case"polyline":return ufe(t);case"polygon":return Yct(t)}}function Kct(t){var e=dfe(t);return t.setAttribute("stroke-dasharray",e),e}function Zct(t){for(var e=t.parentNode;Ft.svg(e)&&Ft.svg(e.parentNode);)e=e.parentNode;return e}function hfe(t,e){var n=e||{},i=n.el||Zct(t),r=i.getBoundingClientRect(),s=eu(i,"viewBox"),o=r.width,a=r.height,l=n.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function Qct(t,e){var n=Ft.str(t)?ofe(t)[0]:t,i=e||100;return function(r){return{property:r,el:n,svg:hfe(n),totalLength:dfe(n)*(i/100)}}}function Jct(t,e){function n(a){a===void 0&&(a=0);var l=e+a>=1?e+a:0;return t.el.getPointAtLength(l)}var i=hfe(t.el,t.svg),r=n(),s=n(-1),o=n(1);switch(t.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI}}function dJ(t,e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=cfe(Ft.pth(t)?t.totalLength:t,e)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:Ft.str(t)||e?i.split(n):[]}}function ffe(t){var e=t?PR(Ft.arr(t)?t.map(uJ):uJ(t)):[];return CR(e,function(n,i,r){return r.indexOf(n)===i})}function pfe(t){var e=ffe(t);return e.map(function(n,i){return{target:n,id:i,total:e.length,transforms:{list:lfe(n)}}})}function eut(t,e){var n=c6(e);if(/^spring/.test(n.easing)&&(n.duration=rfe(n.easing)),Ft.arr(t)){var i=t.length,r=i===2&&!Ft.obj(t[0]);r?t={value:t}:Ft.fnc(e.duration)||(n.duration=e.duration/i)}var s=Ft.arr(t)?t:[t];return s.map(function(o,a){var l=Ft.obj(o)&&!Ft.pth(o)?o:{value:o};return Ft.und(l.delay)&&(l.delay=a?0:e.delay),Ft.und(l.endDelay)&&(l.endDelay=a===s.length-1?e.endDelay:0),l}).map(function(o){return DR(o,n)})}function tut(t){for(var e=CR(PR(t.map(function(s){return Object.keys(s)})),function(s){return Ft.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),n={},i=function(s){var o=e[s];n[o]=t.map(function(a){var l={};for(var c in a)Ft.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},r=0;r<e.length;r++)i(r);return n}function nut(t,e){var n=[],i=e.keyframes;i&&(e=DR(tut(i),e));for(var r in e)Ft.key(r)&&n.push({name:r,tweens:eut(e[r],t)});return n}function iut(t,e){var n={};for(var i in t){var r=c4(t[i],e);Ft.arr(r)&&(r=r.map(function(s){return c4(s,e)}),r.length===1&&(r=r[0])),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function rut(t,e){var n;return t.tweens.map(function(i){var r=iut(i,e),s=r.value,o=Ft.arr(s)?s[1]:s,a=Md(o),l=h6(e.target,t.name,a,e),c=n?n.to.original:l,d=Ft.arr(s)?s[0]:c,u=Md(d)||Md(l),h=a||u;return Ft.und(o)&&(o=c),r.from=dJ(d,h),r.to=dJ(f6(o,d),h),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=a6(r.easing,r.duration),r.isPath=Ft.pth(s),r.isColor=Ft.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}var mfe={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){if(i.list.set(e,n),e===i.last||r){var s="";i.list.forEach(function(o,a){s+=a+"("+o+") "}),t.style.transform=s}}};function gfe(t,e){var n=pfe(t);n.forEach(function(i){for(var r in e){var s=c4(e[r],i),o=i.target,a=Md(s),l=h6(o,r,a,i),c=a||Md(l),d=f6(cfe(s,c),l),u=d6(o,r);mfe[u](o,r,d,i.transforms,!0)}})}function sut(t,e){var n=d6(t.target,e.name);if(n){var i=rut(e,t),r=i[i.length-1];return{type:n,property:e.name,animatable:t,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}function out(t,e){return CR(PR(t.map(function(n){return e.map(function(i){return sut(n,i)})})),function(n){return!Ft.und(n)})}function vfe(t,e){var n=t.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+o+a+l+s.duration*(s.loop??1)})):e.duration,r.delay=n?Math.min.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return i(s)+o+a+s.delay})):e.delay,r.endDelay=n?r.duration-Math.max.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+o+a+s.duration*(s.loop??1)-s.endDelay-l})):e.endDelay,r}var hJ=0;function aut(t){var e=l4(nfe,t),n=l4(o6,t),i=nut(n,t),r=pfe(t.targets),s=out(r,i),o=vfe(s,n),a=hJ;return hJ++,DR(e,{id:a,children:[],animatables:r,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:n.startOnceDelay,pingPongDelayCorrection:n.pingPongDelayCorrection,pingPongEndDelayCorrection:n.pingPongEndDelayCorrection})}var hl=[],fJ=[],QT,lut=function(){function t(){QT=requestAnimationFrame(e)}function e(n){var i=hl.length;if(i){for(var r=0;r<i;){var s=hl[r];s.paused?(hl.splice(r,1),i-=1):(s.tick(n),r++)}t()}else QT=cancelAnimationFrame(QT)}return t}();function cut(t){document.hidden?(hl.forEach(function(e){return e.pause(t.timeStamp)}),fJ=hl.slice(0),ar.running=hl=[]):fJ.forEach(function(e){return e.play(t.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",cut);function ar(t){t===void 0&&(t={});var e=0,n=0,i=0,r,s,o=0,a=null;function l(E){var A=window.Promise&&new Promise(function(S){return a=S});return E.finished=A,A}var c=aut(t);l(c);function d(){var E=c.direction;E!=="alternate"&&(c.direction=E!=="normal"?"normal":"reverse"),c.reversed=!c.reversed,s.forEach(function(A){(A.loop===1||A.loop%2===0)&&(A.reversed=c.reversed)})}function u(){c.direction="normal",c.reversed=!1,s.forEach(function(E){return E.reversed=!1})}function h(E){return c.reversed?c.duration-E:E}function f(){e=0,n=h(c.currentTime)*(1/ar.speed)}function p(E,A){A&&(c.reversed?A.seek(A.duration*A.loop-(E-A.timelineOffset-A.pingPongDelayCorrection)):A.seek(E-A.timelineOffset-A.startOnceDelay-A.pingPongDelayCorrection))}function m(E){if(c.reversed)for(var A=o;A--;)p(E,s[A]);else for(var S=0;S<o;S++)p(E,s[S])}function g(E){var ee,ie,te,re,me,se,oe,be,Ae,Ie;var A=0,S=c.animations,C=S.length;for(c.direction!=="alternate"&&((ee=c.parent)==null?void 0:ee.direction)==="alternate"?((ie=c.parent)==null?void 0:ie.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1&&((te=c.parent)!=null&&te.reversed&&c.direction==="alternate"?E=c.duration-c.delay+c.endDelay-E:E=c.duration+c.delay-c.endDelay-E):b(!1,(re=c.parent)==null?void 0:re.rewind,c.rewind,(me=c.parent)==null?void 0:me.reversePlayback,c.reversePlayback)&&((se=c.parent)!=null&&se.reversed&&c.direction==="alternate"?E=c.duration-c.delay+c.endDelay-E:E=c.duration+c.delay-c.endDelay-E);A<C;){var T=S[A],P=T.animatable,R=T.tweens,L=R.length-1,O=R[L];L&&(O=CR(R,function(fe){return E<fe.end})[0]||O);let Le;(oe=c.parent)!=null&&oe.reversed&&c.direction==="alternate"?Le=Zl(E-O.start-O.endDelay,0,O.duration)/O.duration:Le=Zl(E-O.start-O.delay,0,O.duration)/O.duration;for(var B=isNaN(Le)?1:O.easing(Le),$=O.to.strings,X=O.round,H=[],U=O.to.numbers.length,N=void 0,k=0;k<U;k++){var z=void 0;let fe,ve;c.direction!=="alternate"?((be=c.parent)==null?void 0:be.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1?(fe=O.to.numbers[k],ve=O.from.numbers[k]||0):(ve=O.to.numbers[k],fe=O.from.numbers[k]||0):b(!0,(Ae=c.parent)==null?void 0:Ae.rewind,c.rewind,(Ie=c.parent)==null?void 0:Ie.reversePlayback,c.reversePlayback)?(fe=O.to.numbers[k],ve=O.from.numbers[k]||0):(ve=O.to.numbers[k],fe=O.from.numbers[k]||0),O.isPath?z=Jct(O.value,B*ve):z=fe+B*(ve-fe),X&&(O.isColor&&k>2||(z=Math.round(z*X)/X)),H.push(z)}var W=$.length;if(!W)N=H[0];else{N=$[0];for(var K=0;K<W;K++){$[K];var J=$[K+1],F=H[K];isNaN(F)||(J?N+=F+J:N+=F+" ")}}mfe[T.type](P.target,T.property,N,P.transforms),T.currentValue=N,A++}}function v(E){c[E]&&!c.passThrough&&c[E](c)}function y(){c.remaining&&c.remaining!==!0&&c.remaining--}let x={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function b(E,A,S,C,T){return x[E<<4|A<<3|S<<2|C<<1|T]}function w(E){var P;var A=c.duration;let S=c.delay,C=A-c.endDelay;(P=c.parent)!=null&&P.reversed&&c.direction==="alternate"&&(S=c.endDelay,C=A-c.delay);var T=h(E);if(c.progress=Zl(T/A*100,0,100),c.reversePlayback=T<c.currentTime,o&&m(T),!c.began&&c.currentTime>=0&&(c.began=!0,v("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,v("loopBegin")),(c.reversed||T>=0)&&T<=S&&c.currentTime!==0&&(g(0),v("change")),(T>=C&&c.currentTime!==A+c.pingPongDelayCorrection||!A)&&(g(A),v("change")),T>S&&T<C?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,v("changeBegin")),g(T),v("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,v("change"),o&&v("timelineChangeComplete")):c.began&&T>C&&v("changeComplete"),c.currentTime=Zl(T,0,A+c.pingPongDelayCorrection),c.began&&v("update"),E>=A)if(y(),!c.remaining)c.paused=!0,c.completed||(c.completed=!0,v("loopComplete"),v("complete"),!c.passThrough&&"Promise"in window&&(a(),l(c)));else{o?e+=c.duration/ar.speed:e+=c.duration;for(let R of s)R.setStartTime(0),R.remaining=R.loop;v("loopComplete"),c.loopBegan=!1,c.direction==="alternate"?d():o&&u()}}return c.reset=function(){var E=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed=E==="reverse",c.remaining=c.loop,s=c.children,o=s.length;for(var A=o;A--;)c.children[A].reset();(c.reversed&&c.loop!==!0||E==="alternate"&&c.loop===1)&&c.remaining++,g(c.reversed?c.duration:0)},c.setStartTime=function(E){e=E},c.set=function(E,A){return gfe(E,A),c},c.tick=function(E){i=E,e||(e=i),w((i+(n-e))*ar.speed)},c.seek=function(E){w(E-e)},c.pause=function(E){c.paused=!0,o&&(r=E??performance.now())},c.play=function(E){!c.paused||(c.completed&&c.reset(),c.paused=!1,hl.push(c),o&&r!==void 0&&(e+=(E??performance.now())-r),QT||lut())},c.reverse=function(){d(),c.completed=!c.reversed,f()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function pJ(t,e){for(var n=e.length;n--;)l6(t,e[n].animatable.target)&&e.splice(n,1)}function uut(t){for(var e=ffe(t),n=hl.length;n--;){var i=hl[n],r=i.animations,s=i.children;pJ(e,r);for(var o=s.length;o--;){var a=s[o],l=a.animations;pJ(e,l),!l.length&&!a.children.length&&s.splice(o,1)}!r.length&&!s.length&&i.pause()}}function dut(t,e){e===void 0&&(e={});var n=e.direction||"normal",i=e.easing?a6(e.easing):null,r=e.grid,s=e.axis,o=e.from||0,a=o==="first",l=o==="center",c=o==="last",d=Ft.arr(t),u=parseFloat(d?t[0]:t),h=d?parseFloat(t[1]):0,f=Md(d?t[1]:t)||0,p=e.start||0+(d?u:0),m=[],g=0;return function(v,y,x){if(a&&(o=0),l&&(o=(x-1)/2),c&&(o=x-1),!m.length){for(var b=0;b<x;b++){if(!r)m.push(Math.abs(o-b));else{var w=l?(r[0]-1)/2:o%r[0],E=l?(r[1]-1)/2:Math.floor(o/r[0]),A=b%r[0],S=Math.floor(b/r[0]),C=w-A,T=E-S,P=Math.sqrt(C*C+T*T);s==="x"&&(P=-C),s==="y"&&(P=-T),m.push(P)}g=Math.max.apply(Math,m)}i&&(m=m.map(function(L){return i(L/g)*g})),n==="reverse"&&(m=m.map(function(L){return s?L<0?L*-1:-L:Math.abs(g-L)}))}var R=d?(h-u)/g:u;return p+R*(Math.round(m[y]*100)/100)+f}}function hut(t){t===void 0&&(t={});var e=ar(t);return e.duration=0,e.add=function(n,i){var r=hl.indexOf(e),s=e.children;r>-1&&hl.splice(r,1);function o(h){h.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=DR(n,l4(o6,t));l.targets=l.targets||t.targets;var c=e.duration;l.autoplay=!1,l.timelineOffset=Ft.und(i)?c:f6(i,c),o(e);var d=ar(l);o(d),s.push(d),d.parent=e;var u=vfe(s,t);return e.delay=u.delay,e.endDelay=u.endDelay,e.duration=u.duration,d.loop===!0&&(e.duration=1/0),e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}ar.version="3.2.0";ar.speed=1;ar.running=hl;ar.remove=uut;ar.get=h6;ar.set=gfe;ar.convertPx=u6;ar.path=Qct;ar.setDashoffset=Kct;ar.stagger=dut;ar.timeline=hut;ar.easing=a6;ar.penner=sfe;ar.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};var yfe=ar,mJ=new q,gJ=new q,vJ=new vn;function fut(t,e,n,i){if(i===0)return n.copy(t);if(i===1)return n.copy(e);let r=t.w*e.w+t.x*e.x+t.y*e.y+t.z*e.z;if(r>=1)return n.copy(t);let s=1-r*r;if(s<=Number.EPSILON){let d=1-i;return n.w=d*t.w+i*e.w,n.x=d*t.x+i*e.x,n.y=d*t.y+i*e.y,n.z=d*t.z+i*e.z,n.normalize(),n}let o=Math.sqrt(s),a=Math.atan2(o,r),l=Math.sin((1-i)*a)/o,c=Math.sin(i*a)/o;return n.w=t.w*l+e.w*c,n.x=t.x*l+e.x*c,n.y=t.y*l+e.y*c,n.z=t.z*l+e.z*c,n}function cg(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(o==null)return;let a=s??e[t],l=o;if(a!==l)return{update:c=>{let d=pn.lerp(a,l,c);r?e[t]=Math.trunc(d):e[t]=d},start:()=>{e[t]=a},end:()=>{e[t]=l}}}function xfe(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(!o)return;let a=e[t],l=[...s??a],c=[...o];if(!(l.length!==c.length||AH(l,c)))return{update:d=>{l.forEach((u,h)=>{let f=pn.lerp(u,c[h],d);e[t][h]=r?Math.trunc(f):f})},start:()=>{Object.assign(e[t],l)},end:()=>{Object.assign(e[t],c)}}}function yJ(t,e,n,i){let r=n[t]?n[t]:void 0,s=i[t];if(!s)return;let o=e[t],a=r?new q().fromArray(r):o.clone(),l=new q().fromArray(s);if(!a.equals(l))return{update:c=>{o.lerpVectors(a,l,c)},start:()=>{o.copy(a)},end:()=>{o.copy(l)}}}function put(t,e,n,i){let r=n[t]?n[t]:void 0,s=i[t];if(!s)return;let o=e[t],a=r?new tt().fromArray(r):o.clone(),l=new q,c=new vn,d=new q;a.decompose(l,c,d);let u=new tt().fromArray(s),h=new q,f=new vn,p=new q;if(u.decompose(h,f,p),!a.equals(u))return{update:m=>{vJ.slerpQuaternions(c,f,m),mJ.lerpVectors(l,h,m),gJ.lerpVectors(d,p,m),o.compose(mJ,vJ,gJ)},start:()=>{o.compose(l,c,d)},end:()=>{o.compose(h,f,p)}}}function mut(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(!o)return;let a=e[t],l=s?typeof s=="string"?r.getColor(s).clone():new Lt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new Lt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let d=a.clone();return e[t]=d,{update:u=>{d.lerpColors(l,c,u)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function sp(t,e,n,i){if(typeof e[t]=="number")return cg(t,e,n??{},i);if(Array.isArray(e[t]))return xfe(t,e,n??{},i)}function gut(t,e,n){var o,a,l,c;let i=[],r=t.cameraType==="OrthographicCamera"?(o=e.orthographic)==null?void 0:o.zoom:(a=e.perspective)==null?void 0:a.zoom,s=t.cameraType==="OrthographicCamera"?(l=n.orthographic)==null?void 0:l.zoom:(c=n.perspective)==null?void 0:c.zoom;if(s!==void 0){let d=r??t.zoom,u=s;d!==u&&i.push({update:h=>{t.zoom=pn.lerp(d,u,h),t.updateProjectionMatrix()},start:()=>{t.zoom=d,t.updateProjectionMatrix()},end:()=>{t.zoom=u,t.updateProjectionMatrix()}})}if(n.targetOffset!==void 0){let d=cg("targetOffset",t,e,n);d&&i.push(d)}return i}function vut(t,e,n,i){if(n.scaleBaked===void 0)return;let r=e.scaleBaked??t.data.geometry.scaleBaked,s=n.scaleBaked;if(Um.isEqual(r,s))return;let o=[];return o.push({update:a=>{t.updateGeometryInteractions({scaleBaked:[pn.lerp(r[0],s[0],a),pn.lerp(r[1],s[1],a),pn.lerp(r[2],s[2],a)]},i),t.invalidateDownstreamBooleanData()},start:()=>{t.updateGeometryInteractions({scaleBaked:r},i),t.invalidateDownstreamBooleanData()},end:()=>{t.updateGeometryInteractions({scaleBaked:s},i),t.invalidateDownstreamBooleanData()}}),o}function yut(t,e,n){if(!n.extrusion)return;let i=t.extrusion,r=e.extrusion??{},s=n.extrusion,o=[];return vde.forEach(a=>{let l=sp(a,i,r,s);l&&o.push(l)}),o}function xut(t,e,n,i){let r=[];if(!("geometry"in n))return r;let s=t.geometry.userData.parameters,o="geometry"in e?e.geometry:{},a=n.geometry;if(t instanceof U_){let l=vut(t,o,a,i);l&&r.push(...l)}else{let l={};if(Object.assign(l,R_(s,AZ)),AZ.forEach(c=>{let d=sp(c,l,o,a);d&&r.push(d)}),t instanceof e6){Object.assign(l,{extrusion:{...s.extrusion}});let c=yut(l,o,a);c&&r.push(...c)}r.length&&r.push({update:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()},start:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()},end:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()}})}return r}function but(t,e,n,i){let r=[];if(n.intensity!==void 0){let s=cg("intensity",t,e,n);s&&r.push(s)}if(n.color!==void 0){let s=mut("color",t,e,n,i);s&&r.push(s)}return r}function wut(t,e,n,i){let r=[];if(Array.isArray(t.material)){if(!("materials"in n&&n.materials))return r;let s="materials"in e&&e.materials?e.materials:[],o=n.materials;t.material.forEach((a,l)=>{if(!o[l])return;let c=s[l]??{},d=o[l];typeof c=="string"||typeof d=="string"||r.push(...xJ(a,c,d,i))})}else{if(!("material"in n&&n.material))return r;let s="material"in e&&e.material?e.material:{},o=n.material;if(typeof s=="string"||typeof o=="string")return r;r.push(...xJ(t.material,s,o,i))}return r}function xJ(t,e,n,i){var o;let r=[],s=W2(n,i)||!!e.layers&&W2(e,i);r.push(Dut(t,s));for(let a of t.layers){let l=(o=e.layers)==null?void 0:o.data(a.uuid),c=n.layers.data(a.uuid);if(!c||!(a.visible??!0)||!(c.visible??!0))continue;let d=a.getNames().filter(u=>!pde.some(h=>u.includes(h)));for(let u of d)try{let h=a.getValue(u),f;if(u==="colors")f=Cut(a,l,c,u);else if(Array.isArray(h))u==="steps"&&(f=Tut(a,l,c,u));else if(typeof h=="number")f=_ut(a,l,c,u);else{if(typeof h=="boolean")continue;h instanceof Se?f=Sut(a,l,c,u):h instanceof q?f=Eut(a,l,c,u):h instanceof zo?f=Aut(a,l,c,u,i):h instanceof Lt?f=Mut(a,l,c,u,i):"isTexture"in h&&(f=Put(a,l,c,u))}f&&(Array.isArray(f)?r.push(...f):r.push(f))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${u}`,h)}}return r}function _ut(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=e?e[i]:t.getValue(i),s=n[i];if(r!==s)return{update:o=>{t.setValue(i,pn.lerp(r,s,o))},start:()=>{t.setValue(i,r)},end:()=>{t.setValue(i,s)}}}function Sut(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=t.getValue(i),s=e?new Se().fromArray(e[i]):r.clone(),o=new Se().fromArray(n[i]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function Eut(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=t.getValue(i),s=e?new q().fromArray(e[i]):r.clone(),o=new q().fromArray(n[i]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function Mut(t,e,n,i,r){if(!t.hasValue(i)||!(i in n))return;let s=e?e[i]:void 0,o=n[i],a=t.getValue(i),l=s?typeof s=="string"?r.getColor(s).clone():new Lt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new Lt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let d=a.clone();return t.setValue(i,d),{update:u=>{d.lerpColors(l,c,u)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function Aut(t,e,n,i,r){if(!t.hasValue(i)||!(i in n))return;let s=e?e[i]:void 0,o=n[i],a=t.getValue(i),l=s?typeof s=="string"?r.getColor(s).clone():new Lt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new zo(o.r,o.g,o.b,o.a);if(l.equals(c))return;let d=a.clone();return t.setValue(i,d),{update:u=>{d.lerpColors(l,c,u)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function Tut(t,e,n,i="steps"){if(!t.hasValue(i)||!(i in n))return;let r=[],s=t.getValue(i),o=e?e[i]:s,a=n[i];for(let l=0;l<s.length;++l){let c=o[l],d=a[l];c!==d&&r.push({update:u=>{s[l]=pn.lerp(c,d,u)},start:()=>{s[l]=c},end:()=>{s[l]=d}})}return r.length?r:void 0}function Cut(t,e,n,i="colors"){if(!t.hasValue(i)||!(i in n))return;let r=[],s=t.getValue(i),o=e?e[i]:s.map(l=>l.toArray()),a=n[i];for(let l=0;l<s.length;++l){let c=[...o[l]],d=[...a[l]];C2.isEqual(c,d)||r.push({update:u=>{s[l].fromArray(C2.lerp(c,d,u))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(d)}})}return r.length?r:void 0}function Put(t,e,n,i="texture"){if(!t.hasValue(i)||!(i in n))return;let r=t.getNode("mat");if(!r)return;let s=e?e[i]:r,o=n[i],a=[...s.repeat],l=[...s.offset],c=[...o.repeat],d=[...o.offset];if(!P0.isEqual(a,c)||!P0.isEqual(l,d))return{update:u=>{r.repeat=P0.lerp(a,c,u),r.offset=P0.lerp(l,d,u),r.updateMatrix()},start:()=>{r.repeat=[...a],r.offset=[...l],r.updateMatrix()},end:()=>{r.repeat=[...c],r.offset=[...d],r.updateMatrix()}}}function Dut(t,e){return{update:()=>{t.transparent=e}}}var Dk=new q,bJ=new ls;function Rut(t,e,n,i){let r=[],s,o,a,l,c,d,u={slide:(e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping).slide,offset:(e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping).offset};if(c=cg("slide",u,e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping,n.pathSnapping??t.dataPatched.pathSnapping),c&&r.push(c),d=cg("offset",u,e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping,n.pathSnapping??t.dataPatched.pathSnapping),d&&r.push(d),!c&&!d&&(s=yJ("position",t,e,n),s&&r.push(s),o=yJ("scale",t,e,n),o&&r.push(o),a=Out(t,e,n,i),a&&r.push(a),l=put("hiddenMatrix",t,e,n),l&&r.push(l)),s||o||a||l||c||d){let h=()=>{var f;t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),(f=t.parent)!=null&&f.matrixWorldFusedFalse&&(t.matrixWorld.multiplyMatrices(t.parent.matrixWorldFusedFalse,t.matrix),t.matrixWorldNeedsUpdate=!1),Qc(t)&&md(t.parent)&&t.invalidateDownstreamBooleanData(!0),t.updatePathSnapping(Object.assign({},e.pathSnapping,u))};r.push({update:h,start:h,end:h})}return r}function Out(t,e,n,i){let r=e!=null&&e.rotation?e.rotation:void 0,s=n.rotation;if(!s)return;let o=r?new q().fromArray(r):new q().setFromEuler(t.rotation),a=new q().fromArray(s);if(o.equals(a))return;let l=Dk.subVectors(a,o);if(i&&l.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new vn().setFromEuler(bJ.setFromVector3(o)),d=new vn().setFromEuler(bJ.setFromVector3(a));return{update:u=>{fut(c,d,t.quaternion,u)},start:()=>{t.rotation.setFromVector3(o)},end:()=>{t.rotation.setFromVector3(a)}}}else return{update:c=>{Dk.lerpVectors(o,a,c),t.rotation.setFromVector3(Dk)},start:()=>{t.rotation.setFromVector3(o)},end:()=>{t.rotation.setFromVector3(a)}}}function Lut(t,e,n){let i=[];if(!("cloner"in n)||!t.cloner)return i;let r=t.cloner,s="cloner"in e?e.cloner:{},o=n.cloner;lde.forEach(h=>{let f;h==="count"?f=cg("count",r.parameters,s,o,!0):f=sp(h,r.parameters,s??{},o),f&&i.push(f)});let a=Iut(r,s,o);a!=null&&a.length&&i.push(...a);let l=kut(r,s,o);l!=null&&l.length&&i.push(...l);let c=Nut(r,s,o);c!=null&&c.length&&i.push(...c);let d=But(r,s,o);d!=null&&d.length&&i.push(...d);let u=zut(r,s,o);return u!=null&&u.length&&i.push(...u),i.length&&i.push({update:()=>{r.update()}}),i}function Iut(t,e,n){if(t.parameters.type!=="radial")return;let i=e.radial,r=n.radial;if(!r)return;let s=t.parameters.radial,o=[];return cde.forEach(a=>{let l=sp(a,s,i??{},r);l&&o.push(l)}),o}function kut(t,e,n){if(t.parameters.type!=="linear")return;let i=e.linear,r=n.linear;if(!r)return;let s=[],o=t.parameters.linear;return ude.forEach(a=>{let l=sp(a,o,i??{},r);l&&s.push(l)}),s}function Nut(t,e,n){if(t.parameters.type!=="grid")return;let i=e.grid,r=n.grid;if(!r)return;let s=[],o=t.parameters.grid;return dde.forEach(a=>{let l;a==="count"?l=xfe(a,o,i??{},r,!0):l=sp(a,o,i??{},r),l&&s.push(l)}),s}function But(t,e,n){if(t.parameters.type!=="toObject")return;let i=e.toObject,r=n.toObject;if(!r)return;let s=[],o=t.parameters.toObject;return hde.forEach(a=>{let l;a==="count"?l=cg(a,o,i??{},r,!0):l=sp(a,o,i??{},r),l&&s.push(l)}),s}function zut(t,e,n){if(!t.parameters.randomness)return;let i=e.randomnessObject,r=n.randomnessObject;if(!r)return;let s=[],o=t.parameters.randomnessObject;return fde.forEach(a=>{let l=sp(a,o,i??{},r);l&&s.push(l)}),s}function wJ(t,e,n,i,r){let s=[];return t.data.visible&&s.push(...Rut(t,e,n,r)),t.data.visible&&s.push(...Lut(t,e,n)),Qc(t)?(t instanceof yl&&t.data.visible&&s.push(...xut(t,e,n,i)),t.data.visible&&s.push(...wut(t,e,n,i))):Hlt(t)?t.data.visible&&s.push(...but(t,e,n,i)):Vlt(t)&&s.push(...gut(t,e,n)),s.length?{update:o=>{s.forEach(a=>a.update(o))},start:o=>{s.forEach(a=>{var l;return(l=a.start)==null?void 0:l.call(a,o)})},end:o=>{s.forEach(a=>{var l;return(l=a.end)==null?void 0:l.call(a,o)})}}:void 0}var _J=new q;function bfe(t,e,n,i=!1){let r=[];e.traverseObject(s=>{var c,d,u,h,f;if(i&&((c=s.rigidBody)==null||c.setTranslation(s.position0,!0),(d=s.rigidBody)==null||d.setRotation(s.rotation0,!0),(u=s.rigidBody)==null||u.setLinvel(_J,!0),(h=s.rigidBody)==null||h.setAngvel(_J,!0)),!Vn.is(s))return;let o=s.uuid,a=s.data;if(delete s.states,!a.states)return;let l=!1;r.some(p=>t.objects.isDescendantOf(o,p))?l=!0:((f=a.physics)==null?void 0:f.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&r.push(o),s.data=a,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let p of a.states)t.environment.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||l)&&(p.data.position!==void 0||p.data.rotation!==void 0||p.data.hiddenMatrix!==void 0)||(s.states||(s.states={}),s.states[p.id]=wm.patch(a,p.data));Uut(e,s,null,n,a.events.find(p=>p.data.type==="Follow"||p.data.type==="LookAt")!==void 0),Fut(e)})}function Fut(t){t.traverseEntity(e=>{for(let n of e.data.events){let i=[];switch(n.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...n.data.actions);break;case"GameControl":for(let r of Object.values(n.data.gameActions))i.push(...r);break;case"DragDrop":i.push(...n.data.dragDropActions.drag,...n.data.dragDropActions.drop);break;case"Conditional":i.push(...n.data.inActions,...n.data.outActions);break}for(let r of i)r.data.type==="Create"&&r.data.hideBase==="Yes"&&(t.find(r.data.object).visible=!1)}})}function Uut(t,e,n,i,r=!1){if(e instanceof yl&&e.removeInteractionGeometry(),e.changeSelectedState(n,{scene:t,shared:i},r),e instanceof yl&&e.updateGeometryGroupsIfNeeded(),e instanceof so&&e.updateCameraState(e.dataPatched,{scene:t,shared:i}),e.cloner)for(let s of e.cloner.children)s.playModeVisible=void 0;e.updateVisible()}function wfe(t){let e;if(t.easing===5){let{control1:n,control2:i}=t;e=`cubicBezier(
			${n[0]}, ${n[1]}, ${i[0]}, ${i[1]}
		)`}else if(t.easing===6){let{mass:n,stiffness:i,damping:r,velocity:s}=t;e=`spring( ${n}, ${i}, ${r}, ${s} )`}else{let n;switch(t.easing){case 0:n=Hh.linear;break;case 1:n=Hh.ease;break;case 2:n=Hh.easeIn;break;case 3:n=Hh.easeOut;break;case 4:n=Hh.easeInOut;break;default:n=Hh.linear}let[i,r,s,o]=n;e=`cubicBezier( ${i}, ${r}, ${s}, ${o} )`}return{duration:t.duration,easing:e}}function _fe(t){let e={delay:0,loop:t.repeat===-1?!0:t.repeat+1};if(t.repeat===0)e.direction="normal",e.rewind=!1;else switch(t.direction){case"pingpong":e.direction="alternate",e.rewind=!1;break;case"pingpong-rewind":e.direction="alternate",e.rewind=!0;break;default:e.direction="normal",e.rewind=!1;break}switch(e.delay=0,e.endDelay=0,e.startOnceDelay=0,e.pingPongDelayCorrection=0,e.pingPongEndDelayCorrection=0,t.delayDirection){case"start-once":e.startOnceDelay=t.delay;break;case"start":e.delay=t.delay;break;case"end":e.endDelay=t.delay;break;case"start-end":case void 0:e.delay=t.delay,e.endDelay=t.delay;break}return e.direction==="alternate"&&(e.delay/=2,e.endDelay/=2,t.delayDirection==="start"?(e.pingPongDelayCorrection=e.delay,typeof e.loop=="number"&&e.loop%2===0&&(e.pingPongEndDelayCorrection=e.delay)):t.delayDirection==="end"?typeof e.loop=="number"&&e.loop%2!==0&&(e.pingPongEndDelayCorrection=e.endDelay):t.delayDirection==="start-end"&&(e.pingPongDelayCorrection=e.delay,e.pingPongEndDelayCorrection=e.endDelay)),e}var Vut={type:"beginState"},Hut={type:"completeState",isfromEntity:!1},SJ=class{constructor(t,e,n,i,r,s){if(this.object=t,this.data=i,this.sharedAssets=r,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof so&&a.dispatchEvent(Vut)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof so&&a.dispatchEvent(Hut)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=wJ(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},e===void 0){let o=JT(this.object,this.object.currentState===n?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=JT(this.object,e);if(!o)throw new Error("Missing property");this.from=o}if(n===void 0)throw new Error("Missing property");{let o=JT(this.object,n);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=e===void 0||n===void 0,this.params={targets:this.targets,t:1,autoplay:!1,..._fe(i),...wfe(i),change:this.onChange},this.callback=wJ(this.object,e===void 0?{}:this.from.data,n===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},_w=class extends uo{constructor(t,e,n){if(super(),this.data=t,this.scene=e,this.sharedAssets=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var r;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let i=e.find(t.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(t=>t.changeBegan)??!1}init(){this.initialCurrentState=JT(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:t=!0,isRebuild:e=!1}={}){var n,i,r,s;try{let o=_fe(this.data.tweens[0].data),a=o.loop;e&&typeof o.loop=="number"&&o.loop--,(n=this.timeline)==null||n.pause(),this.timeline=yfe.timeline({autoplay:!1,...o,...a===!0||a>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(c=>c==null?void 0:c.changeBegan);if(this.timelineNeedsRebuild=l!==-1&&(a===!0||a>1),o.pingPongDelayCorrection&&e===!1&&(this.timelineNeedsRebuild=!0),t){let c=l===-1?0:l;for(let d=c;d<this.data.tweens.length-1;d++){let u=this.data.tweens[d],h=this.data.tweens[d+1],f;d===c&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(f=void 0,this.object instanceof so&&(this.object.wasMovedByUser=!1)):f=u.data.state===void 0?this.currentState:u.data.state;let p=new SJ(this.object,f,h.data.state===void 0?this.currentState:h.data.state,h.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&d===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[d]=p,this.timeline.add(p.params,this.timeline.duration+(d===c?o.delay:0)+(d===c&&!e?o.pingPongDelayCorrection:0))}this.timeline.duration+=o.endDelay}else{let c=l===-1?this.data.tweens.length-1:l+1;for(let d=c;d>0;d--){let u=this.data.tweens[d],h=this.data.tweens[d-1],f;d===c&&(this.object.wasMovedByUser===!0||((r=this.object.previousAction)==null?void 0:r.playing)===!0)?(f=void 0,this.object instanceof so&&(this.object.wasMovedByUser=!1)):f=u.data.state===void 0?this.currentState:u.data.state;let p=new SJ(this.object,f,h.data.state===void 0?this.currentState:h.data.state,u.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&d===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[d-1]=p,this.timeline.add(p.params,this.timeline.duration+(d===c?o.endDelay:0))}this.timeline.duration+=o.delay+(e?0:o.pingPongDelayCorrection)}}catch(o){o instanceof Error&&console.error(o.message)}((s=this.object.previousAction)==null?void 0:s.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay)}pause(){var t;(t=this.timeline)==null||t.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let t=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(t,{scene:this.scene,shared:this.sharedAssets}),this.object.currentState=t}seek(t){var e;this.timeline===void 0&&this.buildTimeline(),(e=this.timeline)==null||e.seek(t*this.timeline.duration)}toggle(t){var e;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=t??!this.toggleIsForward,this.playing?((e=this.timeline)==null||e.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var n;(n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function JT(t,e){var r;let n,i;if(typeof e=="string"?(n=e,i=(r=t.states)==null?void 0:r[n]):e===null&&(n=null,i=t.data),!(n===void 0||i===void 0))return{id:n,data:i}}var jut={type:"beginState"},EJ={type:"completeState",isfromEntity:!1},MJ={type:"requestRender"},Sfe=class extends uo{constructor(t,e){super(),this.data=t,this.scene=e,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new q,this.posEnd=new q,this.qStart=new vn,this.qEnd=new vn,this.zoomStart=1,this.zoomEnd=1,this.toCamera=e.find(t.targetCamera)}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(t=!1){if(!this.data.animate)return;let e={t:0};this.posStart.copy(this.scene.activeCamera.position),this.qStart.copy(this.scene.activeCamera.quaternion),this.zoomStart=this.scene.activeCamera.zoom,this.animation=yfe({targets:e,t:1,...wfe(this.data),update:()=>{e.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera)):(this.posEnd.copy(this.toCamera.position),this.qEnd.copy(this.toCamera.quaternion),this.zoomEnd=this.toCamera.zoom,this.fromCamera=this.scene.activeCamera,this.switchCamera(this.toCamera)),this.scene.activeCamera.dispatchEvent(jut));let n=this.scene.activeCamera;n.position.lerpVectors(this.posStart,this.posEnd,e.t),n.quaternion.slerpQuaternions(this.qStart,this.qEnd,e.t),n.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*e.t,n.wasMovedBySwitchCameraAction=!0,n.updateMatrix(),n.updateMatrixWorld(),n.updateProjectionMatrix(),n.dispatchEvent(MJ),e.t===1&&n.dispatchEvent(EJ)}})}switchCamera(t){this.scene.activeCamera.dispatchEvent({type:"cameraChange",camera:t}),this.scene.switchActiveCamera(t)}play(){this.playing||this.scene.activeCamera!==this.toCamera&&(clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var t;delete this.timeoutId;try{this.data.animate?(this.buildAnimation(),(t=this.animation)==null||t.play()):this.switchCamera(this.toCamera)}catch(e){e instanceof Error&&console.error(e.message)}},this.data.delay*1e3))}pause(){var t;(t=this.animation)==null||t.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(t){var e,n;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=t??!this.toggleIsForward,this.playing?((e=this.animation)==null||e.pause(),this.buildAnimation(!0),(n=this.animation)==null||n.play()):this.timeoutId=window.setTimeout(()=>{var i,r;delete this.timeoutId,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(r=this.animation)==null||r.play()):(this.toggleIsForward?(this.fromCamera=this.scene.activeCamera,this.switchCamera(this.toCamera)):this.switchCamera(this.fromCamera),this.scene.activeCamera.dispatchEvent(EJ),this.scene.activeCamera.dispatchEvent(MJ))},this.data.delay*1e3)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function lc(t,e,n,i,r,s){let o={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[]};return e.forEach(({id:a,data:l})=>{try{l.type==="Audio"?Ah[t.type].includes("Audio")&&o.Audio.push(new vw(a,l,s,i)):l.type==="Video"?Ah[t.type].includes("Video")&&o.Video.push(new s6(a,l,s)):l.type==="Link"?Ah[t.type].includes("Link")&&o.Link.push(new Lct(l,r)):l.type==="Create"?Ah[t.type].includes("Create")&&o.Create.push(new bw(l,n,r.controlsManager)):l.type==="Destroy"?Ah[t.type].includes("Destroy")&&o.Destroy.push(new tfe(l,n,r)):l.type==="Reset"?Ah[t.type].includes("Reset")&&o.Reset.push(new Nct(n.data,n,i,r)):l.type==="Transition"?Ah[t.type].includes("Transition")&&o.Transition.push(new _w(l,n,i)):l.type==="SwitchCamera"&&Ah[t.type].includes("SwitchCamera")&&o.SwitchCamera.push(new Sfe(l,n))}catch{}}),o}function xl(t){Object.values(t).forEach(e=>{e.forEach(n=>{(n instanceof vw||n instanceof s6||n instanceof _w||n instanceof bw||n instanceof tfe||n instanceof Sfe)&&n.dispose()})})}var m6=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],Efe=t=>{var e;return(e=m6.find(([n,i])=>i===t))==null?void 0:e[0]},zS=t=>{var e;return(e=m6.find(([n])=>n===t))==null?void 0:e[1]},Gut=(t,e)=>{let n=Efe(t);if(n){let i=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:e}),i}},Wut=class extends Qd{constructor(t){super(t),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=n=>{var s;if(!n.eventName||!n.target||n.eventName==="Scroll")return;let i=(s=this.splineEvents[Efe(n.eventName)])==null?void 0:s[n.target.uuid];if(!i)return;n.eventName==="Scroll"&&n.deltaY!==void 0&&Object.assign(i,{deltaY:n.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(i)};let{scene:e}=this.eventContext;e.traverseEntity(n=>{var i,r;if((i=n.data)!=null&&i.events.length){for(let[s,o]of m6)if(n.data.events.some(a=>a.data.type===o&&!a.data.disabled)){this.objectsPerEvents.has(s)?(r=this.objectsPerEvents.get(s))==null||r.push(n):this.objectsPerEvents.set(s,[n]);let a={id:n.uuid,name:n.name},l=Gut(o,a),c=this.splineEvents[s];c?c[n.uuid]=l:this.splineEvents[s]={[n.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(t=>{t.forEach(e=>{e.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(t=>{t.forEach(e=>{e.removeEventListener("beginEvent",this.onBeginEvent)})})}},qut=class{constructor(t,e,n,i,r,s){if(this.id=t,this.data=e,this.object=n,this.entered=!1,this.useToggle=e.toggle,(e.type==="KeyDown"||e.type==="KeyUp"||e.type==="KeyPress")&&!e.key)throw new Error("Missing property");this.actions=lc(e,e.actions,i,r,s,n)}disconnect(){xl(this.actions)}dispatchHeld(t){this.actions.Create.forEach(e=>{t&&e.dispatchThrottled.cancel(),e.dispatchThrottled()})}dispatch(t=!1){let e=new Set;this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this?(n.object.currentTransitionEvent=this,n.init()):this.useToggle===!1&&e.add(n)}),this.useToggle?(this.actions.Transition.forEach(n=>{n.toggle()}),this.actions.SwitchCamera.forEach(n=>{n.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(n=>n.playFromCurrent()),this.actions.SwitchCamera.forEach(n=>n.playFromCurrent()),this.actions.Create.forEach(n=>n.dispatchStart())):(this.actions.Transition.some(n=>n.playing)||this.actions.Transition.forEach(n=>{e.has(n)===!1&&n.play()}),this.actions.SwitchCamera.some(n=>n.playing)||this.actions.SwitchCamera.forEach(n=>{n.play()})),this.actions.Link.forEach(n=>{n.dispatch()}),t===!1&&this.actions.Create.forEach(n=>{n.dispatch()}),this.actions.Destroy.forEach(n=>{n.dispatch()}),this.actions.Reset.forEach(n=>{n.dispatch()}),this.actions.Audio.forEach(n=>{n.dispatchBasic()}),this.actions.Video.forEach(n=>{n.dispatchBasic()})}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStop()))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent())),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()})}},$ut=class extends Qd{constructor(t,e){super(t),this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.windowMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.onWindowMouseDown=r=>{r.target===this.eventContext.domElement&&this.canvasMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&s.dispatch()}),this.windowMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&s.dispatch()})},this.onWindowMouseUp=r=>{r.target===this.eventContext.domElement&&this.canvasMouseEvents.forEach(s=>{s.data.type==="MouseUp"?s.dispatch():s.data.type==="MousePress"&&s.dispatchRelease()}),this.windowMouseEvents.forEach(s=>{s.data.type==="MouseUp"?s.dispatch():s.data.type==="MousePress"&&s.dispatchRelease()})},this.onMouseDown=r=>{Nt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseDown"))},this.onMouseUp=r=>{Nt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=r=>{Nt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent())},this.onMousePressRelease=r=>{Nt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent(!0))},this.onKeyDown=r=>{this.heldKeys[r.key]||(this.handleKeyEvent(r,"KeyDown"),this.handleKeyEventHeld(r,"KeyDown",!0)),this.heldKeys[r.key]=!0},this.onKeyUp=r=>{this.handleKeyEvent(r,"KeyUp"),this.handleKeyEventHeld(r,"KeyUp",!0)},this.onKeyPressDown=r=>{this.heldKeysPress[r.key]?this.handleKeyEventHeld(r,"KeyPress"):(this.handleKeyEvent(r,"KeyPress"),this.handleKeyEventHeld(r,"KeyPress",!0)),this.heldKeysPress[r.key]=!0},this.onKeyPressUp=r=>{this.handleKeyEvent(r,"KeyPress",!0)},this.releaseHeldKey=r=>{delete this.heldKeys[r.key]},this.releaseHeldKeyPress=r=>{delete this.heldKeysPress[r.key]},this._onUserEvent=({eventName:r,target:s,reverse:o})=>{var l,c,d,u;if(!r||!s)return;let a=zS(r);a&&(a==="MouseDown"||a==="MouseUp"||a==="MousePress"?(s.dispatchEvent({type:"beginEvent",eventName:a}),(c=(l=this.eventsPerObjects[a])==null?void 0:l[s.uuid])==null||c.forEach(h=>{h.dispatchUserEvent(o)})):(a==="KeyDown"||a==="KeyUp"||a==="KeyPress")&&(s.dispatchEvent({type:"beginEvent",eventName:a}),(u=(d=this.eventsPerObjects[a])==null?void 0:d[s.uuid])==null||u.forEach(h=>{h.dispatchUserEvent()})))};let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var o,a;if(!((o=r.data)!=null&&o.events.length))return;let s=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let l of s){let c=this.eventsPerObjects[l];r.data.events.filter(({data:d})=>d.type===l&&d.disabled!==!0).forEach(({id:d,data:u})=>{try{let h=new qut(d,u,r,n,i,e);h.actions.Video.length&&(this.hasVideoAction=!0),(u.type==="MouseDown"||u.type==="MouseUp"||u.type==="MousePress")&&(u.mode==="Canvas"||u.mode==="Window")?u.mode==="Canvas"&&this.canvasMouseEvents.push(h):c[r.uuid]?c[r.uuid].push(h):c[r.uuid]=[h]}catch{}}),(a=c[r.uuid])!=null&&a.length&&this.objectsPerTypes[l].push(r)}})}connect(){var e,n,i,r,s,o;let{domElement:t}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),typeof window<"u"&&(window.addEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.addEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),(e=this.objectsPerTypes.MouseDown)!=null&&e.length&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(n=this.objectsPerTypes.MouseUp)!=null&&n.length&&(this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),(i=this.objectsPerTypes.MousePress)!=null&&i.length&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMousePressRelease)),(r=this.objectsPerTypes.KeyDown)!=null&&r.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(s=this.objectsPerTypes.KeyUp)!=null&&s.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(o=this.objectsPerTypes.KeyPress)!=null&&o.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([a,l])=>{l.forEach(c=>{c.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},typeof window<"u"&&(window.removeEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.removeEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerdown",this.onMousePressDown),t.removeEventListener("pointerup",this.onMouseUp),t.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(e=>{Object.values(e).forEach(n=>{n.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(e=>{e.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([e,n])=>{n.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(t){let{stopRaycast:e,raycaster:n,scene:i}=this.eventContext,r=this.objectsPerTypes[t];if(r.length)if(e){let s=r4(n,i,r);s4(s).forEach(o=>{this.eventsPerObjects[t][o.uuid]&&this.handleObjectMouseEventDispatch(o,t)})}else r.forEach(s=>{Y2(n,s)&&this.handleObjectMouseEventDispatch(s,t)})}handleMousePressEvent(t=!1){let e="MousePress",n=this.objectsPerTypes[e],i=[];if(n.length){if(!t){let{stopRaycast:r,raycaster:s,scene:o}=this.eventContext;if(r){let a=r4(s,o,n);i=s4(a)}else n.forEach(a=>{Y2(s,a)&&i.push(a)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{i.includes(r)||this.handleObjectMouseEventDispatchRelease(r,e)}),i.length&&i.forEach(r=>{this.handleObjectMouseEventDispatch(r,e)}),this._prevObjects=i}}handleObjectMouseEventDispatch(t,e){var n,i;t.dispatchEvent({type:"beginEvent",eventName:e}),(i=(n=this.eventsPerObjects[e])==null?void 0:n[t.uuid])==null||i.forEach(r=>{r.dispatch()})}handleObjectMouseEventDispatchRelease(t,e){var n,i;t.dispatchEvent({type:"beginEvent",eventName:e}),(i=(n=this.eventsPerObjects[e])==null?void 0:n[t.uuid])==null||i.forEach(r=>{r.dispatchRelease()})}handleKeyEvent(t,e,n=!1){this.objectsPerTypes[e].forEach(i=>{let r=this.eventsPerObjects[e][i.uuid];r.some(({data:s})=>"key"in s&&s.key===t.key)&&i.dispatchEvent({type:"beginEvent",eventName:e}),r.forEach(s=>{"key"in s.data&&s.data.key===t.key&&(n?s.dispatchRelease():s.dispatch(!0))})})}handleKeyEventHeld(t,e,n=!1){this.objectsPerTypes[e].forEach(i=>{this.eventsPerObjects[e][i.uuid].forEach(r=>{"key"in r.data&&r.data.key===t.key&&r.dispatchHeld(n)})})}},Xut=new q,Yut=new q,Mfe=class{constructor(t,e,n,i,r){this.actionsIn=lc(t,t.inActions,n,i,r,e),this.actionsOut=lc(t,t.outActions,n,i,r,e)}disconnect(){xl(this.actionsIn),xl(this.actionsOut)}},Kut=class extends Mfe{constructor(t,e,n,i,r,s){super(e,n,i,r,s),this.id=t,this.data=e,this.object=n,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{let c=Xut.setFromMatrixPosition(this.objects[0].matrixWorld),d=Yut.setFromMatrixPosition(this.objects[1].matrixWorld),u=c.distanceTo(d)<=this.distance?"in":"out";if(this.stage!==u){let h=u==="in"?this.actionsIn:this.actionsOut;h.Audio.forEach(f=>f.dispatchConditional()),h.Video.forEach(f=>f.dispatchConditional()),h.Create.forEach(f=>f.dispatch()),h.Destroy.forEach(f=>f.dispatch()),h.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),h.Transition.forEach(f=>f.play()),h.SwitchCamera.forEach(f=>f.play()),this.stage=u}};let{distance:o,fromObject:a,toObject:l}=e.condition;this.distance=o;for(let c of[a,l]){if(!c)throw new Error("Missing property");let d=i.find(c);if(!d)throw new Error("Missing property");this.objects.push(d)}}connect(){this.objects.forEach(t=>{t.addEventListener("updateMatrix",this.onUpdateMatrix)}),this.onUpdateMatrix()}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(t=>{t.removeEventListener("updateMatrix",this.onUpdateMatrix)})}},Zut=class extends Mfe{constructor(t,e,n,i,r,s){var l;super(e,n,i,r,s),this.id=t,this.data=e,this.object=n,this.onBegin=({target:c,state:d})=>{this.toState!==d&&(this.actionsOut.Audio.forEach(u=>u.dispatchConditional()),this.actionsOut.Video.forEach(u=>u.dispatchConditional()),this.actionsOut.Create.forEach(u=>u.dispatch()),this.actionsOut.Destroy.forEach(u=>u.dispatch()),this.actionsIn.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(u=>u.play()),this.actionsIn.SwitchCamera.forEach(u=>u.pause()),this.actionsOut.SwitchCamera.forEach(u=>u.play()))},this.onComplete=({target:c,state:d})=>{this.toState===d&&(this.actionsIn.Audio.forEach(u=>u.dispatchConditional()),this.actionsIn.Video.forEach(u=>u.dispatchConditional()),this.actionsIn.Create.forEach(u=>u.dispatch()),this.actionsIn.Destroy.forEach(u=>u.dispatch()),this.actionsOut.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(u=>u.play()),this.actionsOut.SwitchCamera.forEach(u=>u.pause()),this.actionsIn.SwitchCamera.forEach(u=>u.play()))};let{condition:o}=e;if(!o.object)throw new Error("Missing property");let a=i.find(o.object);if(!a)throw new Error("Missing property");if(this.toObject=a,o.state&&!((l=this.toObject.states)!=null&&l[o.state]))throw new Error("Missing property");this.toState=o.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.SwitchCamera.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.SwitchCamera.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.SwitchCamera.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.SwitchCamera.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},Qut=class extends Qd{constructor(t,e){super(t),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var s;if((s=r.data)!=null&&s.events.length){for(let{id:o,data:a}of r.data.events)if(!a.disabled&&a.type==="Conditional")try{let l;a.condition.type==="Comparison"||(a.condition.type==="Distance"?l=new Kut(o,a,r,n,i,e):a.condition.type==="State"&&(l=new Zut(o,a,r,n,i,e))),l&&(this.eventsPerConditions[a.condition.type].push(l),(l.actionsIn.Video.length||l.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(e=>e.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(e=>e.disconnect()))}},fb=new q,Dh=new q,kp=new q,AJ=new ia,Jut=.01,On=new q,Cr=new q,TJ=new q,Em=new vn,Rk=new ls,edt=new tt,Ok=new cs,jv=new q,Rc=new q,Gv=.2;function Lk(t,e){!e||(e[0]<e[1]&&(t.x=Math.min(Math.max(t.x,e[0]),e[1])),e[2]<e[3]&&(t.y=Math.min(Math.max(t.y,e[2]),e[3])),e[4]<e[5]&&(t.z=Math.min(Math.max(t.z,e[4]),e[5])))}var tdt=function(){let t=new tt;return(e,n,i)=>{let r=e.obj;t.copy(r.hiddenMatrix),r.parent!==null&&t.premultiply(r.parent.matrixWorld),t.invert(),r.position.copy(n),e.reference==="global"&&Lk(r.position,e.limits),r.position.applyMatrix4(t),e.reference==="parent"?Lk(r.position,e.limits):e.reference==="local"&&(Em.copy(e.quat0).invert(),r.position.sub(e.position0),r.position.applyQuaternion(Em),Lk(r.position,e.limits),Em.invert(),r.position.applyQuaternion(Em),r.position.add(e.position0)),t.multiply(i??r.matrixWorld).decompose(On,r.quaternion,Cr),r.updateMatrix(),r.hasNonUniformScale&&(r.updateMatrixWorld(),r.updateMatrixWorldSVD()),r instanceof Ho&&md(r.parent)&&r.invalidateDownstreamBooleanData(!0)}}(),ndt=class{constructor(t,e,n,i,r,s){this.object=t,this.data=e,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=lc(e,e.dragDropActions.drag,n,i,r,this.object),this.actionsDrop=lc(e,e.dragDropActions.drop,n,i,r,this.object);let o=[];this.data.objects.forEach(a=>{let l=n.find(a);!l||l.dataPatched.visible!==!1&&(o.push(l),s[l.uuid]&&s[l.uuid].forEach(c=>{let d=n.find(c);!d||d.dataPatched.visible!==!1&&o.push(d)}))}),this.data.dropDestinations.forEach(a=>{let l=n.find(a);!l||l.dataPatched.visible!==!1&&(this.dropDestIds.push(l.uuid),s[l.uuid]&&s[l.uuid].forEach(c=>{let d=n.find(c);!d||d.dataPatched.visible!==!1&&this.dropDestIds.push(d.uuid)}))}),this.dragItems=o.map(a=>(this.data.planeMode==="locked"&&(a.userData.lockedPlane=!0),a.userData.worldPosition0=new q().setFromMatrixPosition(a.matrixWorld),{obj:a,fromPosition:new q().setFromMatrixPosition(a.matrixWorld),pointStart:new q,pointEnd:new q,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new q().copy(a.position),quat0:new vn().copy(a.quaternion),snapped:!1,orientationMatrix:new tt,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){xl(this.actionsDrag),xl(this.actionsDrop),this.dragItems.forEach(t=>{t.fromPosition.copy(t.obj.userData.worldPosition0),t.pointStart.copy(t.fromPosition),t.pointEnd.copy(t.pointStart),t.obj.recursiveBBoxNeedsUpdate=!0,t.obj.userData.lockedPlane=void 0,t.obj.position.copy(t.position0),t.obj.quaternion.copy(t.quat0),t.obj.updateMatrix()})}},idt=class extends Qd{constructor(t,e){super(t),this.managers=e,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{var a;if(Nt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,scene:s}=this.eventContext,o=s.raycastWithClones(r);if(this.lastDropDestination=null,o.length===0){this.activeEvent=null;return}for(let l of this.events){let c=0;for(let{obj:d,pointEnd:u,pointStart:h}of l.dragItems){if(d===o[0].object||d===o[0].object.object||Vn.is(d)&&d.isAncestorOf(o[0].object.uuid)){if(l.activeIdx=c,l.activeDragItem.reset=!1,l.activeDragItem.currentDampingFactor=l.data.dampingFactor,l.activeDragItem.snapped=!1,l.data.cursor==="hand"&&this.setCursor("grabbing"),this.managers.controlsManager.usePhysics){l.activeDragItem.obj.rigidBody&&l.activeDragItem.obj.rigidBody.setBodyType(2,!0);let f=l.activeDragItem.obj;d.hasNonUniformScale&&d.updateMatrixWorldSVD(),(f.hasNonUniformScale?f.matrixWorldRigid:f.matrixWorld).decompose(On,Em,Cr),Rk.setFromQuaternion(Em),f.prevR===void 0?(f.prevR=Rk.clone(),f.prevT=On.clone()):(f.prevR.copy(Rk),f.prevT.copy(On)),this.managers.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(l.activeDragItem.obj)}this.calcPlaneIntersectPos(d,h,l.data.plane,l.data.referenceFrame),u.copy(h),(this.managers.controlsManager.usePhysics&&((a=d.dataPatched.physics)==null?void 0:a.rigidBody)==="dynamic"||l.data.drop===!1||l.data.resetOnSnapFail===!1)&&l.activeDragItem.fromPosition.setFromMatrixPosition(l.activeDragItem.obj.matrixWorld),this.activeEvent=l,this.managers.controlsManager.orbitControls&&(this.managers.controlsManager.orbitControls.enabled=!1);return}c++}}this.activeEvent=null},this.onPointerMove=i=>{var a,l,c,d;if(Nt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,scene:s}=this.eventContext,o=s.raycastWithClones(r);if(Nt.length===0){let u=!1;for(let h of this.events){for(let{obj:f}of h.dragItems)if(f===((a=o[0])==null?void 0:a.object)||f===((c=(l=o[0])==null?void 0:l.object)==null?void 0:c.object)||Vn.is(f)&&f.isAncestorOf((d=o[0])==null?void 0:d.object.uuid)){switch(u=!0,h.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(u)break}u||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let u=this.activeEvent.activeDragItem;u.snapped=!1;let h;if(this.activeEvent.data.drop&&(h=o.filter(f=>u.obj!==f.object&&!u.obj.isAncestorOf(f.object.uuid)&&!(f.object instanceof $2)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(p=>p===f.object.uuid||s.find(p).isAncestorOf(f.object.uuid))))[0]),h){let f=TJ.copy(h.face.normal).applyMatrix3(Ok.getNormalMatrix(h.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")u.fromPosition.setFromMatrixPosition(h.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(u.fromPosition.copy(h.point),this.activeEvent.data.snapSurfaceMode==="bbox"){On.copy(f).applyMatrix3(Ok.setFromMatrix4(u.obj.matrixWorld).transpose());let p=u.obj;On.x>Gv?Cr.x=-p.recursiveBBox.min.x:On.x<-Gv&&(Cr.x=-p.recursiveBBox.max.x),On.y>Gv?Cr.y=-p.recursiveBBox.min.y:On.y<-Gv&&(Cr.y=-p.recursiveBBox.max.y),On.z>Gv?Cr.z=-p.recursiveBBox.min.z:On.z<-Gv&&(Cr.z=-p.recursiveBBox.max.z),Cr.applyMatrix3(Ok.invert())}else Cr.copy(f).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);u.fromPosition.add(Cr)}this.activeEvent.data.autoOrient&&(On.set(0,1,0).cross(f),On.length()<1e-4&&On.set(-1,0,0).cross(f),Cr.crossVectors(TJ,On),u.orientationMatrix.makeBasis(On,Cr,f)),u.pointStart.copy(u.fromPosition),u.pointEnd.copy(u.pointStart),u.currentDampingFactor=this.activeEvent.snapDampingFactor,u.snapped=!0,this.lastDropDestination!==h.object&&(this.lastDropDestination=h.object,this.activeEvent.actionsDrop.Transition.forEach(p=>{p.play()}),this.activeEvent.actionsDrop.Audio.forEach(p=>{p.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(p=>{p.dispatchThrottled()}))}else u.orientationMatrix.makeRotationFromQuaternion(u.quat0),this.lastDropDestination=null,u.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(u.obj,u.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(f=>{f.dispatchThrottled()}),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.scene,shared:this.eventContext.sharedAssets})}))},500),this.updateDragItem(u),u.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{var r;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let s=((r=this.activeEvent.activeDragItem.obj.dataPatched.physics)==null?void 0:r.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.managers.controlsManager.usePhysics===!1||!s)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.managers.controlsManager.usePhysics&&s&&(this.managers.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(o=>{o.stop(),o.object.currentState!==null&&o.object.changeSelectedState(null,{scene:this.eventContext.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Audio.forEach(o=>{o.dispatchGameControl("stop")})),this.managers.controlsManager.orbitControls&&(this.managers.controlsManager.orbitControls.enabled=!0)}};let n={};t.scene.traverseEntity(i=>{i.component&&(n[i.component.uuid]?n[i.component.uuid].push(i.uuid):n[i.component.uuid]=[i.uuid])}),t.scene.traverseEntity(i=>{var r;(r=i.data)==null||r.events.filter(s=>s.data.type==="DragDrop"&&!s.data.disabled).forEach(s=>{this.events.push(new ndt(i,s.data,t.scene,t.sharedAssets,e,n))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let t=this.eventContext.domElement;t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(e=>e.dispose())}setCursor(t){this.eventContext.domElement.style.cursor=t}onAnimationFrameDamping(){for(let t of this.events)for(let e of t.dragItems)e.paused||this.updateDragItem(e,!0)}calcPlaneIntersectPos(t,e,n,i){let{camera:r,raycaster:s}=this.eventContext;r.getWorldDirection(Dh),Dh.negate();let o=Em.identity();switch(i==="parent"?edt.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix).decompose(On,o,Cr):i==="local"&&t.matrixWorld.decompose(On,o,Cr),n){case"x":On.set(1,0,0).applyQuaternion(o),jv.copy(Dh).cross(On),Rc.copy(On).cross(jv);break;case"y":On.set(0,1,0).applyQuaternion(o),jv.copy(Dh).cross(On),Rc.copy(On).cross(jv);break;case"z":On.set(0,0,1).applyQuaternion(o),jv.copy(Dh).cross(On),Rc.copy(On).cross(jv);break;case"xy":Rc.set(0,0,1).applyQuaternion(o);break;case"yz":Rc.set(1,0,0).applyQuaternion(o);break;case"xz":Rc.set(0,1,0).applyQuaternion(o);break;case"adaptive":Dh.angleTo(Cr.set(0,1,0))>Math.PI/6?(On.crossVectors(Cr.set(0,1,0),Dh),Rc.crossVectors(On,Cr)):Rc.set(0,1,0);break;default:Rc.copy(Dh);break}kp.setFromMatrixPosition(t.matrixWorld);let a=t.userData.lockedPlane?t.userData.worldPosition0:kp;if(AJ.setFromNormalAndCoplanarPoint(Rc,a),!!s.ray.intersectPlane(AJ,e)&&(n==="x"||n==="y"||n==="z")){let l=Cr.subVectors(e,a).dot(On);e.copy(a).addScaledVector(On,l)}}updateDragItem(t,e=!1){var n,i;kp.setFromMatrixPosition(t.obj.matrixWorld),t.reset==="current"?fb.subVectors(t.fromPosition,kp).divideScalar(t.currentDampingFactor):t.reset==="original"?(fb.subVectors(t.obj.userData.worldPosition0,kp).divideScalar(t.currentDampingFactor),t.fromPosition.copy(t.obj.userData.worldPosition0),t.pointStart.copy(t.fromPosition),t.pointEnd.copy(t.pointStart)):fb.subVectors(t.pointEnd,t.pointStart).add(t.fromPosition).sub(kp).divideScalar(t.currentDampingFactor),t.paused=t.currentDampingFactor>1?fb.length()<Jut:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||e)&&tdt(t,fb.add(kp),(n=this.activeEvent)!=null&&n.data.drop&&((i=this.activeEvent)!=null&&i.data.autoOrient)?t.orientationMatrix:null),t.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.managers.eventManager.requestRender()}},Wv=new q,Ik=new q,qu=new q,$u=new q,CJ=new ia,rdt=.01,sdt={type:"requestRender"},odt=function(){let t=new q,e=new q;return(n,i,r)=>r>0?(t.subVectors(n,i),t.length()<=r?n:e.copy(i).add(t.normalize().multiplyScalar(r))):i}(),PJ=function(){let t=new tt;return(e,n)=>{e.position.copy(n),e.parent!==null&&(t.copy(e.parent.matrixWorld).invert(),e.position.applyMatrix4(t)),t.copy(e.hiddenMatrix).invert(),e.position.applyMatrix4(t),e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e instanceof Ho&&md(e.parent)&&e.invalidateDownstreamBooleanData(!0)}}(),adt=class{constructor(t,e,n,i,r){this.data=t,this.object=e,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new q,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...xF.defaultData,...t,...t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},t.target===void 0||t.target==="cursor"||(t.target==="personal camera"?this.target=n.find(dl.PERSONAL_CAMERA_ID):this.target=n.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=lc(t,t.actions,n,i,r,e)}},ldt=class extends Qd{constructor(t,e){super(t),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(Nt.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{scene:n}=this.eventContext;n.traverseEntity(i=>{var s,o;let r=(s=i.data)==null?void 0:s.events.find(a=>a.data.type==="Follow"&&!a.data.disabled);r&&(!n.data.environment.usePhysics||((o=i.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new adt(r.data,i,n,t.sharedAssets,e))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),ua&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events)if(n.target!==void 0){let i=n.target,r=this.onTargetChange(n);this.pairOfEventListeners.push([i,r]),i.addEventListener("requestRender",r)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),ua&&t.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let n of this.events)n.paused=!0,n.isReset=!1,xl(n.actions)}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t,!0)}updateSingleEvent(t,e=!1){var o;this.events.forEach(a=>{a.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:n,limitDistance:i,limitDistanceEnabled:r}=t.data;if(t.object.getWorldPosition(qu),t.isReset)$u.copy(t.worldPosition0);else if(t.target)t.target.getWorldPosition($u);else{let{camera:a,raycaster:l}=this.eventContext;if(n==="custom"?(a.getWorldDirection(Ik),Ik.negate(),Wv.copy(Ik)):n==="xy"?Wv.set(0,0,1):n==="xz"?Wv.set(0,1,0):n==="yz"&&Wv.set(1,0,0),CJ.setFromNormalAndCoplanarPoint(Wv,qu),!l.ray.intersectPlane(CJ,$u))return}if(!t.isReset){if($u.distanceTo(t.worldPosition0)>i&&r&&t.target)if(t.snapComplete=!1,t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)$u.copy(t.worldPosition0),t.currentDampingFactor=t.resetDampingFactor;else return;else if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return}t.data.enabledTranslation[0]===!1&&($u.x=qu.x),t.data.enabledTranslation[1]===!1&&($u.y=qu.y),t.data.enabledTranslation[2]===!1&&($u.z=qu.z);let s=odt(qu,$u,t.wasOutside?0:t.data.maxDelta);if(t.currentDampingFactor>1){let a=Wv.subVectors(s,qu).divideScalar(t.currentDampingFactor);qu.add(a),e&&PJ(t.object,qu),t.paused=a.length()<rdt}else PJ(t.object,s),t.paused=!0;(o=t.object)==null||o.dispatchEvent({type:"beginEvent",eventName:"Follow"}),t.object.dispatchEvent(sdt)}},pb=new q,eT=new q,mb=new tt,qv=new vn,Rh=new vn,gb=new q,vb=new q,Np=new q,Xu=new q,kk=new ia,cdt=1e-6,udt={type:"requestRender"},ddt={type:"changeRotation"},DJ=function(){let t=new tt;return function(e,n){e.parent!==null?t.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix):t.copy(e.hiddenMatrix),n.premultiply(Xhe(t).invert()),e.rotation.setFromRotationMatrix(n),e.updateMatrix(),e instanceof Ho&&md(e.parent)&&e.invalidateDownstreamBooleanData(!0)}}(),hdt=class{constructor(t,e,n){this.object=e,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new vn,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...bF.defaultData,...t,...t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},t.target===void 0||t.target==="cursor"||(t.target==="personal camera"?this.target=n.find(dl.PERSONAL_CAMERA_ID):this.target=n.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},fdt=class extends Qd{constructor(t){super(t),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=n=>{if(!(Nt.length>1)){this._lastMouseEvent=n,this.eventContext.updateRaycaster(n);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onScroll=n=>{if(this._lastMouseEvent){let i=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(i)}},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)},this.createUserEventListener=n=>({eventName:i,target:r})=>{if(!i||!r)return;let s=zS(i);s&&s==="LookAt"&&this.updateSingleEvent(n)};let{scene:e}=this.eventContext;e.traverseEntity(n=>{var r,s;let i=(r=n.data)==null?void 0:r.events.find(o=>o.data.type==="LookAt"&&!o.data.disabled);i&&(!e.data.environment.usePhysics||((s=n.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new hdt(i.data,n,e))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),ua&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?e.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events){if(n.target!==void 0){let s=this.onTargetChange(n),o=n.target;this.pairOfEventListeners.push([o,s]),o.addEventListener("requestRender",s)}let i=this.createUserEventListener(n),r=n.object;this.pairOfUserEventListeners.push([r,i]),r.addEventListener("userEvent",i)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),ua&&t.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave),e.removeEventListener("scroll",this.onScroll);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let[n,i]of this.pairOfUserEventListeners)n.removeEventListener("userEvent",i);for(let n of this.events)n.paused=!0,n.isReset=!1}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t)}updateSingleEvent(t){var h;let{tilt:e,axis:n,distance:i,plane:r,limitDistance:s,enabledRotation:o,limitDistanceEnabled:a}=t.data,{camera:l,raycaster:c}=this.eventContext,{object:d,target:u}=t;if(d.getWorldPosition(gb),!t.isReset)if(t.target)t.target.getWorldPosition(vb);else{if(r==="custom"?(l.getWorldDirection(eT),eT.negate(),kk.setFromNormalAndCoplanarPoint(eT,gb)):(r==="xy"?pb.set(0,0,1):r==="xz"?pb.set(0,1,0):r==="yz"&&pb.set(1,0,0),kk.setFromNormalAndCoplanarPoint(pb,gb)),!c.ray.intersectPlane(kk,vb))return;i>0&&(r==="custom"||r===void 0)&&vb.addScaledVector(eT,i)}if(t.isReset||(u?e==="target"?Np.copy(u.up).applyMatrix4(mb.extractRotation(u.matrixWorld)).normalize():o.some(f=>f===!1)?(n==="x"?(Xu.set(0,0,1),o[2]===!1&&Xu.set(0,1,0)):n==="y"?(Xu.set(1,0,0),o[0]===!1&&Xu.set(0,0,1)):(Xu.set(0,1,0),o[1]===!1&&Xu.set(1,0,0)),Np.copy(Xu).applyQuaternion(t.worldQuaternion0).normalize()):Np.set(0,1,0):r==="custom"?Np.set(0,1,0):Np.copy(pb)),t.isReset)Rh.copy(t.worldQuaternion0);else if(gb.distanceTo(vb)>s&&a&&u)if(t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)Rh.copy(t.worldQuaternion0),t.currentDampingFactor=t.resetDampingFactor;else return;else{if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return;pdt(mb,vb,gb,Np,n,Xu),Rh.setFromRotationMatrix(mb),qv.setFromUnitVectors(Xu.applyQuaternion(Rh),Np),o.some(f=>f===!1)&&e!=="target"&&Rh.premultiply(qv).normalize()}t.currentDampingFactor>1?(d.updateWorldMatrix(!0,!1),qv.setFromRotationMatrix(Xhe(d.matrixWorld)),qv.slerp(Rh,1/t.currentDampingFactor),DJ(d,mb.makeRotationFromQuaternion(qv)),t.paused=8*(1-qv.dot(Rh))<cdt):(DJ(d,mb.makeRotationFromQuaternion(Rh)),t.paused=!0),(h=t.object)==null||h.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),d.dispatchEvent(udt),d.dispatchEvent(ddt)}},ja=new q,Tr=new q,er=new q;function pdt(t,e,n,i,r,s){let o=t.elements;er.subVectors(e,n),er.lengthSq()===0&&(er.z=1),er.normalize(),Tr.crossVectors(i,er),Tr.lengthSq()===0&&(Math.abs(i.z)===1?er.x+=1e-4:er.z+=1e-4,er.normalize(),Tr.crossVectors(i,er)),Tr.normalize(),ja.crossVectors(er,Tr),r==="x"?s.z===1?[Tr,ja,er]=[er,Tr,ja]:(Tr.negate(),[Tr,er]=[er,Tr]):r==="y"?s.x===1?[Tr,ja,er]=[ja,er,Tr]:(Tr.negate(),[ja,er]=[er,ja]):s.x===1&&(Tr.negate(),[Tr,ja]=[ja,Tr]),o[0]=Tr.x,o[4]=ja.x,o[8]=er.x,o[1]=Tr.y,o[5]=ja.y,o[9]=er.y,o[2]=Tr.z,o[6]=ja.z,o[10]=er.z}var mdt=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.entered=!1,this.actions=lc(e,e.actions,i,r,s,n)}disconnect(){xl(this.actions)}dispatchEnter(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()))}dispatchLeave(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent()))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()))}},gdt=class extends Qd{constructor(t,e){super(t),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=r=>{Nt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onMouseUp=r=>{Nt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=r=>{Nt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:r,target:s,reverse:o})=>{var l;if(!r||!s)return;let a=zS(r);a&&a==="MouseHover"&&(s.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(l=this.eventsPerObjects[s.uuid])==null||l.forEach(c=>c.dispatchUserEvent(o)))};let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var s,o;if(!(!r.visible||!((s=r.data)!=null&&s.events.length))){for(let{id:a,data:l}of r.data.events)if(!l.disabled&&l.type==="MouseHover")try{let c=new mdt(a,l,r,n,i,e);this.eventsPerObjects[r.uuid]?this.eventsPerObjects[r.uuid].push(c):this.eventsPerObjects[r.uuid]=[c]}catch{}(o=this.eventsPerObjects[r.uuid])!=null&&o.length&&this.objects.push(r)}})}connect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),ua&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(e=>{e.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),ua&&(t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerup",this.onMouseUp)),t.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(e=>{e.forEach(n=>{n.disconnect()})}),this.objects.forEach(e=>{e.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(t=!1){let e=[];if(!t){let{stopRaycast:n,raycaster:i,scene:r}=this.eventContext;if(n){let s=r4(i,r,this.objects);e=s4(s)}else this.objects.forEach(s=>{Y2(i,s)&&e.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{var i;e.includes(n)||(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[n.uuid])==null||i.forEach(r=>r.dispatchLeave()))}),e.length&&e.forEach(n=>{var i;n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[n.uuid])==null||i.forEach(r=>r.dispatchEnter())}),this._prevObjects=e}},vdt=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.scrollCounter=0,this.actions=lc(e,e.actions,i,r,s,n)}connect(){this.scrollCounter=0}disconnect(){xl(this.actions)}dispatch(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let e=t>0?1:-1;this.scrollCounter+=e,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let n=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(n)),this.actions.Create.forEach(i=>i.dispatchThrottled())}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>{e.playFromCurrent()}),this.actions.Create.forEach(e=>e.dispatchThrottled())}},ydt=class{constructor(t,e,n,i,r,s,o){this.id=t,this.data=e,this.object=n,this.domElement=s,this.managers=o,this.scrollStart=0,this.scrollEnd=0,this.actions=lc(e,e.actions,i,r,o,n)}computeScrollBounds(){let t=this.domElement.getBoundingClientRect(),e=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||e.scrollTop,r=n.clientTop||e.clientTop||0,s=Math.round(t.top+i-r);if(this.data.startFrom==="enter"){let o=window.innerHeight,a=t.height,l=this.data.enterAnchor,c=l==="top"?o:l==="bottom"?o-a:o-a*.5;this.scrollStart=s-c}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.dispatch({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){xl(this.actions)}handleResize(){this.computeScrollBounds()}dispatch({x:t,y:e}){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let n=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(e-this.scrollStart)/n));this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Create.forEach(r=>r.dispatchThrottled())}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>{e.playFromCurrent()}),this.actions.Create.forEach(e=>e.dispatchThrottled())}},xdt=class extends Qd{constructor(t,e){super(t),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([o,a])=>{a.forEach(l=>l.handleResize())})},this.onScroll=o=>{if(!this.isInview)return;let a={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,c])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:a}),c.forEach(d=>d.dispatch(a))})},this.onWheel=o=>{!this.isInview||o.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([a,l])=>{a.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:o.deltaY}),l.forEach(c=>c.dispatch(o.deltaY))})},this.onUserEvent=({eventName:o,target:a,reverse:l})=>{var d;if(!o||!a)return;let c=zS(o);c&&c==="Scroll"&&(a.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(d=this.wheelEventsPerObject.get(a))==null||d.forEach(u=>{u.dispatchUserEvent(l)}))};let{scene:n,sharedAssets:i,domElement:r,isExport:s}=this.eventContext;n.traverseEntity(o=>{var a,l,c;if((a=o.data)!=null&&a.events.length){for(let{id:d,data:u}of o.data.events)if(!u.disabled&&u.type==="Scroll")if(u.trigger==="load"||!s){let h=new vdt(d,u,o,n,i,e);this.wheelEventsPerObject.has(o)?(l=this.wheelEventsPerObject.get(o))==null||l.push(h):this.wheelEventsPerObject.set(o,[h])}else{let h=new ydt(d,u,o,n,i,r,e);this.scrollEventsPerObject.has(o)?(c=this.scrollEventsPerObject.get(o))==null||c.push(h):this.scrollEventsPerObject.set(o,[h])}}}),this.intersectionObserver=new IntersectionObserver(o=>{let a=o[0];a&&(this.isInview=a.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)})}},bdt=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.actions=lc(e,e.actions,i,r,s,n)}disconnect(){xl(this.actions)}dispatch(){this.actions.Transition.forEach(t=>{t.play()}),this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Create.forEach(t=>{t.dispatchFromStart()}),this.actions.Destroy.forEach(t=>{t.dispatchFromStart()})}dispatchAfter(t){this.actions.Audio.forEach(e=>{(e.interaction.data.triggerAfter??"any")===t&&(e.interaction instanceof I0?e.interaction.audioPlayer.play():e.interaction instanceof o4&&e.interaction.dispatch())}),this.actions.Video.forEach(e=>{let n=e.interaction.data.triggerAfter??"autoplay";n===t&&(e.interaction instanceof xw?e.interaction.play(n==="autoplay"):e.interaction instanceof a4&&e.interaction.dispatch())})}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent())),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.interaction instanceof I0?e.interaction.audioPlayer.play():e.interaction instanceof o4&&e.interaction.dispatch()}),this.actions.Video.forEach(e=>{e.interaction instanceof xw?e.interaction.play():e.interaction instanceof a4&&e.interaction.dispatch()})}},wdt=class extends Qd{constructor(t,e){super(t),this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:s}=this.eventContext;(s?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,a])=>{o.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(l=>{l.dispatchAfter("any")})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:s,reverse:o})=>{var l,c;if(!r||!s)return;let a=zS(r);a&&a==="Start"&&(s.dispatchEvent({type:"beginEvent",eventName:"Start"}),(l=this.eventsPerObject.get(s))==null||l.forEach(d=>{d.dispatchUserEvent(o)}),(c=this.eventsAfterPerObject.get(s))==null||c.forEach(d=>{d.dispatchUserEvent(o)}))};let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var s,o,a,l;if((s=r.data)!=null&&s.events.length)for(let{id:c,data:d}of r.data.events){if(d.disabled||d.type!=="Start")continue;let u=new bdt(c,d,r,n,i,e);(u.actions.Transition.length||u.actions.SwitchCamera.length||u.actions.Create.length||u.actions.Destroy.length)&&(this.eventsPerObject.has(r)?(o=this.eventsPerObject.get(r))==null||o.push(u):this.eventsPerObject.set(r,[u])),u.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(u):this.eventsAfterPerObject.set(r,[u])),u.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(l=this.eventsAfterPerObject.get(r))==null||l.push(u):this.eventsAfterPerObject.set(r,[u]))}})}connect(){if([...this.eventsAfterPerObject.values()].some(t=>t.length)){let{domElement:t,isExport:e}=this.eventContext,n=e?document:t;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.addEventListener("userEvent",this.onUserEvent)}),this.onPlay()}[...this.eventsPerObject.entries()].forEach(([t,e])=>{t.dispatchEvent({type:"beginEvent",eventName:"Start"}),e.forEach(n=>n.dispatch()),t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(t=>t.length)){let{domElement:t,isExport:e}=this.eventContext,n=e?document:t;n.removeEventListener("pointerdown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),n.removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.removeEventListener("userEvent",this.onUserEvent),r.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([t,e])=>{t.removeEventListener("userEvent",this.onUserEvent),e.forEach(n=>n.disconnect())})}},_dt=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.disabled=!0,this.actions=lc(e,e.actions,i,r,s,n),this.target=e.target,this.useToggle=e.toggle}disconnect(){xl(this.actions)}dispatch(t){this.disabled||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?this.actions.Transition.forEach(e=>{e.toggle()}):this.actions.Transition.forEach(e=>{e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(t??!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}))}},Sdt="https://unpkg.com/@splinetool/runtime@0.9.373/build/",Edt="https://unpkg.com/@splinetool/navmesh-wasm@0.9.373/build/",Mdt=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${Sdt}' + 'navmesh.js'),
		fetch('${Edt}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,Adt=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,Tdt=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,Cdt=.001,Pdt={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},Afe,mn,rs;Xit.then(t=>{Afe=t,mn=new t.Vec3,rs=new t.Vec3});var Ddt=new q,Rdt=class{constructor(t=!1,e=!1){this.usePhysics=t,this.isExport=e,this.onPointerDown=n=>{if(Nt.length!==1)return;let{raycaster:i,scene:r}=this.eventContext;this.eventContext.updateRaycaster(n);let s=r.raycastWithClones(i);if(s.length!==0){for(let o of this.gameControls){let a=Ddt.copy(o.colliderWorldPosition);a.y-=o.colliderHeight/2,o.path=this.computePath(a,s[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(n,i)=>r=>{var h,f,p,m,g,v;let s;if(r instanceof Kl)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;s=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof io)s=r.object;else if(s=r,((h=s.dataPatched.cloner)==null?void 0:h.disabled)===!1&&((f=s.dataPatched.cloner)==null?void 0:f.hideBase)&&((p=s.dataPatched.physics)==null?void 0:p.fusedBody)!==!0)return!0;if(i&&!s.userData.navmesh)return;let o=s.dataPatched;if(!o.visible&&o.collision!==!0)return!0;r.updateMatrixWorldSVD();let a=Z2(o),l=s.userData.hasDestroy,c=s.userData.hasDrag,d=!1,u=!1;for(let y of o.events)y.data.disabled!==!0&&(y.data.type==="GameControl"?d=!0:y.data.type==="Follow"&&(u=!0));if(d||a||u||l||c)return!0;if(this.usePhysics&&((m=o.physics)==null?void 0:m.rigidBody)==="dynamic"){if(this.usePhysics&&((g=o.physics)!=null&&g.fusedBody))return!0}else if("geometry"in r&&n.push(nd(r.geometry,r.matrixWorld)),this.usePhysics&&((v=o.physics)==null?void 0:v.fusedBody))return r.traverseObject((y,x)=>{var E;if(x===0)return;let b;if(y instanceof Kl)if(y.objectForSample){if(y.objectForSample.dataPatched.physics.fusedBody)return;b=y.object}else return y.object.dataPatched.physics.fusedBody===!0&&y.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(y instanceof io)b=y.object;else if(b=y,(E=y.dataPatched.cloner)==null?void 0:E.hideBase)return!0;let w=b.dataPatched;if(!w.visible&&w.collision!==!0)return!0;"geometry"in y&&n.push(nd(y.geometry,y.matrixWorld))}),!0},this.traverseNoPhysics=(n,i)=>r=>{let s;if(r instanceof Kl)return;r instanceof io?s=r.object:s=r;let o=s.dataPatched;if(o.collision==="visibility"?!o.visible:!o.collision)return!0;if(i&&!s.userData.navmesh)return;let a=r.geometry,l=s.userData.hasDestroy===!0,c=s.userData.hasDrag===!0;if(Z2(o)||l||c||s.dataPatched.events.some(d=>d.data.disabled!==!0&&d.data.type==="GameControl"))return!0;a&&n.push(nd(a,r.matrixWorld))},this.navmeshWasm=Afe,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(e?Mdt:Adt)+Tdt])),this._worker=new Worker(this._workerURL)}init(t,e,n){this.gameControls=e,this.eventContext=n,this.resolution=t.ch,this.setDefaultQueryExtent(new q().setScalar(t.ch*t.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(n.scene,t,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(t,e,n){e.objects.forEach(l=>{var d;let c=t.find(l);c.traverseEntity(u=>{u.userData.navmesh=!0}),(d=c.cloner)==null||d.traverseObject(u=>{u.userData.navmesh=!0})});let i=[],r=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,e.zones==="custom");if(t.traverseObject(r),e.objects.forEach(l=>{var d;let c=t.find(l);c.traverseEntity(u=>{u.userData.navmesh=void 0}),(d=c.cloner)==null||d.traverseObject(u=>{u.userData.navmesh=void 0})}),i.length===0)return!1;let s=_m(i),{positions:o,triIndices:a}=AR(s.getAttribute("position"),s.getIndex());return this._worker.postMessage([o,o.length/3,a,a.length,{...Pdt,...e}]),this._worker.onmessage=n,!0}createDebugNavGeometry(){let t,e,n=this.navMesh.getDebugNavMesh(),i=n.getTriangleCount(),r=new Uint32Array(i*3),s=new Float32Array(i*3*3);for(t=0;t<i*3;t++)r[t]=t;for(t=0;t<i;t++)for(e=0;e<3;e++){let a=n.getTriangle(t).getPoint(e);s[t*9+e*3+0]=a.x,s[t*9+e*3+1]=a.y,s[t*9+e*3+2]=a.z}let o=new Ut;return o.setIndex(new Wt(r,1)),o.setAttribute("position",new Wt(s,3)),o}getClosestPoint(t){return mn.x=t.x,mn.y=t.y,mn.z=t.z,this.navMesh.getClosestPoint(mn)}getClosestPointToRef(t,e){mn.x=t.x,mn.y=t.y,mn.z=t.z;let n=this.navMesh.getClosestPoint(mn);e.set(n.x,n.y,n.z)}getRandomPointAround(t,e){return mn.x=t.x,mn.y=t.y,mn.z=t.z,this.navMesh.getRandomPointAround(mn,e)}getRandomPointAroundToRef(t,e,n){mn.x=t.x,mn.y=t.y,mn.z=t.z;let i=this.navMesh.getRandomPointAround(mn,e);n.set(i.x,i.y,i.z)}moveAlong(t,e){return mn.x=t.x,mn.y=t.y,mn.z=t.z,rs.x=e.x,rs.y=e.y,rs.z=e.z,this.navMesh.moveAlong(mn,rs)}moveAlongToRef(t,e,n){return mn.x=t.x,mn.y=t.y,mn.z=t.z,rs.x=e.x,rs.y=e.y,rs.z=e.z,this.navMesh.moveAlong(mn,rs)}computePath(t,e){let n=this.getClosestPoint(e);rs.x=n.x,rs.y=n.y,rs.z=n.z,this.getClosestPoint(t);let i=this.navMesh.computePath(mn,rs),r=i.getPointCount(),s=[];for(let o=0;o<r;o++){let a=i.getPoint(o);s.push(new q(a.x,a.y,a.z))}return s}createCrowd(t,e){return new Odt(this,t,e)}setDefaultQueryExtent(t){mn.x=t.x,mn.y=t.y,mn.z=t.z,this.navMesh.setDefaultQueryExtent(mn)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(t){let e=t.length*t.BYTES_PER_ELEMENT,n=this.navmeshWasm._malloc(e),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,n,e);i.set(t);let r=new this.navmeshWasm.NavmeshData;r.dataPointer=i.byteOffset,r.size=t.length,this.navMesh.buildFromNavmeshData(r),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let t=this.navMesh.getNavmeshData(),e=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,t.dataPointer,t.size),n=new Uint8Array(t.size);return n.set(e),this.navMesh.freeNavmeshData(t),n}getDefaultQueryExtentToRef(t){let e=this.navMesh.getDefaultQueryExtent();t.set(e.x,e.y,e.z)}dispose(){var t;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(t=this.eventContext)==null||t.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(t,e,n){return mn.x=t.x,mn.y=t.y,mn.z=t.z,this.navMesh.addCylinderObstacle(mn,e,n)}addBoxObstacle(t,e,n){return mn.x=t.x,mn.y=t.y,mn.z=t.z,rs.x=e.x,rs.y=e.y,rs.z=e.z,this.navMesh.addBoxObstacle(mn,rs,n)}removeObstacle(t){this.navMesh.removeObstacle(t)}isSupported(){return this.navmeshWasm!==void 0}},Odt=class{constructor(t,e,n){this.navmeshWasmWrapper=t,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(e,n,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(t,e){}addAgent(t,e,n){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=e.radius,i.height=e.height,i.maxAcceleration=e.maxAcceleration,i.maxSpeed=e.maxSpeed,i.collisionQueryRange=e.collisionQueryRange,i.pathOptimizationRange=e.pathOptimizationRange,i.separationWeight=e.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let r=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z),i);return this.transforms.push(n),this.agents.push(r),this.reachRadii.push(e.reachRadius?e.reachRadius:e.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new q(0,0,0)),r}getAgentPosition(t){return this.crowd.getAgentPosition(t)}getAgentPositionToRef(t,e){let n=this.crowd.getAgentPosition(t);e.set(n.x,n.y,n.z)}getAgentVelocity(t){return this.crowd.getAgentVelocity(t)}getAgentVelocityToRef(t,e){let n=this.crowd.getAgentVelocity(t);e.set(n.x,n.y,n.z)}getAgentNextTargetPath(t){return this.crowd.getAgentNextTargetPath(t)}getAgentNextTargetPathToRef(t,e){let n=this.crowd.getAgentNextTargetPath(t);e.set(n.x,n.y,n.z)}getAgentState(t){return this.crowd.getAgentState(t)}overOffmeshConnection(t){return this.crowd.overOffmeshConnection(t)}agentGoto(t,e){this.crowd.agentGoto(t,new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z));let n=this.agents.indexOf(t);n>-1&&(this._agentDestinationArmed[n]=!0,this._agentDestination[n].set(e.x,e.y,e.z))}agentTeleport(t,e){this.crowd.agentTeleport(t,new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z))}updateAgentParameters(t,e){let n=this.crowd.getAgentParameters(t);e.radius!==void 0&&(n.radius=e.radius),e.height!==void 0&&(n.height=e.height),e.maxAcceleration!==void 0&&(n.maxAcceleration=e.maxAcceleration),e.maxSpeed!==void 0&&(n.maxSpeed=e.maxSpeed),e.collisionQueryRange!==void 0&&(n.collisionQueryRange=e.collisionQueryRange),e.pathOptimizationRange!==void 0&&(n.pathOptimizationRange=e.pathOptimizationRange),e.separationWeight!==void 0&&(n.separationWeight=e.separationWeight),this.crowd.setAgentParameters(t,n)}removeAgent(t){this.crowd.removeAgent(t);let e=this.agents.indexOf(t);e>-1&&(this.agents.splice(e,1),this.transforms.splice(e,1),this.reachRadii.splice(e,1),this._agentDestinationArmed.splice(e,1),this._agentDestination.splice(e,1))}getAgents(){return this.agents}update(t){if(this.navmeshWasmWrapper.navMesh.update(),t<=Cdt)return;let e=1/60,n=10;{let i=Math.floor(t/e);i>n&&(i=n),i<1&&(i=1);let r=t/i;for(let s=0;s<i;s++)this.crowd.update(r)}for(let i=0;i<this.agents.length;i++){let r=this.agents[i],s=this.getAgentPosition(r);if(this.transforms[i].copy(s),this._agentDestinationArmed[i]){let o=s.x-this._agentDestination[i].x,a=s.z-this._agentDestination[i].z,l=this.reachRadii[i],c=this._agentDestination[i].y-this.reachRadii[i],d=this._agentDestination[i].y+this.reachRadii[i],u=o*o+a*a;s.y>c&&s.y<d&&u<l*l&&(this.onReachTarget(r,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}setDefaultQueryExtent(t){let e=new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z);this.crowd.setDefaultQueryExtent(e)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(t){let e=this.crowd.getDefaultQueryExtent();t.set(e.x,e.y,e.z)}getCorners(t){let e,n=this.crowd.getCorners(t),i=n.getPointCount(),r=[];for(e=0;e<i;e++){let s=n.getPoint(e);r.push(new q(s.x,s.y,s.z))}return r}dispose(){this.crowd.destroy()}};function Ldt(t){var i,r;let e=!1,n=t.scene.publish.gameControlObject;return n&&((r=(i=t.scene.objects.data(n))==null?void 0:i.events)==null||r.forEach(s=>{s.data.type==="GameControl"&&s.data.navmesh.enabled&&(e=!0)})),e}var _i;Kit.then(t=>_i=t);var fr=new q,Nl=new vn,Oh=new q,Nk=new ls(0,0,0,"YXZ"),Idt={type:"updateMatrix"},Tfe={type:"beginEvent",eventName:"Collision"};function kdt(t){if(t.scene.environment.usePhysics)return!0;let e=!1;return t.scene.objects.traverse((n,i)=>{for(let r of i.events)if(r.data.disabled!==!0&&r.data.type==="GameControl"&&r.data.collisionEnabled){e=!0;break}}),e}var Z2=t=>t.states.some(e=>e.data.position!==void 0||e.data.rotation!==void 0||e.data.hiddenMatrix!==void 0||e.data.cloner!==void 0||e.data.pathSnapping!==void 0),Ndt=class{constructor(t,e){this.collab=t,this.eventContext=e,this.orbitControlsNeedsUpdate=!0,this.gameControls=[],this.gameControlStates=[],this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],eventsPerObjects:{},colliderToEntity:{},gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=n=>{if(n.bodyType()!==_i.RigidBodyType.Dynamic)return;n.isSleeping()||this.nActiveRigidBodies++;let[i,r,s]=this.rigidBodyToMesh.get(n.handle);if(fr.copy(n.translation()).multiplyScalar(this.pixelsPerMeter),Nl.copy(n.rotation()),i.matrixWorld.compose(fr,Nl,r),i.hasNonUniformScale&&i.matrixWorld.multiply(i.shearScale),i.dispatchEvent(Idt),s){let o=i.cloner;if(o&&o.objectForSample===void 0){o.matrixWorld.copy(i.matrixWorld);for(let a of o.children)a.updateMatrixWorld(!0)}for(let a of i.children)a.updateMatrixWorld(!0)}},this.handleCollisionEvents=(n,i,r)=>{var s,o;if(r!==!1){for(let a=this.sharedGameControlGlobals.createdObjects.length-1;a>=0;a--){let l=this.sharedGameControlGlobals.createdObjects[a];if(l.userData.hasCollisionDestroy&&(((s=l.rigidBody)==null?void 0:s.collider(0).handle)===n||((o=l.rigidBody)==null?void 0:o.collider(0).handle)===i)){this.sharedGameControlGlobals.createdObjects.splice(a,1),l.removeFromParent(),requestAnimationFrame(()=>{var c;return(c=this.sharedGameControlGlobals.rapierWorld)==null?void 0:c.removeRigidBody(l.rigidBody)});break}}if(this.gameControls.some(a=>a.object===this.sharedGameControlGlobals.colliderToEntity[n])){let a=this.sharedGameControlGlobals.colliderToEntity[i],l=this.sharedGameControlGlobals.eventsPerObjects[a.uuid];if(l===void 0)return;for(let c of l)c.data.target==="character"&&this.dispatchCollisionEvent(c,a,i)}else if(this.gameControls.some(a=>a.object===this.sharedGameControlGlobals.colliderToEntity[i])){let a=this.sharedGameControlGlobals.colliderToEntity[n],l=this.sharedGameControlGlobals.eventsPerObjects[a.uuid];if(l===void 0)return;for(let c of l)c.data.target==="character"&&this.dispatchCollisionEvent(c,a,n)}else{let a=this.sharedGameControlGlobals.colliderToEntity[n],l=this.sharedGameControlGlobals.eventsPerObjects[a.uuid];if(l!==void 0)for(let u of l)u.data.target==="scene"&&this.dispatchCollisionEvent(u,a,n);let c=this.sharedGameControlGlobals.colliderToEntity[i],d=this.sharedGameControlGlobals.eventsPerObjects[c==null?void 0:c.uuid];if(d!==void 0)for(let u of d)u.data.target==="scene"&&this.dispatchCollisionEvent(u,c,i)}}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.scene=e.scene,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.usePhysics=this.collab.scene.environment.usePhysics??ra.defaultData.usePhysics,this.pixelsPerMeter=this.collab.scene.environment.pixelsPerMeter??ra.defaultData.pixelsPerMeter,this.gravity=this.collab.scene.environment.gravity??ra.defaultData.gravity}attachVRControllers(t){t.forEach(e=>{e.addEventListener("connected",n=>{"gamepad"in n.data&&"axes"in n.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(n.data.gamepad)})})}markIsDestroyTarget(){this.scene.traverseVisibleEntity(t=>{var n,i;let e=t.dataPatched;for(let r of e.events){if(r.data.disabled===!0)continue;let s=(i=(n=r.data.actions)==null?void 0:n.find(o=>o.data.type==="Destroy"))==null?void 0:i.data;if(s)for(let o of s.objects){let a=this.scene.find(o);a&&(a.userData.hasDestroy=!0)}}})}markIsDragObject(){this.scene.traverseVisibleEntity(t=>{let e=t.dataPatched;for(let n of e.events)if(!(n.data.disabled===!0||n.data.type!=="DragDrop"))for(let i of n.data.objects){let r=this.scene.find(i);r&&(r.userData.hasDrag=!0)}})}initBVH(){let t=[];if(this.scene.traverseObject(e=>{let n;if(e instanceof Kl)return;e instanceof io?n=e.object:n=e;let i=n.dataPatched;if(i.collision==="visibility"?!i.visible:!i.collision)return!0;let r=e.geometry,s=n.userData.hasDestroy===!0,o=n.userData.hasDrag===!0;if(Z2(i)||s||o||n.dataPatched.events.some(a=>a.data.disabled!==!0&&a.data.type==="GameControl"))return e.updateMatrixWorldSVD(),this.addBoundsTree(e),!0;r&&t.push(nd(r,e.matrixWorld))}),t.length>0){let e=_m(t,!1);this.sharedGameControlGlobals.staticMeshBVH=new hs(e)}}addRigidBody(t,e,n){let i=[],r="geometry"in t?t.geometry:void 0,s=e.dataPatched;if((r==null?void 0:r.getAttribute("position"))!==void 0&&i.push(nd(r,t.shearScale)),s.physics.fusedBody){let o=this.gatherChildrenGeom(t,i);t.traverseObject(o),t.children.forEach(l=>l.updateMatrixWorld(!0));let a=t.cloner;a&&a.objectForSample===void 0&&s.physics.rigidBody==="dynamic"&&(a.traverseObject(o),a.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let o,a=!n.fromCreate&&s.physics.rigidBody==="dynamic"||n.fromCreate&&n.dynamic;a?(o=_i.RigidBodyDesc.dynamic(),o.setLinearDamping(s.physics.damping).setAdditionalMass(1e-9).setGravityScale(s.physics.gravityScale).enabledRotations(...s.physics.enabledRotation).enabledTranslations(...s.physics.enabledTranslation)):(n.hasTransformAnim||n.hasFollow||n.hasDrag)&&!n.fromCreate?(o=_i.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(t)):o=_i.RigidBodyDesc.fixed();let l=_m(i);(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(fr,Nl,Oh),t.position0=fr.clone().divideScalar(this.pixelsPerMeter),t.rotation0=Nl.clone(),fr.divideScalar(this.pixelsPerMeter),o.setTranslation(fr.x,fr.y,fr.z).setRotation(Nl),r?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(Oh.x/this.pixelsPerMeter,Oh.y/this.pixelsPerMeter,Oh.z/this.pixelsPerMeter);let c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o);a&&this.rigidBodyToMesh.set(c.handle,[t,Oh.clone(),s.physics.fusedBody]);let d=!(s.geometry===void 0||s.geometry.type==="SubdivGeometry"||s.geometry.type==="NonParametricGeometry"||s.geometry.type==="BooleanGeometry"||s.geometry.type==="VectorGeometry"||s.geometry.type==="StarGeometry"||s.geometry.type==="RectangleGeometry"||s.geometry.type==="EllipseGeometry"||s.geometry.type==="TriangleGeometry"||s.geometry.type==="TorusGeometry"||s.geometry.type==="HelixGeometry");try{this.addCollider(c,s.physics,l,n.fromCreate?void 0:e,d)}catch{try{this.addCollider(c,s.physics,l,n.fromCreate?void 0:e,!1)}catch(u){console.error(u)}}t.rigidBody=c}}addBoundsTree(t){var n;let e=[];if(((n=t.geometry)==null?void 0:n.getAttribute("position"))!==void 0&&e.push(nd(t.geometry,t.shearScale)),t.traverseObject(this.gatherChildrenGeom(t,e)),t.children.forEach(i=>i.updateMatrixWorld(!0)),e.length>0){let i=_m(e,!1);t.boundsTree=new hs(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(t)}}addCollider(t,e,n,i,r=!0){var a,l;if((n==null?void 0:n.getAttribute("position").count)===0||((a=n==null?void 0:n.getIndex())==null?void 0:a.count)===0)return;let s;n&&(e.colliderType==="trimesh"?s=_i.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array):s=_i.ColliderDesc.convexMesh(n.getAttribute("position").array,r?n.getIndex().array:void 0)),s.setFrictionCombineRule(_i.CoefficientCombineRule.Average).setRestitutionCombineRule(_i.CoefficientCombineRule.Average).setDensity(e.density).setFriction(e.friction).setRestitution(e.restitution);let o=this.sharedGameControlGlobals.rapierWorld.createCollider(s,t);i&&(this.sharedGameControlGlobals.colliderToEntity[o.handle]=i,(l=this.sharedGameControlGlobals.eventsPerObjects[i.uuid])!=null&&l.some(c=>c.target==="scene")&&o.setActiveEvents(_i.ActiveEvents.COLLISION_EVENTS))}gatherChildrenGeom(t,e){return(n,i)=>{var a;if(i===0)return;let r;if(n instanceof Kl)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;r=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof io)r=n.object;else if(r=n,(a=r.dataPatched.cloner)==null?void 0:a.hideBase)return!0;let s=r.dataPatched;if(s.collision==="visibility"?!s.visible:!s.collision)return!0;i===1?t.hasNonUniformScale?n.matrixWorld.multiplyMatrices(t.shearScale,n.hiddenMatrix):n.matrixWorld.copy(n.hiddenMatrix):n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.hiddenMatrix),n.matrixWorld.multiply(n.matrix);let o=n.geometry;(o==null?void 0:o.getAttribute("position"))!==void 0&&e.push(nd(o,n.matrixWorld))}}activate(t){var u,h;this.eventManager=t;let e;this.collab.scene.publish.playCamera===null?e=dl.PERSONAL_CAMERA_ID:e=this.collab.scene.publish.playCamera;let n=this.scene.find(e),i=!1,r,s=5,o=8,a=9,l="drag";if((u=this.collab.scene.objects.data(this.collab.scene.publish.gameControlObject??""))==null||u.events.forEach(f=>{f.data.disabled!==!0&&f.data.type==="GameControl"&&(r=f.data.keyAssignments,s=f.data.joystickPosLoc,o=f.data.joystickRotLoc,a=f.data.jumpTouchButtonLoc,l=f.data.rotByTouch)}),this.scene.traverseEntity(f=>{f.dataPatched.events.forEach(p=>{var g,v;if(p.data.disabled||p.data.type!=="GameControl")return;let m=f;for(;((g=m=m.parent)==null?void 0:g.parent)!==null;)if((v=m.dataPatched.physics)!=null&&v.fusedBody)return;p.data.collisionEnabled&&(this.needsCollisionDetection=!0),this.gameControlStates.push([f,p.data])})}),this.gameControlStates.forEach(([f,p])=>{i=i||p.camera===n.uuid||f.uuid===n.uuid;let m=new Cfe(f,this.renderer.domElement,{...p,keyAssignments:r},this.collab.scene.environment,this,f.uuid!==n.uuid&&p.camera===n.uuid,n,this.scene,this.sharedAssets);this.gameControls.push(m),ua&&p.touchControl&&(this.joystickToGameControls[s]!==void 0?this.joystickToGameControls[s].push([m,"pos"]):this.joystickToGameControls[s]=[[m,"pos"]],p.moveMode==="walk"&&(this.joystickToGameControls[a]!==void 0?this.joystickToGameControls[a].push([m,"jmp"]):this.joystickToGameControls[a]=[[m,"jmp"]]),l==="joystick"&&(this.joystickToGameControls[o]!==void 0?this.joystickToGameControls[o].push([m,"rot"]):this.joystickToGameControls[o]=[[m,"rot"]]))}),(h=this.collab.scene.objects.data(this.collab.scene.publish.gameControlObject??""))==null||h.events.forEach(f=>{if(f.data.disabled!==!0&&f.data.type==="GameControl"&&f.data.navmesh.enabled&&!this.navigationMeshWrapper){this.navigationMeshWrapper=new Rdt(this.usePhysics,this.isExport);let p;f.data.collider.type==="sphere"?p=f.data.collider.radius*2:p=f.data.collider.height,p=Math.floor(p/f.data.navmesh.ch-1),this.navigationMeshWrapper.init({...f.data.navmesh,walkableHeight:p},this.gameControls,this.eventContext)}}),i===!1){let{enableRotate:f,enablePan:p,enableZoom:m,autoRotate:g,hoverRotatePanMode:v}=this.collab.scene.publish.orbitControls;(f||p||m||g||v!==0)&&(this.orbitControls=new Pfe(n,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.collab.scene.publish.orbitControls,this.collab.scene.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let c=this.renderer.domElement.width/this.renderer.getPixelRatio(),d=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((f,p)=>{let m=document.body.appendChild(document.createElement("div")),[g,v,y]=(this.collab.scene.publish.joystickSizeAndXYOffset??Xy.defaultData.joystickSizeAndXYOffset)[p],x=(c-5*g)/4+g,b={},w=f.some(C=>C[1]==="jmp"),E=w?0:g;p<10?(p<5?b.top=E/2:b.bottom=E/2,b.left=E/2+p%5*x):p===10?(b.left=E/2,b.top=d/2):(b.right=E/2,b.top=d/2),b.top?b.top-=v[1]:b.bottom+=v[1],b.left?b.left+=v[0]:b.right-=v[0];for(let C in b)b[C]+="px";if(w){let C=m.appendChild(document.createElement("div"));Object.assign(C.style,b,{position:"absolute",width:g+"px",height:g+"px",backgroundColor:`rgba(255,255,255,${y==="show"?.4:0})`,zIndex:"9999",borderRadius:g+"px",border:y==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let T=g/16*16*.4;y==="show"&&(C.innerHTML=`
						<svg width="${T}" height="${g*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),C.addEventListener("pointerdown",()=>{f.forEach(P=>{P[0].movementState.jump=1}),this.requestRender()}),C.addEventListener("touchend",P=>P.preventDefault()),this.joysticks[p]=[void 0,m];return}let A={zone:m,mode:"static",position:b,size:g};y==="hide"&&(A.restOpacity=0);let S=bct.create(A);S.on("move",(C,T)=>{f.forEach(P=>{let R=P[0];P[1]==="pos"?T.force<.2?R.moveForce=0:(R.movementState.movePosZ=Math.sin(-T.angle.radian),R.movementState.movePosX=Math.cos(-T.angle.radian),T.force<.3?R.moveForce=(T.force-.2)/.1:R.moveForce=1):T.force<.2?R.rotForce=0:(R.movementState.rotPosX=T.vector.y,R.movementState.rotPosY=-T.vector.x,T.force<.3?R.rotForce=(T.force-.2)/.1:R.rotForce=1)}),this.requestRender()}),S.on("end",(C,T)=>{f.forEach(P=>{let R=P[0];P[1]==="pos"?(R.movementState.movePosZ=0,R.movementState.movePosX=0,R.moveForce=1):(R.movementState.rotPosX=0,R.movementState.rotPosY=0,R.rotForce=1)})}),this.joysticks[p]=[S,m]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.usePhysics&&(this.gameControlStates.length===0||this.needsCollisionDetection)&&this.initPhysics(),this.usePhysics===!1&&this.needsCollisionDetection&&this.initBVH(),this.initializationCounter++,window.setTimeout(()=>this.collisionEvents.forEach(f=>f.disabled=!1),80)}initPhysics(){this.sharedGameControlGlobals.rapierWorld=new _i.World(new _i.Vector3(0,this.gravity,0)),this.events=new _i.EventQueue(!0);let t=[];if(this.scene.traverseObject(s=>{var m,g,v,y;let o;if(s instanceof Kl)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;o=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof io)o=s.object;else if(o=s,((m=o.dataPatched.cloner)==null?void 0:m.disabled)===!1&&((g=o.dataPatched.cloner)==null?void 0:g.hideBase)&&((v=o.dataPatched.physics)==null?void 0:v.fusedBody)!==!0)return!0;let a=o.dataPatched;if(!a.physics||(a.collision==="visibility"?!a.visible:!a.collision))return!0;s.updateMatrixWorldSVD();let l=Z2(a),c,d=!1,u=o.userData.hasDestroy,h=o.userData.hasDrag,f=!1;for(let x of a.events)if(x.data.disabled!==!0){if(x.data.type==="GameControl")c=x.data;else if(x.data.type==="Collision"){d=!0;let b=new _dt(x.id,x.data,o,this.scene,this.sharedAssets,{controlsManager:this,eventManager:this.eventManager});this.collisionEvents.push(b),this.sharedGameControlGlobals.eventsPerObjects[o.uuid]&&this.sharedGameControlGlobals.eventsPerObjects[o.uuid].every(w=>w.id!==x.id)?this.sharedGameControlGlobals.eventsPerObjects[o.uuid].push(b):this.sharedGameControlGlobals.eventsPerObjects[o.uuid]=[b]}else if(x.data.type==="Follow"){f=!0;let b=x.data.target;s.traverseVisible(w=>{w.userData.isFollowingObj=b})}}a.physics.rigidBody==="dynamic"&&a.physics.fusedBody===!1&&(s.matrixWorldFusedFalse=s.matrixWorld.clone());let p=s.geometry;if(c!==void 0){let x=_i.RigidBodyDesc.kinematicPositionBased();(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(fr,Nl,Oh),s.position0=fr.clone().divideScalar(this.pixelsPerMeter),s.rotation0=Nl.clone(),fr.divideScalar(this.pixelsPerMeter),x.setTranslation(fr.x,fr.y,fr.z).setRotation(Nl);let b=this.sharedGameControlGlobals.rapierWorld.createRigidBody(x);s.rigidBody=b;let w;c.collider.type==="sphere"?w=_i.ColliderDesc.ball(c.collider.radius/this.pixelsPerMeter):c.collider.type==="capsule"?w=_i.ColliderDesc.capsule((c.collider.height/2-c.collider.radius)/this.pixelsPerMeter,c.collider.radius/this.pixelsPerMeter):w=_i.ColliderDesc.cuboid(c.collider.width/this.pixelsPerMeter/2,c.collider.height/this.pixelsPerMeter/2,c.collider.depth/this.pixelsPerMeter/2),w.setFrictionCombineRule(_i.CoefficientCombineRule.Average).setRestitutionCombineRule(_i.CoefficientCombineRule.Average).setDensity(a.physics.density).setFriction(a.physics.friction).setRestitution(a.physics.restitution);let E=this.sharedGameControlGlobals.rapierWorld.createCollider(w,b);this.sharedGameControlGlobals.colliderToEntity[E.handle]=o,fr.fromArray(c.collider.position).multiply(Oh.setFromMatrixScale(o.matrixWorld)).divideScalar(this.pixelsPerMeter),E.setTranslationWrtParent(fr);let A=new vn().setFromEuler(new ls().setFromVector3(new q().fromArray(c.collider.rotation)));E.setRotationWrtParent(A),E.setActiveEvents(_i.ActiveEvents.COLLISION_EVENTS)}else a.physics.rigidBody==="dynamic"||l||f||u||h||d?this.addRigidBody(s,o,{hasFollow:f,hasTransformAnim:l,hasDrag:h}):(p&&t.push(nd(p,s.matrixWorld)),a.physics.fusedBody&&s.traverseObject((x,b)=>{var S;if(b===0)return;let w;if(x instanceof Kl)if(x.objectForSample){if(x.objectForSample.dataPatched.physics.fusedBody)return;w=x.object}else return x.object.dataPatched.physics.fusedBody===!0&&x.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(x instanceof io)w=x.object;else if(w=x,(S=w.dataPatched.cloner)==null?void 0:S.hideBase)return!0;let E=w.dataPatched;if(E.collision==="visibility"?!E.visible:!E.collision)return!0;let A=x.geometry;(A==null?void 0:A.getAttribute("position"))!==void 0&&t.push(nd(A,x.matrixWorld))}));if(((y=a.physics)==null?void 0:y.fusedBody)===!0||c)return!0}),t.length===0)return;let e=_m(t);e.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let n=_i.RigidBodyDesc.fixed(),i=this.sharedGameControlGlobals.rapierWorld.createRigidBody(n),r=_i.ColliderDesc.trimesh(e.getAttribute("position").array,e.getIndex().array).setFrictionCombineRule(_i.CoefficientCombineRule.Multiply).setRestitutionCombineRule(_i.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(r,i)}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){var t;this.usePhysics?((t=this.sharedGameControlGlobals.rapierWorld)==null||t.free(),this.initPhysics()):(this.sharedGameControlGlobals.staticMeshBVH=void 0,this.initBVH())}disconnectCollisionEvents(){this.collisionEvents.forEach(t=>t.disconnect())}deactivate(){var t,e;this.scene.traverse(n=>{let i=n;i.matrixWorldFusedFalse&&(i.matrixWorldFusedFalse=void 0),i.rigidBody&&(i.rigidBody=void 0),i.position0&&(i.position0=void 0),i.rotation0&&(i.rotation0=void 0)}),(t=this.sharedGameControlGlobals.rapierWorld)==null||t.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectCollisionEvents(),this.gameControls.forEach(n=>{n.reset(),n.dispose()}),this.gameControls=[],this.joysticks.forEach(([n,i])=>{n==null||n.destroy(),i.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(e=this.navigationMeshWrapper)==null||e.dispose();for(let n of Object.values(this.sharedGameControlGlobals.eventsPerObjects))n.forEach(i=>i.disconnect());this.sharedGameControlGlobals.eventsPerObjects={},this.scene.updateMatrixWorld(!0)}update(t,e,n){var r;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2)this.initializationCounter++,i=!1;else if(this.initializationCounter===2)for(let s of this.gameControls)i=!s.update(t,e,n)&&i;if(this.usePhysics){for(let s of this.sharedGameControlGlobals.entitiesWithTransformAnim){(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(fr,Nl,Oh),Nk.setFromQuaternion(Nl);let o=s;o.prevR===void 0?(o.prevR=Nk.clone(),o.prevT=fr.clone()):(o.prevR.copy(Nk),o.prevT.copy(fr)),s.rigidBody.setNextKinematicTranslation(fr.divideScalar(this.pixelsPerMeter)),s.rigidBody.setNextKinematicRotation(Nl)}this.sharedGameControlGlobals.rapierWorld.step(this.events),(r=this.events)==null||r.drainCollisionEvents(this.handleCollisionEvents),i=!this.updatePositions()&&i}return i}dispatchCollisionEvent(t,e,n){var s;let i=((s=this.sharedGameControlGlobals.rapierWorld)==null?void 0:s.getCollider(n))._parent,r;if(e.cloner){for(let o of e.cloner.children)if(o.rigidBody===i){r=o;break}}t.dispatch(r),e.dispatchEvent(Tfe)}updateUseWindowEvents(t){var e;(e=this.orbitControls)==null||e.updateUseWindowEvents(t)}};new q;var RJ=new q,OJ=new q,Bdt=new q,yo=new q,xo=new q,Lh=new q,Bk=new tt,LJ=new tt,zdt=new tt;new tt;var Bl=new vn,Yu=new vn,Oc=new ls(0,0,0,"YXZ"),Fdt=new q(1,0,0),zl=new q(0,1,0),Udt=new q(0,0,1),IJ=new q(1,1,1),Vdt=1,Hdt=.025,jdt=16e-6,kJ=12,Gdt=20,As=new cl,Ga=new _r,Wdt={type:"requestRender"},NJ=Math.PI/6,u4=class extends uo{constructor(t,e,n,i,r,s,o,a,l){var m;super(),this.object=t,this.domElement=e,this.controlsManager=r,this.cameraFollow=s,this.camera=o,this.scene=a,this.sharedAssets=l,this.enableDamping=!0,this.position0=new q,this.rotation0=new ls(0,0,0,"XYZ"),this.scale0=new q,this.hiddenMatrix0=new tt,this.target0=new q,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new ls(0,0,0,"YXZ"),this.position0Cam=new q,this.quat0Cam=new vn,this.scale0Cam=new q,this.hiddenMatrix0Cam=new tt,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new cl(new q(0,-40,0),new q(0,40,0)),matrix:new tt,position:new q,rotation:new vn},this.euler=new ls(0,0,0,"YXZ"),this.eulerDelta=new q,this.lastPosition=new q,this.lastCameraQuaternion=new vn,this.lastCameraPosition=new q,this.PI_2=Math.PI/2,this.prevMouse=new Se,this.velocityTarget=new q,this.velocity=new q,this.directionXZ=new q,this.rotVelocityStick=new q,this.rotVelocityTarget=new q,this.rotVelocity=new q,this.rotDirection=new q,this.nonColliderRotOffset=new tt,this.nonColliderPosOffset=new tt,this.firstPointerId=-1,this.rot=new q,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new tt,this.objectToTarget=new q,this.objectToTarget0=new q,this.objectToCamXZ=new q,this.objectToCamXZ0=new q,this.targetToCamera=new q,this.targetToCamera0=new q,this.cameraPolarAxis0=new q,this.targetPos=new q,this.targetQuat=new vn,this.lerpFactorPos=new q().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new vn,this.objXZQuatInv=new vn,this.objXZRotMat=new tt,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new q,this.pushedVelocity=new q,this.groundYRotation=0,this.objectRealQuat=new vn,this.colliderWorldQuat=new vn,this.groundNormal=new q,this.groundTilt=new vn,this.groundTiltInv=new vn,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.onPointerDown=g=>{g.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=g.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!ua&&(!ZK||QK>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(g.clientX,g.clientY))},this.onPointerUp=g=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),g.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=g=>{if(g.pointerId!==this.firstPointerId)return;let v=g.clientX-this.prevMouse.x,y=g.clientY-this.prevMouse.y;this.prevMouse.set(g.clientX,g.clientY),g.pointerType==="mouse"&&this.rotBy!=="keys"&&(ZK&&QK<15.5&&!ua?(this.eulerDelta.y=-v*this.mouseOrbitSensitivity,this.eulerDelta.x=-y*this.mouseOrbitSensitivity):(this.eulerDelta.y=-g.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-g.movementY*this.mouseOrbitSensitivity)),g.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-v*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-y*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=g=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?u4.isLocked=!0:u4.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=g=>{!(g.target instanceof HTMLInputElement)&&(g.code==="ArrowLeft"||g.code==="ArrowUp"||g.code==="ArrowRight"||g.code==="ArrowDown"||g.code==="Space")&&g.preventDefault();for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]){this.movementState[v[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=g=>{for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]||g.code.slice(3,g.code.length).toUpperCase()===v[1]){this.movementState[v[0]]=0;break}},this.copyVRGamePadValues=(g,v)=>{for(let y=2;y<4;y++){let x=g.axes[y];v===0?y===2?this.movementState.movePosX=x:this.movementState.movePosZ=x:(g.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,y===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(x)>=.3&&(this.vrEulerYOffset+=x<0?1:-1),this.movementState.rotPosY=x):this.moveMode==="fly"&&(this.movementState.moveNegY=x))}},this.sharedGameControlGlobals=r.sharedGameControlGlobals,t===o&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation);let c=this.object.rotation.y;if(this.objectRealQuat.copy(this.object.quaternion),this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,c,0),this.rot.setFromEuler(this.object.rotation),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((m=this.camera)==null?void 0:m.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let g=new q(0,0,-1).applyQuaternion(this.camera.quaternion),v=new q().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(v),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let y,x;Math.abs(g.y)<1e-6?(v.y=0,g.y=0,x=v.projectOnVector(g)):v.y/g.y>0?x=g.multiplyScalar(v.y/g.y):x=g.multiplyScalar(v.length()),this.targetToCamera0.copy(x).negate(),y=this.camera.position.clone().add(x),this.objectToTarget0.subVectors(y,this.object.position);let b=new ls().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-b.x,b.x=0,b.z=0,b.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(b)}if(this.object instanceof so&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=n.rotByTouch??"joystick",this.rotBy=n.rotBy??"keys",this.rotationMode=n.rotationMode??"normal",this.moveMode=n.moveMode??"walk",this.collisionEnabled=n.collisionEnabled,this.speedTranslate=(n.speedTranslate??250)*Vdt,this.speedOrbit=(n.speedRotate??100)*Hdt,this.mouseOrbitSensitivity=(n.speedRotate??100)*jdt,this.keyAssignments=n.keyAssignments.map(g=>{let v=[g[0],g[1]];return v[1]===""?v[1]="ArrowUp":v[1]===""?v[1]="ArrowLeft":v[1]===""?v[1]="ArrowDown":v[1]===""?v[1]="ArrowRight":v[1]===""?v[1]="Shift":v[1]===""?v[1]="Enter":v[1]==="Space"?v[1]=" ":v[1]===""?v[1]="Meta":v[1]==="Ctrl"?v[1]="Control":v[1]==="Esc"&&(v[1]="Escape"),v}),n.rotBy==="mouse"){let g;g=this.keyAssignments.findIndex(v=>v[0]==="rotNegX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosY"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotNegY"),g!==-1&&(this.keyAssignments[g][1]="")}this.lerpFactorPosStart=1-.02**(1/((n.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((n.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((n.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((n.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((n.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((n.delayRotCamera??.3)*60)),this.gravity=(i.gravity??ra.defaultData.gravity)*kJ,this.pixelsPerMeter=i.pixelsPerMeter??ra.defaultData.pixelsPerMeter,this.usePhysics=i.usePhysics??ra.defaultData.usePhysics,this.jumpPower=n.jumpPower*Gdt,this.resetYPosition=this.object.position.y+Math.abs(n.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=n.alignToGround??!1,this.orientMode=n.autoOrientMove?n.orientMode:"none",this.orientWith=n.orientWith??z2.defaultDataThirdPerson.orientWith;let d=i.skinWidthRelative??ra.defaultData.skinWidthRelative,u=i.stepThreshRelative??ra.defaultData.stepThreshRelative;this.slopeThresh=(i.slopeThresh??ra.defaultData.slopeThresh)*Math.PI/180,n.collider.type==="capsule"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=n.collider.height/2-n.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=n.collider.height*d/this.pixelsPerMeter,this.stepThresh=n.collider.height*u/this.pixelsPerMeter,this.colliderHeight=n.collider.height):n.collider.type==="sphere"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*n.collider.radius*d/this.pixelsPerMeter,this.stepThresh=2*n.collider.radius*u/this.pixelsPerMeter,this.colliderHeight=n.collider.radius*2):(this.offset=n.collider.height*d/this.pixelsPerMeter,this.stepThresh=n.collider.height*u/this.pixelsPerMeter,this.colliderHeight=n.collider.height),this.collider.type=n.collider.type;let h=new q().fromArray(n.collider.position),f=new vn().setFromEuler(new ls().fromArray([...n.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.object.scale),this.collider.rotation.copy(f),this.collider.matrix.compose(h,f,IJ),n.cameraXAxis!==void 0&&(this.cameraXAxis=n.cameraXAxis,this.cameraYAxis=n.cameraYAxis,this.minPolarAngle=n.cameraRotXLimits[0],this.maxPolarAngle=n.cameraRotXLimits[1],this.minAzimuthAngleRel=n.cameraRotYLimits[0],this.maxAzimuthAngleRel=n.cameraRotYLimits[1]),n.gameActions!==void 0&&Object.entries(n.gameActions).forEach(([g,v],y)=>{v.forEach(({id:x,data:b})=>{try{this.actions[g]===void 0&&(this.actions[g]=[]),b.type==="Transition"?this.actions[g].push(new _w(b,a,l)):b.type==="Audio"?this.actions[g].push(new vw(x,b,t,l)):b.type==="Video"?this.actions[g].push(new s6(x,b,t)):b.type==="Create"&&this.actions[g].push(new bw(b,a,this.controlsManager))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle");let p=n.navmesh.destinationHelperRadius*2;p>0&&(this.navMeshPathDest=new Po(Mde.create({parameters:{width:p,height:p/10,hollow:.7}}),new Cx({color:Ds.toHex(n.navmesh.destinationHelperColor),transparent:!0,opacity:n.navmesh.destinationHelperColor.a})),this.navMeshPathDest.material.userData.opacity0=n.navmesh.destinationHelperColor.a)}reset(t=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),t===!0){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.rotation.reorder("YXZ");let e=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,e,0),this.rot.setFromEuler(this.object.rotation),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}t===!1&&(this.object instanceof so?this.object.matrixAutoUpdate=!0:this.object.updateMatrix()),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){var t;this.disconnect(),this.disposeActions(),(t=this.navMeshPathDest)!=null&&t.parent&&this.scene.remove(this.navMeshPathDest)}disposeActions(){this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),xl(this.actions)}dispatchStartEvent(t){this.actions[t]!==void 0&&(this.actionState[t]||(this.actionState[t]=!0,this.actions[t].forEach(e=>{e instanceof _w?e.play():e instanceof bw?e.dispatchStart():e instanceof vw&&e.dispatchGameControl("start")})))}dispatchStopEvent(t){this.actions[t]!==void 0&&(!this.actionState[t]||(this.actionState[t]=!1,this.actions[t].forEach(e=>{e instanceof _w?(e.stop(),e.object.currentState!==null&&e.object.changeSelectedState(null,{scene:this.scene,shared:this.sharedAssets})):e instanceof bw?e.dispatchStop():e instanceof vw&&e.dispatchGameControl("stop")})))}get colliderWorldPosition(){return yo.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position)}update(t,e,n){var a,l,c,d,u,h,f,p,m,g,v;if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:t)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let r=i*60,s=!1;if(this.usePhysics&&this.collisionEnabled){let y=xo.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*kJ),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),x=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,y,(a=this.object.rigidBody)==null?void 0:a.collider(0).shape,1,!1,void 0,void 0,void 0,this.object.rigidBody);if(x){this.onObject=!0,this.groundNormal.set(x.normal2.x,x.normal2.y,x.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),((l=x.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let b=x.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let w of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(w.rigidBody===b&&w.userData.isFollowingObj!==this.object.uuid){(w.hasNonUniformScale?w.matrixWorldRigid:w.matrixWorld).decompose(yo,Yu,xo),this.groundVelocity.subVectors(yo,w.prevT),this.object.getWorldPosition(xo).add(this.collider.position).sub(w.position),this.groundYRotation=Oc.setFromQuaternion(Yu).y-w.prevR.y,Lh.copy(xo).applyAxisAngle(zl,this.groundYRotation),this.groundVelocity.add(Lh.sub(xo)).divideScalar(i);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*r),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let y=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.scene.add(this.navMeshPathDest);let x=yo.subVectors(this.path[1],this.object.position),b=xo.subVectors(this.path[1],this.path[0]);x.dot(b)<0?this.path.shift():(this.directionXZ.x=b.x,this.directionXZ.z=b.z),y.opacity=y.userData.opacity0}else y.opacity-=.05*y.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.scene.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**r),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**r),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**r)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("move")));let o=Bdt.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let y=xo.copy(o);y.y=0,o.set(0,o.y,y.length()*-1)}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let y=yo;this.camera.getWorldDirection(y);let x=Lh.copy(zl).multiplyScalar(y.dot(zl));y.sub(x);let b=xo.copy(this.directionXZ);b.x*=-1,this.rot.y=y.angleTo(b)*(y.cross(b).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)-Math.PI/2;if(Oc.setFromVector3(this.rot),this.moveMode==="walk"&&(Oc.x=0),o.applyEuler(Oc),s&&(Yu.setFromUnitVectors(zl,this.groundNormal),o.applyQuaternion(Yu)),n){let y=Oc.set(0,this.vrEulerYOffset*NJ,0);n.applyEuler(y),o.x+=n.x,o.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*i}if(this.usePhysics===!0){let y=xo;this.pushedVelocity.set(0,0,0);for(let x of this.sharedGameControlGlobals.entitiesWithTransformAnim){let b=Lh.setFromMatrixPosition(x.matrixWorld).sub(x.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),w=x.rigidBody.collider(0).castCollider(b,this.object.rigidBody.collider(0),yo.copy(o).divideScalar(this.pixelsPerMeter),i,!1);if(b.multiplyScalar(this.pixelsPerMeter),w!==null){this.pushedVelocity.copy(b),y.copy(w.normal1).applyQuaternion(x.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let x=y.dot(o);x<0&&o.addScaledVector(y,-x),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**r):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**r),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(zl,this.euler.y-this.euler0.y);let y=xo.copy(this.objectToCamXZ).normalize(),x=Lh.copy(o).multiplyScalar(i);x.y=0;let b=x.sub(yo.copy(y).multiplyScalar(x.dot(y))).cross(y).y;this.euler.y-=Math.atan2(b,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=pn.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=pn.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=pn.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(e?(Oc.copy(e),Oc.y=0):(Oc.copy(this.euler),Oc.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Oc)),e&&(this.moveMode==="walk"?(this.rot.y=e.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(e),this.rot.y+=this.vrEulerYOffset*NJ),Bl.setFromAxisAngle(Fdt,this.rot.x),Yu.setFromAxisAngle(zl,this.rot.y),Yu.multiply(Bl),Bl.setFromAxisAngle(Udt,this.rot.z),Yu.multiply(Bl),this.object.quaternion.copy(Yu),this.objectRealQuat.multiplyQuaternions(this.object.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let y=xo.copy(o).multiplyScalar(i/this.pixelsPerMeter),x=null;this.didHit=!1;let b=new q;for(let w=0;w<5;w++){let E=y.length(),A=Lh.copy(y).normalize();if(x=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),this.colliderWorldQuat,A,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,E,!1,8,void 0,void 0,this.object.rigidBody),x!==null){this.didHit=!0;let S=this.sharedGameControlGlobals.colliderToEntity[x.collider.handle];if(S!==this.lastHitObj&&w===0){this.lastHitObj=S;let R=this.sharedGameControlGlobals.eventsPerObjects[S==null?void 0:S.uuid];if(R){for(let L of R)if(L.data.target==="character"){let O=((d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.getCollider(x.collider.handle))._parent,B;if(S.cloner){for(let $ of S.cloner.children)if($.rigidBody===O){B=$;break}}L.dispatch(B),S.dispatchEvent(Tfe)}}}let C=RJ.set(x.normal2.x,x.normal2.y,x.normal2.z).applyQuaternion(this.colliderWorldQuat),T=OJ.copy(A).multiplyScalar(x.toi).dot(C),P=x.toi;if(P===0&&(this.object.position.y+=this.offset*this.pixelsPerMeter),T>this.offset&&(P=x.toi*(T-this.offset)/T,b.addScaledVector(A,P)),y.copy(A).multiplyScalar(E-P),Math.acos(-C.y)>this.slopeThresh){let R=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),L=Lh.copy(x.witness2).applyQuaternion(this.colliderWorldQuat);L.y=0;let O=R.add(L);O.y+=this.stepThresh;let B=this.sharedGameControlGlobals.rapierWorld.castShape(O,this.colliderWorldQuat,y,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,1,!1,8,void 0,void 0,this.object.rigidBody);B!==null&&B.toi===0&&(C.y=0,C.normalize())}y.addScaledVector(C,-y.dot(C))}else{w===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),b.add(y);break}}this.object.position.addScaledVector(b,this.pixelsPerMeter),(h=this.object.rigidBody)==null||h.setTranslation(yo.copy(this.object.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(Bl.copy(this.object.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let y=this.onObject?1:5,x=o.multiplyScalar(i/y);for(let b=0;b<y;b++)this.object.position.add(x),this.collisionAdjustment(i/y)}else this.object.position.addScaledVector(o,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.updateMatrix(),this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.object.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let y=this.objectToTarget.add(this.object.position),x=this.targetToCamera.add(y);Bk.lookAt(x,y,zl).setPosition(x),Bk.decompose(this.targetPos,this.targetQuat,yo),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**r),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**r),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=pn.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=pn.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.path.length<2&&this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&((m=(p=this.navMeshPathDest)==null?void 0:p.material)==null?void 0:m.opacity)<-.04*((v=(g=this.navMeshPathDest)==null?void 0:g.material)==null?void 0:v.userData.opacity0)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.object.dispatchEvent(Wdt),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let t=Bl.setFromAxisAngle(zl,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?pn.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(t);let e;this.cameraXAxis==="Limit"?e=pn.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):e=pn.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=yo.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&n.applyQuaternion(t);let i=Yu.setFromAxisAngle(n,e);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(t),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(t){zl.angleTo(t)*180/Math.PI<15||zl.angleTo(t)*180/Math.PI>85?Bl.identity():Bl.setFromUnitVectors(zl,t),this.groundTilt.slerp(Bl,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(t){var r;let e=OJ.set(0,0,0);this.object.updateMatrix();let n=Bk.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(yo,Bl,xo).compose(yo,Bl,IJ);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;Ga.makeEmpty(),s.updateMatrixWorldSVD();let o=s.matrixWorldRigid,a=LJ.copy(o).invert(),l=zdt.copy(LJ).multiply(n);As.copy(this.collider.segment),As.start.applyMatrix4(l),As.end.applyMatrix4(l);let c=RJ.copy(this.object.position).applyMatrix4(a);Ga.expandByPoint(As.start),Ga.expandByPoint(As.end),Ga.min.addScalar(-this.collider.radius),Ga.max.addScalar(this.collider.radius),s.boundsTree.shapecast({intersectsBounds:d=>d.intersectsBox(Ga),intersectsTriangle:d=>{let u=yo,h=xo,f=d.closestPointToSegment(As,u,h);if(f<this.collider.radius){let p=this.collider.radius-f,m=h.sub(u).normalize(),g=Lh.copy(c);g.addScaledVector(m,p);let v=g.applyMatrix4(o).sub(this.object.position);e.add(v),As.start.addScaledVector(m,p),As.end.addScaledVector(m,p)}}})}),Ga.makeEmpty(),As.copy(this.collider.segment),As.start.applyMatrix4(n),As.end.applyMatrix4(n),Ga.expandByPoint(As.start),Ga.expandByPoint(As.end),Ga.min.addScalar(-this.collider.radius),Ga.max.addScalar(this.collider.radius),(r=this.sharedGameControlGlobals.staticMeshBVH)==null||r.shapecast({intersectsBounds:s=>s.intersectsBox(Ga),intersectsTriangle:s=>{let o=yo,a=xo,l=s.closestPointToSegment(As,o,a);if(l<this.collider.radius){let c=this.collider.radius-l,d=a.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(d),e.addScaledVector(d,c),As.start.addScaledVector(d,c),As.end.addScaledVector(d,c)}}}),this.onObject=Math.abs(e.y)>Math.abs(t*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,e.length()-1e-5);e.normalize().multiplyScalar(i),this.object.position.add(e)}},Cfe=u4;Cfe.isLocked=!1;var qdt={type:"change"},BJ={type:"changeZoom"},$dt={type:"changePan"},$v={type:"start"},Xv={type:"end",changed:!0},Xdt={type:"end",changed:!1},zk=new vn,zJ=new Se,Ydt=2*Math.PI,Kdt=1e-8,Zdt=.01,Fk=new q,tT=new Se,Uk=new q,nT=new vn,FJ=new tt,Qdt={type:"requestRender"},Pfe=class extends uo{constructor(t,e,n={isPlayMode:!1,isExport:!1}){super(),this.object=t,this.domElement=e,this.options=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Fa.DOLLY_ROTATE,Fa.PAN],this.offset=new q,this.eye=new q,this.lastPosition=new q,this.lastQuaternion=new vn,this.current=new Se,this.overShoot=new Se,this.overRatio=new Se,this.spherical=new cK,this.sphericalDelta=new cK,this.panOffset=new q,this.panLeftV=new q,this.panUpV=new q,this.panV=new q,this.rotateStart=new Se,this.rotateEnd=new Se,this.rotateDelta=new Se,this.panStart=new Se,this.panEnd=new Se,this.panDelta=new Se,this.dollyStart=new Se,this.dollyEnd=new Se,this.dollyDelta=new Se,this.rotationRangeFactor=new Se,this.panRangeFactor=new Se,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(Uk,nT,Fk),this.offset.copy(Uk).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(zk.copy(nT).invert()),this.panOffset.applyQuaternion(zk),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(nT),this.panOffset.applyQuaternion(nT)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),Uk.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(FJ.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(FJ));let i=this.spherical.phi%Ydt;return this.eye.copy(this.offset).normalize(),this.object.up.copy(ei.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>Zdt||8*(1-this.lastQuaternion.dot(this.object.quaternion))>Kdt?(this.dispatchEvent(qdt),this.object.dispatchEvent(Qdt),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&ua?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent($v),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&ua||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,Fk.subVectors(this.position0,this.target0),this.spherical.setFromVector3(Fk),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?tT.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):tT.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(tT).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(zJ,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(tT).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&ua?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation())},this.onPointerUp=i=>{this.isPointerDown=!1,Nt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),Nt.length>1&&i.preventDefault(),this.hasChange?this.dispatchEvent(Xv):this.dispatchEvent(Xdt),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&ua||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let r;switch(this.useKeyEvents?r=this.mouseButtons[i.button]:r=this.mouseButtonsPlay[i.button],r){case 0:if(i.altKey===!0&&!i.shiftKey&&!DA(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(DA(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(DA(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(Nt.length>1&&i.preventDefault(),this.touches[Nt.length-1]){case Fa.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Fa.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Fa.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Fa.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(Nt.length>1&&i.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=MH(()=>this.dispatchEvent(Xv),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||(this.options.isExport===!1&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent($v),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),this.enabled!==!1&&!kue)if(i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent($v),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Xv)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent($v))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&i.key==="Alt"&&this.onPointerUp(Nt[0]),i.key===" "&&this.dispatchEvent(Xv))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(t){t.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(t)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(t){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=t,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(t,e){this.setEnableDampingSpeed(t.enableDamping),this.enablePan=t.enablePan,this.enableZoom=t.enableZoom,this.enableRotate=t.enableRotate,this.rotationLimitsMode=t.rotationLimitsMode,this.thetaIsFree=t.rotationHorizontalOffset.min===t.rotationHorizontalOffset.max&&t.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=t.rotationVerticalOffset.min===t.rotationVerticalOffset.max&&t.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=t.panLimitsMode,this.panSoftLimit=t.panSoftLimit,this.rotationSoftLimit=t.rotationSoftLimit,this.hoverRotatePanMode=t.hoverRotatePanMode,this.useWindowEvents=e==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let n=t.hoverRotatePanStrength/100;this.hoverRotatePanStrength=n**2,this.zoomLimitsEnabled=t.zoomLimitsEnabled,this.minZoom=t.zoomLimits.min,this.maxZoom=Math.max(t.zoomLimits.min,t.zoomLimits.max),this.minDistance=1e3/t.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/t.zoomLimits.min),this.autoRotate=t.autoRotate,this.autoRotateSpeed=t.autoRotateSpeed,this.autoRotateClockwise=t.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(zk.copy(this.object.quaternion).invert());this.minV=-t.panVerticalOffset.min+i.y,this.maxV=t.panVerticalOffset.max+i.y,this.minH=-t.panHorizontalOffset.min+i.x,this.maxH=t.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Lc(this.spherical.phi-t.rotationVerticalOffset.min),this.maxPhi=Lc(this.spherical.phi+t.rotationVerticalOffset.max),this.minTheta=Lc(Lc(this.spherical.theta)-t.rotationHorizontalOffset.min),this.maxTheta=Lc(Lc(this.spherical.theta)+t.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,t.orbitTouches===1&&(this.touches[0]=Fa.ROTATE),t.panTouches===1&&(this.touches[0]=Fa.PAN),t.orbitTouches===2&&(this.touches[1]=Fa.DOLLY_ROTATE),t.panTouches===2&&(this.touches[1]=Fa.DOLLY_PAN),t.orbitTouches===3&&(this.touches[2]=Fa.ROTATE),t.panTouches===3&&(this.touches[2]=Fa.PAN),this.isTouchZoom=t.isTouchZoom,this.resetHoverEffectOnPointerLeave=t.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(t,e,n,i,r,s,o,a){this.overShoot.set(0,0);let l,c,d;t instanceof q?(l=t.x,c=t.y,this.current.set(this.target.x,this.target.y),d=!0):(l=t.theta,c=t.phi,this.current.set(Lc(this.spherical.theta),Lc(this.spherical.phi)),d=!1),n===0&&(this.current.x+=l,this.current.y+=c),(e===3||e===2)&&(!d&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<r&&this.current.x>0&&(this.overShoot.x=r-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<r&&(this.overShoot.x=r-this.current.x)),(e===3||e===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y)),d||(this.overShoot.x=Lc(this.overShoot.x),this.overShoot.y=Lc(this.overShoot.y)),n!==0?(this.overRatio.copy(this.overShoot).divide(a),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),n===1&&(this.overRatio.x=UJ(Math.abs(this.overRatio.x)),this.overRatio.y=UJ(Math.abs(this.overRatio.y))),this.isPointerDown||n===1?n===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):n===2&&(!d&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(c=this.overShoot.y*.05),d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),t instanceof q?(t.x=l,t.y=c):(this.thetaIsFree||(t.theta=l),this.phiIsFree||(t.phi=c))}setEnableDampingSpeed(t){this.enableDamping=t,this.rotateSpeed=t===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(t){this.sphericalDelta.theta-=t}rotateUp(t){this.sphericalDelta.phi-=t}panLeft(t,e){this.panLeftV.setFromMatrixColumn(e,0),this.panLeftV.multiplyScalar(-t),this.panOffset.add(this.panLeftV)}panUp(t,e){this.panUpV.setFromMatrixColumn(e,1),this.panUpV.multiplyScalar(t),this.panOffset.add(this.panUpV)}pan(t,e){let n=this.domElement;if(n&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let r=this.panV.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*t*r/n.clientHeight,this.object.matrixWorld),this.panUp(2*e*r/n.clientHeight,this.object.matrixWorld)}else n&&this.object.isOrthographicCamera&&(this.panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrixWorld),this.panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrixWorld));this.dispatchEvent($dt)}dollyOut(t){this.object.isPerspectiveCamera?this.scale/=t:this.object.isOrthographicCamera&&(this.object.zoom*=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BJ)}dollyIn(t){this.object.isPerspectiveCamera?this.scale*=t:this.object.isOrthographicCamera&&(this.object.zoom/=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BJ)}zoomOut(t=this.getZoomScale()){this.dispatchEvent($v),this.dollyOut(t),this.dispatchEvent(Xv)}zoomIn(t=this.getZoomScale()){this.dispatchEvent($v),this.dollyIn(t),this.dispatchEvent(Xv)}handleMouseDownRotate(t){this.rotateStart.set(t.clientX,t.clientY)}handleMouseDownDolly(t){this.dollyStart.set(t.clientX,t.clientY)}handleMouseDownPan(t){this.panStart.set(t.clientX,t.clientY)}handleMouseMoveRotate(t,e=1){t.movementX!==void 0?this.rotateDelta.set(t.movementX,t.movementY):(this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*e).rotateAround(zJ,-this.object.angleOffsetFromUp);let n=this.domElement,i=this.useWindowEvents?window.innerHeight:n.clientHeight,r=2*Math.PI*this.rotateDelta.x/i,s=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(r),this.rotateUp(s),this.update()}handleMouseMoveDolly(t){this.dollyEnd.set(t.clientX,t.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(t,e=1){t.movementX!==void 0?this.panDelta.set(t.movementX,t.movementY):(this.panEnd.set(t.clientX,t.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*e),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(t){if(jit===!1&&DA(t)===!1&&Jdt(t)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-t.deltaX,-t.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),t.altKey?this.pan(0,this.panDelta.y):t.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;t.deltaY===0?t.deltaX<0?this.dollyIn(this.getZoomScale()):t.deltaX>0&&this.dollyOut(this.getZoomScale()):t.deltaY<0?this.dollyIn(this.getZoomScale()):t.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Nt.length===2){let t=.5*(Nt[0].pageX+Nt[1].pageX),e=.5*(Nt[0].pageY+Nt[1].pageY);this.rotateStart.set(t,e)}else this.rotateStart.set(Nt[0].pageX,Nt[0].pageY)}handleTouchStartPan(){if(Nt.length===2){let t=.5*(Nt[0].pageX+Nt[1].pageX),e=.5*(Nt[0].pageY+Nt[1].pageY);this.panStart.set(t,e)}else this.panStart.set(Nt[0].pageX,Nt[0].pageY)}handleTouchStartDolly(){let t=Nt[0].pageX-Nt[1].pageX,e=Nt[0].pageY-Nt[1].pageY,n=Math.sqrt(t*t+e*e);this.dollyStart.set(0,n)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(t){if(Nt.length===2){let n=WI(t),i=.5*(t.pageX+n.x),r=.5*(t.pageY+n.y);this.rotateEnd.set(i,r)}else{if(t.pointerId!==Nt[0].pointerId)return;this.rotateEnd.set(t.pageX,t.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;e&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/e.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/e.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(t){if(Nt.length===2){let e=WI(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this.panEnd.set(n,i)}else{if(t.pointerId!==Nt[0].pointerId)return;this.panEnd.set(t.pageX,t.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(t){let e=WI(t),n=t.pageX-e.x,i=t.pageY-e.y,r=Math.sqrt(n*n+i*i);this.dollyEnd.set(0,r),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(t){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(t),this.enablePan&&this.handleTouchMovePan(t)}handleTouchMoveDollyRotate(t){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(t),this.enableRotate&&this.handleTouchMoveRotate(t)}};function Lc(t){let e=Math.PI*2;for(;t<=-Math.PI;)t+=e;for(;t>Math.PI;)t-=e;return t}function UJ(t){return 1-Math.pow(1-t,4)}function Jdt(t){return t.wheelDeltaY===0||t.deltaY===0?xR&&t.shiftKey&&Math.abs(t.wheelDeltaX)>=120?!1:t.wheelDeltaX?t.wheelDeltaX===-3*t.deltaX:t.deltaMode===0:t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:t.deltaMode===0}var Vk=new WeakMap,eht=class extends sH{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){let r=new nF(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,s=>{this.decodeDracoFile(s,e).catch(i)},n,i)}decodeDracoFile(t,e,n,i){let r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){let n=JSON.stringify(e);if(Vk.has(t)){let a=Vk.get(t);if(a.key===n)return a.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,r=this.workerNextTaskID++,s=t.byteLength,o=this._getWorker(r,s).then(a=>(i=a,new Promise((l,c)=>{i._callbacks[r]={resolve:l,reject:c},i.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),Vk.set(t,{key:n,promise:o}),o}_createGeometry(t){let e=new Ut;t.index&&e.setIndex(new Wt(t.index.array,1));for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n],r=i.name,s=i.array,o=i.itemSize;e.setAttribute(r,new Wt(s,o))}return e}_loadLibrary(t,e){let n=new nF(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(t,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{let i=n[0];t||(this.decoderConfig.wasmBinary=n[1]);let r=tht.toString(),s=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){let s=r.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function tht(){let t,e;onmessage=function(o){let a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(d){t.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(t)});break;case"decode":let l=a.buffer,c=a.taskConfig;e.then(d=>{let u=d.draco,h=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let p=n(u,h,f,c),m=p.attributes.map(g=>g.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{u.destroy(f),u.destroy(h)}});break}};function n(o,a,l,c){let d=c.attributeIDs,u=c.attributeTypes,h,f,p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeBufferToMesh(l,h);else if(p===o.POINT_CLOUD)h=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let m={index:null,attributes:[]};for(let g in d){let v=self[u[g]],y,x;if(c.useUniqueIDs)x=d[g],y=a.GetAttributeByUniqueId(h,x);else{if(x=a.GetAttributeId(h,o[d[g]]),x===-1)continue;y=a.GetAttribute(h,x)}m.attributes.push(r(o,a,h,g,v,y))}return p===o.TRIANGULAR_MESH&&(m.index=i(o,a,h)),o.destroy(h),m}function i(o,a,l){let c=l.num_faces()*3,d=c*4,u=o._malloc(d);a.GetTrianglesUInt32Array(l,d,u);let h=new Uint32Array(o.HEAPF32.buffer,u,c).slice();return o._free(u),{array:h,itemSize:1}}function r(o,a,l,c,d,u){let h=u.num_components(),f=l.num_points()*h,p=f*d.BYTES_PER_ELEMENT,m=s(o,d),g=o._malloc(p);a.GetAttributeDataArrayForAllPoints(l,u,m,p,g);let v=new d(o.HEAPF32.buffer,g,f).slice();return o._free(g),{name:c,array:v,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var uf;function nht(){return uf||(uf=new eht,uf.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),uf.decoderPending}async function iht(t){if(uf){let e={attributeIDs:uf.defaultAttributeIDs,attributeTypes:uf.defaultAttributeTypes,useUniqueIDs:!1},n;try{n=await uf.decodeGeometry(new Int8Array(t).buffer,e)}catch(i){console.error(i)}if(n)return{index:n.index?{array:n.index.array}:void 0,attributes:Object.entries(n.attributes).map(([i,r])=>({name:i,itemSize:r.itemSize,array:r.array}))}}return null}async function rht(t,e){let[n,i]=Yue(vF.deserialize(new Uint8Array(t)));rst(n);let r=[];n.scene.objects.traverse((s,o)=>{o.type==="Mesh"&&o.geometry.type==="NonParametricGeometry"&&o.geometry.data.draco!==void 0&&r.push(o)}),r.length&&await nht();for(let s of r){let o=await iht(zs(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:d})=>{a[l]={array:c,itemSize:d,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return e&&e(n),i.result().data}var VJ=Object.keys(Qhe).filter(t=>isNaN(Number(t))),sht=class{constructor(t,e,n){this.controlsManager=e,this.eventContext=n,this.isEnable=!1,this._isPaused=!1,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=r=>{(r.touches.length>1||this.preventTouchScroll)&&r.preventDefault()},this.onMouseWheelPreventScroll=r=>{this.preventScroll&&r.preventDefault()},this.stopRaycast=t.stopRaycast,this.preventScroll=t.preventScroll,this.preventTouchScroll=t.preventTouchScroll,this.hideCursor=t.hideCursor,this.requestRender=n.requestRender;let i={controlsManager:e,eventManager:this};this.handlers={Spline:new Wut(this.eventContext),Conditional:new Qut(this.eventContext,i),Start:new wdt(this.eventContext,i),Basic:new $ut(this.eventContext,i),MouseHover:new gdt(this.eventContext,i),Scroll:new xdt(this.eventContext,i),Follow:new ldt(this.eventContext,i),DragDrop:new idt(this.eventContext,i),LookAt:new fdt(this.eventContext)}}activate(){if(this.isPaused)return;let{scene:t,domElement:e,eventElement:n}=this.eventContext;this.hideCursor&&(e.style.cursor="none"),this.isEnable=!0,t.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),VJ.forEach(i=>{(Object.values(this.handlers).some(r=>r.domEventsNeeded.has(i))||i==="pointerdown"&&this.controlsManager.navigationMeshWrapper)&&(e.addEventListener(i,this.onResetRaycaster),n.addEventListener(i,this.onResetRaycaster))}),e.addEventListener("wheel",this.onMouseWheelPreventScroll),e.addEventListener("touchmove",this.onTouchMovePreventScroll)}deactivate(){let{scene:t,domElement:e}=this.eventContext;this.isEnable=!1,e.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),this.controlsManager.gameControls.forEach(n=>{n.disposeActions()}),this.controlsManager.disconnectCollisionEvents(),t.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender)}),VJ.forEach(n=>{e.removeEventListener(n,this.onResetRaycaster)}),e.removeEventListener("touchmove",this.onTouchMovePreventScroll),e.removeEventListener("wheel",this.onMouseWheelPreventScroll)}get isPaused(){return this._isPaused}pause(){this._isPaused=!0,this.deactivate()}resume(){this._isPaused=!1,this.activate()}reset(){this.deactivate(),this.activate()}updateUseWindowEvents(t){let e=this.isEnable;e&&this.deactivate(),this.eventContext.useWindowEvents=t,e&&this.activate()}},oht=class{constructor(t,e,n,i,r){this._aspect=1,this._renderer=t,this._camera=e,this._frameSize=new Se().copy(n),this._editorSize=new Se().copy(i),this._aspect=e.aspect,this._fov=r??e.fov}set frameSize(t){this._frameSize.copy(t)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let t=this._frameSize.x,e=this._frameSize.y,n=this._editorSize.y;this._aspect=t/e,e<=n&&(this._camera.zoom*=n/e),this._renderer.setViewport(0,0,t,e)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,e=this._editorSize.y,n=this._fov;if(t>e){let i=aht(t,1080,2160,1,15)/100;n*=t/e,n*=1-i}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}setCamera(t){this._camera=t,this._aspect=t.aspect,this._fov=t.fov}revert(){let t=window.innerWidth,e=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,t,e),this._renderer.setSize(t,e)),this._camera&&(this._camera.aspect=t/e,this._camera.fov=this._fov,this._camera.setViewplaneSize(t,e),this._camera.updateProjectionMatrix())}};function aht(t,e,n,i,r){return(t-e)/(n-e)*(r-i)+i}var Dfe={RED:0,GREEN:1,BLUE:2,ALPHA:3},FS="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",lht=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,iT=class extends di{constructor(t=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:t?"2":"1"},uniforms:{kernel64:new Je(null),kernel16:new Je(null),inputBuffer:new Je(null),cocBuffer:new Je(null),texelSize:new Je(new Se),scale:new Je(1)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:lht,vertexShader:FS}),this.toneMapped=!1,e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set cocBuffer(t){this.uniforms.cocBuffer.value=t}setCoCBuffer(t){this.uniforms.cocBuffer.value=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(t){return this.uniforms.scale.value=t}setScale(t){this.uniforms.scale.value=t}generateKernel(){let t=2.39996323,e=new Float32Array(128),n=new Float32Array(32),i=0,r=0;for(let a=0;a<80;++a){let l=a*t,c=Math.sqrt(a)/Math.sqrt(80),d=c*Math.cos(l),u=c*Math.sin(l);a%5===0?(n[r++]=d,n[r++]=u):(e[i++]=d,e[i++]=u)}let s=[],o=[];for(let a=0;a<128;)s.push(new sn(e[a++],e[a++],e[a++],e[a++]));for(let a=0;a<32;)o.push(new sn(n[a++],n[a++],n[a++],n[a++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=o}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}};function HJ(t,e,n){return t*(e-n)-e}function d4(t,e,n){return Math.min(Math.max((t+e)/(e-n),0),1)}var cht=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,uht=class extends di{constructor(t){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Je(null),focusDistance:new Je(0),focusRange:new Je(0),cameraNear:new Je(.3),cameraFar:new Je(1e3)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:cht,vertexShader:FS}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(t)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Zd){this.depthBuffer=t,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(t){this.uniforms.focusDistance.value=t}get worldFocusDistance(){return-HJ(this.focusDistance,this.near,this.far)}set worldFocusDistance(t){this.focusDistance=d4(-t,this.near,this.far)}getFocusDistance(t){this.uniforms.focusDistance.value=t}setFocusDistance(t){this.uniforms.focusDistance.value=t}get focalLength(){return this.focusRange}set focalLength(t){this.focusRange=t}get focusRange(){return this.uniforms.focusRange.value}set focusRange(t){this.uniforms.focusRange.value=t}get worldFocusRange(){return-HJ(this.focusRange,this.near,this.far)}set worldFocusRange(t){this.focusRange=d4(-t,this.near,this.far)}getFocalLength(t){return this.focusRange}setFocalLength(t){this.focusRange=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Os?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},dht=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,hht="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",jJ=class extends di{constructor(t=new Se){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Je(null),texelSize:new Je(new Se),halfTexelSize:new Je(new Se),kernel:new Je(0),scale:new Je(1)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:dht,vertexShader:hht}),this.toneMapped=!1,this.setTexelSize(t.x,t.y)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e),this.uniforms.halfTexelSize.value.set(t,e).multiplyScalar(.5)}setSize(t,e){let n=this.uniforms;n.texelSize.value.set(1/t,1/e),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}},fht=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,pht=class extends di{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Je(null),opacity:new Je(1)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:fht,vertexShader:FS}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},mht=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,ght=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,RR={DEPTH:0,LUMA:1,COLOR:2},vht={DISABLED:0,DEPTH:1,CUSTOM:2},yht=class extends di{constructor(t=new Se,e=RR.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:Ax.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Je(null),depthBuffer:new Je(null),predicationBuffer:new Je(null),texelSize:new Je(t)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:mht,vertexShader:ght}),this.toneMapped=!1,this.edgeDetectionMode=e}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Zd){this.depthBuffer=t,this.depthPacking=e}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(t){this.defines.EDGE_DETECTION_MODE=t.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(t){this.edgeDetectionMode=t}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(t){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=t.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(t){this.localContrastAdaptationFactor=t}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(t){this.defines.EDGE_THRESHOLD=t.toFixed("6"),this.defines.DEPTH_THRESHOLD=(t*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(t){this.edgeDetectionThreshold=t}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(t){this.defines.PREDICATION_MODE=t.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(t){this.predicationMode=t}set predicationBuffer(t){this.uniforms.predicationBuffer.value=t}setPredicationBuffer(t){this.uniforms.predicationBuffer.value=t}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(t){this.defines.PREDICATION_THRESHOLD=t.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(t){this.predicationThreshold=t}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(t){this.defines.PREDICATION_SCALE=t.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(t){this.predicationScale=t}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(t){this.defines.PREDICATION_STRENGTH=t.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(t){this.predicationStrength=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},xht=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,bht="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Fl={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},h4=class extends di{constructor(t,e,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ax.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Je(null),depthBuffer:new Je(null),resolution:new Je(new Se),texelSize:new Je(new Se),cameraNear:new Je(.3),cameraFar:new Je(1e3),aspect:new Je(1),time:new Je(0)},blending:wr,depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.adoptCameraSettings(i)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Zd){this.depthBuffer=t,this.depthPacking=e}setShaderParts(t){return this.fragmentShader=xht.replace(Fl.FRAGMENT_HEAD,t.get(Fl.FRAGMENT_HEAD)).replace(Fl.FRAGMENT_MAIN_UV,t.get(Fl.FRAGMENT_MAIN_UV)).replace(Fl.FRAGMENT_MAIN_IMAGE,t.get(Fl.FRAGMENT_MAIN_IMAGE)),this.vertexShader=bht.replace(Fl.VERTEX_HEAD,t.get(Fl.VERTEX_HEAD)).replace(Fl.VERTEX_MAIN_SUPPORT,t.get(Fl.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(t){for(let e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(let e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(let e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Os?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){let n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Fl}},wht=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,_ht=class extends di{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ax.replace(/\D+/g,"")},uniforms:{inputBuffer:new Je(null),threshold:new Je(0),smoothing:new Je(1),range:new Je(null)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:wht,vertexShader:FS}),this.toneMapped=!1,this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},Sht=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,Rfe={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},Eht=class extends di{constructor(t=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Je(t),inputBuffer:new Je(null),strength:new Je(1)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:Sht,vertexShader:FS}),this.toneMapped=!1,this.setColorChannel(Dfe.RED),this.setMaskFunction(Rfe.DISCARD)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set maskTexture(t){this.uniforms.maskTexture.value=t,delete this.defines.MASK_PRECISION_HIGH,t.type!==Vs&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(t){this.maskTexture=t}set colorChannel(t){this.defines.COLOR_CHANNEL=t.toFixed(0),this.needsUpdate=!0}setColorChannel(t){this.colorChannel=t}set maskFunction(t){this.defines.MASK_FUNCTION=t.toFixed(0),this.needsUpdate=!0}setMaskFunction(t){this.maskFunction=t}get inverted(){return this.defines.INVERTED!==void 0}set inverted(t){this.inverted&&!t?delete this.defines.INVERTED:t&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get strength(){return this.uniforms.strength.value}set strength(t){this.uniforms.strength.value=t}getStrength(){return this.strength}setStrength(t){this.strength=t}},Mht=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,Aht="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",Tht=class extends di{constructor(t=new Se,e=new Se){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Je(null),searchTexture:new Je(null),areaTexture:new Je(null),resolution:new Je(e),texelSize:new Je(t)},blending:wr,depthWrite:!1,depthTest:!1,fragmentShader:Mht,vertexShader:Aht}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(t){this.uniforms.searchTexture.value=t}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(t){this.uniforms.areaTexture.value=t}setLookupTextures(t,e){this.searchTexture=t,this.areaTexture=e}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(t){let e=Math.min(Math.max(t,0),112);this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(t){this.orthogonalSearchSteps=t}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(t){let e=Math.min(Math.max(t,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(t){this.diagonalSearchSteps=t}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(t){t?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(t){this.diagonalDetection=t}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(t){let e=Math.min(Math.max(t,0),100);this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(t){this.cornerRounding=t}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(t){t?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(t){this.cornerDetection=t}setSize(t,e){let n=this.uniforms;n.texelSize.value.set(1/t,1/e),n.resolution.value.set(t,e)}},Cht=new Dx,Ih=null;function Pht(){if(Ih===null){let t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Ih=new Ut,Ih.setAttribute!==void 0?(Ih.setAttribute("position",new Wt(t,3)),Ih.setAttribute("uv",new Wt(e,2))):(Ih.addAttribute("position",new Wt(t,3)),Ih.addAttribute("uv",new Wt(e,2)))}return Ih}var ho=class{constructor(t="Pass",e=new zm,n=Cht){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){let e=this.getFullscreenMaterial();e!==null&&(e.needsUpdate=!0),this.rtt=!t}}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new Po(Pht(),t),e.frustumCulled=!1,this.scene===null&&(this.scene=new zm),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=Zd){}render(t,e,n,i,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(let t of Object.keys(this)){let e=this[t];if(e!==null&&typeof e.dispose=="function"){if(e instanceof zm||e===this.renderer)continue;this[t].dispose()}}}},f4=class extends ho{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new pht,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new jn(1,1,{minFilter:an,magFilter:an,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,i,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==Vs?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t.outputEncoding===Zt&&(this.renderTarget.texture.encoding=Zt))}},Dht=class extends ho{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,i,r){let s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},Hk=new Lt,g6=class extends ho{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,i,r){let s=this.overrideClearColor,o=this.overrideClearAlpha,a=t.getClearAlpha(),l=s!==null,c=o>=0;l?(Hk.copy(t.getClearColor(Hk)),t.setClearColor(s,c?o:a)):c&&t.setClearAlpha(o),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(Hk,a):c&&t.setClearAlpha(a)}},kh=-1,Ro=class extends uo{constructor(t,e=kh,n=kh,i=1){super(),this.resizable=t,this.base=new Se(1,1),this.preferred=new Se(e,n),this.target=this.preferred,this.s=i}get width(){let{base:t,preferred:e,scale:n}=this,i;return e.width!==kh?i=e.width:e.height!==kh?i=Math.round(e.height*(t.width/Math.max(t.height,1))):i=Math.round(t.width*n),i}set width(t){this.preferredWidth=t}get height(){let{base:t,preferred:e,scale:n}=this,i;return e.height!==kh?i=e.height:e.width!==kh?i=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):i=Math.round(t.height*n),i}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferred.setScalar(kh),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.base.width}set baseWidth(t){this.base.width!==t&&(this.base.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(t){this.base.width!==t&&(this.base.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(t){this.base.height!==t&&(this.base.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.base.width!==t||this.base.height!==e)&&(this.base.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(t){this.preferred.width!==t&&(this.preferred.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferred.height}set preferredHeight(t){this.preferred.height!==t&&(this.preferred.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferred.width!==t||this.preferred.height!==e)&&(this.preferred.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(t){this.base.set(t.getBaseWidth(),t.getBaseHeight()),this.preferred.set(t.getPreferredWidth(),t.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return kh}},jk=!1,GJ=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case ca:n=this.materialsFlatShadedDoubleSide;break;case Qr:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case ca:n=this.materialsDoubleSide;break;case Qr:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){let e=this.materials=[t.clone(),t.clone(),t.clone()];for(let n of e)n.uniforms=Object.assign({},t.uniforms),n.side=oc;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.side=Qr,i}),this.materialsDoubleSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.side=ca,i}),this.materialsFlatShaded=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Qr,i}),this.materialsFlatShadedDoubleSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=ca,i})}}render(t,e,n){let i=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,jk){let r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(let s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{let r=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=r}t.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return jk}static set workaroundEnabled(t){jk=t}},Rht=class extends ho{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new g6,this.overrideMaterialManager=n===null?null:new GJ(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){let t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){let e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new GJ(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,i,r){let s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,d=t.shadowMap.autoUpdate,u=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,s,o):t.render(s,o),o.layers.mask=l,s.background=c,t.shadowMap.autoUpdate=d}},WJ=class extends ho{constructor(t,e,{resolutionScale:n=1,width:i=Ro.AUTO_SIZE,height:r=Ro.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Rht(t,e,new Nce({depthPacking:Sce}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let a=o.getClearPass();a.overrideClearColor=new Lt(16777215),a.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new jn(1,1,{minFilter:Jn,magFilter:Jn,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new Ro(this,i,r,n);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},_n={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Oht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",Lht="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Iht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",kht="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Nht="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Bht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",zht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Fht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Uht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Vht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Hht="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",jht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Ght="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Wht="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",qht="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",$ht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Xht="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Yht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Kht=new Map([[_n.SKIP,null],[_n.ADD,Oht],[_n.ALPHA,Lht],[_n.AVERAGE,Iht],[_n.COLOR_BURN,kht],[_n.COLOR_DODGE,Nht],[_n.DARKEN,Bht],[_n.DIFFERENCE,zht],[_n.EXCLUSION,Fht],[_n.LIGHTEN,Uht],[_n.MULTIPLY,Vht],[_n.DIVIDE,Hht],[_n.NEGATION,jht],[_n.NORMAL,Ght],[_n.OVERLAY,Wht],[_n.REFLECT,qht],[_n.SCREEN,$ht],[_n.SOFT_LIGHT,Xht],[_n.SUBTRACT,Yht]]),Zht=class extends uo{constructor(t,e=1){super(),this.f=t,this.opacity=new Je(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this.f}set blendFunction(t){this.f=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Kht.get(this.blendFunction)}},uu={NONE:0,DEPTH:1,CONVOLUTION:2},Su=class extends uo{constructor(t,e,{attributes:n=uu.NONE,blendFunction:i=_n.SCREEN,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new Zht(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=Zd){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(let t of Object.keys(this)){let e=this[t];if(e!==null&&typeof e.dispose=="function"){if(e instanceof zm||e===this.renderer)continue;this[t].dispose()}}}};function qJ(t,e,n){for(let i of e){let r="$1"+t+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let o of n.entries())o[1]!==null&&n.set(o[0],o[1].replace(s,r))}}function Qht(t,e,n,i,r,s,o){let a=new Map([["fragment",e.getFragmentShader()],["vertex",e.getVertexShader()]]),l=a.get("fragment")!==void 0&&/mainImage/.test(a.get("fragment")),c=a.get("fragment")!==void 0&&/mainUv/.test(a.get("fragment")),d=[],u=[],h=!1,f=!1;if(a.get("fragment")===void 0)console.error("Missing fragment shader",e);else if(c&&o&uu.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",e);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",e);else{let p=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=h4.Section;if(c){let v=`	${t}MainUv(UV);
`;n.set(m.FRAGMENT_MAIN_UV,n.get(m.FRAGMENT_MAIN_UV)+v),h=!0}if(a.get("vertex")!==null&&/mainSupport/.test(a.get("vertex"))){let v=`	${t}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a.get("vertex"))?`vUv);
`:`);
`,n.set(m.VERTEX_MAIN_SUPPORT,n.get(m.VERTEX_MAIN_SUPPORT)+v),d=d.concat([...a.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),u=u.concat(d).concat([...a.get("vertex").matchAll(p)].map(y=>y[1]))}u=u.concat([...a.get("fragment").matchAll(p)].map(v=>v[1])),u=u.concat([...e.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...e.uniforms.keys()]),e.uniforms.forEach((v,y)=>s.set(t+y.charAt(0).toUpperCase()+y.slice(1),v)),e.defines.forEach((v,y)=>r.set(t+y.charAt(0).toUpperCase()+y.slice(1),v)),qJ(t,u,r),qJ(t,u,a);let g=e.blendMode;if(i.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${t}MainImage(color0, UV, `;o&uu.DEPTH&&v.test(a.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let x=t+"BlendOpacity";s.set(x,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${x});

	`,n.set(m.FRAGMENT_MAIN_IMAGE,n.get(m.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+y)}n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+a.get("fragment")+`
`),a.get("vertex")!==null&&n.set(m.VERTEX_HEAD,n.get(m.VERTEX_HEAD)+a.get("vertex")+`
`)}return{varyings:d,transformedUv:h,readDepth:f}}var Q2=class extends ho{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new h4(null,null,null,t),this.effects=e.sort((n,i)=>i.attributes-n.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){let e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}verifyResources(){let t=this.renderer.capabilities,e=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniformCount>e&&console.warn("The current rendering context doesn't support more than "+e+" uniforms, but "+this.uniformCount+" were defined"),e=t.maxVaryings,this.varyingCount>e&&console.warn("The current rendering context doesn't support more than "+e+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let t=h4.Section,e=new Map([[t.FRAGMENT_HEAD,""],[t.FRAGMENT_MAIN_UV,""],[t.FRAGMENT_MAIN_IMAGE,""],[t.VERTEX_HEAD,""],[t.VERTEX_MAIN_SUPPORT,""]]),n=new Map,i=new Map,r=new Map,s=new Set,o=0,a=0,l=0,c=!1,d=!1;for(let h of this.effects)if(h.blendMode.blendFunction===_n.SKIP)l|=h.getAttributes()&uu.DEPTH;else if(l&h.getAttributes()&uu.CONVOLUTION)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let f="e"+o++,p=Qht(f,h,e,n,i,r,l);if(a+=p.varyings.length,c=c||p.transformedUv,d=d||p.readDepth,h.extensions!==null)for(let m of h.extensions)s.add(m)}let u=/\bblend\b/g;for(let h of n.values()){let f=h.getShaderCode().replace(u,`blend${h.blendFunction}`);e.set(t.FRAGMENT_HEAD,e.get(t.FRAGMENT_HEAD)+f+`
`)}if(l&uu.DEPTH){if(d){let h=`float depth = readDepth(UV);

	`;e.set(t.FRAGMENT_MAIN_IMAGE,h+e.get(t.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(c){let h=`vec2 transformedUv = vUv;
`;e.set(t.FRAGMENT_MAIN_UV,h+e.get(t.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");e.forEach((h,f,p)=>p.set(f,h.trim().replace(/^#/,`
#`))),this.uniformCount=r.size,this.varyingCount=a,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(e).setExtensions(s).setUniforms(r).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=Zd){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(let n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,i,r){for(let s of this.effects)s.update(t,e,i);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(let n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(let i of this.effects)i.initialize(t,e,n),i.addEventListener("change",r=>this.handleEvent(r));this.updateMaterial(),this.verifyResources(),n!==void 0&&n!==Vs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let t of this.effects)t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},Jht=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ofe=class extends ho{constructor({resolutionScale:t=.5,width:e=Ro.AUTO_SIZE,height:n=Ro.AUTO_SIZE,kernelSize:i=v6.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new jn(1,1,{minFilter:an,magFilter:an,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let r=this.resolution=new Ro(this,e,n,t);r.addEventListener("change",s=>this.setSize(r.baseWidth,r.baseHeight)),this.blurMaterial=new jJ,this.ditheredBlurMaterial=new jJ,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){let s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=Jht[this.kernelSize],d=this.blurMaterial,u=e,h,f;for(this.fullscreenMaterial=d,h=0,f=c.length-1;h<f;++h){let p=h&1?l:a;d.kernel=c[h],d.inputBuffer=u.texture,t.setRenderTarget(p),t.render(s,o),u=p}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=c[h],d.inputBuffer=u.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,o)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e);let i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(i,r),this.ditheredBlurMaterial.setSize(i,r)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Vs?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t.outputEncoding===Zt&&(this.renderTargetA.texture.encoding=Zt,this.renderTargetB.texture.encoding=Zt))}static get AUTO_SIZE(){return Ro.AUTO_SIZE}},eft=class extends ho{constructor({width:t=Ro.AUTO_SIZE,height:e=Ro.AUTO_SIZE,renderTarget:n,luminanceRange:i,colorOutput:r}={}){super("LuminancePass"),this.fullscreenMaterial=new _ht(r,i),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new jn(1,1,{minFilter:an,magFilter:an,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new Ro(this,t,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,i,r){let s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==Vs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},tft=class extends ho{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new g6(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,i,r){let s=t.getContext(),o=t.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,d=this.inverted?0:1,u=1-d;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,d,4294967295),o.stencil.setClear(u),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(t,null):(c.render(t,e),c.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(a,l)):(t.setRenderTarget(e),t.render(a,l),t.setRenderTarget(n),t.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},id=class extends ho{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.inputBufferUniform=null,this.setInput(e)}setInput(t){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let e=this.fullscreenMaterial.uniforms;e!==void 0&&e[t]!==void 0&&(this.inputBufferUniform=e[t])}}render(t,e,n,i,r){this.inputBufferUniform!==null&&e!==null&&(this.inputBufferUniform.value=e.texture),t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}initialize(t,e,n){n!==void 0&&n!==Vs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Gk=1/1e3,nft=1e3,ift=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(t){return this.fixedDeltaEnabled=t,this}isAutoResetEnabled(t){return this.autoReset}setAutoResetEnabled(t){return typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=t),this}getDelta(){return this.delta*Gk}getFixedDelta(){return this.fixedDelta*Gk}setFixedDelta(t){return this.fixedDelta=t*nft,this}getElapsed(){return this.elapsed*Gk}getTimescale(){return this.timescale}setTimescale(t){return this.timescale=t,this}update(t){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=t!==void 0?t:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(t){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},v6={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},rft=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,sft=class extends Su{constructor({blendFunction:t=_n.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,resolutionScale:i=.5,intensity:r=1,width:s=Ro.AUTO_SIZE,height:o=Ro.AUTO_SIZE,kernelSize:a=v6.LARGE}={}){super("BloomEffect",rft,{blendFunction:t,uniforms:new Map([["map",new Je(null)],["intensity",new Je(r)]])}),this.renderTarget=new jn(1,1,{minFilter:an,magFilter:an,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new eft({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothingFactor=n,this.blurPass=new Ofe({resolutionScale:i,width:s,height:o,kernelSize:a});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(t,e,i),this.blurPass.render(t,i,i)):this.blurPass.render(t,e,i)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t.outputEncoding===Zt&&(this.renderTarget.texture.encoding=Zt))}},oft="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",aft=class extends Su{constructor({blendFunction:t=_n.NORMAL,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect",oft,{blendFunction:t,uniforms:new Map([["brightness",new Je(e)],["contrast",new Je(n)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(t){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(t){return this.contrast}setContrast(t){this.contrast=t}},lft="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",cft=class extends Su{constructor(t=_n.NORMAL){super("ColorAverageEffect",lft,{blendFunction:t})}},uft="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",dft="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",hft=class extends Su{constructor({blendFunction:t=_n.NORMAL,offset:e=new Se(.001,5e-4)}={}){super("ChromaticAberrationEffect",uft,{vertexShader:dft,blendFunction:t,attributes:uu.CONVOLUTION,uniforms:new Map([["offset",new Je(e)]])})}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},fft=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,pft=class extends Su{constructor(t,{blendFunction:e=_n.NORMAL,worldFocusDistance:n,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,width:l=Ro.AUTO_SIZE,height:c=Ro.AUTO_SIZE}={}){super("DepthOfFieldEffect",fft,{blendFunction:e,attributes:uu.DEPTH,uniforms:new Map([["nearColorBuffer",new Je(null)],["farColorBuffer",new Je(null)],["nearCoCBuffer",new Je(null)],["scale",new Je(1)]])}),this.camera=t,this.renderTarget=new jn(1,1,{minFilter:an,magFilter:an,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new id(new uht(t));let d=this.cocMaterial;d.focusDistance=r,d.focusRange=o,n!==void 0&&(d.worldFocusDistance=n),i!==void 0&&(d.worldFocusRange=i),this.blurPass=new Ofe({kernelSize:v6.MEDIUM,width:l,height:c});let u=this.blurPass.getResolution();u.addEventListener("change",f=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new id(new Eht(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=Rfe.MULTIPLY,h.colorChannel=Dfe.GREEN,this.bokehNearBasePass=new id(new iT(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new id(new iT(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new id(new iT(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new id(new iT(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=a}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(t){let e=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let n of e)n.fullscreenMaterial.setScale(t);this.maskPass.fullscreenMaterial.setStrength(t),this.uniforms.get("scale").value=t}getBokehScale(){return this.bokehScale}setBokehScale(t){this.bokehScale=t}getTarget(){return this.target}setTarget(t){this.target=t}calculateFocusDistance(t){let e=this.camera,n=e.position.distanceTo(t);return d4(-n,e.near,e.far)}setDepthTexture(t,e=Zd){this.circleOfConfusionMaterial.depthBuffer=t,this.circleOfConfusionMaterial.depthPacking=e}update(t,e,n){let i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){let a=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=a}this.cocPass.render(t,null,r),this.blurPass.render(t,r,s),this.maskPass.render(t,e,o),this.bokehFarBasePass.render(t,o,i),this.bokehFarFillPass.render(t,i,this.renderTargetFar),this.bokehNearBasePass.render(t,e,i),this.bokehNearFillPass.render(t,i,this.renderTargetNear)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e);let i=n.width,r=n.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(o=>o.setSize(t,e)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(o=>o.setSize(i,r)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(i,r))}initialize(t,e,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(t,e,n)),this.blurPass.initialize(t,e,Vs),n!==void 0&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,t.outputEncoding===Zt&&(this.renderTarget.texture.encoding=Zt,this.renderTargetNear.texture.encoding=Zt,this.renderTargetFar.texture.encoding=Zt,this.renderTargetMasked.texture.encoding=Zt))}};new q;new tt;var mft="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",gft=class extends Su{constructor({blendFunction:t=_n.NORMAL,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect",mft,{blendFunction:t,uniforms:new Map([["hue",new Je(new q)],["saturation",new Je(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){let t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){let e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}};new Lt;var vft=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,yft=class extends Su{constructor({blendFunction:t=_n.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",vft,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},xft="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",bft=class extends Su{constructor(t=30){super("PixelationEffect",xft,{uniforms:new Map([["active",new Je(!1)],["d",new Je(new Se)]])}),this.resolution=new Se,this.d=0,this.granularity=t}get granularity(){return this.d}set granularity(t){let e=Math.floor(t);e%2>0&&(e+=1),this.d=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(t){this.granularity=t}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new q;new q;var $J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",XJ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",wft="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",_ft="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",lm={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Lfe=class extends Su{constructor({preset:t=lm.MEDIUM,edgeDetectionMode:e=RR.COLOR,predicationMode:n=vht.DISABLED}={}){super("SMAAEffect",wft,{vertexShader:_ft,blendFunction:_n.NORMAL,attributes:uu.CONVOLUTION|uu.DEPTH,uniforms:new Map([["weightMap",new Je(null)]])});let i,r;arguments.length>1&&(i=arguments[0],r=arguments[1],arguments.length>2&&(t=arguments[2]),arguments.length>3&&(e=arguments[3])),this.renderTargetEdges=new jn(1,1,{minFilter:an,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new g6(!0,!1,!1),this.clearPass.overrideClearColor=new Lt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new id(new yht),this.edgeDetectionMaterial.edgeDetectionMode=e,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new id(new Tht);let s=new Kce;s.onLoad=()=>{let o=new kr(i);o.name="SMAA.Search",o.magFilter=Jn,o.minFilter=Jn,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let a=new kr(r);a.name="SMAA.Area",a.magFilter=an,a.minFilter=an,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,this.weightsMaterial.areaTexture=a,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),i!==void 0&&r!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(i=new Image,r=new Image,i.addEventListener("load",()=>s.itemEnd("search")),r.addEventListener("load",()=>s.itemEnd("area")),i.src=$J,r.src=XJ),this.applyPreset(t)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(t){this.edgeDetectionMaterial.edgeDetectionThreshold=t}setOrthogonalSearchSteps(t){this.weightsMaterial.orthogonalSearchSteps=t}applyPreset(t){let e=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(t){case lm.LOW:e.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case lm.MEDIUM:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case lm.HIGH:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case lm.ULTRA:e.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break}}setDepthTexture(t,e=Zd){this.edgeDetectionMaterial.depthBuffer=t,this.edgeDetectionMaterial.depthPacking=e}update(t,e,n){this.clearPass.render(t,this.renderTargetEdges),this.edgeDetectionPass.render(t,e,this.renderTargetEdges),this.weightsPass.render(t,this.renderTargetEdges,this.renderTargetWeights)}setSize(t,e){this.edgeDetectionMaterial.setSize(t,e),this.weightsMaterial.setSize(t,e),this.renderTargetEdges.setSize(t,e),this.renderTargetWeights.setSize(t,e)}dispose(){let{searchTexture:t,areaTexture:e}=this.weightsMaterial;t!==null&&e!==null&&(t.dispose(),e.dispose()),super.dispose()}static get searchImageDataURL(){return $J}static get areaImageDataURL(){return XJ}},Sft=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,rT={DEFAULT:0,ESKIL:1},Eft=class extends Su{constructor({blendFunction:t=_n.NORMAL,technique:e=rT.DEFAULT,eskil:n=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",Sft,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Je(i)],["darkness",new Je(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===rT.ESKIL}set eskil(t){this.technique=t?rT.ESKIL:rT.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}},Jd=class{constructor(t,e){this.enabled=!1,this.effect=new t(e),Object.defineProperty(this,"opacity",{enumerable:!0,set(n){this.effect.blendMode.opacity.value=n},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(n){this.effect.blendMode.setBlendFunction(Number(n))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=_n.NORMAL}},Mft=class extends Jd{constructor(){super(sft),this.blendFunction=_n.SCREEN}set intensity(t){this.effect.intensity=t}get intensity(){return this.effect.intensity}set luminanceThreshold(t){this.effect.luminanceMaterial.threshold=t}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(t){this.effect.luminanceMaterial.smoothing=t}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(t){this.effect.blurPass.scale=t}get blurScale(){return this.effect.blurPass.scale}set kernelSize(t){this.effect.blurPass.kernelSize=t}get kernelSize(){return this.effect.blurPass.kernelSize}},Aft=class extends Jd{constructor(){super(aft)}set contrast(t){this.effect.uniforms.get("contrast").value=t}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(t){this.effect.uniforms.get("brightness").value=t}get brightness(){return this.effect.uniforms.get("brightness").value}},Tft=class extends Jd{constructor(){super(hft),this.effect.offset=new Se(.01,.01)}set offset(t){this.effect.offset.set(t[0]/1e3,t[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},Cft=class extends Jd{constructor(){super(cft)}},Pft=class extends Jd{constructor(){super(gft),this._hue=0}set hue(t){this._hue=t,this.effect.setHue(t)}get hue(){return this._hue}set saturation(t){this.effect.uniforms.get("saturation").value=t}get saturation(){return this.effect.uniforms.get("saturation").value}},Dft=class extends Jd{constructor(){super(yft),this.blendFunction=_n.OVERLAY}},Rft=class extends Jd{constructor(){super(Eft)}get eskil(){return this.effect.eskil}set eskil(t){this.effect.eskil=t}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(t){this.effect.uniforms.get("darkness").value=t}get offset(){return this.effect.uniforms.get("offset").value}set offset(t){this.effect.uniforms.get("offset").value=t}},Oft=class extends Jd{constructor(t){super(pft,t)}set focalLength(t){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=t}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(t){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=t}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(t){this.effect.bokehScale=t}},Lft=class extends Jd{constructor(){super(bft)}get granularity(){return this.effect.getGranularity()}set granularity(t){this.effect.setGranularity(t)}},Ift=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,kft=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;vec4 sampleTextureCatmullRom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 getDilatedVelocity(){float closestDepth=1000.0;vec2 closestUVOffset=vec2(0.0);for(int i=0;i<9;i++){float neighborDepth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighborDepth<closestDepth){closestUVOffset=vTexCoords[i];closestDepth=neighborDepth;}}return texture2D(velocityBuffer,closestUVOffset).rgb;}vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}
#define USE_CATMULL_ROM
vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 clipAabb(vec3 aabbMin,vec3 aabbMax,vec4 p,vec4 q){vec3 pClip=0.5*(aabbMax+aabbMin);vec3 eClip=0.5*(aabbMax-aabbMin)+0.00000001;vec4 vClip=q-vec4(pClip,p.w);vec3 vUnit=vClip.xyz/eClip;vec3 aUnit=abs(vUnit);float maUnit=max(aUnit.x,max(aUnit.y,aUnit.z));if(maUnit>1.0){return vec4(pClip,p.w)+vClip/maUnit;}else{return q;}}void main(){vec3 dilatedVelocity=getDilatedVelocity();vec2 velocity=dilatedVelocity.rg*(dilatedVelocity.b);vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sampleTextureCatmullRom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(0.5,0.9,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
vec4 result=currentColor*0.1+previousColorClipped*0.9;
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,Nft=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,Bft=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,p4=class extends di{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Je(null)},blending:wr,depthWrite:!1,depthTest:!1,vertexShader:Nft,fragmentShader:Bft})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}},zft=class extends ho{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new p4,this.resolutionVector=new Se,this.resolveMaterial=new di({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Je(null),historyBuffer:new Je(null),velocityBuffer:new Je(null),depthBuffer:new Je(null),resolution:new Je(new Se)},blending:wr,depthWrite:!1,depthTest:!1,vertexShader:Ift,fragmentShader:kft}),this.historyRenderTarget=new jn(1024,1024,{minFilter:an,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new jn(1024,1024,{minFilter:Jn,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(t,e){this.historyRenderTarget.setSize(t,e),this.resultRenderTarget.setSize(t,e)}render(t,e){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=e.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=e.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=e.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(e.width,e.height),t.setRenderTarget(this.resultRenderTarget),t.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,t.setRenderTarget(this.historyRenderTarget),t.render(this.scene,this.camera);let n=this.renderToScreen?null:e;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,t.setRenderTarget(n),t.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},Fft=class extends ho{constructor(t,e,n){super("TransmissionPass",void 0,e),this.MRTCompatible=!0,this.depthPass=new WJ(t,e,{renderTarget:n.transmissionDepthTarget}),this.passThroughMaterial=new p4,this.splineScene=t,this.needsSwap=!1}updatePasses(t){this.passThroughMaterial=new p4,this.depthPass=new WJ(this.splineScene,this.camera,{renderTarget:t.transmissionDepthTarget})}setCamera(t){this.camera=t}setScene(t){this.splineScene=t}render(t,e,n){let i=this.camera.layers.mask,r=t;r.setRenderTarget(r.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=e.texture[0],r.clear(),r.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(t,e,n),r.shadowMap.needsUpdate=!1,r.shadowMap.autoUpdate=!1;let s=this.renderToScreen?null:e;this.camera.layers.set(3),t.setRenderTarget(s),t.render(this.splineScene,this.camera),this.camera.layers.mask=i}},YJ=new zm,Uft=new di({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),m4=class extends ho{constructor(t,e,n){super("OpaquePass",e??YJ,n),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=t}setCamera(t){this.camera=t}setScene(t){this.scene=t??YJ}getScene(){return this.scene}render(t,e){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Ho&&(this.originalMaterials.set(i.id,i.material),i.material=Uft)}),t.shadowMap.needsUpdate=!0,t.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let n=this.renderToScreen?null:e;t.setRenderTarget(n),this.clearColorOnly&&t.clear(!0,!1,!0),this.clear&&t.clear(),t.render(this.scene,this.camera),this.clearDepth&&t.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,r)=>{let s=this.scene.getObjectById(r);s&&(s.material=i)})}},Vft=class{constructor(t,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r=0}={}){this.renderer=t,this.helperStartIndex=0,this.copyPass=new f4,this.depthTexture=null,this.timer=new ift,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(e,n,r,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(e,n,r,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(e,n,r,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){let e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){var e;if(this.renderer=t,t!==null){let n=t.getSize(new Se),i=((e=t.getContext().getContextAttributes())==null?void 0:e.alpha)??!1,r=this.inputBuffer.texture[0].type;r===Vs&&t.outputEncoding===Zt&&(this.inputBuffer.texture[0].encoding=Zt,this.outputBuffer.texture[0].encoding=Zt,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),t.autoClear=!1,this.setSize(n.width,n.height,!1);for(let s of this.passes)s.initialize(t,i,r)}}replaceRenderer(t,e=!0){let n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(t),e&&i!==null&&(i.removeChild(n.domElement),i.appendChild(t.domElement)),n}createDepthTexture(){let t=this.depthTexture=new Vy(this._width,this._height);return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=sg,t.type=km):t.type=rf,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,i,r,s){let o=this.renderer,a=o===null?new Se:o.getDrawingBufferSize(new Se),l={minFilter:an,magFilter:an,wrapS:sr,wrapT:sr,stencilBuffer:e,depthBuffer:t},c;return i>0?(c=new jn(a.width,a.height,l),c.samples=i):(r?(c=new R8e(a.width,a.height,2,l),c.texture[1].type=Fy):c=new jn(a.width,a.height,l),c.depthTexture=new Vy(2048,2048),c.depthTexture.type=sl),n===Vs&&o!==null&&o.outputEncoding===Zt&&(Array.isArray(c.texture)?c.texture.forEach(d=>d.encoding=Zt):c.texture.encoding=Zt),Array.isArray(c.texture)?c.texture.forEach((d,u)=>{d.name=`EffectComposer.Buffer ${r} ${u}`,d.generateMipmaps=!1}):(c.texture.name=`EffectComposer.Buffer ${r}`,c.texture.generateMipmaps=!1),c.name=s,c}addPass(t,e){var a;let n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Se),s=((a=i.getContext().getContextAttributes())==null?void 0:a.alpha)??!1,o;if(t.MRTCompatible&&(o=this.inputBuffer.texture[0].type),t.MRTCompatible||(o=this.inputBuffer.texture.type),t.setRenderer(i),t.setSize(r.width,r.height),t.initialize(i,s,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(t of n)t.setDepthTexture(l)}else t.setDepthTexture(this.depthTexture)}setHelperStartIndex(t){this.helperStartIndex=t}removePass(t){let e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){let i=(r,s)=>r||s.needsDepthTexture;e.reduce(i,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){let t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){let e=this.renderer,n=this.copyPass,i=this.inputBuffer,r=this.outputBuffer,s=this.inputBufferSingle,o=this.outputBufferSingle,a=!1,l,c,d,u;t===void 0&&(t=this.timer.update().getDelta());for(let h of this.passes)h.enabled&&(h.MRTCompatible?h.render(e,i,r,t,a):h.render(e,s,o,t,a),h.needsSwap&&(a&&(n.renderToScreen=h.renderToScreen,l=e.getContext(),c=e.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),n.render(e,i,r,t,a),c.setFunc(l.EQUAL,1,4294967295)),d=i,u=s,i=r,s=o,r=d,o=u),h instanceof tft?a=!0:h instanceof Dht&&(a=!1))}setSize(t,e,n){let i=this.renderer;if(this._width=t,this._height=e,t===void 0||e===void 0){let s=i.getSize(new Se);t=s.width,e=s.height}i.setSize(t,e,n);let r=i.getDrawingBufferSize(new Se);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height),this.inputBufferSingle.setSize(r.width,r.height),this.outputBufferSingle.setSize(r.width,r.height);for(let s of this.passes)s.setSize(r.width,r.height)}reset(){let t=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(t)}dispose(){for(let t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Hft=new di({name:"CombineMaterial",uniforms:{inputBufferA:new Je(null),inputBufferB:new Je(null)},blending:wr,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),jft=class extends ho{constructor(t){super("HelperPass",void 0,t),this.MRTCompatible=!1,this.fullscreenMaterial=Hft,this.helperPass=new m4(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new m4(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let e=new Lfe({preset:lm.LOW,edgeDetectionMode:RR.COLOR});this.effectPass=new Q2(this.camera,e),this.rt=new jn(10,10,{minFilter:an,magFilter:an,wrapS:sr,wrapT:sr,depthBuffer:!0})}setSize(t,e){this.rt.setSize(t,e),this.effectPass.setSize(t,e)}set sceneHelpers(t){this.helperPass.setScene(t)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(t){this.helperPassOnTop.setScene(t)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(t){this.helperPass.setCamera(t),this.helperPassOnTop.setCamera(t)}initialize(t,e,n){super.initialize(t,e,n),this.effectPass.initialize(t,e,n)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(t,e,n){this.rt.depthTexture=e.depthTexture;let i=t.getClearAlpha();t.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(t,this.rt),this.helperPassOnTop.render(t,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(t,this.rt,n),this.fullscreenMaterial.uniforms.inputBufferA.value=n.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=e.texture,t.setClearAlpha(i),t.setRenderTarget(null),t.clear(),t.render(this.scene,this.camera)}},Gft=`#define GLSLIFY 1
out vec3 n;void main(){vec4 view_space=viewMatrix*modelMatrix*vec4(position,1.0);gl_Position=projectionMatrix*view_space;n=mat3(viewMatrix*modelMatrix)*normal;n=normalize(n);}`,Wft=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,qft=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,$ft=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,Xft=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,Yft=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,yb=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],Kft=new di({vertexShader:Gft,fragmentShader:Wft}),sT=new di({vertexShader:Xft,fragmentShader:Yft,uniforms:{texture_ao_lrez:new Je(null),texture_depth_lrez:new Je(null),texture_depth_hrez:new Je(null),near:new Je(null),far:new Je(null)}}),Zft=class extends ho{constructor(t,e){super("AmbientOcclusionPass",void 0,e),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let n=1024,i=1024;this.gBuffer=new jn(n,i,{type:sl,depthTexture:new Vy(n,i),minFilter:an,magFilter:an}),this.depthBufferHighRes=new jn(n,i,{depthTexture:new Vy(n,i)}),this.aoBuffer=new jn(n,i,{minFilter:an,magFilter:an}),this.splineScene=t,this.splineCamera=e;let r=new Float32Array(yb.length*2);for(let o=0;o<yb.length;o++){let a=o*2;r[a+0]=yb[o][0],r[a+1]=yb[o][1]}this.blueNoiseInDiskTexture=new Jz(r,yb.length,1,_ce,sl),this.blueNoiseInDiskTexture.wrapS=fd,this.blueNoiseInDiskTexture.wrapT=fd,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new di({vertexShader:qft,fragmentShader:$ft,uniforms:{near:new Je(null),far:new Je(null),fov:new Je(null),proj_info:new Je(new sn),is_ortho:new Je(!1),resolution:new Je(new Se),radius_of_influence:new Je(8),radius_in_screen_space:new Je(1),exponent:new Je(1),ao_color:new Je(new q),bias:new Je(.5),texture_depth:new Je(null),texture_normals:new Je(null),texture_blue_noise:new Je(null),texture_blue_noise_in_disk:new Je(this.blueNoiseInDiskTexture),frame_index:new Je(0),fog_enabled:new Je(!1),fog_near:new Je(1),fog_far:new Je(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new jn(n,i,{minFilter:an,magFilter:an,wrapS:sr,wrapT:sr,depthBuffer:!1,type:sl});let s=new Lfe({preset:lm.ULTRA,edgeDetectionMode:RR.COLOR});this.effectPass=new Q2(this.camera,s)}initialize(t,e,n){super.initialize(t,e,n),this.effectPass.initialize(t,e,n)}setBlueNoiseTexture(t){this.hbaoMaterial.uniforms.texture_blue_noise.value=t}setSize(t,e){this._width=t,this._height=e,this.depthBufferHighRes.setSize(t,e);let n=this._runHalfRes?.5:1,i=t*n,r=e*n;this.gBuffer.setSize(i,r),this.aoBuffer.setSize(i,r),this.hbaoMaterial.uniforms.resolution.value.set(i,r),this.aaBuffer.setSize(i,r),this.effectPass.setSize(i,r)}get runHalfRes(){return this._runHalfRes}set runHalfRes(t){this._runHalfRes=t,this.setSize(this._width,this._height)}setCamera(t){this.splineCamera=t}setScene(t){this.splineScene=t}render(t,e,n){this.splineScene.overrideMaterial=Kft;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),t.setRenderTarget(this.gBuffer),t.clear(),t.render(this.splineScene,this.splineCamera),t.setRenderTarget(this.depthBufferHighRes),t.clear(),t.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let r=this.splineCamera.perspCamera.projectionMatrix.elements,s=2/r[0],o=2/r[5],a=-(1-r[8])/r[0],l=-(1+r[9])/r[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,o,a,l);let c=this.splineCamera.perspCamera.fov*(Math.PI/180),d=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(c*.5)*2),u=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*d;this.hbaoMaterial.uniforms.radius_in_screen_space.value=u,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let r=this.splineCamera.orthoCamera.projectionMatrix.elements,s=2/r[0],o=2/r[5],a=-(1+r[12])/r[0],l=-(1-r[13])/r[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,o,a,l);let c=.5*(this.hbaoMaterial.uniforms.resolution.value.y/o),d=this.hbaoMaterial.uniforms.radius_of_influence.value*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=d,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,t.setRenderTarget(this.aoBuffer),t.clear(),t.render(this.scene,this.camera),this.fullscreenMaterial=sT,sT.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,sT.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,sT.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,t.setRenderTarget(t.aoRenderTarget),t.clear(),t.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,t.setRenderTarget(this.aaBuffer),t.clear(),t.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(t,this.aaBuffer,t.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},Qft=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Jft=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,ept=class extends id{constructor(){super(new di({vertexShader:Qft,fragmentShader:Jft,uniforms:{tInput:new Je(null),tMap:new Je(null),uResolution:new Je(new Se),uSize:new Je(new Se),uCoords:new Je(new Se),uScale:new Je(1),uSceneColor:new Je(new Lt(16711680)),uDPR:new Je(1),uCurrent:new Je(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(t){this.uniforms.tMap.value=t}};function KJ(t,e){return e&&e.enabled&&t.push(e.effect),t}var tpt=t=>Object.values(_n).includes(t)?t:_n.NORMAL,npt=class extends uo{constructor(t){super(),this.postprocessingState=k_.defaultData,this._scene=new zm,this._camera=new so,this.effects=new Map,this.blueNoiseTexture=new Jz,this._renderToScreen=!0,this.clock=new fYe,this.renderer=t,this.debug=!1,this.effects.set("bloom",new Mft),this.effects.set("chromaticAberration",new Tft),this.effects.set("vignette",new Rft),this.effects.set("noise",new Dft),this.effects.set("colorAverage",new Cft),this.effects.set("hueSaturation",new Pft),this.effects.set("brightnessContrast",new Aft),this.effects.set("depthOfField",new Oft),this.effects.set("pixelation",new Lft),this.effectComposer=new Vft(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new m4(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new Fft(this.scene,this.camera,this.renderer),this.aoPass=new Zft(this.scene,this.camera),this.taaPass=new zft,this.taaPass.renderToScreen=!1,this.helperPass=new jft(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new ept,this.overlayPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(t){t!==void 0?(this.overlayPass.texture=t,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(t){this.helperPass.sceneHelpers=t}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(t){this.helperPass.sceneHelpersOnTop=t}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(t){this._scene=t,this.opaquePass.setScene(t),this.transmissionPass.setScene(t),this.aoPass.setScene(t)}get camera(){return this._camera}set camera(t){this._camera=t,this.opaquePass.setCamera(t),this.transmissionPass.setCamera(t),this.aoPass.setCamera(t),this.helperPass.setCamera(t)}updateRenderToScreen(){let t=!1;for(let e=this.effectComposer.passes.length-1;e>=0;e--){let n=this.effectComposer.passes[e];if(n.enabled===!0&&!t&&this._renderToScreen){n.renderToScreen=!0,t=!0;continue}n.renderToScreen=!1}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(t){this.blueNoiseTexture=new Jz(t,128,128),this.blueNoiseTexture.wrapS=fd,this.blueNoiseTexture.wrapT=fd,this.blueNoiseTexture.minFilter=Jn,this.blueNoiseTexture.magFilter=Jn,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(t,e,n,i,r,s,o,a){this.aoPass.enabled=t,this.aoPass.radius=e,this.aoPass.bias=n,this.aoPass.aoColor=i,this.aoPass.fogEnabled=r,this.aoPass.fogNear=s,this.aoPass.fogFar=o,this.aoPass.runHalfRes!==!a&&(this.aoPass.runHalfRes=!a)}setTransmissionPassEnabled(t){this.transmissionPass.enabled=t,this.opaquePass.hasTransmissionPass=t}_initPasses(){var t,e;if((t=this.uvEffectPass)==null||t.dispose(),(e=this.effectPass)==null||e.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let n=[this.effects.get("pixelation")].reduce(KJ,[]);n.length>0&&(this.uvEffectPass=new Q2(this.camera,...n),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(KJ,[]);i.length>0&&(this.effectPass=new Q2(this.camera,...i),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let t=new Se;this.renderer.getDrawingBufferSize(t),this._rt=new jn(t.x,t.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:fd,wrapT:fd}),this._rt.samples=0,this._savePass=new f4(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(t){this._rt=t,this._savePass=new f4(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(t){if(this._renderToScreen===t)return;let e=this.effectComposer;!e||(t===!0?e.removePass(this._savePass):e.addPass(this._savePass),this._renderToScreen=t,this.updateRenderToScreen())}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(t){let{enabled:e,...n}=t,i=!1;e!==this.postprocessingState.enabled&&(i=!0);for(let r of Object.entries(n)){let s=r[1],o=this.effects.get(r[0]);if(o){o.enabled!==s.enabled&&(i=!0),o.enabled=s.enabled;for(let[a,l]of Object.entries(s))a==="blendFunction"?o.blendFunction=tpt(l):o[a]=l}}this.postprocessingState=t,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(t,e,n,i){t instanceof sn?(this.effectComposer.inputBuffer.scissor.set(t.x,t.y,t.z,t.w),this.effectComposer.outputBuffer.scissor.set(t.x,t.y,t.z,t.w)):(this.effectComposer.inputBuffer.scissor.set(t,e,n,i),this.effectComposer.outputBuffer.scissor.set(t,e,n,i));let r=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(r),this.effectComposer.outputBuffer.scissor.multiplyScalar(r),this.renderer.setScissor(t,e,n,i)}setScissorTest(t){this.effectComposer.inputBuffer.scissorTest=t,this.effectComposer.outputBuffer.scissorTest=t,this.renderer.setScissorTest(t)}setViewport(t,e,n,i){t instanceof sn?(this.effectComposer.inputBuffer.viewport.copy(t),this.effectComposer.outputBuffer.viewport.copy(t)):(this.effectComposer.inputBuffer.viewport.set(t,e,n,i),this.effectComposer.outputBuffer.viewport.set(t,e,n,i))}resize(t,e,n){if(this.effectComposer.setSize(t,e,n),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(t*i,e*i)}}dispose(){var t,e;(t=this.uvEffectPass)==null||t.dispose(),(e=this.effectPass)==null||e.dispose(),this.effectComposer.dispose()}},ZJ=new kr,ipt=class extends Bce{constructor(t){super(t),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Se,this.pipeline=new npt(this),this.isXRCopyPassSet=!1,this.clear=(r=!0,s=!0,o=!0)=>{let a=this.getContext(),l=0;r&&(l|=a.COLOR_BUFFER_BIT),s&&(l|=a.DEPTH_BUFFER_BIT),o&&(l|=a.STENCIL_BUFFER_BIT),a.clear(l),a.clearBufferfv(a.COLOR,1,[0,0,0,1])},this.overrideTransmission=t==null?void 0:t.overrideTransmission,this.autoClear=!1;let e=this.setPixelRatio.bind(this),n=this.setSize.bind(this),i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(r){console.warn(r)}this.setPixelRatio=r=>{this._pixelRatio=r,e(r)},this.setSize=(r,s,o=!0)=>{var a,l;(this.viewportWidth!==r||this.viewportHeight!==s)&&(this.viewportWidth=r,this.viewportHeight=s,n(r,s,o),(a=this.normalRenderTarget)==null||a.setSize(r*this._pixelRatio,s*this._pixelRatio),this._resizeTransmission(r,s),(l=this.transmissionDepthTarget)==null||l.setSize(r*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(r,s,o))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new jn(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:an,magFilter:an,wrapS:sr,wrapT:sr,depthBuffer:!1}))}_resizeTransmission(t,e){var n,i;(n=this.transmissionRenderTarget)==null||n.setSize(t*this._pixelRatio/(this.hdTransmission?1:2),e*this._pixelRatio/(this.hdTransmission?1:2)),(i=this.aoRenderTarget)==null||i.setSize(t*this._pixelRatio/1,e*this._pixelRatio/1)}get hdTransmission(){return Ot.transmissionLod.value===1}set hdTransmission(t){Ot.transmissionLod.value=t===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new jn(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:zy,magFilter:an,wrapS:sr,wrapT:sr,depthBuffer:!1}),this.transmissionDepthTarget=new jn(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Jn,magFilter:Jn,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new jn(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Jn,magFilter:Jn,type:sl,depthTexture:new Vy(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(t,e){this.normalRenderTarget&&(this.setClearColor(0),e.layers.enable(8),e.layers.disable(0),e.layers.disable(3),t.traverseEntity(n=>{n.layers.isEnabled(8)&&(n.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),e instanceof so?Ak.uniforms.depthContrast.value=(e.far-e.near)/1e4:Ak.uniforms.depthContrast.value=1,t.overrideMaterial=Ak,this.render(t,e),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=t.wireframeState?e4:null,e.layers.enable(0),e.layers.enable(3),t.traverseEntity(n=>{n.layers.isEnabled(8)&&(n.copyPreviousMatrix=!0)}))}renderSplineScene(t,e,n,i,r){this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(e)),this.setClearColor(t.bgColor,t.bgColor.a),n.penumbraSize.forEach((o,a)=>{Ot.penumbraSize.value[a]=o}),Ot.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Ot.resolution.value.set(this.resolution.x,this.resolution.y):Ot.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),this.overrideNormal!==void 0?(Ot.normalRenderTarget.value=this.overrideNormal,Ot.normalRenderTargetDepth.value=ZJ):t.needsNormal()&&(this.createNormalRenderTarget(),Ot.normalRenderTarget.value=this.normalRenderTarget.texture,Ot.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(t,e)),t.occlusion&&(this.createAORenderTarget(),Ot.aoRenderTarget.value=this.aoRenderTarget.texture),Ot.aoEnabled.value=t.occlusion,this.pipeline.setAmbientOcclusionParams(t.occlusion,t.radius,t.bias,t.aoColor,t.enableFog,t.backupFog.near,t.backupFog.far,t.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let s=!1;if(this.overrideTransmission!==void 0)Ot.transmissionRenderTarget.value=this.overrideTransmission,Ot.transmissionRenderTargetDepth.value=ZJ,this.pipeline.setTransmissionPassEnabled(!1);else{let o=t.needsTransmission();o&&(this.transmissionRenderTarget===void 0&&(s=!0),this.createTransmissionRenderTarget(),Ot.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ot.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(o)}e.layers.enable(3),e.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=t,this.pipeline.camera=e,s&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==t.postprocessing&&(this.pipeline.updatePostprocessing(t.postprocessing),!i&&!r&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),t.overrideMaterial=t.wireframeState?e4:null,this.pipeline.render(),Ot.frameIndex.value=(Ot.frameIndex.value+1)%16,e instanceof so&&e.copyHistory()}_currentDispose(){var t,e,n,i,r,s;this._superDispose(),this.pipeline.dispose(),(t=this.aoRenderTarget)==null||t.dispose(),(e=this.transmissionRenderTarget)==null||e.dispose(),(n=this.transmissionDepthTarget)==null||n.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(s=(r=this.normalRenderTarget)==null?void 0:r.depthTexture)==null||s.dispose()}},rpt=class{get sharedAssets(){return this.shared}constructor(t,e={}){this.shared=new YH(t.shared,e),this.scene=new dl(t.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(t,e){this.scene.clearScene(),this.sharedAssets.reset(t.shared),this.scene.resetAfterClear(t.scene,this.sharedAssets)}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(t=>{t instanceof yl&&t.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},spt=class{constructor({x:t=10,y:e=10}){this._startTime=0;let n=document.getElementById("spe-perfs");n?this.element=n:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${t}px`,this.element.style.top=`${e}px`}dispose(){var t;(t=this.element.parentElement)==null||t.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let t=performance.now()-this._startTime;this.element.innerHTML=t.toFixed(3)+" ms"}};function opt(t){let e;if(t.index)for(let n=0;n<t.index.array.length;n+=3)e=t.index.array[n],t.index.array[n]=t.index.array[n+2],t.index.array[n+2]=e}function Sw(t){return t instanceof U_?"SubdivObject":t.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function apt(t,e){let n={};return t.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof Ho)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let r=i.parent;for(;r;){if(r instanceof Ho&&i.states&&Object.keys(i.states).length)return;r=r.parent}let s=i.material.uuid,o=e.shared.materials[s];if(o){if(!va.isMergable(o))return}else{let c=(l=e.scene.objects.get(i.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!va.isMergable(c.material))return;s=va.getHash(c.material)}}n[s]||(n[s]={});let a=n[s][Sw(i)];if(a){if(a.push(i),i.cloner)for(let c of i.cloner.children)a.push(c)}else if(n[s][Sw(i)]=[i],i.cloner)for(let c of i.cloner.children)n[s][Sw(i)].push(c)}),n}function lpt(t){let e=0;return Object.values(t).forEach(n=>{Object.values(n).forEach(i=>{let r=i.length;r>e&&(e=r)})}),e}function cpt(t,e){let n=apt(e,t),i=lpt(n),r=new Array(i),s=0,o=new Array(i),a=0,l=new Array(i),c=0,d=new Array(i),u=0;for(let[h,f]of Object.entries(n))for(let p of Object.values(f)){if(a=0,c=0,p.forEach(g=>{g instanceof Ho&&(o[a++]=g.geometry.clone(),l[c++]=g)}),c<2)continue;for(let g=0;g<c;g++)l[g].updateWorldMatrix(!0,!1),o[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&opt(o[g]);let m=_m(o.slice(0,a),!1);if(m){let g;switch(h){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new Po(m,l[0].material);break}default:{g=new Po(m,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,e.add(g);let v=y=>{u=0;for(let x of y)x.children&&v(x.children),x instanceof Ho&&(Array.isArray(x.material)||n[x.material.uuid]&&n[x.material.uuid][Sw(x)]&&n[x.material.uuid][Sw(x)].length>1||(d[u++]=x));for(let x=0;x<u;x++)e.attach(d[x])};for(let y=0;y<c;y++){let x=l[y];v(x.children),r[s++]=x}}}for(let h=0;h<s;h++)r[h].removeFromParent()}var upt=CS(wWe(),1),dpt=new Se;function hpt(t){let e="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";t.endsWith(".spline")?console.warn(e+" The .spline files are only meant to be used by the Editor."):t.endsWith(".splinecode")||console.warn(e)}var fpt=class{constructor(t,{renderOnDemand:e,renderMode:n="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{var r,s,o,a;if(this.time=i,this.dt=this.time-this._lastTime,this._lastTime=this.time,(r=this._perfs)==null||r.start(),!this._renderer){(s=this._perfs)==null||s.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(o=this._perfs)==null||o.end();return}this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&(this._eventManager.handlers.Start.hasVideoAction||this._eventManager.handlers.Basic.hasVideoAction||this._eventManager.handlers.Conditional.hasVideoAction)&&(this._skipRender=!1),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),this._eventManager&&(this._eventManager.isEnable||this._eventManager.activate(),this._eventManager.handlers.Follow.onAnimationFrameDamping(),this._eventManager.handlers.LookAt.onAnimationFrameDamping(),this._eventManager.handlers.DragDrop.onAnimationFrameDamping()),this._scene&&this._camera&&(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.renderSplineScene(this._scene,this._camera,this._sharedAssetsManager)),this.canvas.dispatchEvent(this._renderedEvent),(a=this._perfs)==null||a.end()},this._resize=()=>{var i;!this._renderer||(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=dpt.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera&&((i=this._frameView)==null||i.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),this._requestRenderAutoMode())},this._debouncedResize=MH(this._resize,10),this.canvas=t,this.renderMode=e?"auto":n,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new spt({x:10,y:10})),qit(t)}async load(t,e){hpt(t),this.disposed=!1;let n=await(await fetch(t,e)).arrayBuffer();await this.start(n)}async start(t,{interactive:e=!0}={}){var s,o,a;if(this.disposed)return;let n=await rht(t);this._data=n,n.version&&(0,upt.default)(n.version,"0.9.373")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([WQ(n)&&iat(),blt(n)&&eat(),n.scene.environment.usePhysics&&Zit(),VQ(n)&&llt(),Ldt(n)&&Yit()].filter(Boolean)),(s=this._eventManager)==null||s.deactivate(),(o=this._controls)==null||o.deactivate(),(a=this._scene)==null||a.dispose();let i=new rpt(n);if(this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let l=performance.now();cpt(n,i.scene);let c=performance.now();console.log("Merged geometries in ",c-l," ms")}WQ(n)&&this._scene.traverse(l=>{md(l)&&l.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var l;this._requestRenderAutoMode(),(l=this._scene)==null||l.traverse(c=>{c instanceof Kl&&c.pendingMediaLoad&&c.update()})});let r=Object.keys(n.shared.fonts).map(l=>this._sharedAssetsManager.getFont(l).loadingPromise);if(Promise.all(r).then(()=>{i.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),VQ(n)&&kdt(n)&&await Promise.all(r),this._scene.rewriteEventsBeforeGoToPlayMode(),bfe(n.scene,this._scene,this._sharedAssetsManager),this._renderer||(this._renderer=new ipt({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=n.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=n.scene.environment.ambientLight.softShadows?XV:gce,oct(n.scene.environment.ambientLight.softShadowQuality)),n.scene.environment.ambientLight.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(n.scene.environment.ambientLight.blueNoiseTextureData),this._frameView)this._frameView.setCamera(this._camera);else{let l=Object.values(n.frames)[0];l.preset==="fullscreen"?(this._viewportMode=1,this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=l.size[0],this._viewportHeight=l.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new oht(this._renderer,this._camera,new Se(this._viewportWidth,this._viewportHeight),new Se(window.innerWidth,window.innerHeight))}if(e){let l=new Tct(this._renderer,this._scene,this._camera,this._sharedAssetsManager,n.scene.publish.stopRaycast,this._requestRenderAutoMode,!0);this._scene.updateMatrixWorld(!0),this._controls=new Ndt(n,l),this._eventManager=new sht(n.scene.publish,this._controls,l),this._controls.activate(this._eventManager)}this._resize(),this.dt===0&&(this.render(performance.now()),this._renderer.setAnimationLoop(this.render)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300)}findObjectById(t){var n;let e=(n=this._scene)==null?void 0:n.getObjectByProperty("uuid",t);return this._createProxyObject(e)}findObjectByName(t){var n;let e=(n=this._scene)==null?void 0:n.getObjectByName(t);return this._createProxyObject(e)}getAllObjects(){var e;let t=[];return(e=this._scene)==null||e.traverseEntity(n=>{if(n.uuid!==dl.PERSONAL_CAMERA_ID){let i=this._createProxyObject(n);i&&t.push(i)}}),t}getSplineEvents(){var t;return((t=this._eventManager)==null?void 0:t.handlers.Spline).splineEvents}emitEvent(t,e){var n;(n=this.findObjectById(e)||this.findObjectByName(e))==null||n.emitEvent(t)}emitEventReverse(t,e){var n;(n=this.findObjectById(e)||this.findObjectByName(e))==null||n.emitEventReverse(t)}addEventListener(t,e){this.canvas.addEventListener(t,e)}removeEventListener(t,e){this.canvas.removeEventListener(t,e)}setZoom(t){var e,n;((e=this._controls)==null?void 0:e.orbitControls)instanceof Pfe&&((n=this._controls)==null||n.orbitControls.zoomOut(t))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(t,e){this._viewportWidth=t,this._viewportHeight=e,this._viewportMode=2,this._resize()}setBackgroundColor(t){var o;let{r:e,g:n,b:i,a:r}={r:0,g:0,b:0,a:1},s=new zo(e,n,i,r);try{s.setStyle(t)}catch{console.error("This is not a valid css color",t)}(o=this._scene)==null||o.setBackgroundColor(s),this._requestRenderAutoMode()}dispose(){var t,e,n,i,r,s,o;this.disposed=!0,(t=this._eventManager)==null||t.deactivate(),(e=this._scene)==null||e.dispose(),(n=this._sharedAssetsManager)==null||n.dispose(),this._proxyObjectCache.forEach(a=>{xK.unsubscribe(a)}),(i=this._renderer)==null||i.setAnimationLoop(null),(r=this._renderer)==null||r.dispose(),this._renderer=void 0,(s=this._sharedAssetsManager)==null||s.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(o=this._controls)==null||o.deactivate(),$it(this.canvas)}get isStopped(){return this._isPaused}stop(){var t,e,n;this._isPaused||((t=this._renderer)==null||t.setAnimationLoop(null),this._isPaused=!0,(e=this._eventManager)==null||e.pause(),(n=this._controls)!=null&&n.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var t,e,n;!this._isPaused||(this._isPaused=!1,(t=this._eventManager)==null||t.resume(),(e=this._controls)!=null&&e.orbitControls&&(this._controls.orbitControls.enabled=!0),(n=this._renderer)==null||n.setAnimationLoop(this.render))}setGlobalEvents(t){var e;(e=this._eventManager)==null||e.updateUseWindowEvents(t)}get data(){return this._data}_createProxyObject(t){if(t==null)return;if(this._proxyObjectCache.has(t.uuid))return this._proxyObjectCache.get(t.uuid);let e={name:t.name,uuid:t.uuid,visible:t.visible,intensity:t.intensity,position:t.position,rotation:t.rotation,scale:t.scale,emitEvent(i){t.dispatchEvent({type:"userEvent",eventName:i})},emitEventReverse(i){t.dispatchEvent({type:"userEvent",eventName:i,reverse:!0})}},n=xK(e,(i,r)=>{var s;typeof t[i]!="object"&&((s=Object.getOwnPropertyDescriptor(t,i))!=null&&s.writable)&&(t[i]=r),this._requestRenderAutoMode(),t.updateMatrix()});return this._proxyObjectCache.set(t.uuid,n),n}},oT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g4={},ppt={get exports(){return g4},set exports(t){g4=t}},xb={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QJ;function mpt(){if(QJ)return xb;QJ=1;var t=ks,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var d,u={},h=null,f=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(d in l)i.call(l,d)&&!s.hasOwnProperty(d)&&(u[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)u[d]===void 0&&(u[d]=l[d]);return{$$typeof:e,type:a,key:h,ref:f,props:u,_owner:r.current}}return xb.Fragment=n,xb.jsx=o,xb.jsxs=o,xb}(function(t){t.exports=mpt()})(ppt);const v4=g4.jsx;var gpt="Expected a function",JJ=0/0,vpt="[object Symbol]",ypt=/^\s+|\s+$/g,xpt=/^[-+]0x[0-9a-f]+$/i,bpt=/^0b[01]+$/i,wpt=/^0o[0-7]+$/i,_pt=parseInt,Spt=typeof oT=="object"&&oT&&oT.Object===Object&&oT,Ept=typeof self=="object"&&self&&self.Object===Object&&self,Mpt=Spt||Ept||Function("return this")(),Apt=Object.prototype,Tpt=Apt.toString,Cpt=Math.max,Ppt=Math.min,Wk=function(){return Mpt.Date.now()};function Dpt(t,e,n){var i,r,s,o,a,l,c=0,d=!1,u=!1,h=!0;if(typeof t!="function")throw new TypeError(gpt);e=eee(e)||0,y4(n)&&(d=!!n.leading,u="maxWait"in n,s=u?Cpt(eee(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function f(E){var A=i,S=r;return i=r=void 0,c=E,o=t.apply(S,A),o}function p(E){return c=E,a=setTimeout(v,e),d?f(E):o}function m(E){var A=E-l,S=E-c,C=e-A;return u?Ppt(C,s-S):C}function g(E){var A=E-l,S=E-c;return l===void 0||A>=e||A<0||u&&S>=s}function v(){var E=Wk();if(g(E))return y(E);a=setTimeout(v,m(E))}function y(E){return a=void 0,h&&i?f(E):(i=r=void 0,o)}function x(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function b(){return a===void 0?o:y(Wk())}function w(){var E=Wk(),A=g(E);if(i=arguments,r=this,l=E,A){if(a===void 0)return p(l);if(u)return a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return w.cancel=x,w.flush=b,w}function y4(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Rpt(t){return!!t&&typeof t=="object"}function Opt(t){return typeof t=="symbol"||Rpt(t)&&Tpt.call(t)==vpt}function eee(t){if(typeof t=="number")return t;if(Opt(t))return JJ;if(y4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=y4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(ypt,"");var n=bpt.test(t);return n||wpt.test(t)?_pt(t.slice(2),n?2:8):xpt.test(t)?JJ:+t}var Lpt=Dpt;function Ipt(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}const kpt=[],Npt={width:"100%",height:"100%"},Bpt=Z.forwardRef(function({className:t,children:e,debounceTime:n=300,ignoreDimensions:i=kpt,parentSizeStyles:r,enableDebounceLeadingCall:s=!0,resizeObserverPolyfill:o,...a},l){const c=Z.useRef(null),d=Z.useRef(0),[u,h]=Z.useState({width:0,height:0,top:0,left:0}),f=Z.useMemo(()=>{const p=Array.isArray(i)?i:[i];return Lpt(m=>{h(g=>Object.keys(g).filter(v=>g[v]!==m[v]).every(v=>p.includes(v))?g:m)},n,{leading:s})},[n,s,i]);return Z.useEffect(()=>{const p=o||window.ResizeObserver,m=new p(g=>{g.forEach(v=>{const{left:y,top:x,width:b,height:w}=(v==null?void 0:v.contentRect)??{};d.current=window.requestAnimationFrame(()=>{f({width:b,height:w,top:x,left:y})})})});return c.current&&m.observe(c.current),()=>{window.cancelAnimationFrame(d.current),m.disconnect(),f.cancel()}},[f,o]),v4("div",{style:{...Npt,...r},ref:Ipt([l,c]),className:t,...a,children:e({...u,ref:c.current,resize:f})})}),zpt=Z.forwardRef(({scene:t,style:e,onMouseDown:n,onMouseUp:i,onMouseHover:r,onKeyDown:s,onKeyUp:o,onStart:a,onLookAt:l,onFollow:c,onWheel:d,onLoad:u,renderOnDemand:h=!0,...f},p)=>{const m=Z.useRef(null),[g,v]=Z.useState(!0);return Z.useEffect(()=>{v(!0);let y;const x=[{name:"mouseDown",cb:n},{name:"mouseUp",cb:i},{name:"mouseHover",cb:r},{name:"keyDown",cb:s},{name:"keyUp",cb:o},{name:"start",cb:a},{name:"lookAt",cb:l},{name:"follow",cb:c},{name:"scroll",cb:d}];if(m.current){y=new fpt(m.current,{renderOnDemand:h});async function b(){await y.load(t);for(let w of x)w.cb&&y.addEventListener(w.name,w.cb);v(!1),u==null||u(y)}b()}return()=>{for(let b of x)b.cb&&y.removeEventListener(b.name,b.cb);y.dispose()}},[t]),v4(Bpt,{ref:p,parentSizeStyles:e,debounceTime:50,...f,children:()=>v4("canvas",{ref:m,style:{display:g?"none":"block"}})})});function Fpt(){const[t,e]=Z.useState(!1),n=new Audio("../../../public/music/whitenoise.mp3");n.loop=!0,Z.useEffect(()=>()=>{n.pause()},[]);const i=wu();function r(s){s.target.name==="Schedulebutton"&&setTimeout(()=>{i("/schedule")},1e3),s.target.name==="Diarybutton"&&(console.log("diray"),setTimeout(()=>{i("/diary")},1e3)),s.target.name==="Radio"&&e(o=>(o?n.pause():n.play(),!o)),s.target.name==="Musicicon"&&e(o=>(o?n.pause():n.play(),!o)),s.target.name==="Exiticon"&&confirm("Are you sure to exit?")&&(localStorage.removeItem("token"),i("/login"))}return Te(zpt,{scene:"../../../public/models/mainroom.splinecode",onMouseDown:r})}function Upt(){const t=wu(),e=async()=>{await bS.isAuthenticated()||t("/")};return Z.useEffect(()=>{e()},[t]),Te(fg,{children:Te(Fpt,{})})}var OR,zt,Ife,Ky,cm,tee,kfe,Nfe,J2={},Bfe=[],Vpt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function df(t,e){for(var n in e)t[n]=e[n];return t}function zfe(t){var e=t.parentNode;e&&e.removeChild(t)}function Ee(t,e,n){var i,r,s,o={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?OR.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return eC(t,o,i,r,null)}function eC(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++Ife};return r==null&&zt.vnode!=null&&zt.vnode(s),s}function oo(){return{current:null}}function yi(t){return t.children}function Hpt(t,e,n,i,r){var s;for(s in n)s==="children"||s==="key"||s in e||eP(t,s,null,n[s],i);for(s in e)r&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||eP(t,s,e[s],n[s],i)}function nee(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Vpt.test(e)?n:n+"px"}function eP(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||nee(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||nee(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i||t.addEventListener(e,s?ree:iee,s):t.removeEventListener(e,s?ree:iee,s);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function iee(t){Ky=!0;try{return this.l[t.type+!1](zt.event?zt.event(t):t)}finally{Ky=!1}}function ree(t){Ky=!0;try{return this.l[t.type+!0](zt.event?zt.event(t):t)}finally{Ky=!1}}function ya(t,e){this.props=t,this.context=e}function H_(t,e){if(e==null)return t.__?H_(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?H_(t):null}function Ffe(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ffe(t)}}function jpt(t){Ky?setTimeout(t):kfe(t)}function x4(t){(!t.__d&&(t.__d=!0)&&cm.push(t)&&!tP.__r++||tee!==zt.debounceRendering)&&((tee=zt.debounceRendering)||jpt)(tP)}function tP(){var t,e,n,i,r,s,o,a;for(cm.sort(function(l,c){return l.__v.__b-c.__v.__b});t=cm.shift();)t.__d&&(e=cm.length,i=void 0,r=void 0,o=(s=(n=t).__v).__e,(a=n.__P)&&(i=[],(r=df({},s)).__v=s.__v+1,y6(a,s,r,n.__n,a.ownerSVGElement!==void 0,s.__h!=null?[o]:null,i,o??H_(s),s.__h),Gfe(i,s),s.__e!=o&&Ffe(s)),cm.length>e&&cm.sort(function(l,c){return l.__v.__b-c.__v.__b}));tP.__r=0}function Ufe(t,e,n,i,r,s,o,a,l,c){var d,u,h,f,p,m,g,v=i&&i.__k||Bfe,y=v.length;for(n.__k=[],d=0;d<e.length;d++)if((f=n.__k[d]=(f=e[d])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?eC(null,f,null,null,f):Array.isArray(f)?eC(yi,{children:f},null,null,null):f.__b>0?eC(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)!=null){if(f.__=n,f.__b=n.__b+1,(h=v[d])===null||h&&f.key==h.key&&f.type===h.type)v[d]=void 0;else for(u=0;u<y;u++){if((h=v[u])&&f.key==h.key&&f.type===h.type){v[u]=void 0;break}h=null}y6(t,f,h=h||J2,r,s,o,a,l,c),p=f.__e,(u=f.ref)&&h.ref!=u&&(g||(g=[]),h.ref&&g.push(h.ref,null,f),g.push(u,f.__c||p,f)),p!=null?(m==null&&(m=p),typeof f.type=="function"&&f.__k===h.__k?f.__d=l=Vfe(f,l,t):l=Hfe(t,f,h,v,p,l),typeof n.type=="function"&&(n.__d=l)):l&&h.__e==l&&l.parentNode!=t&&(l=H_(h))}for(n.__e=m,d=y;d--;)v[d]!=null&&(typeof n.type=="function"&&v[d].__e!=null&&v[d].__e==n.__d&&(n.__d=jfe(i).nextSibling),qfe(v[d],v[d]));if(g)for(d=0;d<g.length;d++)Wfe(g[d],g[++d],g[++d])}function Vfe(t,e,n){for(var i,r=t.__k,s=0;r&&s<r.length;s++)(i=r[s])&&(i.__=t,e=typeof i.type=="function"?Vfe(i,e,n):Hfe(n,i,i,r,i.__e,e));return e}function nP(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){nP(n,e)}):e.push(t)),e}function Hfe(t,e,n,i,r,s){var o,a,l;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(n==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(r),o=null;else{for(a=s,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==r)break e;t.insertBefore(r,s),o=s}return o!==void 0?o:r.nextSibling}function jfe(t){var e,n,i;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(i=jfe(n)))return i}return null}function y6(t,e,n,i,r,s,o,a,l){var c,d,u,h,f,p,m,g,v,y,x,b,w,E,A,S=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,a=e.__e=n.__e,e.__h=null,s=[a]),(c=zt.__b)&&c(e);try{e:if(typeof S=="function"){if(g=e.props,v=(c=S.contextType)&&i[c.__c],y=c?v?v.props.value:c.__:i,n.__c?m=(d=e.__c=n.__c).__=d.__E:("prototype"in S&&S.prototype.render?e.__c=d=new S(g,y):(e.__c=d=new ya(g,y),d.constructor=S,d.render=Wpt),v&&v.sub(d),d.props=g,d.state||(d.state={}),d.context=y,d.__n=i,u=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),S.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=df({},d.__s)),df(d.__s,S.getDerivedStateFromProps(g,d.__s))),h=d.props,f=d.state,d.__v=e,u)S.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(S.getDerivedStateFromProps==null&&g!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(g,y),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(g,d.__s,y)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(d.props=g,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(C){C&&(C.__=e)}),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(g,d.__s,y),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,f,p)})}if(d.context=y,d.props=g,d.__P=t,b=zt.__r,w=0,"prototype"in S&&S.prototype.render){for(d.state=d.__s,d.__d=!1,b&&b(e),c=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,b&&b(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++w<25);d.state=d.__s,d.getChildContext!=null&&(i=df(df({},i),d.getChildContext())),u||d.getSnapshotBeforeUpdate==null||(p=d.getSnapshotBeforeUpdate(h,f)),A=c!=null&&c.type===yi&&c.key==null?c.props.children:c,Ufe(t,Array.isArray(A)?A:[A],e,n,i,r,s,o,a,l),d.base=e.__e,e.__h=null,d.__h.length&&o.push(d),m&&(d.__E=d.__=null),d.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Gpt(n.__e,e,n,i,r,s,o,l);(c=zt.diffed)&&c(e)}catch(C){e.__v=null,(l||s!=null)&&(e.__e=a,e.__h=!!l,s[s.indexOf(a)]=null),zt.__e(C,e,n)}}function Gfe(t,e){zt.__c&&zt.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){zt.__e(i,n.__v)}})}function Gpt(t,e,n,i,r,s,o,a){var l,c,d,u=n.props,h=e.props,f=e.type,p=0;if(f==="svg"&&(r=!0),s!=null){for(;p<s.length;p++)if((l=s[p])&&"setAttribute"in l==!!f&&(f?l.localName===f:l.nodeType===3)){t=l,s[p]=null;break}}if(t==null){if(f===null)return document.createTextNode(h);t=r?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,h.is&&h),s=null,a=!1}if(f===null)u===h||a&&t.data===h||(t.data=h);else{if(s=s&&OR.call(t.childNodes),c=(u=n.props||J2).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!a){if(s!=null)for(u={},p=0;p<t.attributes.length;p++)u[t.attributes[p].name]=t.attributes[p].value;(d||c)&&(d&&(c&&d.__html==c.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(Hpt(t,h,u,r,a),d)e.__k=[];else if(p=e.props.children,Ufe(t,Array.isArray(p)?p:[p],e,n,i,r&&f!=="foreignObject",s,o,s?s[0]:n.__k&&H_(n,0),a),s!=null)for(p=s.length;p--;)s[p]!=null&&zfe(s[p]);a||("value"in h&&(p=h.value)!==void 0&&(p!==t.value||f==="progress"&&!p||f==="option"&&p!==u.value)&&eP(t,"value",p,u.value,!1),"checked"in h&&(p=h.checked)!==void 0&&p!==t.checked&&eP(t,"checked",p,u.checked,!1))}return t}function Wfe(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){zt.__e(i,n)}}function qfe(t,e,n){var i,r;if(zt.unmount&&zt.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Wfe(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){zt.__e(s,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&qfe(i[r],e,n||typeof t.type!="function");n||t.__e==null||zfe(t.__e),t.__=t.__e=t.__d=void 0}function Wpt(t,e,n){return this.constructor(t,n)}function j_(t,e,n){var i,r,s;zt.__&&zt.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,s=[],y6(e,t=(!i&&n||e).__k=Ee(yi,null,[t]),r||J2,J2,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?OR.call(e.childNodes):null,s,!i&&n?n:r?r.__e:e.firstChild,i),Gfe(s,t)}function qpt(t,e){var n={__c:e="__cC"+Nfe++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&r.some(function(a){a.__e=!0,x4(a)})},this.sub=function(o){r.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){r.splice(r.indexOf(o),1),a&&a.call(o)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}OR=Bfe.slice,zt={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(a){t=a}throw t}},Ife=0,Ky=!1,ya.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=df({},this.state),typeof t=="function"&&(t=t(df({},n),this.props)),t&&df(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),x4(this))},ya.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),x4(this))},ya.prototype.render=yi,cm=[],kfe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tP.__r=0,Nfe=0;var Wc,qk,see,$fe=[],$k=[],oee=zt.__b,aee=zt.__r,lee=zt.diffed,cee=zt.__c,uee=zt.unmount;function $pt(){for(var t;t=$fe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(tC),t.__H.__h.forEach(b4),t.__H.__h=[]}catch(e){t.__H.__h=[],zt.__e(e,t.__v)}}zt.__b=function(t){Wc=null,oee&&oee(t)},zt.__r=function(t){aee&&aee(t);var e=(Wc=t.__c).__H;e&&(qk===Wc?(e.__h=[],Wc.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=$k,n.__N=n.i=void 0})):(e.__h.forEach(tC),e.__h.forEach(b4),e.__h=[])),qk=Wc},zt.diffed=function(t){lee&&lee(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&($fe.push(e)!==1&&see===zt.requestAnimationFrame||((see=zt.requestAnimationFrame)||Xpt)($pt)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==$k&&(n.__=n.__V),n.i=void 0,n.__V=$k})),qk=Wc=null},zt.__c=function(t,e){e.some(function(n){try{n.__h.forEach(tC),n.__h=n.__h.filter(function(i){return!i.__||b4(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],zt.__e(i,n.__v)}}),cee&&cee(t,e)},zt.unmount=function(t){uee&&uee(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{tC(i)}catch(r){e=r}}),n.__H=void 0,e&&zt.__e(e,n.__v))};var dee=typeof requestAnimationFrame=="function";function Xpt(t){var e,n=function(){clearTimeout(i),dee&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);dee&&(e=requestAnimationFrame(n))}function tC(t){var e=Wc,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Wc=e}function b4(t){var e=Wc;t.__c=t.__(),Wc=e}function Ypt(t,e){for(var n in e)t[n]=e[n];return t}function hee(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function fee(t){this.props=t}(fee.prototype=new ya).isPureReactComponent=!0,fee.prototype.shouldComponentUpdate=function(t,e){return hee(this.props,t)||hee(this.state,e)};var pee=zt.__b;zt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),pee&&pee(t)};var Kpt=zt.__e;zt.__e=function(t,e,n,i){if(t.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Kpt(t,e,n,i)};var mee=zt.unmount;function Xfe(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=Ypt({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return Xfe(i,e,n)})),t}function Yfe(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return Yfe(i,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Xk(){this.__u=0,this.t=null,this.__b=null}function Kfe(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function aT(){this.u=null,this.o=null}zt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),mee&&mee(t)},(Xk.prototype=new ya).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=Kfe(i.__v),s=!1,o=function(){s||(s=!0,n.__R=null,r?r(a):a())};n.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var c=i.state.__a;i.__v.__k[0]=Yfe(c,c.__c.__P,c.__c.__O)}var d;for(i.setState({__a:i.__b=null});d=i.t.pop();)d.forceUpdate()}},l=e.__h===!0;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(o,o)},Xk.prototype.componentWillUnmount=function(){this.t=[]},Xk.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=Xfe(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&Ee(yi,null,t.fallback);return r&&(r.__h=null),[Ee(yi,null,e.__a?null:t.children),r]};var gee=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function Zpt(t){return this.getChildContext=function(){return t.context},t.children}function Qpt(t){var e=this,n=t.i;e.componentWillUnmount=function(){j_(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,r){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),j_(Ee(Zpt,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function Jpt(t,e){var n=Ee(Qpt,{__v:t,i:e});return n.containerInfo=e,n}(aT.prototype=new ya).__a=function(t){var e=this,n=Kfe(e.__v),i=e.o.get(t);return i[0]++,function(r){var s=function(){e.props.revealOrder?(i.push(r),gee(e,t,i)):r()};n?n(s):s()}},aT.prototype.render=function(t){this.u=null,this.o=new Map;var e=nP(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},aT.prototype.componentDidUpdate=aT.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){gee(t,n,e)})};var emt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,tmt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nmt=typeof document<"u",imt=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};ya.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(ya.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var vee=zt.event;function rmt(){}function smt(){return this.cancelBubble}function omt(){return this.defaultPrevented}zt.event=function(t){return vee&&(t=vee(t)),t.persist=rmt,t.isPropagationStopped=smt,t.isDefaultPrevented=omt,t.nativeEvent=t};var yee={configurable:!0,get:function(){return this.class}},xee=zt.vnode;zt.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var s in i={},n){var o=n[s];nmt&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&o==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&o===!0?o="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!imt(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():r&&tmt.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),i[s]&&(s="oninputCapture")),i[s]=o)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=nP(n.children).forEach(function(a){a.props.selected=i.value.indexOf(a.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=nP(n.children).forEach(function(a){a.props.selected=i.multiple?i.defaultValue.indexOf(a.props.value)!=-1:i.defaultValue==a.props.value})),t.props=i,n.class!=n.className&&(yee.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",yee))}t.$$typeof=emt,xee&&xee(t)};var bee=zt.__r;zt.__r=function(t){bee&&bee(t),t.__c};const Zfe=[],w4=new Map;function x6(t){Zfe.push(t),w4.forEach(e=>{Jfe(e,t)})}function amt(t){t.isConnected&&Qfe(t.getRootNode())}function Qfe(t){let e=w4.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=cmt();n&&(e.nonce=n);const i=t===document?document.head:t,r=t===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,r)}w4.set(t,e),lmt(e)}}function lmt(t){for(const e of Zfe)Jfe(t,e)}function Jfe(t,e){const{sheet:n}=t,i=n.cssRules.length;e.split("}").forEach((r,s)=>{r=r.trim(),r&&n.insertRule(r+"}",i+s)})}let Yk;function cmt(){return Yk===void 0&&(Yk=umt()),Yk}function umt(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&Qfe(document);var dmt=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';x6(dmt);function b6(t){t.parentNode&&t.parentNode.removeChild(t)}function Is(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(hmt(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function hmt(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function fmt(t,e){let n=t instanceof HTMLElement?[t]:t,i=[];for(let r=0;r<n.length;r+=1){let s=n[r].querySelectorAll(e);for(let o=0;o<s.length;o+=1)i.push(s[o])}return i}const pmt=/(top|left|right|bottom|width|height)$/i;function Ew(t,e){for(let n in e)epe(t,n,e[n])}function epe(t,e,n){n==null?t.style[e]="":typeof n=="number"&&pmt.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function tpe(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let wee=0;function LR(){return wee+=1,"fc-dom-"+wee}function IR(t){t.preventDefault()}function mmt(t,e){return n=>{let i=Is(n.target,t);i&&e.call(i,n,i)}}function npe(t,e,n,i){let r=mmt(n,i);return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}function gmt(t,e,n,i){let r;return npe(t,"mouseover",e,(s,o)=>{if(o!==r){r=o,n(s,o);let a=l=>{r=null,i(l,o),o.removeEventListener("mouseleave",a)};o.addEventListener("mouseleave",a)}})}const _ee=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function vmt(t,e){let n=i=>{e(i),_ee.forEach(r=>{t.removeEventListener(r,n)})};_ee.forEach(i=>{t.addEventListener(i,n)})}function ipe(t){return Object.assign({onClick:t},rpe(t))}function rpe(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let See=0;function Pg(){return See+=1,String(See)}function w6(){document.body.classList.add("fc-not-allowed")}function _6(){document.body.classList.remove("fc-not-allowed")}function ymt(t){t.style.userSelect="none",t.addEventListener("selectstart",IR)}function xmt(t){t.style.userSelect="",t.removeEventListener("selectstart",IR)}function bmt(t){t.addEventListener("contextmenu",IR)}function wmt(t){t.removeEventListener("contextmenu",IR)}function _mt(t){let e=[],n=[],i,r;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),i=0;i<n.length;i+=1)r=n[i],typeof r=="string"?e.push(r.charAt(0)==="-"?{field:r.substring(1),order:-1}:{field:r,order:1}):typeof r=="function"&&e.push({func:r});return e}function Smt(t,e,n){let i,r;for(i=0;i<n.length;i+=1)if(r=Emt(t,e,n[i]),r)return r;return 0}function Emt(t,e,n){return n.func?n.func(t,e):Mmt(t[n.field],e[n.field])*(n.order||1)}function Mmt(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function ly(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function Mw(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((i,r,s)=>i.replace("$"+s,r||""),t):n}function Amt(t,e){return t-e}function nC(t){return t%1===0}function Tmt(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const Eee=["years","months","days","milliseconds"],Cmt=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Sn(t,e){return typeof t=="string"?Pmt(t):typeof t=="object"&&t?Mee(t):typeof t=="number"?Mee({[e||"milliseconds"]:t}):null}function Pmt(t){let e=Cmt.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function Mee(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function Dmt(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function _4(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function Rmt(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function Omt(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function Lmt(t){return cy(t)/365}function Imt(t){return cy(t)/30}function cy(t){return Ql(t)/864e5}function Ql(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function S6(t,e){let n=null;for(let i=0;i<Eee.length;i+=1){let r=Eee[i];if(e[r]){let s=t[r]/e[r];if(!nC(s)||n!==null&&n!==s)return null;n=s}else if(t[r])return null}return n}function S4(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}const{hasOwnProperty:iP}=Object.prototype;function E6(t,e){let n={};if(e){for(let i in e)if(e[i]===em){let r=[];for(let s=t.length-1;s>=0;s-=1){let o=t[s][i];if(typeof o=="object"&&o)r.unshift(o);else if(o!==void 0){n[i]=o;break}}r.length&&(n[i]=E6(r))}}for(let i=t.length-1;i>=0;i-=1){let r=t[i];for(let s in r)s in n||(n[s]=r[s])}return n}function ug(t,e){let n={};for(let i in t)e(t[i],i)&&(n[i]=t[i]);return n}function Vd(t,e){let n={};for(let i in t)n[i]=e(t[i],i);return n}function spe(t){let e={};for(let n of t)e[n]=!0;return e}function M6(t){let e=[];for(let n in t)e.push(t[n]);return e}function xu(t,e){if(t===e)return!0;for(let n in t)if(iP.call(t,n)&&!(n in e))return!1;for(let n in e)if(iP.call(e,n)&&t[n]!==e[n])return!1;return!0}const kmt=/^on[A-Z]/;function Nmt(t,e){const n=E4(t,e);for(let i of n)if(!kmt.test(i))return!1;return!0}function E4(t,e){let n=[];for(let i in t)iP.call(t,i)&&(i in e||n.push(i));for(let i in e)iP.call(e,i)&&t[i]!==e[i]&&n.push(i);return n}function Kk(t,e,n={}){if(t===e)return!0;for(let i in e)if(!(i in t&&Bmt(t[i],e[i],n[i])))return!1;for(let i in t)if(!(i in e))return!1;return!0}function Bmt(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function zmt(t,e=0,n,i=1){let r=[];n==null&&(n=Object.keys(t).length);for(let s=e;s<n;s+=i){let o=t[s];o!==void 0&&r.push(o)}return r}function $f(t,e,n){if(t===e)return!0;let i=t.length,r;if(i!==e.length)return!1;for(r=0;r<i;r+=1)if(!(n?n(t[r],e[r]):t[r]===e[r]))return!1;return!0}const Fmt=["sun","mon","tue","wed","thu","fri","sat"];function Aee(t,e){let n=hf(t);return n[2]+=e*7,Oo(n)}function Fs(t,e){let n=hf(t);return n[2]+=e,Oo(n)}function Xf(t,e){let n=hf(t);return n[6]+=e,Oo(n)}function Umt(t,e){return Dg(t,e)/7}function Dg(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function Vmt(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function Hmt(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function jmt(t,e){return(e.valueOf()-t.valueOf())/1e3}function Gmt(t,e){let n=ui(t),i=ui(e);return{years:0,months:0,days:Math.round(Dg(n,i)),milliseconds:e.valueOf()-i.valueOf()-(t.valueOf()-n.valueOf())}}function Wmt(t,e){let n=rP(t,e);return n!==null&&n%7===0?n/7:null}function rP(t,e){return ff(t)===ff(e)?Math.round(Dg(t,e)):null}function ui(t){return Oo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function qmt(t){return Oo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function $mt(t){return Oo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function Xmt(t){return Oo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function Ymt(t,e,n){let i=t.getUTCFullYear(),r=Zk(t,i,e,n);if(r<1)return Zk(t,i-1,e,n);let s=Zk(t,i+1,e,n);return s>=1?Math.min(r,s):r}function Zk(t,e,n,i){let r=Oo([e,0,1+Kmt(e,n,i)]),s=ui(t),o=Math.round(Dg(r,s));return Math.floor(o/7)+1}function Kmt(t,e,n){let i=7+e-n;return-((7+Oo([t,0,i]).getUTCDay()-e)%7)+i-1}function Tee(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function Cee(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function hf(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function Oo(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function ope(t){return!isNaN(t.valueOf())}function ff(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function ape(t,e,n=!1){let i=t.toISOString();return i=i.replace(".000",""),n&&(i=i.replace("T00:00:00Z","")),i.length>10&&(e==null?i=i.replace("Z",""):e!==0&&(i=i.replace("Z",T6(e,!0)))),i}function A6(t){return t.toISOString().replace(/T.*$/,"")}function Zmt(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function Qmt(t){return ly(t.getUTCHours(),2)+":"+ly(t.getUTCMinutes(),2)+":"+ly(t.getUTCSeconds(),2)}function T6(t,e=!1){let n=t<0?"-":"+",i=Math.abs(t),r=Math.floor(i/60),s=Math.round(i%60);return e?`${n+ly(r,2)}:${ly(s,2)}`:`GMT${n}${r}${s?`:${ly(s,2)}`:""}`}function Ht(t,e,n){let i,r;return function(...s){if(!i)r=t.apply(this,s);else if(!$f(i,s)){n&&n(r);let o=t.apply(this,s);(!e||!e(o,r))&&(r=o)}return i=s,r}}function iC(t,e,n){let i,r;return s=>{if(!i)r=t.call(this,s);else if(!xu(i,s)){n&&n(r);let o=t.call(this,s);(!e||!e(o,r))&&(r=o)}return i=s,r}}const Pee={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},sP={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},lT=/\s*([ap])\.?m\.?/i,Jmt=/,/g,egt=/\s+/g,tgt=/\u200e/g,ngt=/UTC|GMT/;class igt{constructor(e){let n={},i={},r=0;for(let s in e)s in Pee?(i[s]=e[s],r=Math.max(Pee[s],r)):(n[s]=e[s],s in sP&&(r=Math.max(sP[s],r)));this.standardDateProps=n,this.extendedSettings=i,this.severity=r,this.buildFormattingFunc=Ht(Dee)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,i,r){let{standardDateProps:s,extendedSettings:o}=this,a=cgt(e.marker,n.marker,i.calendarSystem);if(!a)return this.format(e,i);let l=a;l>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(l=1);let c=this.format(e,i),d=this.format(n,i);if(c===d)return c;let u=ugt(s,l),h=Dee(u,o,i),f=h(e),p=h(n),m=dgt(c,f,d,p),g=o.separator||r||i.defaultSeparator||"";return m?m.before+f+g+p+m.after:c+g+d}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Dee(t,e,n){let i=Object.keys(t).length;return i===1&&t.timeZoneName==="short"?r=>T6(r.timeZoneOffset):i===0&&e.week?r=>lgt(n.computeWeekNumber(r.marker),n.weekText,n.weekTextLong,n.locale,e.week):rgt(t,e,n)}function rgt(t,e,n){t=Object.assign({},t),e=Object.assign({},e),sgt(t,e),t.timeZone="UTC";let i=new Intl.DateTimeFormat(n.locale.codes,t),r;if(e.omitZeroMinute){let s=Object.assign({},t);delete s.minute,r=new Intl.DateTimeFormat(n.locale.codes,s)}return s=>{let{marker:o}=s,a;r&&!o.getUTCMinutes()?a=r:a=i;let l=a.format(o);return ogt(l,s,t,e,n)}}function sgt(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function ogt(t,e,n,i,r){return t=t.replace(tgt,""),n.timeZoneName==="short"&&(t=agt(t,r.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":T6(e.timeZoneOffset))),i.omitCommas&&(t=t.replace(Jmt,"").trim()),i.omitZeroMinute&&(t=t.replace(":00","")),i.meridiem===!1?t=t.replace(lT,"").trim():i.meridiem==="narrow"?t=t.replace(lT,(s,o)=>o.toLocaleLowerCase()):i.meridiem==="short"?t=t.replace(lT,(s,o)=>`${o.toLocaleLowerCase()}m`):i.meridiem==="lowercase"&&(t=t.replace(lT,s=>s.toLocaleLowerCase())),t=t.replace(egt," "),t=t.trim(),t}function agt(t,e){let n=!1;return t=t.replace(ngt,()=>(n=!0,e)),n||(t+=` ${e}`),t}function lgt(t,e,n,i,r){let s=[];return r==="long"?s.push(n):(r==="short"||r==="narrow")&&s.push(e),(r==="long"||r==="short")&&s.push(" "),s.push(i.simpleNumberFormat.format(t)),i.options.direction==="rtl"&&s.reverse(),s.join("")}function cgt(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:ff(t)!==ff(e)?1:0}function ugt(t,e){let n={};for(let i in t)(!(i in sP)||sP[i]<=e)&&(n[i]=t[i]);return n}function dgt(t,e,n,i){let r=0;for(;r<t.length;){let s=t.indexOf(e,r);if(s===-1)break;let o=t.substr(0,s);r=s+e.length;let a=t.substr(r),l=0;for(;l<n.length;){let c=n.indexOf(i,l);if(c===-1)break;let d=n.substr(0,c);l=c+i.length;let u=n.substr(l);if(o===d&&a===u)return{before:o,after:a}}}return null}function Ree(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function oP(t,e,n,i){let r=Ree(t,n.calendarSystem),s=e?Ree(e,n.calendarSystem):null;return{date:r,start:r,end:s,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:i||n.defaultSeparator}}class hgt{constructor(e){this.cmdStr=e}format(e,n,i){return n.cmdFormatter(this.cmdStr,oP(e,null,n,i))}formatRange(e,n,i,r){return i.cmdFormatter(this.cmdStr,oP(e,n,i,r))}}class fgt{constructor(e){this.func=e}format(e,n,i){return this.func(oP(e,null,n,i))}formatRange(e,n,i,r){return this.func(oP(e,n,i,r))}}function Mi(t){return typeof t=="object"&&t?new igt(t):typeof t=="string"?new hgt(t):typeof t=="function"?new fgt(t):null}const Oee={navLinkDayClick:Ge,navLinkWeekClick:Ge,duration:Sn,bootstrapFontAwesome:Ge,buttonIcons:Ge,customButtons:Ge,defaultAllDayEventDuration:Sn,defaultTimedEventDuration:Sn,nextDayThreshold:Sn,scrollTime:Sn,scrollTimeReset:Boolean,slotMinTime:Sn,slotMaxTime:Sn,dayPopoverFormat:Mi,slotDuration:Sn,snapDuration:Sn,headerToolbar:Ge,footerToolbar:Ge,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Mi,dayHeaderClassNames:Ge,dayHeaderContent:Ge,dayHeaderDidMount:Ge,dayHeaderWillUnmount:Ge,dayCellClassNames:Ge,dayCellContent:Ge,dayCellDidMount:Ge,dayCellWillUnmount:Ge,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Ge,weekNumbers:Boolean,weekNumberClassNames:Ge,weekNumberContent:Ge,weekNumberDidMount:Ge,weekNumberWillUnmount:Ge,editable:Boolean,viewClassNames:Ge,viewDidMount:Ge,viewWillUnmount:Ge,nowIndicator:Boolean,nowIndicatorClassNames:Ge,nowIndicatorContent:Ge,nowIndicatorDidMount:Ge,nowIndicatorWillUnmount:Ge,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Ge,locale:Ge,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Ge,eventOrder:_mt,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Ge,contentHeight:Ge,direction:String,weekNumberFormat:Mi,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Ge,initialDate:Ge,now:Ge,eventDataTransform:Ge,stickyHeaderDates:Ge,stickyFooterScrollbar:Ge,viewHeight:Ge,defaultAllDay:Boolean,eventSourceFailure:Ge,eventSourceSuccess:Ge,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Ge,eventConstraint:Ge,eventAllow:Ge,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Ge,eventContent:Ge,eventDidMount:Ge,eventWillUnmount:Ge,selectConstraint:Ge,selectOverlap:Ge,selectAllow:Ge,droppable:Boolean,unselectCancel:String,slotLabelFormat:Ge,slotLaneClassNames:Ge,slotLaneContent:Ge,slotLaneDidMount:Ge,slotLaneWillUnmount:Ge,slotLabelClassNames:Ge,slotLabelContent:Ge,slotLabelDidMount:Ge,slotLabelWillUnmount:Ge,dayMaxEvents:Ge,dayMaxEventRows:Ge,dayMinWidth:Number,slotLabelInterval:Sn,allDayText:String,allDayClassNames:Ge,allDayContent:Ge,allDayDidMount:Ge,allDayWillUnmount:Ge,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Mi,rerenderDelay:Number,moreLinkText:Ge,moreLinkHint:Ge,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Ge,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Sn,hiddenDays:Ge,fixedWeekCount:Boolean,validRange:Ge,visibleRange:Ge,titleFormat:Ge,eventInteractive:Boolean,noEventsText:String,viewHint:Ge,navLinkHint:Ge,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Ge,moreLinkClassNames:Ge,moreLinkContent:Ge,moreLinkDidMount:Ge,moreLinkWillUnmount:Ge,monthStartFormat:Mi,handleCustomRendering:Ge,customRenderingMetaMap:Ge,customRenderingReplacesEl:Boolean},uy={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},Lee={datesSet:Ge,eventsSet:Ge,eventAdd:Ge,eventChange:Ge,eventRemove:Ge,windowResize:Ge,eventClick:Ge,eventMouseEnter:Ge,eventMouseLeave:Ge,select:Ge,unselect:Ge,loading:Ge,_unmount:Ge,_beforeprint:Ge,_afterprint:Ge,_noEventDrop:Ge,_noEventResize:Ge,_resize:Ge,_scrollRequest:Ge},Iee={buttonText:Ge,buttonHints:Ge,views:Ge,plugins:Ge,initialEvents:Ge,events:Ge,eventSources:Ge},Jp={headerToolbar:em,footerToolbar:em,buttonText:em,buttonHints:em,buttonIcons:em,dateIncrement:em,plugins:cT,events:cT,eventSources:cT,resources:cT};function em(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?xu(t,e):t===e}function cT(t,e){return Array.isArray(t)&&Array.isArray(e)?$f(t,e):t===e}const pgt={type:String,component:Ge,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Ge,usesMinMaxTime:Boolean,classNames:Ge,content:Ge,didMount:Ge,willUnmount:Ge};function Qk(t){return E6(t,Jp)}function C6(t,e){let n={},i={};for(let r in e)r in t&&(n[r]=e[r](t[r]));for(let r in t)r in e||(i[r]=t[r]);return{refined:n,extra:i}}function Ge(t){return t}function P6(t,e,n,i){return{instanceId:Pg(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:i??null}}function mgt(t,e,n,i){for(let r=0;r<i.length;r+=1){let s=i[r].parse(t,n);if(s){let{allDay:o}=t;return o==null&&(o=e,o==null&&(o=s.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:s.duration,typeData:s.typeData,typeId:r}}}return null}function dg(t,e,n){let{dateEnv:i,pluginHooks:r,options:s}=n,{defs:o,instances:a}=t;a=ug(a,l=>!o[l.defId].recurringDef);for(let l in o){let c=o[l];if(c.recurringDef){let{duration:d}=c.recurringDef;d||(d=c.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let u=ggt(c,d,e,i,r.recurringTypes);for(let h of u){let f=P6(l,{start:h,end:i.add(h,d)});a[f.instanceId]=f}}}return{defs:o,instances:a}}function ggt(t,e,n,i,r){let o=r[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:i.subtract(n.start,e),end:n.end},i);return t.allDay&&(o=o.map(ui)),o}function G_(t,e,n,i,r,s){let o=xa(),a=O6(n);for(let l of t){let c=upe(l,e,n,i,a,r,s);c&&M4(c,o)}return o}function M4(t,e=xa()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function D6(t,e){let n=t.instances[e];if(n){let i=t.defs[n.defId],r=kR(t,s=>vgt(i,s));return r.defs[i.defId]=i,r.instances[n.instanceId]=n,r}return xa()}function vgt(t,e){return Boolean(t.groupId&&t.groupId===e.groupId)}function xa(){return{defs:{},instances:{}}}function R6(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function kR(t,e){let n=ug(t.defs,e),i=ug(t.instances,r=>n[r.defId]);return{defs:n,instances:i}}function ygt(t,e){let{defs:n,instances:i}=t,r={},s={};for(let o in n)e.defs[o]||(r[o]=n[o]);for(let o in i)!e.instances[o]&&r[i[o].defId]&&(s[o]=i[o]);return{defs:r,instances:s}}function xgt(t,e){return Array.isArray(t)?G_(t,null,e,!0):typeof t=="object"&&t?G_([t],null,e,!0):t!=null?String(t):null}function kee(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const aP={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Ge,overlap:Ge,allow:Ge,className:kee,classNames:kee,color:String,backgroundColor:String,borderColor:String,textColor:String},bgt={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function lP(t,e){let n=xgt(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function lpe(t){return t.reduce(wgt,bgt)}function wgt(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const rC={id:String,groupId:String,title:String,url:String,interactive:Boolean},cpe={start:Ge,end:Ge,date:Ge,allDay:Boolean},_gt=Object.assign(Object.assign(Object.assign({},rC),cpe),{extendedProps:Ge});function upe(t,e,n,i,r=O6(n),s,o){let{refined:a,extra:l}=dpe(t,n,r),c=Egt(e,n),d=mgt(a,c,n.dateEnv,n.pluginHooks.recurringTypes);if(d){let h=A4(a,l,e?e.sourceId:"",d.allDay,Boolean(d.duration),n,s);return h.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:h,instance:null}}let u=Sgt(a,c,n,i);if(u){let h=A4(a,l,e?e.sourceId:"",u.allDay,u.hasEnd,n,s),f=P6(h.defId,u.range,u.forcedStartTzo,u.forcedEndTzo);return o&&h.publicId&&o[h.publicId]&&(f.instanceId=o[h.publicId]),{def:h,instance:f}}return null}function dpe(t,e,n=O6(e)){return C6(t,n)}function O6(t){return Object.assign(Object.assign(Object.assign({},aP),_gt),t.pluginHooks.eventRefiners)}function A4(t,e,n,i,r,s,o){let a={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(o&&t.id?o[t.id]:"")||Pg(),sourceId:n,allDay:i,hasEnd:r,interactive:t.interactive,ui:lP(t,s),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let l of s.pluginHooks.eventDefMemberAdders)Object.assign(a,l(t));return Object.freeze(a.ui.classNames),Object.freeze(a.extendedProps),a}function Sgt(t,e,n,i){let{allDay:r}=t,s,o=null,a=!1,l,c=null,d=t.start!=null?t.start:t.date;if(s=n.dateEnv.createMarkerMeta(d),s)o=s.marker;else if(!i)return null;return t.end!=null&&(l=n.dateEnv.createMarkerMeta(t.end)),r==null&&(e!=null?r=e:r=(!s||s.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),r&&o&&(o=ui(o)),l&&(c=l.marker,r&&(c=ui(c)),o&&c<=o&&(c=null)),c?a=!0:i||(a=n.options.forceEventDuration||!1,c=n.dateEnv.add(o,r?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:r,hasEnd:a,range:{start:o,end:c},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function Egt(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}const Mgt={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Agt(t,e){return G_(Tgt(t),null,e)}function Tgt(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},Mgt),n)),e}function hpe(t){let e=Math.floor(Dg(t.start,t.end))||1,n=ui(t.start),i=Fs(n,e);return{start:n,end:i}}function fpe(t,e=Sn(0)){let n=null,i=null;if(t.end){i=ui(t.end);let r=t.end.valueOf()-i.valueOf();r&&r>=Ql(e)&&(i=Fs(i,1))}return t.start&&(n=ui(t.start),i&&i<=n&&(i=Fs(n,1))),{start:n,end:i}}function k0(t,e,n,i){return i==="year"?Sn(n.diffWholeYears(t,e),"year"):i==="month"?Sn(n.diffWholeMonths(t,e),"month"):Gmt(t,e)}function Cgt(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function ppe(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function Pgt(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function Dgt(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function Rgt(t,e){return{left:t.left-e.left,top:t.top-e.top}}let Jk;function mpe(){return Jk==null&&(Jk=Ogt()),Jk}function Ogt(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}const eN=xa();class Lgt{constructor(){this.getKeysForEventDefs=Ht(this._getKeysForEventDefs),this.splitDateSelection=Ht(this._splitDateSpan),this.splitEventStore=Ht(this._splitEventStore),this.splitIndividualUi=Ht(this._splitIndividualUi),this.splitEventDrag=Ht(this._splitInteraction),this.splitEventResize=Ht(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),i=this.getKeysForEventDefs(e.eventStore),r=this.splitDateSelection(e.dateSelection),s=this.splitIndividualUi(e.eventUiBases,i),o=this.splitEventStore(e.eventStore,i),a=this.splitEventDrag(e.eventDrag),l=this.splitEventResize(e.eventResize),c={};this.eventUiBuilders=Vd(n,(d,u)=>this.eventUiBuilders[u]||Ht(Igt));for(let d in n){let u=n[d],h=o[d]||eN,f=this.eventUiBuilders[d];c[d]={businessHours:u.businessHours||e.businessHours,dateSelection:r[d]||null,eventStore:h,eventUiBases:f(e.eventUiBases[""],u.ui,s[d]),eventSelection:h.instances[e.eventSelection]?e.eventSelection:"",eventDrag:a[d]||null,eventResize:l[d]||null}}return c}_splitDateSpan(e){let n={};if(e){let i=this.getKeysForDateSpan(e);for(let r of i)n[r]=e}return n}_getKeysForEventDefs(e){return Vd(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:i,instances:r}=e,s={};for(let o in i)for(let a of n[o])s[a]||(s[a]=xa()),s[a].defs[o]=i[o];for(let o in r){let a=r[o];for(let l of n[a.defId])s[l]&&(s[l].instances[o]=a)}return s}_splitIndividualUi(e,n){let i={};for(let r in e)if(r)for(let s of n[r])i[s]||(i[s]={}),i[s][r]=e[r];return i}_splitInteraction(e){let n={};if(e){let i=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),r=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,r),o=a=>{n[a]||(n[a]={affectedEvents:i[a]||eN,mutatedEvents:s[a]||eN,isEvent:e.isEvent})};for(let a in i)o(a);for(let a in s)o(a)}return n}}function Igt(t,e,n){let i=[];t&&i.push(t),e&&i.push(e);let r={"":lpe(i)};return n&&Object.assign(r,n),r}function kgt(t,e){let n=null,i=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(i=e.createMarker(t.end)),!n&&!i||n&&i&&i<n?null:{start:n,end:i}}function Nee(t,e){let n=[],{start:i}=e,r,s;for(t.sort(Ngt),r=0;r<t.length;r+=1)s=t[r],s.start>i&&n.push({start:i,end:s.start}),s.end>i&&(i=s.end);return i<e.end&&n.push({start:i,end:e.end}),n}function Ngt(t,e){return t.start.valueOf()-e.start.valueOf()}function hg(t,e){let{start:n,end:i}=t,r=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(i===null?i=e.end:i=new Date(Math.min(i.valueOf(),e.end.valueOf()))),(n===null||i===null||n<i)&&(r={start:n,end:i}),r}function Bgt(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function L6(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function NR(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Ad(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function zgt(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function gpe(t,e,n,i){return{dow:t.getUTCDay(),isDisabled:Boolean(i&&!Ad(i.activeRange,t)),isOther:Boolean(i&&!Ad(i.currentRange,t)),isToday:Boolean(e&&Ad(e,t)),isPast:Boolean(n?t<n:e?t<e.start:!1),isFuture:Boolean(n?t>n:e?t>=e.end:!1)}}function I6(t,e){let n=["fc-day",`fc-day-${Fmt[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const Fgt=Mi({year:"numeric",month:"long",day:"numeric"}),Ugt=Mi({week:"long"});function cP(t,e,n="day",i=!0){const{dateEnv:r,options:s,calendarApi:o}=t;let a=r.format(e,n==="week"?Ugt:Fgt);if(s.navLinks){let l=r.toDate(e);const c=d=>{let u=n==="day"?s.navLinkDayClick:n==="week"?s.navLinkWeekClick:null;typeof u=="function"?u.call(o,r.toDate(e),d):(typeof u=="string"&&(n=u),o.zoomTo(e,n))};return Object.assign({title:Mw(s.navLinkHint,[a,l],a),"data-navlink":""},i?ipe(c):{onClick:c})}return{"aria-label":a}}let tN=null;function Vgt(){return tN===null&&(tN=Hgt()),tN}function Hgt(){let t=document.createElement("div");Ew(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return b6(t),n}let nN;function jgt(){return nN||(nN=Ggt()),nN}function Ggt(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=vpe(t);return document.body.removeChild(t),e}function vpe(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function Wgt(t,e=!1){let n=window.getComputedStyle(t),i=parseInt(n.borderLeftWidth,10)||0,r=parseInt(n.borderRightWidth,10)||0,s=parseInt(n.borderTopWidth,10)||0,o=parseInt(n.borderBottomWidth,10)||0,a=vpe(t),l=a.y-i-r,c=a.x-s-o,d={borderLeft:i,borderRight:r,borderTop:s,borderBottom:o,scrollbarBottom:c,scrollbarLeft:0,scrollbarRight:0};return Vgt()&&n.direction==="rtl"?d.scrollbarLeft=l:d.scrollbarRight=l,e&&(d.paddingLeft=parseInt(n.paddingLeft,10)||0,d.paddingRight=parseInt(n.paddingRight,10)||0,d.paddingTop=parseInt(n.paddingTop,10)||0,d.paddingBottom=parseInt(n.paddingBottom,10)||0),d}function qgt(t,e=!1,n){let i=n?t.getBoundingClientRect():k6(t),r=Wgt(t,e),s={left:i.left+r.borderLeft+r.scrollbarLeft,right:i.right-r.borderRight-r.scrollbarRight,top:i.top+r.borderTop,bottom:i.bottom-r.borderBottom-r.scrollbarBottom};return e&&(s.left+=r.paddingLeft,s.right-=r.paddingRight,s.top+=r.paddingTop,s.bottom-=r.paddingBottom),s}function k6(t){let e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset}}function $gt(t){let e=ype(t),n=t.getBoundingClientRect();for(let i of e){let r=ppe(n,i.getBoundingClientRect());if(r)n=r;else return null}return n}function ype(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}function Xgt(t,e,n){let i=!1,r=function(a){i||(i=!0,e(a))},s=function(a){i||(i=!0,n(a))},o=t(r,s);o&&typeof o.then=="function"&&o.then(r,s)}class BR{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){Ygt(this.handlers,e,n)}off(e,n){Kgt(this.handlers,e,n)}trigger(e,...n){let i=this.handlers[e]||[],r=this.options&&this.options[e],s=[].concat(r||[],i);for(let o of s)o.apply(this.thisContext,n)}hasHandlers(e){return Boolean(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function Ygt(t,e,n){(t[e]||(t[e]=[])).push(n)}function Kgt(t,e,n){n?t[e]&&(t[e]=t[e].filter(i=>i!==n)):delete t[e]}class Zy{constructor(e,n,i,r){this.els=n;let s=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(s.left),r&&this.buildElVerticals(s.top)}buildElHorizontals(e){let n=[],i=[];for(let r of this.els){let s=r.getBoundingClientRect();n.push(s.left-e),i.push(s.right-e)}this.lefts=n,this.rights=i}buildElVerticals(e){let n=[],i=[];for(let r of this.els){let s=r.getBoundingClientRect();n.push(s.top-e),i.push(s.bottom-e)}this.tops=n,this.bottoms=i}leftToIndex(e){let{lefts:n,rights:i}=this,r=n.length,s;for(s=0;s<r;s+=1)if(e>=n[s]&&e<i[s])return s}topToIndex(e){let{tops:n,bottoms:i}=this,r=n.length,s;for(s=0;s<r;s+=1)if(e>=n[s]&&e<i[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return uT(this.tops||[],e.tops||[])&&uT(this.bottoms||[],e.bottoms||[])&&uT(this.lefts||[],e.lefts||[])&&uT(this.rights||[],e.rights||[])}}function uT(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(Math.round(t[i])!==Math.round(e[i]))return!1;return!0}class N6{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class Zgt extends N6{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Qgt extends N6{getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}setScrollTop(e){window.scroll(window.pageXOffset,e)}setScrollLeft(e){window.scroll(e,window.pageYOffset)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class US{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,i;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(i in e)n[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let i;return n&&this.rtlIconClasses?i=this.rtlIconClasses[e]||this.iconClasses[e]:i=this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}US.prototype.classes={};US.prototype.iconClasses={};US.prototype.baseIconClass="";US.prototype.iconOverridePrefix="";function Bee(t){t();let e=zt.debounceRendering,n=[];function i(r){n.push(r)}for(zt.debounceRendering=i,j_(Ee(Jgt,{}),document.createElement("div"));n.length;)n.shift()();zt.debounceRendering=e}class Jgt extends ya{render(){return Ee("div",{})}componentDidMount(){this.setState({})}}function xpe(t){let e=qpt(t),n=e.Provider;return e.Provider=function(){let i=!this.getChildContext,r=n.apply(this,arguments);if(i){let s=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&s.forEach(a=>{a.context=o.value,a.forceUpdate()})},this.sub=o=>{s.push(o);let a=o.componentWillUnmount;o.componentWillUnmount=()=>{s.splice(s.indexOf(o),1),a&&a.call(o)}}}return r},e}class evt{constructor(e,n,i,r){this.execFunc=e,this.emitter=n,this.scrollTime=i,this.scrollTimeReset=r,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const eh=xpe({});function tvt(t,e,n,i,r,s,o,a,l,c,d,u,h){return{dateEnv:r,options:n,pluginHooks:o,emitter:c,dispatch:a,getCurrentData:l,calendarApi:d,viewSpec:t,viewApi:e,dateProfileGenerator:i,theme:s,isRtl:n.direction==="rtl",addResizeHandler(f){c.on("_resize",f)},removeResizeHandler(f){c.off("_resize",f)},createScrollResponder(f){return new evt(f,c,Sn(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:u,unregisterInteractiveComponent:h}}class Rg extends ya{shouldComponentUpdate(e,n){return this.debug&&console.log(E4(e,this.props),E4(n,this.state)),!Kk(this.props,e,this.propEquality)||!Kk(this.state,n,this.stateEquality)}safeSetState(e){Kk(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Rg.addPropsEquality=nvt;Rg.addStateEquality=ivt;Rg.contextType=eh;Rg.prototype.propEquality={};Rg.prototype.stateEquality={};class zn extends Rg{}zn.contextType=eh;function nvt(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function ivt(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Hd(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class Eu extends zn{constructor(){super(...arguments),this.uid=Pg()}prepareHits(){}queryHit(e,n,i,r){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Is(e,".fc-event-mirror")}isValidDateDownEl(e){return!Is(e,".fc-event:not(.fc-bg-event)")&&!Is(e,".fc-more-link")&&!Is(e,"a[data-navlink]")&&!Is(e,".fc-popover")}}function rvt(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function svt(t,e){let n=t.initialDate;return n!=null?e.createMarker(n):VS(t.now,e)}function VS(t,e){return typeof t=="function"&&(t=t()),t==null?e.createNowMarker():e.createMarker(t)}class bpe{constructor(e){this.props=e,this.nowDate=VS(e.nowInput,e.dateEnv),this.initHiddenDays()}buildPrev(e,n,i){let{dateEnv:r}=this.props,s=r.subtract(r.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,i)}buildNext(e,n,i){let{dateEnv:r}=this.props,s=r.add(r.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,i)}build(e,n,i=!0){let{props:r}=this,s,o,a,l,c,d;return s=this.buildValidRange(),s=this.trimHiddenDays(s),i&&(e=zgt(e,s)),o=this.buildCurrentRangeInfo(e,n),a=/^(year|month|week|day)$/.test(o.unit),l=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,a),l=this.trimHiddenDays(l),c=l,r.showNonCurrentDates||(c=hg(c,o.range)),c=this.adjustActiveRange(c),c=hg(c,s),d=L6(o.range,s),Ad(l,e)||(e=l.start),{currentDate:e,validRange:s,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:a,activeRange:c,renderRange:l,slotMinTime:r.slotMinTime,slotMaxTime:r.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:i}=this,r=null,s=null,o=null,a;return i.duration?(r=i.duration,s=i.durationUnit,o=this.buildRangeFromDuration(e,n,r,s)):(a=this.props.dayCount)?(s="day",o=this.buildRangeFromDayCount(e,n,a)):(o=this.buildCustomVisibleRange(e))?s=i.dateEnv.greatestWholeUnit(o.start,o.end).unit:(r=this.getFallbackDuration(),s=S4(r).unit,o=this.buildRangeFromDuration(e,n,r,s)),{duration:r,unit:s,range:o}}getFallbackDuration(){return Sn({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:i,slotMinTime:r,slotMaxTime:s}=this.props,{start:o,end:a}=e;return i&&(cy(r)<0&&(o=ui(o),o=n.add(o,r)),cy(s)>1&&(a=ui(a),a=Fs(a,-1),a=n.add(a,s))),{start:o,end:a}}buildRangeFromDuration(e,n,i,r){let{dateEnv:s,dateAlignment:o}=this.props,a,l,c;if(!o){let{dateIncrement:u}=this.props;u&&Ql(u)<Ql(i)?o=S4(u).unit:o=r}cy(i)<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,n),a=ui(a));function d(){a=s.startOf(e,o),l=s.add(a,i),c={start:a,end:l}}return d(),this.trimHiddenDays(c)||(e=this.skipHiddenDays(e,n),d()),c}buildRangeFromDayCount(e,n,i){let{dateEnv:r,dateAlignment:s}=this.props,o=0,a=e,l;s&&(a=r.startOf(a,s)),a=ui(a),a=this.skipHiddenDays(a,n),l=a;do l=Fs(l,1),this.isHiddenDay(l)||(o+=1);while(o<i);return{start:a,end:l}}buildCustomVisibleRange(e){let{props:n}=this,i=n.visibleRangeInput,r=typeof i=="function"?i.call(n.calendarApi,n.dateEnv.toDate(e)):i,s=this.refineRange(r);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,n,i){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,i;return n||((i=this.props.dateAlignment)?Sn(1,i):e||Sn({days:1}))}refineRange(e){if(e){let n=kgt(e,this.props.dateEnv);return n&&(n=fpe(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],i=0,r;for(this.props.weekends===!1&&e.push(0,6),r=0;r<7;r+=1)(n[r]=e.indexOf(r)!==-1)||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:i}=e;return n&&(n=this.skipHiddenDays(n)),i&&(i=this.skipHiddenDays(i,-1,!0)),n==null||i==null||n<i?{start:n,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?n:0)+7)%7];)e=Fs(e,n);return e}}function wpe(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},B6(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function ovt(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function B6(t,e){let n={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(n,i(t,e));return Object.assign(n,bvt(t,e.dateEnv)),n}function zee(t,e,n){let{dateEnv:i,options:r}=n,s=e;return t?(s=ui(s),s=i.add(s,r.defaultAllDayEventDuration)):s=i.add(s,r.defaultTimedEventDuration),s}function z6(t,e,n,i){let r=uP(t.defs,e),s=xa();for(let o in t.defs){let a=t.defs[o];s.defs[o]=avt(a,r[o],n,i)}for(let o in t.instances){let a=t.instances[o],l=s.defs[a.defId];s.instances[o]=lvt(a,l,r[a.defId],n,i)}return s}function avt(t,e,n,i){let r=n.standardProps||{};r.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(r.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},t),r),{ui:Object.assign(Object.assign({},t.ui),r.ui)});n.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),n.extendedProps));for(let o of i.pluginHooks.eventDefMutationAppliers)o(s,n,i);return!s.hasEnd&&i.options.forceEventDuration&&(s.hasEnd=!0),s}function lvt(t,e,n,i,r){let{dateEnv:s}=r,o=i.standardProps&&i.standardProps.allDay===!0,a=i.standardProps&&i.standardProps.hasEnd===!1,l=Object.assign({},t);return o&&(l.range=hpe(l.range)),i.datesDelta&&n.startEditable&&(l.range={start:s.add(l.range.start,i.datesDelta),end:s.add(l.range.end,i.datesDelta)}),i.startDelta&&n.durationEditable&&(l.range={start:s.add(l.range.start,i.startDelta),end:l.range.end}),i.endDelta&&n.durationEditable&&(l.range={start:l.range.start,end:s.add(l.range.end,i.endDelta)}),a&&(l.range={start:l.range.start,end:zee(e.allDay,l.range.start,r)}),e.allDay&&(l.range={start:ui(l.range.start),end:ui(l.range.end)}),l.range.end<l.range.start&&(l.range.end=zee(e.allDay,l.range.start,r)),l}class o0{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Ai{constructor(e,n,i){this._context=e,this._def=n,this._instance=i||null}setProp(e,n){if(e in cpe)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=rC[e](n),this.mutate({standardProps:{publicId:n}});else if(e in rC)n=rC[e](n),this.mutate({standardProps:{[e]:n}});else if(e in aP){let i=aP[e](n);e==="color"?i={backgroundColor:n,borderColor:n}:e==="editable"?i={startEditable:n,durationEditable:n}:i={[e]:n},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:i}=this._context,r=i.createMarker(e);if(r&&this._instance){let s=this._instance.range,o=k0(s.start,r,i,n.granularity);n.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,n={}){let{dateEnv:i}=this._context,r;if(!(e!=null&&(r=i.createMarker(e),!r))&&this._instance)if(r){let s=k0(this._instance.range.end,r,i,n.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,i={}){let{dateEnv:r}=this._context,s={allDay:i.allDay},o=r.createMarker(e),a;if(o&&!(n!=null&&(a=r.createMarker(n),!a))&&this._instance){let l=this._instance.range;i.allDay===!0&&(l=hpe(l));let c=k0(l.start,o,r,i.granularity);if(a){let d=k0(l.end,a,r,i.granularity);Dmt(c,d)?this.mutate({datesDelta:c,standardProps:s}):this.mutate({startDelta:c,endDelta:d,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:c,standardProps:s})}}moveStart(e){let n=Sn(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Sn(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Sn(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let i={allDay:e},{maintainDuration:r}=n;r==null&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=r),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:n}=this._context,i=this._instance,r=Mi(e);return this._def.hasEnd?n.formatRange(i.range.start,i.range.end,r,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):n.format(i.range.start,r,{forcedTzo:i.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let i=this._def,r=this._context,{eventStore:s}=r.getCurrentData(),o=D6(s,n.instanceId);o=z6(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,r);let l=new Ai(r,i,n);this._def=o.defs[i.defId],this._instance=o.instances[n.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:o}),r.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:jm(o,r,n),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,n=_pe(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new o0(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:i}=n,{startStr:r,endStr:s}=this,o={allDay:n.allDay};return n.title&&(o.title=n.title),r&&(o.start=r),s&&(o.end=s),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),i.display&&i.display!=="auto"&&(o.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?o.color=i.backgroundColor:(i.backgroundColor&&(o.backgroundColor=i.backgroundColor),i.borderColor&&(o.borderColor=i.borderColor)),i.textColor&&(o.textColor=i.textColor),i.classNames.length&&(o.classNames=i.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,n.extendedProps):o.extendedProps=n.extendedProps),o}toJSON(){return this.toPlainObject()}}function _pe(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function jm(t,e,n){let{defs:i,instances:r}=t,s=[],o=n?n.instanceId:"";for(let a in r){let l=r[a],c=i[l.defId];l.instanceId!==o&&s.push(new Ai(e,c,l))}return s}function Fee(t,e,n,i){let r={},s={},o={},a=[],l=[],c=uP(t.defs,e);for(let d in t.defs){let u=t.defs[d];c[u.defId].display==="inverse-background"&&(u.groupId?(r[u.groupId]=[],o[u.groupId]||(o[u.groupId]=u)):s[d]=[])}for(let d in t.instances){let u=t.instances[d],h=t.defs[u.defId],f=c[h.defId],p=u.range,m=!h.allDay&&i?fpe(p,i):p,g=hg(m,n);g&&(f.display==="inverse-background"?h.groupId?r[h.groupId].push(g):s[u.defId].push(g):f.display!=="none"&&(f.display==="background"?a:l).push({def:h,ui:f,instance:u,range:g,isStart:m.start&&m.start.valueOf()===g.start.valueOf(),isEnd:m.end&&m.end.valueOf()===g.end.valueOf()}))}for(let d in r){let u=r[d],h=Nee(u,n);for(let f of h){let p=o[d],m=c[p.defId];a.push({def:p,ui:m,instance:null,range:f,isStart:!1,isEnd:!1})}}for(let d in s){let u=s[d],h=Nee(u,n);for(let f of h)a.push({def:t.defs[d],ui:c[d],instance:null,range:f,isStart:!1,isEnd:!1})}return{bg:a,fg:l}}function cvt(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function Uee(t,e){t.fcSeg=e}function Qy(t){return t.fcSeg||t.parentNode.fcSeg||null}function uP(t,e){return Vd(t,n=>Spe(n,e))}function Spe(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),lpe(n)}function Epe(t,e){let n=t.map(uvt);return n.sort((i,r)=>Smt(i,r,e)),n.map(i=>i._seg)}function uvt(t){let{eventRange:e}=t,n=e.def,i=e.instance?e.instance.range:e.range,r=i.start?i.start.valueOf():0,s=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:r,end:s,duration:s-r,allDay:Number(n.allDay),_seg:t})}function dvt(t,e){let{pluginHooks:n}=e,i=n.isDraggableTransformers,{def:r,ui:s}=t.eventRange,o=s.startEditable;for(let a of i)o=a(o,r,s,e);return o}function hvt(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function fvt(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function Mpe(t,e,n,i,r,s,o){let{dateEnv:a,options:l}=n,{displayEventTime:c,displayEventEnd:d}=l,u=t.eventRange.def,h=t.eventRange.instance;c==null&&(c=i!==!1),d==null&&(d=r!==!1);let f=h.range.start,p=h.range.end,m=s||t.start||t.eventRange.range.start,g=o||t.end||t.eventRange.range.end,v=ui(f).valueOf()===ui(m).valueOf(),y=ui(Xf(p,-1)).valueOf()===ui(Xf(g,-1)).valueOf();return c&&!u.allDay&&(v||y)?(m=v?f:m,g=y?p:g,d&&u.hasEnd?a.formatRange(m,g,e,{forcedStartTzo:s?null:h.forcedStartTzo,forcedEndTzo:o?null:h.forcedEndTzo}):a.format(m,e,{forcedTzo:s?null:h.forcedStartTzo})):""}function Rf(t,e,n){let i=t.eventRange.range;return{isPast:i.end<(n||e.start),isFuture:i.start>=(n||e.end),isToday:e&&Ad(e,i.start)}}function pvt(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function Ape(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function Tpe(t,e){let{def:n,instance:i}=t.eventRange,{url:r}=n;if(r)return{href:r};let{emitter:s,options:o}=e,{eventInteractive:a}=o;return a==null&&(a=n.interactive,a==null&&(a=Boolean(s.hasHandlers("eventClick")))),a?rpe(l=>{s.trigger("eventClick",{el:l.target,event:new Ai(e,n,i),jsEvent:l,view:e.viewApi})}):{}}const mvt={start:Ge,end:Ge,allDay:Boolean};function gvt(t,e,n){let i=vvt(t,e),{range:r}=i;if(!r.start)return null;if(!r.end){if(n==null)return null;r.end=e.add(r.start,n)}return i}function vvt(t,e){let{refined:n,extra:i}=C6(t,mvt),r=n.start?e.createMarkerMeta(n.start):null,s=n.end?e.createMarkerMeta(n.end):null,{allDay:o}=n;return o==null&&(o=r&&r.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:r?r.marker:null,end:s?s.marker:null},allDay:o},i)}function yvt(t,e){return Bgt(t.range,e.range)&&t.allDay===e.allDay&&xvt(t,e)}function xvt(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function bvt(t,e){return Object.assign(Object.assign({},Ppe(t.range,e,t.allDay)),{allDay:t.allDay})}function Cpe(t,e,n){return Object.assign(Object.assign({},Ppe(t,e,n)),{timeZone:e.timeZone})}function Ppe(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function wvt(t,e,n){let i=dpe({editable:!1},n),r=A4(i.refined,i.extra,"",t.allDay,!0,n);return{def:r,ui:Spe(r,e),instance:P6(r.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}let Dpe={};function _vt(t,e){Dpe[t]=e}function Svt(t){return new Dpe[t]}class Evt{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Oo(e)}markerToArray(e){return hf(e)}}_vt("gregory",Evt);const Mvt=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function Avt(t){let e=Mvt.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?Number(`0.${e[12]}`)*1e3:0));if(ope(n)){let i=null;return e[13]&&(i=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}class Rpe{constructor(e){let n=this.timeZone=e.timeZone,i=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=Boolean(!i||this.namedTimeZoneImpl),this.calendarSystem=Svt(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Oo(Tee(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=Oo(e)),n===null||!ope(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=Avt(e);if(n===null)return null;let{marker:i}=n,r=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-n.timeZoneOffset*60*1e3):r=n.timeZoneOffset),{marker:i,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:r}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]+=n.years,i[1]+=n.months,i[2]+=n.days,i[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]-=n.years,i[1]-=n.months,i[2]-=n.days,i[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]+=n,this.calendarSystem.arrayToMarker(i)}addMonths(e,n){let i=this.calendarSystem.markerToArray(e);return i[1]+=n,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,n){let{calendarSystem:i}=this;return ff(e)===ff(n)&&i.getMarkerDay(e)===i.getMarkerDay(n)&&i.getMarkerMonth(e)===i.getMarkerMonth(n)?i.getMarkerYear(n)-i.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:i}=this;return ff(e)===ff(n)&&i.getMarkerDay(e)===i.getMarkerDay(n)?i.getMarkerMonth(n)-i.getMarkerMonth(e)+(i.getMarkerYear(n)-i.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let i=this.diffWholeYears(e,n);return i!==null?{unit:"year",value:i}:(i=this.diffWholeMonths(e,n),i!==null?{unit:"month",value:i}:(i=Wmt(e,n),i!==null?{unit:"week",value:i}:(i=rP(e,n),i!==null?{unit:"day",value:i}:(i=Vmt(e,n),nC(i)?{unit:"hour",value:i}:(i=Hmt(e,n),nC(i)?{unit:"minute",value:i}:(i=jmt(e,n),nC(i)?{unit:"second",value:i}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,i){let r;return i.years&&(r=this.diffWholeYears(e,n),r!==null)?r/Lmt(i):i.months&&(r=this.diffWholeMonths(e,n),r!==null)?r/Imt(i):i.days&&(r=rP(e,n),r!==null)?r/cy(i):(n.valueOf()-e.valueOf())/Ql(i)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?ui(e):n==="hour"?qmt(e):n==="minute"?$mt(e):n==="second"?Xmt(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):Ymt(e,this.weekDow,this.weekDoy)}format(e,n,i={}){return n.format({marker:e,timeZoneOffset:i.forcedTzo!=null?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,i,r={}){return r.isEndExclusive&&(n=Xf(n,-1)),i.formatRange({marker:e,timeZoneOffset:r.forcedStartTzo!=null?r.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:r.forcedEndTzo!=null?r.forcedEndTzo:this.offsetForMarker(n)},this,r.defaultSeparator)}formatIso(e,n={}){let i=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?i=n.forcedTzo:i=this.offsetForMarker(e)),ape(e,i,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Oo(Tee(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Oo(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-Cee(hf(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(hf(e)):null}toDate(e,n){return this.timeZone==="local"?Cee(hf(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(hf(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class Ope{constructor(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let i of e)this.insertEntry(i,n);return n}insertEntry(e,n){let i=this.findInsertion(e);return this.isInsertionValid(i,e)?(this.insertEntryAt(e,i),1):this.handleInvalidInsertion(i,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+n.thickness<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,i){return this.allowReslicing&&e.touchingEntry?this.splitEntry(n,e.touchingEntry,i):(i.push(n),0)}splitEntry(e,n,i){let r=0,s=[],o=e.span,a=n.span;return o.start<a.start&&(r+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:o.start,end:a.start}},s)),o.end>a.end&&(r+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.end,end:o.end}},s)),r?(i.push({index:e.index,thickness:e.thickness,span:F6(a,o)},...s),r):(i.push(e),0)}insertEntryAt(e,n){let{entriesByLevel:i,levelCoords:r}=this;n.lateral===-1?(iN(r,n.level,n.levelCoord),iN(i,n.level,[e])):iN(i[n.level],n.lateral,e),this.stackCnts[Gm(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:i,strictOrder:r,stackCnts:s}=this,o=n.length,a=0,l=-1,c=-1,d=null,u=0;for(let p=0;p<o;p+=1){let m=n[p];if(!r&&m>=a+e.thickness)break;let g=i[p],v,y=C4(g,e.span.start,T4),x=y[0]+y[1];for(;(v=g[x])&&v.span.start<e.span.end;){let b=m+v.thickness;b>a&&(a=b,d=v,l=p,c=x),b===a&&(u=Math.max(u,s[Gm(v)]+1)),x+=1}}let h=0;if(d)for(h=l+1;h<o&&n[h]<a;)h+=1;let f=-1;return h<o&&n[h]===a&&(f=C4(i[h],e.span.end,T4)[0]),{touchingLevel:l,touchingLateral:c,touchingEntry:d,stackCnt:u,levelCoord:a,level:h,lateral:f}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,i=e.length,r=[];for(let s=0;s<i;s+=1){let o=e[s],a=n[s];for(let l of o)r.push(Object.assign(Object.assign({},l),{levelCoord:a}))}return r}}function T4(t){return t.span.end}function Gm(t){return t.index+":"+t.span.start}function Tvt(t){let e=[];for(let n of t){let i=[],r={span:n.span,entries:[n]};for(let s of e)F6(s.span,r.span)?r={entries:s.entries.concat(r.entries),span:Cvt(s.span,r.span)}:i.push(s);i.push(r),e=i}return e}function Cvt(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function F6(t,e){let n=Math.max(t.start,e.start),i=Math.min(t.end,e.end);return n<i?{start:n,end:i}:null}function iN(t,e,n){t.splice(e,0,n)}function C4(t,e,n){let i=0,r=t.length;if(!r||e<n(t[i]))return[0,0];if(e>n(t[r-1]))return[r,0];for(;i<r;){let s=Math.floor(i+(r-i)/2),o=n(t[s]);if(e<o)r=s;else if(e>o)i=s+1;else return[s,1]}return[i,0]}class Ux{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function Pvt(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function U6(t){return{[t.component.uid]:t}}const P4={};class Dvt{constructor(e,n){this.emitter=new BR}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const V6={};class Rvt extends zn{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{this.setState({forPrint:!0})},this.handleAfterPrint=()=>{this.setState({forPrint:!1})}}render(){let{props:e}=this,{options:n}=e,{forPrint:i}=this.state,r=i||n.height==="auto"||n.contentHeight==="auto",s=!r&&n.height!=null?n.height:"",o=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return mpe()||o.push("fc-liquid-hack"),e.children(o,s,r,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}function Ovt(t,e){return!t||e>10?Mi({weekday:"short"}):e>1?Mi({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Mi({weekday:"long"})}const Lpe="fc-col-header-cell";function Ipe(t){return t.text}class H6 extends zn{constructor(){super(...arguments),this.id=Pg(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{this.props.elRef&&Hd(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:i}=n,{customGenerator:r,defaultGenerator:s,renderProps:o}=e,a=Npe(e);let l=!1,c,d=[],u;if(r!=null){const h=typeof r=="function"?r(o,Ee):r;if(h===!0)l=!0;else{const f=h&&typeof h=="object";f&&"html"in h?a.dangerouslySetInnerHTML={__html:h.html}:f&&"domNodes"in h?d=Array.prototype.slice.call(h.domNodes):!f&&typeof h!="function"?c=h:u=h}}else l=!kpe(e.generatorName,i);return l&&s&&(c=s(o)),this.queuedDomNodes=d,this.currentGeneratorMeta=u,Ee(e.elTag,a,c)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:i,context:r}=this,{handleCustomRendering:s,customRenderingMetaMap:o}=r.options;if(s){const a=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:o==null?void 0:o[i.generatorName];a&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.handleEl,generatorMeta:a},i),{elClasses:(i.elClasses||[]).filter(Lvt)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,i=this.base;if(!$f(e,n)){n.forEach(b6);for(let r of e)i.appendChild(r);this.currentDomNodes=e}}}H6.addPropsEquality({elClasses:$f,elStyle:xu,elAttrs:Nmt,renderProps:xu});function kpe(t,e){var n;return Boolean(e.handleCustomRendering&&t&&((n=e.customRenderingMetaMap)===null||n===void 0?void 0:n[t]))}function Npe(t,e){const n=Object.assign(Object.assign({},t.elAttrs),{ref:t.elRef});return(t.elClasses||e)&&(n.className=(t.elClasses||[]).concat(e||[]).concat(n.className||[]).filter(Boolean).join(" ")),t.elStyle&&(n.style=t.elStyle),n}function Lvt(t){return Boolean(t)}const Bpe=xpe(0);class Aa extends ya{constructor(){super(...arguments),this.InnerContent=Ivt.bind(void 0,this),this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Hd(this.props.elRef,e)}}render(){const{props:e}=this,n=kvt(e.classNameGenerator,e.renderProps);if(e.children){const i=Npe(e,n),r=e.children(this.InnerContent,e.renderProps,i);return e.elTag?Ee(e.elTag,i,r):r}else return Ee(H6,Object.assign(Object.assign({},e),{elRef:this.handleRootEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.rootEl||this.base}))}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.rootEl||this.base}))}}Aa.contextType=Bpe;function Ivt(t,e){const n=t.props;return Ee(H6,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function kvt(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Nvt extends zn{render(){let{dateEnv:e,options:n,theme:i,viewApi:r}=this.context,{props:s}=this,{date:o,dateProfile:a}=s,l=gpe(o,s.todayRange,null,a),c=[Lpe].concat(I6(l,i)),d=e.format(o,s.dayHeaderFormat),u=!l.isDisabled&&s.colCnt>1?cP(this.context,o):{},h=Object.assign(Object.assign(Object.assign({date:e.toDate(o),view:r},s.extraRenderProps),{text:d}),l);return Ee(Aa,{elTag:"th",elClasses:c,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":l.isDisabled?void 0:A6(o)},s.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:Ipe,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},f=>Ee("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&Ee(f,{elTag:"a",elAttrs:u,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const Bvt=Mi({weekday:"long"});class zvt extends zn{render(){let{props:e}=this,{dateEnv:n,theme:i,viewApi:r,options:s}=this.context,o=Fs(new Date(2592e5),e.dow),a={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=n.format(o,e.dayHeaderFormat),c=Object.assign(Object.assign(Object.assign(Object.assign({date:o},a),{view:r}),e.extraRenderProps),{text:l});return Ee(Aa,{elTag:"th",elClasses:[Lpe,...I6(a,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:c,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:Ipe,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},d=>Ee("div",{className:"fc-scrollgrid-sync-inner"},Ee(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(o,Bvt)}})))}}class HS extends ya{constructor(e,n){super(e,n),this.initialNowDate=VS(n.options.now,n.dateEnv),this.initialNowQueriedMs=new Date().valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:n}=this,i=Xf(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),r=n.dateEnv.startOf(i,e.unit),s=n.dateEnv.add(r,Sn(1,e.unit)),o=s.valueOf()-i.valueOf();return o=Math.min(1e3*60*60*24,o),{currentState:{nowDate:r,todayRange:Vee(r)},nextState:{nowDate:s,todayRange:Vee(s)},waitMs:o}}setTimeout(){let{nextState:e,waitMs:n}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},n)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}HS.contextType=eh;function Vee(t){let e=ui(t),n=Fs(e,1);return{start:e,end:n}}class zpe extends zn{constructor(){super(...arguments),this.createDayHeaderFormatter=Ht(Fvt)}render(){let{context:e}=this,{dates:n,dateProfile:i,datesRepDistinctDays:r,renderIntro:s}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,r,n.length);return Ee(HS,{unit:"day"},(a,l)=>Ee("tr",{role:"row"},s&&s("day"),n.map(c=>r?Ee(Nvt,{key:c.toISOString(),date:c,dateProfile:i,todayRange:l,colCnt:n.length,dayHeaderFormat:o}):Ee(zvt,{key:c.getUTCDay(),dow:c.getUTCDay(),dayHeaderFormat:o}))))}}function Fvt(t,e,n){return t||Ovt(e,n)}class Fpe{constructor(e,n){let i=e.start,{end:r}=e,s=[],o=[],a=-1;for(;i<r;)n.isHiddenDay(i)?s.push(a+.5):(a+=1,s.push(a),o.push(i)),i=Fs(i,1);this.dates=o,this.indices=s,this.cnt=o.length}sliceRange(e){let n=this.getDateDayIndex(e.start),i=this.getDateDayIndex(Fs(e.end,-1)),r=Math.max(0,n),s=Math.min(this.cnt-1,i);return r=Math.ceil(r),s=Math.floor(s),r<=s?{firstIndex:r,lastIndex:s,isStart:n===r,isEnd:i===s}:null}getDateDayIndex(e){let{indices:n}=this,i=Math.floor(Dg(this.dates[0],e));return i<0?n[0]-1:i>=n.length?n[n.length-1]+1:n[i]}}class Upe{constructor(e,n){let{dates:i}=e,r,s,o;if(n){for(s=i[0].getUTCDay(),r=1;r<i.length&&i[r].getUTCDay()!==s;r+=1);o=Math.ceil(i.length/r)}else o=1,r=i.length;this.rowCnt=o,this.colCnt=r,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let i=[];for(let r=0;r<this.colCnt;r+=1)i.push(this.buildCell(n,r));e.push(i)}return e}buildCell(e,n){let i=this.daySeries.dates[e*this.colCnt+n];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,i=this.daySeries.sliceRange(e),r=[];if(i){let{firstIndex:s,lastIndex:o}=i,a=s;for(;a<=o;){let l=Math.floor(a/n),c=Math.min((l+1)*n,o+1);r.push({row:l,firstCol:a%n,lastCol:(c-1)%n,isStart:i.isStart&&a===s,isEnd:i.isEnd&&c-1===o}),a=c}}return r}}class Vpe{constructor(){this.sliceBusinessHours=Ht(this._sliceBusinessHours),this.sliceDateSelection=Ht(this._sliceDateSpan),this.sliceEventStore=Ht(this._sliceEventStore),this.sliceEventDrag=Ht(this._sliceInteraction),this.sliceEventResize=Ht(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,i,r,...s){let{eventUiBases:o}=e,a=this.sliceEventStore(e.eventStore,o,n,i,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,i,o,r,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,i,r,...s),fgEventSegs:a.fg,bgEventSegs:a.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,n,i,...s),eventResize:this.sliceEventResize(e.eventResize,o,n,i,...s),eventSelection:e.eventSelection}}sliceNowDate(e,n,i,r,...s){return this._sliceDateSpan({range:{start:e,end:Xf(e,1)},allDay:!1},n,i,{},r,...s)}_sliceBusinessHours(e,n,i,r,...s){return e?this._sliceEventStore(dg(e,dT(n,Boolean(i)),r),{},n,i,...s).bg:[]}_sliceEventStore(e,n,i,r,...s){if(e){let o=Fee(e,n,dT(i,Boolean(r)),r);return{bg:this.sliceEventRanges(o.bg,s),fg:this.sliceEventRanges(o.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,i,r,...s){if(!e)return null;let o=Fee(e.mutatedEvents,n,dT(i,Boolean(r)),r);return{segs:this.sliceEventRanges(o.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,i,r,s,...o){if(!e)return[];let a=dT(n,Boolean(i)),l=hg(e.range,a);if(l){e=Object.assign(Object.assign({},e),{range:l});let c=wvt(e,r,s),d=this.sliceRange(e.range,...o);for(let u of d)u.eventRange=c;return d}return[]}sliceEventRanges(e,n){let i=[];for(let r of e)i.push(...this.sliceEventRange(r,n));return i}sliceEventRange(e,n){let i=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(i={start:i.start,end:Fs(i.start,1)});let r=this.sliceRange(i,...n);for(let s of r)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return r}}function dT(t,e){let n=t.activeRange;return e?n:{start:Xf(n.start,t.slotMinTime.milliseconds),end:Xf(n.end,t.slotMaxTime.milliseconds-864e5)}}function Uvt(t,e,n,i,r){switch(e.type){case"RECEIVE_EVENTS":return Vvt(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,r);case"RESET_RAW_EVENTS":return Hvt(t,n[e.sourceId],e.rawEvents,i.activeRange,r);case"ADD_EVENTS":return jvt(t,e.eventStore,i?i.activeRange:null,r);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return R6(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?dg(t,i.activeRange,r):t;case"REMOVE_EVENTS":return ygt(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return jpe(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return kR(t,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return xa();default:return t}}function Vvt(t,e,n,i,r,s){if(e&&n===e.latestFetchId){let o=G_(Hpe(r,e,s),e,s);return i&&(o=dg(o,i,s)),R6(jpe(t,e.sourceId),o)}return t}function Hvt(t,e,n,i,r){const{defIdMap:s,instanceIdMap:o}=Wvt(t);let a=G_(Hpe(n,e,r),e,r,!1,s,o);return dg(a,i,r)}function Hpe(t,e,n){let i=n.options.eventDataTransform,r=e?e.eventDataTransform:null;return r&&(t=Hee(t,r)),i&&(t=Hee(t,i)),t}function Hee(t,e){let n;if(!e)n=t;else{n=[];for(let i of t){let r=e(i);r?n.push(r):r==null&&n.push(i)}}return n}function jvt(t,e,n,i){return n&&(e=dg(e,n,i)),R6(t,e)}function jee(t,e,n){let{defs:i}=t,r=Vd(t.instances,s=>i[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:n.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:n.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:s.forcedEndTzo}));return{defs:i,instances:r}}function jpe(t,e){return kR(t,n=>n.sourceId!==e)}function Gvt(t,e){return{defs:t.defs,instances:ug(t.instances,n=>!e[n.instanceId])}}function Wvt(t){const{defs:e,instances:n}=t,i={},r={};for(let s in e){const o=e[s],{publicId:a}=o;a&&(i[a]=s)}for(let s in n){const o=n[s],a=e[o.defId],{publicId:l}=a;l&&(r[l]=s)}return{defIdMap:i,instanceIdMap:r}}function Gpe(t,e,n){let{instances:i}=t.mutatedEvents;for(let r in i)if(!NR(e.validRange,i[r].range))return!1;return Wpe({eventDrag:t},n)}function qvt(t,e,n){return NR(e.validRange,t.range)?Wpe({dateSelection:t},n):!1}function Wpe(t,e){let n=e.getCurrentData(),i=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||$vt)(i,e)}function $vt(t,e,n={},i){return!(t.eventDrag&&!Xvt(t,e,n,i)||t.dateSelection&&!Yvt(t,e,n,i))}function Xvt(t,e,n,i){let r=e.getCurrentData(),s=t.eventDrag,o=s.mutatedEvents,a=o.defs,l=o.instances,c=uP(a,s.isEvent?t.eventUiBases:{"":r.selectionConfig});i&&(c=Vd(c,i));let d=Gvt(t.eventStore,s.affectedEvents.instances),u=d.defs,h=d.instances,f=uP(u,t.eventUiBases);for(let p in l){let m=l[p],g=m.range,v=c[m.defId],y=a[m.defId];if(!qpe(v.constraints,g,d,t.businessHours,e))return!1;let{eventOverlap:x}=e.options,b=typeof x=="function"?x:null;for(let E in h){let A=h[E];if(L6(g,A.range)&&(f[A.defId].overlap===!1&&s.isEvent||v.overlap===!1||b&&!b(new Ai(e,u[A.defId],A),new Ai(e,y,m))))return!1}let w=r.eventStore;for(let E of v.allows){let A=Object.assign(Object.assign({},n),{range:m.range,allDay:y.allDay}),S=w.defs[y.defId],C=w.instances[p],T;if(S?T=new Ai(e,S,C):T=new Ai(e,y),!E(B6(A,e),T))return!1}}return!0}function Yvt(t,e,n,i){let r=t.eventStore,s=r.defs,o=r.instances,a=t.dateSelection,l=a.range,{selectionConfig:c}=e.getCurrentData();if(i&&(c=i(c)),!qpe(c.constraints,l,r,t.businessHours,e))return!1;let{selectOverlap:d}=e.options,u=typeof d=="function"?d:null;for(let h in o){let f=o[h];if(L6(l,f.range)&&(c.overlap===!1||u&&!u(new Ai(e,s[f.defId],f),null)))return!1}for(let h of c.allows){let f=Object.assign(Object.assign({},n),a);if(!h(B6(f,e),null))return!1}return!0}function qpe(t,e,n,i,r){for(let s of t)if(!Zvt(Kvt(s,e,n,i,r),e))return!1;return!0}function Kvt(t,e,n,i,r){return t==="businessHours"?rN(dg(i,e,r)):typeof t=="string"?rN(kR(n,s=>s.groupId===t)):typeof t=="object"&&t?rN(dg(t,e,r)):[]}function rN(t){let{instances:e}=t,n=[];for(let i in e)n.push(e[i].range);return n}function Zvt(t,e){for(let n of t)if(NR(n,e))return!0;return!1}class Gee extends Error{constructor(e,n){super(e),this.response=n}}function Qvt(t,e,n){t=t.toUpperCase();const i={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(i.body=new URLSearchParams(n),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(r=>{if(r.ok)return r.json().then(s=>[s,r],()=>{throw new Gee("Failure parsing JSON",r)});throw new Gee("Request failed",r)})}class j6{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:i}=this;e in i&&(n?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}const hT=/^(visible|hidden)$/;class Jvt extends zn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Hd(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:i}=e,r=n&&i,s=["fc-scroller"];return n&&(i?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),Ee("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(hT.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(hT.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return hT.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return hT.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class gd{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,i)=>{let{depths:r,currentMap:s}=this,o=!1,a=!1;n!==null?(o=i in s,s[i]=n,r[i]=(r[i]||0)+1,a=!0):(r[i]-=1,r[i]||(delete s[i],delete this.callbackMap[i],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(i)),a&&this.masterCallback(n,String(i)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),n}collect(e,n,i){return zmt(this.currentMap,e,n,i)}getAll(){return M6(this.currentMap)}}function e0t(t){let e=fmt(t,".fc-scrollgrid-shrink"),n=0;for(let i of e)n=Math.max(n,Tmt(i));return Math.ceil(n)}function $pe(t,e){return t.liquid&&e.liquid}function t0t(t,e){return e.maxHeight!=null||$pe(t,e)}function n0t(t,e,n,i){let{expandRows:r}=n;return typeof e.content=="function"?e.content(n):Ee("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:r?n.clientHeight:""}},n.tableColGroupNode,Ee(i?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function i0t(t,e){return $f(t,e,xu)}function r0t(t,e){let n=[];for(let i of t){let r=i.span||1;for(let s=0;s<r;s+=1)n.push(Ee("col",{style:{width:i.width==="shrink"?s0t(e):i.width||"",minWidth:i.minWidth||""}}))}return Ee("colgroup",{},...n)}function s0t(t){return t??4}function o0t(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function a0t(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function l0t(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function D4(t){return Ee("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function dP(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function Xpe(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class G6 extends zn{constructor(){super(...arguments),this.processCols=Ht(e=>e,i0t),this.renderMicroColGroup=Ht(r0t),this.scrollerRefs=new gd,this.scrollerElRefs=new gd(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:i}=this,r=e.sections||[],s=this.processCols(e.cols),o=this.renderMicroColGroup(s,n.shrinkWidth),a=a0t(e.liquid,i);e.collapsibleWidth&&a.push("fc-scrollgrid-collapsible");let l=r.length,c=0,d,u=[],h=[],f=[];for(;c<l&&(d=r[c]).type==="header";)u.push(this.renderSection(d,o,!0)),c+=1;for(;c<l&&(d=r[c]).type==="body";)h.push(this.renderSection(d,o,!1)),c+=1;for(;c<l&&(d=r[c]).type==="footer";)f.push(this.renderSection(d,o,!0)),c+=1;let p=!mpe();const m={role:"rowgroup"};return Ee("table",{role:"grid",className:a.join(" "),style:{height:e.height}},Boolean(!p&&u.length)&&Ee("thead",m,...u),Boolean(!p&&h.length)&&Ee("tbody",m,...h),Boolean(!p&&f.length)&&Ee("tfoot",m,...f),p&&Ee("tbody",m,...u,...h,...f))}renderSection(e,n,i){return"outerContent"in e?Ee(yi,{key:e.key},e.outerContent):Ee("tr",{key:e.key,role:"presentation",className:l0t(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,i))}renderChunkTd(e,n,i,r){if("outerContent"in i)return i.outerContent;let{props:s}=this,{forceYScrollbars:o,scrollerClientWidths:a,scrollerClientHeights:l}=this.state,c=t0t(s,e),d=$pe(s,e),u=s.liquid?o?"scroll":c?"auto":"hidden":"visible",h=e.key,f=n0t(e,i,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&a[h]!==void 0?a[h]:null,clientHeight:l[h]!==void 0?l[h]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return Ee(r?"th":"td",{ref:i.elRef,role:"presentation"},Ee("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},Ee(Jvt,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:u,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:d,liquidIsAbsolute:!0},f)))}_handleScrollerEl(e,n){let i=c0t(this.props.sections,n);i&&Hd(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return o0t(this.props.cols)?e0t(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=jgt(),{scrollerRefs:n,scrollerElRefs:i}=this,r=!1,s={},o={};for(let a in n.currentMap){let l=n.currentMap[a];if(l&&l.needsYScrolling()){r=!0;break}}for(let a of this.props.sections){let l=a.key,c=i.currentMap[l];if(c){let d=c.parentNode;s[l]=Math.floor(d.getBoundingClientRect().width-(r?e.y:0)),o[l]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:s,scrollerClientHeights:o}}}G6.addStateEquality({scrollerClientWidths:xu,scrollerClientHeights:xu});function c0t(t,e){for(let n of t)if(n.key===e)return n;return null}class W6 extends zn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&Uee(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:i}=n,{seg:r}=e,{eventRange:s}=r,{ui:o}=s,a={event:new Ai(n,s.def,s.instance),view:n.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&dvt(r,n),isStartResizable:!e.disableResizing&&hvt(r,n),isEndResizable:!e.disableResizing&&fvt(r),isMirror:Boolean(e.isDragging||e.isResizing||e.isDateSelecting),isStart:Boolean(r.isStart),isEnd:Boolean(r.isEnd),isPast:Boolean(e.isPast),isFuture:Boolean(e.isFuture),isToday:Boolean(e.isToday),isSelected:Boolean(e.isSelected),isDragging:Boolean(e.isDragging),isResizing:Boolean(e.isResizing)};return Ee(Aa,Object.assign({},e,{elRef:this.handleEl,elClasses:[...pvt(a),...r.eventRange.ui.classNames,...e.elClasses||[]],renderProps:a,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&Uee(this.el,this.props.seg)}}class Ype extends zn{render(){let{props:e,context:n}=this,{options:i}=n,{seg:r}=e,{ui:s}=r.eventRange,o=i.eventTimeFormat||e.defaultTimeFormat,a=Mpe(r,o,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return Ee(W6,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:Tpe(r,n),defaultGenerator:u0t,timeText:a}),(l,c)=>Ee(yi,null,Ee(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:c.textColor}}),Boolean(c.isStartResizable)&&Ee("div",{className:"fc-event-resizer fc-event-resizer-start"}),Boolean(c.isEndResizable)&&Ee("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function u0t(t){return Ee("div",{className:"fc-event-main-frame"},t.timeText&&Ee("div",{className:"fc-event-time"},t.timeText),Ee("div",{className:"fc-event-title-container"},Ee("div",{className:"fc-event-title fc-sticky"},t.event.title||Ee(yi,null,""))))}const q6=t=>Ee(eh.Consumer,null,e=>{let{options:n}=e,i={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return Ee(Aa,Object.assign({},t,{elTag:t.elTag||"div",renderProps:i,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount}))}),d0t=Mi({day:"numeric"});class $6 extends zn{constructor(){super(...arguments),this.refineRenderProps=iC(h0t)}render(){let{props:e,context:n}=this,{options:i}=n,r=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:i.monthStartFormat});return Ee(Aa,Object.assign({},e,{elClasses:[...I6(r,n.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),r.isDisabled?{}:{"data-date":A6(e.date)}),renderProps:r,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount}))}}function X6(t){return Boolean(t.dayCellContent||kpe("dayCellContent",t))}function h0t(t){let{date:e,dateEnv:n,dateProfile:i,isMonthStart:r}=t,s=gpe(e,t.todayRange,null,i),o=t.showDayNumber?n.format(e,r?t.monthStartFormat:d0t):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},s),{isMonthStart:r,dayNumberText:o}),t.extraRenderProps)}class Kpe extends zn{render(){let{props:e}=this,{seg:n}=e;return Ee(W6,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:f0t,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function f0t(t){let{title:e}=t.event;return e&&Ee("div",{className:"fc-event-title"},t.event.title)}function Zpe(t){return Ee("div",{className:`fc-${t}`})}const Qpe=t=>Ee(eh.Consumer,null,e=>{let{dateEnv:n,options:i}=e,{date:r}=t,s=i.weekNumberFormat||t.defaultFormat,o=n.computeWeekNumber(r),a=n.format(r,s);return Ee(Aa,Object.assign({},t,{renderProps:{num:o,text:a,date:r},generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:p0t,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount}))});function p0t(t){return t.text}const sN=10;class m0t extends zn{constructor(){super(...arguments),this.state={titleId:LR()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Hd(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=tpe(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:i,state:r}=this,s=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return Jpt(Ee("div",Object.assign({},i.extraAttrs,{id:i.id,className:s.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),Ee("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},Ee("span",{className:"fc-popover-title",id:r.titleId},i.title),Ee("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),Ee("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:i}=this.props,{rootEl:r}=this,s=$gt(n);if(s){let o=r.getBoundingClientRect(),a=i?Is(n,".fc-scrollgrid").getBoundingClientRect().top:s.top,l=e?s.right-o.width:s.left;a=Math.max(a,sN),l=Math.min(l,document.documentElement.clientWidth-sN-o.width),l=Math.max(l,sN);let c=r.offsetParent.getBoundingClientRect();Ew(r,{top:a-c.top,left:l-c.left})}}}class g0t extends Eu{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:i}=this,{startDate:r,todayRange:s,dateProfile:o}=i,a=n.format(r,e.dayPopoverFormat);return Ee($6,{elRef:this.handleRootEl,date:r,dateProfile:o,todayRange:s},(l,c,d)=>Ee(m0t,{elRef:d.ref,id:i.id,title:a,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},X6(e)&&Ee(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,n,i,r){let{rootEl:s,props:o}=this;return e>=0&&e<i&&n>=0&&n<r?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:i,bottom:r},layer:1}:null}}class Jpe extends zn{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:LR()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Hd(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:i}=this,{moreLinkClick:r}=i.options,s=Wee(n).start;function o(a){let{def:l,instance:c,range:d}=a.eventRange;return{event:new Ai(i,l,c),start:i.dateEnv.toDate(d.start),end:i.dateEnv.toDate(d.end),isStart:a.isStart,isEnd:a.isEnd}}typeof r=="function"&&(r=r({date:s,allDay:Boolean(n.allDayDate),allSegs:n.allSegs.map(o),hiddenSegs:n.hiddenSegs.map(o),jsEvent:e,view:i.viewApi})),!r||r==="popover"?this.setState({isPopoverOpen:!0}):typeof r=="string"&&i.calendarApi.zoomTo(s,r)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return Ee(eh.Consumer,null,i=>{let{viewApi:r,options:s,calendarApi:o}=i,{moreLinkText:a}=s,{moreCnt:l}=e,c=Wee(e),d=typeof a=="function"?a.call(o,l):`+${l} ${a}`,u=Mw(s.moreLinkHint,[l],d),h={num:l,shortText:`+${l}`,text:d,view:r};return Ee(yi,null,Boolean(e.moreCnt)&&Ee(Aa,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),ipe(this.handleClick)),{title:u,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||v0t,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),n.isPopoverOpen&&Ee(g0t,{id:n.popoverId,startDate:c.start,endDate:c.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Is(this.linkEl,".fc-view-harness"))}}function v0t(t){return t.text}function Wee(t){if(t.allDayDate)return{start:t.allDayDate,end:Fs(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:eme(e),end:x0t(e)}}function eme(t){return t.reduce(y0t).eventRange.range.start}function y0t(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function x0t(t){return t.reduce(b0t).eventRange.range.end}function b0t(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class hP extends zn{render(){let{props:e,context:n}=this,{options:i}=n,r={view:n.viewApi};return Ee(Aa,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...tme(e.viewSpec),...e.elClasses||[]],renderProps:r,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount}),()=>e.children)}}function tme(t){return[`fc-${t.type}-view`,"fc-view"]}const w0t={id:String,defaultAllDay:Boolean,url:String,format:String,events:Ge,eventDataTransform:Ge,success:Ge,failure:Ge};function nme(t,e,n=ime(e)){let i;if(typeof t=="string"?i={url:t}:typeof t=="function"||Array.isArray(t)?i={events:t}:typeof t=="object"&&t&&(i=t),i){let{refined:r,extra:s}=C6(i,n),o=_0t(r,e);if(o)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:Pg(),sourceDefId:o.sourceDefId,meta:o.meta,ui:lP(r,e),extendedProps:s}}return null}function ime(t){return Object.assign(Object.assign(Object.assign({},aP),w0t),t.pluginHooks.eventSourceRefiners)}function _0t(t,e){let n=e.pluginHooks.eventSourceDefs;for(let i=n.length-1;i>=0;i-=1){let s=n[i].parseMeta(t);if(s)return{sourceDefId:i,meta:s}}return null}class S0t{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let i=this.getCurrentData(),r;n=n||"day",r=i.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),r?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:r.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:i}=this.getCurrentData(),r=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]),s,o;for(let a in n)r.push(a);for(s=0;s<r.length;s+=1)if(o=n[r[s]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:VS(e.calendarOptions.now,e.dateEnv)})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),i=Sn(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),Mi(n))}formatRange(e,n,i){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(e),r.createMarker(n),Mi(i),i)}formatIso(e,n){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:n})}select(e,n){let i;n==null?e.start!=null?i=e:i={start:e,end:null}:i={start:e,end:n};let r=this.getCurrentData(),s=gvt(i,r.dateEnv,Sn({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),wpe(s,null,r))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),ovt(e,n))}addEvent(e,n){if(e instanceof Ai){let o=e._def,a=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:M4({def:o,instance:a})}),this.triggerEventAdd(e)),e}let i=this.getCurrentData(),r;if(n instanceof o0)r=n.internalEventSource;else if(typeof n=="boolean")n&&([r]=M6(i.eventSources));else if(n!=null){let o=this.getEventSourceById(n);if(!o)return console.warn(`Could not find an event source with ID "${n}"`),null;r=o.internalEventSource}let s=upe(e,r,i,!1);if(s){let o=new Ai(i,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:M4(s)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:_pe(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:i,instances:r}=n.eventStore;e=String(e);for(let s in i){let o=i[s];if(o.publicId===e){if(o.recurringDef)return new Ai(n,o,null);for(let a in r){let l=r[a];if(l.defId===o.defId)return new Ai(n,o,l)}}}return null}getEvents(){let e=this.getCurrentData();return jm(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,i=[];for(let r in n)i.push(new o0(e,n[r]));return i}getEventSourceById(e){let n=this.getCurrentData(),i=n.eventSources;e=String(e);for(let r in i)if(i[r].publicId===e)return new o0(n,i[r]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof o0)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=nme(e,n);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new o0(n,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Sn(e);n&&this.trigger("_scrollRequest",{time:n})}}class E0t{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class M0t extends E0t{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let i=!1;e.isActive?(n.set(e.id,e),i=!0):n.has(e.id)&&(n.delete(e.id),i=!0),i&&this.set(n)}}const A0t=[],rme={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},sme=Object.assign(Object.assign({},rme),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function ome(t){let e=t.length>0?t[0].code:"en",n=A0t.concat(t),i={en:sme};for(let r of n)i[r.code]=r;return{map:i,defaultCode:e}}function Y6(t,e){return typeof t=="object"&&!Array.isArray(t)?ame(t.code,[t.code],t):T0t(t,e)}function T0t(t,e){let n=[].concat(t||[]),i=C0t(n,e)||sme;return ame(t,n,i)}function C0t(t,e){for(let n=0;n<t.length;n+=1){let i=t[n].toLocaleLowerCase().split("-");for(let r=i.length;r>0;r-=1){let s=i.slice(0,r).join("-");if(e[s])return e[s]}}return null}function ame(t,e,n){let i=E6([rme,n],["buttonText"]);delete i.code;let{week:r}=i;return delete i.week,{codeArg:t,codes:e,week:r,simpleNumberFormat:new Intl.NumberFormat(t),options:i}}function th(t){return{id:Pg(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function P0t(t,e){let n={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function r(s){for(let o of s){const a=o.name,l=n[a];l===void 0?(n[a]=o.id,r(o.deps),i=R0t(i,o)):l!==o.id&&console.warn(`Duplicate plugin '${a}'`)}}return t&&r(t),r(e),i}function D0t(){let t=[],e=[],n;return(i,r)=>((!n||!$f(i,t)||!$f(r,e))&&(n=P0t(i,r)),t=i,e=r,n)}function R0t(t,e){return{premiumReleaseDate:O0t(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function O0t(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class op extends US{}op.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};op.prototype.baseIconClass="fc-icon";op.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};op.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};op.prototype.iconOverrideOption="buttonIcons";op.prototype.iconOverrideCustomButtonOption="icon";op.prototype.iconOverridePrefix="fc-icon-";function L0t(t,e){let n={},i;for(i in t)R4(i,n,t,e);for(i in e)R4(i,n,t,e);return n}function R4(t,e,n,i){if(e[t])return e[t];let r=I0t(t,e,n,i);return r&&(e[t]=r),r}function I0t(t,e,n,i){let r=n[t],s=i[t],o=d=>r&&r[d]!==null?r[d]:s&&s[d]!==null?s[d]:null,a=o("component"),l=o("superType"),c=null;if(l){if(l===t)throw new Error("Can't have a custom view type that references itself");c=R4(l,e,n,i)}return!a&&c&&(a=c.component),a?{type:t,component:a,defaults:Object.assign(Object.assign({},c?c.defaults:{}),r?r.rawOptions:{}),overrides:Object.assign(Object.assign({},c?c.overrides:{}),s?s.rawOptions:{})}:null}function qee(t){return Vd(t,k0t)}function k0t(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=$ee(e):n&&!(n.prototype instanceof zn)&&(n=$ee(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function $ee(t){return e=>Ee(eh.Consumer,null,n=>Ee(Aa,{elTag:"div",elClasses:tme(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function N0t(t,e,n,i){let r=qee(t),s=qee(e.views),o=L0t(r,s);return Vd(o,a=>B0t(a,s,e,n,i))}function B0t(t,e,n,i,r){let s=t.overrides.duration||t.defaults.duration||i.duration||n.duration,o=null,a="",l="",c={};if(s&&(o=z0t(s),o)){let h=S4(o);a=h.unit,h.value===1&&(l=a,c=e[a]?e[a].rawOptions:{})}let d=h=>{let f=h.buttonText||{},p=t.defaults.buttonTextKey;return p!=null&&f[p]!=null?f[p]:f[t.type]!=null?f[t.type]:f[l]!=null?f[l]:null},u=h=>{let f=h.buttonHints||{},p=t.defaults.buttonTextKey;return p!=null&&f[p]!=null?f[p]:f[t.type]!=null?f[t.type]:f[l]!=null?f[l]:null};return{type:t.type,component:t.component,duration:o,durationUnit:a,singleUnit:l,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},c),t.overrides),buttonTextOverride:d(i)||d(n)||t.overrides.buttonText,buttonTextDefault:d(r)||t.defaults.buttonText||d(uy)||t.type,buttonTitleOverride:u(i)||u(n)||t.overrides.buttonHint,buttonTitleDefault:u(r)||t.defaults.buttonHint||u(uy)}}let Xee={};function z0t(t){let e=JSON.stringify(t),n=Xee[e];return n===void 0&&(n=Sn(t),Xee[e]=n),n}function F0t(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function U0t(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function V0t(t,e,n,i){let r;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||n);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(r=i.buildPrev(t,n),r.isValid)return r;break;case"NEXT":if(r=i.buildNext(t,n),r.isValid)return r;break}return t}function H0t(t,e,n){let i=e?e.activeRange:null;return cme({},Y0t(t,n),i,n)}function j0t(t,e,n,i){let r=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return cme(t,e.sources,r,i);case"REMOVE_EVENT_SOURCE":return W0t(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?ume(t,r,i):t;case"FETCH_EVENT_SOURCES":return K6(t,e.sourceIds?spe(e.sourceIds):dme(t,i),r,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return X0t(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function G0t(t,e,n){let i=e?e.activeRange:null;return K6(t,dme(t,n),i,!0,n)}function lme(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function cme(t,e,n,i){let r={};for(let s of e)r[s.sourceId]=s;return n&&(r=ume(r,n,i)),Object.assign(Object.assign({},t),r)}function W0t(t,e){return ug(t,n=>n.sourceId!==e)}function ume(t,e,n){return K6(t,ug(t,i=>q0t(i,e,n)),e,!1,n)}function q0t(t,e,n){return hme(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function K6(t,e,n,i,r){let s={};for(let o in t){let a=t[o];e[o]?s[o]=$0t(a,n,i,r):s[o]=a}return s}function $0t(t,e,n,i){let{options:r,calendarApi:s}=i,o=i.pluginHooks.eventSourceDefs[t.sourceDefId],a=Pg();return o.fetch({eventSource:t,range:e,isRefetch:n,context:i},l=>{let{rawEvents:c}=l;r.eventSourceSuccess&&(c=r.eventSourceSuccess.call(s,c,l.response)||c),t.success&&(c=t.success.call(s,c,l.response)||c),i.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:a,fetchRange:e,rawEvents:c})},l=>{let c=!1;r.eventSourceFailure&&(r.eventSourceFailure.call(s,l),c=!0),t.failure&&(t.failure(l),c=!0),c||console.warn(l.message,l),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:a,fetchRange:e,error:l})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:a})}function X0t(t,e,n,i){let r=t[e];return r&&n===r.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:i})}):t}function dme(t,e){return ug(t,n=>hme(n,e))}function Y0t(t,e){let n=ime(e),i=[].concat(t.eventSources||[]),r=[];t.initialEvents&&i.unshift(t.initialEvents),t.events&&i.unshift(t.events);for(let s of i){let o=nme(s,e,n);o&&r.push(o)}return r}function hme(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function K0t(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function Z0t(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function Q0t(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function J0t(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function eyt(t,e,n,i,r){let s=t.headerToolbar?Yee(t.headerToolbar,t,e,n,i,r):null,o=t.footerToolbar?Yee(t.footerToolbar,t,e,n,i,r):null;return{header:s,footer:o}}function Yee(t,e,n,i,r,s){let o={},a=[],l=!1;for(let c in t){let d=t[c],u=tyt(d,e,n,i,r,s);o[c]=u.widgets,a.push(...u.viewsWithButtons),l=l||u.hasTitle}return{sectionWidgets:o,viewsWithButtons:a,hasTitle:l}}function tyt(t,e,n,i,r,s){let o=e.direction==="rtl",a=e.customButtons||{},l=n.buttonText||{},c=e.buttonText||{},d=n.buttonHints||{},u=e.buttonHints||{},h=t?t.split(" "):[],f=[],p=!1;return{widgets:h.map(g=>g.split(",").map(v=>{if(v==="title")return p=!0,{buttonName:v};let y,x,b,w,E,A;if(y=a[v])b=S=>{y.click&&y.click.call(S.target,S,S.target)},(w=i.getCustomButtonIconClass(y))||(w=i.getIconClass(v,o))||(E=y.text),A=y.hint||y.text;else if(x=r[v]){f.push(v),b=()=>{s.changeView(v)},(E=x.buttonTextOverride)||(w=i.getIconClass(v,o))||(E=x.buttonTextDefault);let S=x.buttonTextOverride||x.buttonTextDefault;A=Mw(x.buttonTitleOverride||x.buttonTitleDefault||e.viewHint,[S,v],S)}else if(s[v])if(b=()=>{s[v]()},(E=l[v])||(w=i.getIconClass(v,o))||(E=c[v]),v==="prevYear"||v==="nextYear"){let S=v==="prevYear"?"prev":"next";A=Mw(d[S]||u[S],[c.year||"year","year"],c[v])}else A=S=>Mw(d[v]||u[v],[c[S]||S,S],c[v]);return{buttonName:v,buttonClick:b,buttonIcon:w,buttonText:E,buttonHint:A}})),viewsWithButtons:f,hasTitle:p}}class nyt{constructor(e,n,i){this.type=e,this.getCurrentData=n,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let iyt={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const ryt=th({name:"array-event-source",eventSourceDefs:[iyt]});let syt={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:i}=t.context,r=t.eventSource.meta;Xgt(r.bind(null,Cpe(t.range,i)),s=>e({rawEvents:s}),n)}};const oyt=th({name:"func-event-source",eventSourceDefs:[syt]}),ayt={method:String,extraParams:Ge,startParam:String,endParam:String,timeZoneParam:String};let lyt={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:i}=t.eventSource,r=uyt(i,t.range,t.context);Qvt(i.method,i.url,r).then(([s,o])=>{e({rawEvents:s,response:o})},n)}};const cyt=th({name:"json-event-source",eventSourceRefiners:ayt,eventSourceDefs:[lyt]});function uyt(t,e,n){let{dateEnv:i,options:r}=n,s,o,a,l,c={};return s=t.startParam,s==null&&(s=r.startParam),o=t.endParam,o==null&&(o=r.endParam),a=t.timeZoneParam,a==null&&(a=r.timeZoneParam),typeof t.extraParams=="function"?l=t.extraParams():l=t.extraParams||{},Object.assign(c,l),c[s]=i.formatIso(e.start),c[o]=i.formatIso(e.end),i.timeZone!=="local"&&(c[a]=i.timeZone),c}const dyt={daysOfWeek:Ge,startTime:Sn,endTime:Sn,duration:Sn,startRecur:Ge,endRecur:Ge};let hyt={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null},i;return t.duration&&(i=t.duration),!i&&t.startTime&&t.endTime&&(i=Rmt(t.endTime,t.startTime)),{allDayGuess:Boolean(!t.startTime&&!t.endTime),duration:i,typeData:n}}return null},expand(t,e,n){let i=hg(e,{start:t.startRecur,end:t.endRecur});return i?pyt(t.daysOfWeek,t.startTime,i,n):[]}};const fyt=th({name:"simple-recurring-event",recurringTypes:[hyt],eventRefiners:dyt});function pyt(t,e,n,i){let r=t?spe(t):null,s=ui(n.start),o=n.end,a=[];for(;s<o;){let l;(!r||r[s.getUTCDay()])&&(e?l=i.add(s,e):l=s,a.push(l)),s=Fs(s,1)}return a}const myt=th({name:"change-handler",optionChangeHandlers:{events(t,e){Kee([t],e)},eventSources:Kee}});function Kee(t,e){let n=M6(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let i=[];for(let r of t){let s=!1;for(let o=0;o<n.length;o+=1)if(n[o]._raw===r){n.splice(o,1),s=!0;break}s||i.push(r)}for(let r of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:r.sourceId});for(let r of i)e.calendarApi.addEventSource(r)}function gyt(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},Cpe(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function vyt(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",jm(t,e))}const yyt=[ryt,oyt,cyt,fyt,myt,th({name:"misc",isLoadingFuncs:[t=>lme(t.eventSources)],propSetHandlers:{dateProfile:gyt,eventStore:vyt}})];class xyt{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new j6(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],i;for(;i=e.shift();)this.runTask(i),n.push(i);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function byt(t,e,n){let i;return/^(year|month)$/.test(t.currentRangeUnit)?i=t.currentRange:i=t.activeRange,n.formatRange(i.start,i.end,Mi(e.titleFormat||wyt(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function wyt(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=rP(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class _yt{constructor(e){this.computeCurrentViewData=Ht(this._computeCurrentViewData),this.organizeRawLocales=Ht(ome),this.buildLocale=Ht(Y6),this.buildPluginHooks=D0t(),this.buildDateEnv=Ht(Syt),this.buildTheme=Ht(Eyt),this.parseToolbars=Ht(eyt),this.buildViewSpecs=Ht(N0t),this.buildDateProfileGenerator=iC(Myt),this.buildViewApi=Ht(Ayt),this.buildViewUiProps=iC(Pyt),this.buildEventUiBySource=Ht(Tyt,xu),this.buildEventUiBases=Ht(Cyt),this.parseContextBusinessHours=iC(Dyt),this.buildTitle=Ht(byt),this.emitter=new BR,this.actionRunner=new xyt(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=e,this.actionRunner.pause();let n={},i=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),r=i.calendarOptions.initialView||i.pluginHooks.initialView,s=this.computeCurrentViewData(r,i,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let o=svt(i.calendarOptions,i.dateEnv),a=s.dateProfileGenerator.build(o);Ad(a.activeRange,o)||(o=a.currentRange.start);let l={dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let h of i.pluginHooks.contextInit)h(l);let c=H0t(i.calendarOptions,a,l),d={dynamicOptionOverrides:n,currentViewType:r,currentDate:o,dateProfile:a,businessHours:this.parseContextBusinessHours(l),eventSources:c,eventUiBases:{},eventStore:xa(),renderableEventStore:xa(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},u=Object.assign(Object.assign({},l),d);for(let h of i.pluginHooks.reducers)Object.assign(d,h(null,null,u));oN(d,l)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:i}=this;n===void 0?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:i,emitter:r}=this,s=U0t(i.dynamicOptionOverrides,e),o=this.computeOptionsData(n.optionOverrides,s,n.calendarApi),a=F0t(i.currentViewType,e),l=this.computeCurrentViewData(a,o,n.optionOverrides,s);n.calendarApi.currentDataManager=this,r.setThisContext(n.calendarApi),r.setOptions(l.options);let c={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:u}=i;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(u=l.dateProfileGenerator.build(d)),d=rvt(d,e),u=V0t(u,e,d,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Ad(u.currentRange,d))&&(d=u.currentRange.start);let h=j0t(i.eventSources,e,u,c),f=Uvt(i.eventStore,e,h,u,c),m=lme(h)&&!l.options.progressiveEventRendering&&i.renderableEventStore||f,{eventUiSingleBase:g,selectionConfig:v}=this.buildViewUiProps(c),y=this.buildEventUiBySource(h),x=this.buildEventUiBases(m.defs,g,y),b={dynamicOptionOverrides:s,currentViewType:a,currentDate:d,dateProfile:u,eventSources:h,eventStore:f,renderableEventStore:m,selectionConfig:v,eventUiBases:x,businessHours:this.parseContextBusinessHours(c),dateSelection:K0t(i.dateSelection,e),eventSelection:Z0t(i.eventSelection,e),eventDrag:Q0t(i.eventDrag,e),eventResize:J0t(i.eventResize,e)},w=Object.assign(Object.assign({},c),b);for(let S of o.pluginHooks.reducers)Object.assign(b,S(i,e,w));let E=oN(i,c),A=oN(b,c);!E&&A?r.trigger("loading",!0):E&&!A&&r.trigger("loading",!1),this.state=b,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,i=this.data,r=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(n.currentViewType,r,e.optionOverrides,n.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(n.dateProfile,s.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),s),n),a=r.pluginHooks.optionChangeHandlers,l=i&&i.calendarOptions,c=r.calendarOptions;if(l&&l!==c){l.timeZone!==c.timeZone&&(n.eventSources=o.eventSources=G0t(o.eventSources,n.dateProfile,o),n.eventStore=o.eventStore=jee(o.eventStore,i.dateEnv,o.dateEnv),n.renderableEventStore=o.renderableEventStore=jee(o.renderableEventStore,i.dateEnv,o.dateEnv));for(let d in a)(this.optionsForHandling.indexOf(d)!==-1||l[d]!==c[d])&&a[d](c[d],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,n,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:s,localeDefaults:o,availableLocaleData:a,extra:l}=this.processRawCalendarOptions(e,n);Zee(l);let c=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,s,a,r.defaultRangeSeparator),d=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),u=this.buildTheme(r,s),h=this.parseToolbars(r,this.stableOptionOverrides,u,d,i);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:s,dateEnv:c,viewSpecs:d,theme:u,toolbarConfig:h,localeDefaults:o,availableRawLocales:a.map}}processRawCalendarOptions(e,n){let{locales:i,locale:r}=Qk([uy,e,n]),s=this.organizeRawLocales(i),o=s.map,a=this.buildLocale(r||s.defaultCode,o).options,l=this.buildPluginHooks(e.plugins||[],yyt),c=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oee),Lee),Iee),l.listenerRefiners),l.optionRefiners),d={},u=Qk([uy,a,e,n]),h={},f=this.currentCalendarOptionsInput,p=this.currentCalendarOptionsRefined,m=!1;for(let g in u)this.optionsForRefining.indexOf(g)===-1&&(u[g]===f[g]||Jp[g]&&g in f&&Jp[g](f[g],u[g]))?h[g]=p[g]:c[g]?(h[g]=c[g](u[g]),m=!0):d[g]=f[g];return m&&(this.currentCalendarOptionsInput=u,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:s,localeDefaults:a,extra:d}}_computeCurrentViewData(e,n,i,r){let s=n.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:a}=this.processRawViewOptions(s,n.pluginHooks,n.localeDefaults,i,r);Zee(a);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),c=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:s,options:o,dateProfileGenerator:l,viewApi:c}}processRawViewOptions(e,n,i,r,s){let o=Qk([uy,e.optionDefaults,i,r,e.optionOverrides,s]),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oee),Lee),Iee),pgt),n.listenerRefiners),n.optionRefiners),l={},c=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,u=!1,h={};for(let f in o)o[f]===c[f]||Jp[f]&&Jp[f](o[f],c[f])?l[f]=d[f]:(o[f]===this.currentCalendarOptionsInput[f]||Jp[f]&&Jp[f](o[f],this.currentCalendarOptionsInput[f])?f in this.currentCalendarOptionsRefined&&(l[f]=this.currentCalendarOptionsRefined[f]):a[f]?l[f]=a[f](o[f]):h[f]=o[f],u=!0);return u&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function Syt(t,e,n,i,r,s,o,a){let l=Y6(e||o.defaultCode,o.map);return new Rpe({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:l,weekNumberCalculation:n,firstDay:i,weekText:r,cmdFormatter:s.cmdFormatter,defaultSeparator:a})}function Eyt(t,e){let n=e.themeClasses[t.themeSystem]||op;return new n(t)}function Myt(t){let e=t.dateProfileGeneratorClass||bpe;return new e(t)}function Ayt(t,e,n){return new nyt(t,e,n)}function Tyt(t){return Vd(t,e=>e.ui)}function Cyt(t,e,n){let i={"":e};for(let r in t){let s=t[r];s.sourceId&&n[s.sourceId]&&(i[r]=n[s.sourceId])}return i}function Pyt(t){let{options:e}=t;return{eventUiSingleBase:lP({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:lP({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function oN(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function Dyt(t){return Agt(t.options.businessHours,t)}function Zee(t,e){for(let n in t)console.warn(`Unknown option '${n}'`+(e?` for view '${e}'`:""))}class Ryt extends zn{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return Ee("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:i}=this.context,r=[],s=!0;for(let o of e){let{buttonName:a,buttonClick:l,buttonText:c,buttonIcon:d,buttonHint:u}=o;if(a==="title")s=!1,r.push(Ee("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let h=a===n.activeButton,f=!n.isTodayEnabled&&a==="today"||!n.isPrevEnabled&&a==="prev"||!n.isNextEnabled&&a==="next",p=[`fc-${a}-button`,i.getClass("button")];h&&p.push(i.getClass("buttonActive")),r.push(Ee("button",{type:"button",title:typeof u=="function"?u(n.navUnit):u,disabled:f,"aria-pressed":h,className:p.join(" "),onClick:l},c||(d?Ee("span",{className:d}):"")))}}if(r.length>1){let o=s&&i.getClass("buttonGroup")||"";return Ee("div",{className:o},...r)}return r[0]}}class Qee extends zn{render(){let{model:e,extraClassName:n}=this.props,i=!1,r,s,o=e.sectionWidgets,a=o.center;return o.left?(i=!0,r=o.left):r=o.start,o.right?(i=!0,s=o.right):s=o.end,Ee("div",{className:[n||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",r||[]),this.renderSection("center",a||[]),this.renderSection("end",s||[]))}renderSection(e,n){let{props:i}=this;return Ee(Ryt,{key:e,widgetGroups:n,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}}class Oyt extends zn{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Hd(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:i}=e,r=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",o="";return i?n.availableWidth!==null?s=n.availableWidth/i:o=`${1/i*100}%`:s=e.height||"",Ee("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:s,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class Lyt extends Ux{constructor(e){super(e),this.handleSegClick=(n,i)=>{let{component:r}=this,{context:s}=r,o=Qy(i);if(o&&r.isValidSegDownEl(n.target)){let a=Is(n.target,".fc-event-forced-url"),l=a?a.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:i,event:new Ai(r.context,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:s.viewApi}),l&&!n.defaultPrevented&&(window.location.href=l)}},this.destroy=npe(e.el,"click",".fc-event",this.handleSegClick)}}class Iyt extends Ux{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,i)=>{Qy(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",n,i))},this.handleSegLeave=(n,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,i))},this.removeHoverListeners=gmt(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,i){let{component:r}=this,{context:s}=r,o=Qy(i);(!n||r.isValidSegDownEl(n.target))&&s.emitter.trigger(e,{el:i,event:new Ai(s,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:s.viewApi})}}class kyt extends Rg{constructor(){super(...arguments),this.buildViewContext=Ht(tvt),this.buildViewPropTransformers=Ht(Byt),this.buildToolbarProps=Ht(Nyt),this.headerRef=oo(),this.footerRef=oo(),this.interactionsStore={},this.state={viewLabelId:LR()},this.registerInteractiveComponent=(e,n)=>{let i=Pvt(e,n),o=[Lyt,Iyt].concat(this.props.pluginHooks.componentInteractions).map(a=>new a(i));this.interactionsStore[e.uid]=o,P4[e.uid]=i},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let i of n)i.destroy();delete this.interactionsStore[e.uid]}delete P4[e.uid]},this.resizeRunner=new j6(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:i}=e,r=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,VS(e.options.now,e.dateEnv),e.viewTitle),s=!1,o="",a;e.isHeightAuto||e.forPrint?o="":i.height!=null?s=!0:i.contentHeight!=null?o=i.contentHeight:a=Math.max(i.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=n.header&&n.header.hasTitle?this.state.viewLabelId:"";return Ee(eh.Provider,{value:l},n.header&&Ee(Qee,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:c},r)),Ee(Oyt,{liquid:s,height:o,aspectRatio:a,labeledById:c},this.renderView(e),this.buildAppendContent()),n.footer&&Ee(Qee,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},r)))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let i in n)n[i](e[i],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:i}=n.pluginHooks;for(let r in i)n[r]!==e[r]&&i[r](n[r],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(i=>i(e));return Ee(yi,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:i}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(n.viewPropsTransformers);for(let a of s)Object.assign(r,a.transform(r,e));let o=i.component;return Ee(o,Object.assign({},r))}}function Nyt(t,e,n,i,r,s){let o=n.build(r,void 0,!1),a=n.buildPrev(e,i,!1),l=n.buildNext(e,i,!1);return{title:s,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:o.isValid&&!Ad(e.currentRange,r),isPrevEnabled:a.isValid,isNextEnabled:l.isValid}}function Byt(t){return t.map(e=>new e)}class zyt extends S0t{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;Bee(()=>{j_(Ee(Rvt,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(r,s,o,a)=>(this.setClassNames(r),this.setHeight(s),Ee(Bpe.Provider,{value:this.customContentRenderId},Ee(kyt,Object.assign({isHeightAuto:o,forPrint:a},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,j_(null,this.el),this.setClassNames([]),this.setHeight(""))},amt(e),this.el=e,this.renderRunner=new j6(this.handleRenderRequest),new _yt({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Bee(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!$f(e,this.currentClassNames)){let{classList:n}=this.el;for(let i of this.currentClassNames)n.remove(i);for(let i of e)n.add(i);this.currentClassNames=e}}setHeight(e){epe(this.el,"height",e)}}function Fyt(t,e={}){let n=Uyt(e),i=Mi(e),r=n.createMarkerMeta(t);return r?n.format(r.marker,i,{forcedTzo:r.forcedTzo}):""}function Uyt(t){let e=Y6(t.locale||"en",ome([]).map);return new Rpe(Object.assign(Object.assign({timeZone:uy.timeZone,calendarSystem:"gregory"},t),{locale:e}))}class fme extends Z.Component{constructor(){super(...arguments),this.elRef=Z.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(ks.createElement(Vyt,{key:n.id,customRendering:n}));return ks.createElement("div",{ref:this.elRef},e)}componentDidMount(){const e=new M0t;this.handleCustomRendering=e.handle.bind(e),this.calendar=new zyt(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render();let n;e.subscribe(i=>{const r=Date.now(),s=!n;(s||this.isUpdating||this.isUnmounting||r-n<100?pme:du.flushSync)(()=>{this.setState({customRenderingMap:i},()=>{n=r,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}fme.act=pme;class Vyt extends Z.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,i=typeof n=="function"?n(e.renderProps):n;return du.createPortal(i,e.containerEl)}}function pme(t){t()}var Hyt=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';x6(Hyt);function fT(t,e){let n=[];for(let i=0;i<e;i+=1)n[i]=[];for(let i of t)n[i.row].push(i);return n}function pT(t,e){let n=[];for(let i=0;i<e;i+=1)n[i]=[];for(let i of t)n[i.firstCol].push(i);return n}function Jee(t,e){let n=[];if(t){for(let i=0;i<e;i+=1)n[i]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let i of t.segs)n[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)n[i]=null;return n}const mme=Mi({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function gme(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class vme extends zn{render(){let{props:e}=this;return Ee(Ype,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:mme,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class yme extends zn{render(){let{props:e,context:n}=this,{options:i}=n,{seg:r}=e,s=i.eventTimeFormat||mme,o=Mpe(r,s,n,!0,e.defaultDisplayEventEnd);return Ee(W6,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Tpe(e.seg,n),defaultGenerator:jyt,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function jyt(t){return Ee(yi,null,Ee("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&Ee("div",{className:"fc-event-time"},t.timeText),Ee("div",{className:"fc-event-title"},t.event.title||Ee(yi,null,"")))}class Gyt extends zn{constructor(){super(...arguments),this.compileSegs=Ht(Wyt)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return Ee(Jpe,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return Ee(yi,null,n.map(s=>{let o=s.eventRange.instance.instanceId;return Ee("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:r[o]?"hidden":""}},gme(s)?Ee(yme,Object.assign({seg:s,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Rf(s,e.todayRange))):Ee(vme,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Rf(s,e.todayRange))))}))}})}}function Wyt(t){let e=[],n=[];for(let i of t)e.push(i.seg),i.isVisible||n.push(i.seg);return{allSegs:e,invisibleSegs:n}}const qyt=Mi({week:"narrow"});class $yt extends Eu{constructor(){super(...arguments),this.rootElRef=oo(),this.state={dayNumberId:LR()},this.handleRootEl=e=>{Hd(this.rootElRef,e),Hd(this.props.elRef,e)}}render(){let{context:e,props:n,state:i,rootElRef:r}=this,{options:s,dateEnv:o}=e,{date:a,dateProfile:l}=n;const c=n.showDayNumber&&Yyt(a,l.currentRange,o);return Ee($6,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Xyt,date:a,dateProfile:l,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:c,extraRenderProps:n.extraRenderProps},(d,u)=>Ee("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&Ee(Qpe,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:cP(e,a,"week"),date:a,defaultFormat:qyt}),!u.isDisabled&&(n.showDayNumber||X6(s)||n.forceDayTop)?Ee("div",{className:"fc-daygrid-day-top"},Ee(d,{elTag:"a",elClasses:["fc-daygrid-day-number",c&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},cP(e,a)),{id:i.dayNumberId})})):n.showDayNumber?Ee("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Ee("a",{className:"fc-daygrid-day-number"},"")):void 0,Ee("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,Ee("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},Ee(Gyt,{allDayDate:a,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:r,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),Ee("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function Xyt(t){return t.dayNumberText||Ee(yi,null,"")}function Yyt(t,e,n){const{start:i,end:r}=e,s=Xf(r,-1),o=n.getYear(i),a=n.getMonth(i),l=n.getYear(s),c=n.getMonth(s);return!(o===l&&a===c)&&Boolean(t.valueOf()===i.valueOf()||n.getDay(t)===1&&t.valueOf()<r.valueOf())}function Kyt(t,e,n,i,r,s,o){let a=new Jyt;a.allowReslicing=!0,a.strictOrder=i,e===!0||n===!0?(a.maxCoord=s,a.hiddenConsumes=!0):typeof e=="number"?a.maxStackCnt=e:typeof n=="number"&&(a.maxStackCnt=n,a.hiddenConsumes=!0);let l=[],c=[];for(let v=0;v<t.length;v+=1){let y=t[v],{instanceId:x}=y.eventRange.instance,b=r[x];b!=null?l.push({index:v,thickness:b,span:{start:y.firstCol,end:y.lastCol+1}}):c.push(y)}let d=a.addSegs(l),u=a.toRects(),{singleColPlacements:h,multiColPlacements:f,leftoverMargins:p}=Zyt(u,t,o),m=[],g=[];for(let v of c){f[v.firstCol].push({seg:v,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let y=v.firstCol;y<=v.lastCol;y+=1)h[y].push({seg:dy(v,y,y+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<o.length;v+=1)m.push(0);for(let v of d){let y=t[v.index],x=v.span;f[x.start].push({seg:dy(y,x.start,x.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let b=x.start;b<x.end;b+=1)m[b]+=1,h[b].push({seg:dy(y,b,b+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<o.length;v+=1)g.push(p[v]);return{singleColPlacements:h,multiColPlacements:f,moreCnts:m,moreMarginTops:g}}function Zyt(t,e,n){let i=Qyt(t,n.length),r=[],s=[],o=[];for(let a=0;a<n.length;a+=1){let l=i[a],c=[],d=0,u=0;for(let f of l){let p=e[f.index];c.push({seg:dy(p,a,a+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:f.levelCoord-d}),d=f.levelCoord+f.thickness}let h=[];d=0,u=0;for(let f of l){let p=e[f.index],m=f.span.end-f.span.start>1,g=f.span.start===a;u+=f.levelCoord-d,d=f.levelCoord+f.thickness,m?(u+=f.thickness,g&&h.push({seg:dy(p,f.span.start,f.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:f.levelCoord,marginTop:0})):g&&(h.push({seg:dy(p,f.span.start,f.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:u}),u=0)}r.push(c),s.push(h),o.push(u)}return{singleColPlacements:r,multiColPlacements:s,leftoverMargins:o}}function Qyt(t,e){let n=[];for(let i=0;i<e;i+=1)n.push([]);for(let i of t)for(let r=i.span.start;r<i.span.end;r+=1)n[r].push(i);return n}function dy(t,e,n,i){if(t.firstCol===e&&t.lastCol===n-1)return t;let r=t.eventRange,s=r.range,o=hg(s,{start:i[e].date,end:Fs(i[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:o},isStart:t.isStart&&o.start.valueOf()===s.start.valueOf(),isEnd:t.isEnd&&o.end.valueOf()===s.end.valueOf()})}class Jyt extends Ope{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:i}=this,r=s=>!this.forceHidden[Gm(s)];for(let s=0;s<i.length;s+=1)i[s]=i[s].filter(r);return n}handleInvalidInsertion(e,n,i){const{entriesByLevel:r,forceHidden:s}=this,{touchingEntry:o,touchingLevel:a,touchingLateral:l}=e;if(this.hiddenConsumes&&o){const c=Gm(o);if(!s[c])if(this.allowReslicing){const d=Object.assign(Object.assign({},o),{span:F6(o.span,n.span)}),u=Gm(d);s[u]=!0,r[a][l]=d,this.splitEntry(o,n,i)}else s[c]=!0,i.push(o)}return super.handleInvalidInsertion(e,n,i)}}class xme extends Eu{constructor(){super(...arguments),this.cellElRefs=new gd,this.frameElRefs=new gd,this.fgElRefs=new gd,this.segHarnessRefs=new gd,this.rootElRef=oo(),this.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:i}=this,{options:r}=i,s=e.cells.length,o=pT(e.businessHourSegs,s),a=pT(e.bgEventSegs,s),l=pT(this.getHighlightSegs(),s),c=pT(this.getMirrorSegs(),s),{singleColPlacements:d,multiColPlacements:u,moreCnts:h,moreMarginTops:f}=Kyt(Epe(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,n.eventInstanceHeights,n.maxContentHeight,e.cells),p=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return Ee("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((m,g)=>{let v=this.renderFgSegs(g,e.forPrint?d[g]:u[g],e.todayRange,p),y=this.renderFgSegs(g,ext(c[g],u),e.todayRange,{},Boolean(e.eventDrag),Boolean(e.eventResize),!1);return Ee($yt,{key:m.key,elRef:this.cellElRefs.createRef(m.key),innerElRef:this.frameElRefs.createRef(m.key),dateProfile:e.dateProfile,date:m.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&g===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,moreCnt:h[g],moreMarginTop:f[g],singlePlacements:d[g],fgContentElRef:this.fgElRefs.createRef(m.key),fgContent:Ee(yi,null,Ee(yi,null,v),Ee(yi,null,y)),bgContent:Ee(yi,null,this.renderFillSegs(l[g],"highlight"),this.renderFillSegs(o[g],"non-business"),this.renderFillSegs(a[g],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let i=this.props;this.updateSizing(!xu(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,i,r,s,o,a){let{context:l}=this,{eventSelection:c}=this.props,{framePositions:d}=this.state,u=this.props.cells.length===1,h=s||o||a,f=[];if(d)for(let p of n){let{seg:m}=p,{instanceId:g}=m.eventRange.instance,v=g+":"+e,y=p.isVisible&&!r[g],x=p.isAbsolute,b="",w="";x&&(l.isRtl?(w=0,b=d.lefts[m.lastCol]-d.lefts[m.firstCol]):(b=0,w=d.rights[m.firstCol]-d.rights[m.lastCol])),f.push(Ee("div",{className:"fc-daygrid-event-harness"+(x?" fc-daygrid-event-harness-abs":""),key:v,ref:h?null:this.segHarnessRefs.createRef(v),style:{visibility:y?"":"hidden",marginTop:x?"":p.marginTop,top:x?p.absoluteTop:"",left:b,right:w}},gme(m)?Ee(yme,Object.assign({seg:m,isDragging:s,isSelected:g===c,defaultDisplayEventEnd:u},Rf(m,i))):Ee(vme,Object.assign({seg:m,isDragging:s,isResizing:o,isDateSelecting:a,isSelected:g===c,defaultDisplayEventEnd:u},Rf(m,i)))))}return f}renderFillSegs(e,n){let{isRtl:i}=this.context,{todayRange:r}=this.props,{framePositions:s}=this.state,o=[];if(s)for(let a of e){let l=i?{right:0,left:s.lefts[a.lastCol]-s.lefts[a.firstCol]}:{left:0,right:s.rights[a.firstCol]-s.rights[a.lastCol]};o.push(Ee("div",{key:Ape(a.eventRange),className:"fc-daygrid-bg-harness",style:l},n==="bg-event"?Ee(Kpe,Object.assign({seg:a},Rf(a,r))):Zpe(n)))}return Ee(yi,{},...o)}updateSizing(e){let{props:n,state:i,frameElRefs:r}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let l=n.cells.map(c=>r.currentMap[c.key]);if(l.length){let c=this.rootElRef.current,d=new Zy(c,l,!0,!1);(!i.framePositions||!i.framePositions.similarTo(d))&&this.setState({framePositions:new Zy(c,l,!0,!1)})}}const s=this.state.eventInstanceHeights,o=this.queryEventInstanceHeights(),a=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({eventInstanceHeights:Object.assign(Object.assign({},s),o),maxContentHeight:a?this.computeMaxContentHeight():null})}}queryEventInstanceHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let i in e){let r=Math.round(e[i].getBoundingClientRect().height),s=i.split(":")[0];n[s]=Math.max(n[s]||0,r)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}xme.addStateEquality({eventInstanceHeights:xu});function ext(t,e){if(!t.length)return[];let n=txt(e);return t.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:n[i.eventRange.instance.instanceId],marginTop:0}))}function txt(t){let e={};for(let n of t)for(let i of n)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}class nxt extends Eu{constructor(){super(...arguments),this.splitBusinessHourSegs=Ht(fT),this.splitBgEventSegs=Ht(fT),this.splitFgEventSegs=Ht(fT),this.splitDateSelectionSegs=Ht(fT),this.splitEventDrag=Ht(Jee),this.splitEventResize=Ht(Jee),this.rowRefs=new gd}render(){let{props:e,context:n}=this,i=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,i),s=this.splitBgEventSegs(e.bgEventSegs,i),o=this.splitFgEventSegs(e.fgEventSegs,i),a=this.splitDateSelectionSegs(e.dateSelectionSegs,i),l=this.splitEventDrag(e.eventDrag,i),c=this.splitEventResize(e.eventResize,i),d=i>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return Ee(HS,{unit:"day"},(u,h)=>Ee(yi,null,e.cells.map((f,p)=>Ee(xme,{ref:this.rowRefs.createRef(p),key:f.length?f[0].date.toISOString():p,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:h,dateProfile:e.dateProfile,cells:f,renderIntro:e.renderRowIntro,businessHourSegs:r[p],eventSelection:e.eventSelection,bgEventSegs:s[p].filter(ixt),fgEventSegs:o[p],dateSelectionSegs:a[p],eventDrag:l[p],eventResize:c[p],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){const e=this.rowRefs.currentMap[0].getCellEls()[0];this.rootEl=e?e.closest(".fc-daygrid-body"):null,this.rootEl&&this.context.registerInteractiveComponent(this,{el:this.rootEl,isHitComboAllowed:this.props.isHitComboAllowed})}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Zy(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Zy(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:i,rowPositions:r}=this,s=i.leftToIndex(e),o=r.topToIndex(n);if(o!=null&&s!=null){let a=this.props.cells[o][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,s),allDay:!0},a.extraDateSpan),dayEl:this.getCellEl(o,s),rect:{left:i.lefts[s],right:i.rights[s],top:r.tops[o],bottom:r.bottoms[o]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let i=this.props.cells[e][n].date,r=Fs(i,1);return{start:i,end:r}}}function ixt(t){return t.eventRange.def.allDay}class rxt extends Eu{constructor(){super(...arguments),this.elRef=oo(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:i,expandRows:r}=e,s=i===!0||n===!0;s&&!r&&(s=!1,n=null,i=null);let o=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return Ee("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},Ee("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,Ee("tbody",{role:"presentation"},Ee(nxt,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=sxt(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),i=n.closest(".fc-scroller"),r=e.getBoundingClientRect().top-n.getBoundingClientRect().top;i.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}function sxt(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${Zmt(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${A6(e.currentDate)}"]`)),n}class oxt extends Vpe{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class bme extends Eu{constructor(){super(...arguments),this.slicer=new oxt,this.tableRef=oo()}render(){let{props:e,context:n}=this;return Ee(rxt,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class axt extends bpe{buildRenderRange(e,n,i){let r=super.buildRenderRange(e,n,i),{props:s}=this;return lxt({currentRange:r,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function lxt(t){let{dateEnv:e,currentRange:n}=t,{start:i,end:r}=n,s;if(t.snapToWeek&&(i=e.startOfWeek(i),s=e.startOfWeek(r),s.valueOf()!==r.valueOf()&&(r=Aee(s,1))),t.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(Fs(n.end,-1))),a=Math.ceil(Umt(o,r));r=Aee(r,6-a)}return{start:i,end:r}}class cxt extends Eu{constructor(){super(...arguments),this.headerElRef=oo()}renderSimpleLayout(e,n){let{props:i,context:r}=this,s=[],o=dP(r.options);return e&&s.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),Ee(hP,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},Ee(G6,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,n,i,r){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:o,context:a}=this,l=!o.forPrint&&dP(a.options),c=!o.forPrint&&Xpe(a.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),c&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:D4}]}),Ee(hP,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},Ee(s,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:i,minWidth:r}]}],sections:d}))}}class uxt extends cxt{constructor(){super(...arguments),this.buildDayTableModel=Ht(dxt),this.headerRef=oo(),this.tableRef=oo()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:i}=this,r=this.buildDayTableModel(i.dateProfile,n),s=e.dayHeaders&&Ee(zpe,{ref:this.headerRef,dateProfile:i.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),o=a=>Ee(bme,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:r,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:a.tableColGroupNode,tableMinWidth:a.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:a.clientWidth,clientHeight:a.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,o,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,o)}}function dxt(t,e){let n=new Fpe(t.renderRange,e);return new Upe(n,/year|month|week/.test(t.currentRangeUnit))}var hxt=th({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:uxt,dateProfileGeneratorClass:axt},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}}),fxt='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';x6(fxt);class pxt extends Lgt{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?cvt(e)?["timed","allDay"]:["allDay"]:["timed"]}}const mxt=Mi({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function wme(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return Ee(eh.Consumer,null,n=>{if(!t.isLabeled)return Ee("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:i,options:r,viewApi:s}=n,o=r.slotLabelFormat==null?mxt:Array.isArray(r.slotLabelFormat)?Mi(r.slotLabelFormat[0]):Mi(r.slotLabelFormat),a={level:0,time:t.time,date:i.toDate(t.date),view:s,text:i.format(t.date,o)};return Ee(Aa,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:a,generatorName:"slotLabelContent",customGenerator:r.slotLabelContent,defaultGenerator:gxt,classNameGenerator:r.slotLabelClassNames,didMount:r.slotLabelDidMount,willUnmount:r.slotLabelWillUnmount},l=>Ee("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},Ee(l,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function gxt(t){return t.text}class vxt extends zn{render(){return this.props.slatMetas.map(e=>Ee("tr",{key:e.key},Ee(wme,Object.assign({},e))))}}const yxt=Mi({week:"short"}),xxt=5;class bxt extends Eu{constructor(){super(...arguments),this.allDaySplitter=new pxt,this.headerElRef=oo(),this.rootElRef=oo(),this.scrollerElRef=oo(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:i}=this.context,{dateProfile:r}=this.props,s=r.renderRange,a=Dg(s.start,s.end)===1?cP(this.context,s.start,"week"):{};return i.weekNumbers&&e==="day"?Ee(Qpe,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:s.start,defaultFormat:yxt},l=>Ee("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},Ee(l,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:a}))):Ee("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},Ee("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:i}=this.context,r={text:n.allDayText,view:i};return Ee(Aa,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:r,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:wxt,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},s=>Ee("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},Ee(s,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,i){let{context:r,props:s}=this,o=[],a=dP(r.options);return e&&o.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(o.push({type:"body",key:"all-day",chunk:{content:n}}),o.push({type:"body",key:"all-day-divider",outerContent:Ee("tr",{role:"presentation",className:"fc-scrollgrid-section"},Ee("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(r.options.expandRows),chunk:{scrollerElRef:this.scrollerElRef,content:i}}),Ee(hP,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:r.viewSpec},Ee(G6,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,n,i,r,s,o,a){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{context:c,props:d}=this,u=!d.forPrint&&dP(c.options),h=!d.forPrint&&Xpe(c.options),f=[];e&&f.push({type:"header",key:"header",isSticky:u,syncRowHeights:!0,chunks:[{key:"axis",rowContent:m=>Ee("tr",{role:"presentation"},this.renderHeadAxis("day",m.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(f.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:m=>Ee("tr",{role:"presentation"},this.renderTableRowAxis(m.rowSyncHeights[0]))},{key:"cols",content:n}]}),f.push({key:"all-day-divider",type:"body",outerContent:Ee("tr",{role:"presentation",className:"fc-scrollgrid-section"},Ee("td",{colSpan:2,className:"fc-timegrid-divider "+c.theme.getClass("tableCellShaded")}))}));let p=c.options.nowIndicator;return f.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(c.options.expandRows),chunks:[{key:"axis",content:m=>Ee("div",{className:"fc-timegrid-axis-chunk"},Ee("table",{"aria-hidden":!0,style:{height:m.expandRows?m.clientHeight:""}},m.tableColGroupNode,Ee("tbody",null,Ee(vxt,{slatMetas:o}))),Ee("div",{className:"fc-timegrid-now-indicator-container"},Ee(HS,{unit:p?"minute":"day"},g=>{let v=p&&a&&a.safeComputeTop(g);return typeof v=="number"?Ee(q6,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:v},isAxis:!0,date:g}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:i}]}),h&&f.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:D4},{key:"cols",content:D4}]}),Ee(hP,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:c.viewSpec},Ee(l,{liquid:!d.isHeightAuto&&!d.forPrint,forPrint:d.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:s}]}],sections:f}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=xxt),{dayMaxEvents:e,dayMaxEventRows:n}}}function wxt(t){return t.text}class _xt{constructor(e,n,i){this.positions=e,this.dateProfile=n,this.slotDuration=i}safeComputeTop(e){let{dateProfile:n}=this;if(Ad(n.currentRange,e)){let i=ui(e),r=e.valueOf()-i.valueOf();if(r>=Ql(n.slotMinTime)&&r<Ql(n.slotMaxTime))return this.computeTimeTop(Sn(r))}return null}computeDateTop(e,n){return n||(n=ui(e)),this.computeTimeTop(Sn(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:i}=this,r=n.els.length,s=(e.milliseconds-Ql(i.slotMinTime))/Ql(this.slotDuration),o,a;return s=Math.max(0,s),s=Math.min(r,s),o=Math.floor(s),o=Math.min(o,r-1),a=s-o,n.tops[o]+n.getHeight(o)*a}}class Sxt extends zn{render(){let{props:e,context:n}=this,{options:i}=n,{slatElRefs:r}=e;return Ee("tbody",null,e.slatMetas.map((s,o)=>{let a={time:s.time,date:n.dateEnv.toDate(s.date),view:n.viewApi};return Ee("tr",{key:s.key,ref:r.createRef(s.key)},e.axis&&Ee(wme,Object.assign({},s)),Ee(Aa,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:a,generatorName:"slotLaneContent",customGenerator:i.slotLaneContent,classNameGenerator:i.slotLaneClassNames,didMount:i.slotLaneDidMount,willUnmount:i.slotLaneWillUnmount}))}))}}class Ext extends zn{constructor(){super(...arguments),this.rootElRef=oo(),this.slatElRefs=new gd}render(){let{props:e,context:n}=this;return Ee("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},Ee("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,Ee(Sxt,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new _xt(new Zy(this.rootElRef.current,Mxt(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function Mxt(t,e){return e.map(n=>t[n.key])}function bb(t,e){let n=[],i;for(i=0;i<e;i+=1)n.push([]);if(t)for(i=0;i<t.length;i+=1)n[t[i].col].push(t[i]);return n}function ete(t,e){let n=[];if(t){for(let i=0;i<e;i+=1)n[i]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let i of t.segs)n[i.col].segs.push(i)}else for(let i=0;i<e;i+=1)n[i]=null;return n}class Axt extends zn{render(){let{props:e}=this;return Ee(Jpe,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>Sme(e.hiddenSegs,e),defaultGenerator:Txt,forceTimed:!0},n=>Ee(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function Txt(t){return t.shortText}function Cxt(t,e,n){let i=new Ope;e!=null&&(i.strictOrder=e),n!=null&&(i.maxStackCnt=n);let r=i.addSegs(t),s=Tvt(r),o=Pxt(i);return o=Lxt(o,1),{segRects:Ixt(o),hiddenGroups:s}}function Pxt(t){const{entriesByLevel:e}=t,n=Z6((i,r)=>i+":"+r,(i,r)=>{let s=Oxt(t,i,r),o=tte(s,n),a=e[i][r];return[Object.assign(Object.assign({},a),{nextLevelNodes:o[0]}),a.thickness+o[1]]});return tte(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function tte(t,e){if(!t)return[[],0];let{level:n,lateralStart:i,lateralEnd:r}=t,s=i,o=[];for(;s<r;)o.push(e(n,s)),s+=1;return o.sort(Dxt),[o.map(Rxt),o[0][1]]}function Dxt(t,e){return e[1]-t[1]}function Rxt(t){return t[0]}function Oxt(t,e,n){let{levelCoords:i,entriesByLevel:r}=t,s=r[e][n],o=i[e]+s.thickness,a=i.length,l=e;for(;l<a&&i[l]<o;l+=1);for(;l<a;l+=1){let c=r[l],d,u=C4(c,s.span.start,T4),h=u[0]+u[1],f=h;for(;(d=c[f])&&d.span.start<s.span.end;)f+=1;if(h<f)return{level:l,lateralStart:h,lateralEnd:f}}return null}function Lxt(t,e){const n=Z6((i,r,s)=>Gm(i),(i,r,s)=>{let{nextLevelNodes:o,thickness:a}=i,l=a+s,c=a/l,d,u=[];if(!o.length)d=e;else for(let f of o)if(d===void 0){let p=n(f,r,l);d=p[0],u.push(p[1])}else{let p=n(f,d,0);u.push(p[1])}let h=(d-r)*c;return[d-h,Object.assign(Object.assign({},i),{thickness:h,nextLevelNodes:u})]});return t.map(i=>n(i,0,0)[1])}function Ixt(t){let e=[];const n=Z6((r,s,o)=>Gm(r),(r,s,o)=>{let a=Object.assign(Object.assign({},r),{levelCoord:s,stackDepth:o,stackForward:0});return e.push(a),a.stackForward=i(r.nextLevelNodes,s+r.thickness,o+1)+1});function i(r,s,o){let a=0;for(let l of r)a=Math.max(n(l,s,o),a);return a}return i(t,0,0),e}function Z6(t,e){const n={};return(...i)=>{let r=t(...i);return r in n?n[r]:n[r]=e(...i)}}function nte(t,e,n=null,i=0){let r=[];if(n)for(let s=0;s<t.length;s+=1){let o=t[s],a=n.computeDateTop(o.start,e),l=Math.max(a+(i||0),n.computeDateTop(o.end,e));r.push({start:Math.round(a),end:Math.round(l)})}return r}function kxt(t,e,n,i){let r=[],s=[];for(let c=0;c<t.length;c+=1){let d=e[c];d?r.push({index:c,thickness:1,span:d}):s.push(t[c])}let{segRects:o,hiddenGroups:a}=Cxt(r,n,i),l=[];for(let c of o)l.push({seg:t[c.index],rect:c});for(let c of s)l.push({seg:c,rect:null});return{segPlacements:l,hiddenGroups:a}}const Nxt=Mi({hour:"numeric",minute:"2-digit",meridiem:!1});class _me extends zn{render(){return Ee(Ype,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:Nxt}))}}class Bxt extends zn{constructor(){super(...arguments),this.sortEventSegs=Ht(Epe)}render(){let{props:e,context:n}=this,{options:i}=n,r=i.selectMirror,s=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||r&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},a=this.sortEventSegs(e.fgEventSegs,i.eventOrder);return Ee($6,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},l=>Ee("div",{className:"fc-timegrid-col-frame"},Ee("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),Ee("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(a,o,!1,!1,!1)),Ee("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},Boolean(e.eventDrag),Boolean(e.eventResize),Boolean(r),"mirror")),Ee("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),X6(i)&&Ee(l,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,i,r,s,o){let{props:a}=this;return a.forPrint?Sme(e,a):this.renderPositionedFgSegs(e,n,i,r,s,o)}renderPositionedFgSegs(e,n,i,r,s,o){let{eventMaxStack:a,eventShortHeight:l,eventOrderStrict:c,eventMinHeight:d}=this.context.options,{date:u,slatCoords:h,eventSelection:f,todayRange:p,nowDate:m}=this.props,g=i||r||s,v=nte(e,u,h,d),{segPlacements:y,hiddenGroups:x}=kxt(e,v,c,a);return Ee(yi,null,this.renderHiddenGroups(x,e),y.map(b=>{let{seg:w,rect:E}=b,A=w.eventRange.instance.instanceId,S=g||Boolean(!n[A]&&E),C=aN(E&&E.span),T=!g&&E?this.computeSegHStyle(E):{left:0,right:0},P=Boolean(E)&&E.stackForward>0,R=Boolean(E)&&E.span.end-E.span.start<l;return Ee("div",{className:"fc-timegrid-event-harness"+(P?" fc-timegrid-event-harness-inset":""),key:o||A,style:Object.assign(Object.assign({visibility:S?"":"hidden"},C),T)},Ee(_me,Object.assign({seg:w,isDragging:i,isResizing:r,isDateSelecting:s,isSelected:A===f,isShort:R},Rf(w,p,m))))}))}renderHiddenGroups(e,n){let{extraDateSpan:i,dateProfile:r,todayRange:s,nowDate:o,eventSelection:a,eventDrag:l,eventResize:c}=this.props;return Ee(yi,null,e.map(d=>{let u=aN(d.span),h=zxt(d.entries,n);return Ee(Axt,{key:ape(eme(h)),hiddenSegs:h,top:u.top,bottom:u.bottom,extraDateSpan:i,dateProfile:r,todayRange:s,nowDate:o,eventSelection:a,eventDrag:l,eventResize:c})}))}renderFillSegs(e,n){let{props:i,context:r}=this,o=nte(e,i.date,i.slatCoords,r.options.eventMinHeight).map((a,l)=>{let c=e[l];return Ee("div",{key:Ape(c.eventRange),className:"fc-timegrid-bg-harness",style:aN(a)},n==="bg-event"?Ee(Kpe,Object.assign({seg:c},Rf(c,i.todayRange,i.nowDate))):Zpe(n))});return Ee(yi,null,o)}renderNowIndicator(e){let{slatCoords:n,date:i}=this.props;return n?e.map((r,s)=>Ee(q6,{key:s,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(r.start,i)},isAxis:!1,date:i})):null}computeSegHStyle(e){let{isRtl:n,options:i}=this.context,r=i.slotEventOverlap,s=e.levelCoord,o=e.levelCoord+e.thickness,a,l;r&&(o=Math.min(1,s+(o-s)*2)),n?(a=1-o,l=s):(a=s,l=1-o);let c={zIndex:e.stackDepth+1,left:a*100+"%",right:l*100+"%"};return r&&!e.stackForward&&(c[n?"marginLeft":"marginRight"]=10*2),c}}function Sme(t,{todayRange:e,nowDate:n,eventSelection:i,eventDrag:r,eventResize:s}){let o=(r?r.affectedInstances:null)||(s?s.affectedInstances:null)||{};return Ee(yi,null,t.map(a=>{let l=a.eventRange.instance.instanceId;return Ee("div",{key:l,style:{visibility:o[l]?"hidden":""}},Ee(_me,Object.assign({seg:a,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===i,isShort:!1},Rf(a,e,n))))}))}function aN(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function zxt(t,e){return t.map(n=>e[n.index])}class Fxt extends zn{constructor(){super(...arguments),this.splitFgEventSegs=Ht(bb),this.splitBgEventSegs=Ht(bb),this.splitBusinessHourSegs=Ht(bb),this.splitNowIndicatorSegs=Ht(bb),this.splitDateSelectionSegs=Ht(bb),this.splitEventDrag=Ht(ete),this.splitEventResize=Ht(ete),this.rootElRef=oo(),this.cellElRefs=new gd}render(){let{props:e,context:n}=this,i=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),r=e.cells.length,s=this.splitFgEventSegs(e.fgEventSegs,r),o=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitBusinessHourSegs(e.businessHourSegs,r),l=this.splitNowIndicatorSegs(e.nowIndicatorSegs,r),c=this.splitDateSelectionSegs(e.dateSelectionSegs,r),d=this.splitEventDrag(e.eventDrag,r),u=this.splitEventResize(e.eventResize,r);return Ee("div",{className:"fc-timegrid-cols",ref:this.rootElRef},Ee("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,Ee("tbody",{role:"presentation"},Ee("tr",{role:"row"},e.axis&&Ee("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},Ee("div",{className:"fc-timegrid-col-frame"},Ee("div",{className:"fc-timegrid-now-indicator-container"},typeof i=="number"&&Ee(q6,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:i},isAxis:!0,date:e.nowDate})))),e.cells.map((h,f)=>Ee(Bxt,{key:h.key,elRef:this.cellElRefs.createRef(h.key),dateProfile:e.dateProfile,date:h.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:h.extraRenderProps,extraDataAttrs:h.extraDataAttrs,extraClassNames:h.extraClassNames,extraDateSpan:h.extraDateSpan,fgEventSegs:s[f],bgEventSegs:o[f],businessHourSegs:a[f],nowIndicatorSegs:l[f],dateSelectionSegs:c[f],eventDrag:d[f],eventResize:u[f],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new Zy(this.rootElRef.current,Uxt(this.cellElRefs.currentMap,e.cells),!0,!1))}}function Uxt(t,e){return e.map(n=>t[n.key])}class Vxt extends Eu{constructor(){super(...arguments),this.processSlotOptions=Ht(Hxt),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:i}=this.state;if(n&&i){if(e.time){let r=i.computeTimeTop(e.time);r=Math.ceil(r),r&&(r+=1),n(r)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return Ee("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},Ee(Ext,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),Ee(Fxt,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:i,options:r}=this.context,{colCoords:s}=this,{dateProfile:o}=this.props,{slatCoords:a}=this.state,{snapDuration:l,snapsPerSlot:c}=this.processSlotOptions(this.props.slotDuration,r.snapDuration),d=s.leftToIndex(e),u=a.positions.topToIndex(n);if(d!=null&&u!=null){let h=this.props.cells[d],f=a.positions.tops[u],p=a.positions.getHeight(u),m=(n-f)/p,g=Math.floor(m*c),v=u*c+g,y=this.props.cells[d].date,x=_4(o.slotMinTime,Omt(l,v)),b=i.add(y,x),w=i.add(b,l);return{dateProfile:o,dateSpan:Object.assign({range:{start:b,end:w},allDay:!1},h.extraDateSpan),dayEl:s.els[d],rect:{left:s.lefts[d],right:s.rights[d],top:f,bottom:f+p},layer:0}}return null}}function Hxt(t,e){let n=e||t,i=S6(t,n);return i===null&&(n=t,i=1),{snapDuration:n,snapsPerSlot:i}}class jxt extends Vpe{sliceRange(e,n){let i=[];for(let r=0;r<n.length;r+=1){let s=hg(e,n[r]);s&&i.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:r})}return i}}class Gxt extends Eu{constructor(){super(...arguments),this.buildDayRanges=Ht(Wxt),this.slicer=new jxt,this.timeColsRef=oo()}render(){let{props:e,context:n}=this,{dateProfile:i,dayTableModel:r}=e,{nowIndicator:s,nextDayThreshold:o}=n.options,a=this.buildDayRanges(r,i,n.dateEnv);return Ee(HS,{unit:s?"minute":"day"},(l,c)=>Ee(Vxt,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,i,null,n,a),{forPrint:e.forPrint,axis:e.axis,dateProfile:i,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:r.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:l,nowIndicatorSegs:s&&this.slicer.sliceNowDate(l,i,o,n,a),todayRange:c,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function Wxt(t,e,n){let i=[];for(let r of t.headerDates)i.push({start:n.add(r,e.slotMinTime),end:n.add(r,e.slotMaxTime)});return i}const ite=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function qxt(t,e,n,i,r){let s=new Date(0),o=t,a=Sn(0),l=n||$xt(i),c=[];for(;Ql(o)<Ql(e);){let d=r.add(s,o),u=S6(a,l)!==null;c.push({date:d,time:o,key:d.toISOString(),isoTimeStr:Qmt(d),isLabeled:u}),o=_4(o,i),a=_4(a,i)}return c}function $xt(t){let e,n,i;for(e=ite.length-1;e>=0;e-=1)if(n=Sn(ite[e]),i=S6(n,t),i!==null&&i>1)return n;return t}class Xxt extends bxt{constructor(){super(...arguments),this.buildTimeColsModel=Ht(Yxt),this.buildSlatMetas=Ht(qxt)}render(){let{options:e,dateEnv:n,dateProfileGenerator:i}=this.context,{props:r}=this,{dateProfile:s}=r,o=this.buildTimeColsModel(s,i),a=this.allDaySplitter.splitProps(r),l=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:c}=e,d=!c,u=c,h=e.dayHeaders&&Ee(zpe,{dates:o.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:d?this.renderHeadAxis:null}),f=e.allDaySlot!==!1&&(m=>Ee(bme,Object.assign({},a.allDay,{dateProfile:s,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:m.tableMinWidth,colGroupNode:m.tableColGroupNode,renderRowIntro:d?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:m.clientWidth,clientHeight:m.clientHeight,forPrint:r.forPrint},this.getAllDayMaxEventProps()))),p=m=>Ee(Gxt,Object.assign({},a.timed,{dayTableModel:o,dateProfile:s,axis:d,slotDuration:e.slotDuration,slatMetas:l,forPrint:r.forPrint,tableColGroupNode:m.tableColGroupNode,tableMinWidth:m.tableMinWidth,clientWidth:m.clientWidth,clientHeight:m.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:m.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return u?this.renderHScrollLayout(h,f,p,o.colCnt,c,l,this.state.slatCoords):this.renderSimpleLayout(h,f,p)}}function Yxt(t,e){let n=new Fpe(t.renderRange,e);return new Upe(n,!1)}const Kxt={allDaySlot:Boolean};var Zxt=th({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:Kxt,views:{timeGrid:{component:Xxt,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});V6.touchMouseIgnoreWait=500;let O4=0,fP=0,L4=!1;class Eme{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&Qxt(n)&&this.tryStart(n)){let i=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let i=this.createEventFromMouse(n);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let i=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let r=n.target;this.shouldIgnoreMove||r.addEventListener("touchmove",this.handleTouchMove),r.addEventListener("touchend",this.handleTouchEnd),r.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let i=this.createEventFromTouch(n);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=n=>{if(this.isDragging){let i=n.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,Jxt()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let i=window.pageXOffset-this.prevScrollX+this.prevPageX,r=window.pageYOffset-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:r,deltaX:i-this.origPageX,deltaY:r-this.origPageY})}},this.containerEl=e,this.emitter=new BR,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),e1t()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),t1t()}tryStart(e){let n=this.querySubjectEl(e),i=e.target;return n&&(!this.handleSelector||Is(i,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){L4=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Is(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return O4||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(L4=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let i=0,r=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:r}}createEventFromTouch(e,n){let i=e.touches,r,s,o=0,a=0;return i&&i.length?(r=i[0].pageX,s=i[0].pageY):(r=e.pageX,s=e.pageY),n?(this.origPageX=r,this.origPageY=s):(o=r-this.origPageX,a=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:s,deltaX:o,deltaY:a}}}function Qxt(t){return t.button===0&&!t.ctrlKey}function Jxt(){O4+=1,setTimeout(()=>{O4-=1},V6.touchMouseIgnoreWait)}function e1t(){fP+=1,fP===1&&window.addEventListener("touchmove",Mme,{passive:!1})}function t1t(){fP-=1,fP||window.removeEventListener("touchmove",Mme,{passive:!1})}function Mme(t){L4&&t.preventDefault()}class n1t{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.pageXOffset,this.origScreenY=i-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.pageXOffset-this.origScreenX,this.deltaY=n-window.pageYOffset-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let i=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,n){let i=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();i.style.transition="top "+n+"ms,left "+n+"ms",Ew(i,{left:r.left,top:r.top}),vmt(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(b6(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Ew(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.classList.add("fc-event-dragging"),Ew(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class Ame extends N6{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Tme extends Ame{constructor(e,n){super(new Zgt(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return qgt(this.scrollController.el)}}class i1t extends Ame{constructor(e){super(new Qgt,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const rte=typeof performance=="function"?performance.now:Date.now;class r1t{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.pageXOffset,this.pointerScreenY+window.pageYOffset);if(e){let n=rte();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let i=e-window.pageXOffset,r=n-window.pageYOffset,s=this.pointerScreenY===null?0:r-this.pointerScreenY,o=this.pointerScreenX===null?0:i-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(rte()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:i}=e,{edgeThreshold:r}=this,s=r-e.distance,o=s*s/(r*r)*this.maxVelocity*n,a=1;switch(e.name){case"left":a=-1;case"right":i.setScrollLeft(i.getScrollLeft()+o*a);break;case"top":a=-1;case"bottom":i.setScrollTop(i.getScrollTop()+o*a);break}}computeBestEdge(e,n){let{edgeThreshold:i}=this,r=null,s=this.scrollCaches||[];for(let o of s){let a=o.clientRect,l=e-a.left,c=a.right-e,d=n-a.top,u=a.bottom-n;l>=0&&c>=0&&d>=0&&u>=0&&(d<=i&&this.everMovedUp&&o.canScrollUp()&&(!r||r.distance>d)&&(r={scrollCache:o,name:"top",distance:d}),u<=i&&this.everMovedDown&&o.canScrollDown()&&(!r||r.distance>u)&&(r={scrollCache:o,name:"bottom",distance:u}),l<=i&&this.everMovedLeft&&o.canScrollLeft()&&(!r||r.distance>l)&&(r={scrollCache:o,name:"left",distance:l}),c<=i&&this.everMovedRight&&o.canScrollRight()&&(!r||r.distance>c)&&(r={scrollCache:o,name:"right",distance:c}))}return r}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new i1t(!1):new Tme(n,!1))}queryScrollEls(e){let n=[];for(let i of this.scrollQuery)typeof i=="object"?n.push(i):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return n}}class jS extends Dvt{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=r=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,ymt(document.body),bmt(document.body),r.isTouch||r.origEvent.preventDefault(),this.emitter.trigger("pointerdown",r),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(r.subjectEl,r.pageX,r.pageY),this.startDelay(r),this.minDistance||this.handleDistanceSurpassed(r)))},this.onPointerMove=r=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",r),!this.isDistanceSurpassed){let s=this.minDistance,o,{deltaX:a,deltaY:l}=r;o=a*a+l*l,o>=s*s&&this.handleDistanceSurpassed(r)}this.isDragging&&(r.origEvent.type!=="scroll"&&(this.mirror.handleMove(r.pageX,r.pageY),this.autoScroller.handleMove(r.pageX,r.pageY)),this.emitter.trigger("dragmove",r))}},this.onPointerUp=r=>{this.isInteracting&&(this.isInteracting=!1,xmt(document.body),wmt(document.body),this.emitter.trigger("pointerup",r),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(r)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new Eme(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),n&&(i.selector=n),this.mirror=new n1t,this.autoScroller=new r1t}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class s1t{constructor(e){this.origRect=k6(e),this.scrollCaches=ype(e).map(n=>new Tme(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let i={left:e,top:n};for(let r of this.scrollCaches)if(!o1t(r.getEventTarget())&&!Cgt(i,r.clientRect))return!1;return!0}}function o1t(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class zR{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:r}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(r.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):r.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new BR}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},i=n,r=e.subjectEl,s;r instanceof HTMLElement&&(s=k6(r),i=Pgt(i,s));let o=this.initialHit=this.queryHitForOffset(i.left,i.top);if(o){if(this.useSubjectCenter&&s){let a=ppe(s,o.rect);a&&(i=Dgt(a))}this.coordAdjust=Rgt(i,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!FR(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=Vd(this.droppableStore,e=>(e.component.prepareHits(),new s1t(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:i,offsetTrackers:r}=this,s=null;for(let o in i){let a=i[o].component,l=r[o];if(l&&l.isWithinClipping(e,n)){let c=l.computeLeft(),d=l.computeTop(),u=e-c,h=n-d,{origRect:f}=l,p=f.right-f.left,m=f.bottom-f.top;if(u>=0&&u<p&&h>=0&&h<m){let g=a.queryHit(u,h,p,m);g&&NR(g.dateProfile.activeRange,g.dateSpan.range)&&(!s||g.layer>s.layer)&&(g.componentId=o,g.context=a.context,g.rect.left+=c,g.rect.right+=c,g.rect.top+=d,g.rect.bottom+=d,s=g)}}}return s}}function FR(t,e){return!t&&!e?!0:Boolean(t)!==Boolean(e)?!1:yvt(t.dateSpan,e.dateSpan)}function Cme(t,e){let n={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(n,i(t,e));return Object.assign(n,a1t(t,e.dateEnv)),n}function a1t(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class l1t extends Ux{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:r}=this,s=i.origEvent.target;r.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=i=>{let{component:r}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:o,finalHit:a}=this.hitDragging;if(o&&a&&FR(o,a)){let{context:l}=r,c=Object.assign(Object.assign({},Cme(o.dateSpan,l)),{dayEl:o.dayEl,jsEvent:i.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",c)}}},this.dragging=new jS(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new zR(this.dragging,U6(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class c1t extends Ux{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:a,dragging:l}=this,{options:c}=a.context,d=c.selectable&&a.isValidDateDownEl(o.origEvent.target);l.setIgnoreMove(!d),l.delay=o.isTouch?u1t(a):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,a)=>{let{context:l}=this.component,c=null,d=!1;if(o){let u=this.hitDragging.initialHit;o.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,o)||(c=d1t(u,o,l.pluginHooks.dateSelectionTransformers)),(!c||!qvt(c,o.dateProfile,l))&&(d=!0,c=null)}c?l.dispatch({type:"SELECT_DATES",selection:c}):a||l.dispatch({type:"UNSELECT_DATES"}),d?w6():_6(),a||(this.dragSelection=c)},this.handlePointerUp=o=>{this.dragSelection&&(wpe(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:i}=n.context,r=this.dragging=new jS(e.el);r.touchScrollAllowed=!1,r.minDistance=i.selectMinDistance||0,r.autoScroller.isEnabled=i.dragScroll;let s=this.hitDragging=new zR(this.dragging,U6(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function u1t(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function d1t(t,e,n){let i=t.dateSpan,r=e.dateSpan,s=[i.range.start,i.range.end,r.range.start,r.range.end];s.sort(Amt);let o={};for(let a of n){let l=a(t,e);if(l===!1)return null;l&&Object.assign(o,l)}return o.range={start:s[0],end:s[3]},o.allDay=i.allDay,o}class GS extends Ux{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let a=o.origEvent.target,{component:l,dragging:c}=this,{mirror:d}=c,{options:u}=l.context,h=l.context;this.subjectEl=o.subjectEl;let f=this.subjectSeg=Qy(o.subjectEl),m=(this.eventRange=f.eventRange).instance.instanceId;this.relevantEvents=D6(h.getCurrentData().eventStore,m),c.minDistance=o.isTouch?0:u.eventDragMinDistance,c.delay=o.isTouch&&m!==l.props.eventSelection?f1t(l):null,u.fixedMirrorParent?d.parentNode=u.fixedMirrorParent:d.parentNode=Is(a,".fc"),d.revertDuration=u.dragRevertDuration;let g=l.isValidSegDownEl(a)&&!Is(a,".fc-event-resizer");c.setIgnoreMove(!g),this.isDragging=g&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let a=this.component.context,l=this.eventRange,c=l.instance.instanceId;o.isTouch?c!==this.component.props.eventSelection&&a.dispatch({type:"SELECT_EVENT",eventInstanceId:c}):a.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(a.calendarApi.unselect(o),a.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Ai(a,l.def,l.instance),jsEvent:o.origEvent,view:a.viewApi}))},this.handleHitUpdate=(o,a)=>{if(!this.isDragging)return;let l=this.relevantEvents,c=this.hitDragging.initialHit,d=this.component.context,u=null,h=null,f=null,p=!1,m={affectedEvents:l,mutatedEvents:xa(),isEvent:!0};if(o){u=o.context;let g=u.options;d===u||g.editable&&g.droppable?(h=h1t(c,o,u.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(f=z6(l,u.getCurrentData().eventUiBases,h,u),m.mutatedEvents=f,Gpe(m,o.dateProfile,u)||(p=!0,h=null,f=null,m.mutatedEvents=xa()))):u=null}this.displayDrag(u,m),p?w6():_6(),a||(d===u&&FR(c,o)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=u,this.validMutation=h,this.mutatedRelevantEvents=f)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let a=this.component.context,l=a.viewApi,{receivingContext:c,validMutation:d}=this,u=this.eventRange.def,h=this.eventRange.instance,f=new Ai(a,u,h),p=this.relevantEvents,m=this.mutatedRelevantEvents,{finalHit:g}=this.hitDragging;if(this.clearDrag(),a.emitter.trigger("eventDragStop",{el:this.subjectEl,event:f,jsEvent:o.origEvent,view:l}),d){if(c===a){let v=new Ai(a,m.defs[u.defId],h?m.instances[h.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:m});let y={oldEvent:f,event:v,relatedEvents:jm(m,a,h),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:p})}},x={};for(let b of a.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(x,b(d,a));a.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},y),x),{el:o.subjectEl,delta:d.datesDelta,jsEvent:o.origEvent,view:l})),a.emitter.trigger("eventChange",y)}else if(c){let v={event:f,relatedEvents:jm(p,a,h),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:p})}};a.emitter.trigger("eventLeave",Object.assign(Object.assign({},v),{draggedEl:o.subjectEl,view:l})),a.dispatch({type:"REMOVE_EVENTS",eventStore:p}),a.emitter.trigger("eventRemove",v);let y=m.defs[u.defId],x=m.instances[h.instanceId],b=new Ai(c,y,x);c.dispatch({type:"MERGE_EVENTS",eventStore:m});let w={event:b,relatedEvents:jm(m,c,x),revert(){c.dispatch({type:"REMOVE_EVENTS",eventStore:m})}};c.emitter.trigger("eventAdd",w),o.isTouch&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),c.emitter.trigger("drop",Object.assign(Object.assign({},Cme(g.dateSpan,c)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:g.context.viewApi})),c.emitter.trigger("eventReceive",Object.assign(Object.assign({},w),{draggedEl:o.subjectEl,view:g.context.viewApi}))}}else a.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:i}=n.context,r=this.dragging=new jS(e.el);r.pointer.selector=GS.SELECTOR,r.touchScrollAllowed=!1,r.autoScroller.isEnabled=i.dragScroll;let s=this.hitDragging=new zR(this.dragging,P4);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let i=this.component.context,r=this.receivingContext;r&&r!==e&&(r===i?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:xa(),isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}GS.SELECTOR=".fc-event-draggable, .fc-event-resizable";function h1t(t,e,n){let i=t.dateSpan,r=e.dateSpan,s=i.range.start,o=r.range.start,a={};i.allDay!==r.allDay&&(a.allDay=r.allDay,a.hasEnd=e.context.options.allDayMaintainDuration,r.allDay&&(s=ui(s)));let l=k0(s,o,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);l.milliseconds&&(a.allDay=!1);let c={datesDelta:l,standardProps:a};for(let d of n)d(c,t,e);return c}function f1t(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class p1t extends Ux{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:o}=this,a=this.querySegEl(s),l=Qy(a),c=this.eventRange=l.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==c.instance.instanceId)},this.handleDragStart=s=>{let{context:o}=this.component,a=this.eventRange;this.relevantEvents=D6(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let l=this.querySegEl(s);this.draggingSegEl=l,this.draggingSeg=Qy(l),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:l,event:new Ai(o,a.def,a.instance),jsEvent:s.origEvent,view:o.viewApi})},this.handleHitUpdate=(s,o,a)=>{let{context:l}=this.component,c=this.relevantEvents,d=this.hitDragging.initialHit,u=this.eventRange.instance,h=null,f=null,p=!1,m={affectedEvents:c,mutatedEvents:xa(),isEvent:!0};s&&(s.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,s)||(h=m1t(d,s,a.subjectEl.classList.contains("fc-event-resizer-start"),u.range))),h&&(f=z6(c,l.getCurrentData().eventUiBases,h,l),m.mutatedEvents=f,Gpe(m,s.dateProfile,l)||(p=!0,h=null,f=null,m.mutatedEvents=null)),f?l.dispatch({type:"SET_EVENT_RESIZE",state:m}):l.dispatch({type:"UNSET_EVENT_RESIZE"}),p?w6():_6(),o||(h&&FR(d,s)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=f)},this.handleDragEnd=s=>{let{context:o}=this.component,a=this.eventRange.def,l=this.eventRange.instance,c=new Ai(o,a,l),d=this.relevantEvents,u=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:c,jsEvent:s.origEvent,view:o.viewApi}),this.validMutation){let h=new Ai(o,u.defs[a.defId],l?u.instances[l.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:u});let f={oldEvent:c,event:h,relatedEvents:jm(u,o,l),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:d})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},f),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Sn(0),endDelta:this.validMutation.endDelta||Sn(0),jsEvent:s.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",f)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,i=this.dragging=new jS(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=n.context.options.dragScroll;let r=this.hitDragging=new zR(this.dragging,U6(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Is(e.subjectEl,".fc-event")}}function m1t(t,e,n,i){let r=t.context.dateEnv,s=t.dateSpan.range.start,o=e.dateSpan.range.start,a=k0(s,o,r,t.largeUnit);if(n){if(r.add(i.start,a)<i.end)return{startDelta:a}}else if(r.add(i.end,a)>i.start)return{endDelta:a};return null}class g1t{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let r=this.context.options.unselectCancel,s=tpe(i.origEvent);this.matchesCancel=!!Is(s,r),this.matchesEvent=!!Is(s,GS.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:r}=this,{documentPointer:s}=this,o=r.getCurrentData();if(!s.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let a=r.options.unselectAuto;a&&(!a||!this.matchesCancel)&&r.calendarApi.unselect(i)}o.eventSelection&&!this.matchesEvent&&r.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new Eme(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const v1t={fixedMirrorParent:Ge},y1t={dateClick:Ge,eventDragStart:Ge,eventDragStop:Ge,eventDrop:Ge,eventResizeStart:Ge,eventResizeStop:Ge,eventResize:Ge,drop:Ge,eventReceive:Ge,eventLeave:Ge};V6.dataAttrPrefix="";var x1t=th({name:"@fullcalendar/interaction",componentInteractions:[l1t,c1t,GS,p1t],calendarInteractions:[g1t],elementDraggingImpl:jS,optionRefiners:v1t,listenerRefiners:y1t});let b1t=0,lN=new Date().toISOString().replace(/T.*$/,"");const w1t=[{id:cN(),title:"Timed event",start:lN+"T10:00:00"},{id:cN(),title:"All-day event",start:lN},{id:cN(),title:"Timed event",start:lN+"T12:00:00"}];function cN(){return String(b1t++)}var Q6={},Jy={},_1t={get exports(){return Jy},set exports(t){Jy=t}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(_1t);var uN={};const S1t=lte(RVe);var ste;function UR(){return ste||(ste=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=S1t}(uN)),uN}const VR=lte($ge);var E1t=Jy;Object.defineProperty(Q6,"__esModule",{value:!0});var J6=Q6.default=void 0,M1t=E1t(UR()),A1t=VR,T1t=(0,M1t.default)((0,A1t.jsx)("path",{d:"m17 8-1.41 1.41L17.17 11H9v2h8.17l-1.58 1.58L17 16l4-4-4-4zM5 5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5V5z"}),"LogoutOutlined");J6=Q6.default=T1t;const dN={create:t=>na.post("schedule",t),getAll:()=>na.get("schedule")};function C1t(){const[t,e]=Z.useState(!0),[n,i]=Z.useState([]);Z.useEffect(()=>{(async()=>{try{const f=await dN.getAll();console.log(f),i(f)}catch(f){console.error("Failed to get events:",f)}})()},[]);const r=wu(),s=()=>{e(!t)},o=async h=>{let f=prompt("Enter your new event."),p=h.view.calendar;p.unselect();let m;f&&(m=Date.now(),p.addEvent({id:m,title:f,start:h.startStr,end:h.endStr,allDay:h.allDay}),console.log(h.startStr),console.log(h.endStr));try{const g=await dN.create({id:m,title:f,start:new Date(h.startStr).toISOString().replace(/T.*$/,""),end:new Date(h.endStr).toISOString().replace(/T.*$/,""),allDay:h.allDay});console.log(g)}catch(g){console.error(g)}},a=h=>{confirm(`Are you sure to delete the event? '${h.event.title}'`)&&h.event.remove()},l=async()=>{try{const h=await dN.getAll();i(h)}catch(h){console.error("Failed to get events:",h)}},c=h=>jt(fg,{children:[Te("b",{children:h.timeText}),Te("i",{children:h.event.title})]}),d=h=>jt("li",{children:[Te("b",{children:Fyt(h.start,{year:"numeric",month:"short",day:"numeric"})}),Te("i",{children:h.title})]},h.id);return jt("div",{className:"demo-app",children:[(()=>jt("div",{className:"demo-app-sidebar",children:[Te("div",{style:{textAlign:"right",margin:"10px"},children:Te(S_,{onClick:()=>r(-1),children:Te(J6,{fontSize:"small"})})}),jt("div",{className:"demo-app-sidebar-section",children:[Te("h2",{children:"Instructions"}),jt("ul",{children:[Te("li",{children:jt("label",{children:[Te("input",{style:{margin:"0px"},type:"checkbox",checked:t,onChange:s}),Te("span",{children:"Toggle weekends"})]})}),Te("li",{children:"Select dates"}),Te("li",{children:"Click a date to create an event"}),Te("li",{children:"Drag and Drop"}),Te("li",{children:"Click an event to delete it"})]})]}),Te("div",{className:"demo-app-sidebar-section"}),jt("div",{className:"demo-app-sidebar-section",children:[jt("h2",{children:["All Events (",n.length,")"]}),Te("ul",{children:n.map(d)})]})]}))(),Te("div",{className:"demo-app-main",children:Te(fme,{plugins:[hxt,Zxt,x1t],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:t,initialEvents:w1t,select:o,eventContent:c,eventClick:a,eventsSet:l})})]})}var ej={},P1t=Jy;Object.defineProperty(ej,"__esModule",{value:!0});var Pme=ej.default=void 0,D1t=P1t(UR()),R1t=VR,O1t=(0,D1t.default)((0,R1t.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4z"}),"AddBoxOutlined");Pme=ej.default=O1t;const L1t={colors:{secondary:"#db7093"}},qc={create:()=>na.post("diary"),getAll:()=>na.get("diary"),getOne:t=>na.get(`diary/${t}`),delete:t=>na.delete(`diary/${t}`),update:(t,e)=>na.put(`diary/${t}`,e),getFavorites:()=>na.get("diary/allfavorites")};function I1t(){const{diaryId:t}=Zae(),e=Yb(d=>d.user.value),n=Yb(d=>d.diary.value),i=Yb(d=>d.allFavorites.value),r=wu(),s=NU(),o=async()=>{const d=await bS.isAuthenticated();d?s(Oxe(d)):r("/")};Z.useEffect(()=>{o()},[r]),Z.useEffect(()=>{(async()=>{try{const u=await qc.getAll(),h=await qc.getFavorites();s($w(u)),s(TT(h)),u.length>0&&t===void 0&&r(`/diary/${u[0].id}`)}catch(u){alert("Diary"+u)}})()},[]),Z.useEffect(()=>{console.log(n)},[n]);const a=()=>{r("/home")},l=async()=>{try{const d=await qc.create(),u=[d,...n];s($w(u)),r(`/diary/${d.id}`)}catch(d){alert(d)}},c=250;return jt(hd,{sx:{display:"flex"},children:[Te(k6e,{container:window.document.body,variant:"permanent",open:!0,sx:{width:c,height:"100vh","& > div":{borderRight:"none"}},children:jt(sce,{disablePadding:!0,sx:{height:"100vh",width:c,backgroundColor:L1t.colors.secondary},children:[Te(U1,{sx:{paddingTop:"5px",paddingBottom:"0px",marginTop:"20px",marginBottom:"20px"},children:jt(hd,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jt(z1,{variant:"body1",fontWeight:"1000",sx:{padding:"0px",margin:"0px"},children:[" Hi, ",e.username]}),Te(S_,{onClick:a,children:Te(J6,{fontSize:"small"})})]})}),Te(U1,{sx:{paddingTop:"5px",paddingBottom:"0px",marginTop:"5px",marginBottom:"0px"},children:Te(hd,{sx:{paddingTop:"10px",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:Te(z1,{variant:"body1",fontWeight:"1000",children:" Favorites"})})}),i.map((d,u)=>Te(U1,{sx:{pl:"0px",pr:"0px",margin:"0px"},children:Te(PX,{component:o$,to:`/diary/${d.id}`,children:Te(z1,{variant:"body2",fontWeight:"700",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",pl:"20px"},children:d.title})})},u)),Te(U1,{sx:{paddingTop:"5px",paddingBottom:"0px",marginTop:"5px",marginBottom:"0px"},children:jt(hd,{sx:{paddingTop:"10px",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Te(z1,{variant:"body1",fontWeight:"700",children:" Diary"}),Te(S_,{onClick:l,children:Te(Pme,{fontSize:"small"})})]})}),n.map((d,u)=>Te(U1,{sx:{pl:"0px",pr:"0px",margin:"0px"},children:Te(PX,{component:o$,to:`/diary/${d.id}`,children:Te(z1,{variant:"body2",fontWeight:"700",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",pl:"20px"},children:d.title})})},u))]})}),Te(DBe,{})]})}function k1t(){const t=wu(),e=NU();return Te(hd,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:Te(sR,{variant:"outlined",onClick:async()=>{try{const i=await qc.create();e($w([i])),t(`/diary/${i.id}`)}catch(i){alert(""+i)}},sx:{position:"absolute",top:"50%",left:"50%"},children:" Click here to create your first diary"})})}var tj={},N1t=Jy;Object.defineProperty(tj,"__esModule",{value:!0});var I4=tj.default=void 0,B1t=N1t(UR()),z1t=VR,F1t=(0,B1t.default)((0,z1t.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorderOutlined");I4=tj.default=F1t;var nj={},U1t=Jy;Object.defineProperty(nj,"__esModule",{value:!0});var Dme=nj.default=void 0,V1t=U1t(UR()),H1t=VR,j1t=(0,V1t.default)((0,H1t.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");Dme=nj.default=j1t;var G1t=TOe;function W1t(t,e){return G1t(t,e)}var q1t=W1t,k4={},$1t={get exports(){return k4},set exports(t){k4=t}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(i,r){t.exports=r()})(typeof self<"u"?self:oa,function(){return function(n){var i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=i,r.d=function(s,o,a){r.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="",r(r.s=109)}([function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(17),o=r(18),a=r(19),l=r(45),c=r(46),d=r(47),u=r(48),h=r(49),f=r(12),p=r(32),m=r(33),g=r(31),v=r(1),y={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:u.default,Scroll:l.default,Block:d.default,Inline:c.default,Text:h.default,Attributor:{Attribute:f.default,Class:p.default,Style:m.default,Store:g.default}};i.default=y},function(n,i,r){var s=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var x in y)y.hasOwnProperty(x)&&(v[x]=y[x])};return function(v,y){g(v,y);function x(){this.constructor=v}v.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(g){s(v,g);function v(y){var x=this;return y="[Parchment] "+y,x=g.call(this,y)||this,x.message=y,x.name=x.constructor.name,x}return v}(Error);i.ParchmentError=o;var a={},l={},c={},d={};i.DATA_KEY="__blot";var u;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(u=i.Scope||(i.Scope={}));function h(g,v){var y=p(g);if(y==null)throw new o("Unable to create "+g+" blot");var x=y,b=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:x.create(v);return new x(b,v)}i.create=h;function f(g,v){return v===void 0&&(v=!1),g==null?null:g[i.DATA_KEY]!=null?g[i.DATA_KEY].blot:v?f(g.parentNode,v):null}i.find=f;function p(g,v){v===void 0&&(v=u.ANY);var y;if(typeof g=="string")y=d[g]||a[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)y=d.text;else if(typeof g=="number")g&u.LEVEL&u.BLOCK?y=d.block:g&u.LEVEL&u.INLINE&&(y=d.inline);else if(g instanceof HTMLElement){var x=(g.getAttribute("class")||"").split(/\s+/);for(var b in x)if(y=l[x[b]],y)break;y=y||c[g.tagName]}return y==null?null:v&u.LEVEL&y.scope&&v&u.TYPE&y.scope?y:null}i.query=p;function m(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];if(g.length>1)return g.map(function(b){return m(b)});var y=g[0];if(typeof y.blotName!="string"&&typeof y.attrName!="string")throw new o("Invalid definition");if(y.blotName==="abstract")throw new o("Cannot register abstract class");if(d[y.blotName||y.attrName]=y,typeof y.keyName=="string")a[y.keyName]=y;else if(y.className!=null&&(l[y.className]=y),y.tagName!=null){Array.isArray(y.tagName)?y.tagName=y.tagName.map(function(b){return b.toUpperCase()}):y.tagName=y.tagName.toUpperCase();var x=Array.isArray(y.tagName)?y.tagName:[y.tagName];x.forEach(function(b){(c[b]==null||y.className==null)&&(c[b]=y)})}return y}i.register=m},function(n,i,r){var s=r(51),o=r(11),a=r(3),l=r(20),c=String.fromCharCode(0),d=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};d.prototype.insert=function(u,h){var f={};return u.length===0?this:(f.insert=u,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(f.attributes=h),this.push(f))},d.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},d.prototype.retain=function(u,h){if(u<=0)return this;var f={retain:u};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(f.attributes=h),this.push(f)},d.prototype.push=function(u){var h=this.ops.length,f=this.ops[h-1];if(u=a(!0,{},u),typeof f=="object"){if(typeof u.delete=="number"&&typeof f.delete=="number")return this.ops[h-1]={delete:f.delete+u.delete},this;if(typeof f.delete=="number"&&u.insert!=null&&(h-=1,f=this.ops[h-1],typeof f!="object"))return this.ops.unshift(u),this;if(o(u.attributes,f.attributes)){if(typeof u.insert=="string"&&typeof f.insert=="string")return this.ops[h-1]={insert:f.insert+u.insert},typeof u.attributes=="object"&&(this.ops[h-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof f.retain=="number")return this.ops[h-1]={retain:f.retain+u.retain},typeof u.attributes=="object"&&(this.ops[h-1].attributes=u.attributes),this}}return h===this.ops.length?this.ops.push(u):this.ops.splice(h,0,u),this},d.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},d.prototype.filter=function(u){return this.ops.filter(u)},d.prototype.forEach=function(u){this.ops.forEach(u)},d.prototype.map=function(u){return this.ops.map(u)},d.prototype.partition=function(u){var h=[],f=[];return this.forEach(function(p){var m=u(p)?h:f;m.push(p)}),[h,f]},d.prototype.reduce=function(u,h){return this.ops.reduce(u,h)},d.prototype.changeLength=function(){return this.reduce(function(u,h){return h.insert?u+l.length(h):h.delete?u-h.delete:u},0)},d.prototype.length=function(){return this.reduce(function(u,h){return u+l.length(h)},0)},d.prototype.slice=function(u,h){u=u||0,typeof h!="number"&&(h=1/0);for(var f=[],p=l.iterator(this.ops),m=0;m<h&&p.hasNext();){var g;m<u?g=p.next(u-m):(g=p.next(h-m),f.push(g)),m+=l.length(g)}return new d(f)},d.prototype.compose=function(u){var h=l.iterator(this.ops),f=l.iterator(u.ops),p=[],m=f.peek();if(m!=null&&typeof m.retain=="number"&&m.attributes==null){for(var g=m.retain;h.peekType()==="insert"&&h.peekLength()<=g;)g-=h.peekLength(),p.push(h.next());m.retain-g>0&&f.next(m.retain-g)}for(var v=new d(p);h.hasNext()||f.hasNext();)if(f.peekType()==="insert")v.push(f.next());else if(h.peekType()==="delete")v.push(h.next());else{var y=Math.min(h.peekLength(),f.peekLength()),x=h.next(y),b=f.next(y);if(typeof b.retain=="number"){var w={};typeof x.retain=="number"?w.retain=y:w.insert=x.insert;var E=l.attributes.compose(x.attributes,b.attributes,typeof x.retain=="number");if(E&&(w.attributes=E),v.push(w),!f.hasNext()&&o(v.ops[v.ops.length-1],w)){var A=new d(h.rest());return v.concat(A).chop()}}else typeof b.delete=="number"&&typeof x.retain=="number"&&v.push(b)}return v.chop()},d.prototype.concat=function(u){var h=new d(this.ops.slice());return u.ops.length>0&&(h.push(u.ops[0]),h.ops=h.ops.concat(u.ops.slice(1))),h},d.prototype.diff=function(u,h){if(this.ops===u.ops)return new d;var f=[this,u].map(function(y){return y.map(function(x){if(x.insert!=null)return typeof x.insert=="string"?x.insert:c;var b=y===u?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),p=new d,m=s(f[0],f[1],h),g=l.iterator(this.ops),v=l.iterator(u.ops);return m.forEach(function(y){for(var x=y[1].length;x>0;){var b=0;switch(y[0]){case s.INSERT:b=Math.min(v.peekLength(),x),p.push(v.next(b));break;case s.DELETE:b=Math.min(x,g.peekLength()),g.next(b),p.delete(b);break;case s.EQUAL:b=Math.min(g.peekLength(),v.peekLength(),x);var w=g.next(b),E=v.next(b);o(w.insert,E.insert)?p.retain(b,l.attributes.diff(w.attributes,E.attributes)):p.push(E).delete(b);break}x-=b}}),p.chop()},d.prototype.eachLine=function(u,h){h=h||`
`;for(var f=l.iterator(this.ops),p=new d,m=0;f.hasNext();){if(f.peekType()!=="insert")return;var g=f.peek(),v=l.length(g)-f.peekLength(),y=typeof g.insert=="string"?g.insert.indexOf(h,v)-v:-1;if(y<0)p.push(f.next());else if(y>0)p.push(f.next(y));else{if(u(p,f.next(1).attributes||{},m)===!1)return;m+=1,p=new d}}p.length()>0&&u(p,{},m)},d.prototype.transform=function(u,h){if(h=!!h,typeof u=="number")return this.transformPosition(u,h);for(var f=l.iterator(this.ops),p=l.iterator(u.ops),m=new d;f.hasNext()||p.hasNext();)if(f.peekType()==="insert"&&(h||p.peekType()!=="insert"))m.retain(l.length(f.next()));else if(p.peekType()==="insert")m.push(p.next());else{var g=Math.min(f.peekLength(),p.peekLength()),v=f.next(g),y=p.next(g);if(v.delete)continue;y.delete?m.push(y):m.retain(g,l.attributes.transform(v.attributes,y.attributes,h))}return m.chop()},d.prototype.transformPosition=function(u,h){h=!!h;for(var f=l.iterator(this.ops),p=0;f.hasNext()&&p<=u;){var m=f.peekLength(),g=f.peekType();if(f.next(),g==="delete"){u-=Math.min(m,u-p);continue}else g==="insert"&&(p<u||!h)&&(u+=m);p+=m}return u},n.exports=d},function(n,i){var r=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(f){return typeof Array.isArray=="function"?Array.isArray(f):s.call(f)==="[object Array]"},c=function(f){if(!f||s.call(f)!=="[object Object]")return!1;var p=r.call(f,"constructor"),m=f.constructor&&f.constructor.prototype&&r.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!p&&!m)return!1;var g;for(g in f);return typeof g>"u"||r.call(f,g)},d=function(f,p){o&&p.name==="__proto__"?o(f,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):f[p.name]=p.newValue},u=function(f,p){if(p==="__proto__")if(r.call(f,p)){if(a)return a(f,p).value}else return;return f[p]};n.exports=function h(){var f,p,m,g,v,y,x=arguments[0],b=1,w=arguments.length,E=!1;for(typeof x=="boolean"&&(E=x,x=arguments[1]||{},b=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});b<w;++b)if(f=arguments[b],f!=null)for(p in f)m=u(x,p),g=u(f,p),x!==g&&(E&&g&&(c(g)||(v=l(g)))?(v?(v=!1,y=m&&l(m)?m:[]):y=m&&c(m)?m:{},d(x,{name:p,newValue:h(E,y,g)})):typeof g<"u"&&d(x,{name:p,newValue:g}));return x}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BlockEmbed=i.bubbleFormats=void 0;var s=function(){function P(R,L){for(var O=0;O<L.length;O++){var B=L[O];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(R,B.key,B)}}return function(R,L,O){return L&&P(R.prototype,L),O&&P(R,O),R}}(),o=function P(R,L,O){R===null&&(R=Function.prototype);var B=Object.getOwnPropertyDescriptor(R,L);if(B===void 0){var $=Object.getPrototypeOf(R);return $===null?void 0:P($,L,O)}else{if("value"in B)return B.value;var X=B.get;return X===void 0?void 0:X.call(O)}},a=r(3),l=x(a),c=r(2),d=x(c),u=r(0),h=x(u),f=r(16),p=x(f),m=r(6),g=x(m),v=r(7),y=x(v);function x(P){return P&&P.__esModule?P:{default:P}}function b(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}function w(P,R){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:P}function E(P,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);P.prototype=Object.create(R&&R.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(P,R):P.__proto__=R)}var A=1,S=function(P){E(R,P);function R(){return b(this,R),w(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return s(R,[{key:"attach",value:function(){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"attach",this).call(this),this.attributes=new h.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(O,B){var $=h.default.query(O,h.default.Scope.BLOCK_ATTRIBUTE);$!=null&&this.attributes.attribute($,B)}},{key:"formatAt",value:function(O,B,$,X){this.format($,X)}},{key:"insertAt",value:function(O,B,$){if(typeof B=="string"&&B.endsWith(`
`)){var X=h.default.create(C.blotName);this.parent.insertBefore(X,O===0?this:this.next),X.insertAt(0,B.slice(0,-1))}else o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,O,B,$)}}]),R}(h.default.Embed);S.scope=h.default.Scope.BLOCK_BLOT;var C=function(P){E(R,P);function R(L){b(this,R);var O=w(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,L));return O.cache={},O}return s(R,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(h.default.Leaf).reduce(function(O,B){return B.length()===0?O:O.insert(B.value(),T(B))},new d.default).insert(`
`,T(this))),this.cache.delta}},{key:"deleteAt",value:function(O,B){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,O,B),this.cache={}}},{key:"formatAt",value:function(O,B,$,X){B<=0||(h.default.query($,h.default.Scope.BLOCK)?O+B===this.length()&&this.format($,X):o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,O,Math.min(B,this.length()-O-1),$,X),this.cache={})}},{key:"insertAt",value:function(O,B,$){if($!=null)return o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,O,B,$);if(B.length!==0){var X=B.split(`
`),H=X.shift();H.length>0&&(O<this.length()-1||this.children.tail==null?o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,Math.min(O,this.length()-1),H):this.children.tail.insertAt(this.children.tail.length(),H),this.cache={});var U=this;X.reduce(function(N,k){return U=U.split(N,!0),U.insertAt(0,k),k.length},O+H.length)}}},{key:"insertBefore",value:function(O,B){var $=this.children.head;o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,O,B),$ instanceof p.default&&$.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(O,B){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"moveChildren",this).call(this,O,B),this.cache={}}},{key:"optimize",value:function(O){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,O),this.cache={}}},{key:"path",value:function(O){return o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,O,!0)}},{key:"removeChild",value:function(O){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"removeChild",this).call(this,O),this.cache={}}},{key:"split",value:function(O){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(O===0||O>=this.length()-A)){var $=this.clone();return O===0?(this.parent.insertBefore($,this),this):(this.parent.insertBefore($,this.next),$)}else{var X=o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"split",this).call(this,O,B);return this.cache={},X}}}]),R}(h.default.Block);C.blotName="block",C.tagName="P",C.defaultChild="break",C.allowedChildren=[g.default,h.default.Embed,y.default];function T(P){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return P==null||(typeof P.formats=="function"&&(R=(0,l.default)(R,P.formats())),P.parent==null||P.parent.blotName=="scroll"||P.parent.statics.scope!==P.statics.scope)?R:T(P.parent,R)}i.bubbleFormats=T,i.BlockEmbed=S,i.default=C},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.overload=i.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(N,k){var z=[],W=!0,K=!1,J=void 0;try{for(var F=N[Symbol.iterator](),ee;!(W=(ee=F.next()).done)&&(z.push(ee.value),!(k&&z.length===k));W=!0);}catch(ie){K=!0,J=ie}finally{try{!W&&F.return&&F.return()}finally{if(K)throw J}}return z}return function(N,k){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return U(N,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function U(N,k){for(var z=0;z<k.length;z++){var W=k[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(N,W.key,W)}}return function(N,k,z){return k&&U(N.prototype,k),z&&U(N,z),N}}();r(50);var l=r(2),c=T(l),d=r(14),u=T(d),h=r(8),f=T(h),p=r(9),m=T(p),g=r(0),v=T(g),y=r(15),x=T(y),b=r(3),w=T(b),E=r(10),A=T(E),S=r(34),C=T(S);function T(U){return U&&U.__esModule?U:{default:U}}function P(U,N,k){return N in U?Object.defineProperty(U,N,{value:k,enumerable:!0,configurable:!0,writable:!0}):U[N]=k,U}function R(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}var L=(0,A.default)("quill"),O=function(){a(U,null,[{key:"debug",value:function(k){k===!0&&(k="log"),A.default.level(k)}},{key:"find",value:function(k){return k.__quill||v.default.find(k)}},{key:"import",value:function(k){return this.imports[k]==null&&L.error("Cannot import "+k+". Are you sure it was registered?"),this.imports[k]}},{key:"register",value:function(k,z){var W=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof k!="string"){var J=k.attrName||k.blotName;typeof J=="string"?this.register("formats/"+J,k,z):Object.keys(k).forEach(function(F){W.register(F,k[F],z)})}else this.imports[k]!=null&&!K&&L.warn("Overwriting "+k+" with",z),this.imports[k]=z,(k.startsWith("blots/")||k.startsWith("formats/"))&&z.blotName!=="abstract"?v.default.register(z):k.startsWith("modules")&&typeof z.register=="function"&&z.register()}}]);function U(N){var k=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(R(this,U),this.options=B(N,z),this.container=this.options.container,this.container==null)return L.error("Invalid Quill container",N);this.options.debug&&U.debug(this.options.debug);var W=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new f.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new x.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(f.default.events.EDITOR_CHANGE,function(J){J===f.default.events.TEXT_CHANGE&&k.root.classList.toggle("ql-blank",k.editor.isBlank())}),this.emitter.on(f.default.events.SCROLL_UPDATE,function(J,F){var ee=k.selection.lastRange,ie=ee&&ee.length===0?ee.index:void 0;$.call(k,function(){return k.editor.update(null,F,ie)},J)});var K=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+W+"<p><br></p></div>");this.setContents(K),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(U,[{key:"addContainer",value:function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof k=="string"){var W=k;k=document.createElement("div"),k.classList.add(W)}return this.container.insertBefore(k,z),k}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(k,z,W){var K=this,J=X(k,z,W),F=o(J,4);return k=F[0],z=F[1],W=F[3],$.call(this,function(){return K.editor.deleteText(k,z)},W,k,-1*z)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(k),this.container.classList.toggle("ql-disabled",!k)}},{key:"focus",value:function(){var k=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=k,this.scrollIntoView()}},{key:"format",value:function(k,z){var W=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;return $.call(this,function(){var J=W.getSelection(!0),F=new c.default;if(J==null)return F;if(v.default.query(k,v.default.Scope.BLOCK))F=W.editor.formatLine(J.index,J.length,P({},k,z));else{if(J.length===0)return W.selection.format(k,z),F;F=W.editor.formatText(J.index,J.length,P({},k,z))}return W.setSelection(J,f.default.sources.SILENT),F},K)}},{key:"formatLine",value:function(k,z,W,K,J){var F=this,ee=void 0,ie=X(k,z,W,K,J),te=o(ie,4);return k=te[0],z=te[1],ee=te[2],J=te[3],$.call(this,function(){return F.editor.formatLine(k,z,ee)},J,k,0)}},{key:"formatText",value:function(k,z,W,K,J){var F=this,ee=void 0,ie=X(k,z,W,K,J),te=o(ie,4);return k=te[0],z=te[1],ee=te[2],J=te[3],$.call(this,function(){return F.editor.formatText(k,z,ee)},J,k,0)}},{key:"getBounds",value:function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=void 0;typeof k=="number"?W=this.selection.getBounds(k,z):W=this.selection.getBounds(k.index,k.length);var K=this.container.getBoundingClientRect();return{bottom:W.bottom-K.top,height:W.height,left:W.left-K.left,right:W.right-K.left,top:W.top-K.top,width:W.width}}},{key:"getContents",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-k,W=X(k,z),K=o(W,2);return k=K[0],z=K[1],this.editor.getContents(k,z)}},{key:"getFormat",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof k=="number"?this.editor.getFormat(k,z):this.editor.getFormat(k.index,k.length)}},{key:"getIndex",value:function(k){return k.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(k){return this.scroll.leaf(k)}},{key:"getLine",value:function(k){return this.scroll.line(k)}},{key:"getLines",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof k!="number"?this.scroll.lines(k.index,k.length):this.scroll.lines(k,z)}},{key:"getModule",value:function(k){return this.theme.modules[k]}},{key:"getSelection",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return k&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-k,W=X(k,z),K=o(W,2);return k=K[0],z=K[1],this.editor.getText(k,z)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(k,z,W){var K=this,J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:U.sources.API;return $.call(this,function(){return K.editor.insertEmbed(k,z,W)},J,k)}},{key:"insertText",value:function(k,z,W,K,J){var F=this,ee=void 0,ie=X(k,0,W,K,J),te=o(ie,4);return k=te[0],ee=te[2],J=te[3],$.call(this,function(){return F.editor.insertText(k,z,ee)},J,k,z.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(k,z,W){this.clipboard.dangerouslyPasteHTML(k,z,W)}},{key:"removeFormat",value:function(k,z,W){var K=this,J=X(k,z,W),F=o(J,4);return k=F[0],z=F[1],W=F[3],$.call(this,function(){return K.editor.removeFormat(k,z)},W,k)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(k){var z=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API;return $.call(this,function(){k=new c.default(k);var K=z.getLength(),J=z.editor.deleteText(0,K),F=z.editor.applyDelta(k),ee=F.ops[F.ops.length-1];ee!=null&&typeof ee.insert=="string"&&ee.insert[ee.insert.length-1]===`
`&&(z.editor.deleteText(z.getLength()-1,1),F.delete(1));var ie=J.compose(F);return ie},W)}},{key:"setSelection",value:function(k,z,W){if(k==null)this.selection.setRange(null,z||U.sources.API);else{var K=X(k,z,W),J=o(K,4);k=J[0],z=J[1],W=J[3],this.selection.setRange(new y.Range(k,z),W),W!==f.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API,W=new c.default().insert(k);return this.setContents(W,z)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.default.sources.USER,z=this.scroll.update(k);return this.selection.update(k),z}},{key:"updateContents",value:function(k){var z=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API;return $.call(this,function(){return k=new c.default(k),z.editor.applyDelta(k,W)},W,!0)}}]),U}();O.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},O.events=f.default.events,O.sources=f.default.sources,O.version="1.3.7",O.imports={delta:c.default,parchment:v.default,"core/module":m.default,"core/theme":C.default};function B(U,N){if(N=(0,w.default)(!0,{container:U,modules:{clipboard:!0,keyboard:!0,history:!0}},N),!N.theme||N.theme===O.DEFAULTS.theme)N.theme=C.default;else if(N.theme=O.import("themes/"+N.theme),N.theme==null)throw new Error("Invalid theme "+N.theme+". Did you register it?");var k=(0,w.default)(!0,{},N.theme.DEFAULTS);[k,N].forEach(function(K){K.modules=K.modules||{},Object.keys(K.modules).forEach(function(J){K.modules[J]===!0&&(K.modules[J]={})})});var z=Object.keys(k.modules).concat(Object.keys(N.modules)),W=z.reduce(function(K,J){var F=O.import("modules/"+J);return F==null?L.error("Cannot load "+J+" module. Are you sure you registered it?"):K[J]=F.DEFAULTS||{},K},{});return N.modules!=null&&N.modules.toolbar&&N.modules.toolbar.constructor!==Object&&(N.modules.toolbar={container:N.modules.toolbar}),N=(0,w.default)(!0,{},O.DEFAULTS,{modules:W},k,N),["bounds","container","scrollingContainer"].forEach(function(K){typeof N[K]=="string"&&(N[K]=document.querySelector(N[K]))}),N.modules=Object.keys(N.modules).reduce(function(K,J){return N.modules[J]&&(K[J]=N.modules[J]),K},{}),N}function $(U,N,k,z){if(this.options.strict&&!this.isEnabled()&&N===f.default.sources.USER)return new c.default;var W=k==null?null:this.getSelection(),K=this.editor.delta,J=U();if(W!=null&&(k===!0&&(k=W.index),z==null?W=H(W,J,N):z!==0&&(W=H(W,k,z,N)),this.setSelection(W,f.default.sources.SILENT)),J.length()>0){var F,ee=[f.default.events.TEXT_CHANGE,J,K,N];if((F=this.emitter).emit.apply(F,[f.default.events.EDITOR_CHANGE].concat(ee)),N!==f.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,ee)}}return J}function X(U,N,k,z,W){var K={};return typeof U.index=="number"&&typeof U.length=="number"?typeof N!="number"?(W=z,z=k,k=N,N=U.length,U=U.index):(N=U.length,U=U.index):typeof N!="number"&&(W=z,z=k,k=N,N=0),(typeof k>"u"?"undefined":s(k))==="object"?(K=k,W=z):typeof k=="string"&&(z!=null?K[k]=z:W=k),W=W||f.default.sources.API,[U,N,K,W]}function H(U,N,k,z){if(U==null)return null;var W=void 0,K=void 0;if(N instanceof c.default){var J=[U.index,U.index+U.length].map(function(te){return N.transformPosition(te,z!==f.default.sources.USER)}),F=o(J,2);W=F[0],K=F[1]}else{var ee=[U.index,U.index+U.length].map(function(te){return te<N||te===N&&z===f.default.sources.USER?te:k>=0?te+k:Math.max(N,te+k)}),ie=o(ee,2);W=ie[0],K=ie[1]}return new y.Range(W,K-W)}i.expandConfig=B,i.overload=X,i.default=O},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function g(v,y){for(var x=0;x<y.length;x++){var b=y[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,x){return y&&g(v.prototype,y),x&&g(v,x),v}}(),o=function g(v,y,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:g(w,y,x)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(x)}},a=r(7),l=u(a),c=r(0),d=u(c);function u(g){return g&&g.__esModule?g:{default:g}}function h(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function p(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var m=function(g){p(v,g);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"formatAt",value:function(x,b,w,E){if(v.compare(this.statics.blotName,w)<0&&d.default.query(w,d.default.Scope.BLOT)){var A=this.isolate(x,b);E&&A.wrap(w,E)}else o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,x,b,w,E)}},{key:"optimize",value:function(x){if(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,x),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(x,b){var w=v.order.indexOf(x),E=v.order.indexOf(b);return w>=0||E>=0?w-E:x===b?0:x<b?-1:1}}]),v}(d.default.Inline);m.allowedChildren=[m,d.default.Embed,l.default],m.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],i.default=m},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function c(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function d(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var u=function(h){d(f,h);function f(){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default.Text);i.default=u},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function y(x,b){for(var w=0;w<b.length;w++){var E=b[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(x,E.key,E)}}return function(x,b,w){return b&&y(x.prototype,b),w&&y(x,w),x}}(),o=function y(x,b,w){x===null&&(x=Function.prototype);var E=Object.getOwnPropertyDescriptor(x,b);if(E===void 0){var A=Object.getPrototypeOf(x);return A===null?void 0:y(A,b,w)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(w)}},a=r(54),l=u(a),c=r(10),d=u(c);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function f(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function p(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var m=(0,d.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(y){document.addEventListener(y,function(){for(var x=arguments.length,b=Array(x),w=0;w<x;w++)b[w]=arguments[w];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(E){if(E.__quill&&E.__quill.emitter){var A;(A=E.__quill.emitter).handleDOM.apply(A,b)}})})});var v=function(y){p(x,y);function x(){h(this,x);var b=f(this,(x.__proto__||Object.getPrototypeOf(x)).call(this));return b.listeners={},b.on("error",m.error),b}return s(x,[{key:"emit",value:function(){m.log.apply(m,arguments),o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(w){for(var E=arguments.length,A=Array(E>1?E-1:0),S=1;S<E;S++)A[S-1]=arguments[S];(this.listeners[w.type]||[]).forEach(function(C){var T=C.node,P=C.handler;(w.target===T||T.contains(w.target))&&P.apply(void 0,[w].concat(A))})}},{key:"listenDOM",value:function(w,E,A){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push({node:E,handler:A})}}]),x}(l.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},i.default=v},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=c};o.DEFAULTS={},i.default=o},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(c){if(s.indexOf(c)<=s.indexOf(o)){for(var d,u=arguments.length,h=Array(u>1?u-1:0),f=1;f<u;f++)h[f-1]=arguments[f];(d=console)[c].apply(d,h)}}function l(c){return s.reduce(function(d,u){return d[u]=a.bind(console,u,c),d},{})}a.level=l.level=function(c){o=c},i.default=l},function(n,i,r){var s=Array.prototype.slice,o=r(52),a=r(53),l=n.exports=function(h,f,p){return p||(p={}),h===f?!0:h instanceof Date&&f instanceof Date?h.getTime()===f.getTime():!h||!f||typeof h!="object"&&typeof f!="object"?p.strict?h===f:h==f:u(h,f,p)};function c(h){return h==null}function d(h){return!(!h||typeof h!="object"||typeof h.length!="number"||typeof h.copy!="function"||typeof h.slice!="function"||h.length>0&&typeof h[0]!="number")}function u(h,f,p){var m,g;if(c(h)||c(f)||h.prototype!==f.prototype)return!1;if(a(h))return a(f)?(h=s.call(h),f=s.call(f),l(h,f,p)):!1;if(d(h)){if(!d(f)||h.length!==f.length)return!1;for(m=0;m<h.length;m++)if(h[m]!==f[m])return!1;return!0}try{var v=o(h),y=o(f)}catch{return!1}if(v.length!=y.length)return!1;for(v.sort(),y.sort(),m=v.length-1;m>=0;m--)if(v[m]!=y[m])return!1;for(m=v.length-1;m>=0;m--)if(g=v[m],!l(h[g],f[g],p))return!1;return typeof h==typeof f}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=function(){function a(l,c,d){d===void 0&&(d={}),this.attrName=l,this.keyName=c;var u=s.Scope.TYPE&s.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&s.Scope.LEVEL|u:this.scope=s.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},a.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},a.prototype.canAdd=function(l,c){var d=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},a}();i.default=o},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.Code=void 0;var s=function(){function S(C,T){var P=[],R=!0,L=!1,O=void 0;try{for(var B=C[Symbol.iterator](),$;!(R=($=B.next()).done)&&(P.push($.value),!(T&&P.length===T));R=!0);}catch(X){L=!0,O=X}finally{try{!R&&B.return&&B.return()}finally{if(L)throw O}}return P}return function(C,T){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return S(C,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function S(C,T){for(var P=0;P<T.length;P++){var R=T[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(C,R.key,R)}}return function(C,T,P){return T&&S(C.prototype,T),P&&S(C,P),C}}(),a=function S(C,T,P){C===null&&(C=Function.prototype);var R=Object.getOwnPropertyDescriptor(C,T);if(R===void 0){var L=Object.getPrototypeOf(C);return L===null?void 0:S(L,T,P)}else{if("value"in R)return R.value;var O=R.get;return O===void 0?void 0:O.call(P)}},l=r(2),c=y(l),d=r(0),u=y(d),h=r(4),f=y(h),p=r(6),m=y(p),g=r(7),v=y(g);function y(S){return S&&S.__esModule?S:{default:S}}function x(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function b(S,C){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:S}function w(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);S.prototype=Object.create(C&&C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(S,C):S.__proto__=C)}var E=function(S){w(C,S);function C(){return x(this,C),b(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(m.default);E.blotName="code",E.tagName="CODE";var A=function(S){w(C,S);function C(){return x(this,C),b(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return o(C,[{key:"delta",value:function(){var P=this,R=this.domNode.textContent;return R.endsWith(`
`)&&(R=R.slice(0,-1)),R.split(`
`).reduce(function(L,O){return L.insert(O).insert(`
`,P.formats())},new c.default)}},{key:"format",value:function(P,R){if(!(P===this.statics.blotName&&R)){var L=this.descendant(v.default,this.length()-1),O=s(L,1),B=O[0];B!=null&&B.deleteAt(B.length()-1,1),a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,P,R)}}},{key:"formatAt",value:function(P,R,L,O){if(R!==0&&!(u.default.query(L,u.default.Scope.BLOCK)==null||L===this.statics.blotName&&O===this.statics.formats(this.domNode))){var B=this.newlineIndex(P);if(!(B<0||B>=P+R)){var $=this.newlineIndex(P,!0)+1,X=B-$+1,H=this.isolate($,X),U=H.next;H.format(L,O),U instanceof C&&U.formatAt(0,P-$+R-X,L,O)}}}},{key:"insertAt",value:function(P,R,L){if(L==null){var O=this.descendant(v.default,P),B=s(O,2),$=B[0],X=B[1];$.insertAt(X,R)}}},{key:"length",value:function(){var P=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?P:P+1}},{key:"newlineIndex",value:function(P){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R)return this.domNode.textContent.slice(0,P).lastIndexOf(`
`);var L=this.domNode.textContent.slice(P).indexOf(`
`);return L>-1?P+L:-1}},{key:"optimize",value:function(P){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,P);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===R.statics.formats(R.domNode)&&(R.optimize(P),R.moveChildren(this),R.remove())}},{key:"replace",value:function(P){a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replace",this).call(this,P),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(R){var L=u.default.find(R);L==null?R.parentNode.removeChild(R):L instanceof u.default.Embed?L.remove():L.unwrap()})}}],[{key:"create",value:function(P){var R=a(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,P);return R.setAttribute("spellcheck",!1),R}},{key:"formats",value:function(){return!0}}]),C}(f.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",i.Code=E,i.default=A},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(N,k){var z=[],W=!0,K=!1,J=void 0;try{for(var F=N[Symbol.iterator](),ee;!(W=(ee=F.next()).done)&&(z.push(ee.value),!(k&&z.length===k));W=!0);}catch(ie){K=!0,J=ie}finally{try{!W&&F.return&&F.return()}finally{if(K)throw J}}return z}return function(N,k){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return U(N,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function U(N,k){for(var z=0;z<k.length;z++){var W=k[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(N,W.key,W)}}return function(N,k,z){return k&&U(N.prototype,k),z&&U(N,z),N}}(),l=r(2),c=R(l),d=r(20),u=R(d),h=r(0),f=R(h),p=r(13),m=R(p),g=r(24),v=R(g),y=r(4),x=R(y),b=r(16),w=R(b),E=r(21),A=R(E),S=r(11),C=R(S),T=r(3),P=R(T);function R(U){return U&&U.__esModule?U:{default:U}}function L(U,N,k){return N in U?Object.defineProperty(U,N,{value:k,enumerable:!0,configurable:!0,writable:!0}):U[N]=k,U}function O(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,$=function(){function U(N){O(this,U),this.scroll=N,this.delta=this.getDelta()}return a(U,[{key:"applyDelta",value:function(k){var z=this,W=!1;this.scroll.update();var K=this.scroll.length();return this.scroll.batchStart(),k=H(k),k.reduce(function(J,F){var ee=F.retain||F.delete||F.insert.length||1,ie=F.attributes||{};if(F.insert!=null){if(typeof F.insert=="string"){var te=F.insert;te.endsWith(`
`)&&W&&(W=!1,te=te.slice(0,-1)),J>=K&&!te.endsWith(`
`)&&(W=!0),z.scroll.insertAt(J,te);var re=z.scroll.line(J),me=o(re,2),se=me[0],oe=me[1],be=(0,P.default)({},(0,y.bubbleFormats)(se));if(se instanceof x.default){var Ae=se.descendant(f.default.Leaf,oe),Ie=o(Ae,1),Le=Ie[0];be=(0,P.default)(be,(0,y.bubbleFormats)(Le))}ie=u.default.attributes.diff(be,ie)||{}}else if(s(F.insert)==="object"){var fe=Object.keys(F.insert)[0];if(fe==null)return J;z.scroll.insertAt(J,fe,F.insert[fe])}K+=ee}return Object.keys(ie).forEach(function(ve){z.scroll.formatAt(J,ee,ve,ie[ve])}),J+ee},0),k.reduce(function(J,F){return typeof F.delete=="number"?(z.scroll.deleteAt(J,F.delete),J):J+(F.retain||F.insert.length||1)},0),this.scroll.batchEnd(),this.update(k)}},{key:"deleteText",value:function(k,z){return this.scroll.deleteAt(k,z),this.update(new c.default().retain(k).delete(z))}},{key:"formatLine",value:function(k,z){var W=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(K).forEach(function(J){if(!(W.scroll.whitelist!=null&&!W.scroll.whitelist[J])){var F=W.scroll.lines(k,Math.max(z,1)),ee=z;F.forEach(function(ie){var te=ie.length();if(!(ie instanceof m.default))ie.format(J,K[J]);else{var re=k-ie.offset(W.scroll),me=ie.newlineIndex(re+ee)-re+1;ie.formatAt(re,me,J,K[J])}ee-=te})}}),this.scroll.optimize(),this.update(new c.default().retain(k).retain(z,(0,A.default)(K)))}},{key:"formatText",value:function(k,z){var W=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(K).forEach(function(J){W.scroll.formatAt(k,z,J,K[J])}),this.update(new c.default().retain(k).retain(z,(0,A.default)(K)))}},{key:"getContents",value:function(k,z){return this.delta.slice(k,k+z)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(k,z){return k.concat(z.delta())},new c.default)}},{key:"getFormat",value:function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=[],K=[];z===0?this.scroll.path(k).forEach(function(F){var ee=o(F,1),ie=ee[0];ie instanceof x.default?W.push(ie):ie instanceof f.default.Leaf&&K.push(ie)}):(W=this.scroll.lines(k,z),K=this.scroll.descendants(f.default.Leaf,k,z));var J=[W,K].map(function(F){if(F.length===0)return{};for(var ee=(0,y.bubbleFormats)(F.shift());Object.keys(ee).length>0;){var ie=F.shift();if(ie==null)return ee;ee=X((0,y.bubbleFormats)(ie),ee)}return ee});return P.default.apply(P.default,J)}},{key:"getText",value:function(k,z){return this.getContents(k,z).filter(function(W){return typeof W.insert=="string"}).map(function(W){return W.insert}).join("")}},{key:"insertEmbed",value:function(k,z,W){return this.scroll.insertAt(k,z,W),this.update(new c.default().retain(k).insert(L({},z,W)))}},{key:"insertText",value:function(k,z){var W=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return z=z.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(k,z),Object.keys(K).forEach(function(J){W.scroll.formatAt(k,z.length,J,K[J])}),this.update(new c.default().retain(k).insert(z,(0,A.default)(K)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var k=this.scroll.children.head;return k.statics.blotName!==x.default.blotName||k.children.length>1?!1:k.children.head instanceof w.default}},{key:"removeFormat",value:function(k,z){var W=this.getText(k,z),K=this.scroll.line(k+z),J=o(K,2),F=J[0],ee=J[1],ie=0,te=new c.default;F!=null&&(F instanceof m.default?ie=F.newlineIndex(ee)-ee+1:ie=F.length()-ee,te=F.delta().slice(ee,ee+ie-1).insert(`
`));var re=this.getContents(k,z+ie),me=re.diff(new c.default().insert(W).concat(te)),se=new c.default().retain(k).concat(me);return this.applyDelta(se)}},{key:"update",value:function(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,K=this.delta;if(z.length===1&&z[0].type==="characterData"&&z[0].target.data.match(B)&&f.default.find(z[0].target)){var J=f.default.find(z[0].target),F=(0,y.bubbleFormats)(J),ee=J.offset(this.scroll),ie=z[0].oldValue.replace(v.default.CONTENTS,""),te=new c.default().insert(ie),re=new c.default().insert(J.value()),me=new c.default().retain(ee).concat(te.diff(re,W));k=me.reduce(function(se,oe){return oe.insert?se.insert(oe.insert,F):se.push(oe)},new c.default),this.delta=K.compose(k)}else this.delta=this.getDelta(),(!k||!(0,C.default)(K.compose(k),this.delta))&&(k=K.diff(this.delta,W));return k}}]),U}();function X(U,N){return Object.keys(N).reduce(function(k,z){return U[z]==null||(N[z]===U[z]?k[z]=N[z]:Array.isArray(N[z])?N[z].indexOf(U[z])<0&&(k[z]=N[z].concat([U[z]])):k[z]=[N[z],U[z]]),k},{})}function H(U){return U.reduce(function(N,k){if(k.insert===1){var z=(0,A.default)(k.attributes);return delete z.image,N.insert({image:k.attributes.image},z)}if(k.attributes!=null&&(k.attributes.list===!0||k.attributes.bullet===!0)&&(k=(0,A.default)(k),k.attributes.list?k.attributes.list="ordered":(k.attributes.list="bullet",delete k.attributes.bullet)),typeof k.insert=="string"){var W=k.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return N.insert(W,k.attributes)}return N.push(k)},new c.default)}i.default=$},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.Range=void 0;var s=function(){function S(C,T){var P=[],R=!0,L=!1,O=void 0;try{for(var B=C[Symbol.iterator](),$;!(R=($=B.next()).done)&&(P.push($.value),!(T&&P.length===T));R=!0);}catch(X){L=!0,O=X}finally{try{!R&&B.return&&B.return()}finally{if(L)throw O}}return P}return function(C,T){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return S(C,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function S(C,T){for(var P=0;P<T.length;P++){var R=T[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(C,R.key,R)}}return function(C,T,P){return T&&S(C.prototype,T),P&&S(C,P),C}}(),a=r(0),l=v(a),c=r(21),d=v(c),u=r(11),h=v(u),f=r(8),p=v(f),m=r(10),g=v(m);function v(S){return S&&S.__esModule?S:{default:S}}function y(S){if(Array.isArray(S)){for(var C=0,T=Array(S.length);C<S.length;C++)T[C]=S[C];return T}else return Array.from(S)}function x(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}var b=(0,g.default)("quill:selection"),w=function S(C){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;x(this,S),this.index=C,this.length=T},E=function(){function S(C,T){var P=this;x(this,S),this.emitter=T,this.scroll=C,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new w(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){P.mouseDown||setTimeout(P.update.bind(P,p.default.sources.USER),1)}),this.emitter.on(p.default.events.EDITOR_CHANGE,function(R,L){R===p.default.events.TEXT_CHANGE&&L.length()>0&&P.update(p.default.sources.SILENT)}),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,function(){if(P.hasFocus()){var R=P.getNativeRange();R!=null&&R.start.node!==P.cursor.textNode&&P.emitter.once(p.default.events.SCROLL_UPDATE,function(){try{P.setNativeRange(R.start.node,R.start.offset,R.end.node,R.end.offset)}catch{}})}}),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,function(R,L){if(L.range){var O=L.range,B=O.startNode,$=O.startOffset,X=O.endNode,H=O.endOffset;P.setNativeRange(B,$,X,H)}}),this.update(p.default.sources.SILENT)}return o(S,[{key:"handleComposition",value:function(){var T=this;this.root.addEventListener("compositionstart",function(){T.composing=!0}),this.root.addEventListener("compositionend",function(){if(T.composing=!1,T.cursor.parent){var P=T.cursor.restore();if(!P)return;setTimeout(function(){T.setNativeRange(P.startNode,P.startOffset,P.endNode,P.endOffset)},1)}})}},{key:"handleDragging",value:function(){var T=this;this.emitter.listenDOM("mousedown",document.body,function(){T.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){T.mouseDown=!1,T.update(p.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(T,P){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[T])){this.scroll.update();var R=this.getNativeRange();if(!(R==null||!R.native.collapsed||l.default.query(T,l.default.Scope.BLOCK))){if(R.start.node!==this.cursor.textNode){var L=l.default.find(R.start.node,!1);if(L==null)return;if(L instanceof l.default.Leaf){var O=L.split(R.start.offset);L.parent.insertBefore(this.cursor,O)}else L.insertBefore(this.cursor,R.start.node);this.cursor.attach()}this.cursor.format(T,P),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=this.scroll.length();T=Math.min(T,R-1),P=Math.min(T+P,R-1)-T;var L=void 0,O=this.scroll.leaf(T),B=s(O,2),$=B[0],X=B[1];if($==null)return null;var H=$.position(X,!0),U=s(H,2);L=U[0],X=U[1];var N=document.createRange();if(P>0){N.setStart(L,X);var k=this.scroll.leaf(T+P),z=s(k,2);if($=z[0],X=z[1],$==null)return null;var W=$.position(X,!0),K=s(W,2);return L=K[0],X=K[1],N.setEnd(L,X),N.getBoundingClientRect()}else{var J="left",F=void 0;return L instanceof Text?(X<L.data.length?(N.setStart(L,X),N.setEnd(L,X+1)):(N.setStart(L,X-1),N.setEnd(L,X),J="right"),F=N.getBoundingClientRect()):(F=$.domNode.getBoundingClientRect(),X>0&&(J="right")),{bottom:F.top+F.height,height:F.height,left:F[J],right:F[J],top:F.top,width:0}}}},{key:"getNativeRange",value:function(){var T=document.getSelection();if(T==null||T.rangeCount<=0)return null;var P=T.getRangeAt(0);if(P==null)return null;var R=this.normalizeNative(P);return b.info("getNativeRange",R),R}},{key:"getRange",value:function(){var T=this.getNativeRange();if(T==null)return[null,null];var P=this.normalizedToRange(T);return[P,T]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(T){var P=this,R=[[T.start.node,T.start.offset]];T.native.collapsed||R.push([T.end.node,T.end.offset]);var L=R.map(function($){var X=s($,2),H=X[0],U=X[1],N=l.default.find(H,!0),k=N.offset(P.scroll);return U===0?k:N instanceof l.default.Container?k+N.length():k+N.index(H,U)}),O=Math.min(Math.max.apply(Math,y(L)),this.scroll.length()-1),B=Math.min.apply(Math,[O].concat(y(L)));return new w(B,O-B)}},{key:"normalizeNative",value:function(T){if(!A(this.root,T.startContainer)||!T.collapsed&&!A(this.root,T.endContainer))return null;var P={start:{node:T.startContainer,offset:T.startOffset},end:{node:T.endContainer,offset:T.endOffset},native:T};return[P.start,P.end].forEach(function(R){for(var L=R.node,O=R.offset;!(L instanceof Text)&&L.childNodes.length>0;)if(L.childNodes.length>O)L=L.childNodes[O],O=0;else if(L.childNodes.length===O)L=L.lastChild,O=L instanceof Text?L.data.length:L.childNodes.length+1;else break;R.node=L,R.offset=O}),P}},{key:"rangeToNative",value:function(T){var P=this,R=T.collapsed?[T.index]:[T.index,T.index+T.length],L=[],O=this.scroll.length();return R.forEach(function(B,$){B=Math.min(O-1,B);var X=void 0,H=P.scroll.leaf(B),U=s(H,2),N=U[0],k=U[1],z=N.position(k,$!==0),W=s(z,2);X=W[0],k=W[1],L.push(X,k)}),L.length<2&&(L=L.concat(L)),L}},{key:"scrollIntoView",value:function(T){var P=this.lastRange;if(P!=null){var R=this.getBounds(P.index,P.length);if(R!=null){var L=this.scroll.length()-1,O=this.scroll.line(Math.min(P.index,L)),B=s(O,1),$=B[0],X=$;if(P.length>0){var H=this.scroll.line(Math.min(P.index+P.length,L)),U=s(H,1);X=U[0]}if(!($==null||X==null)){var N=T.getBoundingClientRect();R.top<N.top?T.scrollTop-=N.top-R.top:R.bottom>N.bottom&&(T.scrollTop+=R.bottom-N.bottom)}}}}},{key:"setNativeRange",value:function(T,P){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:P,O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",T,P,R,L),!(T!=null&&(this.root.parentNode==null||T.parentNode==null||R.parentNode==null))){var B=document.getSelection();if(B!=null)if(T!=null){this.hasFocus()||this.root.focus();var $=(this.getNativeRange()||{}).native;if($==null||O||T!==$.startContainer||P!==$.startOffset||R!==$.endContainer||L!==$.endOffset){T.tagName=="BR"&&(P=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode),R.tagName=="BR"&&(L=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode);var X=document.createRange();X.setStart(T,P),X.setEnd(R,L),B.removeAllRanges(),B.addRange(X)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof P=="string"&&(R=P,P=!1),b.info("setRange",T),T!=null){var L=this.rangeToNative(T);this.setNativeRange.apply(this,y(L).concat([P]))}else this.setNativeRange(null);this.update(R)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,P=this.lastRange,R=this.getRange(),L=s(R,2),O=L[0],B=L[1];if(this.lastRange=O,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,h.default)(P,this.lastRange)){var $;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[p.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(P),T];if(($=this.emitter).emit.apply($,[p.default.events.EDITOR_CHANGE].concat(X)),T!==p.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,X)}}}}]),S}();function A(S,C){try{C.parentNode}catch{return!1}return C instanceof Text&&(C=C.parentNode),S.contains(C)}i.Range=w,i.default=E},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function p(m,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,v){return g&&p(m.prototype,g),v&&p(m,v),m}}(),o=function p(m,g,v){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,g,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},a=r(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=function(p){h(m,p);function m(){return d(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"insertInto",value:function(v,y){v.children.length===0?o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertInto",this).call(this,v,y):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),m}(l.default.Embed);f.blotName="break",f.tagName="BR",i.default=f},function(n,i,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)f.hasOwnProperty(p)&&(h[p]=f[p])};return function(h,f){u(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(44),a=r(30),l=r(1),c=function(u){s(h,u);function h(f){var p=u.call(this,f)||this;return p.build(),p}return h.prototype.appendChild=function(f){this.insertBefore(f)},h.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(f){f.attach()})},h.prototype.build=function(){var f=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(p){try{var m=d(p);f.insertBefore(m,f.children.head||void 0)}catch(g){if(g instanceof l.ParchmentError)return;throw g}})},h.prototype.deleteAt=function(f,p){if(f===0&&p===this.length())return this.remove();this.children.forEachAt(f,p,function(m,g,v){m.deleteAt(g,v)})},h.prototype.descendant=function(f,p){var m=this.children.find(p),g=m[0],v=m[1];return f.blotName==null&&f(g)||f.blotName!=null&&g instanceof f?[g,v]:g instanceof h?g.descendant(f,v):[null,-1]},h.prototype.descendants=function(f,p,m){p===void 0&&(p=0),m===void 0&&(m=Number.MAX_VALUE);var g=[],v=m;return this.children.forEachAt(p,m,function(y,x,b){(f.blotName==null&&f(y)||f.blotName!=null&&y instanceof f)&&g.push(y),y instanceof h&&(g=g.concat(y.descendants(f,x,v))),v-=b}),g},h.prototype.detach=function(){this.children.forEach(function(f){f.detach()}),u.prototype.detach.call(this)},h.prototype.formatAt=function(f,p,m,g){this.children.forEachAt(f,p,function(v,y,x){v.formatAt(y,x,m,g)})},h.prototype.insertAt=function(f,p,m){var g=this.children.find(f),v=g[0],y=g[1];if(v)v.insertAt(y,p,m);else{var x=m==null?l.create("text",p):l.create(p,m);this.appendChild(x)}},h.prototype.insertBefore=function(f,p){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(m){return f instanceof m}))throw new l.ParchmentError("Cannot insert "+f.statics.blotName+" into "+this.statics.blotName);f.insertInto(this,p)},h.prototype.length=function(){return this.children.reduce(function(f,p){return f+p.length()},0)},h.prototype.moveChildren=function(f,p){this.children.forEach(function(m){f.insertBefore(m,p)})},h.prototype.optimize=function(f){if(u.prototype.optimize.call(this,f),this.children.length===0)if(this.statics.defaultChild!=null){var p=l.create(this.statics.defaultChild);this.appendChild(p),p.optimize(f)}else this.remove()},h.prototype.path=function(f,p){p===void 0&&(p=!1);var m=this.children.find(f,p),g=m[0],v=m[1],y=[[this,f]];return g instanceof h?y.concat(g.path(v,p)):(g!=null&&y.push([g,v]),y)},h.prototype.removeChild=function(f){this.children.remove(f)},h.prototype.replace=function(f){f instanceof h&&f.moveChildren(this),u.prototype.replace.call(this,f)},h.prototype.split=function(f,p){if(p===void 0&&(p=!1),!p){if(f===0)return this;if(f===this.length())return this.next}var m=this.clone();return this.parent.insertBefore(m,this.next),this.children.forEachAt(f,this.length(),function(g,v,y){g=g.split(v,p),m.appendChild(g)}),m},h.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},h.prototype.update=function(f,p){var m=this,g=[],v=[];f.forEach(function(y){y.target===m.domNode&&y.type==="childList"&&(g.push.apply(g,y.addedNodes),v.push.apply(v,y.removedNodes))}),v.forEach(function(y){if(!(y.parentNode!=null&&y.tagName!=="IFRAME"&&document.body.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var x=l.find(y);x!=null&&(x.domNode.parentNode==null||x.domNode.parentNode===m.domNode)&&x.detach()}}),g.filter(function(y){return y.parentNode==m.domNode}).sort(function(y,x){return y===x?0:y.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(y){var x=null;y.nextSibling!=null&&(x=l.find(y.nextSibling));var b=d(y);(b.next!=x||b.next==null)&&(b.parent!=null&&b.parent.removeChild(m),m.insertBefore(b,x||void 0))})},h}(a.default);function d(u){var h=l.find(u);if(h==null)try{h=l.create(u)}catch{h=l.create(l.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(p){h.domNode.appendChild(p)}),u.parentNode&&u.parentNode.replaceChild(h.domNode,u),h.attach()}return h}i.default=c},function(n,i,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)f.hasOwnProperty(p)&&(h[p]=f[p])};return function(h,f){u(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(12),a=r(31),l=r(17),c=r(1),d=function(u){s(h,u);function h(f){var p=u.call(this,f)||this;return p.attributes=new a.default(p.domNode),p}return h.formats=function(f){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return f.tagName.toLowerCase()},h.prototype.format=function(f,p){var m=c.query(f);m instanceof o.default?this.attributes.attribute(m,p):p&&m!=null&&(f!==this.statics.blotName||this.formats()[f]!==p)&&this.replaceWith(f,p)},h.prototype.formats=function(){var f=this.attributes.values(),p=this.statics.formats(this.domNode);return p!=null&&(f[this.statics.blotName]=p),f},h.prototype.replaceWith=function(f,p){var m=u.prototype.replaceWith.call(this,f,p);return this.attributes.copy(m),m},h.prototype.update=function(f,p){var m=this;u.prototype.update.call(this,f,p),f.some(function(g){return g.target===m.domNode&&g.type==="attributes"})&&this.attributes.build()},h.prototype.wrap=function(f,p){var m=u.prototype.wrap.call(this,f,p);return m instanceof h&&m.statics.scope===this.statics.scope&&this.attributes.move(m),m},h}(l.default);i.default=d},function(n,i,r){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h])};return function(d,u){c(d,u);function h(){this.constructor=d}d.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(30),a=r(1),l=function(c){s(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.value=function(u){return!0},d.prototype.index=function(u,h){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(h,1):-1},d.prototype.position=function(u,h){var f=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(f+=1),[this.parent.domNode,f]},d.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},d.scope=a.Scope.INLINE_BLOT,d}(o.default);i.default=l},function(n,i,r){var s=r(11),o=r(3),a={attributes:{compose:function(c,d,u){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var h=o(!0,{},d);u||(h=Object.keys(h).reduce(function(p,m){return h[m]!=null&&(p[m]=h[m]),p},{}));for(var f in c)c[f]!==void 0&&d[f]===void 0&&(h[f]=c[f]);return Object.keys(h).length>0?h:void 0},diff:function(c,d){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var u=Object.keys(c).concat(Object.keys(d)).reduce(function(h,f){return s(c[f],d[f])||(h[f]=d[f]===void 0?null:d[f]),h},{});return Object.keys(u).length>0?u:void 0},transform:function(c,d,u){if(typeof c!="object")return d;if(typeof d=="object"){if(!u)return d;var h=Object.keys(d).reduce(function(f,p){return c[p]===void 0&&(f[p]=d[p]),f},{});return Object.keys(h).length>0?h:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var d=this.ops[this.index];if(d){var u=this.offset,h=a.length(d);if(c>=h-u?(c=h-u,this.index+=1,this.offset=0):this.offset+=c,typeof d.delete=="number")return{delete:c};var f={};return d.attributes&&(f.attributes=d.attributes),typeof d.retain=="number"?f.retain=c:typeof d.insert=="string"?f.insert=d.insert.substr(u,c):f.insert=d.insert,f}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,d=this.index,u=this.next(),h=this.ops.slice(this.index);return this.offset=c,this.index=d,[u].concat(h)}else return[]},n.exports=a},function(n,i){var r=function(){function s(m,g){return g!=null&&m instanceof g}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function c(m,g,v,y,x){typeof g=="object"&&(v=g.depth,y=g.prototype,x=g.includeNonEnumerable,g=g.circular);var b=[],w=[],E=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof v>"u"&&(v=1/0);function A(S,C){if(S===null)return null;if(C===0)return S;var T,P;if(typeof S!="object")return S;if(s(S,o))T=new o;else if(s(S,a))T=new a;else if(s(S,l))T=new l(function(N,k){S.then(function(z){N(A(z,C-1))},function(z){k(A(z,C-1))})});else if(c.__isArray(S))T=[];else if(c.__isRegExp(S))T=new RegExp(S.source,p(S)),S.lastIndex&&(T.lastIndex=S.lastIndex);else if(c.__isDate(S))T=new Date(S.getTime());else{if(E&&Buffer.isBuffer(S))return Buffer.allocUnsafe?T=Buffer.allocUnsafe(S.length):T=new Buffer(S.length),S.copy(T),T;s(S,Error)?T=Object.create(S):typeof y>"u"?(P=Object.getPrototypeOf(S),T=Object.create(P)):(T=Object.create(y),P=y)}if(g){var R=b.indexOf(S);if(R!=-1)return w[R];b.push(S),w.push(T)}s(S,o)&&S.forEach(function(N,k){var z=A(k,C-1),W=A(N,C-1);T.set(z,W)}),s(S,a)&&S.forEach(function(N){var k=A(N,C-1);T.add(k)});for(var L in S){var O;P&&(O=Object.getOwnPropertyDescriptor(P,L)),!(O&&O.set==null)&&(T[L]=A(S[L],C-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(S),L=0;L<B.length;L++){var $=B[L],X=Object.getOwnPropertyDescriptor(S,$);X&&!X.enumerable&&!x||(T[$]=A(S[$],C-1),X.enumerable||Object.defineProperty(T,$,{enumerable:!1}))}if(x)for(var H=Object.getOwnPropertyNames(S),L=0;L<H.length;L++){var U=H[L],X=Object.getOwnPropertyDescriptor(S,U);X&&X.enumerable||(T[U]=A(S[U],C-1),Object.defineProperty(T,U,{enumerable:!1}))}return T}return A(m,v)}c.clonePrototype=function(g){if(g===null)return null;var v=function(){};return v.prototype=g,new v};function d(m){return Object.prototype.toString.call(m)}c.__objToStr=d;function u(m){return typeof m=="object"&&d(m)==="[object Date]"}c.__isDate=u;function h(m){return typeof m=="object"&&d(m)==="[object Array]"}c.__isArray=h;function f(m){return typeof m=="object"&&d(m)==="[object RegExp]"}c.__isRegExp=f;function p(m){var g="";return m.global&&(g+="g"),m.ignoreCase&&(g+="i"),m.multiline&&(g+="m"),g}return c.__getRegExpFlags=p,c}();typeof n=="object"&&n.exports&&(n.exports=r)},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function T(P,R){var L=[],O=!0,B=!1,$=void 0;try{for(var X=P[Symbol.iterator](),H;!(O=(H=X.next()).done)&&(L.push(H.value),!(R&&L.length===R));O=!0);}catch(U){B=!0,$=U}finally{try{!O&&X.return&&X.return()}finally{if(B)throw $}}return L}return function(P,R){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(P,R){for(var L=0;L<R.length;L++){var O=R[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(P,O.key,O)}}return function(P,R,L){return R&&T(P.prototype,R),L&&T(P,L),P}}(),a=function T(P,R,L){P===null&&(P=Function.prototype);var O=Object.getOwnPropertyDescriptor(P,R);if(O===void 0){var B=Object.getPrototypeOf(P);return B===null?void 0:T(B,R,L)}else{if("value"in O)return O.value;var $=O.get;return $===void 0?void 0:$.call(L)}},l=r(0),c=b(l),d=r(8),u=b(d),h=r(4),f=b(h),p=r(16),m=b(p),g=r(13),v=b(g),y=r(25),x=b(y);function b(T){return T&&T.__esModule?T:{default:T}}function w(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function E(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function A(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}function S(T){return T instanceof f.default||T instanceof h.BlockEmbed}var C=function(T){A(P,T);function P(R,L){w(this,P);var O=E(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,R));return O.emitter=L.emitter,Array.isArray(L.whitelist)&&(O.whitelist=L.whitelist.reduce(function(B,$){return B[$]=!0,B},{})),O.domNode.addEventListener("DOMNodeInserted",function(){}),O.optimize(),O.enable(),O}return o(P,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(L,O){var B=this.line(L),$=s(B,2),X=$[0],H=$[1],U=this.line(L+O),N=s(U,1),k=N[0];if(a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,L,O),k!=null&&X!==k&&H>0){if(X instanceof h.BlockEmbed||k instanceof h.BlockEmbed){this.optimize();return}if(X instanceof v.default){var z=X.newlineIndex(X.length(),!0);if(z>-1&&(X=X.split(z+1),X===k)){this.optimize();return}}else if(k instanceof v.default){var W=k.newlineIndex(0);W>-1&&k.split(W+1)}var K=k.children.head instanceof m.default?null:k.children.head;X.moveChildren(k,K),X.remove()}this.optimize()}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",L)}},{key:"formatAt",value:function(L,O,B,$){this.whitelist!=null&&!this.whitelist[B]||(a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,L,O,B,$),this.optimize())}},{key:"insertAt",value:function(L,O,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[O])){if(L>=this.length())if(B==null||c.default.query(O,c.default.Scope.BLOCK)==null){var $=c.default.create(this.statics.defaultChild);this.appendChild($),B==null&&O.endsWith(`
`)&&(O=O.slice(0,-1)),$.insertAt(0,O,B)}else{var X=c.default.create(O,B);this.appendChild(X)}else a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,L,O,B);this.optimize()}}},{key:"insertBefore",value:function(L,O){if(L.statics.scope===c.default.Scope.INLINE_BLOT){var B=c.default.create(this.statics.defaultChild);B.appendChild(L),L=B}a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,L,O)}},{key:"leaf",value:function(L){return this.path(L).pop()||[null,-1]}},{key:"line",value:function(L){return L===this.length()?this.line(L-1):this.descendant(S,L)}},{key:"lines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function $(X,H,U){var N=[],k=U;return X.children.forEachAt(H,U,function(z,W,K){S(z)?N.push(z):z instanceof c.default.Container&&(N=N.concat($(z,W,k))),k-=K}),N};return B(this,L,O)}},{key:"optimize",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,L,O),L.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,L,O))}},{key:"path",value:function(L){return a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,L).slice(1)}},{key:"update",value:function(L){if(this.batch!==!0){var O=u.default.sources.USER;typeof L=="string"&&(O=L),Array.isArray(L)||(L=this.observer.takeRecords()),L.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,O,L),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"update",this).call(this,L.concat([])),L.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,O,L)}}}]),P}(c.default.Scroll);C.blotName="scroll",C.className="ql-editor",C.tagName="DIV",C.defaultChild="block",C.allowedChildren=[f.default,h.BlockEmbed,x.default],i.default=C},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.SHORTKEY=i.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=function(){function F(ee,ie){var te=[],re=!0,me=!1,se=void 0;try{for(var oe=ee[Symbol.iterator](),be;!(re=(be=oe.next()).done)&&(te.push(be.value),!(ie&&te.length===ie));re=!0);}catch(Ae){me=!0,se=Ae}finally{try{!re&&oe.return&&oe.return()}finally{if(me)throw se}}return te}return function(ee,ie){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return F(ee,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function F(ee,ie){for(var te=0;te<ie.length;te++){var re=ie[te];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ee,re.key,re)}}return function(ee,ie,te){return ie&&F(ee.prototype,ie),te&&F(ee,te),ee}}(),l=r(21),c=T(l),d=r(11),u=T(d),h=r(3),f=T(h),p=r(2),m=T(p),g=r(20),v=T(g),y=r(0),x=T(y),b=r(5),w=T(b),E=r(10),A=T(E),S=r(9),C=T(S);function T(F){return F&&F.__esModule?F:{default:F}}function P(F,ee,ie){return ee in F?Object.defineProperty(F,ee,{value:ie,enumerable:!0,configurable:!0,writable:!0}):F[ee]=ie,F}function R(F,ee){if(!(F instanceof ee))throw new TypeError("Cannot call a class as a function")}function L(F,ee){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:F}function O(F,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);F.prototype=Object.create(ee&&ee.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(F,ee):F.__proto__=ee)}var B=(0,A.default)("quill:keyboard"),$=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=function(F){O(ee,F),a(ee,null,[{key:"match",value:function(te,re){return re=J(re),["altKey","ctrlKey","metaKey","shiftKey"].some(function(me){return!!re[me]!==te[me]&&re[me]!==null})?!1:re.key===(te.which||te.keyCode)}}]);function ee(ie,te){R(this,ee);var re=L(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ie,te));return re.bindings={},Object.keys(re.options.bindings).forEach(function(me){me==="list autofill"&&ie.scroll.whitelist!=null&&!ie.scroll.whitelist.list||re.options.bindings[me]&&re.addBinding(re.options.bindings[me])}),re.addBinding({key:ee.keys.ENTER,shiftKey:null},z),re.addBinding({key:ee.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(re.addBinding({key:ee.keys.BACKSPACE},{collapsed:!0},U),re.addBinding({key:ee.keys.DELETE},{collapsed:!0},N)):(re.addBinding({key:ee.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},U),re.addBinding({key:ee.keys.DELETE},{collapsed:!0,suffix:/^.?$/},N)),re.addBinding({key:ee.keys.BACKSPACE},{collapsed:!1},k),re.addBinding({key:ee.keys.DELETE},{collapsed:!1},k),re.addBinding({key:ee.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},U),re.listen(),re}return a(ee,[{key:"addBinding",value:function(te){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},se=J(te);if(se==null||se.key==null)return B.warn("Attempted to add invalid keyboard binding",se);typeof re=="function"&&(re={handler:re}),typeof me=="function"&&(me={handler:me}),se=(0,f.default)(se,re,me),this.bindings[se.key]=this.bindings[se.key]||[],this.bindings[se.key].push(se)}},{key:"listen",value:function(){var te=this;this.quill.root.addEventListener("keydown",function(re){if(!re.defaultPrevented){var me=re.which||re.keyCode,se=(te.bindings[me]||[]).filter(function(ae){return ee.match(re,ae)});if(se.length!==0){var oe=te.quill.getSelection();if(!(oe==null||!te.quill.hasFocus())){var be=te.quill.getLine(oe.index),Ae=o(be,2),Ie=Ae[0],Le=Ae[1],fe=te.quill.getLeaf(oe.index),ve=o(fe,2),ke=ve[0],ze=ve[1],j=oe.length===0?[ke,ze]:te.quill.getLeaf(oe.index+oe.length),V=o(j,2),le=V[0],xe=V[1],De=ke instanceof x.default.Text?ke.value().slice(0,ze):"",Ne=le instanceof x.default.Text?le.value().slice(xe):"",He={collapsed:oe.length===0,empty:oe.length===0&&Ie.length()<=1,format:te.quill.getFormat(oe),offset:Le,prefix:De,suffix:Ne},Pe=se.some(function(ae){if(ae.collapsed!=null&&ae.collapsed!==He.collapsed||ae.empty!=null&&ae.empty!==He.empty||ae.offset!=null&&ae.offset!==He.offset)return!1;if(Array.isArray(ae.format)){if(ae.format.every(function(Fe){return He.format[Fe]==null}))return!1}else if(s(ae.format)==="object"&&!Object.keys(ae.format).every(function(Fe){return ae.format[Fe]===!0?He.format[Fe]!=null:ae.format[Fe]===!1?He.format[Fe]==null:(0,u.default)(ae.format[Fe],He.format[Fe])}))return!1;return ae.prefix!=null&&!ae.prefix.test(He.prefix)||ae.suffix!=null&&!ae.suffix.test(He.suffix)?!1:ae.handler.call(te,oe,He)!==!0});Pe&&re.preventDefault()}}}})}}]),ee}(C.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:K("bold"),italic:K("italic"),underline:K("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(ee,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","+1",w.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ee,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","-1",w.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ee,ie){ie.format.indent!=null?this.quill.format("indent","-1",w.default.sources.USER):ie.format.list!=null&&this.quill.format("list",!1,w.default.sources.USER)}},"indent code-block":W(!0),"outdent code-block":W(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ee){this.quill.deleteText(ee.index-1,1,w.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(ee){this.quill.history.cutoff();var ie=new m.default().retain(ee.index).delete(ee.length).insert("	");this.quill.updateContents(ie,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ee.index+1,w.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ee,ie){this.quill.format("list",!1,w.default.sources.USER),ie.format.indent&&this.quill.format("indent",!1,w.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ee){var ie=this.quill.getLine(ee.index),te=o(ie,2),re=te[0],me=te[1],se=(0,f.default)({},re.formats(),{list:"checked"}),oe=new m.default().retain(ee.index).insert(`
`,se).retain(re.length()-me-1).retain(1,{list:"unchecked"});this.quill.updateContents(oe,w.default.sources.USER),this.quill.setSelection(ee.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ee,ie){var te=this.quill.getLine(ee.index),re=o(te,2),me=re[0],se=re[1],oe=new m.default().retain(ee.index).insert(`
`,ie.format).retain(me.length()-se-1).retain(1,{header:null});this.quill.updateContents(oe,w.default.sources.USER),this.quill.setSelection(ee.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ee,ie){var te=ie.prefix.length,re=this.quill.getLine(ee.index),me=o(re,2),se=me[0],oe=me[1];if(oe>te)return!0;var be=void 0;switch(ie.prefix.trim()){case"[]":case"[ ]":be="unchecked";break;case"[x]":be="checked";break;case"-":case"*":be="bullet";break;default:be="ordered"}this.quill.insertText(ee.index," ",w.default.sources.USER),this.quill.history.cutoff();var Ae=new m.default().retain(ee.index-oe).delete(te+1).retain(se.length()-2-oe).retain(1,{list:be});this.quill.updateContents(Ae,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ee.index-te,w.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ee){var ie=this.quill.getLine(ee.index),te=o(ie,2),re=te[0],me=te[1],se=new m.default().retain(ee.index+re.length()-me-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(se,w.default.sources.USER)}},"embed left":H(X.keys.LEFT,!1),"embed left shift":H(X.keys.LEFT,!0),"embed right":H(X.keys.RIGHT,!1),"embed right shift":H(X.keys.RIGHT,!0)}};function H(F,ee){var ie,te=F===X.keys.LEFT?"prefix":"suffix";return ie={key:F,shiftKey:ee,altKey:null},P(ie,te,/^$/),P(ie,"handler",function(me){var se=me.index;F===X.keys.RIGHT&&(se+=me.length+1);var oe=this.quill.getLeaf(se),be=o(oe,1),Ae=be[0];return Ae instanceof x.default.Embed?(F===X.keys.LEFT?ee?this.quill.setSelection(me.index-1,me.length+1,w.default.sources.USER):this.quill.setSelection(me.index-1,w.default.sources.USER):ee?this.quill.setSelection(me.index,me.length+1,w.default.sources.USER):this.quill.setSelection(me.index+me.length+1,w.default.sources.USER),!1):!0}),ie}function U(F,ee){if(!(F.index===0||this.quill.getLength()<=1)){var ie=this.quill.getLine(F.index),te=o(ie,1),re=te[0],me={};if(ee.offset===0){var se=this.quill.getLine(F.index-1),oe=o(se,1),be=oe[0];if(be!=null&&be.length()>1){var Ae=re.formats(),Ie=this.quill.getFormat(F.index-1,1);me=v.default.attributes.diff(Ae,Ie)||{}}}var Le=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ee.prefix)?2:1;this.quill.deleteText(F.index-Le,Le,w.default.sources.USER),Object.keys(me).length>0&&this.quill.formatLine(F.index-Le,Le,me,w.default.sources.USER),this.quill.focus()}}function N(F,ee){var ie=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ee.suffix)?2:1;if(!(F.index>=this.quill.getLength()-ie)){var te={},re=0,me=this.quill.getLine(F.index),se=o(me,1),oe=se[0];if(ee.offset>=oe.length()-1){var be=this.quill.getLine(F.index+1),Ae=o(be,1),Ie=Ae[0];if(Ie){var Le=oe.formats(),fe=this.quill.getFormat(F.index,1);te=v.default.attributes.diff(Le,fe)||{},re=Ie.length()}}this.quill.deleteText(F.index,ie,w.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(F.index+re-1,ie,te,w.default.sources.USER)}}function k(F){var ee=this.quill.getLines(F),ie={};if(ee.length>1){var te=ee[0].formats(),re=ee[ee.length-1].formats();ie=v.default.attributes.diff(re,te)||{}}this.quill.deleteText(F,w.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(F.index,1,ie,w.default.sources.USER),this.quill.setSelection(F.index,w.default.sources.SILENT),this.quill.focus()}function z(F,ee){var ie=this;F.length>0&&this.quill.scroll.deleteAt(F.index,F.length);var te=Object.keys(ee.format).reduce(function(re,me){return x.default.query(me,x.default.Scope.BLOCK)&&!Array.isArray(ee.format[me])&&(re[me]=ee.format[me]),re},{});this.quill.insertText(F.index,`
`,te,w.default.sources.USER),this.quill.setSelection(F.index+1,w.default.sources.SILENT),this.quill.focus(),Object.keys(ee.format).forEach(function(re){te[re]==null&&(Array.isArray(ee.format[re])||re!=="link"&&ie.quill.format(re,ee.format[re],w.default.sources.USER))})}function W(F){return{key:X.keys.TAB,shiftKey:!F,format:{"code-block":!0},handler:function(ie){var te=x.default.query("code-block"),re=ie.index,me=ie.length,se=this.quill.scroll.descendant(te,re),oe=o(se,2),be=oe[0],Ae=oe[1];if(be!=null){var Ie=this.quill.getIndex(be),Le=be.newlineIndex(Ae,!0)+1,fe=be.newlineIndex(Ie+Ae+me),ve=be.domNode.textContent.slice(Le,fe).split(`
`);Ae=0,ve.forEach(function(ke,ze){F?(be.insertAt(Le+Ae,te.TAB),Ae+=te.TAB.length,ze===0?re+=te.TAB.length:me+=te.TAB.length):ke.startsWith(te.TAB)&&(be.deleteAt(Le+Ae,te.TAB.length),Ae-=te.TAB.length,ze===0?re-=te.TAB.length:me-=te.TAB.length),Ae+=ke.length+1}),this.quill.update(w.default.sources.USER),this.quill.setSelection(re,me,w.default.sources.SILENT)}}}}function K(F){return{key:F[0].toUpperCase(),shortKey:!0,handler:function(ie,te){this.quill.format(F,!te.format[F],w.default.sources.USER)}}}function J(F){if(typeof F=="string"||typeof F=="number")return J({key:F});if((typeof F>"u"?"undefined":s(F))==="object"&&(F=(0,c.default)(F,!1)),typeof F.key=="string")if(X.keys[F.key.toUpperCase()]!=null)F.key=X.keys[F.key.toUpperCase()];else if(F.key.length===1)F.key=F.key.toUpperCase().charCodeAt(0);else return null;return F.shortKey&&(F[$]=F.shortKey,delete F.shortKey),F}i.default=X,i.SHORTKEY=$},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function v(y,x){var b=[],w=!0,E=!1,A=void 0;try{for(var S=y[Symbol.iterator](),C;!(w=(C=S.next()).done)&&(b.push(C.value),!(x&&b.length===x));w=!0);}catch(T){E=!0,A=T}finally{try{!w&&S.return&&S.return()}finally{if(E)throw A}}return b}return function(y,x){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return v(y,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function v(y,x,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,x);if(w===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,x,b)}else{if("value"in w)return w.value;var A=w.get;return A===void 0?void 0:A.call(b)}},a=function(){function v(y,x){for(var b=0;b<x.length;b++){var w=x[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,x,b){return x&&v(y.prototype,x),b&&v(y,b),y}}(),l=r(0),c=h(l),d=r(7),u=h(d);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function p(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function m(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var g=function(v){m(y,v),a(y,null,[{key:"value",value:function(){}}]);function y(x,b){f(this,y);var w=p(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,x));return w.selection=b,w.textNode=document.createTextNode(y.CONTENTS),w.domNode.appendChild(w.textNode),w._length=0,w}return a(y,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,w){if(this._length!==0)return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,b,w);for(var E=this,A=0;E!=null&&E.statics.scope!==c.default.Scope.BLOCK_BLOT;)A+=E.offset(E.parent),E=E.parent;E!=null&&(this._length=y.CONTENTS.length,E.optimize(),E.formatAt(A,y.CONTENTS.length,b,w),this._length=0)}},{key:"index",value:function(b,w){return b===this.textNode?0:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,b,w)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,w=this.selection.getNativeRange(),E=void 0,A=void 0,S=void 0;if(w!=null&&w.start.node===b&&w.end.node===b){var C=[b,w.start.offset,w.end.offset];E=C[0],A=C[1],S=C[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==y.CONTENTS){var T=this.textNode.data.split(y.CONTENTS).join("");this.next instanceof u.default?(E=this.next.domNode,this.next.insertAt(0,T),this.textNode.data=y.CONTENTS):(this.textNode.data=T,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(y.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var P=[A,S].map(function(L){return Math.max(0,Math.min(E.data.length,L-1))}),R=s(P,2);return A=R[0],S=R[1],{startNode:E,startOffset:A,endNode:E,endOffset:S}}}}},{key:"update",value:function(b,w){var E=this;if(b.some(function(S){return S.type==="characterData"&&S.target===E.textNode})){var A=this.restore();A&&(w.range=A)}}},{key:"value",value:function(){return""}}]),y}(c.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",i.default=g},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=c(s),a=r(4),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=function(p){h(m,p);function m(){return d(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(o.default.Container);f.allowedChildren=[l.default,a.BlockEmbed,f],i.default=f},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.ColorStyle=i.ColorClass=i.ColorAttributor=void 0;var s=function(){function g(v,y){for(var x=0;x<y.length;x++){var b=y[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,x){return y&&g(v.prototype,y),x&&g(v,x),v}}(),o=function g(v,y,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:g(w,y,x)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(x)}},a=r(0),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function u(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function h(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var f=function(g){h(v,g);function v(){return d(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"value",value:function(x){var b=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,x);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(w){return("00"+parseInt(w).toString(16)).slice(-2)}).join("")):b}}]),v}(l.default.Attributor.Style),p=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),m=new f("color","color",{scope:l.default.Scope.INLINE});i.ColorAttributor=f,i.ColorClass=p,i.ColorStyle=m},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.sanitize=i.default=void 0;var s=function(){function m(g,v){for(var y=0;y<v.length;y++){var x=v[y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,v,y){return v&&m(g.prototype,v),y&&m(g,y),g}}(),o=function m(g,v,y){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,v);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:m(b,v,y)}else{if("value"in x)return x.value;var w=x.get;return w===void 0?void 0:w.call(y)}},a=r(6),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var f=function(m){h(g,m);function g(){return d(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(y,x){if(y!==this.statics.blotName||!x)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,y,x);x=this.constructor.sanitize(x),this.domNode.setAttribute("href",x)}}],[{key:"create",value:function(y){var x=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,y);return y=this.sanitize(y),x.setAttribute("href",y),x.setAttribute("rel","noopener noreferrer"),x.setAttribute("target","_blank"),x}},{key:"formats",value:function(y){return y.getAttribute("href")}},{key:"sanitize",value:function(y){return p(y,this.PROTOCOL_WHITELIST)?y:this.SANITIZED_URL}}]),g}(l.default);f.blotName="link",f.tagName="A",f.SANITIZED_URL="about:blank",f.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function p(m,g){var v=document.createElement("a");v.href=m;var y=v.href.slice(0,v.href.indexOf(":"));return g.indexOf(y)>-1}i.default=f,i.sanitize=p},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=function(){function g(v,y){for(var x=0;x<y.length;x++){var b=y[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,x){return y&&g(v.prototype,y),x&&g(v,x),v}}(),a=r(23),l=u(a),c=r(107),d=u(c);function u(g){return g&&g.__esModule?g:{default:g}}function h(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}var f=0;function p(g,v){g.setAttribute(v,g.getAttribute(v)!=="true")}var m=function(){function g(v){var y=this;h(this,g),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){y.togglePicker()}),this.label.addEventListener("keydown",function(x){switch(x.keyCode){case l.default.keys.ENTER:y.togglePicker();break;case l.default.keys.ESCAPE:y.escape(),x.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(y){var x=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),y.hasAttribute("value")&&b.setAttribute("data-value",y.getAttribute("value")),y.textContent&&b.setAttribute("data-label",y.textContent),b.addEventListener("click",function(){x.selectItem(b,!0)}),b.addEventListener("keydown",function(w){switch(w.keyCode){case l.default.keys.ENTER:x.selectItem(b,!0),w.preventDefault();break;case l.default.keys.ESCAPE:x.escape(),w.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var y=document.createElement("span");return y.classList.add("ql-picker-label"),y.innerHTML=d.default,y.tabIndex="0",y.setAttribute("role","button"),y.setAttribute("aria-expanded","false"),this.container.appendChild(y),y}},{key:"buildOptions",value:function(){var y=this,x=document.createElement("span");x.classList.add("ql-picker-options"),x.setAttribute("aria-hidden","true"),x.tabIndex="-1",x.id="ql-picker-options-"+f,f+=1,this.label.setAttribute("aria-controls",x.id),this.options=x,[].slice.call(this.select.options).forEach(function(b){var w=y.buildItem(b);x.appendChild(w),b.selected===!0&&y.selectItem(w)}),this.container.appendChild(x)}},{key:"buildPicker",value:function(){var y=this;[].slice.call(this.select.attributes).forEach(function(x){y.container.setAttribute(x.name,x.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var y=this;this.close(),setTimeout(function(){return y.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(y!==b&&(b!=null&&b.classList.remove("ql-selected"),y!=null&&(y.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(y.parentNode.children,y),y.hasAttribute("data-value")?this.label.setAttribute("data-value",y.getAttribute("data-value")):this.label.removeAttribute("data-value"),y.hasAttribute("data-label")?this.label.setAttribute("data-label",y.getAttribute("data-label")):this.label.removeAttribute("data-label"),x))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var w=document.createEvent("Event");w.initEvent("change",!0,!0),this.select.dispatchEvent(w)}this.close()}}},{key:"update",value:function(){var y=void 0;if(this.select.selectedIndex>-1){var x=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];y=this.select.options[this.select.selectedIndex],this.selectItem(x)}else this.selectItem(null);var b=y!=null&&y!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),g}();i.default=m},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=B(s),a=r(5),l=B(a),c=r(4),d=B(c),u=r(16),h=B(u),f=r(25),p=B(f),m=r(24),g=B(m),v=r(35),y=B(v),x=r(6),b=B(x),w=r(22),E=B(w),A=r(7),S=B(A),C=r(55),T=B(C),P=r(42),R=B(P),L=r(23),O=B(L);function B($){return $&&$.__esModule?$:{default:$}}l.default.register({"blots/block":d.default,"blots/block/embed":c.BlockEmbed,"blots/break":h.default,"blots/container":p.default,"blots/cursor":g.default,"blots/embed":y.default,"blots/inline":b.default,"blots/scroll":E.default,"blots/text":S.default,"modules/clipboard":T.default,"modules/history":R.default,"modules/keyboard":O.default}),o.default.register(d.default,h.default,g.default,b.default,E.default,S.default),i.default=l.default},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,c){var d=this.isolate(l,c);d.remove()},a.prototype.formatAt=function(l,c,d,u){var h=this.isolate(l,c);if(s.query(d,s.Scope.BLOT)!=null&&u)h.wrap(d,u);else if(s.query(d,s.Scope.ATTRIBUTE)!=null){var f=s.create(this.statics.scope);h.wrap(f),f.format(d,u)}},a.prototype.insertAt=function(l,c,d){var u=d==null?s.create("text",c):s.create(c,d),h=this.split(l);this.parent.insertBefore(u,h)},a.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var d=null;l.children.insertBefore(this,c),c!=null&&(d=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=d)&&l.domNode.insertBefore(this.domNode,d),this.parent=l,this.attach()},a.prototype.isolate=function(l,c){var d=this.split(l);return d.split(c),d},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,c){var d=typeof l=="string"?s.create(l,c):l;return d.replace(this),d},a.prototype.split=function(l,c){return l===0?this:this.next},a.prototype.update=function(l,c){},a.prototype.wrap=function(l,c){var d=typeof l=="string"?s.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},a.blotName="abstract",a}();i.default=o},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(12),o=r(32),a=r(33),l=r(1),c=function(){function d(u){this.attributes={},this.domNode=u,this.build()}return d.prototype.attribute=function(u,h){h?u.add(this.domNode,h)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},d.prototype.build=function(){var u=this;this.attributes={};var h=s.default.keys(this.domNode),f=o.default.keys(this.domNode),p=a.default.keys(this.domNode);h.concat(f).concat(p).forEach(function(m){var g=l.query(m,l.Scope.ATTRIBUTE);g instanceof s.default&&(u.attributes[g.attrName]=g)})},d.prototype.copy=function(u){var h=this;Object.keys(this.attributes).forEach(function(f){var p=h.attributes[f].value(h.domNode);u.format(f,p)})},d.prototype.move=function(u){var h=this;this.copy(u),Object.keys(this.attributes).forEach(function(f){h.attributes[f].remove(h.domNode)}),this.attributes={}},d.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(h,f){return h[f]=u.attributes[f].value(u.domNode),h},{})},d}();i.default=c},function(n,i,r){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h])};return function(d,u){c(d,u);function h(){this.constructor=d}d.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(12);function a(c,d){var u=c.getAttribute("class")||"";return u.split(/\s+/).filter(function(h){return h.indexOf(d+"-")===0})}var l=function(c){s(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(h){return h.split("-").slice(0,-1).join("-")})},d.prototype.add=function(u,h){return this.canAdd(u,h)?(this.remove(u),u.classList.add(this.keyName+"-"+h),!0):!1},d.prototype.remove=function(u){var h=a(u,this.keyName);h.forEach(function(f){u.classList.remove(f)}),u.classList.length===0&&u.removeAttribute("class")},d.prototype.value=function(u){var h=a(u,this.keyName)[0]||"",f=h.slice(this.keyName.length+1);return this.canAdd(u,f)?f:""},d}(o.default);i.default=l},function(n,i,r){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h])};return function(d,u){c(d,u);function h(){this.constructor=d}d.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(12);function a(c){var d=c.split("-"),u=d.slice(1).map(function(h){return h[0].toUpperCase()+h.slice(1)}).join("");return d[0]+u}var l=function(c){s(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(h){var f=h.split(":");return f[0].trim()})},d.prototype.add=function(u,h){return this.canAdd(u,h)?(u.style[a(this.keyName)]=h,!0):!1},d.prototype.remove=function(u){u.style[a(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},d.prototype.value=function(u){var h=u.style[a(this.keyName)];return this.canAdd(u,h)?h:""},d}(o.default);i.default=l},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function l(c,d){for(var u=0;u<d.length;u++){var h=d[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}return function(c,d,u){return d&&l(c.prototype,d),u&&l(c,u),c}}();function o(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,d){o(this,l),this.quill=c,this.options=d,this.modules={}}return s(l,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(u){d.modules[u]==null&&d.addModule(u)})}},{key:"addModule",value:function(d){var u=this.quill.constructor.import("modules/"+d);return this.modules[d]=new u(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},i.default=a},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function v(y,x){for(var b=0;b<x.length;b++){var w=x[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,x,b){return x&&v(y.prototype,x),b&&v(y,b),y}}(),o=function v(y,x,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,x);if(w===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,x,b)}else{if("value"in w)return w.value;var A=w.get;return A===void 0?void 0:A.call(b)}},a=r(0),l=u(a),c=r(7),d=u(c);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function f(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function p(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var m="\uFEFF",g=function(v){p(y,v);function y(x){h(this,y);var b=f(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,x));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(w){b.contentNode.appendChild(w)}),b.leftGuard=document.createTextNode(m),b.rightGuard=document.createTextNode(m),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return s(y,[{key:"index",value:function(b,w){return b===this.leftGuard?0:b===this.rightGuard?1:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,b,w)}},{key:"restore",value:function(b){var w=void 0,E=void 0,A=b.data.split(m).join("");if(b===this.leftGuard)if(this.prev instanceof d.default){var S=this.prev.length();this.prev.insertAt(S,A),w={startNode:this.prev.domNode,startOffset:S+A.length}}else E=document.createTextNode(A),this.parent.insertBefore(l.default.create(E),this),w={startNode:E,startOffset:A.length};else b===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,A),w={startNode:this.next.domNode,startOffset:A.length}):(E=document.createTextNode(A),this.parent.insertBefore(l.default.create(E),this.next),w={startNode:E,startOffset:A.length}));return b.data=m,w}},{key:"update",value:function(b,w){var E=this;b.forEach(function(A){if(A.type==="characterData"&&(A.target===E.leftGuard||A.target===E.rightGuard)){var S=E.restore(A.target);S&&(w.range=S)}})}}]),y}(l.default.Embed);i.default=g},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.AlignStyle=i.AlignClass=i.AlignAttribute=void 0;var s=r(0),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new o.default.Attributor.Attribute("align","align",l),d=new o.default.Attributor.Class("align","ql-align",l),u=new o.default.Attributor.Style("align","text-align",l);i.AlignAttribute=c,i.AlignClass=d,i.AlignStyle=u},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.BackgroundStyle=i.BackgroundClass=void 0;var s=r(0),o=l(s),a=r(26);function l(u){return u&&u.__esModule?u:{default:u}}var c=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),d=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});i.BackgroundClass=c,i.BackgroundStyle=d},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.DirectionStyle=i.DirectionClass=i.DirectionAttribute=void 0;var s=r(0),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},c=new o.default.Attributor.Attribute("direction","dir",l),d=new o.default.Attributor.Class("direction","ql-direction",l),u=new o.default.Attributor.Style("direction","direction",l);i.DirectionAttribute=c,i.DirectionClass=d,i.DirectionStyle=u},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.FontClass=i.FontStyle=void 0;var s=function(){function v(y,x){for(var b=0;b<x.length;b++){var w=x[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,x,b){return x&&v(y.prototype,x),b&&v(y,b),y}}(),o=function v(y,x,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,x);if(w===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:v(E,x,b)}else{if("value"in w)return w.value;var A=w.get;return A===void 0?void 0:A.call(b)}},a=r(0),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function d(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function u(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function h(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var f={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new l.default.Attributor.Class("font","ql-font",f),m=function(v){h(y,v);function y(){return d(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"value",value:function(b){return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),y}(l.default.Attributor.Style),g=new m("font","font-family",f);i.FontStyle=g,i.FontClass=p},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.SizeStyle=i.SizeClass=void 0;var s=r(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});i.SizeClass=l,i.SizeStyle=c},function(n,i,r){n.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.getLastChangeIndex=i.default=void 0;var s=function(){function x(b,w){for(var E=0;E<w.length;E++){var A=w[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(b,A.key,A)}}return function(b,w,E){return w&&x(b.prototype,w),E&&x(b,E),b}}(),o=r(0),a=h(o),l=r(5),c=h(l),d=r(9),u=h(d);function h(x){return x&&x.__esModule?x:{default:x}}function f(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function p(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function m(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var g=function(x){m(b,x);function b(w,E){f(this,b);var A=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w,E));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(c.default.events.EDITOR_CHANGE,function(S,C,T,P){S!==c.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||P===c.default.sources.USER?A.record(C,T):A.transform(C))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return s(b,[{key:"change",value:function(E,A){if(this.stack[E].length!==0){var S=this.stack[E].pop();this.stack[A].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[E],c.default.sources.USER),this.ignoreChange=!1;var C=y(S[E]);this.quill.setSelection(C)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(E,A){if(E.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(A),C=Date.now();if(this.lastRecorded+this.options.delay>C&&this.stack.undo.length>0){var T=this.stack.undo.pop();S=S.compose(T.undo),E=T.redo.compose(E)}else this.lastRecorded=C;this.stack.undo.push({redo:E,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(E){this.stack.undo.forEach(function(A){A.undo=E.transform(A.undo,!0),A.redo=E.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=E.transform(A.undo,!0),A.redo=E.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(u.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(x){var b=x.ops[x.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(w){return a.default.query(w,a.default.Scope.BLOCK)!=null}):!1}function y(x){var b=x.reduce(function(E,A){return E+=A.delete||0,E},0),w=x.length()-b;return v(x)&&(w-=1),w}i.default=g,i.getLastChangeIndex=y},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BaseTooltip=void 0;var s=function(){function z(W,K){for(var J=0;J<K.length;J++){var F=K[J];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(W,F.key,F)}}return function(W,K,J){return K&&z(W.prototype,K),J&&z(W,J),W}}(),o=function z(W,K,J){W===null&&(W=Function.prototype);var F=Object.getOwnPropertyDescriptor(W,K);if(F===void 0){var ee=Object.getPrototypeOf(W);return ee===null?void 0:z(ee,K,J)}else{if("value"in F)return F.value;var ie=F.get;return ie===void 0?void 0:ie.call(J)}},a=r(3),l=C(a),c=r(2),d=C(c),u=r(8),h=C(u),f=r(23),p=C(f),m=r(34),g=C(m),v=r(59),y=C(v),x=r(60),b=C(x),w=r(28),E=C(w),A=r(61),S=C(A);function C(z){return z&&z.__esModule?z:{default:z}}function T(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")}function P(z,W){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:z}function R(z,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);z.prototype=Object.create(W&&W.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(z,W):z.__proto__=W)}var L=[!1,"center","right","justify"],O=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],$=["1","2","3",!1],X=["small",!1,"large","huge"],H=function(z){R(W,z);function W(K,J){T(this,W);var F=P(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,K,J)),ee=function ie(te){if(!document.body.contains(K.root))return document.body.removeEventListener("click",ie);F.tooltip!=null&&!F.tooltip.root.contains(te.target)&&document.activeElement!==F.tooltip.textbox&&!F.quill.hasFocus()&&F.tooltip.hide(),F.pickers!=null&&F.pickers.forEach(function(re){re.container.contains(te.target)||re.close()})};return K.emitter.listenDOM("click",document.body,ee),F}return s(W,[{key:"addModule",value:function(J){var F=o(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"addModule",this).call(this,J);return J==="toolbar"&&this.extendToolbar(F),F}},{key:"buildButtons",value:function(J,F){J.forEach(function(ee){var ie=ee.getAttribute("class")||"";ie.split(/\s+/).forEach(function(te){if(te.startsWith("ql-")&&(te=te.slice(3),F[te]!=null))if(te==="direction")ee.innerHTML=F[te][""]+F[te].rtl;else if(typeof F[te]=="string")ee.innerHTML=F[te];else{var re=ee.value||"";re!=null&&F[te][re]&&(ee.innerHTML=F[te][re])}})})}},{key:"buildPickers",value:function(J,F){var ee=this;this.pickers=J.map(function(te){if(te.classList.contains("ql-align"))return te.querySelector("option")==null&&k(te,L),new b.default(te,F.align);if(te.classList.contains("ql-background")||te.classList.contains("ql-color")){var re=te.classList.contains("ql-background")?"background":"color";return te.querySelector("option")==null&&k(te,O,re==="background"?"#ffffff":"#000000"),new y.default(te,F[re])}else return te.querySelector("option")==null&&(te.classList.contains("ql-font")?k(te,B):te.classList.contains("ql-header")?k(te,$):te.classList.contains("ql-size")&&k(te,X)),new E.default(te)});var ie=function(){ee.pickers.forEach(function(re){re.update()})};this.quill.on(h.default.events.EDITOR_CHANGE,ie)}}]),W}(g.default);H.DEFAULTS=(0,l.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var W=this,K=this.container.querySelector("input.ql-image[type=file]");K==null&&(K=document.createElement("input"),K.setAttribute("type","file"),K.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),K.classList.add("ql-image"),K.addEventListener("change",function(){if(K.files!=null&&K.files[0]!=null){var J=new FileReader;J.onload=function(F){var ee=W.quill.getSelection(!0);W.quill.updateContents(new d.default().retain(ee.index).delete(ee.length).insert({image:F.target.result}),h.default.sources.USER),W.quill.setSelection(ee.index+1,h.default.sources.SILENT),K.value=""},J.readAsDataURL(K.files[0])}}),this.container.appendChild(K)),K.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var U=function(z){R(W,z);function W(K,J){T(this,W);var F=P(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,K,J));return F.textbox=F.root.querySelector('input[type="text"]'),F.listen(),F}return s(W,[{key:"listen",value:function(){var J=this;this.textbox.addEventListener("keydown",function(F){p.default.match(F,"enter")?(J.save(),F.preventDefault()):p.default.match(F,"escape")&&(J.cancel(),F.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),F!=null?this.textbox.value=F:J!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+J)||""),this.root.setAttribute("data-mode",J)}},{key:"restoreFocus",value:function(){var J=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=J}},{key:"save",value:function(){var J=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var F=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",J,h.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",J,h.default.sources.USER)),this.quill.root.scrollTop=F;break}case"video":J=N(J);case"formula":{if(!J)break;var ee=this.quill.getSelection(!0);if(ee!=null){var ie=ee.index+ee.length;this.quill.insertEmbed(ie,this.root.getAttribute("data-mode"),J,h.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ie+1," ",h.default.sources.USER),this.quill.setSelection(ie+2,h.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),W}(S.default);function N(z){var W=z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return W?(W[1]||"https")+"://www.youtube.com/embed/"+W[2]+"?showinfo=0":(W=z.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(W[1]||"https")+"://player.vimeo.com/video/"+W[2]+"/":z}function k(z,W){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;W.forEach(function(J){var F=document.createElement("option");J===K?F.setAttribute("selected","selected"):F.setAttribute("value",J),z.appendChild(F)})}i.BaseTooltip=U,i.default=H},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,c=this.iterator();l=c();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,c=this.head;c!=null;){if(c===a)return l;l+=c.length(),c=c.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var c,d=this.iterator();c=d();){var u=c.length();if(a<u||l&&a===u&&(c.next==null||c.next.length()!==0))return[c,a];a-=u}return[null,0]},o.prototype.forEach=function(a){for(var l,c=this.iterator();l=c();)a(l)},o.prototype.forEachAt=function(a,l,c){if(!(l<=0))for(var d=this.find(a),u=d[0],h=d[1],f,p=a-h,m=this.iterator(u);(f=m())&&p<a+l;){var g=f.length();a>p?c(f,a-p,Math.min(l,p+g-a)):c(f,0,Math.min(g,a+l-p)),p+=g}},o.prototype.map=function(a){return this.reduce(function(l,c){return l.push(a(c)),l},[])},o.prototype.reduce=function(a,l){for(var c,d=this.iterator();c=d();)l=a(l,c);return l},o}();i.default=s},function(n,i,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)f.hasOwnProperty(p)&&(h[p]=f[p])};return function(h,f){u(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(17),a=r(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,d=function(u){s(h,u);function h(f){var p=u.call(this,f)||this;return p.scroll=p,p.observer=new MutationObserver(function(m){p.update(m)}),p.observer.observe(p.domNode,l),p.attach(),p}return h.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},h.prototype.deleteAt=function(f,p){this.update(),f===0&&p===this.length()?this.children.forEach(function(m){m.remove()}):u.prototype.deleteAt.call(this,f,p)},h.prototype.formatAt=function(f,p,m,g){this.update(),u.prototype.formatAt.call(this,f,p,m,g)},h.prototype.insertAt=function(f,p,m){this.update(),u.prototype.insertAt.call(this,f,p,m)},h.prototype.optimize=function(f,p){var m=this;f===void 0&&(f=[]),p===void 0&&(p={}),u.prototype.optimize.call(this,p);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)f.push(g.pop());for(var v=function(w,E){E===void 0&&(E=!0),!(w==null||w===m)&&w.domNode.parentNode!=null&&(w.domNode[a.DATA_KEY].mutations==null&&(w.domNode[a.DATA_KEY].mutations=[]),E&&v(w.parent))},y=function(w){w.domNode[a.DATA_KEY]==null||w.domNode[a.DATA_KEY].mutations==null||(w instanceof o.default&&w.children.forEach(y),w.optimize(p))},x=f,b=0;x.length>0;b+=1){if(b>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(x.forEach(function(w){var E=a.find(w.target,!0);E!=null&&(E.domNode===w.target&&(w.type==="childList"?(v(a.find(w.previousSibling,!1)),[].forEach.call(w.addedNodes,function(A){var S=a.find(A,!1);v(S,!1),S instanceof o.default&&S.children.forEach(function(C){v(C,!1)})})):w.type==="attributes"&&v(E.prev)),v(E))}),this.children.forEach(y),x=[].slice.call(this.observer.takeRecords()),g=x.slice();g.length>0;)f.push(g.pop())}},h.prototype.update=function(f,p){var m=this;p===void 0&&(p={}),f=f||this.observer.takeRecords(),f.map(function(g){var v=a.find(g.target,!0);return v==null?null:v.domNode[a.DATA_KEY].mutations==null?(v.domNode[a.DATA_KEY].mutations=[g],v):(v.domNode[a.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===m||g.domNode[a.DATA_KEY]==null||g.update(g.domNode[a.DATA_KEY].mutations||[],p)}),this.domNode[a.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,p),this.optimize(f,p)},h.blotName="scroll",h.defaultChild="block",h.scope=a.Scope.BLOCK_BLOT,h.tagName="DIV",h}(o.default);i.default=d},function(n,i,r){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])};return function(u,h){d(u,h);function f(){this.constructor=u}u.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(18),a=r(1);function l(d,u){if(Object.keys(d).length!==Object.keys(u).length)return!1;for(var h in d)if(d[h]!==u[h])return!1;return!0}var c=function(d){s(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.formats=function(h){if(h.tagName!==u.tagName)return d.formats.call(this,h)},u.prototype.format=function(h,f){var p=this;h===this.statics.blotName&&!f?(this.children.forEach(function(m){m instanceof o.default||(m=m.wrap(u.blotName,!0)),p.attributes.copy(m)}),this.unwrap()):d.prototype.format.call(this,h,f)},u.prototype.formatAt=function(h,f,p,m){if(this.formats()[p]!=null||a.query(p,a.Scope.ATTRIBUTE)){var g=this.isolate(h,f);g.format(p,m)}else d.prototype.formatAt.call(this,h,f,p,m)},u.prototype.optimize=function(h){d.prototype.optimize.call(this,h);var f=this.formats();if(Object.keys(f).length===0)return this.unwrap();var p=this.next;p instanceof u&&p.prev===this&&l(f,p.formats())&&(p.moveChildren(this),p.remove())},u.blotName="inline",u.scope=a.Scope.INLINE_BLOT,u.tagName="SPAN",u}(o.default);i.default=c},function(n,i,r){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h])};return function(d,u){c(d,u);function h(){this.constructor=d}d.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(18),a=r(1),l=function(c){s(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(u){var h=a.query(d.blotName).tagName;if(u.tagName!==h)return c.formats.call(this,u)},d.prototype.format=function(u,h){a.query(u,a.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!h?this.replaceWith(d.blotName):c.prototype.format.call(this,u,h))},d.prototype.formatAt=function(u,h,f,p){a.query(f,a.Scope.BLOCK)!=null?this.format(f,p):c.prototype.formatAt.call(this,u,h,f,p)},d.prototype.insertAt=function(u,h,f){if(f==null||a.query(h,a.Scope.INLINE)!=null)c.prototype.insertAt.call(this,u,h,f);else{var p=this.split(u),m=a.create(h,f);p.parent.insertBefore(m,p)}},d.prototype.update=function(u,h){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,u,h)},d.blotName="block",d.scope=a.Scope.BLOCK_BLOT,d.tagName="P",d}(o.default);i.default=l},function(n,i,r){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var u in d)d.hasOwnProperty(u)&&(c[u]=d[u])};return function(c,d){l(c,d);function u(){this.constructor=c}c.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(19),a=function(l){s(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(d){},c.prototype.format=function(d,u){l.prototype.formatAt.call(this,0,this.length(),d,u)},c.prototype.formatAt=function(d,u,h,f){d===0&&u===this.length()?this.format(h,f):l.prototype.formatAt.call(this,d,u,h,f)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(o.default);i.default=a},function(n,i,r){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h])};return function(d,u){c(d,u);function h(){this.constructor=d}d.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=r(19),a=r(1),l=function(c){s(d,c);function d(u){var h=c.call(this,u)||this;return h.text=h.statics.value(h.domNode),h}return d.create=function(u){return document.createTextNode(u)},d.value=function(u){var h=u.data;return h.normalize&&(h=h.normalize()),h},d.prototype.deleteAt=function(u,h){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+h)},d.prototype.index=function(u,h){return this.domNode===u?h:-1},d.prototype.insertAt=function(u,h,f){f==null?(this.text=this.text.slice(0,u)+h+this.text.slice(u),this.domNode.data=this.text):c.prototype.insertAt.call(this,u,h,f)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(u){c.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(u,h){return[this.domNode,u]},d.prototype.split=function(u,h){if(h===void 0&&(h=!1),!h){if(u===0)return this;if(u===this.length())return this.next}var f=a.create(this.domNode.splitText(u));return this.parent.insertBefore(f,this.next),this.text=this.statics.value(this.domNode),f},d.prototype.update=function(u,h){var f=this;u.some(function(p){return p.type==="characterData"&&p.target===f.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=a.Scope.INLINE_BLOT,d}(o.default);i.default=l},function(n,i,r){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=a.length;var d=c.indexOf(a,l);return d!==-1&&d===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),d=c.length>>>0,u=arguments[1],h,f=0;f<d;f++)if(h=c[f],l.call(u,h,f,c))return h}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,i){var r=-1,s=1,o=0;function a(b,w,E){if(b==w)return b?[[o,b]]:[];(E<0||b.length<E)&&(E=null);var A=u(b,w),S=b.substring(0,A);b=b.substring(A),w=w.substring(A),A=h(b,w);var C=b.substring(b.length-A);b=b.substring(0,b.length-A),w=w.substring(0,w.length-A);var T=l(b,w);return S&&T.unshift([o,S]),C&&T.push([o,C]),p(T),E!=null&&(T=v(T,E)),T=y(T),T}function l(b,w){var E;if(!b)return[[s,w]];if(!w)return[[r,b]];var A=b.length>w.length?b:w,S=b.length>w.length?w:b,C=A.indexOf(S);if(C!=-1)return E=[[s,A.substring(0,C)],[o,S],[s,A.substring(C+S.length)]],b.length>w.length&&(E[0][0]=E[2][0]=r),E;if(S.length==1)return[[r,b],[s,w]];var T=f(b,w);if(T){var P=T[0],R=T[1],L=T[2],O=T[3],B=T[4],$=a(P,L),X=a(R,O);return $.concat([[o,B]],X)}return c(b,w)}function c(b,w){for(var E=b.length,A=w.length,S=Math.ceil((E+A)/2),C=S,T=2*S,P=new Array(T),R=new Array(T),L=0;L<T;L++)P[L]=-1,R[L]=-1;P[C+1]=0,R[C+1]=0;for(var O=E-A,B=O%2!=0,$=0,X=0,H=0,U=0,N=0;N<S;N++){for(var k=-N+$;k<=N-X;k+=2){var z=C+k,W;k==-N||k!=N&&P[z-1]<P[z+1]?W=P[z+1]:W=P[z-1]+1;for(var K=W-k;W<E&&K<A&&b.charAt(W)==w.charAt(K);)W++,K++;if(P[z]=W,W>E)X+=2;else if(K>A)$+=2;else if(B){var J=C+O-k;if(J>=0&&J<T&&R[J]!=-1){var F=E-R[J];if(W>=F)return d(b,w,W,K)}}}for(var ee=-N+H;ee<=N-U;ee+=2){var J=C+ee,F;ee==-N||ee!=N&&R[J-1]<R[J+1]?F=R[J+1]:F=R[J-1]+1;for(var ie=F-ee;F<E&&ie<A&&b.charAt(E-F-1)==w.charAt(A-ie-1);)F++,ie++;if(R[J]=F,F>E)U+=2;else if(ie>A)H+=2;else if(!B){var z=C+O-ee;if(z>=0&&z<T&&P[z]!=-1){var W=P[z],K=C+W-z;if(F=E-F,W>=F)return d(b,w,W,K)}}}}return[[r,b],[s,w]]}function d(b,w,E,A){var S=b.substring(0,E),C=w.substring(0,A),T=b.substring(E),P=w.substring(A),R=a(S,C),L=a(T,P);return R.concat(L)}function u(b,w){if(!b||!w||b.charAt(0)!=w.charAt(0))return 0;for(var E=0,A=Math.min(b.length,w.length),S=A,C=0;E<S;)b.substring(C,S)==w.substring(C,S)?(E=S,C=E):A=S,S=Math.floor((A-E)/2+E);return S}function h(b,w){if(!b||!w||b.charAt(b.length-1)!=w.charAt(w.length-1))return 0;for(var E=0,A=Math.min(b.length,w.length),S=A,C=0;E<S;)b.substring(b.length-S,b.length-C)==w.substring(w.length-S,w.length-C)?(E=S,C=E):A=S,S=Math.floor((A-E)/2+E);return S}function f(b,w){var E=b.length>w.length?b:w,A=b.length>w.length?w:b;if(E.length<4||A.length*2<E.length)return null;function S(X,H,U){for(var N=X.substring(U,U+Math.floor(X.length/4)),k=-1,z="",W,K,J,F;(k=H.indexOf(N,k+1))!=-1;){var ee=u(X.substring(U),H.substring(k)),ie=h(X.substring(0,U),H.substring(0,k));z.length<ie+ee&&(z=H.substring(k-ie,k)+H.substring(k,k+ee),W=X.substring(0,U-ie),K=X.substring(U+ee),J=H.substring(0,k-ie),F=H.substring(k+ee))}return z.length*2>=X.length?[W,K,J,F,z]:null}var C=S(E,A,Math.ceil(E.length/4)),T=S(E,A,Math.ceil(E.length/2)),P;if(!C&&!T)return null;T?C?P=C[4].length>T[4].length?C:T:P=T:P=C;var R,L,O,B;b.length>w.length?(R=P[0],L=P[1],O=P[2],B=P[3]):(O=P[0],B=P[1],R=P[2],L=P[3]);var $=P[4];return[R,L,O,B,$]}function p(b){b.push([o,""]);for(var w=0,E=0,A=0,S="",C="",T;w<b.length;)switch(b[w][0]){case s:A++,C+=b[w][1],w++;break;case r:E++,S+=b[w][1],w++;break;case o:E+A>1?(E!==0&&A!==0&&(T=u(C,S),T!==0&&(w-E-A>0&&b[w-E-A-1][0]==o?b[w-E-A-1][1]+=C.substring(0,T):(b.splice(0,0,[o,C.substring(0,T)]),w++),C=C.substring(T),S=S.substring(T)),T=h(C,S),T!==0&&(b[w][1]=C.substring(C.length-T)+b[w][1],C=C.substring(0,C.length-T),S=S.substring(0,S.length-T))),E===0?b.splice(w-A,E+A,[s,C]):A===0?b.splice(w-E,E+A,[r,S]):b.splice(w-E-A,E+A,[r,S],[s,C]),w=w-E-A+(E?1:0)+(A?1:0)+1):w!==0&&b[w-1][0]==o?(b[w-1][1]+=b[w][1],b.splice(w,1)):w++,A=0,E=0,S="",C="";break}b[b.length-1][1]===""&&b.pop();var P=!1;for(w=1;w<b.length-1;)b[w-1][0]==o&&b[w+1][0]==o&&(b[w][1].substring(b[w][1].length-b[w-1][1].length)==b[w-1][1]?(b[w][1]=b[w-1][1]+b[w][1].substring(0,b[w][1].length-b[w-1][1].length),b[w+1][1]=b[w-1][1]+b[w+1][1],b.splice(w-1,1),P=!0):b[w][1].substring(0,b[w+1][1].length)==b[w+1][1]&&(b[w-1][1]+=b[w+1][1],b[w][1]=b[w][1].substring(b[w+1][1].length)+b[w+1][1],b.splice(w+1,1),P=!0)),w++;P&&p(b)}var m=a;m.INSERT=s,m.DELETE=r,m.EQUAL=o,n.exports=m;function g(b,w){if(w===0)return[o,b];for(var E=0,A=0;A<b.length;A++){var S=b[A];if(S[0]===r||S[0]===o){var C=E+S[1].length;if(w===C)return[A+1,b];if(w<C){b=b.slice();var T=w-E,P=[S[0],S[1].slice(0,T)],R=[S[0],S[1].slice(T)];return b.splice(A,1,P,R),[A+1,b]}else E=C}}throw new Error("cursor_pos is out of bounds!")}function v(b,w){var E=g(b,w),A=E[1],S=E[0],C=A[S],T=A[S+1];if(C==null)return b;if(C[0]!==o)return b;if(T!=null&&C[1]+T[1]===T[1]+C[1])return A.splice(S,2,T,C),x(A,S,2);if(T!=null&&T[1].indexOf(C[1])===0){A.splice(S,2,[T[0],C[1]],[0,C[1]]);var P=T[1].slice(C[1].length);return P.length>0&&A.splice(S+2,0,[T[0],P]),x(A,S,3)}else return b}function y(b){for(var w=!1,E=function(T){return T.charCodeAt(0)>=56320&&T.charCodeAt(0)<=57343},A=function(T){return T.charCodeAt(T.length-1)>=55296&&T.charCodeAt(T.length-1)<=56319},S=2;S<b.length;S+=1)b[S-2][0]===o&&A(b[S-2][1])&&b[S-1][0]===r&&E(b[S-1][1])&&b[S][0]===s&&E(b[S][1])&&(w=!0,b[S-1][1]=b[S-2][1].slice(-1)+b[S-1][1],b[S][1]=b[S-2][1].slice(-1)+b[S][1],b[S-2][1]=b[S-2][1].slice(0,-1));if(!w)return b;for(var C=[],S=0;S<b.length;S+=1)b[S][1].length>0&&C.push(b[S]);return C}function x(b,w,E){for(var A=w+E-1;A>=0&&A>=w-1;A--)if(A+1<b.length){var S=b[A],C=b[A+1];S[0]===C[1]&&b.splice(A,2,[S[0],S[1]+C[1]])}return b}},function(n,i){i=n.exports=typeof Object.keys=="function"?Object.keys:r,i.shim=r;function r(s){var o=[];for(var a in s)o.push(a);return o}},function(n,i){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";i=n.exports=r?s:o,i.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}i.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,i){var r=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)r.call(u,h)&&d.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d,u){var h=s?s+d:d,f=this._events[h];if(u)return!!f;if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,g=new Array(m);p<m;p++)g[p]=f[p].fn;return g},l.prototype.emit=function(d,u,h,f,p,m){var g=s?s+d:d;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,x,b;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,f),!0;case 5:return v.fn.call(v.context,u,h,f,p),!0;case 6:return v.fn.call(v.context,u,h,f,p,m),!0}for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];v.fn.apply(v.context,x)}else{var w=v.length,E;for(b=0;b<w;b++)switch(v[b].once&&this.removeListener(d,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,u);break;case 3:v[b].fn.call(v[b].context,u,h);break;case 4:v[b].fn.call(v[b].context,u,h,f);break;default:if(!x)for(E=1,x=new Array(y-1);E<y;E++)x[E-1]=arguments[E];v[b].fn.apply(v[b].context,x)}}return!0},l.prototype.on=function(d,u,h){var f=new a(u,h||this),p=s?s+d:d;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],f]:this._events[p].push(f):(this._events[p]=f,this._eventsCount++),this},l.prototype.once=function(d,u,h){var f=new a(u,h||this,!0),p=s?s+d:d;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],f]:this._events[p].push(f):(this._events[p]=f,this._eventsCount++),this},l.prototype.removeListener=function(d,u,h,f){var p=s?s+d:d;if(!this._events[p])return this;if(!u)return--this._eventsCount===0?this._events=new o:delete this._events[p],this;var m=this._events[p];if(m.fn)m.fn===u&&(!f||m.once)&&(!h||m.context===h)&&(--this._eventsCount===0?this._events=new o:delete this._events[p]);else{for(var g=0,v=[],y=m.length;g<y;g++)(m[g].fn!==u||f&&!m[g].once||h&&m[g].context!==h)&&v.push(m[g]);v.length?this._events[p]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new o:delete this._events[p]}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=s?s+d:d,this._events[u]&&(--this._eventsCount===0?this._events=new o:delete this._events[u])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.matchText=i.matchSpacing=i.matchNewline=i.matchBlot=i.matchAttributor=i.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe},o=function(){function fe(ve,ke){var ze=[],j=!0,V=!1,le=void 0;try{for(var xe=ve[Symbol.iterator](),De;!(j=(De=xe.next()).done)&&(ze.push(De.value),!(ke&&ze.length===ke));j=!0);}catch(Ne){V=!0,le=Ne}finally{try{!j&&xe.return&&xe.return()}finally{if(V)throw le}}return ze}return function(ve,ke){if(Array.isArray(ve))return ve;if(Symbol.iterator in Object(ve))return fe(ve,ke);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function fe(ve,ke){for(var ze=0;ze<ke.length;ze++){var j=ke[ze];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(ve,j.key,j)}}return function(ve,ke,ze){return ke&&fe(ve.prototype,ke),ze&&fe(ve,ze),ve}}(),l=r(3),c=R(l),d=r(2),u=R(d),h=r(0),f=R(h),p=r(5),m=R(p),g=r(10),v=R(g),y=r(9),x=R(y),b=r(36),w=r(37),E=r(13),A=R(E),S=r(26),C=r(38),T=r(39),P=r(40);function R(fe){return fe&&fe.__esModule?fe:{default:fe}}function L(fe,ve,ke){return ve in fe?Object.defineProperty(fe,ve,{value:ke,enumerable:!0,configurable:!0,writable:!0}):fe[ve]=ke,fe}function O(fe,ve){if(!(fe instanceof ve))throw new TypeError("Cannot call a class as a function")}function B(fe,ve){if(!fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve&&(typeof ve=="object"||typeof ve=="function")?ve:fe}function $(fe,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ve);fe.prototype=Object.create(ve&&ve.prototype,{constructor:{value:fe,enumerable:!1,writable:!0,configurable:!0}}),ve&&(Object.setPrototypeOf?Object.setPrototypeOf(fe,ve):fe.__proto__=ve)}var X=(0,v.default)("quill:clipboard"),H="__ql-matcher",U=[[Node.TEXT_NODE,Le],[Node.TEXT_NODE,be],["br",me],[Node.ELEMENT_NODE,be],[Node.ELEMENT_NODE,re],[Node.ELEMENT_NODE,Ae],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,Ie],["li",oe],["b",ie.bind(ie,"bold")],["i",ie.bind(ie,"italic")],["style",se]],N=[b.AlignAttribute,C.DirectionAttribute].reduce(function(fe,ve){return fe[ve.keyName]=ve,fe},{}),k=[b.AlignStyle,w.BackgroundStyle,S.ColorStyle,C.DirectionStyle,T.FontStyle,P.SizeStyle].reduce(function(fe,ve){return fe[ve.keyName]=ve,fe},{}),z=function(fe){$(ve,fe);function ve(ke,ze){O(this,ve);var j=B(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this,ke,ze));return j.quill.root.addEventListener("paste",j.onPaste.bind(j)),j.container=j.quill.addContainer("ql-clipboard"),j.container.setAttribute("contenteditable",!0),j.container.setAttribute("tabindex",-1),j.matchers=[],U.concat(j.options.matchers).forEach(function(V){var le=o(V,2),xe=le[0],De=le[1];!ze.matchVisual&&De===Ae||j.addMatcher(xe,De)}),j}return a(ve,[{key:"addMatcher",value:function(ze,j){this.matchers.push([ze,j])}},{key:"convert",value:function(ze){if(typeof ze=="string")return this.container.innerHTML=ze.replace(/\>\r?\n +\</g,"><"),this.convert();var j=this.quill.getFormat(this.quill.selection.savedRange.index);if(j[A.default.blotName]){var V=this.container.innerText;return this.container.innerHTML="",new u.default().insert(V,L({},A.default.blotName,j[A.default.blotName]))}var le=this.prepareMatching(),xe=o(le,2),De=xe[0],Ne=xe[1],He=ee(this.container,De,Ne);return J(He,`
`)&&He.ops[He.ops.length-1].attributes==null&&(He=He.compose(new u.default().retain(He.length()-1).delete(1))),X.log("convert",this.container.innerHTML,He),this.container.innerHTML="",He}},{key:"dangerouslyPasteHTML",value:function(ze,j){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;if(typeof ze=="string")this.quill.setContents(this.convert(ze),j),this.quill.setSelection(0,m.default.sources.SILENT);else{var le=this.convert(j);this.quill.updateContents(new u.default().retain(ze).concat(le),V),this.quill.setSelection(ze+le.length(),m.default.sources.SILENT)}}},{key:"onPaste",value:function(ze){var j=this;if(!(ze.defaultPrevented||!this.quill.isEnabled())){var V=this.quill.getSelection(),le=new u.default().retain(V.index),xe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(m.default.sources.SILENT),setTimeout(function(){le=le.concat(j.convert()).delete(V.length),j.quill.updateContents(le,m.default.sources.USER),j.quill.setSelection(le.length()-V.length,m.default.sources.SILENT),j.quill.scrollingContainer.scrollTop=xe,j.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ze=this,j=[],V=[];return this.matchers.forEach(function(le){var xe=o(le,2),De=xe[0],Ne=xe[1];switch(De){case Node.TEXT_NODE:V.push(Ne);break;case Node.ELEMENT_NODE:j.push(Ne);break;default:[].forEach.call(ze.container.querySelectorAll(De),function(He){He[H]=He[H]||[],He[H].push(Ne)});break}}),[j,V]}}]),ve}(x.default);z.DEFAULTS={matchers:[],matchVisual:!0};function W(fe,ve,ke){return(typeof ve>"u"?"undefined":s(ve))==="object"?Object.keys(ve).reduce(function(ze,j){return W(ze,j,ve[j])},fe):fe.reduce(function(ze,j){return j.attributes&&j.attributes[ve]?ze.push(j):ze.insert(j.insert,(0,c.default)({},L({},ve,ke),j.attributes))},new u.default)}function K(fe){if(fe.nodeType!==Node.ELEMENT_NODE)return{};var ve="__ql-computed-style";return fe[ve]||(fe[ve]=window.getComputedStyle(fe))}function J(fe,ve){for(var ke="",ze=fe.ops.length-1;ze>=0&&ke.length<ve.length;--ze){var j=fe.ops[ze];if(typeof j.insert!="string")break;ke=j.insert+ke}return ke.slice(-1*ve.length)===ve}function F(fe){if(fe.childNodes.length===0)return!1;var ve=K(fe);return["block","list-item"].indexOf(ve.display)>-1}function ee(fe,ve,ke){return fe.nodeType===fe.TEXT_NODE?ke.reduce(function(ze,j){return j(fe,ze)},new u.default):fe.nodeType===fe.ELEMENT_NODE?[].reduce.call(fe.childNodes||[],function(ze,j){var V=ee(j,ve,ke);return j.nodeType===fe.ELEMENT_NODE&&(V=ve.reduce(function(le,xe){return xe(j,le)},V),V=(j[H]||[]).reduce(function(le,xe){return xe(j,le)},V)),ze.concat(V)},new u.default):new u.default}function ie(fe,ve,ke){return W(ke,fe,!0)}function te(fe,ve){var ke=f.default.Attributor.Attribute.keys(fe),ze=f.default.Attributor.Class.keys(fe),j=f.default.Attributor.Style.keys(fe),V={};return ke.concat(ze).concat(j).forEach(function(le){var xe=f.default.query(le,f.default.Scope.ATTRIBUTE);xe!=null&&(V[xe.attrName]=xe.value(fe),V[xe.attrName])||(xe=N[le],xe!=null&&(xe.attrName===le||xe.keyName===le)&&(V[xe.attrName]=xe.value(fe)||void 0),xe=k[le],xe!=null&&(xe.attrName===le||xe.keyName===le)&&(xe=k[le],V[xe.attrName]=xe.value(fe)||void 0))}),Object.keys(V).length>0&&(ve=W(ve,V)),ve}function re(fe,ve){var ke=f.default.query(fe);if(ke==null)return ve;if(ke.prototype instanceof f.default.Embed){var ze={},j=ke.value(fe);j!=null&&(ze[ke.blotName]=j,ve=new u.default().insert(ze,ke.formats(fe)))}else typeof ke.formats=="function"&&(ve=W(ve,ke.blotName,ke.formats(fe)));return ve}function me(fe,ve){return J(ve,`
`)||ve.insert(`
`),ve}function se(){return new u.default}function oe(fe,ve){var ke=f.default.query(fe);if(ke==null||ke.blotName!=="list-item"||!J(ve,`
`))return ve;for(var ze=-1,j=fe.parentNode;!j.classList.contains("ql-clipboard");)(f.default.query(j)||{}).blotName==="list"&&(ze+=1),j=j.parentNode;return ze<=0?ve:ve.compose(new u.default().retain(ve.length()-1).retain(1,{indent:ze}))}function be(fe,ve){return J(ve,`
`)||(F(fe)||ve.length()>0&&fe.nextSibling&&F(fe.nextSibling))&&ve.insert(`
`),ve}function Ae(fe,ve){if(F(fe)&&fe.nextElementSibling!=null&&!J(ve,`

`)){var ke=fe.offsetHeight+parseFloat(K(fe).marginTop)+parseFloat(K(fe).marginBottom);fe.nextElementSibling.offsetTop>fe.offsetTop+ke*1.5&&ve.insert(`
`)}return ve}function Ie(fe,ve){var ke={},ze=fe.style||{};return ze.fontStyle&&K(fe).fontStyle==="italic"&&(ke.italic=!0),ze.fontWeight&&(K(fe).fontWeight.startsWith("bold")||parseInt(K(fe).fontWeight)>=700)&&(ke.bold=!0),Object.keys(ke).length>0&&(ve=W(ve,ke)),parseFloat(ze.textIndent||0)>0&&(ve=new u.default().insert("	").concat(ve)),ve}function Le(fe,ve){var ke=fe.data;if(fe.parentNode.tagName==="O:P")return ve.insert(ke.trim());if(ke.trim().length===0&&fe.parentNode.classList.contains("ql-clipboard"))return ve;if(!K(fe.parentNode).whiteSpace.startsWith("pre")){var ze=function(V,le){return le=le.replace(/[^\u00a0]/g,""),le.length<1&&V?" ":le};ke=ke.replace(/\r\n/g," ").replace(/\n/g," "),ke=ke.replace(/\s\s+/g,ze.bind(ze,!0)),(fe.previousSibling==null&&F(fe.parentNode)||fe.previousSibling!=null&&F(fe.previousSibling))&&(ke=ke.replace(/^\s+/,ze.bind(ze,!1))),(fe.nextSibling==null&&F(fe.parentNode)||fe.nextSibling!=null&&F(fe.nextSibling))&&(ke=ke.replace(/\s+$/,ze.bind(ze,!1)))}return ve.insert(ke)}i.default=z,i.matchAttributor=te,i.matchBlot=re,i.matchNewline=be,i.matchSpacing=Ae,i.matchText=Le},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function p(m,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,v){return g&&p(m.prototype,g),v&&p(m,v),m}}(),o=function p(m,g,v){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,g,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},a=r(6),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=function(p){h(m,p);function m(){return d(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"optimize",value:function(v){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),m}(l.default);f.blotName="bold",f.tagName=["STRONG","B"],i.default=f},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.addControls=i.default=void 0;var s=function(){function P(R,L){var O=[],B=!0,$=!1,X=void 0;try{for(var H=R[Symbol.iterator](),U;!(B=(U=H.next()).done)&&(O.push(U.value),!(L&&O.length===L));B=!0);}catch(N){$=!0,X=N}finally{try{!B&&H.return&&H.return()}finally{if($)throw X}}return O}return function(R,L){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return P(R,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(R,L){for(var O=0;O<L.length;O++){var B=L[O];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(R,B.key,B)}}return function(R,L,O){return L&&P(R.prototype,L),O&&P(R,O),R}}(),a=r(2),l=v(a),c=r(0),d=v(c),u=r(5),h=v(u),f=r(10),p=v(f),m=r(9),g=v(m);function v(P){return P&&P.__esModule?P:{default:P}}function y(P,R,L){return R in P?Object.defineProperty(P,R,{value:L,enumerable:!0,configurable:!0,writable:!0}):P[R]=L,P}function x(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}function b(P,R){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:P}function w(P,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);P.prototype=Object.create(R&&R.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(P,R):P.__proto__=R)}var E=(0,p.default)("quill:toolbar"),A=function(P){w(R,P);function R(L,O){x(this,R);var B=b(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,L,O));if(Array.isArray(B.options.container)){var $=document.createElement("div");C($,B.options.container),L.container.parentNode.insertBefore($,L.container),B.container=$}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var X;return X=E.error("Container required for toolbar",B.options),b(B,X)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(H){B.addHandler(H,B.options.handlers[H])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(H){B.attach(H)}),B.quill.on(h.default.events.EDITOR_CHANGE,function(H,U){H===h.default.events.SELECTION_CHANGE&&B.update(U)}),B.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){var H=B.quill.selection.getRange(),U=s(H,1),N=U[0];B.update(N)}),B}return o(R,[{key:"addHandler",value:function(O,B){this.handlers[O]=B}},{key:"attach",value:function(O){var B=this,$=[].find.call(O.classList,function(H){return H.indexOf("ql-")===0});if($){if($=$.slice(3),O.tagName==="BUTTON"&&O.setAttribute("type","button"),this.handlers[$]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[$]==null){E.warn("ignoring attaching to disabled format",$,O);return}if(d.default.query($)==null){E.warn("ignoring attaching to nonexistent format",$,O);return}}var X=O.tagName==="SELECT"?"change":"click";O.addEventListener(X,function(H){var U=void 0;if(O.tagName==="SELECT"){if(O.selectedIndex<0)return;var N=O.options[O.selectedIndex];N.hasAttribute("selected")?U=!1:U=N.value||!1}else O.classList.contains("ql-active")?U=!1:U=O.value||!O.hasAttribute("value"),H.preventDefault();B.quill.focus();var k=B.quill.selection.getRange(),z=s(k,1),W=z[0];if(B.handlers[$]!=null)B.handlers[$].call(B,U);else if(d.default.query($).prototype instanceof d.default.Embed){if(U=prompt("Enter "+$),!U)return;B.quill.updateContents(new l.default().retain(W.index).delete(W.length).insert(y({},$,U)),h.default.sources.USER)}else B.quill.format($,U,h.default.sources.USER);B.update(W)}),this.controls.push([$,O])}}},{key:"update",value:function(O){var B=O==null?{}:this.quill.getFormat(O);this.controls.forEach(function($){var X=s($,2),H=X[0],U=X[1];if(U.tagName==="SELECT"){var N=void 0;if(O==null)N=null;else if(B[H]==null)N=U.querySelector("option[selected]");else if(!Array.isArray(B[H])){var k=B[H];typeof k=="string"&&(k=k.replace(/\"/g,'\\"')),N=U.querySelector('option[value="'+k+'"]')}N==null?(U.value="",U.selectedIndex=-1):N.selected=!0}else if(O==null)U.classList.remove("ql-active");else if(U.hasAttribute("value")){var z=B[H]===U.getAttribute("value")||B[H]!=null&&B[H].toString()===U.getAttribute("value")||B[H]==null&&!U.getAttribute("value");U.classList.toggle("ql-active",z)}else U.classList.toggle("ql-active",B[H]!=null)})}}]),R}(g.default);A.DEFAULTS={};function S(P,R,L){var O=document.createElement("button");O.setAttribute("type","button"),O.classList.add("ql-"+R),L!=null&&(O.value=L),P.appendChild(O)}function C(P,R){Array.isArray(R[0])||(R=[R]),R.forEach(function(L){var O=document.createElement("span");O.classList.add("ql-formats"),L.forEach(function(B){if(typeof B=="string")S(O,B);else{var $=Object.keys(B)[0],X=B[$];Array.isArray(X)?T(O,$,X):S(O,$,X)}}),P.appendChild(O)})}function T(P,R,L){var O=document.createElement("select");O.classList.add("ql-"+R),L.forEach(function(B){var $=document.createElement("option");B!==!1?$.setAttribute("value",B):$.setAttribute("selected","selected"),O.appendChild($)}),P.appendChild(O)}A.DEFAULTS={container:null,handlers:{clean:function(){var R=this,L=this.quill.getSelection();if(L!=null)if(L.length==0){var O=this.quill.getFormat();Object.keys(O).forEach(function(B){d.default.query(B,d.default.Scope.INLINE)!=null&&R.quill.format(B,!1)})}else this.quill.removeFormat(L,h.default.sources.USER)},direction:function(R){var L=this.quill.getFormat().align;R==="rtl"&&L==null?this.quill.format("align","right",h.default.sources.USER):!R&&L==="right"&&this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",R,h.default.sources.USER)},indent:function(R){var L=this.quill.getSelection(),O=this.quill.getFormat(L),B=parseInt(O.indent||0);if(R==="+1"||R==="-1"){var $=R==="+1"?1:-1;O.direction==="rtl"&&($*=-1),this.quill.format("indent",B+$,h.default.sources.USER)}},link:function(R){R===!0&&(R=prompt("Enter link URL:")),this.quill.format("link",R,h.default.sources.USER)},list:function(R){var L=this.quill.getSelection(),O=this.quill.getFormat(L);R==="check"?O.list==="checked"||O.list==="unchecked"?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",R,h.default.sources.USER)}}},i.default=A,i.addControls=C},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function p(m,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,v){return g&&p(m.prototype,g),v&&p(m,v),m}}(),o=function p(m,g,v){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,g,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},a=r(28),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=function(p){h(m,p);function m(g,v){d(this,m);var y=u(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,g));return y.label.innerHTML=v,y.container.classList.add("ql-color-picker"),[].slice.call(y.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(x){x.classList.add("ql-primary")}),y}return s(m,[{key:"buildItem",value:function(v){var y=o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"buildItem",this).call(this,v);return y.style.backgroundColor=v.getAttribute("value")||"",y}},{key:"selectItem",value:function(v,y){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"selectItem",this).call(this,v,y);var x=this.label.querySelector(".ql-color-label"),b=v&&v.getAttribute("data-value")||"";x&&(x.tagName==="line"?x.style.stroke=b:x.style.fill=b)}}]),m}(l.default);i.default=f},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function p(m,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,v){return g&&p(m.prototype,g),v&&p(m,v),m}}(),o=function p(m,g,v){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,g,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},a=r(28),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=function(p){h(m,p);function m(g,v){d(this,m);var y=u(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,g));return y.container.classList.add("ql-icon-picker"),[].forEach.call(y.container.querySelectorAll(".ql-picker-item"),function(x){x.innerHTML=v[x.getAttribute("data-value")||""]}),y.defaultItem=y.container.querySelector(".ql-selected"),y.selectItem(y.defaultItem),y}return s(m,[{key:"selectItem",value:function(v,y){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"selectItem",this).call(this,v,y),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),m}(l.default);i.default=f},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function l(c,d){for(var u=0;u<d.length;u++){var h=d[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}return function(c,d,u){return d&&l(c.prototype,d),u&&l(c,u),c}}();function o(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,d){var u=this;o(this,l),this.quill=c,this.boundsContainer=d||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var u=d.left+d.width/2-this.root.offsetWidth/2,h=d.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=h+"px",this.root.classList.remove("ql-flip");var f=this.boundsContainer.getBoundingClientRect(),p=this.root.getBoundingClientRect(),m=0;if(p.right>f.right&&(m=f.right-p.right,this.root.style.left=u+m+"px"),p.left<f.left&&(m=f.left-p.left,this.root.style.left=u+m+"px"),p.bottom>f.bottom){var g=p.bottom-p.top,v=d.bottom-d.top+g;this.root.style.top=h-v+"px",this.root.classList.add("ql-flip")}return m}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();i.default=a},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function T(P,R){var L=[],O=!0,B=!1,$=void 0;try{for(var X=P[Symbol.iterator](),H;!(O=(H=X.next()).done)&&(L.push(H.value),!(R&&L.length===R));O=!0);}catch(U){B=!0,$=U}finally{try{!O&&X.return&&X.return()}finally{if(B)throw $}}return L}return function(P,R){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function T(P,R,L){P===null&&(P=Function.prototype);var O=Object.getOwnPropertyDescriptor(P,R);if(O===void 0){var B=Object.getPrototypeOf(P);return B===null?void 0:T(B,R,L)}else{if("value"in O)return O.value;var $=O.get;return $===void 0?void 0:$.call(L)}},a=function(){function T(P,R){for(var L=0;L<R.length;L++){var O=R[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(P,O.key,O)}}return function(P,R,L){return R&&T(P.prototype,R),L&&T(P,L),P}}(),l=r(3),c=x(l),d=r(8),u=x(d),h=r(43),f=x(h),p=r(27),m=x(p),g=r(15),v=r(41),y=x(v);function x(T){return T&&T.__esModule?T:{default:T}}function b(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function w(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function E(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(T){E(P,T);function P(R,L){b(this,P),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=A);var O=w(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,R,L));return O.quill.container.classList.add("ql-snow"),O}return a(P,[{key:"extendToolbar",value:function(L){L.container.classList.add("ql-snow"),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),y.default),this.tooltip=new C(this.quill,this.options.bounds),L.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(O,B){L.handlers.link.call(L,!B.format.link)})}}]),P}(f.default);S.DEFAULTS=(0,c.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){if(P){var R=this.quill.getSelection();if(R==null||R.length==0)return;var L=this.quill.getText(R);/^\S+@\S+\.\S+$/.test(L)&&L.indexOf("mailto:")!==0&&(L="mailto:"+L);var O=this.quill.theme.tooltip;O.edit("link",L)}else this.quill.format("link",!1)}}}}});var C=function(T){E(P,T);function P(R,L){b(this,P);var O=w(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,R,L));return O.preview=O.root.querySelector("a.ql-preview"),O}return a(P,[{key:"listen",value:function(){var L=this;o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(O){L.root.classList.contains("ql-editing")?L.save():L.edit("link",L.preview.textContent),O.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(O){if(L.linkRange!=null){var B=L.linkRange;L.restoreFocus(),L.quill.formatText(B,"link",!1,u.default.sources.USER),delete L.linkRange}O.preventDefault(),L.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(O,B,$){if(O!=null){if(O.length===0&&$===u.default.sources.USER){var X=L.quill.scroll.descendant(m.default,O.index),H=s(X,2),U=H[0],N=H[1];if(U!=null){L.linkRange=new g.Range(O.index-N,U.length());var k=m.default.formats(U.domNode);L.preview.textContent=k,L.preview.setAttribute("href",k),L.show(),L.position(L.quill.getBounds(L.linkRange));return}}else delete L.linkRange;L.hide()}})}},{key:"show",value:function(){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),P}(h.BaseTooltip);C.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),i.default=S},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(29),o=j(s),a=r(36),l=r(38),c=r(64),d=r(65),u=j(d),h=r(66),f=j(h),p=r(67),m=j(p),g=r(37),v=r(26),y=r(39),x=r(40),b=r(56),w=j(b),E=r(68),A=j(E),S=r(27),C=j(S),T=r(69),P=j(T),R=r(70),L=j(R),O=r(71),B=j(O),$=r(72),X=j($),H=r(73),U=j(H),N=r(13),k=j(N),z=r(74),W=j(z),K=r(75),J=j(K),F=r(57),ee=j(F),ie=r(41),te=j(ie),re=r(28),me=j(re),se=r(59),oe=j(se),be=r(60),Ae=j(be),Ie=r(61),Le=j(Ie),fe=r(108),ve=j(fe),ke=r(62),ze=j(ke);function j(V){return V&&V.__esModule?V:{default:V}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":y.FontClass,"attributors/class/size":x.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":y.FontStyle,"attributors/style/size":x.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":y.FontClass,"formats/size":x.SizeClass,"formats/blockquote":u.default,"formats/code-block":k.default,"formats/header":f.default,"formats/list":m.default,"formats/bold":w.default,"formats/code":N.Code,"formats/italic":A.default,"formats/link":C.default,"formats/script":P.default,"formats/strike":L.default,"formats/underline":B.default,"formats/image":X.default,"formats/video":U.default,"formats/list/item":p.ListItem,"modules/formula":W.default,"modules/syntax":J.default,"modules/toolbar":ee.default,"themes/bubble":ve.default,"themes/snow":ze.default,"ui/icons":te.default,"ui/picker":me.default,"ui/icon-picker":Ae.default,"ui/color-picker":oe.default,"ui/tooltip":Le.default},!0),i.default=o.default},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.IndentClass=void 0;var s=function(){function m(g,v){for(var y=0;y<v.length;y++){var x=v[y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,v,y){return v&&m(g.prototype,v),y&&m(g,y),g}}(),o=function m(g,v,y){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,v);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:m(b,v,y)}else{if("value"in x)return x.value;var w=x.get;return w===void 0?void 0:w.call(y)}},a=r(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var f=function(m){h(g,m);function g(){return d(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"add",value:function(y,x){if(x==="+1"||x==="-1"){var b=this.value(y)||0;x=x==="+1"?b+1:b-1}return x===0?(this.remove(y),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,y,x)}},{key:"canAdd",value:function(y,x){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,y,x)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,y,parseInt(x))}},{key:"value",value:function(y){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,y))||void 0}}]),g}(l.default.Attributor.Class),p=new f("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});i.IndentClass=p},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(4),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function c(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function d(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var u=function(h){d(f,h);function f(){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);u.blotName="blockquote",u.tagName="blockquote",i.default=u},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function f(p,m){for(var g=0;g<m.length;g++){var v=m[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,g){return m&&f(p.prototype,m),g&&f(p,g),p}}(),o=r(4),a=l(o);function l(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function d(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=function(f){u(p,f);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return s(p,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),p}(a.default);h.blotName="header",h.tagName=["H1","H2","H3","H4","H5","H6"],i.default=h},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.ListItem=void 0;var s=function(){function b(w,E){for(var A=0;A<E.length;A++){var S=E[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,E,A){return E&&b(w.prototype,E),A&&b(w,A),w}}(),o=function b(w,E,A){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,E);if(S===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:b(C,E,A)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(A)}},a=r(0),l=f(a),c=r(4),d=f(c),u=r(25),h=f(u);function f(b){return b&&b.__esModule?b:{default:b}}function p(b,w,E){return w in b?Object.defineProperty(b,w,{value:E,enumerable:!0,configurable:!0,writable:!0}):b[w]=E,b}function m(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function g(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function v(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var y=function(b){v(w,b);function w(){return m(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"format",value:function(A,S){A===x.blotName&&!S?this.replaceWith(l.default.create(this.statics.scope)):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,A,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,S){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,S),this):(this.parent.unwrap(),o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,A,S))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:o(w.__proto__||Object.getPrototypeOf(w),"formats",this).call(this,A)}}]),w}(d.default);y.blotName="list-item",y.tagName="LI";var x=function(b){v(w,b),s(w,null,[{key:"create",value:function(A){var S=A==="ordered"?"OL":"UL",C=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,S);return(A==="checked"||A==="unchecked")&&C.setAttribute("data-checked",A==="checked"),C}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function w(E){m(this,w);var A=g(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E)),S=function(T){if(T.target.parentNode===E){var P=A.statics.formats(E),R=l.default.find(T.target);P==="checked"?R.format("list","unchecked"):P==="unchecked"&&R.format("list","checked")}};return E.addEventListener("touchstart",S),E.addEventListener("mousedown",S),A}return s(w,[{key:"format",value:function(A,S){this.children.length>0&&this.children.tail.format(A,S)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,S){if(A instanceof y)o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,A,S);else{var C=S==null?this.length():S.offset(this),T=this.split(C);T.parent.insertBefore(A,T)}}},{key:"optimize",value:function(A){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,A);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var S=l.default.create(this.statics.defaultChild);A.moveChildren(S),this.appendChild(S)}o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replace",this).call(this,A)}}]),w}(h.default);x.blotName="list",x.scope=l.default.Scope.BLOCK_BLOT,x.tagName=["OL","UL"],x.defaultChild="list-item",x.allowedChildren=[y],i.ListItem=y,i.default=x},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(56),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function c(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function d(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var u=function(h){d(f,h);function f(){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);u.blotName="italic",u.tagName=["EM","I"],i.default=u},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function p(m,g){for(var v=0;v<g.length;v++){var y=g[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,g,v){return g&&p(m.prototype,g),v&&p(m,v),m}}(),o=function p(m,g,v){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,g);if(y===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:p(x,g,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},a=r(6),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=function(p){h(m,p);function m(){return d(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),m}(l.default);f.blotName="script",f.tagName=["SUB","SUP"],i.default=f},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(6),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function c(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function d(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var u=function(h){d(f,h);function f(){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);u.blotName="strike",u.tagName="S",i.default=u},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(6),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function c(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function d(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var u=function(h){d(f,h);function f(){return l(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);u.blotName="underline",u.tagName="U",i.default=u},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function g(v,y){for(var x=0;x<y.length;x++){var b=y[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,x){return y&&g(v.prototype,y),x&&g(v,x),v}}(),o=function g(v,y,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:g(w,y,x)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(x)}},a=r(0),l=d(a),c=r(27);function d(g){return g&&g.__esModule?g:{default:g}}function u(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function h(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function f(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=["alt","height","width"],m=function(g){f(v,g);function v(){return u(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(x,b){p.indexOf(x)>-1?b?this.domNode.setAttribute(x,b):this.domNode.removeAttribute(x):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,x,b)}}],[{key:"create",value:function(x){var b=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,x);return typeof x=="string"&&b.setAttribute("src",this.sanitize(x)),b}},{key:"formats",value:function(x){return p.reduce(function(b,w){return x.hasAttribute(w)&&(b[w]=x.getAttribute(w)),b},{})}},{key:"match",value:function(x){return/\.(jpe?g|gif|png)$/.test(x)||/^data:image\/.+;base64/.test(x)}},{key:"sanitize",value:function(x){return(0,c.sanitize)(x,["http","https","data"])?x:"//:0"}},{key:"value",value:function(x){return x.getAttribute("src")}}]),v}(l.default.Embed);m.blotName="image",m.tagName="IMG",i.default=m},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function g(v,y){for(var x=0;x<y.length;x++){var b=y[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,x){return y&&g(v.prototype,y),x&&g(v,x),v}}(),o=function g(v,y,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:g(w,y,x)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(x)}},a=r(4),l=r(27),c=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function u(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function h(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function f(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=["height","width"],m=function(g){f(v,g);function v(){return u(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(x,b){p.indexOf(x)>-1?b?this.domNode.setAttribute(x,b):this.domNode.removeAttribute(x):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,x,b)}}],[{key:"create",value:function(x){var b=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,x);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(x)),b}},{key:"formats",value:function(x){return p.reduce(function(b,w){return x.hasAttribute(w)&&(b[w]=x.getAttribute(w)),b},{})}},{key:"sanitize",value:function(x){return c.default.sanitize(x)}},{key:"value",value:function(x){return x.getAttribute("src")}}]),v}(a.BlockEmbed);m.blotName="video",m.className="ql-video",m.tagName="IFRAME",i.default=m},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.FormulaBlot=void 0;var s=function(){function x(b,w){for(var E=0;E<w.length;E++){var A=w[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(b,A.key,A)}}return function(b,w,E){return w&&x(b.prototype,w),E&&x(b,E),b}}(),o=function x(b,w,E){b===null&&(b=Function.prototype);var A=Object.getOwnPropertyDescriptor(b,w);if(A===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:x(S,w,E)}else{if("value"in A)return A.value;var C=A.get;return C===void 0?void 0:C.call(E)}},a=r(35),l=f(a),c=r(5),d=f(c),u=r(9),h=f(u);function f(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function m(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function g(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var v=function(x){g(b,x);function b(){return p(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,null,[{key:"create",value:function(E){var A=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,E);return typeof E=="string"&&(window.katex.render(E,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",E)),A}},{key:"value",value:function(E){return E.getAttribute("data-value")}}]),b}(l.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var y=function(x){g(b,x),s(b,null,[{key:"register",value:function(){d.default.register(v,!0)}}]);function b(){p(this,b);var w=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return w}return b}(h.default);i.FormulaBlot=v,i.default=y},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.CodeToken=i.CodeBlock=void 0;var s=function(){function E(A,S){for(var C=0;C<S.length;C++){var T=S[C];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,T.key,T)}}return function(A,S,C){return S&&E(A.prototype,S),C&&E(A,C),A}}(),o=function E(A,S,C){A===null&&(A=Function.prototype);var T=Object.getOwnPropertyDescriptor(A,S);if(T===void 0){var P=Object.getPrototypeOf(A);return P===null?void 0:E(P,S,C)}else{if("value"in T)return T.value;var R=T.get;return R===void 0?void 0:R.call(C)}},a=r(0),l=m(a),c=r(5),d=m(c),u=r(9),h=m(u),f=r(13),p=m(f);function m(E){return E&&E.__esModule?E:{default:E}}function g(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function v(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function y(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var x=function(E){y(A,E);function A(){return g(this,A),v(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"replaceWith",value:function(C){this.domNode.textContent=this.domNode.textContent,this.attach(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,C)}},{key:"highlight",value:function(C){var T=this.domNode.textContent;this.cachedText!==T&&((T.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=C(T),this.domNode.normalize(),this.attach()),this.cachedText=T)}}]),A}(p.default);x.className="ql-syntax";var b=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),w=function(E){y(A,E),s(A,null,[{key:"register",value:function(){d.default.register(b,!0),d.default.register(x,!0)}}]);function A(S,C){g(this,A);var T=v(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,S,C));if(typeof T.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var P=null;return T.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(P),P=setTimeout(function(){T.highlight(),P=null},T.options.interval)}),T.highlight(),T}return s(A,[{key:"highlight",value:function(){var C=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var T=this.quill.getSelection();this.quill.scroll.descendants(x).forEach(function(P){P.highlight(C.options.highlight)}),this.quill.update(d.default.sources.SILENT),T!=null&&this.quill.setSelection(T,d.default.sources.SILENT)}}}]),A}(h.default);w.DEFAULTS={highlight:function(){return window.hljs==null?null:function(E){var A=window.hljs.highlightAuto(E);return A.value}}(),interval:1e3},i.CodeBlock=x,i.CodeToken=b,i.default=w},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,i){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,i){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,i){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,i){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,i){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BubbleTooltip=void 0;var s=function A(S,C,T){S===null&&(S=Function.prototype);var P=Object.getOwnPropertyDescriptor(S,C);if(P===void 0){var R=Object.getPrototypeOf(S);return R===null?void 0:A(R,C,T)}else{if("value"in P)return P.value;var L=P.get;return L===void 0?void 0:L.call(T)}},o=function(){function A(S,C){for(var T=0;T<C.length;T++){var P=C[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,C,T){return C&&A(S.prototype,C),T&&A(S,T),S}}(),a=r(3),l=g(a),c=r(8),d=g(c),u=r(43),h=g(u),f=r(15),p=r(41),m=g(p);function g(A){return A&&A.__esModule?A:{default:A}}function v(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function y(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function x(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],w=function(A){x(S,A);function S(C,T){v(this,S),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=b);var P=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C,T));return P.quill.container.classList.add("ql-bubble"),P}return o(S,[{key:"extendToolbar",value:function(T){this.tooltip=new E(this.quill,this.options.bounds),this.tooltip.root.appendChild(T.container),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),m.default)}}]),S}(h.default);w.DEFAULTS=(0,l.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var E=function(A){x(S,A);function S(C,T){v(this,S);var P=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C,T));return P.quill.on(d.default.events.EDITOR_CHANGE,function(R,L,O,B){if(R===d.default.events.SELECTION_CHANGE)if(L!=null&&L.length>0&&B===d.default.sources.USER){P.show(),P.root.style.left="0px",P.root.style.width="",P.root.style.width=P.root.offsetWidth+"px";var $=P.quill.getLines(L.index,L.length);if($.length===1)P.position(P.quill.getBounds(L));else{var X=$[$.length-1],H=P.quill.getIndex(X),U=Math.min(X.length()-1,L.index+L.length-H),N=P.quill.getBounds(new f.Range(H,U));P.position(N)}}else document.activeElement!==P.textbox&&P.quill.hasFocus()&&P.hide()}),P}return o(S,[{key:"listen",value:function(){var T=this;s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){T.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!T.root.classList.contains("ql-hidden")){var P=T.quill.getSelection();P!=null&&T.position(T.quill.getBounds(P))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(T){var P=s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,T),R=this.root.querySelector(".ql-tooltip-arrow");if(R.style.marginLeft="",P===0)return P;R.style.marginLeft=-1*P-R.offsetWidth/2+"px"}}]),S}(u.BaseTooltip);E.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),i.BubbleTooltip=E,i.default=w},function(n,i,r){n.exports=r(63)}]).default})})($1t);var X1t=oa&&oa.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),pP=oa&&oa.__assign||function(){return pP=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},pP.apply(this,arguments)},Y1t=oa&&oa.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i},HR=oa&&oa.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Ic=HR(Z),K1t=HR(du),wb=HR(q1t),ote=HR(k4),Z1t=function(t){X1t(e,t);function e(n){var i=t.call(this,n)||this;i.dirtyProps=["modules","formats","bounds","theme","children"],i.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],i.state={generation:0},i.selection=null,i.onEditorChange=function(s,o,a,l){var c,d,u,h;s==="text-change"?(d=(c=i).onEditorChangeText)===null||d===void 0||d.call(c,i.editor.root.innerHTML,o,l,i.unprivilegedEditor):s==="selection-change"&&((h=(u=i).onEditorChangeSelection)===null||h===void 0||h.call(u,o,l,i.unprivilegedEditor))};var r=i.isControlled()?n.value:n.defaultValue;return i.value=r??"",i}return e.prototype.validateProps=function(n){var i;if(Ic.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ic.default.Children.count(n.children)){var r=Ic.default.Children.only(n.children);if(((i=r)===null||i===void 0?void 0:i.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,i){var r=this,s;if(this.validateProps(n),!this.editor||this.state.generation!==i.generation)return!0;if("value"in n){var o=this.getEditorContents(),a=(s=n.value,s??"");this.isEqualValue(a,o)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),Y1t(this.cleanProps,this.dirtyProps).some(function(l){return!wb.default(n[l],r.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var i=this;return this.dirtyProps.some(function(r){return!wb.default(n[r],i.props[r])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,i){var r=this;if(this.editor&&this.shouldComponentRegenerate(n)){var s=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==i.generation){var a=this.regenerationSnapshot,s=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(s),ate(function(){return r.setEditorSelection(c,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,i){var r=new ote.default(n,i);return i.tabIndex!=null&&this.setEditorTabIndex(r,i.tabIndex),this.hookEditor(r),r},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,i){return this.isDelta(n)&&this.isDelta(i)?wb.default(n.ops,i.ops):wb.default(n,i)},e.prototype.setEditorContents=function(n,i){var r=this;this.value=i;var s=this.getEditorSelection();typeof i=="string"?n.setContents(n.clipboard.convert(i)):n.setContents(i),ate(function(){return r.setEditorSelection(n,s)})},e.prototype.setEditorSelection=function(n,i){if(this.selection=i,i){var r=n.getLength();i.index=Math.max(0,Math.min(i.index,r-1)),i.length=Math.max(0,Math.min(i.length,r-1-i.index)),n.setSelection(i)}},e.prototype.setEditorTabIndex=function(n,i){var r,s;!((s=(r=n)===null||r===void 0?void 0:r.scroll)===null||s===void 0)&&s.domNode&&(n.scroll.domNode.tabIndex=i)},e.prototype.setEditorReadOnly=function(n,i){i?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var i=n;return{getHTML:function(){return i.root.innerHTML},getLength:i.getLength.bind(i),getText:i.getText.bind(i),getContents:i.getContents.bind(i),getSelection:i.getSelection.bind(i),getBounds:i.getBounds.bind(i)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=K1t.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,i=this.props,r=i.children,s=i.preserveWhitespace,o=this.state.generation,a={key:o,ref:function(l){n.editingArea=l}};return Ic.default.Children.count(r)?Ic.default.cloneElement(Ic.default.Children.only(r),a):s?Ic.default.createElement("pre",pP({},a)):Ic.default.createElement("div",pP({},a))},e.prototype.render=function(){var n;return Ic.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,i,r,s){var o,a;if(this.editor){var l=this.isDelta(this.value)?s.getContents():s.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=i,this.value=l,(a=(o=this.props).onChange)===null||a===void 0||a.call(o,n,i,r,s))}},e.prototype.onEditorChangeSelection=function(n,i,r){var s,o,a,l,c,d;if(this.editor){var u=this.getEditorSelection(),h=!u&&n,f=u&&!n;wb.default(n,u)||(this.selection=n,(o=(s=this.props).onChangeSelection)===null||o===void 0||o.call(s,n,i,r),h?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,n,i,r):f&&((d=(c=this.props).onBlur)===null||d===void 0||d.call(c,u,i,r)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=ote.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Ic.default.Component);function ate(t){Promise.resolve().then(t)}var Q1t=Z1t;let Yv;const hN=500;function J1t(){const t=wu(),e=NU(),{diaryId:n}=Zae(),[i,r]=Z.useState(""),[s,o]=Z.useState(""),[a,l]=Z.useState(!1),[c,d]=Z.useState(""),u=Yb(y=>y.allFavorites.value),h=Yb(y=>y.diary.value);return Z.useEffect(()=>{console.log(n),(async()=>{try{const x=await qc.getOne(n);r(x.title),o(x.description),l(x.favorites),d(x.content),console.log(x)}catch(x){alert(x),console.log(x)}})()},[n]),Te(fg,{children:jt(hd,{sx:{alignItems:"center",width:"100%"},children:[Te(S_,{variant:"outlined",onClick:async()=>{try{const y=await qc.update(n,{favorites:!a});let x=[...u];a?x=x.filter(b=>b.id!==n):x.unshift(y),e(TT(x)),l(!a)}catch(y){alert(y)}},children:a?Te(I4,{color:"warning"}):Te(I4,{})}),Te(S_,{variant:"outlined",color:"error",onClick:async()=>{try{if(await qc.delete(n),a){const x=u.filter(b=>b.id!==n);e(TT(x))}const y=h.filter(x=>x.id!==n);y.length===0?t("/diary"):t(`/diary/${y[0].id}`),e($w(y))}catch(y){alert(y)}},sx:{marginLeft:"90%"},children:Te(Dme,{})}),jt(hd,{sx:{padding:"10px 50px"},children:[Te(Im,{value:i,placeholder:"Untitled",variant:"outlined",fullWidth:!0,onChange:async y=>{clearTimeout(Yv);const x=y.target.value;r(x);let b=[...h];const w=b.findIndex(E=>E.id===n);if(b[w]={...b[w],title:x},e($w(b)),a){let E=[...u];const A=E.findIndex(S=>S.id===n);E[A]={...b[w],title:x},e(TT(E))}Yv=setTimeout(async()=>{try{await qc.update(n,{title:x})}catch(E){console.log(E),alert(E)}},hN)},sx:{"& .MuiOutlinedInput-input":{padding:0},"& .MuiOutlinedInput-notchedOutline":{border:"unset"},"& .MuiOutlinedInput-root":{fontSize:"2rem",fontWeight:"700"}}}),Te(Im,{value:s,placeholder:"Add a descrpition",variant:"outlined",multiline:!0,fullWidth:!0,onChange:async y=>{clearTimeout(Yv);const x=y.target.value;o(x),Yv=setTimeout(async()=>{try{await qc.update(n,{description:x})}catch(b){console.log(b),alert(b)}},hN)},sx:{"& .MuiOutlinedInput-input":{padding:0},"& .MuiOutlinedInput-notchedOutline":{border:"unset"},"& .MuiOutlinedInput-root":{fontSize:"1rem"}}}),Te(Q1t,{placeholder:"compose your epic",theme:"bubble",value:c,onChange:async y=>{clearTimeout(Yv);const x=y;d(x),Yv=setTimeout(async()=>{try{await qc.update(n,{content:x})}catch(b){console.log(b),alert(b)}},hN)}})]})]})})}function ebt(){return Te(BBe,{children:jt(OBe,{children:[Te(kc,{path:"/",element:Te(kFe,{})}),Te(kc,{path:"/login",element:Te(lWe,{})}),Te(kc,{path:"/signup",element:Te(cWe,{})}),Te(kc,{path:"/home",element:Te(Upt,{})}),Te(kc,{path:"/schedule",element:Te(C1t,{})}),jt(kc,{path:"/diary",element:Te(I1t,{}),children:[Te(kc,{index:!0,element:Te(k1t,{})}),Te(kc,{path:"/diary/:diaryId",element:Te(J1t,{})})]}),Te(kc,{})]})})}fN.createRoot(document.getElementById("root")).render(Te(Uye,{store:zxe,children:Te(ebt,{})}))});export default tbt();
